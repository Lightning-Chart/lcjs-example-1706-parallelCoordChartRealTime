/*! For license information please see vendor.563add9ab3eca0e4e4f4.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[502],{377:(t,e,i)=>{Object.defineProperty(e,"o",{value:!0});var s=i(568),r=i(570),n=function(t){if(t&&t.o)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}(s),o=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(r);class h{constructor(){this.u=!0}S(){return this.u}}class a extends h{constructor(t,e){super(),this.M=t,this._=t,this.u=e}C(t){return t!==this.M&&(this._=this.M,this.M=t,this.u=!0),this}T(){return this.M}S(){return super.S()}}const l=(t,e)=>({x:t,y:e}),c=(t,e)=>({x:t,y:e}),u=(t,e,i)=>({position:t,high:e,low:i}),d=(t,e,i)=>({x:t,y:e,z:i}),f=t=>{const e=Array(0),i=Array(0);return t.length>0&&t.forEach((t=>{e.push(l(t.position,t.high)),i.push(l(t.position,t.low))})),[e,i]},g=(t,e)=>({min:t,max:e}),y=(t,e,i,s)=>({x:t,y:e,width:i,height:s}),p=(t,e=!0)=>new a(t,e),m=(t=0,e=0,i=0,s=0)=>({left:t,top:e,right:i,bottom:s}),x=m,S=(t,e)=>({left:void 0!==e.left?e.left:t.left,top:void 0!==e.top?e.top:t.top,right:void 0!==e.right?e.right:t.right,bottom:void 0!==e.bottom?e.bottom:t.bottom}),v=s.Record({type:"color",r:1,g:1,b:1,a:1});class A extends v{constructor(t){super(t)}toUint32(){return void 0!==this.F||(this.F=R(this.getR(),this.getG(),this.getB(),this.getA())),this.F}toString(){return`color:${this.r},${this.g},${this.b},${this.a}`}setA(t){return this.set("a",t/255)}setR(t){return this.set("r",t/255)}setG(t){return this.set("g",t/255)}setB(t){return this.set("b",t/255)}getA(){return 255*this.get("a")}getR(){return 255*this.get("r")}getG(){return 255*this.get("g")}getB(){return 255*this.get("b")}getHighlight(){return this.I||(this.I=new A({r:this.r+.45*(1-this.r),g:this.g+.45*(1-this.g),b:this.b+.45*(1-this.b),a:this.a<1?this.a+.45*(1-this.a):1})),this.I}getLighter(){return this.P||(this.P=new A({r:this.r+.4*(1-this.r),g:this.g+.4*(1-this.g),b:this.b+.4*(1-this.b),a:this.a})),this.P}getDarker(){return this.L||(this.L=new A({r:this.r-.4*(1-this.r),g:this.g-.4*(1-this.g),b:this.b-.4*(1-this.b),a:this.a})),this.L}toRGBAString(){return`rgba(${(255*this.r).toFixed(0)},${(255*this.g).toFixed(0)},${(255*this.b).toFixed(0)},${this.a})`}}const b=t=>!(!t||"object"!=typeof t||!("type"in t)||"color"!==t.type),C=(t,e,i,s=255)=>new A({r:t/255,g:e/255,b:i/255,a:s/255}),M=t=>{const e=t.startsWith("#")?t.substring(1):t.startsWith("0x")?t.substr(2):t;switch(e.length){case 8:return new A({r:Number(`0x${e.substring(0,2)}`)/255,g:Number(`0x${e.substring(2,4)}`)/255,b:Number(`0x${e.substring(4,6)}`)/255,a:Number(`0x${e.substring(6,8)}`)/255});case 6:return new A({r:Number(`0x${e.substring(0,2)}`)/255,g:Number(`0x${e.substring(2,4)}`)/255,b:Number(`0x${e.substring(4,6)}`)/255});case 4:return new A({r:Number(`0x${e.charAt(0)}${e.charAt(0)}`)/255,g:Number(`0x${e.charAt(1)}${e.charAt(1)}`)/255,b:Number(`0x${e.charAt(2)}${e.charAt(2)}`)/255,a:Number(`0x${e.charAt(3)}${e.charAt(3)}`)/255});case 3:return new A({r:Number(`0x${e.charAt(0)}${e.charAt(0)}`)/255,g:Number(`0x${e.charAt(1)}${e.charAt(1)}`)/255,b:Number(`0x${e.charAt(2)}${e.charAt(2)}`)/255});default:throw new Error(`ColorHEX parsing error | input: ${t}`)}},T=(t,e=1,i=1)=>{let s,r,n;t/=360;const o=Math.floor(6*t),h=6*t-o,a=i*(1-e),l=i*(1-h*e),c=i*(1-(1-h)*e);switch(o%6){case 0:s=i,r=c,n=a;break;case 1:s=l,r=i,n=a;break;case 2:s=a,r=i,n=c;break;case 3:s=a,r=l,n=i;break;case 4:s=c,r=a,n=i;break;default:s=i,r=a,n=l}return new A({r:s,g:r,b:n})},E=t=>C(255&t,255&(t>>=8),255&(t>>=8),255&(t>>=8)),w={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},B=new A({}),k=C(0,0,0,0),R=(t,e,i,s=255)=>(s<<24|i<<16|e<<8|t)>>>0,F=(t,e)=>t.value-e.value,I=s.Record({type:"lut",steps:[],title:"",units:"",interpolate:!0,color:C(0,0,0,255),length:0,min:0,max:0,subranges:[],isValid:!1,percentageValues:!1}),O=t=>{const{steps:e}=t,i=e.length;e.sort(F);const[s,r]=i>0?[e[0].value,e[i-1].value]:[0,0],n=i>0?i-1:0,o=Array(n);for(let t=0;t<n;t+=1)o[t]={min:e[t],max:e[t+1]};return{min:s,max:r,length:i,steps:e,subranges:o,isValid:i>0&&s!==r}};class L extends I{constructor(t){super(((t,e)=>({steps:t.steps,title:t.title,units:t.units,interpolate:t.interpolate,percentageValues:t.percentageValues,color:t.color,length:e.length,min:e.min,max:e.max,subranges:e.subranges,isValid:e.isValid}))(t,O(t)))}toString(){return`LUT:interpolate=${this.interpolate},steps=${this.steps.length},percentage=${this.percentageValues}`}setSteps(t){return this.merge(O({...this,steps:t}))}getSteps(){return this.get("steps")}setTitle(t){return this.set("title",t)}getTitle(){return this.get("title")}setUnits(t){return this.set("units",t)}getUnits(){return this.get("units")}setInterpolation(t){return this.set("interpolate",t)}getInterpolation(){return this.get("interpolate")}setFallbackColor(t){return this.set("color",t)}getFallbackColor(){return this.get("color")}setPercentageValues(t){return this.set("percentageValues",t)}getPercentageValues(){return this.get("percentageValues")}getColors(t,e){if(Array.isArray(t)){if(Array.isArray(t[0])){const i=t,s=i.length,r=i[0].length,n=[...Array(s)].map((()=>Array(r)));for(let t=0;t<s;t+=1)for(let s=0;s<r;s+=1)n[t][s]=this.D(i[t][s],e);return n}const i=t,s=i.length,r=Array(s);for(let t=0;t<s;t+=1)r[t]=this.D(i[t],e);return r}return this.D(t,e)}D(t,e){const{steps:i}=this,s=i.length;if(0===s)return this.getFallbackColor();if(1===s)return i[0].color||this.color;if(this.percentageValues,this.percentageValues&&e&&(t=Math.max(Math.min((t-e.min)/(e.max-e.min),1),0)),this.interpolate){for(let e=0;e<s-1;e+=1){const s=i[e],h=i[e+1],a=Math.min(s.value,h.value),l=Math.max(s.value,h.value);if(t>=a&&t<=l){if(a===l)return s.color;const e=(t-s.value)/(h.value-s.value);return r=s.color,n=h.color,o=e,new A({r:r.r+(n.r-r.r)*o,g:r.g+(n.g-r.g)*o,b:r.b+(n.b-r.b)*o,a:r.a+(n.a-r.a)*o})}}return t<i[0].value?i[0].color:i[s-1].color}var r,n,o;for(let e=s-1;e>=0;e-=1)if(t>=i[e].value)return i[e].color;return i[0].color}}const D=s.Record({type:"fillstyle",fillType:"empty"});class P extends D{toString(){return"emptyFill"}}const V=new P,_=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"empty"===t.fillType),z=s.Record({type:"fillstyle",fillType:"solid",color:C(255,255,255)});class U extends z{}class N extends U{constructor(t){super({...t,fillType:"solid"})}toString(){return`solidFill:${this.color.toString()}`}setColor(t){return b(t)?this.set("color",t):this.set("color",t(this.get("color")))}getColor(){return this.get("color")}setA(t){return this.setColor(this.getColor().setA(t))}setR(t){return this.setColor(this.getColor().setR(t))}setG(t){return this.setColor(this.getColor().setG(t))}setB(t){return this.setColor(this.getColor().setB(t))}}const X=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"solid"===t.fillType);class H extends U{constructor(t){super({...t,fillType:"individual"})}toString(){return`individualPointFill:${this.color.toString()}`}setFallbackColor(t){return b(t)?this.set("color",t):this.set("color",t(this.get("color")))}getFallbackColor(){return this.get("color")}}const G=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"individual"===t.fillType),Y=s.Record({type:"fillstyle",fillType:"palette",lut:new L({steps:[]}),lookUpProperty:"value"});class W extends Y{constructor(t){super({...t,fillType:"palette"})}toString(){return`palettedFill:lut=${this.lut.toString()},lookUpProperty=${this.lookUpProperty}`}getPalette(){return this.get("lut")}setLookUpProperty(t){return"function"==typeof t?this.set("lookUpProperty",t(this.get("lookUpProperty"))):this.set("lookUpProperty",t)}getLookUpProperty(){return this.get("lookUpProperty")}}const j=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"palette"===t.fillType);var $,Q;e.GradientShape=void 0,($=e.GradientShape||(e.GradientShape={})).circle="circle",$.ellipse="ellipse",e.GradientExtent=void 0,(Q=e.GradientExtent||(e.GradientExtent={})).closestSide="closest-side",Q.closestCorner="closest-corner",Q.farthestSide="farthest-side",Q.farthestCorner="farthest-corner";const J=s.Record({type:"fillstyle",fillType:"radial-gradient",ditheringEnabled:!0,stops:[{color:M("#f00"),offset:0},{color:M("#0f0"),offset:1}],position:l(.5,.5),shape:e.GradientShape.ellipse,extent:e.GradientExtent.farthestCorner});class q extends J{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("RadialGradientFill requires minimum two color stops to be defined.")}toString(){return`radialGradientFill:${this.shape},${this.ditheringEnabled},${this.extent},${this.position.x},${this.position.y},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");return this.set("stops",t)}getColorStops(){return this.get("stops")}setPosition(t){return this.set("position",t)}getPosition(){return this.get("position")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}setExtent(t){return this.set("extent",t)}getExtent(){return this.get("extent")}setDitheringEnabled(t){return this.set("ditheringEnabled",t)}getDitheringEnabled(){return this.get("ditheringEnabled")}}const Z=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"radial-gradient"===t.fillType),K=s.Record({type:"fillstyle",fillType:"linear-gradient",stops:[{color:M("#f00"),offset:0},{color:M("#0f0"),offset:1}],angle:0});class tt extends K{constructor(t){if(super(t),null===t||t&&null===t.stops||t&&t.stops&&!Array.isArray(t.stops)||t&&t.stops&&Array.isArray(t.stops)&&t.stops.length<2)throw new Error("LinearGradientFill requires minimum two color stops to be defined.")}toString(){return`linearGradientFill:${this.angle},${this.stops.map((t=>`${t.offset},${t.color.toString()}`)).join(",")}`}setColorStops(t){if(t.length<2)throw new Error("Minimum of two color stops required");const e=t.sort(((t,e)=>t.offset-e.offset));return this.set("stops",e)}getColorStops(){return this.get("stops")}setAngle(t,e){return this.set("angle",e?function(t){return 180*t/Math.PI}(t):t)}getAngle(t){return t?Xi(this.get("angle")):this.get("angle")}}const et=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"linear-gradient"===t.fillType);class it{constructor(t,e,i,s){this.R=new Ct,this.cellIndex=t,this.cellSpan=e,this.cellsAmount=i,this.observedAmount=s,this.x=new st,this.y=new st,this.z=new st;const r={...t},n={...e};if(s){const t=t=>{const e=t.value;this.cellsAmount.x=e.reduce(pi,0),this.cellIndex.x=e.reduce(((t,e,i)=>i>=r.x?t:t+e),0),this.cellSpan.x=e.reduce(((t,e,i)=>i>=r.x&&i<r.x+n.x?t+e:t),0),this.R.O("cellresize",{})};s.x.V("change",t),t({value:s.x.T()});const e=t=>{const e=t.value;this.cellsAmount.y=e.reduce(pi,0),this.cellIndex.y=e.reduce(((t,e,i)=>i>=r.y?t:t+e),0),this.cellSpan.y=e.reduce(((t,e,i)=>i>=r.y&&i<r.y+n.y?t+e:t),0),this.R.O("cellresize",{})};s.y.V("change",e),e({value:s.y.T()}),this.N=()=>{s.x.G("change",t),s.y.G("change",e)}}}U(){return this.N&&(this.N(),this.N=void 0),this}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class st extends h{constructor(){super(...arguments),this.$=0,this.Y=10,this.H=1}X(){return this.u=!1,this}W(){return this.u=!0,this}getInnerStart(){return this.$}getInnerEnd(){return this.Y}getInnerInterval(){return Math.abs(this.getInnerEnd()-this.getInnerStart())}j(t,e){return this.$=t,this.Y=e,this.Z(),this}J(t){return this.H=t,this.Z(),this}K(t){return t/this.H}Z(){const t=this.K(this.Y-this.$),e=this.H;void 0!==this.q&&!1!==Zt(t,this.q)||(this.u=!0,this.tt=e,this.q=t)}it(){return this.q}st(){return this.tt}et(){return this.Y<this.$}ht(t,e){return!0}}const rt={d1:t=>new t.scale1DConstructor(0,1,1,void 0),d2:t=>(new t.scaleXYConstructor).rt({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0),d3:()=>new it({x:0,y:0},{x:1,y:1},{x:1,y:1},void 0)},nt=(t,e,i)=>e===i?t:i.nt(e.ot(t)),ot=(t,e,i)=>{if(e===i)return t;const s=e instanceof os?e.x:e.x instanceof os?e.x.x:e.x.ct,r=e instanceof os?e.y:e.y instanceof os?e.y.y:e.y.ct,n=i instanceof os?i.x:i.x instanceof os?i.x.x:i.x.ct,o=i instanceof os?i.y:i.y instanceof os?i.y.y:i.y.ct;return{...t,x:nt(t.x,s,n),y:nt(t.y,r,o)}},ht=(...t)=>{if(0===t.length)return{remove:qt};let e=!1;const i=t.map((i=>{const s=s=>{((i,s,r)=>{e||(e=!0,t.filter((t=>t!==i)).forEach((t=>t.ut(s,r,!1,i.getStopped(),"synchronizedAxis"))),e=!1)})(i,s.start,s.end)};return i.addEventListener("intervalchange",s),s}));let s=!1;const r=t.map((e=>{const i=i=>{((e,i)=>{s||(s=!0,t.filter((t=>t!==e)).forEach((t=>t.setStopped(i))),s=!1)})(e,i.isStopped)};return e.addEventListener("stoppedchange",i),i}));return{remove:()=>{t.forEach(((t,e)=>{t.removeEventListener("intervalchange",i[e]),t.removeEventListener("stoppedchange",r[e])}))}}},at=t=>t&&"object"==typeof t&&"column"in t&&"row"in t,lt=t=>t&&"object"==typeof t&&"z"in t&&"column"in t&&"row"in t,ct=t=>t&&"object"==typeof t&&"annulus"in t&&"sector"in t,ut=t=>t&&"object"==typeof t&&"index"in t;var dt;!function(t){t[t.Nearest=0]="Nearest",t[t.NearestX=1]="NearestX",t[t.NearestY=2]="NearestY"}(dt||(dt={}));const ft=(t,e,i,s,r,n,o,h,a,l)=>{const c=t.length;if(0===c)return;const u=s?1:0,d=c-(r?2:1);if(i===dt.Nearest)return gt(t,e,n,o,u,d);if(i===dt.NearestX||i===dt.NearestY){if("boolean"==typeof l&&("x"===a&&i===dt.NearestX||"y"===a&&i===dt.NearestY))return mt(t,ot(e,o,n),a,l,u,d);if(i===dt.NearestX)return yt(t,ot(e,o,n),h,u,d);if(i===dt.NearestY)return pt(t,ot(e,o,n),h,u,d)}},gt=(t,e,i,s,r,n)=>{let o,h=Number.MAX_VALUE;for(let a=r;a<=n;a+=1){const r=t[a];if(!Number.isNaN(r.x)&&!Number.isNaN(r.y)){const t=ot(r,i,s),n=(t.x-e.x)**2+(t.y-e.y)**2;n<h&&(h=n,o=a)}}return o},yt=(t,e,i,s,r)=>{if(e.x<i.min.x||e.x>i.max.x)return;let n,o=Number.MAX_VALUE;for(let i=s;i<=r;i+=1){const s=t[i],r=s.x>e.x?s.x-e.x:e.x-s.x;r<o&&!Number.isNaN(s.x)&&!Number.isNaN(s.y)&&(o=r,n=i)}return n},pt=(t,e,i,s,r)=>{if(e.y<i.min.y||e.y>i.max.y)return;let n,o=Number.MAX_VALUE;for(let i=s;i<=r;i+=1){const s=t[i],r=s.y>e.y?s.y-e.y:e.y-s.y;r<o&&!Number.isNaN(s.x)&&!Number.isNaN(s.y)&&(o=r,n=i)}return n},mt=(t,e,i,s,r,n)=>{const o="x"===i,h=o?e.x:e.y,a=t[r],l=t[n],c=a.x<l.x?a.x:l.x,u=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(o&&(h<c||h>d)||!o&&(h<u||h>f))return;let g=r,y=Math.floor((r+n)/2),p=n,m=-1;for(;;){const e=h-(o?t[y].x:t[y].y);if(e*(s?-1:1)>0)g=Math.min(y+1,p),m=Math.floor((g+p)/2);else{if(0===Math.abs(e))return y;p=Math.max(y-1,g),m=Math.floor((g+p)/2)}if(m===y){const i=y>r?Math.abs(h-(o?t[y-1].x:t[y-1].y)):hi,s=y<n?Math.abs(h-(o?t[y+1].x:t[y+1].y)):hi,a=Math.abs(e);switch(Math.min(a,i,s)){case i:return y-1;case s:return y+1;default:return y}}else y=m}},xt=(t,e,i,s,r,n)=>{const o="x"===i,h=o?e.x:e.y,a=t[r],l=t[n],c=a.x<l.x?a.x:l.x,u=a.y<l.y?a.y:l.y,d=a.x>l.x?a.x:l.x,f=a.y>l.y?a.y:l.y;if(o&&(h<c||h>d)||!o&&(h<u||h>f))return;let g=r,y=Math.floor((r+n)/2),p=n,m=-1;for(;;){const i=h-(o?t[y].x:t[y].y);if(i*(s?-1:1)>0)g=Math.min(y+1,p),m=Math.floor((g+p)/2);else{if(0===Math.abs(i))return{a:y,b:y,lerpAmount:0};p=Math.max(y-1,g),m=Math.floor((g+p)/2)}if(m===y){if(i*(s?-1:1)<0&&y>r){const i=t[y-1],s=t[y];return{a:y-1,b:y,lerpAmount:o?(e.x-i.x)/(s.x-i.x):(e.y-i.y)/(s.y-i.y)}}if(y<n){const i=t[y],s=t[y+1];return{a:y,b:y+1,lerpAmount:o?(e.x-i.x)/(s.x-i.x):(e.y-i.y)/(s.y-i.y)}}return{a:y,b:y,lerpAmount:0}}y=m}};let St=0;class vt{constructor(t,e,i){this.dt=p(!0),this.ft=!1,this.At=!0,this.vt=!1,this.yt=void 0,this.xt=0,this.R=new Ct,this.St=t,this.bt=e,this.Mt=i,this.wt=St,St+=1,this._t=t.Ct.highlightColorOffset}kt(){let t;return this.Tt("DataPattern",(e=>(t=e.pattern,!0))),"ProgressiveX"===t||"RegressiveX"===t?dt.NearestX:"ProgressiveY"===t||"RegressiveY"===t?dt.NearestY:dt.Nearest}Ft(){}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}O(t,e,i,s){this.R.O(t,e,{collectionMember:i,info:s})}removeEventListener(t,e){this.R.removeEventListener(t,e)}It(t){return void 0!==this.Mt.find((e=>e.type===t))}Tt(t,e){var i;return!!this.It(t)&&!0===e(null===(i=this.Mt.find((e=>e.type===t)))||void 0===i?void 0:i.args)}dispose(){return this.ft||(this.St.Pt(this),this.ft=!0,this.bt(this),this.R.O("dispose",{})),this}isDisposed(){return this.ft}setVisible(t){const e=this.At;return this.At=t,!t&&e&&this.dt.T()&&this.St.Pt(this),this}getVisible(){return this.At}setPointerEvents(t){const e=this.dt.T();return this.dt.C(t),t||e&&this.St.Pt(this),this}getPointerEvents(){return this.dt.T()}Lt(t){return this.yt=t,this}Bt(){return this.yt?this.yt:At}Dt(t){return this.xt=t,this}Et(){return this.xt}Rt(t){return this._t=t,this}zt(){return this._t}}const At=g(l(0,0),l(0,0)),bt={click:!0,contextmenu:!0,dblclick:!0,gotpointercapture:!0,lostpointercapture:!0,pointercancel:!0,pointerdown:!0,pointerenter:!0,pointerleave:!0,pointermove:!0,pointerout:!0,pointerover:!0,pointerup:!0,touchcancel:!0,touchend:!0,touchmove:!0,touchstart:!0,wheel:!0,drag:!0,dragend:!0,dragenter:!0,dragleave:!0,dragover:!0,dragstart:!0,drop:!0};class Ct{constructor(){this.Ot=new Array,this.Vt=[],this.dt=!0,this.Nt=!1}setPointerEvents(t){this.dt=t,this.Vt.forEach((e=>e.setPointerEvents(t)))}getPointerEvents(){return this.dt}addEventListener(t,e,i){this.Ot.push({listener:e,key:t,options:i||{}})}removeEventListener(t,e){const i=this.Ot.findIndex((t=>t.listener===e));i>=0&&this.Ot.splice(i,1)}set draggable(t){this.Nt=t,this.Vt.forEach((e=>{e.vt=t}))}get draggable(){return this.Nt}O(t,e,i=void 0){this.Ot.slice().reverse().forEach((s=>{s.key===t&&(s.listener(e,i),!0===s.options.once&&this.removeEventListener(t,s.listener))}))}Gt(t,e){Object.keys(bt).forEach((i=>{t.addEventListener(i,((t,s)=>{const r=Mt(t)?{clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY}:t,n=(null==e?void 0:e.getExtraData)&&void 0!==r.clientX?e.getExtraData(r,s.collectionMember,s.info):{};this.O(i,t,n),!t.defaultPrevented&&(null==e?void 0:e.continueIfNotPrevented)&&e.continueIfNotPrevented(i,t,n)}))})),this.Vt.push(t),t.addEventListener("dispose",(()=>{const e=this.Vt.indexOf(t);e>=0&&this.Vt.splice(e,1)})),t.vt=this.Nt,t.setPointerEvents(this.dt)}Ut(t,e){Object.keys(bt).forEach((i=>{t.addEventListener(i,((t,s)=>{const r=e(s.collectionMember);r&&this.O(i,t,r)}))})),this.Vt.push(t),t.addEventListener("dispose",(()=>{const e=this.Vt.indexOf(t);e>=0&&this.Vt.splice(e,1)})),t.setPointerEvents(this.dt),t.vt=this.Nt}$t(t){Object.keys(bt).forEach((e=>{t.addEventListener(e,((t,i)=>{this.O(e,t,i)}))})),t.setPointerEvents(this.dt),t.draggable=this.Nt}}const Mt=t=>!(!t||"object"!=typeof t||!("touches"in t)),Tt={linear:(t,e,i)=>{const s=e-t;return r=>r<i?t+s/i*r:e},easeIn:(t,e,i)=>s=>s<i?t+Math.abs(2*(Math.sqrt(.5)*s/i)**2)*(e-t):e,easeOut:(t,e,i)=>s=>s<i?t+Math.abs(1-2*(Math.sqrt(.5)*(1-s/i))**2)*(e-t):e,ease:(t,e,i)=>s=>s<i?t+(s<i/2?.5*(s/i*2)**2.5:.5+.5*(1-(1-2*(s/i-.5))**2.5))*(e-t):e,logarithmic:t=>{const e=Te(t);return(i,s,r)=>{const n=e(i),o=e(s);return e=>e<r?t**(n+Math.abs(1-2*(Math.sqrt(.5)*(1-e/r))**2)*(o-n)):s}}};class Et{constructor(t,e,i,s=Tt.linear,r){this.delta=0,this.nextAnimations=new Array,this.Yt=!1,this.easing=Tt.linear,this.isOver=()=>(this.delta===this.duration||this.Yt)&&0===this.nextAnimations.length,this.R=new Ct,this.values=t,this.action=e,this.duration=i,this.easing=s,this.Ht=r,this.eases=t.map((([t,e])=>s(t,e,i)))}Xt(){this.R.O("start",{})}start(){return this.Ht.includes(this)||this.Ht.push(this),this}addNextAnimations(t){return t instanceof Array?t.forEach((t=>this.nextAnimations.push(t))):this.nextAnimations.push(t),this}NextAnimation(t,e,i=this.duration,s=this.easing){const r=new Et(t,e,i,s,this.Ht);return this.nextAnimations.push(r),r}finish(t=!0){if(this.Yt=!0,this.Ht.splice(this.Ht.indexOf(this),1),this.nextAnimations.length>0){const e=this.nextAnimations[0];return t&&this.R.Ot.forEach((t=>{"allAnimationEnd"===t.key&&e.addEventListener("allAnimationEnd",t.listener),"everyAnimationEnd"===t.key&&e.addEventListener("everyAnimationEnd",t.listener)})),e.addNextAnimations(this.nextAnimations.slice(1)),e.start(),t&&(this.R.O("end",{nextAnimation:e}),this.R.O("everyAnimationEnd",{nextAnimation:e})),e}t&&(this.R.O("end",{nextAnimation:void 0}),this.R.O("everyAnimationEnd",{nextAnimation:void 0}),this.R.O("allAnimationEnd",{}))}finishAll(t=!0){let e=this;for(;e;)e=e.finish(t)}getFinalValues(){return this.nextAnimations.length>0?this.nextAnimations[this.nextAnimations.length-1].values.map(Qt):this.values.map(Qt)}getTimeUntilFinish(){let t=this.duration-this.delta;for(let e=0;e<this.nextAnimations.length;e+=1)t+=this.nextAnimations[e].duration-this.nextAnimations[e].delta;return t}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const wt=(t,e=60)=>{e>60&&console.log("Note: Animator FPS is usually capped at 60 by the browser!");const i=[];let s,r,n=0;const o=()=>{s=void 0;const h=Date.now();r=r||h,n=h-r,n/1e3>=1/e&&(r=Date.now()-n%(1e3/e),i.forEach((t=>{0===t.delta&&t.Xt(),t.delta+=n-n%(1e3/e),t.delta>t.duration&&(t.delta=t.duration),t.action(t.eases.map((e=>e(t.delta)))),t.delta===t.duration&&t.finish()})),t()),i.length>0?s=Wt.requestAnimationFrame(o):(s=void 0,r=void 0)};return(t=1e3,e=Tt.linear)=>(r,n,h=t)=>{const a=new Et(r,n,h,e,i).start();return s||(s=Wt.requestAnimationFrame(o)),a}};var Bt;e.ImageFitMode=void 0,(Bt=e.ImageFitMode||(e.ImageFitMode={}))[Bt.Fill=0]="Fill",Bt[Bt.Fit=1]="Fit",Bt[Bt.Stretch=2]="Stretch",Bt[Bt.Center=3]="Center",Bt[Bt.Tile=4]="Tile";const kt=s.Record({type:"fillstyle",fillType:"image",source:void 0,surroundingColor:C(0,0,0,0),sourceMissingColor:C(0,0,0,0),fitMode:e.ImageFitMode.Fill});class Rt extends kt{constructor(t){super(t)}setSource(t){return this.set("source",t)}getSource(){return this.get("source")}setSurroundingColor(t){return b(t)?this.set("surroundingColor",t):this.set("surroundingColor",t(this.get("surroundingColor")))}getSurroundingColor(){return this.get("surroundingColor")}setSourceMissingColor(t){return b(t)?this.set("sourceMissingColor",t):this.set("sourceMissingColor",t(this.get("sourceMissingColor")))}getSourceMissingColor(){return this.get("sourceMissingColor")}setFitMode(t){return this.set("fitMode",t)}getFitMode(){return this.get("fitMode")}toString(){return`imagefill:${this.fitMode}`}}const Ft=t=>!!(t&&"object"==typeof t&&"type"in t&&"fillstyle"===t.type&&"fillType"in t&&"image"===t.fillType),It=s.Record({type:"linestyle",lineType:"empty"}),Ot=new class extends It{constructor(){super(...arguments),this.thickness=0}setThickness(t){return this}getThickness(){return 0}Wt(){return 0}setFillStyle(t){return this}getFillStyle(){return V}},Lt=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"empty"!==t.lineType),Dt=-34028234663852886e22,Pt="-340282346638528859811704183484516925440.0";class Vt extends Error{constructor(t,e){super(`ChartError: ${t} ${e?`in ${e.constructor.name}`:""}`),Object.setPrototypeOf(this,Vt.prototype)}}class _t extends Error{constructor(t,e,i=!1){const s=`EngineError: ${t} ${e?`in ${e.constructor.name}`:""}`;super(s),i&&Wt.alert(s),Object.setPrototypeOf(this,_t.prototype)}}class zt extends _t{constructor(t){super(t),Object.setPrototypeOf(this,zt.prototype)}}var Ut,Nt,Xt,Ht;e.UISpace=void 0,(Ut=e.UISpace||(e.UISpace={}))[Ut.Content=0]="Content",Ut[Ut.PaddedContent=1]="PaddedContent",Ut[Ut.PaddedBackground=2]="PaddedBackground",Ut[Ut.Everything=3]="Everything",e.UIVisibilityModes=void 0,(Nt=e.UIVisibilityModes||(e.UIVisibilityModes={}))[Nt.never=0]="never",Nt[Nt.always=1]="always",Nt[Nt.whenHovered=2]="whenHovered",Nt[Nt.whenDragged=3]="whenDragged",Nt[Nt.whenNotDragged=4]="whenNotDragged",Nt[Nt.whenHoveredOrDragged=5]="whenHoveredOrDragged",e.UIDraggingModes=void 0,(Xt=e.UIDraggingModes||(e.UIDraggingModes={}))[Xt.notDraggable=0]="notDraggable",Xt[Xt.draggable=1]="draggable",Xt[Xt.onlyHorizontal=2]="onlyHorizontal",Xt[Xt.onlyVertical=3]="onlyVertical",e.UIDirections=void 0,(Ht=e.UIDirections||(e.UIDirections={}))[Ht.Up=0]="Up",Ht[Ht.Right=1]="Right",Ht[Ht.Down=2]="Down",Ht[Ht.Left=3]="Left";const Gt=(...t)=>{const e=t=>t&&"object"==typeof t&&!Array.isArray(t);return t.reduce(((t,i)=>i?(Object.keys(i).forEach((s=>{const r=t[s],n=i[s];e(r)&&e(n)?t[s]=Gt(r,n):t[s]=n})),t):t),{})},Yt=t=>{if(t.resourcesBaseUrl){const e=t.styleFactory(t.resourcesBaseUrl),i=Ft(e)&&e.getSource(),s=i&&i instanceof Image?i:void 0;return null==s||s.addEventListener("error",(()=>{$e(t.resourcesBaseUrl,s.src,"Theme resource",{shouldCrash:!1})})),e}const e=`${Wt.location.origin}/resources`,i=t.styleFactory(e);if(Ft(i)){const e=i.getSource();e instanceof Image&&e.addEventListener("error",(()=>{const i=t.styleFactory("https://lcjs-resources.lightningchart.com/v1"),s=Ft(i)&&i.getSource(),r=s&&s instanceof Image?s:void 0;Wt.console.warn("LightningChart JS warning | fallbacking to publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),null==r||r.addEventListener("load",(()=>{t.apply(i)})),null==r||r.addEventListener("error",(()=>{$e(t.resourcesBaseUrl,e.src,"Theme resource",{shouldCrash:!1})}))}))}return i},Wt="undefined"!=typeof window?window:void 0!==i.g&&i.g._lcjs?i.g._lcjs:{},jt=(t,e)=>t.x===e.x&&t.y===e.y,$t=t=>t!==hi&&t!==ai&&!Number.isNaN(t)&&Number.isFinite(t)&&t!==1/0&&t!==-1/0,Qt=t=>t[1],Jt=t=>t.dispose(),qt=()=>{},Zt=(t,e)=>t===e,Kt=(t,e,i)=>i>e?Math.min(Math.max(t,e),i):Math.min(Math.max(t,i),e),te=t=>Array.prototype.concat.apply([],t),ee=(t,e)=>void 0===t||Number.isNaN(t)?e:t,ie=t=>t.jt(),se=t=>t.Zt(),re=t=>t.Qt(),ne=t=>t.Jt(),oe=t=>t.min.x,he=t=>t.max.x,ae=t=>t.min.y,le=t=>t.max.y,ce=(t,e,i,s,r)=>{if(t.length>0){let n=r?s(r):void 0;for(let s=0;s<t.length;s+=1){const r=e(t[s]);void 0!==r&&(n=void 0!==n?i(n,r):r)}return n}if(r)return s(r)},ue=(t,e)=>t.position===e.position&&t.high===e.high&&t.low===e.low,de=l(0,1),fe=l(1,0),ge=l(0,-1),ye=l(-1,0),pe=l(0,0),me=t=>{switch(t){case e.UIDirections.Up:return de;case e.UIDirections.Right:return fe;case e.UIDirections.Down:return ge;case e.UIDirections.Left:return ye;default:return pe}},xe=t=>t===e.UIDirections.Left||t===e.UIDirections.Right,Se=t=>{t.stopPropagation(),t.preventDefault()},ve=(t,e)=>{if(!e)return t;const i=t.length,s=new Float32Array(2*i);let r=0;for(let e=0;e<i;e+=1){const i=t[e],n=Math.fround(i);s[r+0]=n,s[r+1]=i-n,r+=2}return s},Ae=(t,e,i=Float32Array)=>{if(!e){const e=t.length,s=new i(2*e);let r=0;for(let i=0;i<e;i+=1){const e=t[i];s[r+0]=e.x,s[r+1]=e.y,r+=2}return s}const s=t.length,r=new i(4*s);let n=0;for(let e=0;e<s;e+=1){const i=t[e],s=Math.fround(i.x),o=Math.fround(i.y);r[n+0]=s,r[n+1]=o,r[n+2]=i.x-s,r[n+3]=i.y-o,n+=4}return r},be=t=>{const e=t.length,i=new Float32Array(3*e);let s=0;for(let r=0;r<e;r+=1){const e=t[r];i[s+0]=e.x,i[s+1]=e.y,i[s+2]=e.z,s+=3}return i},Ce=t=>e=>{const i=t.indexOf(e);i>=0&&t.splice(i,1)},Me=t=>{let e=t.length;for(let i=0;i<e-1;i+=1)t[i].x===t[i+1].x&&t[i].y===t[i+1].y&&(t.splice(i,1),i-=1,e-=1);return t},Te=t=>{const e=Math.log(t);return t=>Math.log(t)/e},Ee=Te(Math.E),we=(t,e)=>{const i=e[t];return i?i():void 0},Be=(t,e)=>{let i;if(e)i=e;else{const e={x:0,y:0};for(let i=0;i<t.length;i+=1)e.x+=t[i].x/t.length,e.y+=t[i].y/t.length;i=e}return t.sort(((t,e)=>Hi(Di(t,i))-Hi(Di(e,i))))},ke=(t,e,i)=>{if(0===t.length)return!1===i.canReturnB?e.slice():e;const s=e.length;if(s<1e5)return t.push.apply(t,e),t;for(let i=0;i<s;i+=1)t.push(e[i]);return t},Re=(t,e,i)=>i<0?t:i>1?e:C(t.getR()+i*(e.getR()-t.getR()),t.getG()+i*(e.getG()-t.getG()),t.getB()+i*(e.getB()-t.getB()),t.getA()+i*(e.getA()-t.getA())),Fe=t=>255===t.getA()?t:t.setA(255),Ie=(()=>{const t=C(0,0,0);return e=>(e=Fe(e),new tt({angle:180,stops:[{offset:0,color:e},{offset:1,color:Re(e,t,.5)}]}))})(),Oe=(()=>{const t=t=>{var e;if(t){if(X(t)){if(0===t.getColor().getA())return;return t.getColor()}if(Z(t)||et(t)){const i=t.getColorStops();return 3===i.length?i[1].color:null===(e=i[0])||void 0===e?void 0:e.color}j(t)}};return(e,i,s,r)=>{var n;const o=[];if(r.fill&&o.push(r.fill),r.fill2&&o.push(r.fill2),r.stroke){const t=r.stroke.getFillStyle();t!==V&&("stroke"===(null===(n=r.behavior)||void 0===n?void 0:n.priority)?o.unshift(t):o.push(t))}if(r.point3D){const t=r.point3D;o.push(t.getFillStyle())}let h;if(r.behavior&&!0===r.behavior.colorStep){const[e,s]=o.reduce(((e,i)=>{if(e[0]&&e[1])return e;const s=t(i);return s&&(void 0===e[0]?e[0]=s:e[1]=s),e}),[void 0,void 0]);h=e&&s?(a=e)===(l=s)||a.getR()===l.getR()&&a.getG()===l.getG()&&a.getB()===l.getB()?Ie(a):(a=Fe(a),l=Fe(l),new tt({angle:0,stops:[{offset:0,color:l},{offset:.5,color:l},{offset:.5,color:a},{offset:1,color:a}]})):i.uiButtonFillStyle}else{const e=o.reduce(((e,i)=>e||t(i)),void 0);h=e?s?new N({color:e}):Ie(e):i.uiButtonFillStyle}var a,l;e.setButtonOnFillStyle(h)}})(),Le=(t,e)=>{const i=t;if(j(i))return{lut:i.getPalette(),lookUpProperty:i.getLookUpProperty(),valueRange:e}},De=t=>{let e=0;return()=>(e+=1,`${t}-${e}`)},Pe=(t,e)=>{let i="string"==typeof t?t:String(t);const s=i.indexOf(".");let r=s>=0?s:i.length;for(;r<e;r+=1)i=`0${i}`;return i},Ve=(t,e)=>"function"==typeof t?t(e):t,_e=(t,e)=>e(),ze=()=>new Error("LightningChart JS encountered an unexpected error.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact");new N({color:C(255,255,255,1)});const Ue=t=>t===li||t.min.x===li.min.x&&t.max.x===li.max.x&&t.min.y===li.min.y&&t.max.y===li.max.y,Ne=t=>Array.from(new Set(t)),Xe=t=>t.filter((t=>void 0!==t)),He=t=>"boolean"==typeof t?t?1:0:t>1?1:t<0?0:t,Ge=(t,e,i)=>{e.length<=0||(t.setText(i.label).setOn(e[0].getVisible()),i.style&&t.setButtonOnFillStyle(i.style),i.toggleVisibilityOnClick&&t.addEventListener("switch",(t=>{e.forEach((e=>e.setVisible(t.state)))})),t.addEventListener("pointerenter",(()=>{e.forEach((t=>t.setHighlight(!0)))})),t.addEventListener("pointerleave",(()=>{e.forEach((t=>t.setHighlight(!1)))})),e.forEach((e=>e.addEventListener("pointerenter",(()=>t.setHighlight(!0))))),e.forEach((e=>e.addEventListener("pointerleave",(()=>t.setHighlight(!1))))))},Ye=(t,e)=>{throw new Error(e)},We=t=>{let e;return()=>e||(e=t(),e)},je=t=>{if(t===Ot)return 0;const e=t.getThickness();return e<0?1:1*e},$e=(t,e,i,s)=>{const r=`LightningChart JS Resources not found.\nresourcesBaseUrl: "${t}"\ninitiator: ${i}\nresource url: ${e}\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/error-resources-not-found/`;if(s.shouldCrash)throw Wt.alert(r),new Error(r);Wt.console.warn(r)},Qe=(t,e,i,s=0)=>{if(t<i(s)||i(e)<t)return;const r=e;for(;s!==e;){const r=Math.ceil((s+e)/2);t<i(r)?e=r-1:s=r}const n=Math.abs(t-i(s));return s<r&&Math.abs(t-i(s+1))<n?s+1:s},Je=()=>{const t=new Map;return{Kt:e=>(Object.keys(bt).forEach((i=>{e.addEventListener(i,((e,s)=>{const r=s.collectionMember&&t.get(s.collectionMember);if(!r)return;const n=Mt(e)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:e,o=r.qt(s.info,n);r.R.O(i,e,o)}))})),e),ti:(e,i)=>{t.set(e,i)},ii:()=>{t.clear()}}},qe={left:0,right:0,top:0,bottom:0},Ze=()=>Math.round(Math.random()*Number.MAX_SAFE_INTEGER),Ke=(t,e,i)=>{e&&e.si();const s=i();return Object.keys(s).forEach((e=>{const i=e,r=s[i];t.addEventListener(i,r)})),{ei:t,si:()=>{Object.entries(s).forEach((([e,i])=>{const s=e,r=i;t.removeEventListener(s,r)}))}}},ti=(t,e,i)=>{let s;const r=()=>(s=i(),s),n={...t,resolve:()=>s||r()};for(const t of Object.keys(e))Object.defineProperty(n,t,{get:function(){return s?s[t]:r()[t]}});return n},ei=t=>{if(t)return"resolve"in t?t.resolve():t},ii=t=>{let e=t;return{hi:t=>{const i=e;return e=i+t,[i,t]}}},si=t=>{Wt.document.body.addEventListener(t,(t=>{t.stopPropagation(),t.preventDefault()}),{once:!0,capture:!0})},ri=()=>{const t=Wt.performance.now();Wt.document.body.addEventListener("contextmenu",(e=>{Wt.performance.now()-t>5e3||e.preventDefault()}),{once:!0})},ni=()=>{const t=Wt.performance.now();Wt.document.body.addEventListener("touchstart",(e=>{Wt.performance.now()-t>5e3||e.preventDefault()}),{once:!0})},oi={add:(t,e)=>d(t.x+e,t.y+e,t.z+e),addVec(t,...e){const i={x:t.x,y:t.y,z:t.z};for(const t of e)i.x+=t.x,i.y+=t.y,i.z+=t.z;return i},subtract:(t,e)=>d(t.x-e,t.y-e,t.z-e),subtractVec(t,...e){const i={x:t.x,y:t.y,z:t.z};for(const t of e)i.x-=t.x,i.y-=t.y,i.z-=t.z;return i},multiply:(t,e)=>d(t.x*e,t.y*e,t.z*e),divide:(t,e)=>d(t.x/e,t.y/e,t.z/e),multiplyVec(t,...e){const i={x:t.x,y:t.y,z:t.z};for(const t of e)i.x*=t.x,i.y*=t.y,i.z*=t.z;return i},divideVec(t,...e){const i={x:t.x,y:t.y,z:t.z};for(const t of e)i.x/=t.x,i.y/=t.y,i.z/=t.z;return i},length:t=>Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),normalize:t=>oi.divide(t,oi.length(t)),dot:(t,e)=>t.x*e.x+t.y*e.y+t.z*e.z,cross:(t,e)=>d(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x),angle:(t,e)=>Math.acos(oi.dot(t,e)/(oi.length(t)*oi.length(e))),rotateAroundAxis(t,e,i){const s=Math.cos(i),r=Math.sin(i),n=oi.dot(e,t),o=oi.cross(e,t);return oi.addVec(oi.multiply(t,s),oi.addVec(oi.multiply(e,(1-s)*n),oi.multiply(o,r)))},lerp:(t,e,i)=>(i=Kt(i,0,1),oi.addVec(oi.multiply(t,1-i),oi.multiply(e,i))),equals:(t,e)=>Zt(t.x,e.x)&&Zt(t.y,e.y)&&Zt(t.z,e.z),abs:t=>({x:Math.abs(t.x),y:Math.abs(t.y),z:Math.abs(t.z)}),sign:t=>({x:Math.sign(t.x),y:Math.sign(t.y),z:Math.sign(t.z)})},hi=Number.MAX_VALUE,ai=-Number.MAX_VALUE,li=g(l(hi,hi),l(ai,ai)),ci=g(d(hi,hi,hi),d(ai,ai,ai)),ui=(t,e)=>{const i=Math.log(t)/Math.log(e);return Math.floor((t=>(Math.ceil(t)-t<1e-4?t=Math.ceil(t):t-Math.floor(t)<1e-4&&(t=Math.floor(t)),t))(i))},di=(t,e)=>!(e.min.x>t.max.x||e.max.x<t.min.x||e.min.y>t.max.y||e.max.y<t.min.y),fi=(t,e)=>!(t[1].x<e[0].x||t[0].x>e[1].x||t[3].y<e[0].y||t[0].y>e[3].y),gi=(t,e)=>({min:{x:Math.min(t[0].x,e[0].x),y:Math.min(t[0].y,e[0].y)},max:{x:Math.max(t[2].x,e[2].x),y:Math.max(t[2].y,e[2].y)}}),yi=t=>{const e=t.length;for(let i=0;i<e;i+=1)for(let s=i+1;s<e;s+=1)if(di(t[i],t[s]))return!0;return!1},pi=(t,e)=>e+t,mi=(t,e,i)=>{const s=Di(e,t),r=s.x*s.x+s.y*s.y;if(0===r)return t;const n=Di(i,t),o=(n.x*s.x+n.y*s.y)/r;return o<=0?t:o>=1?e:l(t.x+o*s.x,t.y+o*s.y)},xi=(t,e,i)=>i>e?t>=e&&t<=i:t>=i&&t<=e,Si=(t,e)=>{const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)},vi=(t,e)=>{const i=t.x-e.x,s=t.y-e.y;return i*i+s*s},Ai=(t,e,i)=>Li(t,Oi(Di(e,t),i)),bi=(t,e,i)=>oi.addVec(t,oi.multiply(oi.subtractVec(e,t),i));function Ci(t){const e=t.length;if(e>0){let i=t[0].x,s=t[0].x,r=t[0].y,n=t[0].y;for(let o=1;o<e;o+=1){const e=t[o];e.x>i&&(i=e.x),e.x<s&&(s=e.x),e.y>r&&(r=e.y),e.y<n&&(n=e.y)}return g(l(s,n),l(i,r))}return li}function Mi(t){const e=t.length;if(e>0){let i=t[0].x,s=t[0].x,r=t[0].y,n=t[0].y,o=t[0].z,h=t[0].z;for(let a=0;a<e;a+=1){const e=t[a];e.x>i&&(i=e.x),e.x<s&&(s=e.x),e.y>r&&(r=e.y),e.y<n&&(n=e.y),e.z>o&&(o=e.z),e.z<h&&(h=e.z)}return g(d(s,n,h),d(i,r,o))}return ci}const Ti=(...t)=>{const e={min:{x:hi,y:hi},max:{x:ai,y:ai}};for(const i of t)e.min.x=e.min.x<i.min.x?e.min.x:i.min.x,e.max.x=e.max.x>i.max.x?e.max.x:i.max.x,e.min.y=e.min.y<i.min.y?e.min.y:i.min.y,e.max.y=e.max.y>i.max.y?e.max.y:i.max.y;return e},Ei=(t,e)=>g(d(t.min.x<e.min.x?t.min.x:e.min.x,t.min.y<e.min.y?t.min.y:e.min.y,t.min.z<e.min.z?t.min.z:e.min.z),d(t.max.x>e.max.x?t.max.x:e.max.x,t.max.y>e.max.y?t.max.y:e.max.y,t.max.z>e.max.z?t.max.z:e.max.z));function wi(t,e,i,s){const r=t.x-s.x,n=t.y-s.y,o=s.x-i.x,h=i.y-s.y,a=h*r+o*n,l=(s.y-e.y)*r+(e.x-s.x)*n,c=h*(e.x-s.x)+o*(e.y-s.y);return c<0?a<=0&&l<=0&&a+l>=c:a>=0&&l>=0&&a+l<=c}function Bi(t,e,i){return l(Math.cos(i)*(t.x-e.x)+Math.sin(i)*(t.y-e.y)+e.x,-Math.sin(i)*(t.x-e.x)+Math.cos(i)*(t.y-e.y)+e.y)}function ki(t,e){return l(t.x-e.x,t.y-e.y)}function Ri(t){const e=Ii(t);return 0===e?l(0,0):l(t.x/e,t.y/e)}function Fi(t,e){let i={x:e.x-t.x,y:e.y-t.y};i=Ri(i);const s=Math.PI/2,r=i.x;return i.x=-Math.sin(s)*i.y,i.y=r*Math.sin(s),i}function Ii(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function Oi(t,e){return l(t.x*e,t.y*e)}function Li(t,e){return l(t.x+e.x,t.y+e.y)}function Di(t,e){return l(t.x-e.x,t.y-e.y)}function Pi(t,e){return l(t.x*e.x,t.y*e.y)}function Vi(t,e){return l(t.x/e.x,t.y/e.y)}function _i(t){return Oi(t,-1)}function zi(t,e){return t.x*e.x+t.y*e.y}const Ui=(t,e,i)=>{const s=(i.y-e.y)/(i.x-e.x),r=e.y+(t-e.x)*s;return l(t,r)},Ni=(t,e,i)=>{const s=(i.y-e.y)/(i.x-e.x),r=e.x+(t-e.y)/s;return l(r,t)};function Xi(t){return t*Math.PI/180}function Hi(t){return 180*Math.atan2(t.y,t.x)/Math.PI}function Gi(t){return l(Math.cos(t),Math.sin(t))}const Yi=(t,e,i,s)=>{let r,n,o,h;if(e.x-t.x!=0||s.x-i.x!=0)return e.x-t.x==0?(o=e.x,n=(s.y-i.y)/(s.x-i.x),h=n*(o-i.x)+i.y):s.x-i.x==0?(o=s.x,r=(e.y-t.y)/(e.x-t.x),h=r*(o-t.x)+t.y):(r=(e.y-t.y)/(e.x-t.x),n=(s.y-i.y)/(s.x-i.x),o=(i.y-n*i.x+r*t.x-t.y)/(r-n),h=r*(o-t.x)+t.y),l(o,h)},Wi=(t,e)=>{const i=t.length,s=e.length,r=new Uint16Array(i+s);return r.set(t,0),r.set(e,i),r};class ji{constructor(){this.ri=!0}getInnerStart(){return this.$}getInnerEnd(){return this.Y}getInnerInterval(){return Math.abs(this.Y-this.$)}j(t,e){return this.ri=t!==this.$||e!==this.Y,this.$=t,this.Y=e,this}X(){return this.ri=!1,this}W(){return this.ri=!0,this}}class $i extends ji{constructor(t,e,i,s){if(super(),this.ni=!0,this.oi=!0,this.ai=[0,0],this.li=!0,this.ci=t,this.ui=e,this.di=i,this.fi=t,this.Ai=e,s){const t=t=>{this.gi(t.value)};s.V("change",t),this.gi(s.T()),this.pi=()=>s.G("change",t)}}J(t){return this.H=t,this.oi=!0,this}yi(t){return this.ai=t.map(Math.abs),this.li=!0,this}mi(){return this.ci/this.di*this.H+this.ai[0]}xi(){return(this.ci+this.ui)/this.di*this.H-this.ai[1]}Si(){return this.getCellSize()-this.bi()}Mi(){return this.H}getCellSize(){return this.wi(this.H)}bi(){return this.ai[0]+this.ai[1]}_i(){return this.ai}gi(t){this.di=t.reduce(pi,0),this.ci=t.reduce(((t,e,i)=>i>=this.fi?t:t+e),0),this.ui=t.reduce(((t,e,i)=>i>=this.fi&&i<this.fi+this.Ai?t+e:t),0),this.ni=!0,this.Ci()}wi(t){return t*this.ui/this.di}X(){return super.X(),this.oi=!1,this.li=!1,this.ni=!1,this}W(){return super.W(),this.oi=!0,this.li=!0,this.ni=!0,this}}class Qi extends $i{constructor(t,e,i,s){super(t,e,i,s),this.ki={internal:10,function:Ji(10),number:10},this.H=1e3,this.j(1,1e3),this.Ti=this.Fi()}ht(t,e,i,s,r){if(t===e)return!1;const n=Math.min(t,e)<Zi,o=Math.max(t,e)>Ki;return!n&&!o||!!r&&(e>t?{start:n?Zi:t,end:o?Ki:e}:{start:o?Ki:t,end:n?Zi:e})}ot(t){const e=this.mi(),i=this.xi(),s=Math.max(t,Zi);return e+(this.ki.function(s)-this.Ti.scaleStartLog)/this.Ti.scaleIntervalLog*(i-e)}nt(t){const e=this.mi(),i=(t-e)/(this.xi()-e),s=this.Ti.scaleStartLog+i*this.Ti.scaleIntervalLog;return this.ki.number**s}Ci(){this.ki&&this.Fi()}j(t,e){return super.j(t,e),this.ki&&this.Fi(),this}yi(t){return super.yi(t),this.ki&&this.Fi(),this}J(t){return super.J(t),this.ki&&this.Fi(),this}Ii(t){return this.ki={internal:t,function:Ji(t),number:qi(t)},this}Pi(){return this.ki.internal}Li(t,e){const i=this.ot(t)+e;return this.nt(i)}Bi(){return this.oi||this.ri||this.li||this.ni}Fi(){const t=this.ki.function(this.$),e=this.ki.function(this.Y)-t,i=2*this.mi()/this.H-1,s=2*this.xi()/this.H-1-i;return this.Ti={scaleStartLog:t,scaleIntervalLog:e,viewportStart:i,viewportSize:s},this.Ti}Di(){return this.Ti}}const Ji=t=>"e"===t?Ee:Te(t),qi=t=>"e"===t?Math.E:t,Zi=.9*10**-20,Ki=1.1*10**25,ts=[{prefix:"T",unit:10**12},{prefix:"B",unit:10**9},{prefix:"M",unit:1e6},{prefix:"K",unit:1e3}],es=(t,e,i)=>{const s=Math.abs(i-e);if(0===s)return t.toFixed(0);const r=Math.max(2-ui(s,10),0);return t.toFixed(r)},is={Numeric:(t,e)=>{const{start:i,end:s}=e;return es(t,i,s)},NumericUnits:(t,e)=>{const{start:i,end:s}=e,r=Math.abs(s-i),n=t<0;t=Math.abs(t);let o="",h="";if(r>=1e3&&t>1e3){let e="";for(const i of ts){const s=Math.round(1e3*t/i.unit)/1e3;if(s>=1){e=s.toString(),h=i.prefix;break}}o=(n?"-":"")+e}else{let e=String(Math.floor(t));const i=ui(t,1e3);for(let t=1;t<=i;t+=1){const i=e.length-(3*t+(t-1));e=`${e.substring(0,i)} ${e.substring(i,e.length)}`}o=(n?"-":"")+e+(r<=10?((t,e)=>{if(0===e)return"";let i=(Math.abs(t)-Math.abs(Math.floor(t))).toString().substring(1);return i.length>e&&(i=i.substring(0,e+1)),i})(t,2-ui(r,10)):"")}return o+=h,o},LogarithmicExponentsRounded:(t,e,i,s=10)=>{const r=Ji(s)(t);return`${s}${ss(r)}`},LogarithmicExponents:(t,e,i,s=10)=>{const r=Ji(s),n=Math.floor(r(t)),o=t/qi(s)**n;return`${Math.round(o)}×${s}${ss(n)}`},LogarithmicExtreme:(t,e,i,s=10)=>{const r=Ji(s),n=Math.floor(r(t));return`${(t/qi(s)**n).toFixed(2)}×${s}${ss(n)}`},LogarithmicNoExponents:(t,e,i,s=10)=>{const r=Ji(s);if("e"===s)return`${Math.floor(r(t))}e`;const n=t.toString();if(t>1)return n;const o=Math.floor(r(t));return t.toFixed(Math.abs(o))},Scientific:(t,e)=>{const{start:i,end:s}=e,r=Math.max(Math.abs(i),Math.abs(s)),n=Math.floor(Math.log10(r));return 0===t?`0.00e${n<0?"":"+"}${n}`:t.toExponential(2)}},ss=t=>Math.round(t).toString().split("").map((t=>{switch(t){case"0":return"⁰";case"1":return"¹";case"2":return"²";case"3":return"³";case"4":return"⁴";case"5":return"⁵";case"6":return"⁶";case"7":return"⁷";case"8":return"⁸";case"9":return"⁹";case"-":return"⁻";default:return t}})).join("");class rs extends $i{constructor(t,e,i,s){super(t,e,i,s),this.Ei=!1,this.Ri=!1,this.zi=0,this.H=1e3,this.j(0,10),this.Z()}Bi(){return this.Ri}ht(t,e,i,s,r){if(t===e)return!1;const n=Math.abs(s-i),o=Math.abs(e-t);if(!this.Ei){const i=((t,e,i)=>{const s=((t,e)=>{if(e<hi&&e>ai&&t<hi&&t>ai){const i=Math.abs(t/2**23),s=Math.abs(e/2**23),r=Math.min(i,s);return 10**Math.floor(Math.log10(r))}})(t,e);if(void 0!==s)return s*i})(t,e,this.getCellSize());if(void 0===i)return!1;if(o>i)return!0;const s=(e+t)/2,h=(r?i/2:n/2)*(t>e?-1:1);return{start:s-h,end:s+h}}const h=10**-(12-Math.log10(Math.max(Math.abs(t),1)));if(o>h)return!0;const a=(e+t)/2,l=(r?h/2:n/2)*(t>e?-1:1);return{start:a-l,end:a+l}}Ci(){this.Z()}ot(t){return this.mi()+(t-this.$)/(this.Y-this.$)*(this.xi()-this.mi())}nt(t){return this.$+(t-this.mi())/(this.xi()-this.mi())*(this.Y-this.$)}j(t,e){return super.j(t,e),this.Z(),this}yi(t){return super.yi(t),this.Z(),this}J(t){return super.J(t),this.Oi=ns(this.Y-this.$,this.ai,this.H,this.ui,this.di),this.Z(),this}Vi(){return this.Ei=!0,this}Ni(){return this.Ei}Gi(){return Math.abs(this.Ui)}$i(){return this.Gi()/this.Oi}Yi(){return this.Hi}Xi(){return this.Wi}getPixelSize(){return this.Oi}Di(){return this.Ti}W(){return super.W(),this.Ri=!0,this}X(){return super.X(),this.Ri=!1,this}ji(t,e=is.Numeric){return e(t,{start:this.$,end:this.Y})}Zi(){const t=Math.abs(this.getInnerEnd()).toString().length,e=Math.abs(this.getInnerStart()).toString().length;return t>e?t:e}Qi(t){return ns(t,this.ai,this.H,this.ui,this.di)}Z(){let t=this.$,e=this.Y,i=0;this.Ei&&(t=0,e=this.Y-this.$,i=this.$);const s=e-t,r=ns(s,this.ai,this.H,this.ui,this.di);this.Wi=t-this.ai[0]*r,this.Hi=e+this.ai[1]*r;const n=this.Hi-this.Wi,o=n-this.Ui,h=Math.abs(o/r),a=s-this.zi,l=Math.abs(a/r);(!this.Ti||h>=.4||l>=.4)&&(this.zi=s,this.Ui=n,this.Oi=r,this.Ri=!0);const c=this.Ui*this.di/(2*this.ui),u=-(this.Wi-this.Ui*this.ci/this.ui)-c,d=2*this.mi()/this.H-1,f=2*this.xi()/this.H-1-d;this.Ti={displacement:u,scaling:c,highPrecisionOffset:i,viewportStart:d,viewportSize:f,scaleStartLog:0,scaleIntervalLog:0}}Li(t,e){return t+this.Oi*e}}const ns=(t,e,i,s=1,r=1)=>t/(i*s/r-(e[0]+e[1]));class os{Ji(t,e){return"x"in t?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e),this}X(){return this.x.X(),this.y.X(),this}W(){return this.x.W(),this.y.W(),this}J(t,e){return"object"==typeof t?(this.x.J(t.x),this.y.J(t.y)):(this.x.J(t),this.y.J(e)),this}Mi(){return l(this.x.Mi(),this.y.Mi())}Ki(t){return this.x.yi(t),this}qi(t){return this.y.yi(t),this}bi(){return l(this.x.bi(),this.y.bi())}ts(t,e){return this.x.j(t,e),this}ss(t,e){return this.y.j(t,e),this}getInnerIntervalPixels(){const t=this.x.getCellSize(),e=this.y.getCellSize();return{x:t-this.x.bi(),y:e-this.y.bi()}}es(){return this.x.Bi()||this.y.Bi()}}class hs extends os{constructor(){super(...arguments),this.hs="LinearScaleXY"}rt(t,e,i,s){return this.x=new rs(t.x,e.x,i.x,s?s.x:void 0),this.y=new rs(t.y,e.y,i.y,s?s.y:void 0),this}Ni(){return this.x.Ni()||this.y.Ni()}rs(){return l(this.x.getPixelSize(),this.y.getPixelSize())}Di(){return{x:this.x.Di(),y:this.y.Di()}}Li(t,e){const i=this.rs();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}ns(t,e,i,s){const r=this.rs(),n=Fi(t,e);return n.x*=s,n.y*=s,{x:t.x+i*r.x*n.x,y:t.y+i*r.y*n.y}}}class as extends os{constructor(){super(...arguments),this.hs="MixedScaleXY"}Ni(){return!1}Li(t,e){const i=this.x.ot(t.x),s=this.y.ot(t.y),r={x:i+e.x,y:s+e.y};return{x:this.x.nt(r.x),y:this.y.nt(r.y)}}ns(t,e,i,s){const r={x:this.x.ot(t.x),y:this.y.ot(t.y)},n={x:this.x.ot(e.x),y:this.y.ot(e.y)},o=Ri(Di(n,r)),h=Fi(n,r),a={x:r.x+o.x*s+h.x*i,y:r.y+o.y*s+h.y*i};return{x:this.x.nt(a.x),y:this.y.nt(a.y)}}Di(){const t=this.x.Di(),e=this.y.Di();return{uScaleStart:[this.x.$,this.y.$],uScaleInterval:[this.x.getInnerInterval(),this.y.getInnerInterval()],uScaleStartLog:[t.scaleStartLog,e.scaleStartLog],uScaleIntervalLog:[t.scaleIntervalLog,e.scaleIntervalLog],uViewportStart:[t.viewportStart,e.viewportStart],uViewportSize:[t.viewportSize,e.viewportSize]}}}const ls=(t,e)=>t instanceof Qi||e instanceof Qi?(new as).Ji(t,e):(new hs).Ji(t,e),cs=t=>"client"===t,us=t=>!!(t&&"object"==typeof t&&"clientX"in t&&"number"==typeof t.clientX&&"clientY"in t&&"number"==typeof t.clientY),ds=t=>"relative"===t,fs=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y),gs=(t,e,i,s,r,n)=>{if(!t)return;let o=t;const h="button"in i?i:void 0;if(h)if(0===h.button){if(!1===t.lmb)return;void 0!==t.lmb&&(o=Gt(o,t.lmb))}else if(1===h.button){if(!1===t.mmb)return;void 0!==t.mmb&&(o=Gt(o,t.mmb))}else if(2===h.button){if(!1===t.rmb)return;void 0!==t.rmb&&(o=Gt(o,t.rmb))}if(s){if(!1===t.shift)return;o=Gt(o,t.shift)}if(r){if(!1===t.ctrl)return;o=Gt(o,t.ctrl)}if(n){if(!1===t.alt)return;o=Gt(o,t.alt)}if(!e)return o;const a=o[e];return a?!0===a?o:Gt(o,a):void 0},ys=t=>{const e=[];return{push:t=>{e.push(t)},end:()=>{e.length>1&&t&&Wt.console.warn("LightningChart JS warning | event handler triggered more than 1 interaction.\nThis likely means that your `chart.setUserInteractions` configuration either enables conflicting interactions or more likely doesn't disable conflicting default interactions."),e.forEach((t=>t()))}}},ps=(t,e,i)=>{if(t){const t={x:i.x.mi(),y:i.y.mi(),width:i.x.Si(),height:i.y.Si()};e.forEach((e=>{e.ls=t}))}else e.forEach((t=>{t.ls=void 0}))},ms=(t,e)=>{var i;return e?"string"==typeof e?`${t} ${e}`:!1!==(null===(i=e.cs)||void 0===i?void 0:i.displayInCursor)&&e.getUnits()?`${t} ${e.getUnits()}`:t:t},xs=t=>{let e=!1,i={type:"linear"};if(t&&(void 0!==t.opposite&&(e=t.opposite),t.type&&"linear-highPrecision"===t.type&&(i={type:"linear-highPrecision"}),t.type&&"logarithmic"===t.type)){let s=10;if(t.base)if("E"===t.base||"e"===t.base||"natural"===t.base)s="e";else if("number"==typeof t.base)s=t.base;else if("string"==typeof t.base)try{s=Number(t.base)}catch(e){console.warn(`Unidentified logarithmic base "${t.base}"`)}i={base:s,type:"logarithmic"}}return{opposite:e,type:i}},Ss=(t,e,i,s=1)=>Kt(t+.1*s*(e-t)+.5*s*Math.abs(i.getPixelSize())*Math.sign(e-t),t,e),vs=(t,e,i,s=1)=>{const r=i.ot(t),n=i.ot(e);return Kt(i.nt(r+.1*s*(n-r)+.5*s*Math.sign(n-r)),t,e)};var As,bs;e.HighlightModes=void 0,(As=e.HighlightModes||(e.HighlightModes={}))[As.noHighlighting=0]="noHighlighting",As[As.onHover=1]="onHover";class Cs{constructor(t,i,s,r){this.us=e.HighlightModes.onHover,this.ft=!1,this.At=!0,this.ds=[],this.fs=[],this.chart=t,this.As=i,this.Ct=s,this.gs=new Map,this.ps=r,this.vs=this.ps.ys(this,{xs:{themeEffectEnabled:this.Ct.effectsText},Ss:{}}),this.chart.St.Ms.bs(this,(t=>{this.gs.forEach(((e,i)=>i.Dt(t))),this.fs.forEach((e=>e.setHighlight(t))),this.ds.forEach((e=>e.Dt(t)))}),{animationEnabled:this.chart.getAnimationsEnabled()}),Wt.requestAnimationFrame((()=>{this.addEventListener("pointerenter",(()=>{this.us===e.HighlightModes.onHover&&this.setHighlight(!0)})),this.addEventListener("pointerleave",(()=>{this.us===e.HighlightModes.onHover&&this.setHighlight(!1)}))}))}ws(){}_s(t,e){const i=void 0===(null==e?void 0:e.setEventHandlers)||e.setEventHandlers,s=void 0!==(null==e?void 0:e.isText)&&e.isText;this.gs.set(t,{isText:s});const r=Array.from(this.gs);this.vs.xs.Cs(r.filter((t=>t[1].isText)).map((t=>t[0]))),this.vs.Ss.Cs(r.filter((t=>!t[1].isText)).map((t=>t[0]))),t.setVisible(this.At).Dt(this.chart.St.Ms.ks(this,!0)),Wt.requestAnimationFrame((()=>{t.setPointerEvents(this.getPointerEvents()),i&&this.R.Gt(t,{getExtraData:(t,e,i)=>this.qt(i,t)})}));const n=e=>{t.removeEventListener("dispose",n),this.gs.delete(t)};t.addEventListener("dispose",n)}Ts(t){this.ds=t;const e=this.chart.St.Ms.ks(this,!0);t.forEach((t=>{t.Dt(e).Fs(this.At)}))}qt(t,e){}Is(t){const e=this.chart.St.Ps(t);if(e&&Array.from(this.gs.keys()).includes(e.entity))return this.qt(e.info,t)}setEffect(t){return this.vs.xs.Ls(t&&this.Ct.effectsText),this.vs.Ss.Ls(t),this.chart.St.Bs(),this}getEffect(){return this.vs.xs.Ds()||this.vs.Ss.Ds()}setIcon(t){return this.Es=t,this.chart.St.Bs(),this}getIcon(){return this.Es}setName(t){return this.Rs=t,this.fs.forEach((e=>e.setText(t))),this}getName(){return this.Rs||"Component"}dispose(){return this.ft||(this.ft=!0,this.gs.forEach(((t,e)=>e.dispose())),this.As(this),this.fs.forEach((t=>{t.dispose()})),this.fs.length=0,this.R.O("dispose",{}),this.chart.St.Bs()),this}setVisible(t){return t===this.At||(this.At=t,this.gs.forEach(((e,i)=>i.setVisible(t))),this.ds.forEach((e=>e.Fs(t))),this.fs.forEach((e=>e.setOn(t))),this.R.O("visiblechange",{isVisible:t}),this.chart.St.Bs()),this}getVisible(){return this.At}setHighlight(t){return this.chart.St.Ms.zs(this,t),this.R.O("highlightchange",{highlight:He(t)}),this}getHighlight(){return this.chart.St.Ms.ks(this)}setAnimationHighlight(t){return this.chart.St.Ms.Os(this,t),this}getAnimationHighlight(){return this.chart.St.Ms.Vs(this)}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}getPointed(){if(!this.chart.St.Ns())return!1;for(const t of this.gs)if(this.chart.St.Gs(t[0]))return!0;for(const t of this.ds)if(this.chart.St.Gs(void 0,t))return!0;return!1}setHighlightOnHover(t){return this.us=t?e.HighlightModes.onHover:e.HighlightModes.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.us!==e.HighlightModes.noHighlighting}Us(){}attach(t,e=!0,i=!1){return this.styleLegendEntry(t,i),Ge(t,[this],{toggleVisibilityOnClick:e,label:this.getName(),style:void 0}),this.fs.push(t),t.addEventListener("dispose",(()=>{const e=this.fs.indexOf(t);e>=0&&this.fs.splice(e,1)})),this}$s(){return this.Es}isDisposed(){return this.ft}set draggable(t){this.R.draggable=t}get draggable(){return this.R.draggable}}class Ms extends Cs{constructor(t,e,i,s,r,n,o,h){super(e,i,o,h),this.Ys=!0,this.Hs=t,this.axis=s,this.ct=r,this.Xs=n,Wt.requestAnimationFrame((()=>this.Ws()))}setClipping(t){return this.Ys=t,this.Hs.Bs(),this}getClipping(){return this.Ys}}e.TextObjectIdentifier=void 0,(bs=e.TextObjectIdentifier||(e.TextObjectIdentifier={}))[bs.Other=0]="Other",bs[bs.CursorResultTable=1]="CursorResultTable",bs[bs.CursorTickMarker=2]="CursorTickMarker",bs[bs.ChartTitle=3]="ChartTitle",bs[bs.AxisTitle=4]="AxisTitle";const Ts=t=>"object"==typeof t&&null!==t&&"setCornerRadius"in t;var Es;e.PointShape=void 0,(Es=e.PointShape||(e.PointShape={}))[Es.Square=0]="Square",Es[Es.Circle=1]="Circle",Es[Es.HollowCircle=2]="HollowCircle",Es[Es.Triangle=3]="Triangle",Es[Es.Cross=4]="Cross",Es[Es.Diamond=5]="Diamond",Es[Es.Plus=6]="Plus",Es[Es.Minus=7]="Minus",Es[Es.Arrow=8]="Arrow",Es[Es.Star=9]="Star";const ws={ProgressiveX:"ProgressiveX",ProgressiveY:"ProgressiveY",RegressiveX:"RegressiveX",RegressiveY:"RegressiveY"},Bs=t=>"ProgressiveX"===t||"RegressiveX"===t?"x":"y",ks=t=>"ProgressiveX"===t||"ProgressiveY"===t,Rs=(t,e,i)=>t*(1-i)+e*i,Fs=(t,e,i,s,r)=>{if(void 0===e.value||void 0===i.value||void 0===s.value||void 0===r.value)return;const n=(t.x-i.point.x)/(r.point.x-i.point.x),o=(r.point.y-i.point.y)*n+i.point.y,h=(t.x-e.point.x)/(s.point.x-e.point.x),a=(s.point.y-e.point.y)*h+e.point.y,l=(t.y-a)/(o-a),c=Rs(i.value,r.value,n),u=Rs(e.value,s.value,h);return Rs(u,c,l)},Is={warm:t=>e=>T(60/(t-1)*e,.8,.8),cold:t=>e=>T(60/(t-1)*e+180,.8,.8),fullSpectrum:t=>e=>T(360/t*e,.8,.8),reverseSpectrum:t=>e=>T(360/t*(t-e),.8,.8),flatUI:t=>e=>T(360/t*e+8,.8,.8-.15/t*e),arction:t=>e=>{const i=1-.2/t*e;return T(360/t*e+51,i,i)},arctionWarm:t=>e=>{const i=t-1,s=1-.2/i*e;return T(46-46/i*e+4,s,s)},sunset:t=>e=>{const i=[170,320];return T(e%2?i[0]:i[1],.8,.5+.5/(t-1)*e)},dynamic:t=>e=>{const i=e%2,s=[234,346];return T(i?s[0]:s[1],i?.3:.9,.5+.5/(t-1)*e)},magenta:t=>e=>{const i=[.9,.6];return T(354,e%2?i[0]:i[1],.5+.5/(t-1)*e)},greyscale:t=>e=>T(0,0,.25+.5/(t-1)*e),frozen:t=>e=>{const i=[.8,.6];return T(160+80/(t-1)*e,.6,e%2?i[0]:i[1])},retro:t=>e=>{const i=[6,183];return T(e%2?i[0]:i[1],.7,.5+.5/(t-1)*e)},crayons:t=>e=>{let i=180+230/(t-1)*e;return i>360&&(i-=360),T(i,.9,.8)},custom:(t,e)=>i=>{const s=.25+.5/(t-1)*i;if(!e)return T(0,0,s);const r=e.getR()/255,n=e.getG()/255,o=e.getB()/255,h=Math.max(r,n,o),a=Math.min(r,n,o);let l=0;if(h!==a){const t=h-a;switch(h){case r:l=(n-o)/t+(n<o?6:0);break;case n:l=(o-r)/t+2;break;case o:l=(r-n)/t+4;break;default:l=0}return l=l/6*360,T(l,.8,s)}return T(0,0,s)},sector:(t,e,i=.8,s=.8)=>r=>n=>T(t+(e-t)/r*n,i,s),auroraBorealis:t=>e=>Os([{value:0,hex:"#23FF7A"},{value:1/9,hex:"#03E65D"},{value:2/9,hex:"#04D155"},{value:3/9,hex:"#00B849"},{value:4/9,hex:"#00A869"},{value:5/9,hex:"#008F68"},{value:6/9,hex:"#00815E"},{value:7/9,hex:"#017153"},{value:8/9,hex:"#704A85"},{value:1,hex:"#743A70"}],t,e),blueSciFi:t=>e=>Os([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#E2E7FF"},{value:2/9,hex:"#ACB9F8"},{value:3/9,hex:"#889DFF"},{value:4/9,hex:"#547EEF"},{value:5/9,hex:"#4068D8"},{value:6/9,hex:"#2B50B7"},{value:7/9,hex:"#1B3E9F"},{value:8/9,hex:"#8D1395"},{value:1,hex:"#780A74"}],t,e),light:t=>e=>Os([{value:0,hex:"#FECC00"},{value:1/9,hex:"#F7B300"},{value:2/9,hex:"#EF9900"},{value:3/9,hex:"#E88000"},{value:4/9,hex:"#E06600"},{value:5/9,hex:"#DD5A00"},{value:6/9,hex:"#D94D00"},{value:7/9,hex:"#D13300"},{value:8/9,hex:"#C91A00"},{value:1,hex:"#C10000"}],t,e),monochrome:t=>e=>Os([{value:0,hex:"#FFFFFF"},{value:1/9,hex:"#EEEEEE"},{value:2/9,hex:"#DCDCDC"},{value:3/9,hex:"#C1C1C1"},{value:4/9,hex:"#A4A2A2"},{value:5/9,hex:"#8B8B8B"},{value:6/9,hex:"#787878"},{value:7/9,hex:"#656565"},{value:8/9,hex:"#565555"},{value:1,hex:"#434343"}],t,e),night:t=>e=>Os([{value:0,hex:"#F0F9E0"},{value:1/9,hex:"#C9DFA4"},{value:2/9,hex:"#B5C796"},{value:3/9,hex:"#8998B7"},{value:4/9,hex:"#6E7E9E"},{value:5/9,hex:"#5C6D8F"},{value:6/9,hex:"#47587A"},{value:7/9,hex:"#374B72"},{value:8/9,hex:"#273C65"},{value:1,hex:"#192847"}],t,e),sunset2:t=>e=>Os([{value:0,hex:"#22334D"},{value:1/9,hex:"#82062C"},{value:2/9,hex:"#AB001D"},{value:3/9,hex:"#D80428"},{value:4/9,hex:"#CF5D1B"},{value:5/9,hex:"#CF8229"},{value:6/9,hex:"#CF9D29"},{value:7/9,hex:"#C4BE25"},{value:8/9,hex:"#E1DC49"},{value:1,hex:"#FFFA67"}],t,e)},Os=(t,e,i)=>{const s=Ds(e,i),[r,n]=Ps(s,t),o=Ls(t[r]),h=Ls(t[n]),a=0!==o.value?(h.value-s)/o.value:0,l={value:a,h:Rs(o.h,h.h,a),s:Rs(o.s,h.s,a),v:Rs(o.v,h.v,a)};return T(l.h,l.s,l.v)},Ls=t=>{const e=(t=>{const e=t.r,i=t.g,s=t.b,r=Math.max(e,i,s),n=Math.min(e,i,s);let o=0;const h=r,a=r-n,l=0===r?0:a/r;if(r===n)o=0;else{switch(r){case e:o=(i-s)/a+(i<s?6:0);break;case i:o=(s-e)/a+2;break;case s:o=(e-i)/a+4}o/=6}return[360*o,l,h]})(M(t.hex));return{value:t.value,h:e[0],s:e[1],v:e[2]}},Ds=(t,e)=>{const i=e/t;return i<0?0:i>1?1:i},Ps=(t,e)=>{if(e.length<2)throw new Error("Invalid palette size");for(let i=0;i<e.length;i+=1)if(t<e[i].value)return[i-1,i];return[e.length-2,e.length-1]};class Vs{constructor(){this.type="simple"}}const _s=new Vs;class zs{constructor(t){this.type="phong",this.ambientReflection=1,this.specularReflection=.1,this.diffuseReflection=1,this.ambientColor=M("#000"),this.specularColor=M("#fff"),this.shininess=32,t&&(this.ambientReflection=Number.isNaN(Number(t.ambientReflection))?this.ambientReflection:Number(t.ambientReflection),this.specularReflection=Number.isNaN(Number(t.specularReflection))?this.specularReflection:Number(t.specularReflection),this.diffuseReflection=Number.isNaN(Number(t.diffuseReflection))?this.diffuseReflection:Number(t.diffuseReflection),this.ambientColor=t.ambientColor||this.ambientColor,this.specularColor=t.specularColor||this.specularColor,this.shininess=t.shininess||this.shininess)}}const Us=new zs,Ns={Simple:Vs,Phong:zs},Xs=s.Record({type:"font",size:14,family:"Arial",weight:"normal",style:"normal",variant:!1});class Hs extends Xs{constructor(t){super(t)}setSize(t){return this.set("size",t)}setFamily(t){return this.set("family",t)}setWeight(t){return this.set("weight",t)}setStyle(t){return this.set("style",t)}setVariant(t){return this.set("variant",t)}getSize(){return this.get("size")}getFamily(){return this.get("family")}getWeight(){return this.get("weight")}getStyle(){return this.get("style")}getVariant(){return this.get("variant")}}const Gs=t=>!(!t||"object"!=typeof t||!("type"in t)||"font"!==t.type),Ys=new Hs,Ws=new class{getFillStyle(){return V}},js=s.Record({type:"triangulated-points-3d",shape:"sphere",size:10,fillStyle:new N,wireframeStyle:Ot});class $s extends js{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setWireframeStyle(t){return"function"==typeof t?this.set("wireframeStyle",t(this.get("wireframeStyle"))):this.set("wireframeStyle",t)}getWireframeStyle(){return this.get("wireframeStyle")}setShape(t){return this.set("shape",t)}getShape(){return this.get("shape")}}const Qs=t=>!(!t||"object"!=typeof t||!("type"in t)||"triangulated-points-3d"!==t.type),Js=s.Record({type:"pixelated-points-3d",size:5,fillStyle:new N});class qs extends Js{constructor(t){super(t)}setSize(t){return this.set("size",t)}getSize(){return this.get("size")}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.get("fillStyle"))):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}}const Zs=t=>!(!t||"object"!=typeof t||!("type"in t)||"pixelated-points-3d"!==t.type),Ks={Triangulated:$s,Pixelated:qs},tr=s.Record({type:"linestyle",lineType:"solid",fillStyle:new N({color:C(255,255,255)}),thickness:1});class er extends tr{constructor(t){super({...t,lineType:"solid"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Wt(){const t=this.getThickness();return t<0?1:t}}const ir=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"solid"!==t.lineType),sr={Dotted:[1,3],DottedDense:[1,1],Dashed:[3,1],DashedEqual:[2,2],DashedLoose:[2,4],DashDotted:[3,2,1,2]},rr=s.Record({type:"linestyle",lineType:"dashed",pattern:sr.DashedEqual,fillStyle:new N({color:C(255,255,255)}),thickness:1,patternScale:3});class nr extends rr{constructor(t){super({...t,lineType:"dashed"})}setFillStyle(t){return"function"==typeof t?this.set("fillStyle",t(this.getFillStyle())):this.set("fillStyle",t)}getFillStyle(){return this.get("fillStyle")}setThickness(t){return"function"==typeof t?this.set("thickness",t(this.getThickness())):this.set("thickness",t)}getThickness(){return this.get("thickness")}Wt(){const t=this.getThickness();return t<0?1:t}setPattern(t){return"function"==typeof t?this.set("pattern",t(this.getPattern())):this.set("pattern",t)}getPattern(){return this.get("pattern")}setPatternScale(t){return"function"==typeof t?this.set("patternScale",t(this.getPatternScale())):this.set("patternScale",t)}getPatternScale(){return this.get("patternScale")}}const or=t=>!(!t||"object"!=typeof t||!("lineType"in t)||"dashed"!==t.lineType),hr=s.Record({type:"icon",width:void 0,height:void 0,js:void 0,Zs:qt,Qs:qt});class ar extends hr{constructor(t,e,i,s){super({...s,js:t,Zs:e,Qs:i})}dispose(){return this.Qs(this),this}setWidth(t){const e=this.set("width",t);return this.Zs(e),e}getWidth(){return this.get("width")}setHeight(t){const e=this.set("height",t);return this.Zs(e),e}getHeight(){return this.get("height")}setSize(t,e){const i=this.withMutations((i=>{i.set("width",t).set("height",e)}));return this.Zs(i),i}Mi(){if(!this.js)return{x:0,y:0};const t=this.js.width,e=this.js.height;if(0===t||0===e)return{x:0,y:0};const i=this.width,s=this.height;return"number"==typeof i&&"number"==typeof s?{x:i,y:s}:"number"==typeof i?{x:i,y:e*i/t}:"number"==typeof s?{x:t*s/e,y:s}:{x:t,y:e}}}const lr=t=>!(!t||"object"!=typeof t||!("type"in t)||"icon"!==t.type),cr=s.Record({type:"glow",color:C(255,255,255,50),spread:1,blur:4,offset:{x:0,y:0}});class ur extends cr{constructor(t){super(t)}setSpread(t){return this.set("spread","function"==typeof t?t(this.get("spread")):t)}getSpread(){return this.get("spread")}setBlur(t){return this.set("blur","function"==typeof t?t(this.get("blur")):t)}getBlur(){return this.get("blur")}setColor(t){return this.set("color","function"==typeof t?t(this.get("color")):t)}getColor(){return this.get("color")}setOffset(t){return this.set("offset","function"==typeof t?t(this.get("offset")):t)}getOffset(){return this.get("offset")}}class dr extends os{constructor(){super(...arguments),this.hs="RadialScale",this.Js={start:0,end:1},this.Ks=!1,this.qs=0,this.H=l(0,0),this.te=[0,0],this.ie=[0,0],this.u=!0,this.Ri=!0,this.se=!0,this.ee=!0,this.he={x:0,y:0},this.Ti={x:{displacement:0,scaling:0,highPrecisionOffset:0},y:{displacement:0,scaling:0,highPrecisionOffset:0}}}re(t,e){return t===this.Js.start&&e===this.Js.end||(this.Js={start:t,end:e},this.se=!0,this.ne()),this}oe(){return this.Js}ae(){return this.Js.end>=this.Js.start}le(t){this.Ks=t,this.ee=!0}ce(){return!1===this.Ks}ue(t){this.qs=t,this.ee=!0}de(){return this.qs}Bi(){return this.Ri}Ni(){return!1}rt(t,e,i,s){return this.x=new rs(t.x,e.x,i.x,s?s.x:void 0),this.y=new rs(t.y,e.y,i.y,s?s.y:void 0),this}Di(){return this.Ti}fe(){return this.se}Ae(){return this.ee}rs(){return this.he}X(){return this.u=!1,this.Ri=!1,this.se=!1,this.ee=!1,this}W(){return this.u=!0,this.Ri=!0,this.se=!0,this.ee=!0,this}J(t,e){return"object"==typeof t?(this.H.x=t.x,this.H.y=t.y):(this.H.x=t,this.H.y=e),this.ne(),this}Ki(t){return this.te=t,this.ne(),this}qi(t){return this.ie=t,this.ne(),this}bi(){return l(this.te[0]+this.te[1],this.ie[0]+this.ie[1])}Mi(){return this.H}ne(){const t=this.Js,e=l(this.x.wi(this.H.x),this.y.wi(this.H.y)),i=this.te[0]+this.te[1],s=this.ie[0]+this.ie[1],r=Math.max(e.x-i,0),n=Math.max(e.y-s,0),o=.5*(r>n?n:r),h=[this.te[0]+Math.max((r-2*o)/2,0),this.te[1]+Math.max((r-2*o)/2,0)],a=[this.ie[0]+Math.max((n-2*o)/2,0),this.ie[1]+Math.max((n-2*o)/2,0)],c=Math.abs(t.end-t.start);this.x.J(this.H.x).yi(h).j(-c,c),this.y.J(this.H.y).yi(a).j(-c,c),this.he={x:this.x.getPixelSize(),y:this.y.getPixelSize()},this.Ti={x:this.x.Di(),y:this.y.Di()},this.W()}Li(t,e){const i=this.rs();return{x:t.x+e.x*i.x,y:t.y+e.y*i.y}}ns(t,e,i,s){const r=this.rs(),n=Fi(t,e);return n.x*=s,n.y*=s,{x:t.x+i*r.x*n.x,y:t.y+i*r.y*n.y}}}const fr=t=>{if(t instanceof hs||t instanceof dr)return t.Ni()?"linear-highPrecision":"linear";if(t instanceof as){const e={};return t.x instanceof Qi&&(e.x={base:t.x.Pi()}),t.y instanceof Qi&&(e.y={base:t.y.Pi()}),["logarithmic",e]}return"linear"},gr=(t,e,i)=>{if(0===i||360===i||180===i||i%180==0)return{x:t,y:e};if(90===i||-90===i||(i+90)%180==0)return{x:e,y:t};const s=i*Math.PI/180,r=Math.cos(s),n=Math.sin(s);return{x:Math.abs(t*r)+Math.abs(e*n),y:Math.abs(t*n)+Math.abs(e*r)}},yr=t=>{const e=Object.keys(t),i={};return e.forEach((e=>{const s=t[e];let r=!1;i[e]=t=>{if(!t)return r;const e=s();return r=e,e}})),i},pr=(t,e,i)=>"value"===t.getLookUpProperty()?i:"x"===t.getLookUpProperty()?{min:e.jt(),max:e.Zt()}:"y"===t.getLookUpProperty()?{min:e.Qt(),max:e.Jt()}:"z"===t.getLookUpProperty()?{min:e.ge(),max:e.pe()}:void 0,mr=t=>!(!t||"value"!==t.lookUpProperty||!t.lut.percentageValues),xr={init:t=>(t=>{const i=new Map;t.engine.addEventListener("locationchange",(()=>{i.forEach((t=>{t.bounds=void 0}))}));const s=e=>{let s=i.get(e.uid);if(!s){const r=document.createElement("p");r.className="lcjs-text",t.engine.container.append(r),r.style.userSelect="none",r.style.whiteSpace="nowrap",r.style.margin="0px",s={span:r,active:!0},i.set(e.uid,s),r.addEventListener("pointerenter",(i=>t.handleEvent(e,i))),r.addEventListener("pointermove",(i=>t.handleEvent(e,i))),r.addEventListener("pointerleave",(i=>t.handleEvent(e,i)))}if(s.text!==e.text&&(((t,e)=>{const i=t.includes("latex:"),s=!i&&t.includes("tex:");let r=!0;if(i||s)try{Wt.MathJax&&i?(r=!1,e.innerHTML=t.replace(/latex:/g,""),Wt.MathJax.typesetPromise([e]).catch((t=>Wt.console.error(t.message)))):Wt.katex&&s&&(r=!1,Wt.katex.render(t.replace(/tex:/g,""),e,{throwOnError:!1}))}catch(t){r=!0}r&&(e.innerHTML=t)})(e.text,s.span),s.bounds=void 0),s.font!==e.font&&(s.span.style.font=e.font,s.bounds=void 0),s.position!==e.position&&(s.span.style.position=e.position,s.bounds=void 0),s.color!==e.color&&(s.span.style.color=e.color),s.padding!==e.padding&&(s.span.style.padding=e.padding,s.bounds=void 0),s.rotation!==e.rotation&&(s.span.style.transform=`rotate(${e.rotation}deg)`,s.bounds=void 0),s.span.style.lineHeight="80%",s.text!==e.text||s.left!==e.left||s.top!==e.top||s.alignmentX!==e.alignmentX||s.alignmentY!==e.alignmentY||s.padding!==e.padding||s.rotation!==e.rotation||s.font!==e.font){s.span.style.width="unset",s.span.style.height="unset";const t=s.span.clientWidth,i=s.span.clientHeight,r=gr(t,i,e.rotation),n={x:(r.x-t)/2,y:(r.y-i)/2};s.span.style.left=`${e.left+(-.5*e.alignmentX-.5)*r.x+n.x}px`,s.span.style.top=`${e.top+(.5*e.alignmentY-.5)*r.y+n.y}px`,s.bounds=void 0}return s.text=e.text,s.font=e.font,s.position=e.position,s.color=e.color,s.padding=e.padding,s.rotation=e.rotation,s.left=e.left,s.top=e.top,s.alignmentX=e.alignmentX,s.alignmentY=e.alignmentY,s},r=t=>{const e=s(t);let i=e.bounds;return i||(i=e.span.getBoundingClientRect(),e.bounds=i),i},n="polygon(0 0, 0 0, 0 0, 0 0)";return{update:t=>{i.forEach((t=>t.active=!1)),t.textList.forEach((t=>{const i=s(t);i.active=!0,i.span.style.clipPath="unset",t.identifier,e.TextObjectIdentifier.Other})),t.obstructingOverlays.forEach((e=>{const s=Math.min(e.p1.clientX,e.p2.clientX)-0,o=Math.min(e.p1.clientY,e.p2.clientY)-0,h=Math.max(e.p1.clientX,e.p2.clientX)+0,a=Math.max(e.p1.clientY,e.p2.clientY)+0;t.textList.forEach((t=>{if(e.blacklist.includes(t.identifier))return;const l=i.get(t.uid),c=r(t);var u,d,f,g,y,p,m,x;if(u=s,d=o,f=h,g=a,y=c.left-0,p=c.top-0,m=c.right+0,x=c.bottom+0,!((u>=f?u:f)<(y<m?y:m)||(u<f?u:f)>(y>=m?y:m)||(d>=g?d:g)<(p<x?p:x)||(d<g?d:g)>(p>=x?p:x))&&l)if(0!==t.rotation)l.span.style.clipPath=n;else{const t=((t,e,i,s,r,n,o,h)=>{const a=t<i?t:i,l=t>=i?t:i,c=e<s?e:s,u=e>=s?e:s,d=r<o?r:o,f=r>=o?r:o,g=n<h?n:h,y=n>=h?n:h;if(d<a&&f>l&&g<c&&y>u)return[];if(d>=a&&f<=l&&g>=c&&y<=u){const t=.5*(u+c);return[{x:a,y:c},{x:l,y:c},{x:l,y:t},{x:f,y:t},{x:f,y:g},{x:d,y:g},{x:d,y},{x:f,y},{x:f,y:t},{x:l,y:t},{x:l,y:u},{x:a,y:u}]}if(a<d&&l>d&&l<f){if(c<g&&y<u)return[{x:a,y:c},{x:l,y:c},{x:l,y:g},{x:d,y:g},{x:d,y},{x:l,y},{x:l,y:u},{x:a,y:u}];if(c>g&&c<y&&u>y)return[{x:a,y:c},{x:d,y:c},{x:d,y},{x:l,y},{x:l,y:u},{x:a,y:u}];if(g<c&&y>u)return[{x:a,y:c},{x:d,y:c},{x:d,y:u},{x:a,y:u}];if(g<u)return[{x:a,y:c},{x:l,y:c},{x:l,y:g},{x:d,y:g},{x:d,y:u},{x:a,y:u}]}if(d<a&&f>a&&f<l){if(c<g&&y<u)return[{x:a,y:c},{x:l,y:c},{x:l,y:u},{x:a,y:u},{x:a,y},{x:f,y},{x:f,y:g},{x:a,y:g}];if(y>c&&g<c&&y<u)return[{x:l,y:c},{x:l,y:u},{x:a,y:u},{x:a,y},{x:f,y},{x:f,y:c}];if(g<c&&y>u)return[{x:f,y:c},{x:l,y:c},{x:l,y:u},{x:f,y:u}];if(g<u)return[{x:a,y:c},{x:l,y:c},{x:l,y:u},{x:f,y:u},{x:f,y:g},{x:a,y:g}]}if(a>d&&l<f){if(g<c&&y>c&&y<u)return[{x:a,y},{x:l,y},{x:l,y:u},{x:a,y:u}];if(c<g&&g<u&&y>u)return[{x:a,y:c},{x:l,y:c},{x:l,y:g},{x:a,y:g}];if(c<g&&y<u)return[{x:a,y:c},{x:l,y:c},{x:l,y:g},{x:a,y:g},{x:a,y},{x:l,y},{x:l,y:u},{x:a,y:u}]}if(a<d&&l>f){if(c<g&&u>g)return[{x:a,y:c},{x:l,y:c},{x:l,y:u},{x:f,y:u},{x:f,y:g},{x:d,y:g},{x:d,y:u},{x:a,y:u}];if(g<c&&y>c&&y<u)return[{x:a,y:c},{x:d,y:c},{x:d,y},{x:f,y},{x:f,y:c},{x:l,y:c},{x:l,y:u},{x:a,y:u}];if(g<c&&g<u&&y>u)return[{x:a,y:c},{x:d,y:c},{x:d,y:u},{x:f,y:u},{x:f,y:c},{x:l,y:c},{x:l,y:u},{x:a,y:u}]}return[{x:a,y:c},{x:l,y:c},{x:l,y:u},{x:a,y:u}]})(c.left-0,c.top-0,c.right+0,c.bottom+0,s,o,h,a);l.span.style.clipPath=0===t.length?n:`polygon(${t.map((t=>`${100*(t.x-c.left)/c.width}% ${100*(t.y-c.top)/c.height}%`)).join(", ")})`}}))})),i.forEach(((t,e)=>{t.active||(t.span.remove(),i.delete(e))}))},measureText:t=>{if(!t.visible)return{x:0,y:0};const e=r(t);return{x:e.width,y:e.height}},getTextBoundingBox:t=>{if(t.visible)return r(t)},dispose:()=>{i.forEach((t=>{t.span.remove()}))}}})(t)};class Sr{constructor(t,e){this.ve=t,this.ye=e,this.me=e.rows*Qr,this.xe=e.columns*Jr}}var vr,Ar;e.OnScreenMenuButtonType=void 0,(vr=e.OnScreenMenuButtonType||(e.OnScreenMenuButtonType={}))[vr.ZoomIn=0]="ZoomIn",vr[vr.ZoomInX=1]="ZoomInX",vr[vr.ZoomInY=2]="ZoomInY",vr[vr.ZoomOut=3]="ZoomOut",vr[vr.ZoomOutX=4]="ZoomOutX",vr[vr.ZoomOutY=5]="ZoomOutY",vr[vr.ZoomToFit=6]="ZoomToFit",vr[vr.ToggleAnimations=7]="ToggleAnimations",e.OnScreenMenuButtonShape=void 0,(Ar=e.OnScreenMenuButtonShape||(e.OnScreenMenuButtonShape={}))[Ar.Circle=0]="Circle",Ar[Ar.Rectangle=1]="Rectangle",Ar[Ar.RoundedRectangle=2]="RoundedRectangle";const br={x:-43,y:0},Cr={x:-65,y:0},Mr={x:-86,y:0},Tr={x:-107,y:-1},Er={x:-128,y:-3},wr={x:-150,y:0},Br={x:-171,y:0},kr={x:-276,y:0},Rr={x:-298,y:0},Fr={x:0,y:0},Ir={x:-21,y:0};class Or extends Sr{constructor(t,e,i,s){super(t,i),this.Se=Wt.document.createElement("button"),this.be=Wt.document.createElement("div"),this.Me=Wt.document.createElement("label"),this.ye=i,this.we=e,this._e=s}Ce(t,e,i,s){this.ke(t,s),this.Te(),this.Fe(e),this.Ie(),this.Me.textContent=i||"";const r=Wt.document.createElement("div");this.Pe(r),this.Se.onclick=this.onClick.bind(this),r.appendChild(this.be),r.appendChild(this.Me),this.Se.appendChild(r)}Ie(){this.Se.style.cursor="pointer"}Pe(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignContent="center",t.style.flexDirection="column"}Fe(t){"string"==typeof t?(this.be.style.backgroundImage=`url(${t})`,this.be.style.backgroundSize="100%",this.be.style.backgroundRepeat="no-repeat",this.be.style.backgroundPosition="center",this.be.style.width="20px",this.be.style.height="20px"):this.applyStyleForSprite(t),this.be.style.margin="auto"}Te(){switch(this.we){case e.OnScreenMenuButtonShape.RoundedRectangle:this.Se.style.borderRadius="10px";break;case e.OnScreenMenuButtonShape.Rectangle:this.Se.style.borderRadius="0px";break;case e.OnScreenMenuButtonShape.Circle:default:this.Se.style.borderRadius="31px"}}ke(t,e){this.Se.style.width=`${this.xe.toString()}px`,this.Se.style.height=`${this.me.toString()}px`,this.Se.style.backgroundColor=t,this.Se.style.opacity=e||qr,this.Se.style.alignItems="center",this.Se.style.border="2px solid #707070",this.Se.style.transition="background-color .8s ease"}applyStyleForSprite(t){this.be.style.backgroundImage=`url(${this.ve}/${Zr})`,this.be.style.backgroundPositionX=`${t.x}px`,this.be.style.backgroundPositionY=`${t.y}px`,this.be.style.backgroundSize="1600%",this.be.style.backgroundRepeat="no-repeat",this.be.style.width="20px",this.be.style.height="20px"}Le(t){return t.appendChild(this.Se),t}Be(){return this.Se}}class Lr extends Or{constructor(t,e,i,s){super(t,e,i,s),this.De="",this.Ee="",this.Re=!1,this._e=s}ze(){this.Oe(),this.onToggledStateAction()}Ve(){this.Ne(),this.onInitialStateAction()}Ne(){this.Ge(this.De)}Oe(){this.Ge(this.Ee)}Ge(t){"string"==typeof t?this.be.style.background=t:(this.be.style.backgroundImage=`url(${this.ve}/${Zr})`,this.be.style.backgroundPositionX=`${t.x}px`,this.be.style.backgroundPositionY=`${t.y}px`)}onClick(){this.Re?this.Ve():this.ze(),this.Re=!this.Re}}class Dr extends Or{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this._e=e;const s=this._e.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),br)}onClick(){const t=this._e.Ue();t&&this._e.zoom(t,{x:-1,y:-1})}}class Pr extends Or{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this._e=e;const s=this._e.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),Tr)}onClick(){const t=this._e.Ue();t&&this._e.zoom(t,{x:-1,y:0})}}class Vr extends Or{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this._e=e;const s=this._e.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),wr)}onClick(){const t=this._e.Ue();t&&this._e.zoom(t,{x:0,y:-1})}}class _r extends Or{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this._e=e;const s=this._e.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),Cr)}onClick(){const t=this._e.Ue();t&&this._e.zoom(t,{x:1,y:1})}}class zr extends Or{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this._e=e;const s=this._e.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),Er)}onClick(){const t=this._e.Ue();t&&this._e.zoom(t,{x:1,y:0})}}class Ur extends Or{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this._e=e;const s=this._e.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),Br)}onClick(){const t=this._e.Ue();t&&this._e.zoom(t,{x:0,y:1})}}class Nr extends Lr{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this._e=e;const s=this._e.getTheme();this.De=kr,this.Ee=Rr,this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),this.De)}onToggledStateAction(){this._e.setAnimationsEnabled(!1)}onInitialStateAction(){this._e.setAnimationsEnabled(!0)}}class Xr extends Or{constructor(t,e,i){super(t,i,{rows:1,columns:1},e),this._e=e;const s=this._e.getTheme();this.Ce(s.onScreenMenuBackgroundColor.toRGBAString(),Mr)}onClick(){this._e.forEachAxis((t=>{t.fit(!0)}))}}class Hr extends Or{constructor(t,e,i){super(t,e.shape||Kr,e.dimensions||{rows:1,columns:1},i);const s=i.getTheme(),r=e.color||s.onScreenMenuBackgroundColor.toRGBAString(),n=e.icon||"",o=e.label||"",h=e.opacity||"";this.Ce(r,n,o,h),this.$e=e.action}onClick(){this.$e(this._e)}}class Gr extends Lr{constructor(t,e,i,s){super(t,e,{rows:1,columns:1},i),this._e=i,this.Ye=s,this.De=Ir,this.Ee=Fr,this.Ce(tn,this.De)}Ne(){this.Ge(this.De),this.Se.style.backgroundColor=tn,this.Se.style.border="2px solid #707070",this.Se.style.margin="0px"}Oe(){this.Ge(this.Ee),this.Se.style.background="#FECC00 0% 0% no-repeat padding-box",this.Se.style.border="10px solid #BCBCBC12",this.Se.style.margin="1px"}onToggledStateAction(){var t;null===(t=this.Ye)||void 0===t||t.style.setProperty("display","block")}onInitialStateAction(){var t;null===(t=this.Ye)||void 0===t||t.style.setProperty("display","none")}}var Yr;e.MouseStyles=void 0,(Yr=e.MouseStyles||(e.MouseStyles={})).Move="move",Yr.ResizeColumn="col-resize",Yr.ResizeRow="row-resize",Yr.Horizontal="ew-resize",Yr.Vertical="ns-resize",Yr.NorthWest="nw-resize",Yr.NorthEast="ne-resize",Yr.Copy="copy",Yr.CrossHair="crosshair",Yr.Default="default",Yr.Help="help",Yr.Restricted="not-allowed",Yr.None="none",Yr.Point="pointer",Yr.Text="text",Yr.Wait="wait",Yr.ZoomIn="zoom-in",Yr.ZoomOut="zoom-out";const Wr={LeftBottom:l(-1,-1),CenterBottom:l(0,-1),RightBottom:l(1,-1),LeftCenter:l(-1,0),Center:l(0,0),RightCenter:l(1,0),LeftTop:l(-1,1),CenterTop:l(0,1),RightTop:l(1,1)},jr=new N({color:C(255,255,255,0)}),$r=new er({thickness:1,fillStyle:jr}),Qr=60,Jr=60,qr="1.0",Zr="osm/osm-sprite-transparent.png",Kr=e.OnScreenMenuButtonShape.Circle,tn="#363636";var en;e.OSMPosition=void 0,(en=e.OSMPosition||(e.OSMPosition={}))[en.TopRight=0]="TopRight",en[en.TopLeft=1]="TopLeft",en[en.BottomLeft=2]="BottomLeft",en[en.BottomRight=3]="BottomRight";class sn extends Ms{constructor(t,e,i,s,r,n,o,h){super(t,e,i,s,r,n,o,h),this.Rs="Band",this.He=0,this.Xe=1,this.We=this.Ct.bandFillStyle,this.je=this.Ct.bandStrokeStyle,this.R=new Ct,this.Ze=this.Hs.Ke(this.ct).Je(this.We).Qe(this.je).Dt(this.getHighlight()),this._s(this.Ze)}setValueStart(t){return this.He=t,this.R.O("valuechange",{start:this.He,end:this.Xe}),this.Hs.Bs(),this}getValueStart(){return this.He}setValueEnd(t){return this.Xe=t,this.R.O("valuechange",{start:this.He,end:this.Xe}),this.Hs.Bs(),this}getValueEnd(){return this.Xe}setFillStyle(t){this.We="function"==typeof t?t(this.We):t;const e=this.We;return this.Ze.Je(e),this.Hs.Bs(),this}getFillStyle(){return this.We}setStrokeStyle(t){this.je="function"==typeof t?t(this.je):t;const e=this.je;return this.Ze.Qe(e),this.Hs.Bs(),this}getStrokeStyle(){return this.je}qe(){return this.Ze.th(this.Xs.toVec2(this.He,this.Xs.getHeight(this.ct).getInnerStart())).J(this.Xs.toVec2(this.Xe-this.He,this.Xs.getHeight(this.ct).getInnerInterval())),ps(this.Ys,[this.Ze],this.ct),this}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We,stroke:this.je})}ih(t,e){t.Dt(e),this.Hs.Bs()}Ws(){let t,i,s;const r=(e,r,n)=>{const o=ot(this.Hs.St.sh(e.clientX,e.clientY),this.Hs.St.ct,this.ct),h=this.Xs.getWidth(o),a=this.axis.ct.ot(this.He),l=this.axis.ct.ot(this.Xe),c=(this.axis.ct.ot(h)-a)/(l-a);t=r&&(!(c<.1||c>.9)||!n),i=n&&!t,i&&(s=c<.5)},n=s=>{const n=this.getUserInteractions(),o=gs(n.move,"drag",s,s.shiftKey,s.ctrlKey,s.altKey),h=gs(n.scale,"drag",s,s.shiftKey,s.ctrlKey,s.altKey);r(s,!!(null==o?void 0:o.drag),!!(null==h?void 0:h.drag));const a=t?e.MouseStyles.Point:i?this.Xs.getWidth({x:e.MouseStyles.Horizontal,y:e.MouseStyles.Vertical}):e.MouseStyles.Default;this.eh=this.chart.engine.setMouseStyle(a,this.eh)},o=t=>{this.eh=this.chart.engine.restoreMouseStyle(this.eh)};this.addEventListener("pointermove",n),this.addEventListener("pointerleave",o);const h=(e,r,n,o)=>{const h=this.Xs.getWidth(e);if(t){this.He=this.axis.ct.Li(this.He,h),this.Xe=this.axis.ct.Li(this.Xe,h);const t=null==n?void 0:n.on;t&&t({event:r})}else if(i&&s){this.He=this.axis.ct.Li(this.He,h);const t=null==o?void 0:o.on;t&&t({event:r})}else if(i&&!s){this.Xe=this.axis.ct.Li(this.Xe,h);const t=null==o?void 0:o.on;t&&t({event:r})}Se(r),this.R.O("valuechange",{start:this.He,end:this.Xe}),this.Hs.Bs()};this.addEventListener("pointerdown",(e=>{const s=this.getUserInteractions(),r=gs(s.move,"drag",e,e.shiftKey,e.ctrlKey,e.altKey),a=gs(s.scale,"drag",e,e.shiftKey,e.ctrlKey,e.altKey);if(!(null==r?void 0:r.drag)&&t)return;if(!(null==a?void 0:a.drag)&&i)return;Se(e);let l=e;const c=t=>{if(t.pointerId!==e.pointerId)return;const i={x:t.clientX-l.clientX,y:l.clientY-t.clientY};h(i,t,r,a),l=t},u=t=>{t.pointerId===e.pointerId&&(this.addEventListener("pointermove",n),this.addEventListener("pointerleave",o),Wt.removeEventListener("pointermove",c),Wt.removeEventListener("pointerup",u),ri())};this.removeEventListener("pointermove",n),this.removeEventListener("pointerleave",o),Wt.addEventListener("pointermove",c),Wt.addEventListener("pointerup",u)}))}setUserInteractions(t){return this.hh=void 0===t?{move:!1,scale:!1}:t,this}getUserInteractions(){return Gt({move:{drag:!0},scale:{drag:!0}},this.hh)}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class rn extends Ms{constructor(t,e,i,s,r,n,o,h){super(t,e,i,s,r,n,o,h),this.Rs="Constant Line",this.M=0,this.je=this.Ct.constantLineStrokeStyle,this.rh=!0,this.R=new Ct,this.oh=this.Hs.uh(this.ct).ah(this.je).Dt(this.getHighlight()),this._s(this.oh)}setValue(t){return this.M=t,this.R.O("valuechange",{value:this.M}),this.Hs.Bs(),this}getValue(){return this.M}setStrokeStyle(t){this.je="function"==typeof t?t(this.je):t;const e=this.je;return this.oh.ah(e),this.Hs.Bs(),this}getStrokeStyle(){return this.je}qe(){return this.oh.fh(this.Xs.toVec2(this.M,this.Xs.getHeight(this.ct).getInnerStart())).dh(this.Xs.toVec2(this.M,this.Xs.getHeight(this.ct).getInnerEnd())),ps(this.Ys,[this.oh],this.ct),this}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{stroke:this.je})}ih(t,e){t.Dt(e),this.Hs.Bs()}setUserInteractions(t){return this.hh=void 0===t?{move:!1}:t,this}getUserInteractions(){return Gt({move:{drag:!0}},this.hh)}Ws(){this.addEventListener("pointerenter",(t=>{const i=this.getUserInteractions();if(gs(i.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey)){const t=this.Xs.getWidth({x:e.MouseStyles.Horizontal,y:e.MouseStyles.Vertical});this.eh=this.chart.engine.setMouseStyle(t,this.eh)}})),this.addEventListener("pointerleave",(t=>{this.eh=this.chart.engine.restoreMouseStyle(this.eh)})),this.addEventListener("pointerdown",(t=>{const e=this.getUserInteractions(),i=gs(e.move,"drag",t,t.shiftKey,t.ctrlKey,t.altKey);if(i){Se(t),ri();let e=t;const s=t=>{const s={x:t.clientX-e.clientX,y:e.clientY-t.clientY};e=t,this.M=this.axis.ct.Li(this.M,this.Xs.getWidth(s)),this.R.O("valuechange",{value:this.M}),this.Hs.Bs();const r=i.on;r&&r({event:t})},r=e=>{e.pointerId===t.pointerId&&(Wt.removeEventListener("pointermove",s),Wt.removeEventListener("pointerup",r))};Wt.addEventListener("pointermove",s),Wt.addEventListener("pointerup",r)}}))}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const nn="fitting",on="expansion",hn="progressive",an="regressive",ln={fitting:t=>{const e=void 0===(null==t?void 0:t.start)||t.start,i=void 0===(null==t?void 0:t.end)||t.end,s=void 0===(null==t?void 0:t.considerVisibleRangeOnly)||t.considerVisibleRangeOnly;return{id:nn,init:t=>{t.axis.Ah((t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax}))},considerVisibleRangeOnly:s,apply:t=>{if(t.seriesDataRange)return{start:e?t.curEnd>=t.curStart?t.seriesDataRange.min:t.seriesDataRange.max:t.curStart,end:i?t.curEnd>=t.curStart?t.seriesDataRange.max:t.seriesDataRange.min:t.curEnd,allowIntervalLengthChange:!0}}}},scrolling:t=>{const e=void 0!==(null==t?void 0:t.progressive)&&!t.progressive,i=!0===(null==t?void 0:t.realTime)?{}:null==t?void 0:t.realTime;if(i){const t=void 0!==i.catchUpThresholdMs?i.catchUpThresholdMs:3e3;let s;const r=t=>{t.isStopped&&(s=void 0)};return{id:e?an:hn,init:t=>{t.axis.Ah((t=>e?t.curEnd>t.curStart?{startMin:t.dataMin}:{endMin:t.dataMin}:t.curEnd>t.curStart?{endMax:t.dataMax}:{startMax:t.dataMax})),t.axis.addEventListener("stoppedchange",r)},dispose:t=>{t.axis.removeEventListener("stoppedchange",r)},considerVisibleRangeOnly:!0,apply:i=>{if(!i.seriesDataRange)return;const r=Wt.performance.now();if(void 0!==s){const n=(r-s)*(e?-1:1);let o=i.curStart+n,h=i.curEnd+n;const a=i.axis.gh({forStart:o,forEnd:h,allowIntervalLengthChange:!1});if(!e&&a&&i.curEnd>i.curStart&&a.end-h>=t){const t=a.end-h;h+=t,o+=t}if(!e&&a&&i.curEnd<i.curStart&&a.start-o>=t){const t=a.start-o;h+=t,o+=t}return s=r,{start:o,end:h,allowIntervalLengthChange:!1,keepScrolling:!0,allowAnimation:!1}}return s=r,{keepScrolling:!0,start:i.curStart,end:i.curEnd,allowIntervalLengthChange:!1,allowAnimation:!1}}}}return{id:e?an:hn,init:t=>{t.axis.Ah((t=>e?t.curEnd>t.curStart?{startMin:t.dataMin}:{endMin:t.dataMin}:t.curEnd>t.curStart?{endMax:t.dataMax}:{startMax:t.dataMax}))},considerVisibleRangeOnly:!0,apply:t=>{if(void 0!==t.seriesDataRange){if(Math.sign(t.curEnd-t.curStart)*Math.sign(e?-1:1)>0){const i=e?t.seriesDataRange.min:t.seriesDataRange.max;return{end:i,start:i+(t.curStart-t.curEnd),allowIntervalLengthChange:!1}}{const i=e?t.seriesDataRange.min:t.seriesDataRange.max;return{start:i,end:i+(t.curEnd-t.curStart),allowIntervalLengthChange:!1}}}}}},expansion:t=>{const e=void 0===(null==t?void 0:t.start)||t.start,i=void 0===(null==t?void 0:t.end)||t.end;return{id:on,considerVisibleRangeOnly:!0,apply:t=>{if(void 0!==t.seriesDataRange)return{start:e?t.curEnd>=t.curStart?t.seriesDataRange.min<t.curStart?t.seriesDataRange.min:t.curStart:t.seriesDataRange.max>t.curStart?t.seriesDataRange.max:t.curStart:t.curStart,end:i?t.curEnd>=t.curStart?t.seriesDataRange.max>t.curEnd?t.seriesDataRange.max:t.curEnd:t.seriesDataRange.min<t.curEnd?t.seriesDataRange.min:t.curEnd:t.curEnd,allowIntervalLengthChange:!0}}}},progressive:()=>ln.scrolling({}),regressive:{start:(t,e,i,s)=>e>t?i<t?i:t:ln.regressive.end(t,e,i,s)+(t-e),end:(t,e,i,s)=>e>t?ln.regressive.start(t,e,i,s)+(e-t):i<e?i:e,allowIntervalLengthChange:!1},fittingStart:{id:nn,start:(t,e,i,s)=>e>=t?i:s,end:(t,e,i,s)=>e,allowIntervalLengthChange:!0},fittingEnd:{id:nn,start:(t,e,i,s)=>t,end:(t,e,i,s)=>e>=t?s:i,allowIntervalLengthChange:!0},nextPowerOf10:{id:nn,start:(t,e,i,s)=>e>=t?i:s,end:(t,e,i,s)=>e>=t?10**Math.ceil(Math.log10(s)):10**Math.ceil(Math.log10(i)),allowIntervalLengthChange:!0},fittingStepped:t=>{const e=void 0===(null==t?void 0:t.start)||t.start,i=void 0===(null==t?void 0:t.end)||t.end;return{id:nn,considerVisibleRangeOnly:!0,apply:t=>{if(void 0===t.seriesDataRange)return;let s,r;if(e)if(t.curEnd>=t.curStart)if(t.seriesDataRange.min<t.curStart)s=t.curStart-(t.curEnd-t.curStart);else{const e=t.curStart+.5*(t.curEnd-t.curStart);s=t.seriesDataRange.min>e?e:t.curStart}else if(t.seriesDataRange.max>t.curStart)s=t.curStart+(t.curStart-t.curEnd);else{const e=t.curStart-.5*(t.curStart-t.curEnd);s=t.seriesDataRange.max<e?e:t.curStart}else s=t.curStart;if(i)if(t.curEnd>=t.curStart)if(t.seriesDataRange.max>t.curEnd)r=t.curEnd+(t.curEnd-t.curStart);else{const e=t.curEnd-.5*(t.curEnd-t.curStart);r=t.seriesDataRange.max<e?e:t.curEnd}else if(t.seriesDataRange.min<t.curEnd)r=t.curEnd-(t.curStart-t.curEnd);else{const e=t.curEnd+.5*(t.curStart-t.curEnd);r=t.seriesDataRange.min>e?e:t.curEnd}else r=t.curEnd;return{start:s,end:r,allowIntervalLengthChange:!0}}}}},cn={Empty:"Empty",Numeric:"Numeric",DateTime:"DateTime",Time:"Time"},un=t=>void 0!==t.ph,dn=t=>void 0!==t.yh,fn=t=>void 0!==t.mh,gn=(t,e,i,s,r,n,o)=>[n,o],yn=(t,e,i,s)=>{const r=[],n=Math.round(Math.abs((t-e)/i));for(let o=1;o<n;o+=1){let n=t+i*o;void 0!==s&&(n=Math.round(n*s)/s),n<e&&r.push(n)}return r},pn=(t,e,i,s,r)=>{Zt(t,0)&&(t=0),Zt(e,0)&&(e=0);const n=[],o=void 0!==s?((t,e,i)=>t-(t-i)%e)(t,i,s):t;let h=o;if(i<=0)throw new Error(`_getRegularGreatKeyValues unit less than or equal to 0, unit: ${i}`);let a=0;for(;(h-t)/(e-t)<.98;)n.push(h),a+=1,h=o+a*i,void 0!==r&&(h=Math.round(h*r)/r);return n.push(h),n},mn=(t,e,i,s)=>{const r=[];let n=i(t),o=0;for(;n<e&&!1===Zt(n,e);)if(r.push(n),n=s(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(n),r},xn=(t,...e)=>{const i=e.length>0?e.length:t?1:0;return(s,r,n,o,h,a)=>{if(r>=i)return;const l=e[r]||1;let c=!1,u=!1,d=1;return t&&(c="ignore"in t?"first"===t.ignore||"both"===t.ignore:c,u="ignore"in t?"last"===t.ignore||"both"===t.ignore:u,d="offset"in t&&void 0!==t.offset?t.offset:d),((t,e,i,s,r)=>(i&&(t=t.filter(((t,e)=>e>0))),s&&(t=t.filter(((e,i)=>i<t.length-1))),t.filter(((t,i)=>(i+r)%e==0))))(s,l,c,u,d)}},Sn=(...t)=>{const e=t.length>0?t.length:0;return(i,s,r,n,o,h)=>{if(s>=e)return;const a=t[s]||1;return i.filter(((t,e)=>e%a==0))}},vn=s.Record({cursorFormatter:void 0});class An extends vn{xh(t){return{Sh:[],bh:[],Mh:this.cursorFormatter?this.cursorFormatter:is.Numeric,wh:void 0,_h:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}}const bn=t=>{if(t&&"function"==typeof t)return t();if(t&&"apply"in t)return t;if(t){const e=t;return{id:"deprecated scroll strategy",considerVisibleRangeOnly:!0,apply:t=>{var i;return t.seriesDataRange?{start:e.start(t.curStart,t.curEnd,t.seriesDataRange.min,t.seriesDataRange.max),end:e.end(t.curStart,t.curEnd,t.seriesDataRange.min,t.seriesDataRange.max),allowIntervalLengthChange:null===(i=e.allowIntervalLengthChange)||void 0===i||i}:void 0}}}},Cn=(t,e,i,s,r,n,o,h,a,l,c)=>{let u=a.get(o);if(u||(u=new Map,a.set(o,u)),u.has(t))return u.get(t);if(0===e.length)return li;const d=c.Ch(e,o.kh.labelFont,r),f=h.Li(i,{x:-(s.x/2+.5)*d.x+n.x-l,y:-(s.y/2+.5)*d.y+n.y-l}),g=h.Li(f,{x:d.x+l,y:d.y+l}),y={min:{x:Math.min(f.x,g.x),y:Math.min(f.y,g.y)},max:{x:Math.max(f.x,g.x),y:Math.max(f.y,g.y)}};return u.set(t,y),y},Mn=(new An).xh({type:"linear"});class Tn{constructor(t,i,s,r,n,o,h){this.Th=Mn,this.Fh=cn.Empty,this.Ih=new Map,this.Ph=!0,this.Lh=wt((()=>this.chart.St.Bs()))(300,Tt.linear),this.Bh=!0,this.At=!0,this.Dh=!1,this.Eh=ai,this.Rh=!1,this.zh=!1,this.Oh=ai,this.Vh=ai,this.Nh=ai,this.Gh=!1,this.Uh="",this.$h=!1,this.Yh=!1,this.Hh=!1,this.Xh=()=>{this.jh.Wh=e.TextObjectIdentifier.AxisTitle,this.jh.setPointerEvents(!0),this.title.Gt(this.jh),this.Xh=void 0},this.Zh=(t,e,i,s,r,n,o,h,a,l,c)=>{const u=this.Qh(),d=[],f=t.filter((t=>this.Jh(t.keyValue,t.labelText,e))),g=[...f,...a.filter((t=>this.Jh(t.keyValue,t.labelText,t.tickLevel))),...l.filter((t=>t.labelText.length>0))];for(let t=0;t<f.length;t+=1){const a=f[t];let l,y=[];if(this.Jh(a.keyValue,a.labelText,e)){const t=Cn(a.keyValue,a.labelText,a.labelPosition,a.labelAlignment,a.labelRotation,a.labelOffset,e,u,h,c,this.chart.St.Kh);y=Xe(g.map((e=>e&&e!==a&&di(t,Cn(e.keyValue,e.labelText,e.labelPosition,e.labelAlignment,e.labelRotation,e.labelOffset,e.tickLevel,u,h,c,this.chart.St.Kh))?e:void 0))),l=y.length>0}else l=!1;if(l){let h=!0;if(h&&y.every((t=>un(t.tickLevel)))&&(h=!1),h&&e.qh&&e.qh.tr&&!1===e.qh.tr(a.keyValue,i,s,r,n,o)&&(h=!1),!1===h){f.splice(t,1),t-=1;continue}return!0}d.push(a)}return d},this.formatValue=t=>this.Th.Mh(t,{start:this.ct.getInnerStart(),end:this.ct.getInnerEnd()}),this.ir=!0,this.sr=!0,this.title=new Ct,this.chart=t,this.er=i,this.Ct=r,this.hr=o,this.ct=s,this.rr=h,"logarithmic"===h.type&&this.setAnimationZoom(Tt.logarithmic(qi(h.base))),this.nr=o.numeric,this.ar("Numeric"),this.lr=s.getInnerStart(),this.cr=s.getInnerEnd(),this.setAnimationsEnabled(n),this.setScrollStrategy(ln.fitting)}setUnits(t,e={}){return this.ur=t,this.cs=e,this.dr(),this}getUnits(){return this.ur}setDefaultInterval(t,e){return this.Ar=t,!1!==(null==e?void 0:e.applyImmediately)&&(this.Gh=!0,this.chart.St.Bs()),this.gr=void 0!==(null==e?void 0:e.skipIntervalRestrictions)?e.skipIntervalRestrictions:void 0,this}getDefaultInterval(){return this.Ar}getTitle(){return this.Uh}setTitle(t){return this.Uh=t,this.dr(),this}getTitleFillStyle(){return this.jh.pr()}setIntervalRestrictions(t){return this.vr=t,this.$h=!0,this.chart.St.Bs(),this}getIntervalRestrictions(){if("function"==typeof this.vr){const t=this.yr();return this.vr({curStart:this.lr,curEnd:this.cr,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max})}return this.vr}Ah(t){this.$h||this.Yh||(this.vr=t)}setTitleFillStyle(t){return this.jh.Je(t),this.chart.St.Bs(),this}getTitleFont(){return this.jh.mr()}setTitleFont(t){return this.jh.Sr(t),this.chart.St.Bs(),this}setTitleRotation(t){return this.jh.br(t),this.chart.St.Bs(),this.Hh=!0,this}getTitleRotation(){return this.jh.Mr()}setTitleEffect(t){return this.wr.Ls(t),this.chart.St.Bs(),this}getTitleEffect(){return this.wr.Ds()}ar(t,e){if(this.Ih.size>0&&this._r(),"Empty"===t){const i=e||(t=>t);this.nr=i(new An),this.Th=this.nr.xh(this.rr),this.Fh=t}else if("Numeric"===t){"Numeric"!==this.Fh&&(this.nr=this.hr.numeric);const i=e||(t=>t);this.nr=i(this.nr),this.Th=this.nr.xh(this.rr),this.Fh=t}else if("DateTime"===t){"DateTime"!==this.Fh&&(this.nr=this.hr.datetime);const i=e||(t=>t);this.nr=i(this.nr),this.Th=this.nr.xh(this.rr),this.Fh=t}else if("Time"===t){"Time"!==this.Fh&&(this.nr=this.hr.time);const i=e||(t=>t);this.nr=i(this.nr),this.Th=this.nr.xh(this.rr),this.Fh=t}return this.chart.St.Bs(),this}Cr(){return this.Th}kr(t,e){this.Th=t,this.Fh=e,this.chart.St.Bs()}setInterval(t){const{start:e,end:i,animate:s,stopAxisAfter:r}=t;return this.$h||(this.Yh=!0,this.vr=void 0),this.ut(void 0!==e?e:this.lr,void 0!==i?i:this.cr,void 0!==s&&s,void 0===r||r,"userSetInterval"),this}ut(t,e,i=!1,s=!0,r){let n={start:t,end:e};const o="synchronizedAxis"===r||"setDefaultInterval"===r&&!1!==this.gr,h="setDefaultInterval"!==r,a=Math.abs(e-t),l=Math.abs(this.cr-this.lr);if(void 0!==this.Th.wh&&this.Th.wh>a){const i=(e+t)/2,s=(h?this.Th.wh/2:l/2)*(t>e?-1:1);n={start:i-s,end:i+s}}if(void 0!==this.Th._h&&this.Th._h<a){const i=(e+t)/2,s=(h?this.Th._h/2:l/2)*(t>e?-1:1);n={start:i-s,end:i+s}}const c=this.ct.ht(n.start,n.end,this.lr,this.cr,h);if(!1===c)return this;if(!0===c);else if(n=c,"zoomBandChartOther"===r)return this;let u;switch(r){case"userSetInterval":case"userFit":case"interactionSetInterval":case"interactionZoom":case"setDefaultInterval":case"zoomBandChartClick":u=!0;break;case"zoomBandChartOther":case"synchronizedAxis":u=!1;break;default:return Ye(0,""),this}if(this.Tr&&this.Tr.finishAll(!1),this.Lh&&(!0===i||i>0)){this.setStopped(!0);const t=!0===i?void 0:i,e=!this.Tr||this.Tr.isOver()?this.Lh:this.Tr.NextAnimation.bind(this);this.Tr=e([[this.lr,n.start],[this.cr,n.end]],(([t,e])=>{this.Fr(t,e,{allowIntervalLengthChange:h,skipIntervalRestriction:o})}),t),this.Tr.addEventListener("end",(()=>{this.Tr=void 0,u&&(this.Nh=Wt.performance.now())})),this.Tr.addEventListener("end",(()=>{this.setStopped(s)}))}else this.Fr(n.start,n.end,{allowIntervalLengthChange:h,skipIntervalRestriction:o}),this.setStopped(s),u&&(this.Nh=Wt.performance.now());return this}getInterval(){return{start:this.lr,end:this.cr}}setStopped(t){return t===this.Dh||(t&&(this.Tr&&this.Tr.finishAll(!1),this.Tr=void 0),this.Dh=t,this.R.O("stoppedchange",{isStopped:this.Dh}),this.Eh=Wt.performance.now(),this.chart.St.Bs()),this}getStopped(){return this.Dh}fit(t,e){const i=this.yr(),s=this.Ar||Rn,r="function"==typeof s?s({curStart:this.lr,curEnd:this.cr,dataMin:null==i?void 0:i.min,dataMax:null==i?void 0:i.max}):s;return this.ut(void 0!==r.start?r.start:this.lr,void 0!==r.end?r.end:this.cr,void 0!==t?t:void 0!==r.animate?r.animate:this.Bh,void 0!==e?e:void 0===r.stopAxisAfter||r.stopAxisAfter,this.Ar?"setDefaultInterval":"userFit"),this}setScrollStrategy(t){var e,i;return(null===(e=this.Ir)||void 0===e?void 0:e.dispose)&&this.Ir.dispose({axis:this}),this.Ir=bn(t),this.$h||(this.vr=void 0),(null===(i=this.Ir)||void 0===i?void 0:i.init)&&this.Ir.init({axis:this}),this.chart.St.Bs(),this}getScrollStrategy(){return this.Ir}setAnimationScroll(t){return this.Ph=Boolean(t),this.chart.St.Bs(),this}setAnimationZoom(t,e=300){return this.Tr&&(this.Tr.finishAll(!1),this.Tr=void 0),this.Lh=t?wt((()=>this.chart.St.Bs()))(e,t):void 0,this}setAnimationsEnabled(t){return this.Bh=t,t?(this.setAnimationScroll(!0),this.setAnimationZoom(Tt.ease,void 0)):(this.setAnimationScroll(void 0),this.setAnimationZoom(void 0)),this}getAnimationsEnabled(){return this.Bh}setVisible(t){const e=this.At!==t;return this.At=t,this.jh.setVisible(t),this.Pr((e=>{e.Lr.setVisible(t)})),e&&this.R.O("visiblechange",{isVisible:this.At}),this}getVisible(){return this.At}Br(t){return!1}Dr(t){if(this.Xh&&this.Xh(),this.title.setPointerEvents(this.title.Ot.length>0),!this.Br(t)||!this.Er||this.Hh){const e=new Map,i=new Map,s=this.Rr(),r=s.min,n=s.max,o=wn(this.Th,r,n,this.lr,this.cr,t.physicalAxisSize,Math.min(this.lr,this.cr),Math.max(this.lr,this.cr));this.zr();const h=Rs(3,20,Kt((t.physicalAxisSize-30)/270,0,1)),a={...t,...this.Or(t)},l=this.Vr(this.Th,Math.min(r,this.lr,this.cr),Math.max(n,this.lr,this.cr),o,e,a,i,h),c=this.Nr(this.Th,Math.min(r,this.lr,this.cr),Math.max(n,this.lr,this.cr),o,e,a,l,i,h),u=new Map([...l,...c]),d=this.Th.Gr,f=void 0!==this.Th.bh.find((t=>dn(t)&&!_(t.kh.labelFillStyle)));if(d&&f&&Array.from(u).reduce(((t,e)=>t+(e[1].labelText.length>0&&!_(e[0].Lr.pr())?1:0)),0)<=1){this.zr(),u.clear();const e=[Math.min(this.lr,this.cr),Math.max(this.lr,this.cr)],i={start:this.ct.getInnerStart(),end:this.ct.getInnerEnd()};e.forEach((e=>{const s=this.Ur(e,d,d.yh(e,i),t,a),r=this.$r(s.keyValue,d,a,s,s.labelText);u.set(r,s)}))}return this.Yr(),this.Er={...a,...this.Hr(t,u,!0),min:r,max:n},this.Er}return{...this.Er,updatedTicks:!1}}Xr(t,e,i){const s=e.kh;i.length>0?t.Lr.Je(s.getLabelFillStyle()).Sr(s.getLabelFont()).jr(i).setVisible(this.getVisible()).Wr(s.getLabelShadow()):t.Lr.setVisible(!1)}$r(t,e,i,s,r){const n=this.Ih.get(e)||new Map;this.Ih.set(e,n);let o=n.get(t);return o||(o=this.Zr(t,e,i,s),n.set(t,o)),this.Xr(o,e,r),o.Qr=!1,o}Vr(t,e,i,s,r,n,o,h){const a=new Map,l=this.Qh(),c=[];for(const u of t.Sh){const t=s.get(u).filter((t=>t>=e&&t<=i)),d=t.map((t=>this.Ur(t,u,u.yh(t,{start:this.ct.getInnerStart(),end:this.ct.getInnerEnd()}),n,n)));for(let e=0;e<t.length;e+=1){const i=t[e],s=d[e],f=this.$r(i,u,n,s,s.labelText),g=Cn(f.M,f.Lr.Jr(),s.labelPosition,s.labelAlignment,s.labelRotation,{x:0,y:0},u,l,r,h,this.chart.St.Kh);c.find(((t,e)=>{const i=d[e];return di(g,Cn(t.M,t.Lr.Jr(),i.labelPosition,i.labelAlignment,i.labelRotation,{x:0,y:0},u,l,r,h,this.chart.St.Kh))}))&&f.Lr.setVisible(!1),f.Qr=!1,o.set(f,s),c.push(f),a.set(f,s)}}return a}Nr(t,e,i,s,r,n,o,h,a){var l;const c={start:this.ct.getInnerStart(),end:this.ct.getInnerEnd()},u=new Map,d=Array.from(o.values());let f,g=[];for(const y of t.bh){const p=y===t.bh[t.bh.length-1],m=s.get(y);if(!m)break;let x;if(void 0===f)x=[{start:e,end:i,keyValues:m}];else{x=[];for(let t=0;t<f.length-1;t+=1){const s=f[t],r=f[t+1],n={start:s,end:r,keyValues:[]};for(const t of m)t>=s&&t<r&&n.keyValues.push(t);n.end<e||n.start>i||x.push(n)}}if(f=m,fn(y))continue;let S,v=0,A=!1,b=-1,C=!0,M=[];for(let t=0;t<x.length;t+=1){const e=x[t].keyValues.map((t=>this.Ur(t,y,y.yh(t,c),n,n)));M=M.concat(e)}if(y.kh.getLabelFillStyle()!==V)for(S=[];++b<x.length;){const t=x[b],s=t.start,n=t.end;let h=t.keyValues;if(v>0){if(void 0===y.qh){C=!1;break}if(h=(0,y.qh.Kr)(t.keyValues,v-1,s,n,e,i),void 0===h)break}const l=Xe(h.map((t=>M.find((e=>e.keyValue===t)))));if(A)S=S.concat(l);else{const t=this.Zh(l,y,v,s,n,e,i,r,d,g,a);if(!0===t){v+=1,b=-1,S=[];continue}S=S.concat(t)}t!==x[x.length-1]||o.size+S.reduce(((t,s)=>t+(xi(s.keyValue,e,i)?1:0)),0)>=2||p||A||(A=!0,v-=1,b=-1,S=[])}else S=M;const T=S.reduce(((t,s)=>t+(xi(s.keyValue,e,i)?1:0)),0);void 0!==y.qr&&T<y.qr&&(S.length=0);const E=[];for(const t of M){if(t.keyValue<e||t.keyValue>i)continue;const s=S.includes(t);if(!s&&"hide-tick"===(null===(l=y.qh)||void 0===l?void 0:l.tn))continue;t.labelText=s?t.labelText:"";const r=this.$r(t.keyValue,y,n,t,t.labelText);h.set(r,t),E.push(t),u.set(r,t)}if(g=E,!C)break}return u}Pr(t){for(const e of this.Ih.values())for(const i of e.values())t(i)}sn(t,e){for(const i of this.Ih.values())for(const s of i.values())e=t(e,s);return e}_r(){this.Ih.forEach(((t,e)=>{t.forEach((t=>{t.dispose()}))})),this.Ih.clear()}zr(){for(const t of this.Ih.values())for(const e of t.values())e.Qr=!0}Yr(){for(const t of this.Ih.values()){const e=Array.from(t.entries());for(let i=0;i<e.length;i+=1){const[s,r]=e[i];r.Qr&&(r.dispose(),t.delete(s))}}}Rr(){const t=this.ct.getInnerStart()<this.ct.getInnerEnd()?this.ct.getInnerStart():this.ct.getInnerEnd(),e=this.ct.getInnerEnd()>this.ct.getInnerStart()?this.ct.getInnerEnd():this.ct.getInnerStart();return g(t,e)}Jh(t,e,i){return 0!==e.length&&(!un(i)||!0===i.en)}hn(t,e){return"Empty"===this.Fh||(this.Th.Sh.forEach((i=>{e=t(e,i.kh)})),this.Th.bh.forEach((i=>{dn(i)&&(e=t(e,i.kh))}))),e}getSeriesDataRange(){const t=this.yr();if(t&&!0!==t.emptyBounds)return t}gh(t){const e=void 0!==t.forStart?t.forStart:this.lr,i=void 0!==t.forEnd?t.forEnd:this.cr,s=this.yr();if(s)return kn(this.vr,s,{start:i>e?s.min:s.max,end:i>e?s.max:s.min},{start:e,end:i},!0)}yr(){const t=!this.Ir||this.Ir.considerVisibleRangeOnly;let e=this.er.rn(t);const i=this.er.nn(t);let s;if(void 0!==e&&$t(e)&&void 0!==i&&$t(i)&&("logarithmic"===this.rr.type&&(0===e&&(e=Math.min(1,i)),Math.sign(e)!==Math.sign(i)&&(e=Math.min(1,i-.1))),s?(s.min=Math.min(s.min,e),s.max=Math.max(s.max,i)):s=g(e,i)),s&&$t(s.min)&&$t(s.max))return Zt(s.min,s.max)?{min:s.min-1,max:s.max+1,emptyBounds:!0}:s}an(){if(!1===this.ir)return{start:0,end:0};if("object"==typeof this.ir)return this.ir;let t=0;const e=this.er.ln();return e&&(t=Math.max(t,e)),{start:t,end:t}}setScrollMargins(t){return this.ir=void 0!==t&&("number"==typeof t?{start:t,end:t}:t),this.chart.St.Bs(),this}getScrollMargins(){return this.ir}setAutoRegionsEnabled(t){return this.setScrollMargins(t),this}cn(){const t=this.Rh;let e=!1;if(this.Gh&&this.Ar){const t=this.yr();if(t){const e="function"==typeof this.Ar?this.Ar({curStart:this.lr,curEnd:this.cr,dataMin:null==t?void 0:t.min,dataMax:null==t?void 0:t.max}):this.Ar;if("object"==typeof this.Ar&&!this.$h){const i=kn(this.vr,t,{start:void 0!==e.start?e.start:this.lr,end:void 0!==e.end?e.end:this.cr},this.getInterval(),!0);i.start===e.start&&i.end===e.end||(this.Yh=!0,this.vr=void 0)}this.ut(void 0!==e.start?e.start:this.lr,void 0!==e.end?e.end:this.cr,void 0!==e.animate&&e.animate,void 0===e.stopAxisAfter||e.stopAxisAfter,"setDefaultInterval"),this.Gh=!1,this.gr=void 0}}if(this.Ir&&!this.Dh){let t=this.yr();(null==t?void 0:t.emptyBounds)&&this.Ir.id===on&&(t=void 0);const i=this.lr,s=this.cr,r=this.Ir.apply({axis:this,curStart:i,curEnd:s,seriesDataRange:t});if(r){const n=kn(this.vr,t,{start:r.start,end:r.end},{start:i,end:s},r.allowIntervalLengthChange);let o=n.start,h=n.end;const a=!1===Zt(i,o)||r.keepScrolling,l=!1===Zt(s,h)||r.keepScrolling;if(o=a?o:i,h=l?h:s,a||l){let t=!1;if(this.Ph&&!this.sr&&!1!==r.allowAnimation)if(this.Ph){t=!0;const n=a?this.un(i,o):i,c=l?this.un(s,h):s;if(!0===this.Fr(n,c,{allowIntervalLengthChange:r.allowIntervalLengthChange,skipIntervalRestriction:!1})&&(a&&!1===Zt(n,o)||l&&!1===Zt(c,h))||!0===r.keepScrolling){this.chart.St.Bs(!0),e=!0;let t=Math.abs(h-o)/Math.abs(n-c);t<1&&(t=1/t),this.zh=t>=1.4}}else t=!1;t||(this.Fr(o,h,{allowIntervalLengthChange:r.allowIntervalLengthChange,skipIntervalRestriction:!1}),!0===r.keepScrolling&&this.chart.St.Bs(!0)),this.sr=!1}}}return e?(this.Rh!==e&&(this.Rh=e,this.Oh=Wt.performance.now()),this.dn&&(clearTimeout(this.dn),this.dn=void 0)):!0===t&&void 0===this.dn&&(this.zh=!1,this.dn=setTimeout((()=>{!1!==this.Rh&&(this.Rh=!1,this.Oh=Wt.performance.now()),this.dn=void 0,this.chart.St.Bs()}),200)),this}fn(){const t=this.getInterval(),e=this.yr();return"function"==typeof this.vr?this.vr({curStart:t.start,curEnd:t.end,dataMin:null==e?void 0:e.min,dataMax:null==e?void 0:e.max}):this.vr}Fr(t,e,i){let s={start:t,end:e};const{allowIntervalLengthChange:r,skipIntervalRestriction:n}=i;let o=!0;if(this.vr&&!n){const t=this.yr();s=kn(this.vr,t,s,{start:this.lr,end:this.cr},r)}const h=Math.abs(e-t),a=Math.abs(this.cr-this.lr);if(void 0!==this.Th.wh&&this.Th.wh>h){const i=(e+t)/2,n=(r?this.Th.wh/2:a/2)*(t>e?-1:1);s={start:i-n,end:i+n},o=!1}if(void 0!==this.Th._h&&this.Th._h<h){const i=(e+t)/2,n=(r?this.Th._h/2:a/2)*(t>e?-1:1);s={start:i-n,end:i+n},o=!1}let l=this.ct.ht(s.start,s.end,this.lr,this.cr,r);if(!1===l)return!1;!0!==l&&(s=l);const c=this.an(),u=this.An(s.start,s.end,c);return l=this.ct.ht(u.start,u.end,this.lr,this.cr,!1),!!l&&(!0===l?this.ct.j(u.start,u.end):this.ct.j(s.start,s.end),this.lr=s.start,this.cr=s.end,this.R.O("intervalchange",{start:s.start,end:s.end}),this.Vh=Wt.performance.now(),this.chart.St.Bs(),o)}gn(){return this.Rh}pn(){return void 0!==this.Tr}dr(){var t;const e=!1!==(null===(t=this.cs)||void 0===t?void 0:t.displayOnAxis);this.jh.jr(this.ur&&e&&this.Uh?`${this.Uh} (${this.ur})`:this.Uh),this.chart.St.Bs()}}class En{constructor(t,e,i,s,r=i.mn(s).yn(qe).vn(qe).setPointerEvents(!1)){this.Qr=!1,this.ft=!1,this.gs=[],this.xn=t,this.M=e,this.Sn=i,this.bn=s,this.Lr=r,this.gs.push(r)}Fs(t){this.gs.forEach((e=>e.setVisible(t)))}dispose(){return this.ft||(this.ft=!0,this.gs.forEach((t=>t.dispose()))),this}}const wn=(t,e,i,s,r,n,o,h,a=!1)=>{const l=new Map;for(const a of t.Sh){let t=a.Mn(e,i,s,r,n,o,h);t=Bn(t),l.set(a,t)}let c;for(const s of t.bh){let r;if(void 0===c)r=s.Mn(e,i,e,i,n);else{if(a&&s===t.bh[t.bh.length-1])break;let o=[];const h=c.filter((t=>e<=t&&t<=i)).length;if(h>0){const t=n/(h-1);if(void 0!==s.wn&&s.wn>t)break}for(let t=0;t<c.length-1;t+=1){const r=s.Mn(c[t],c[t+1],e,i,n);o=o.concat(r)}r=o}r=Bn(r),l.set(s,r),c=r}return l},Bn=t=>(t=(t=>{const e={},i=[],s=t.length;let r=0;for(let n=0;n<s;n+=1){const s=t[n];1!==e[s]&&(e[s]=1,i[r]=s,r+=1)}return i})(t)).sort(((t,e)=>t-e)),kn=(t,e,i,s,r)=>{const n="function"==typeof t?t({curStart:s.start,curEnd:s.end,dataMin:null==e?void 0:e.min,dataMax:null==e?void 0:e.max}):t;if(!n)return i;const o={start:i.start,end:i.end};let h=Math.abs(i.end-i.start);if(void 0!==n.intervalMin&&h<n.intervalMin){const t=(o.start+o.end)/2;o.start=t+.5*Math.sign(i.start-t)*n.intervalMin,o.end=t+.5*Math.sign(i.end-t)*n.intervalMin}if(h=Math.abs(i.end-i.start),void 0!==n.intervalMax&&h>n.intervalMax){const t=(o.start+o.end)/2;o.start=t+.5*Math.sign(i.start-t)*n.intervalMax,o.end=t+.5*Math.sign(i.end-t)*n.intervalMax}return h=Math.abs(i.end-i.start),void 0!==n.startMin&&(o.start=Math.max(o.start,n.startMin),r||Zt(Math.abs(o.start-o.end),h)||(o.end=o.start+Math.sign(i.end-i.start)*h)),h=Math.abs(i.end-i.start),void 0!==n.startMax&&(o.start=Math.min(o.start,n.startMax),r||Zt(Math.abs(o.start-o.end),h)||(o.end=o.start+Math.sign(i.end-i.start)*h)),h=Math.abs(i.end-i.start),void 0!==n.endMin&&(o.end=Math.max(o.end,n.endMin),r||Zt(Math.abs(o.start-o.end),h)||(o.start=o.end+Math.sign(i.start-i.end)*h)),h=Math.abs(i.end-i.start),void 0!==n.endMax&&(o.end=Math.min(o.end,n.endMax),r||Zt(Math.abs(o.start-o.end),h)||(o.start=o.end+Math.sign(i.start-i.end)*h)),Math.sign(o.end-o.start)!==Math.sign(i.end-i.start)?{end:o.start,start:o.end}:o},Rn=t=>{if(void 0===t.dataMin||void 0===t.dataMax)return{stopAxisAfter:!1};const e=t.curEnd>=t.curStart;return{start:e?t.dataMin:t.dataMax,end:e?t.dataMax:t.dataMin,stopAxisAfter:!1}},Fn=t=>{const i=t.getDraggingMode();return void 0!==i&&i!==e.UIDraggingModes.notDraggable?i===e.UIDraggingModes.draggable?e.MouseStyles.Move:i===e.UIDraggingModes.onlyHorizontal?e.MouseStyles.Horizontal:e.MouseStyles.Vertical:void 0};class In{constructor(){this.At=!0}set draggable(t){this.R.draggable=t}get draggable(){return this.R.draggable}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}setVisible(t){const e=this.At!==t;return this.At=t,e&&this.R.O("visiblechange",{isVisible:this.At}),this}getVisible(){return this.At}}class On extends In{constructor(t,i,s,r,n){super(),this.R=new Ct,this.position=l(50,50),this.origin=l(0,0),this.size=l(0,0),this.ft=!1,this._n=void 0,this.Cn=void 0,this.kn=Fn,this.Tn=void 0,this.ai=m(0,0,0,0),this.Hs=t,this.renderingScale=i,this.scale=s,this.bt=r,this.Ct=n,this.Hs.Bs(),this.Ct=n,this.addEventListener("pointerenter",(()=>{const t="function"==typeof this.kn?this.kn(this):this.kn;t&&(this.Cn=this.Hs.St.Fn(t))})),this.addEventListener("pointerleave",(()=>{this.Hs.St.In(this.Cn)}));const o=t=>{const i=this.getDraggingMode();if(i===e.UIDraggingModes.notDraggable)return;Se(t);let s=t;const r=t=>{const r={x:t.clientX-s.clientX,y:t.clientY-s.clientY};s=t;const n=this.scale.Li(this.getPosition(),{x:i!==e.UIDraggingModes.onlyVertical?r.x:0,y:i!==e.UIDraggingModes.onlyHorizontal?-r.y:0}),o=this.scale,h=this.getSize(),a=this.getOrigin(),l=o.Li({x:o.x.getInnerStart(),y:o.y.getInnerStart()},Pi({x:(1+a.x)/2,y:(1+a.y)/2},h)),c=o.Li({x:o.x.getInnerEnd(),y:o.y.getInnerEnd()},Pi({x:(a.x-1)/2,y:(a.y-1)/2},h)),u={x:Math.min(Math.max(n.x,l.x),c.x),y:Math.min(Math.max(n.y,l.y),c.y)};this.setPosition(u)},n=t=>{this.Hs.St.Pn.removeEventListener("pointermove",r),this.Hs.St.Pn.removeEventListener("pointerup",n),this.addEventListener("pointerdown",o)};this.removeEventListener("pointerdown",o),this.Hs.St.Pn.addEventListener("pointermove",r),this.Hs.St.Pn.addEventListener("pointerup",n)};this.addEventListener("pointerdown",o)}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}setEffect(t){return this.vs=this.vs||this.Hs.St.vs.ys(this,{Ln:{shapes:this.Bn()}}),this.vs.Ln.Ls(t),this}getEffect(){return!!this.vs&&this.vs.Ln.Ds()}setAutoDispose(t){return this.Tn=t,this.Hs.Bs(),this}getAutoDispose(){return this.Tn}getSize(t=e.UISpace.Everything){return t===e.UISpace.Everything?l(this.size.x+(this.ai.left+this.ai.right),this.size.y+(this.ai.bottom+this.ai.top)):this.size}setContentSize(t){this.size=t}setMargin(t){return this.ai="object"==typeof t?S(this.ai,t):{left:t,top:t,right:t,bottom:t},this.Hs.Bs(),this}getMargin(){return this.ai}qe(){if(this.Tn){const t=this.size,e=this.renderingScale.Mi(),i={x:t.x/e.x,y:t.y/e.y};("max-width"===this.Tn.type&&i.x>=this.Tn.maxWidth||"max-height"===this.Tn.type&&i.y>=this.Tn.maxHeight)&&this.dispose()}return this}Dr(){return this}dispose(){return this.ft||(this.Hs.Bs(),this.ft=!0,this.bt(this),this.R.O("dispose",{}),this.Bn().forEach((t=>t.dispose()))),this}setVisible(t){return super.setVisible(t),this.Bn().forEach((e=>e.setVisible(t))),this.Hs.Bs(),this}isDisposed(){return this.ft}setPosition(t){return this.position=t,this.Hs.Bs(),this}getPosition(t=this.origin,i=e.UISpace.Everything){const s=this.getSize(e.UISpace.Everything),r=this.scale.Li(this.position,Pi({x:-(this.origin.x+1)/2,y:-(this.origin.y+1)/2},s));if(i===e.UISpace.Everything)return this.scale.Li(r,Pi({x:(t.x+1)/2,y:(t.y+1)/2},s));const n=this.scale.Li(r,{x:this.ai.left,y:this.ai.bottom}),o=this.getSize(e.UISpace.Content);return this.scale.Li(n,Pi({x:(t.x+1)/2,y:(t.y+1)/2},o))}setOrigin(t){return this.origin=t,this.Hs.Bs(),this}getOrigin(){return this.origin}setDraggingMode(t=e.UIDraggingModes.notDraggable){return this._n=t,this.Hs.Bs(),this}getDraggingMode(){return void 0!==this._n?this._n:e.UIDraggingModes.notDraggable}setMouseStyle(t){return this.kn=t,this}getMouseStyle(){return this.kn}}class Ln extends On{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Dn=m(),this.En=0,this.Rn=s,this.backgroundElement=new this.Rn(this.Hs,this.renderingScale,this.scale,qt,n),this.R.$t(this.backgroundElement)}setPointerEvents(t){return super.setPointerEvents(t),this.backgroundElement.setPointerEvents(t),this}Bn(){return this.backgroundElement.Bn()}setBackground(t){return t(this.backgroundElement),this}getBackground(){return this.backgroundElement}qe(){return super.qe(),this.ft||(void 0!==this.zn&&(this.backgroundElement.zn=this.zn-.01),this.backgroundElement.setOrigin(this.origin).setPosition(this.getPosition(this.origin,e.UISpace.PaddedBackground)).qe()),this}Dr(){const t=this.getSize(e.UISpace.PaddedContent);return this.backgroundElement.On(t).Dr(),super.Dr()}dispose(){return super.dispose(),this.backgroundElement.dispose(),this}setVisible(t){return super.setVisible(t),this.backgroundElement.setVisible(t),this}setPadding(t){return this.Dn="object"==typeof t?S(this.Dn,t):{left:t,top:t,right:t,bottom:t},this.Hs.Bs(),this}getPadding(){return this.Dn}getSize(t=e.UISpace.Everything){let i=super.getSize(t);return t>=e.UISpace.PaddedContent&&(i=l(i.x+this.Dn.left+this.Dn.right,i.y+this.Dn.bottom+this.Dn.top)),t>=e.UISpace.PaddedBackground&&(i=l(i.x+this.backgroundElement.Vn()+this.backgroundElement.Nn(),i.y+this.backgroundElement.Gn()+this.backgroundElement.Un())),i}getPosition(t=this.origin,i=e.UISpace.Everything){if(i===e.UISpace.Everything)return super.getPosition(t,i);const s=super.getPosition(l(-1,-1),e.UISpace.Everything),r=this.getMargin(),n=this.scale.Li(s,{x:r.left,y:r.bottom});if(i===e.UISpace.PaddedBackground){const i=this.getSize(e.UISpace.PaddedBackground);return this.scale.Li(n,Pi({x:(t.x+1)/2,y:(t.y+1)/2},i))}const o=this.scale.Li(n,{x:this.backgroundElement.Vn(),y:this.backgroundElement.Gn()});if(i===e.UISpace.PaddedContent){const i=this.getSize(e.UISpace.PaddedContent);return this.scale.Li(o,Pi({x:(t.x+1)/2,y:(t.y+1)/2},i))}const h=this.getPadding(),a=this.scale.Li(o,{x:h.left,y:h.bottom}),c=this.getSize(e.UISpace.Content);return this.scale.Li(a,Pi({x:(t.x+1)/2,y:(t.y+1)/2},c))}getHighlight(){return this.En}setHighlight(t){return this.En=He(t),this.backgroundElement.setHighlight(t),this.R.O("highlightchange",{highlight:this.En}),this}}const Dn=t=>"setBackground"in t,Pn=t=>{const i=t.getPosition({x:-1,y:-1},e.UISpace.PaddedBackground),s=t.getSize(e.UISpace.PaddedBackground),r=t.scale.Li(i,s),n=ot(i,t.scale,t.Hs.St.ct),o=ot(r,t.scale,t.Hs.St.ct),h=t.Hs.St.$n(n.x,n.y),a=t.Hs.St.$n(o.x,o.y);return{p1:{clientX:h.x,clientY:h.y},p2:{clientX:a.x,clientY:a.y}}};class Vn extends In{constructor(t,e,i,s,r,n,o,h,a,l,c){super(),this.M=0,this.Yn=1,this.Hn=!0,this.Xn=new Hs,this.Wn=!0,this.ft=!1,this.R=new Ct,this.axisScale=s,this.renderingScale=r,this.jn=o,this.Zn=h,this.Qn=a,this.bt=l,this.Jn=e,this.Kn=i,this.qn=this.Jn.uh(this.renderingScale),this.R.Gt(this.qn),this.Ct=c,this.io=this.Qn.setDirection(this.Zn).so(this.Kn,this.renderingScale,n,qt,this.Ct,!1).setOrigin(me(this.Zn)),this.R.$t(this.io),this.axis=t,this.setPointerEvents(!1),"major"===this.io.eo?this.qn.ah(c.xAxisNumericTicks.majorTickStyle.gridStrokeStyle):"minor"===this.io.eo?this.qn.ah(c.xAxisNumericTicks.minorTickStyle.gridStrokeStyle):"other"===this.io.eo&&this.qn.ah(c.cursorGridStrokeStyleX)}setValue(t){return this.M=t,this.Kn.Bs(),this.R.O("valuechange",{value:this.M}),this}getValue(){return this.M}setTextFormatter(t){return this.ho=t,this.Kn.Bs(),this}setTickLength(t){return this.io.setPointerLength(t),this.Jn.Bs(),this}getTickLength(){return this.io.getPointerLength()}setTickLabelPadding(t){return this.io.setTickLabelPadding(t),this.Jn.Bs(),this}setTickLabelRotation(t){return this.io.setTextRotation(t),this.Jn.Bs(),this}getTickLabelRotation(){return this.io.getTextRotation()}getTickLabelPadding(){return this.io.getTickLabelPadding()}setGridStrokeLength(t){return this.Yn=t,this.Jn.Bs(),this}getGridStrokeLength(){return this.Yn}setGridStrokeStyle(t){return this.qn.ah(t),this.Jn.Bs(),this}getGridStrokeStyle(){return this.qn.ro()}dispose(){return this.ft||(this.ft=!0,this.qn.dispose(),this.io.dispose(),this.bt(this),this.Jn.St.Bs(),this.R.O("dispose",{})),this}setMarkerVisible(t){return this.Hn=t,this.Kn.Bs(),this}getMarkerVisible(){return this.Hn}setMarker(t){return t(this.io),this.Kn.Bs(),this}getMarker(){return this.io}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}setAllocatesAxisSpace(t){return this.Wn=t,this.Kn.Bs(),this}getAllocatesAxisSpace(){return this.Wn}isInScale(){return xi(this.M,this.axisScale.getInnerStart(),this.axisScale.getInnerEnd())}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class _n extends Vn{constructor(t,e,i,s,r,n,o,h,a,l,c){super(t,e,i,s,r,n,o,h,c,a,l),this.no=!1,this.bt=a,this.Jn=e,this.Kn=i}dispose(){return this.no=!1,super.dispose()}update(){return this}plot(t,e,i,s,r){if(this.isInScale()&&this.getVisible()&&t){this.no=!1;const t=nt(this.M,this.axisScale,this.jn.getWidth(this.renderingScale));this.qn.setVisible(!0).fh(this.jn.toPoint(t,e)).dh(this.jn.toPoint(t,e-(s+i*this.Yn))),this.Hn?(this.ho&&this.io.setText(this.ho(this.M,this)),this.io.setVisible(!0).setPosition(this.jn.toPoint(t,r))):this.io.setVisible(!1)}else this.qn.setVisible(!1),this.io.setVisible(!1);return this.io.Dr().qe(),this}oo(){this.Hn?(this.ho&&this.io.setText(this.ho(this.M,this)),this.io.setVisible(!0)):this.io.setVisible(!1);const t=this.io.Dr().getSize();return this.jn.getHeight(t)}}const zn={ao:"X0Z1bGxBY2Nlc3M=",lo:"X0Jhc2VDaGFydHM=",co:"RGF0YSBHcmlk",uo:"X0hhc0hhcmRFeHBpcmF0aW9u",do:"X0lzVHJpYWw=",fo:"X0lzQ29tbXVuaXR5",Ao:"T0hMQyBTZXJpZXM=",po:"QmFyIENoYXJ0",vo:"c2xpY2VkIGNoYXJ0cw==",yo:"R2F1Z2UgQ2hhcnQ=",mo:"U3BpZGVyIENoYXJ0",xo:"UG9sYXIgQ2hhcnQ=",So:"M0QgQ2hhcnQ=",bo:"Wm9vbSBCYW5kIENoYXJ0",Mo:"TWFwIENoYXJ0",wo:"WFkgQ2hhcnQ=",_o:"WFkgU2VyaWVz",Co:"SGVhdG1hcCBTZXJpZXM=",ko:"RmlndXJlIFNlcmllcw==",To:"bG9nYXJpdGhtaWMgYXhpcw==",Fo:"cmVhbC10aW1lIHZpc3VhbGl6YXRpb24=",Io:"aW5kaXZpZHVhbCBwb2ludCBzaXpl",Po:"aW5kaXZpZHVhbCBwb2ludCBjb2xvcg==",Lo:"VHJlZU1hcCBDaGFydA==",Bo:"UGFyYWxsZWwgQ29vcmRpbmF0ZSBDaGFydA==",Do:"X1B5dGhvbkxpY2Vuc2U="},Un=(t,e)=>t.setTextFillStyle(e.uiTextFillStyle).setTextFont(e.uiTextFont),Nn=(t,e)=>(Oe(t.setButtonSize(e.uiButtonSize),e,!1,{fill:e.uiButtonFillStyle}),t),Xn=(t,e,i)=>{i&&Dn(t)&&t.setBackground((t=>t.setFillStyle(e.uiBackgroundFillStyle).setStrokeStyle(e.uiBackgroundStrokeStyle))).setEffect(!0)},Hn={uiElement:void 0,stylers:n.List(),addStyler(t){return{...this,stylers:this.stylers.push(t)}},applyStylers(t,e){return this.stylers.forEach((i=>void 0!==i?i(t,e):void 0)),t}},Gn={background:void 0,setBackground(t){return{...this,background:t}}},Yn={so(t,e,i,s,r,n){const o=this.applyStylers(new this.uiElement(t,e,i,s,r),r);return Xn(o,r,n),o}},Wn={so(t,e,i,s,r,n){const o=this.applyStylers(new this.uiElement(t,e,i,this.background,s,r),r);return Xn(o,r,n),o}};class jn extends On{constructor(){super(...arguments),this.Eo=!0}qe(){return super.qe(),this}setPointerEvents(t){return this.Eo=t,this}getPointerEvents(){return this.Eo}Bn(){return[]}}class $n extends jn{On(t){return this.size=t,this}Vn(){return 0}Nn(){return 0}Un(){return 0}Gn(){return 0}setHighlight(t){return this}getHighlight(){return 0}setFillStyle(){return this}getFillStyle(){return V}setStrokeStyle(){return this}getStrokeStyle(){return Ot}setStrokeThickness(){return this}getStrokeThickness(){return 0}}class Qn{constructor(t){this.Ro=new Map,this.St=t}bs(t,e,i){const s=i.animationEnabled;this.Ro.set(t,{applyHighlight:e,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:s,curAnimatedHighlightValue:0});const r=()=>{this.Ro.delete(t),t.removeEventListener("dispose",r)};Wt.requestAnimationFrame((()=>{t.addEventListener("dispose",r)}))}zo(t,e){let i=e.animationEnabled;const s=[],r=()=>{s.forEach((t=>{this.Ro.delete(t)})),t.removeEventListener("dispose",r)};return Wt.requestAnimationFrame((()=>{t.addEventListener("dispose",r)})),{Oo:(t,e)=>{const r={applyHighlight:e,curUnanimatedHighlightValue:0,curAnimationPositionMillis:0,animationEnabled:i,curAnimatedHighlightValue:0};s.push(t),this.Ro.set(t,r)},Vo:()=>{s.forEach((t=>{this.Ro.delete(t)})),s.length=0},No:t=>{i=t,s.forEach((t=>{this.Os(t,i)}))},Go:()=>i}}zs(t,e){const i=this.Ro.get(t);i&&(i.curUnanimatedHighlightValue=He(e),this.St.Bs())}ks(t,e=!1){const i=this.Ro.get(t);return i?e?i.curAnimatedHighlightValue:i.curUnanimatedHighlightValue:0}Os(t,e){const i=this.Ro.get(t);i&&(i.animationEnabled=e)}Vs(t){const e=this.Ro.get(t);return!!e&&e.animationEnabled}Dr(t){let e=!1;this.Ro.forEach(((i,s)=>{let r;if(i.animationEnabled){const s=1e3;if(i.curUnanimatedHighlightValue>0){const n=i.curAnimationPositionMillis/s;r=i.curUnanimatedHighlightValue*Math.abs(Math.sin(n*Math.PI/2+.5));const o=0===i.curAnimatedHighlightValue?1:t;i.curAnimationPositionMillis+=o,e=!0}else i.curAnimatedHighlightValue>0&&0===i.curUnanimatedHighlightValue?(r=Math.max(i.curAnimatedHighlightValue-t/s,0),e=e||r>0):r=0,i.curAnimationPositionMillis=0}else r=i.curUnanimatedHighlightValue;r!==i.curAnimatedHighlightValue&&(i.applyHighlight(r),i.curAnimatedHighlightValue=r)})),e&&this.St.Bs(!0)}}const Jn=new Map,qn=(t,e)=>{const i=t.getSize(),s=t.getFamily(),r=t.getWeight(),n=t.getStyle(),o=t.getVariant(),h=`${n} ${o?"small-caps":"normal"} ${r} ${i}px ${s}`,a=`${h} ${e.toFixed(2)}`;let l=Jn.get(a);return l||(l=((t,e,i,s)=>({font:t,properties:e,dpr:i,id:s}))(h,{type:"font",size:i,family:s,style:n,variant:o,weight:r},e,a),Jn.set(a,l)),l},Zn=t=>({container:t.Pn,setMouseStyle:(e,i)=>t.Fn(e,i),restoreMouseStyle:e=>t.In(e),clearMouseStyle:()=>t.Uo(),captureFrame:(e,i,s)=>t.$o(e,i,s),renderFrame:(e,i,s=!1)=>t.Yo(e,i,s),layout:()=>{t.Ho(),t.Xo(),t.jo.Wo(),t.Bs()},setBackgroundFillStyle(e){return t.setBackgroundFillStyle(e),this},setBackgroundStrokeStyle(e){return t.setBackgroundStrokeStyle(e),this},getBackgroundFillStyle:()=>t.getBackgroundFillStyle(),getBackgroundStrokeStyle:()=>t.getBackgroundStrokeStyle(),addCustomIcon:(e,i)=>t.Zo(e,i),addEventListener:(e,i,s)=>t.V(e,i,s),removeEventListener:(e,i)=>t.G(e,i)}),Kn=[];let to;const eo=()=>{if(void 0!==to){const t=Wt.getComputedStyle(Wt.document.body),e=Number(t.getPropertyValue("margin-top").replace("px",""))+Number(t.getPropertyValue("margin-bottom").replace("px",""));to.style.height=Wt.innerHeight-e+"px",(()=>{for(let t=0;t<Kn.length;t+=1)Kn[t]()})()}},io=new N({color:C(255,255,255)}),so={font:qn(Ys,0),fillStyle:io,lineStyle:new er({fillStyle:io,thickness:1}),pointStyle3D:new Ks.Triangulated};class ro{constructor(t,e,i){this.ct=rt.d2({scaleXYConstructor:hs}),this.Qo=new Map,this.Jo=wt((()=>this.Bs()),60),this.Ko=l(0,0),this.qo=!1,this.ta=qt,this.ia=()=>{},this.sa=[],this.ea=-1,this.ha=[],this.ft=!1,this.ra=!1,this.na=t=>{t.dataTransfer&&t.dataTransfer.setDragImage(new Image,0,0)},this.oa=new Map,this.aa=(t,e)=>{var i,s,r;const n=e instanceof PointerEvent&&e,o=Mt(e)?{clientX:e.changedTouches[0].clientX,clientY:e.changedTouches[0].clientY}:{clientX:e.clientX,clientY:e.clientY};if(n){if(!n.pointerType)return;this.la=e}const h=this.Ps({x:o.clientX,y:o.clientY});if(("pointermove"===t||"pointerenter"===t)&&h&&n){const t=this.oa.get(n.pointerId);let s=t;s||(s={lastEvent:n,entity:h.entity,collectionMember:h.collectionMember,info:h.info},this.oa.set(n.pointerId,s));const r=void 0===t||t.entity!==h.entity||t.collectionMember!==h.collectionMember;r&&t&&t.entity.O("pointerleave",e,t.collectionMember,t.info),r&&h&&h.entity.O("pointerenter",e,h.collectionMember,h.info),h&&(h.entity.O("pointermove",e,h.collectionMember,h.info),this.Pn.draggable=null!==(i=h.entity.vt)&&void 0!==i&&i),s.lastEvent=n,s.entity=h.entity,s.collectionMember=h.collectionMember,s.info=h.info}else if("pointerleave"===t&&n){const t=this.oa.get(n.pointerId);t&&(t.entity.O("pointerleave",e,t.collectionMember,t.info),this.oa.delete(n.pointerId))}else if("click"===t&&n){const t=(null===(s=this.ca)||void 0===s?void 0:s.event)instanceof PointerEvent&&this.ca.event.pointerId===n.pointerId&&this.ca;t&&t.entity.O("click",n,t.collectionMember,t.info)}else if("dblclick"===t&&e instanceof MouseEvent){const t="click"===(null===(r=this.ca)||void 0===r?void 0:r.event.type)&&this.ca;t&&t.entity.O("dblclick",e,t.collectionMember,t.info)}else{const i=e instanceof PointerEvent?this.oa.get(e.pointerId):h;null==i||i.entity.O(t,e,i.collectionMember,i.info)}e&&h&&!["touchend"].includes(t)&&(this.ca={...h,event:e})},this.Xo=()=>{const{bottom:t,left:e}=this.Pn.getBoundingClientRect(),i=l(Math.floor(e),Math.floor(t));return i.x===this.Ko.x&&i.y===this.Ko.y||this.R.O("locationchange",{}),this.Ko=i,this.ua=Wt.performance.now(),this},this.Ho=()=>{this.da&&this.da()},this.Fn=(t,e)=>{if(void 0!==e){const i=this.ha.find((t=>t[0]===e));return i&&(i[1]=t,this.ha.indexOf(i)===this.ha.length-1&&(this.Pn.style.cursor=t)),e}const i=this.ea;return this.ea+=1,this.ha.push([i,t]),this.Pn.style.cursor=t,i},this.In=t=>{var e;const i=this.ha.find((e=>e[0]===t));if(i){const t=this.ha.indexOf(i),s=t===this.ha.length-1;if(this.ha.splice(t,1),s){const t=(null===(e=this.ha[this.ha.length-1])||void 0===e?void 0:e[1])||"default";this.Pn.style.cursor=t}}},this.fa=t=>(this.Aa.C(t),this),this.ga=()=>this.Aa.T(),this.pa=()=>{this.ta&&this.ta(1e3/60),this.va(),this.ya(),this.ia&&this.ia()},this.ma=t=>(this.Qo.set(t.xa(),t),this.Qo=new Map([...this.Qo.entries()].sort(((t,e)=>t[0]-e[0]))),t),this.Sa=t=>(this.Qo.delete(t),this),this.X=()=>(this.Aa.u=!1,this),this.W=()=>(this.Aa.u=!0,this),this.ba=()=>this.la,this.R=new Ct,this.jo=t,this.Ct=e.theme,this.Ma=i.Ma,this.wa=i._a,this.Ca={ve:e&&void 0!==e.resourcesBaseUrl&&null!==e.resourcesBaseUrl?e.resourcesBaseUrl:void 0,ka:!e||!("warnings"in e)||"boolean"!=typeof e.warnings||e.warnings,Ta:(()=>{const t=null==e?void 0:e.pickingPrecision;if("string"==typeof t){const e=t.toLowerCase();if("best"===e)return 1;if("high"===e)return.5;if("low"===e)return 1/8}return 1/4})(),Fa:void 0===(null==e?void 0:e.interactable)||e.interactable,Ia:void 0===e.textPixelSnappingEnabled||e.textPixelSnappingEnabled};const s=e?e.container:void 0;if(s){if("string"==typeof s){const t=Wt.document.getElementById(s);if(!t)throw new Error(`Container "${s}" doesn't exist.`);this.Pn=t}else this.Pn=s;Wt.addEventListener("resize",this.Ho),this.sa.push((()=>{Wt.removeEventListener("resize",this.Ho)}))}else{if(void 0===to){const t=Wt.document.createElement("div");t.id="lcjs-auto-flexbox",t.style.position="relative",t.style.width="100%",t.style.display="flex",t.style.flexDirection="column",Wt.document.body.appendChild(t),to=t,Wt.addEventListener("resize",eo)}let t=1;for(;null!==Wt.document.getElementById(`chart-${t}`);)t+=1;this.Pn=Wt.document.createElement("div"),this.Pn.id=`chart-${t}`,this.Pn.style.flex="1",this.Pn.style.height="100%",to.appendChild(this.Pn),eo(),Kn.push(this.Ho),this.sa.push((()=>{to&&to.removeChild(this.Pn),Kn.includes(this.Ho)&&Kn.splice(Kn.indexOf(this.Ho),1),0===Kn.length&&to&&(Wt.document.body.removeChild(to),to=void 0,Wt.removeEventListener("resize",eo))}))}if(Wt.ResizeObserver){const t=t=>{for(const e of t)e.target===this.Pn&&this.Ho()};this.Pa=new Wt.ResizeObserver(t.bind(this)),this.Pa.observe(this.Pn)}this.Pn.style.position="relative",this.Pn.style.boxSizing="content-box",!1!==this.Ca.Fa&&(this.Pn.style.touchAction="none"),this.Pn.style.overflow="hidden",this.Pn.addEventListener("fullscreenchange",this.Ho),this.Pn.addEventListener("webkitfullscreenchange",this.Ho),this.Pn.addEventListener("dragstart",this.na);const r=e?e.maxFps:void 0;this.La=r?-1===r?-1:0!==r?1e3/r:0:0,Object.keys(bt).forEach((t=>{const e=e=>{this.aa(t,e)};this.Pn.addEventListener(t,e),this.sa.push((()=>{this.Pn.removeEventListener(t,e)}))})),Wt.addEventListener("scroll",this.Xo,{passive:!0}),this.Aa=p(new A({r:0,g:0,b:0,a:0})),this.Ms=new Qn(this)}Ba(t,e,i){this.Da=t?{entity:t,timestamp:i,pointed:e}:void 0}Ea(t,e){const i=Array.from(this.oa.values()).find((e=>e.entity===t.entity&&(void 0===t.collectionMember||t.collectionMember===e.collectionMember)));i&&(i.entity=e.entity,i.collectionMember=e.collectionMember)}Pt(t,e=void 0){const i=Array.from(this.oa.values()).find((i=>i.entity===t&&(void 0===e||e===i.collectionMember)));i&&(t.O("pointerleave",i.lastEvent,i.collectionMember,i.info),this.oa.delete(i.lastEvent.pointerId))}Ra(){this.ra=!0,this.ta=void 0,this.ia=void 0}Uo(){this.ha.length=0,this.Pn.style.cursor="unset"}za(){return this.Oa}Va(){return this.Na}setBackgroundFillStyle(t){return this.Ga.Je(t),this.Bs(),this}getBackgroundFillStyle(){return this.Ga.pr()}setBackgroundStrokeStyle(t){return this.Ga.Qe(t),this.Bs(),this}getBackgroundStrokeStyle(){return this.Ga.Ua()}$a(t){return this.ia=t,this}Ya(t){return this.ta=t,this}Ha(t){return this.Qo.get(t)}Xa(){return Array.from(this.Qo.keys()).reverse().reduce(((t,e)=>e!==Number.MAX_SAFE_INTEGER&&e>t?e:t),0)+1}U(){if(!this.ft){if(this.ft=!0,this.Qo)for(const t of this.Qo.values())t.U();this.ta=void 0,this.ia=void 0,Wt.removeEventListener("scroll",this.Xo),this.Pn.removeEventListener("fullscreenchange",this.Ho),this.Pn.removeEventListener("webkitfullscreenchange",this.Ho),this.Pn.removeEventListener("dragstart",this.na),this.Pa&&(this.Pa.disconnect(),this.Pa=void 0),this.sa.forEach((t=>{t()})),this.sa.length=0}}sh(t,e){return l(t-this.Ko.x,this.Ko.y-e)}$n(t,e){return l(t+this.Ko.x,this.Ko.y-e)}Wa(t){const e=this.sh(t.clientX,t.clientY);return{engineX:e.x,engineY:e.y}}ja(t){const e=this.$n(t.engineX,t.engineY);return{clientX:e.x,clientY:e.y}}Za(t,e,i,s){const r=ot(t,i,this.ct),n=ot(e,i,this.ct),o=this.ja({engineX:r.x,engineY:r.y}),h=this.ja({engineX:n.x,engineY:n.y});return{p1:{clientX:Math.min(o.clientX,h.clientX)-s.left,clientY:Math.min(o.clientY,h.clientY)-s.top},p2:{clientX:Math.max(o.clientX,h.clientX)+s.right,clientY:Math.max(o.clientY,h.clientY)+s.bottom}}}V(t,e,i){this.R.addEventListener(t,e,i)}G(t,e){this.R.removeEventListener(t,e)}}const no=(t=1)=>({type:"horizontalProgressive",packager:(e,i,s)=>{if(e.length>1){const r=Oi(i,s*t),n=Math.abs(r.x),o=e.length,h=[];let a=0,c=0,u=e[0].x+n;for(;c<o;){const t=e[c];if(h[a]=t,a+=1,c+=1,t.x<u&&c<o){const i=c;let s=t.y,r=t.y;for(;c<o&&e[c].x<=u;)e[c].y>s&&(s=e[c].y),e[c].y<r&&(r=e[c].y),c+=1;if(i!==c){const t=(h[a-1].x+e[c-1].x)/2;h[a+0]=l(t,r),h[a+1]=l(t,s),h[a+2]=e[c-1],a+=3}}u+=n}return h}return e.slice()}}),oo=(t=1)=>({type:"horizontalRegressive",packager:(e,i,s)=>{if(e.length>1){const r=Oi(i,s*t),n=Math.abs(r.x),o=e.length,h=[];let a=0,c=0,u=e[0].x-n;for(;c<o;){const t=e[c];if(h[a]=t,a+=1,c+=1,t.x>u&&c<o){const i=c;let s=t.y,r=t.y;for(;c<o&&e[c].x>=u;)e[c].y>s&&(s=e[c].y),e[c].y<r&&(r=e[c].y),c+=1;if(i!==c){const t=(h[a-1].x+e[c-1].x)/2;h[a+0]=l(t,r),h[a+1]=l(t,s),h[a+2]=e[c-1],a+=3}}u-=n}return h}return e.slice()}}),ho=(t=1)=>({type:"verticalProgressive",packager:(e,i,s)=>{if(e.length>1){const r=Oi(i,s*t),n=Math.abs(r.y),o=e.length,h=[];let a=0,c=0,u=e[0].y+n;for(;c<o;){const t=e[c];if(h[a]=t,a+=1,c+=1,t.y<u&&c<o){const i=c;let s=t.x,r=t.x;for(;c<o&&e[c].y<=u;)e[c].x>s&&(s=e[c].x),e[c].x<r&&(r=e[c].x),c+=1;if(i!==c){const t=(h[a-1].y+e[c-1].y)/2;h[a+0]=l(r,t),h[a+1]=l(s,t),h[a+2]=e[c-1],a+=3}}u+=n}return h}return e.slice()}}),ao=(t=1)=>({type:"verticalRegressive",packager:(e,i,s)=>{if(e.length>1){const r=Oi(i,s*t),n=Math.abs(r.y),o=e.length,h=[];let a=0,c=0,u=e[0].y-n;for(;c<o;){const t=e[c];if(h[a]=t,a+=1,c+=1,t.y>u&&c<o){const i=c;let s=t.x,r=t.x;for(;c<o&&e[c].y>=u;)e[c].x>s&&(s=e[c].x),e[c].x<r&&(r=e[c].x),c+=1;if(i!==c){const t=(h[a-1].y+e[c-1].y)/2;h[a+0]=l(r,t),h[a+1]=l(s,t),h[a+2]=e[c-1],a+=3}}u-=n}return h}return e.slice()}});class lo extends vt{constructor(t,e,i,s){super(t,i,s),this.zn=0,this.Hs=e,this.Hs.Qa=!0}Ja(){}Ka(t){return this.zn===t||(this.zn=t,this.Hs.Qa=!0),this}qa(){return this.zn}}class co extends lo{constructor(t,e,i,s,r){super(t,e,s,r),this.tl=!0,this.ct=i}}const uo=(t,e,i)=>{if(i instanceof hs){const s=i.rs(),r=Pi(e,{x:Math.abs(s.x),y:Math.abs(s.y)});return g(l(t.min.x-r.x,t.min.y-r.y),l(t.max.x+r.x,t.max.y+r.y))}return g(i.Li(l(t.min.x,t.min.y),Oi(e,-1)),i.Li(l(t.max.x,t.max.y),e))},fo=(t,e)=>"function"==typeof e?e(t):e,go=(t,e)=>!t||t!==e,yo=t=>t!==V;class po extends co{constructor(t,e,i,s,r){super(t,e,i,s,r),this.We=so.fillStyle,this.St=t}Je(t){return this.We=fo(this.We,t),this}pr(){return this.We}il(){return go(this.sl,this.We)}el(){return((t,e)=>t===V&&e!==V)(this.sl,this.We)}hl(){return yo(this.We)}rl(t){this.sl=t}}class mo extends po{constructor(t,e,i,s,r){super(t,e,i,s,r),this.je=so.lineStyle,this.St=t}Qe(t){return this.je="function"==typeof t?t(this.je):t,this}Ua(){return this.je}nl(){return!this.ol||this.ol!==this.je}al(t){return!this.ol||this.ol.getThickness()!==t}hl(){return this.je!==Ot||super.hl()}el(){return(this.je!==Ot||this.We!==V)&&this.ol===Ot&&this.sl===V}ll(t){this.ol=t}}class xo extends po{constructor(t,e,i,s,r,n=p(5)){super(t,e,i,s,r),this.size=p(5),this.size=n}J(t){return this.size.C(t),this}}class So extends po{constructor(t,e,i,s,r,n=p(so.font)){super(t,e,i,s,r),this.cl=p(""),this.ul=!1,this.dl={x:1,y:-1},this.fl=p(l(0,0)),this.Al=p(0),this.pl=p(0),this.vl=p(l(0,0)),this.yl=p(0),this.ml=p(Ys),this.xl=l(0,0),this.ai=p(m(1,1,1,1)),this.Dn=p(x(4,4,4,4)),this.font=p(so.font),this.Sl=!1,this.font=n}hl(){return yo(this.We)&&this.cl.T().length>0}el(){return!1===this.Sl&&this.hl()}jr(t){return this.cl.C(t),this}Jr(){return this.cl.T()}Sr(t){return Gs(t)?this.ml.C(t):this.ml.C(t(this.ml.T())),this}mr(){return this.ml.T()}bl(t){return this.ml.C(this.ml.T().setFamily(t)),this}Ml(){return this.ml.T().getFamily()}wl(t){return this.ml.C(this.ml.T().setSize(t)),this}_l(){return this.ml.T().getSize()}Cl(t){return this.ml.C(this.ml.T().setWeight(t)),this}kl(){return this.ml.T().getWeight()}Tl(t){return this.ml.C(this.ml.T().setStyle(t)),this}Fl(){return this.ml.T().getStyle()}Il(t){return this.ml.C(this.ml.T().setVariant(t)),this}Pl(){return this.ml.T().getVariant()}th(t){return this.fl.C(t),this}Ll(){return this.fl.T()}br(t){return this.yl.C(t),this}Mr(){return this.yl.T()}Wr(t){return this.Bl=t,this}Dl(){return this.Bl}El(t,e){return this.vl.C(l(t,e)),this}Rl(){return this.vl.T()}zl(t){return this.pl.C(t),this}Ol(){return this.pl.T()}Vl(){return{x:this.pl.T(),y:this.Al.T()}}Nl(t){return this.Al.C(t),this}Gl(){return this.Al.T()}Ul(t){return this.pl.C(t.x),this.Al.C(t.y),this}vn(t){return this.ai.C(t),this}$l(){return this.ai.T()}yn(t){return this.Dn.C(t),this}Yl(){return this.Dn.T()}}class vo extends xo{constructor(t,i,s,r,n,o=5){super(t,i,s,r,n,p(o)),this.Hl=[],this.Xl=p(e.PointShape.Square),this.yl=p(0),this.Wl=p(!1),this.jl=p(!1),this.Zl=p(!1),this.Ql=li,this.Jl=0,this.Kl=[],this.ql=0,this.tc=li,this.sc=!1,this.hc=void 0}rc(){return this.Kl}nc(){return this.Hl}oc(t){return this.Xl.C(t),this}ac(){return this.Xl.T()}br(t){return this.yl.C(t),this}Mr(){return this.yl.T()}lc(t){return this.Wl.C(t),this}cc(t){return this.jl.C(t),this}uc(t){return this.Zl.C(t),this}dc(t,e){return Array.isArray(t)||(t=[t]),this.ql+=t.length,this.Kl=ke(this.Kl,t,{canReturnB:!0}),this.tc&&(this.tc=e?Ti(this.tc,e):void 0),this.hc=void 0,this}ii(){return this.sc=!0,this.Hl.length=0,this.Jl=0,this.Ql=li,this.Kl=[],this.ql=0,this.hc=void 0,this}fc(){return this.Jl}Ac(){return this.ql}}class Ao extends mo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.fl=p(l(0,0)),this.H=p(l(100,100)),this.yl=p(0),this.xl=p(l(0,0)),this.gc=!1}Dr(){return this.vc(),this}th(t){const e=this.fl.T();return t.x===e.x&&t.y===e.y||(this.fl.C(t),this.vc()),this}Ll(){return this.fl.T()}yc(t){const e=this.fl.T();return t!==e.x&&(this.fl.C(l(t,e.y)),this.vc()),this}mc(t){const e=this.fl.T();return t!==e.y&&(this.fl.C(l(e.x,t)),this.vc()),this}J(t){const e=this.H.T();return t.x===e.x&&t.y===e.y||(this.H.C(l(t.x,t.y)),this.vc()),this}Mi(){return this.H.T()}xc(t){const e=this.H.T();return t!==e.x&&(this.H.C(l(t,e.y)),this.vc()),this}Sc(t){const e=this.H.T();return t!==e.x&&(this.H.C(l(e.x,t)),this.vc()),this}br(t){return this.yl.C(t),this}Mr(){return this.yl.T()}bc(t){const e=this.xl.T();return t===e&&e.x===t.x&&e.y===t.y||(void 0===t?(this.gc=!1,this.vc()):(this.gc=!0,this.xl.C(t))),this}vc(){if(!this.gc){const t=this.fl.T(),e=this.H.T(),i=l(t.x+e.x/2,t.y+e.y/2),s=this.xl.T();i.x===s.x&&i.y===s.y||this.xl.C(i)}}}class bo extends mo{constructor(){super(...arguments),this.Hl=[],this.fl=p(l(0,0)),this.Ql=li,this.Mc=!1}wc(t){return t=Me(t),this.Hl=t,this.Mc=!0,this}_c(){return this.Hl}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}Cc(){return 0}kc(){return 0}}class Co extends bo{}class Mo extends po{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Tc=new Array,this.Fc=new Array,this.Ic=p({type:"disabled",packager:(t,e,i)=>t.slice()}),this.Ql=li,this.Pc=0,this.Lc=!1,this.Kl=[Array(),Array()],this.Bc=!1,this.Dc=(new N).setColor(C(42,171,240)),this.sc=!1,this.Ec=!1,this.Rc=!1}dc(t,e){const i=this.Pc-1,s=i>0&&!this.Bc;let[r,n]=s?[[this.Tc[i]],[this.Fc[i]]]:[[],[]];if(t instanceof Array){const[e,i]=f(t);r=ke(r,e,{canReturnB:!0}),n=ke(n,i,{canReturnB:!0})}else{const e=t.position;r.push(l(e,t.high)),n.push(l(e,t.low))}return this.Bc?(this.Kl[0]=ke(this.Kl[0],r,{canReturnB:!0}),this.Kl[1]=ke(this.Kl[1],n,{canReturnB:!0})):(this.Kl=[r,n],this.Bc=!0),this.Ql=Ti(this.Ql,e||Ti(Ci(r),Ci(n))),this}ii(){return this.sc=!0,this.Tc.length=0,this.Fc.length=0,this.Pc=0,this.Ql=li,this}nc(){return[this.Tc,this.Fc]}rc(){return[this.Kl[0],this.Kl[1]]}zc(t){return this.Ic.C(t),this}Oc(){return this.Ic.T()}Vc(t){return this.Dc="function"==typeof t?t(this.Dc):t,this}Nc(){return this.Dc}fc(){return this.Pc-(Number(this.Ec)+Number(this.Rc))}Ac(){return this.Kl.length}Gc(t){return this.Ec=t,this}Uc(){return this.Ec}$c(t){return this.Rc=t,this}Yc(){return this.Rc}el(){return this.sl===V&&this.Hc===V&&(this.We!==V||this.Dc!==V)}Xc(t){this.Hc=t}hl(){return this.Dc!==V||super.hl()}il(){return super.il()||!this.Hc||this.Hc!==this.Dc}}class To extends mo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.fl=p(l(0,0)),this.Wc=p(0),this.Hi=p(360),this.jc=p(100),this.Zc=p(100),this.Qc=p(0),this.Jc=p(void 0),this.Kc=l(0,0),this.qc=l(0,0),this.tu=l(0,0)}iu(){return this.jc.T()}su(){return this.Zc.T()}Ll(){return this.fl.T()}eu(){return this.Wc.T()}Yi(){return this.Hi.T()}hu(){return this.Qc.T()}ru(){return this.Jc.T()}nu(){return this.Kc}ou(){return this.qc}au(){return this.tu}th(t){return this.fl.C(t),this}lu(t){return this.Wc.C(t),this}dh(t){return this.Hi.C(t),this}cu(t){return this.Zc.C(t),this.jc.C(t),this}uu(t){return this.jc.C(t),this}du(t){return this.Zc.C(t),this}fu(t){return this.Qc.C(t<0?0:t),this}Au(t){return this.Jc.C(void 0!==t&&t<=0?void 0:t),this}}var Eo;!function(t){t[t.Complex=0]="Complex",t[t.Simple=1]="Simple"}(Eo||(Eo={}));class wo extends co{constructor(t,e,i,s,r){super(t,e,i,s,r),this.gu=so.lineStyle,this.engine=t}ah(t){return this.gu=((t,e)=>"function"==typeof e?e(t):e)(this.gu,t),this}ro(){return this.gu}nl(){return((t,e)=>!t||t!==e)(this.pu,this.gu)}vu(t){return((t,e)=>!t||t.getThickness()!==e)(this.pu,t)}el(){return((t,e)=>t===Ot&&e!==Ot)(this.pu,this.gu)}hl(){return(t=>t!==Ot&&t.getFillStyle()!==V)(this.gu)}yu(t){this.pu=t}}class Bo extends wo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Wi=l(0,0),this.Hi=l(0,0),this.mu=!1}C({min:t,max:e}){return t.x===this.Wi.x&&t.y===this.Wi.y&&e.x===this.Hi.x&&e.y===this.Hi.y||(this.mu=!0,this.Wi=t,this.Hi=e),this}Xi(){return this.Wi}Yi(){return this.Hi}fh(t){return t.x===this.Wi.x&&t.y===this.Wi.y||(this.mu=!0,this.Wi=t),this}dh(t){return t.x===this.Hi.x&&t.y===this.Hi.y||(this.mu=!0,this.Hi=t),this}}class ko extends wo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.xu=void 0,this.Su=0}}class Ro extends wo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.bu=[],this.Ql=li,this.Kl=new Array,this.Jl=0,this.sc=!1,this.Mu=p(void 0),this.Ec=!1,this.Rc=!1}wu(t){return this.Mu.C(t),this}_u(){return this.Mu.T()}rc(){return this.Kl}nc(){return this.bu}ii(){return this.sc=!0,this.bu.length=0,this.Jl=0,this.Kl=[],this.Ql=li,this}fc(){return this.Jl-(Number(this.Ec)+Number(this.Rc))}Ac(){return this.Kl.length}Gc(t){return this.Ec=t,this}Uc(){return this.Ec}$c(t){return this.Rc=t,this}Yc(){return this.Rc}}class Fo extends So{constructor(t,i,s,r,n){super(t,i,s,r,[]),this.Cu={uid:n,text:"",font:"",color:"",position:"absolute",left:0,top:0,padding:"",alignmentX:0,alignmentY:0,rotation:0,identifier:e.TextObjectIdentifier.Other,visible:!0}}ku(){var t;if(!this.getVisible()||0===this.cl.T().length||_(this.We))return this.Cu.visible=!1,this.Cu;this.Cu.visible=!0;const i=qn(this.ml.T(),devicePixelRatio);this.Cu.identifier=null!==(t=this.Wh)&&void 0!==t?t:e.TextObjectIdentifier.Other,this.Cu.text=this.cl.T(),this.Cu.font=i.font,this.Cu.color=X(this.We)?`rgba(${255*this.We.color.r},${255*this.We.color.g},${255*this.We.color.b},${this.We.color.a})`:this.Cu.color;const s=this.fl.T(),r=ot(s,this.ct,this.St.ct),n=Math.round(10*r.x)/10,o=Math.round(10*(this.St.Mi().y-r.y))/10;this.Cu.top=o,this.Cu.left=n,this.Cu.alignmentX=this.pl.T(),this.Cu.alignmentY=this.Al.T(),this.Cu.rotation=this.yl.T();const h=this.ai.T(),a=this.Dn.T();return this.Cu.padding=`${h.top+a.top}px ${h.right+a.right}px ${h.bottom+a.bottom}px ${h.left+a.left}px`,this.Cu}Tu(){var t;this.ku();const e=null===(t=this.St.Fu)||void 0===t?void 0:t.Iu.getTextBoundingBox;if(e){const t=e(this.Cu);if(t){const e=this.St.Wa({clientX:t.left,clientY:t.top}),i=this.St.Wa({clientX:t.left+t.width,clientY:t.top+t.height}),s=ot({x:e.engineX,y:e.engineY},this.St.ct,this.ct),r=ot({x:i.engineX,y:i.engineY},this.St.ct,this.ct);return{min:{x:Math.min(s.x,r.x),y:Math.min(s.y,r.y)},max:{x:Math.max(s.x,r.x),y:Math.max(s.y,r.y)}}}}return li}Pu(){var t;this.ku();const e=null===(t=this.St.Fu)||void 0===t?void 0:t.Iu.measureText;if(e){const t=e(this.Cu);if(t)return t}return this.St.Lu.Kh.Ch(this.cl.T(),this.ml.T(),this.yl.T())}Mi(){if(!(this.ct instanceof hs))return{x:0,y:0};const t=this.ct.rs(),e=this.Pu();return{x:e.x*t.x,y:e.y*t.y}}Dr(){return this}Zt(){return 0}jt(){return 0}Jt(){return 0}Qt(){return 0}Cc(){return 0}kc(){return 0}Bu(t,e){return{}}Du(){return this}Eu(t,e,i,s,r){return{}}}class Io extends On{constructor(){super(...arguments),this.En=0}getHighlight(){return this.En}setHighlight(t){return this.En=t,this.Bn().forEach((e=>e.Dt(t))),this.R.O("highlightchange",{highlight:t}),this.Hs.Bs(),this}}class Oo extends Io{}class Lo extends Oo{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Xl=this.Hs.Ru(this.renderingScale,Eo.Simple).setVisible(!1).Je(V).Qe(Ot),this.R.Gt(this.Xl)}zu(){const t=this.Ou();if(t.length>2){const e=Ci(t),i=l(e.max.x-e.min.x,e.max.y-e.min.y);this.setContentSize(i);const s=t.map((t=>{const s=Li(t,Oi(e.min,-1));return this.scale.Li(this.position,Li(s,Pi(Oi(Li(this.origin,l(1,1)),-.5),i)))})).map((t=>ot(t,this.scale,this.renderingScale)));this.Xl.wc(s).setVisible(this.getVisible()).setVisible(this.getVisible())}else this.Xl&&this.Xl.setVisible(!1),this.setContentSize(l(0,0))}qe(){return super.qe(),this.ft||(this.zu(),void 0!==this.zn&&this.Xl.Ka(this.zn)),this}Dr(){return this.zu(),super.Dr()}setVisible(t){return super.setVisible(t),this.Xl.setVisible(t),this}}class Do{constructor(t){this.Vu=0,this.Nu=0,this.Gu=0,this.Uu=!1,this.$u=!0,this.Yu=!1,this.Hu={warningDisplayed:!1,expandEvents:[]},this.R=new Ct,this.$u=!t||void 0===t.autoSortingEnabled||t.autoSortingEnabled,void 0!==(null==t?void 0:t.dataPattern)&&(this.Xu={userSpecified:null===t.dataPattern?void 0:t.dataPattern}),this.Wu=void 0!==(null==t?void 0:t.lookupValues)&&t.lookupValues,this.ju=void 0!==(null==t?void 0:t.colors)&&t.colors,this.Zu=void 0!==(null==t?void 0:t.ids)&&t.ids,this.Qu=void 0!==(null==t?void 0:t.sizes)&&t.sizes,this.Ju=void 0!==(null==t?void 0:t.rotations)&&t.rotations,this.Ku=(null==t?void 0:t.dataStorage)?t.dataStorage:Float64Array,this.qu=!1!==(null==t?void 0:t.allowInputModification),this.td=void 0===(null==t?void 0:t.includesNaN)||t.includesNaN}add(t){return Array.isArray(t)?this.appendJSON(t,{x:"x",y:"y"}):this.appendSample(t),this}addArraysXY(t,e){return this.appendSamples({xValues:t,yValues:e}),this}appendJSON(t,e={x:"x",y:"y"}){const i=t.length,s=e.x,r=e.y,n=e.lookupValue,o=e.size,h=e.rotation,a=e.color,l=e.id;let c,u,d,f,g,y,p;if(s){c=new this.Ku(i);const e=t[0]&&t[0][s]instanceof Date,r=t[0]&&Ho(t[0][s]);if(!r&&t[0]&&"string"==typeof t[0][s])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(r)for(let e=0;e<i;e+=1){const i=t[e];c[e]=new Date(i[s]).getTime()}else if(e)for(let e=0;e<i;e+=1){const i=t[e];c[e]=i[s].getTime()}else for(let e=0;e<i;e+=1){const i=t[e];c[e]=i[s]}}if(r){u=new this.Ku(i);const e=t[0]&&t[0][r]instanceof Date,s=t[0]&&Ho(t[0][r]);if(!s&&t[0]&&"string"==typeof t[0][r])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(s)for(let e=0;e<i;e+=1){const i=t[e];u[e]=new Date(i[r]).getTime()}else if(e)for(let e=0;e<i;e+=1){const i=t[e];u[e]=i[r].getTime()}else for(let e=0;e<i;e+=1){const i=t[e];u[e]=i[r]}}if(n){d=new Float32Array(i);for(let e=0;e<i;e+=1){const i=t[e];d[e]=i[n]}}if(a){f=[];for(let e=0;e<i;e+=1){const i=t[e];f[e]=i[a]}}if(l){g=new Uint32Array(i);for(let e=0;e<i;e+=1){const i=t[e];g[e]=i[l]}}if(o){y=new Float32Array(i);for(let e=0;e<i;e+=1){const i=t[e];y[e]=i[o]}}if(h){p=new Float32Array(i);for(let e=0;e<i;e+=1){const i=t[e];p[e]=i[h]}}return this.appendSamples({xValues:c,yValues:u,ids:g,colors:f,lookupValues:d,sizes:y,rotations:p,start:e.start,step:e.step}),this}appendSample(t){const{samplesCacheX:e,samplesCacheY:i,samplesCacheColors:s,samplesCacheIDs:r,samplesCacheLookup:n,samplesCacheSize:o,samplesCacheRotation:h,maxSampleCount:a,dataPattern:l}=this.sd({appendCount:1}),c=this.ed(),u=void 0!==t.step?t.step:l?ks(l)?1:-1:1,d=t.x&&t.x instanceof Date&&t.x,f=t.x&&Ho(t.x)&&t.x,g=t.y&&t.y instanceof Date&&t.y,y=t.y&&Ho(t.y)&&t.y;if(!f&&"string"==typeof t.x)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(!y&&"string"==typeof t.y)throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");const p=d?d.getTime():f?Date.parse(f):"number"==typeof t.x?t.x:c?c.x+u:0,m=g?g.getTime():y?Date.parse(y):"number"==typeof t.y?t.y:c?c.y+u:0;if(l&&this.$u&&this.hd&&this.rd&&!this.nd(l,p,m)&&!this.Yu)return this.od(this.hd,this.rd,new this.Ku([p]),new this.Ku([m]),void 0!==t.lookupValue?new Float32Array([t.lookupValue]):void 0,void 0!==t.color?this.ad((t.color,[t.color])):void 0,void 0!==t.id?new Uint32Array([t.id]):void 0,void 0!==t.size?new Float32Array([t.size]):void 0,void 0!==t.rotation?new Float32Array([t.rotation]):void 0,l),this;if(e[this.Vu]=p,i[this.Vu]=m,void 0!==t.lookupValue&&n&&(n[this.Vu]=t.lookupValue),void 0!==t.color&&s){const e=this.ad((t.color,[t.color]));void 0!==e&&(s[this.Vu]=e[0])}return void 0!==t.id&&r&&(r[this.Vu]=t.id),void 0!==t.size&&o&&(o[this.Vu]=t.size),void 0!==t.rotation&&h&&(h[this.Vu]=t.rotation),this.R.O("change",{iDataStart:this.Vu,iDataEnd:this.Vu}),this.Vu+=1,this.Vu>a-1&&(this.Vu=0,this.Uu=!0,this.R.O("loop",{})),this.Nu=Math.min(this.Nu+1,a),this.Gu+=1,this}appendSamples(t){const{lookupValues:e,colors:i,ids:s,sizes:r,rotations:n,start:o,step:h}=t;let a=t.offset,l=t.count;const c=t.xValues||t.yValues;if(!c)return this;const u=c.length;if(a=void 0!==a?a:0,l=void 0!==l?l:u-a,l<=0)return this;const d=void 0!==t.offsetLookupValues?t.offsetLookupValues:a,f=void 0!==t.offsetColors?t.offsetColors:a,g=void 0!==t.offsetIds?t.offsetIds:a,y=void 0!==t.offsetSizes?t.offsetSizes:a,p=void 0!==t.offsetRotations?t.offsetRotations:a,m=this.ld(!0),[x,S]=this.ud(l,t.xValues,"x","ProgressiveX"===m||"RegressiveX"===m||void 0===m?o:void 0,"ProgressiveX"===m||"RegressiveX"===m||void 0===m?h:void 0,a,m),[v,A]=this.ud(l,t.yValues,"y","ProgressiveY"===m||"RegressiveY"===m?o:void 0,"ProgressiveY"===m||"RegressiveY"===m?h:void 0,a,m),b=this.ad(i),{samplesCacheX:C,samplesCacheY:M,samplesCacheLookup:T,samplesCacheColors:E,samplesCacheIDs:w,samplesCacheSize:B,samplesCacheRotation:k,maxSampleCount:R,dataPattern:F,incomingDataReplacedCache:I}=this.sd({appendCount:l,...0===S&&0===A&&0===a&&0===d&&0===f&&0===g&&0===y&&0===p?{incomingDataX:x,incomingDataY:v,incomingDataLookup:e,incomingDataIDs:s,incomingDataColors:b,incomingDataSize:r,incomingDataRotation:n}:{}});if(!I&&F&&this.$u&&this.hd&&this.rd){const t=x[S],i=v[A];if(!this.nd(F,t,i)&&!this.Yu)return this.od(this.hd,this.rd,No(x,S,S+l),No(v,A,A+l),No(e,d,d+l),No(b,f,f+l),No(s,g,g+l),No(r,y,y+l),No(n,p,p+l),F),this}const O=R-this.Vu,L=Math.min(l,O);if(L>0&&(I||(zo(C,x,S,L,this.Vu),zo(M,v,A,L,this.Vu),e&&T&&zo(T,e,d,L,this.Vu),s&&w&&zo(w,s,g,L,this.Vu),b&&E&&zo(E,b,f,L,this.Vu),r&&B&&zo(B,r,y,L,this.Vu),n&&k&&zo(k,n,p,L,this.Vu)),this.R.O("change",{iDataStart:this.Vu,iDataEnd:this.Vu+L-1}),this.Vu+=L,this.Vu>R-1&&(this.Vu=0,this.Uu=!0,this.R.O("loop",{}))),this.Nu=Math.min(this.Nu+L,R),this.Gu+=L,this.ld(),l-L>0){const t={xValues:x?No(x,S+L,void 0):void 0,yValues:v?No(v,A+L,void 0):void 0,lookupValues:e?No(e,d+L,void 0):void 0,ids:s?No(s,g+L,void 0):void 0,colors:b?No(b,f+L,void 0):void 0,sizes:r?No(r,y+L,void 0):void 0,rotations:n?No(n,p+L,void 0):void 0};this.appendSamples(t)}return this}setSamples(t){return this.clear().appendSamples(t)}fill(t){const e=this.hd||this.rd;if(!e)return this;const i=e.length;if(void 0!==t.x&&(this.hd=this.hd||new this.Ku(i),this.hd.fill(t.x)),void 0!==t.y&&(this.rd=this.rd||new this.Ku(i),this.rd.fill(t.y)),void 0!==t.lookupValue&&(this.dd=this.dd||new Float32Array(i),this.dd.fill(t.lookupValue)),void 0!==t.color){const e=this.ad([t.color]);e&&(this.fd=this.fd||new Uint32Array(i),this.fd.fill(e[0]))}return void 0!==t.size&&(this.Ad=this.Ad||new Float32Array(i),this.Ad.fill(t.size)),void 0!==t.rotation&&(this.gd=this.gd||new Float32Array(i),this.gd.fill(t.rotation)),this.R.O("clear",{}),this}alterSamples(t,e){const{xValues:i,yValues:s,lookupValues:r,colors:n,ids:o,sizes:h,rotations:a}=e;let l=e.offset,c=e.count;const u=i||s||r||n||o||h||a,d=u?u.length:void 0!==e.x||void 0!==e.y?1:0;if(l=void 0!==l?l:0,c=void 0!==c?c:d-l,c<=0)return this;const f=void 0!==e.offsetLookupValues?e.offsetLookupValues:l,g=void 0!==e.offsetColors?e.offsetColors:l,y=void 0!==e.offsetIds?e.offsetIds:l,p=void 0!==e.offsetSizes?e.offsetSizes:l,m=void 0!==e.offsetRotations?e.offsetRotations:l,x=this.ad(n),S=this.Gu-1,v=void 0!==this.pd?Math.max(this.Gu-this.pd,0):0,A=t+c-1,b=Math.max(t,v),C=Math.min(A,S),M=C-b+1;if(this.Gu>0&&M>0){const{samplesCacheX:n,samplesCacheY:c,samplesCacheColors:u,samplesCacheIDs:d,samplesCacheLookup:S,samplesCacheSize:A,samplesCacheRotation:T}=this.sd({appendCount:0}),E=n.length;if(void 0!==this.pd&&this.Uu&&this.Gu%this.pd!=0){const v=this.Gu-this.Gu%this.pd,M=this.Gu-1,w=this.Gu-this.Nu,B=v-1,k=Math.max(b,w),R=Math.min(C,B)-k+1;if(R>0){const v=k-t,b=Po(k,this.Gu,E,this.Vu);if(void 0!==e.x)for(let t=b;t<b+R;t+=1)n[t]=e.x;if(void 0!==e.y)for(let t=b;t<b+R;t+=1)c[t]=e.y;i&&zo(n,i,l+v,R,b),s&&zo(c,s,l+v,R,b),r&&S&&zo(S,r,f+v,R,b),o&&d&&zo(d,o,y+v,R,b),x&&u&&zo(u,x,g+v,R,b),h&&A&&zo(A,h,p+v,R,b),a&&T&&zo(T,a,m+v,R,b)}const F=Math.max(b,v),I=Math.min(C,M)-F+1;if(I>0){const v=F-t,b=Po(F,this.Gu,E,this.Vu);if(void 0!==e.x)for(let t=b;t<b+I;t+=1)n[t]=e.x;if(void 0!==e.y)for(let t=b;t<b+I;t+=1)c[t]=e.y;i&&zo(n,i,l+v,I,b),s&&zo(c,s,l+v,I,b),r&&S&&zo(S,r,f+v,I,b),o&&d&&zo(d,o,y+v,I,b),x&&u&&zo(u,x,g+v,I,b),h&&A&&zo(A,h,p+v,I,b),a&&T&&zo(T,a,m+v,I,b)}}else{const t=b-v;if(void 0!==e.x)for(let i=t;i<t+M;i+=1)n[i]=e.x;if(void 0!==e.y)for(let i=t;i<t+M;i+=1)c[i]=e.y;s&&zo(c,s,l,M,t),i&&zo(n,i,l,M,t),s&&zo(c,s,l,M,t),r&&S&&zo(S,r,f,M,t),o&&d&&zo(d,o,y,M,t),x&&u&&zo(u,x,g,M,t),h&&A&&zo(A,h,p,M,t),a&&T&&zo(T,a,m,M,t)}this.R.O("clear",{})}const T=t+c-1-S;if(T>0){const e=C+1-t;this.appendSamples({xValues:i,yValues:s,lookupValues:r,colors:n,ids:o,sizes:h,rotations:a,offset:l+e,offsetLookupValues:f+e,offsetColors:g+e,offsetIds:y+e,offsetSizes:p+e,offsetRotations:m+e,count:T})}return this}alterSamplesByID(t,e){if(!this.Zu)throw new Error("LightningChart JS attempted to use alterSamplesByID on DataSetXY that doesn't have IDs enabled.");const i=t.length,s=this.vd;if(i<=0||!s)return this;const r=(("object"==typeof e.color?this.ad([e.color]):"number"==typeof e.color?[e.color]:[])||[])[0],n=Array.isArray(e.xValues)?new this.Ku(e.xValues):e.xValues,o=Array.isArray(e.yValues)?new this.Ku(e.yValues):e.yValues,h=Array.isArray(e.yValues)?new Float32Array(e.yValues):e.yValues,a=this.ad(e.colors),l=Array.isArray(e.sizes)?new Float32Array(e.sizes):e.sizes,c=Array.isArray(e.rotations)?new Float32Array(e.rotations):e.rotations,u=s.length,d=this.Nu,f=this.Gu-1,g=Math.max(f-d+1,0);for(let d=0;d<i;d+=1){const i=t[d],y=_o(i,g,f,!0,(t=>s[Po(t,this.Gu,u,this.Vu)])),p=Po(y,this.Gu,u,this.Vu);s[p]===i&&(void 0!==e.x&&this.hd&&(this.hd[p]=e.x),void 0!==e.y&&this.rd&&(this.rd[p]=e.y),void 0!==e.lookupValue&&this.dd&&(this.dd[p]=e.lookupValue),void 0!==e.size&&this.Ad&&(this.Ad[p]=e.size),void 0!==e.rotation&&this.gd&&(this.gd[p]=e.rotation),void 0!==r&&this.fd&&(this.fd[p]=r),n&&this.hd&&(this.hd[p]=n[d]),o&&this.rd&&(this.rd[p]=o[d]),h&&this.dd&&(this.dd[p]=h[d]),a&&this.fd&&(this.fd[p]=a[d]),l&&this.Ad&&(this.Ad[p]=l[d]),c&&this.gd&&(this.gd[p]=c[d]))}return this.R.O("clear",{}),this}clear(){return this.Vu=0,this.Nu=0,this.Gu=0,this.Uu=!1,this.R.O("clear",{}),this}getSampleCount(){return this.Nu}getNextSampleIndex(){return this.Gu}setMaxSampleCount(t){if("object"==typeof t){this.yd&&this.removeEventListener("maxsamplecountexceed",this.yd);const e=t.max,i=t.initial;this.yd=t=>{if(void 0!==e&&t.currentMaxSampleCount>=e)return;let i=Math.max(2*t.currentMaxSampleCount,t.newTotalSampleCount);void 0!==e&&(i=Math.min(i,e)),this.setMaxSampleCount(i)},this.addEventListener("maxsamplecountexceed",this.yd),void 0===this.pd&&(void 0!==i?this.setMaxSampleCount(i):this.setMaxSampleCount(Math.min(2*this.Nu,void 0!==e?e:Number.MAX_SAFE_INTEGER)))}else if("number"==typeof t){const e=t;if(void 0!==this.pd&&this.pd>e)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to shrink data set. This is currently not supported.");if(!this.hd||!this.rd)return this.pd=e,this;if(e===this.pd)return this;if(this.Uu&&0!==this.Vu)throw new Error("LightningChart JS | DataSetXY.setMaxSampleCount attempted to expand data set that has exceeded its max sample count. This is currently not supported.");this.pd=e,this.Nu<e?(this.Vu=this.Nu,this.Uu=!1):(this.Vu=0,this.Uu=!0);const i=new this.Ku(this.pd);i.set(this.hd);const s=new this.Ku(this.pd);if(s.set(this.rd),this.hd=i,this.rd=s,this.Wu){const t=new Float32Array(this.pd);this.dd&&t.set(this.dd),this.dd=t}if(this.Zu){const t=new Uint32Array(this.pd);this.vd&&t.set(this.vd),this.vd=t}if(this.ju){const t=new Uint32Array(this.pd);this.fd&&t.set(this.fd),this.fd=t}if(this.Qu){const t=new Float32Array(this.pd);this.Ad&&t.set(this.Ad),this.Ad=t}if(this.Ju){const t=new Float32Array(this.pd);this.gd&&t.set(this.gd),this.gd=t}}return this}getMaxSampleCount(){return this.pd}readBack(t){if(!this.hd||!this.rd)return{xValues:new this.Ku,yValues:new this.Ku,iSampleFirst:0};const e=this.hd.length;let i,s=[];if(null==t?void 0:t.onlyInRange){const e=this.md();if(!e)throw new Error("LightningChart JS - attempted to use `DataSetXY.readBack` with `visibleOnly: true` without a data pattern.\nThis operation is only supported for patterned data (e.g. 'ProgressiveX')");const r=Math.min(t.onlyInRange.start,t.onlyInRange.end),n=Math.max(t.onlyInRange.start,t.onlyInRange.end),o=Vo(r,n,"x"===Bs(e)?this.hd:this.rd,this.Gu,this.Nu,this.Vu,e,0);if(!o)return{xValues:new this.Ku,yValues:new this.Ku,iSampleFirst:0};s=o.dataRanges,i=o.iFirstSample}else if(void 0!==this.pd&&this.Uu&&this.Gu%this.pd!=0){const t=this.Vu,r=e-t,n=this.Vu-1;s.push({offset:t,count:r}),s.push({offset:0,count:n+1}),i=this.Gu-e}else s.push({offset:0,count:this.Nu}),i=0;const r=s.reduce(((t,e)=>t+e.count),0),n=new this.Ku(r),o=new this.Ku(r),h=this.ju?new Uint32Array(r):void 0,a=this.Wu?new Float32Array(r):void 0,l=this.Zu?new Uint32Array(r):void 0,c=this.Qu?new Float32Array(r):void 0,u=this.Ju?new Float32Array(r):void 0;let d=0;for(const t of s)n.set(this.hd.subarray(t.offset,t.offset+t.count),d),o.set(this.rd.subarray(t.offset,t.offset+t.count),d),this.ju&&h&&this.fd&&h.set(this.fd.subarray(t.offset,t.offset+t.count),d),this.Wu&&a&&this.dd&&a.set(this.dd.subarray(t.offset,t.offset+t.count),d),this.Zu&&l&&this.vd&&l.set(this.vd.subarray(t.offset,t.offset+t.count),d),this.Qu&&c&&this.Ad&&c.set(this.Ad.subarray(t.offset,t.offset+t.count),d),this.Ju&&u&&this.gd&&u.set(this.gd.subarray(t.offset,t.offset+t.count),d),d+=t.count;return{xValues:n,yValues:o,iSampleFirst:i,lookupValues:a,colors:h,ids:l,sizes:c,rotations:u}}ud(t,e,i,s,r,n,o){if(void 0===e){const e=this.ed();r=void 0!==r?r:o&&Bs(o)===i?ks(o)?1:-1:1,s=void 0!==s?s:e?e[i]+r:0;const n=new this.Ku(t);for(let e=0;e<t;e+=1)n[e]=s+e*r;return[n,0]}const h=e[0]&&e[0]instanceof Date,a=e[0]&&Ho(e[0]);if(!a&&e[0]&&"string"==typeof e[0])throw new Error("LightningChart JS error - XY coordinate supplied as unrecognized String format. Coordinates must be Numbers, Date objects or ISO 8601 Date strings");if(void 0!==s||void 0!==r){const l=this.ed();r=void 0!==r?r:o&&Bs(o)===i?ks(o)?1:-1:1,s=void 0!==s?s:l?l[i]+r:0;const c=new this.Ku(t);if(a)for(let i=0;i<t;i+=1)c[i]=s+new Date(e[i+n]).getTime()*r;else if(h)for(let i=0;i<t;i+=1)c[i]=s+e[i+n].getTime()*r;else for(let i=0;i<t;i+=1)c[i]=s+e[i+n]*r;return[c,0]}if(a){const i=new this.Ku(t);for(let s=0;s<t;s+=1)i[s]=new Date(e[s]).getTime();return[i,n]}if(h){const i=new this.Ku(t);for(let s=0;s<t;s+=1)i[s]=e[s].getTime();return[i,n]}return[e,n]}ad(t){if(!t||0===t.length)return;const e=t[0];if(b(e)){const e=t.length,i=new Uint32Array(e);for(let s=0;s<e;s+=1){const e=t[s],r=255*e.a<<24|255*e.b<<16|255*e.g<<8|255*e.r;i[s]=r}return i}return t}xd(){return{min:0,max:void 0!==this.pd&&this.Uu?this.pd-1:this.Nu-1}}Sd(t){t=Math.min(t,this.Nu),this.Gu-=t,this.Nu-=t,this.Vu-=t,this.Vu<0&&void 0!==this.pd&&(this.Vu+=this.pd)}od(t,e,i,s,r,n,o,h,a,l){const c=Bs(l),u=ks(l),d="x"===c?t:e,f="x"===c?i:s,g=i.length,y=f[0];if(this.nd(l,i[g-1],s[g-1])){const t=this.ed(),e=t?t[c]:0;let l=0;for(let t=0;t<g;t+=1)if(f[t]>e){l=t;break}const u={xValues:i,yValues:s,lookupValues:r,colors:n,ids:o,sizes:h,rotations:a,offset:l};this.Yu=!0,this.appendSamples(u),this.Yu=!1}else{const l=t.length,c=this.Nu,f=this.Gu-1,p=Math.max(f-c+1,0),m=_o(y,p,f,u,(t=>d[Po(t,this.Gu,l,this.Vu)])),x=m-1,S=m+1,v=d[Po(m,this.Gu,l,this.Vu)],A=S<=this.Gu-1?d[Po(S,this.Gu,l,this.Vu)]:void 0,b=void 0!==A&&(u&&A<y||!u&&A>y)?S+1:u&&v<y||!u&&v>y?m+1:x+1,C=f-b+1,M=new this.Ku(C),T=new this.Ku(C),E=this.Wu?new Float32Array(C):void 0,w=this.ju?new Uint32Array(C):void 0,B=this.Zu?new Uint32Array(C):void 0,k=this.Qu?new Float32Array(C):void 0,R=this.Ju?new Float32Array(C):void 0;let F=0;for(let i=b;i<=f;i+=1){const s=Po(i,this.Gu,l,this.Vu);M[F]=t[s],T[F]=e[s],E&&this.dd&&(E[F]=this.dd[s]),w&&this.fd&&(w[F]=this.fd[s]),B&&this.vd&&(B[F]=this.vd[s]),k&&this.Ad&&(k[F]=this.Ad[s]),R&&this.gd&&(R[F]=this.gd[s]),F+=1}this.Sd(C);const I=new this.Ku(g+C);I.set(i),I.set(M,g);const O=new this.Ku(g+C);let L,D,P,V,_;O.set(s),O.set(T,g),r&&E&&(L=new Float32Array(g+C),L.set(r),L.set(E,g)),n&&w&&(D=new Uint32Array(g+C),D.set(n),D.set(w,g)),o&&B&&(P=new Uint32Array(g+C),P.set(o),P.set(B,g)),h&&k&&(V=new Float32Array(g+C),V.set(h),V.set(k,g)),a&&R&&(_=new Float32Array(g+C),_.set(a),_.set(R,g)),this.Yu=!0,this.appendSamples({xValues:I,yValues:O,lookupValues:L,colors:D,ids:P,sizes:V,rotations:_}),this.Yu=!1,this.R.O("clear",{})}}md(){return this.ld()}ld(t=!1){let e;if(this.Xu&&"userSpecified"in this.Xu)e=this.Xu.userSpecified;else if(this.Xu&&"autoDetectResult"in this.Xu)e=this.Xu.autoDetectResult;else if(this.hd&&this.rd&&this.Gu>0&&!t){const t=void 0!==this.pd&&this.Uu?this.Vu:0,i=this.Nu-1,s=void 0!==this.pd&&this.Uu?0:void 0,r=void 0!==this.pd&&this.Uu?this.Vu-1:void 0,[n,o]=void 0!==s&&void 0!==r&&Math.abs(r-s)>Math.abs(i-t)?[s,r]:[t,i];if(1+o-n>=2){let t,i,s=this.hd[n],r=this.rd[n];for(let e=n+1;e<=o;e+=1){if(!1!==t){const i=this.hd[e],r=Math.sign(i-s);0!==r&&t&&t.direction!==r?t=!1:0===r||t||(t={direction:r}),s=i}if(!1!==i){const t=this.rd[e],s=Math.sign(t-r);0!==s&&i&&i.direction!==s?i=!1:0===s||i||(i={direction:s}),r=t}}e=t&&t.direction>0?ws.ProgressiveX:t&&t.direction<0?ws.RegressiveX:i&&i.direction>0?ws.ProgressiveY:i&&i.direction<0?ws.RegressiveY:void 0,this.Xu={autoDetectResult:e},e&&Wt.console.warn(`LightningChart JS DataSetXY warning | Data pattern was detected automatically (DataPatterns.${e}).\nAutomatic detection is only intended for kick-starting application development, not for production use.\nAdd { dataPattern: '${e}'} } to your application when creating series or DataSetXY to clear this warning.`)}}return e}nd(t,e,i){const s=this.ed();return!s||("ProgressiveX"===t?e>=s.x:"RegressiveX"===t?e<=s.x:"ProgressiveY"===t?i>=s.y:"RegressiveY"!==t||i<=s.y)}sd(t){if(t.incomingDataX&&t.incomingDataY&&0===this.Nu&&!this.hd&&!this.rd&&(void 0===this.pd||this.pd===t.appendCount)&&this.qu)return this.hd=Uo(t.incomingDataX,this.Ku)||new this.Ku,this.rd=Uo(t.incomingDataY,this.Ku)||new this.Ku,this.dd=this.Wu?Uo(t.incomingDataLookup,Float32Array):void 0,this.vd=this.Zu?Uo(t.incomingDataIDs,Uint32Array):void 0,this.fd=this.ju?Uo(t.incomingDataColors,Uint32Array):void 0,this.Ad=this.Qu?Uo(t.incomingDataSize,Float32Array):void 0,this.gd=this.Ju?Uo(t.incomingDataRotation,Float32Array):void 0,{dataPattern:this.ld(),samplesCacheX:this.hd,samplesCacheY:this.rd,samplesCacheLookup:this.dd,samplesCacheIDs:this.vd,samplesCacheColors:this.fd,samplesCacheSize:this.Ad,samplesCacheRotation:this.gd,maxSampleCount:t.appendCount,incomingDataReplacedCache:!0};if(void 0===this.pd){const e=this.Nu+t.appendCount;if(!this.hd||!this.rd)return this.hd=new this.Ku(e),this.rd=new this.Ku(e),this.dd=this.Wu?new Float32Array(e):void 0,this.vd=this.Zu?new Uint32Array(e):void 0,this.fd=this.ju?new Uint32Array(e):void 0,this.Ad=this.Qu?new Float32Array(e):void 0,this.gd=this.Ju?new Float32Array(e):void 0,{dataPattern:this.ld(),samplesCacheX:this.hd,samplesCacheY:this.rd,samplesCacheLookup:this.dd,samplesCacheIDs:this.vd,samplesCacheColors:this.fd,samplesCacheSize:this.Ad,samplesCacheRotation:this.gd,maxSampleCount:e};const i=this.hd.length;if(i<e){if(!this.Hu.warningDisplayed){const i=Wt.performance.now();if(this.Hu.expandEvents=this.Hu.expandEvents.filter((t=>i-t.timestamp<5e3)),e>1e3&&this.Hu.expandEvents.push({timestamp:i}),this.Hu.expandEvents.length>5)return Wt.console.warn("LightningChart JS warning - DataSetXY append operation was performed more than 5 times in 5 seconds.\nAutomatic max sample count control was enabled.\nFor streaming applications, DataSetXY.setMaxSampleCount() or Series.setMaxSampleCount() should be configured explicitly to get rid of this warning."),this.Hu.warningDisplayed=!0,this.setMaxSampleCount({mode:"auto"}),this.sd(t)}const i=new this.Ku(e);i.set(this.hd),this.hd=i;const s=new this.Ku(e);if(s.set(this.rd),this.rd=s,this.Wu){const t=new Float32Array(e);this.dd&&t.set(this.dd),this.dd=t}if(this.Zu){const t=new Uint32Array(e);this.vd&&t.set(this.vd),this.vd=t}if(this.ju){const t=new Uint32Array(e);this.fd&&t.set(this.fd),this.fd=t}if(this.Qu){const t=new Float32Array(e);this.Ad&&t.set(this.Ad),this.Ad=t}if(this.Ju){const t=new Float32Array(e);this.gd&&t.set(this.gd),this.gd=t}return this.Vu=this.Nu,{dataPattern:this.ld(),samplesCacheX:this.hd,samplesCacheY:this.rd,samplesCacheLookup:this.dd,samplesCacheIDs:this.vd,samplesCacheColors:this.fd,samplesCacheSize:this.Ad,samplesCacheRotation:this.gd,maxSampleCount:e}}if(i>4*e){const t=new this.Ku(e);t.set(this.hd.subarray(0,this.Nu)),this.hd=t;const i=new this.Ku(e);if(i.set(this.rd.subarray(0,this.Nu)),this.rd=i,this.Wu){const t=new Float32Array(e);this.dd&&t.set(this.dd.subarray(0,this.Nu)),this.dd=t}if(this.Zu){const t=new Uint32Array(e);this.vd&&t.set(this.vd.subarray(0,this.Nu)),this.vd=t}if(this.ju){const t=new Uint32Array(e);this.fd&&t.set(this.fd.subarray(0,this.Nu)),this.fd=t}if(this.Qu){const t=new Float32Array(e);this.Ad&&t.set(this.Ad.subarray(0,this.Nu)),this.Ad=t}if(this.Ju){const t=new Float32Array(e);this.gd&&t.set(this.gd.subarray(0,this.Nu)),this.gd=t}return{dataPattern:this.ld(),samplesCacheX:this.hd,samplesCacheY:this.rd,samplesCacheLookup:this.dd,samplesCacheIDs:this.vd,samplesCacheColors:this.fd,samplesCacheSize:this.Ad,samplesCacheRotation:this.gd,maxSampleCount:e}}return{dataPattern:this.ld(),samplesCacheX:this.hd,samplesCacheY:this.rd,samplesCacheLookup:this.dd,samplesCacheIDs:this.vd,samplesCacheColors:this.fd,samplesCacheSize:this.Ad,samplesCacheRotation:this.gd,maxSampleCount:i}}return t.appendCount+this.Nu>this.pd&&this.R.O("maxsamplecountexceed",{currentSampleCount:this.Nu,currentMaxSampleCount:this.pd,newTotalSampleCount:this.Nu+t.appendCount}),this.hd=this.hd||new this.Ku(this.pd),this.rd=this.rd||new this.Ku(this.pd),this.dd=this.dd||(this.Wu?new Float32Array(this.pd):void 0),this.vd=this.vd||(this.Zu?new Uint32Array(this.pd):void 0),this.fd=this.fd||(this.ju?new Uint32Array(this.pd):void 0),this.Ad=this.Ad||(this.Qu?new Float32Array(this.pd):void 0),this.gd=this.gd||(this.Ju?new Float32Array(this.pd):void 0),{dataPattern:this.ld(),samplesCacheX:this.hd,samplesCacheY:this.rd,samplesCacheLookup:this.dd,samplesCacheIDs:this.vd,samplesCacheColors:this.fd,samplesCacheSize:this.Ad,samplesCacheRotation:this.gd,maxSampleCount:this.pd}}bd(){if(!this.hd||!this.rd||0===this.Nu)return;if(void 0===this.pd)return this.Gu>0?{x:this.hd[0],y:this.rd[0]}:void 0;if(!this.Uu)return{x:this.hd[0],y:this.rd[0]};let t=this.Vu-this.Nu;return t<0&&(t+=this.pd),{x:this.hd[t],y:this.rd[t]}}ed(){if(!this.hd||!this.rd||0===this.Nu)return;if(void 0===this.pd){const t=this.Nu-1;return t>=0?{x:this.hd[t],y:this.rd[t]}:void 0}let t=this.Vu-1;return t<0&&(t+=this.pd),{x:this.hd[t],y:this.rd[t]}}Md(t){if(!this.hd||!this.rd)return;const e=this.hd.length,i=this.Nu,s=this.Gu-1,r=Math.max(s-i+1,0)+t,n=Po(r,this.Gu,e,this.Vu);return{x:this.hd[n],y:this.rd[n],lookupValue:this.Wu&&this.dd?this.dd[n]:void 0,id:this.Zu&&this.vd?this.vd[n]:void 0,color:this.ju&&this.fd?this.fd[n]:void 0,size:this.Qu&&this.Ad?this.Ad[n]:void 0,rotation:this.Ju&&this.gd?this.gd[n]:void 0,iSample:r}}wd(t,e,i,s){const r=this.ld(),n=this.hd,o=this.rd;if(!n||!o)return;const h=(t,e)=>({x:n[t],y:o[t],lookupValue:this.Wu&&this.dd?this.dd[t]:void 0,id:this.Zu&&this.vd?this.vd[t]:void 0,color:this.ju&&this.fd?this.fd[t]:void 0,size:this.Qu&&this.Ad?this.Ad[t]:void 0,rotation:this.Ju&&this.gd?this.gd[t]:void 0,iSample:e}),a=n.length,l=this.Nu,c=this.Gu-1,u=Math.max(c-l+1,0);if(r){const i=ks(r),s=this.bd(),n=this.ed();if(!(s&&n&&this.hd&&this.rd))return;const o="ProgressiveX"===r||"RegressiveX"===r?"x":"y",l="x"===o?"y":"x",d="x"===o?this.hd:this.rd,f="x"===l?this.hd:this.rd,g=t[o],y=Math.min(s[o],n[o]),p=Math.max(s[o],n[o]);if(g<y||g>p)return;const m=_o(g,u,c,i,(t=>d[Po(t,this.Gu,a,this.Vu)])),x=Po(m,this.Gu,a,this.Vu);if(!e)return h(x,m);const S=m-1,v=m+1,A=d[x],b=i?g>=A?v<=c?v:void 0:S>=u?S:void 0:g<=A?v<=c?v:void 0:S>=u?S:void 0;if(void 0===b)return;const C=Po(b,this.Gu,a,this.Vu),M=m<b?{pos:d[x],val:f[x],iSample:m}:{pos:d[C],val:f[C],iSample:b},T=m>b?{pos:d[x],val:f[x],iSample:m}:{pos:d[C],val:f[C],iSample:b},E=(g-M.pos)/(T.pos-M.pos),w=Rs(M.val,T.val,E);return"x"===Bs(r)?{x:g,y:w,iSample:Rs(M.iSample,T.iSample,E)}:{y:g,x:w,iSample:Rs(M.iSample,T.iSample,E)}}let d,f=Number.MAX_VALUE;const g=ot(t,i,s),y=this.Nu-1;for(let t=0;t<=y;t+=1){const e=n[t],r=o[t];if(!this.td||!Number.isNaN(e)&&!Number.isNaN(r)){const n=nt(e,i.x,s.x),o=nt(r,i.y,s.y),h=(n-g.x)**2+(o-g.y)**2;h<f&&(f=h,d=t)}}return void 0===d?void 0:h(d,d)}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const Po=(t,e,i,s)=>t%i,Vo=(t,e,i,s,r,n,o,h)=>{if(0===s||0===r)return;const a=ks(o),l=i.length,c=s-1,u=Math.max(c-r+1,0),d=_o(t,u,c,a,(t=>i[Po(t,s,l)])),f=_o(e,u,c,a,(t=>i[Po(t,s,l)])),g=Math.min(d,f),y=Math.max(d,f),p=Math.max(g-h,u),m=Math.min(y+h,c),x=Po(p,s,l),S=Po(m,s,l);return x>S?{iFirstSample:p,iLastSample:m,iFirstSampleDataArray:x,iLastSampleDataArray:S,dataRanges:[{offset:x,count:l-x},{offset:0,count:S+1}]}:{iFirstSample:p,iLastSample:m,iFirstSampleDataArray:x,iLastSampleDataArray:S,dataRanges:[{offset:x,count:S-x+1}]}},_o=(t,e,i,s,r)=>{const n=i;for(;e!==i;){const n=Math.ceil((e+i)/2),o=r(n);s&&t<o||!s&&t>o?i=n-1:e=n}const o=Math.abs(t-r(e));return e<n&&Math.abs(t-r(e+1))<o?e+1:e},zo=(t,e,i,s,r)=>{const n=e.length;if(Array.isArray(e))for(let n=0;n<s;n+=1)t[r+n]=e[i+n];else t.set(n===s?e:e.subarray(i,i+s),r)},Uo=(t,e)=>void 0===t?void 0:Array.isArray(t)?new e(t):t instanceof e?t:new e(t),No=(t,e,i)=>{if(void 0!==t)return Array.isArray(t)?t.slice(e,i):t.subarray(e,i)},Xo=/^(\d{4}-\d{2}-\d{2})(?:T(\d{2}:\d{2}:\d{2}(?:\.\d+)?)(Z|[+-]\d{2}:\d{2})?)?$/,Ho=t=>"string"==typeof t&&Xo.test(t)&&!Wt.isNaN(Date.parse(t));class Go extends Io{constructor(t,e,i,s,r){var n;super(t,e,i,s,r),this.cl="label",this.Xl=this.Hs.mn(this.renderingScale).jr(this.cl).Je(V).vn(qe).yn(qe),this.setMargin(null!==(n=r.uiTextPadding)&&void 0!==n?n:5),this.R.Gt(this.Xl)}Bn(){return[this.Xl]}setFillStyle(t){return this.Xl.Je(t),this.Hs.Bs(),this}getFillStyle(){return this.Xl.pr()}qe(){void 0!==this.zn&&this.Xl.Ka(this.zn);const t=this.getPosition(l(0,0),e.UISpace.Content),i=ot(t,this.scale,this.renderingScale);return this.Xl.th(i),this.Xl.Wh=this.Wh,this}Dr(){this.Xl.Dr();const t=0===this.cl.length?l(0,0):this.Xl.Pu();return this.setContentSize(t),super.Dr()}setText(t){return this.cl=t,this.Xl.jr(this.cl),this.Hs.Bs(),this}getText(){return this.cl}setFont(t){return this.Xl.Sr(t),this.Hs.Bs(),this}getFont(){return this.Xl.mr()}setTextRotation(t){return this.Xl.br(t),this.Hs.Bs(),this}getTextRotation(){return this.Xl.Mr()}}const Yo={...Hn,...Yn,uiElement:Go};class Wo extends Oo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.fitTo=this.On.bind(this),this.setSize=this.fitTo,this.Xl=this.Hs._d(e).Je(V).Qe(Ot),this.Cd=this.Xl.Oo(),this.R.Gt(this.Xl)}Bn(){return[this.Xl]}setCornerRadius(t,e){var i,s,r,n;return this.kd=t,this.Cd.Td(t?{extent:t,c_x1_y1:null===(i=null==e?void 0:e.bottomLeft)||void 0===i||i,c_x1_y2:null===(s=null==e?void 0:e.topLeft)||void 0===s||s,c_x2_y1:null===(r=null==e?void 0:e.bottomRight)||void 0===r||r,c_x2_y2:null===(n=null==e?void 0:e.topRight)||void 0===n||n,skipTooSmallCheck:!!e}:void 0),this.Hs.Bs(),this}getCornerRadius(){return this.kd}setFillStyle(t){return this.Xl.Je(t),this.Hs.Bs(),this}getFillStyle(){return this.Xl.pr()}setStrokeStyle(t){return this.Xl.Qe(t),this.Hs.Bs(),this}getStrokeStyle(){return this.Xl.Ua()}qe(){void 0!==this.zn&&this.Xl.Ka(this.zn);const t=Ci([this.getPosition(l(-1,-1),e.UISpace.Content),this.getPosition(l(1,1),e.UISpace.Content)].map((t=>ot(t,this.scale,this.renderingScale))));return this.Cd.Fd(t.min.x,t.min.y,t.max.x,t.max.y),this}On(t){return this.setContentSize(t),this.Hs.Bs(),this}Vn(){return 0}Nn(){return 0}Un(){return 0}Gn(){return 0}}class jo extends Oo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Id=l(0,0),this.Xl=t.Pd(e).lu(0).dh(360).Je(V).Qe(Ot),this.R.Gt(this.Xl)}Bn(){return[this.Xl]}setFillStyle(t){return this.Xl.Je(t),this.Hs.Bs(),this}getFillStyle(){return this.Xl.pr()}setStrokeStyle(t){return this.Xl.Qe(t),this.Hs.Bs(),this}getStrokeStyle(){return this.Xl.Ua()}qe(){void 0!==this.zn&&this.Xl.Ka(this.zn);const t=this.getSize(e.UISpace.Content).x/2;return this.Xl.uu(t*this.renderingScale.rs().x).du(t*this.renderingScale.rs().y).th(ot(this.getPosition(l(0,0),e.UISpace.Content),this.scale,this.renderingScale)).Au(255).Dr(),this}On(t){const e=Math.sqrt(t.x*t.x/4+t.y*t.y/4);return this.setContentSize(l(2*e,2*e)),this.Id=t,this.Hs.Bs(),this}Vn(){return(this.getSize(e.UISpace.Content).x-this.Id.x)/2}Nn(){return(this.getSize(e.UISpace.Content).x-this.Id.x)/2}Un(){return(this.getSize(e.UISpace.Content).y-this.Id.y)/2}Gn(){return(this.getSize(e.UISpace.Content).y-this.Id.y)/2}fitTo(t){const e=Math.min(t.x,t.y);return this.setContentSize(l(e,e)),this.Id=t,this}}class $o extends Lo{constructor(t,e,i,s,r){super(t,e,i,Eo.Simple,s,r),this.Ld=p(l(0,0)),this.Bd=!1,this.zu()}Ou(){const t=this.Ld.T();if(this.Bd){const e=Math.min(t.x,t.y);return[l(0,0),l(e/2,e/2),l(0,e),l(-e/2,e/2)]}const e=2*Math.sqrt(this.Ld.T().x*this.Ld.T().x/4+this.Ld.T().y*this.Ld.T().y/4),i=l(Math.cos(Math.PI/4)*e,0),s=l(0,Math.sin(Math.PI/4)*e),r=l(0,0),n=Li(r,Li(i,s)),o=Li(n,Li(s,Oi(i,-1)));return[r,n,o,Di(o,Li(i,s))]}Bn(){return[this.Xl]}setFillStyle(t){return this.Xl.Je(t),this.Hs.Bs(),this}getFillStyle(){return this.Xl.pr()}setStrokeStyle(t){return this.Xl.Qe(t),this.Hs.Bs(),this}getStrokeStyle(){return this.Xl.Ua()}On(t){return this.Ld.C(t),this.Bd=!1,this.Hs.Bs(),this}Vn(){return this.Bd?0:(this.getSize(e.UISpace.Content).x-this.Ld.T().x)/2}Nn(){return this.Bd?0:(this.getSize(e.UISpace.Content).x-this.Ld.T().x)/2}Un(){return this.Bd?0:(this.getSize(e.UISpace.Content).y-this.Ld.T().y)/2}Gn(){return this.Bd?0:(this.getSize(e.UISpace.Content).y-this.Ld.T().y)/2}fitTo(t){return this.Ld.C(t),this.Bd=!0,this.Hs.Bs(),this}}class Qo extends Lo{constructor(t,i,s,r,n){super(t,i,s,Eo.Simple,r,n),this.Dd=p(l(0,0)),this.Ed=p(10),this.Rd=p(void 0),this.Zn=p(e.UIDirections.Right),this.zu()}Bn(){return[this.Xl]}setFillStyle(t){return this.Xl.Je(t),this.Hs.Bs(),this}getFillStyle(){return this.Xl.pr()}setStrokeStyle(t){return this.Xl.Qe(t),this.Hs.Bs(),this}getStrokeStyle(){return this.Xl.Ua()}setDirection(t){return this.Zn.C(t),this.Hs.Bs(),this}getDirection(){return this.Zn.T()}setPointerLength(t){return this.Ed.C(t),this.Hs.Bs(),this}getPointerLength(){return this.Ed.T()}setPointerAngle(t){return this.Rd.C(t),this.Hs.Bs(),this}getPointerAngle(){let t=this.Rd.T();if(void 0===t){const e=this.zd();if(0===e)return 0;t=0!==e?180*Math.atan(2*this.getPointerLength()/e)/Math.PI:0}return Math.min(Math.max(t,1),89)}On(t){return this.Dd.C(t),this.Hs.Bs(),this}Od(){const t=this.getPointerAngle();return 0===t?0:2*this.getPointerLength()/Math.tan(t*Math.PI/180)}Vd(){return xe(this.Zn.T())?this.Dd.T().x:this.Dd.T().y}zd(){return xe(this.Zn.T())?this.Dd.T().y:this.Dd.T().x}Vn(){switch(this.Zn.T()){case e.UIDirections.Right:return 0;case e.UIDirections.Left:return this.getPointerLength();case e.UIDirections.Up:case e.UIDirections.Down:return Math.max(0,this.Od()-this.zd());default:return 0}}Nn(){switch(this.Zn.T()){case e.UIDirections.Right:return this.getPointerLength();case e.UIDirections.Left:return 0;case e.UIDirections.Up:case e.UIDirections.Down:return Math.max(0,this.Od()-this.zd());default:return 0}}Un(){switch(this.Zn.T()){case e.UIDirections.Right:case e.UIDirections.Left:return Math.max(0,this.Od()-this.zd());case e.UIDirections.Up:return this.getPointerLength();case e.UIDirections.Down:default:return 0}}Gn(){switch(this.Zn.T()){case e.UIDirections.Right:case e.UIDirections.Left:return Math.max(0,this.Od()-this.zd());case e.UIDirections.Up:return 0;case e.UIDirections.Down:return this.getPointerLength();default:return 0}}Ou(){const t=me(this.Zn.T()),e=Fi(l(0,0),t),i=this.getPointerLength(),s=this.Od(),r=this.Vd(),n=this.zd();if(!(0!==i&&0!==s||0!==r&&0!==n))return[];const o=l(0,0),h=Li(Li(o,Oi(t,-i)),Oi(e,s/2)),a=Li(h,Oi(e,(n-s)/2)),c=Li(a,Oi(t,-r)),u=Li(Li(o,Oi(t,-i)),Oi(e,-s/2)),d=Li(u,Oi(e,-(n-s)/2)),f=Li(d,Oi(t,-r));let g;return g=0===r||0===n?[o,h,u]:0===i||0===s?[a,c,f,d]:Zt(n,s)?[o,h,c,f,u]:[o,h,a,c,f,d,u],g}}class Jo extends Io{constructor(t,e,i,s,r){super(t,e,i,s,r),this.fitTo=this.On.bind(this),this.setSize=this.fitTo,this.Nd=new Do,this.Xl=this.Hs.Yd(e).ah(Ot).$d(V).Ud(V).Gd(this.Nd),this.R.Gt(this.Xl)}Bn(){return[this.Xl]}setShape(t){return this.Xl.Hd(t),this}getShape(){return this.Xl.Xd()}setRotation(t){return this.Xl.Wd(t),this}getRotation(){return this.Xl.jd()}setFillStyle(t){return this.Xl.Ud(t),this.Hs.Bs(),this}getFillStyle(){return this.Xl.Zd()}qe(){void 0!==this.zn&&this.Xl.Ka(this.zn);const t=ot(this.getPosition({x:0,y:0},e.UISpace.Content),this.scale,this.renderingScale),i=Math.max(this.size.x,this.size.y);if(this.Nd.clear(),i>0){const e=this.Xl.Xd(),s=this.Xl.Zd(),r=lr(e)&&e,n=Ft(s)&&s;if(r){const t=i/r.Mi().y;this.Xl.Qd(t)}else if(n){const t=n.source;if(t instanceof Image){const e=i/t.height;this.Xl.Qd(e)}}else this.Xl.Qd(i);this.Nd.appendSample(t)}return this}On(t){return this.setContentSize(t),this.Hs.Bs(),this}Vn(){return 0}Nn(){return 0}Un(){return 0}Gn(){return 0}}const qo={...Hn,...Yn,uiElement:Jo};class Zo extends jn{setSize(t){return this.setContentSize(t),this.Hs.Bs(),this}}class Ko extends Ln{constructor(){super(...arguments),this.Jd=[],this.Kd=0,this.qd=t=>{const e=this.Jd.indexOf(t);e>=0&&this.Jd.splice(e,1)}}getMembers(){return this.Jd}getMemberCount(){return this.Jd.length}setMinimumSize(t){return this.tf=t,this.Hs.Bs(),this}getMinimumSize(){return this.tf}addElement(t,e=-1){const i=t.so(this.Hs,this.renderingScale,this.scale,this.qd,this.Ct,!1);return i.setPointerEvents(this.getPointerEvents()),e>=0?this.Jd.splice(e,0,i):this.Jd.push(i),i.setVisible(this.getVisible()),this.R.$t(i),this.ft&&(_e(0,(()=>{})),i.dispose()),i}dispose(){return super.dispose(),this.Jd.slice().forEach(Jt),this}qe(){super.qe(),this.Jd.forEach((t=>{t.Wh=this.Wh}));const t=this.zn;return void 0!==t&&this.Jd.forEach(((e,i)=>{e.zn=t+1+.01*i})),this}setVisible(t){return super.setVisible(t),this.Jd.forEach((e=>e.setVisible(t))),this}setPointerEvents(t){super.setPointerEvents(t);for(let e=0;e<this.Jd.length;e+=1)this.Jd[e].setPointerEvents(t);return this}getPointerEvents(){if(super.getPointerEvents())return!0;for(let t=0;t<this.Jd.length;t+=1)if(this.Jd[t].getPointerEvents())return!0;return!1}setHighlight(t){super.setHighlight(t);for(let i=0;i<this.Jd.length;i+=1){const s=this.Jd[i];"getHighlight"in(e=s)&&"setHighlight"in e&&s.setHighlight(t)}var e;return this}}class th extends Ko{qe(){super.qe();const t=this.getPosition(l(-1,1),e.UISpace.Content),i=this.Jd.reduce(((t,e)=>t+ +(e instanceof Zo)),0),s=i>0?(this.size.x-this.Kd)/i:0;return this.Jd.reduce(((e,i)=>i instanceof Zo?this.scale.Li({x:e,y:t.y},{x:s+i.getSize().x,y:0}).x:i.setOrigin(l(-1,1)).setPosition(l(e,t.y)).qe().getPosition(l(1,0)).x),t.x),this}Dr(){for(let t=0;t<this.Jd.length;t+=1){const e=this.Jd[t];e instanceof eh&&e.setMinimumSize(0),e.Dr()}const t=this.Jd.reduce(this.if.bind(this),c(0,0));this.Kd=t.x;const e=void 0===this.tf?t:l(Math.max(t.x,this.tf),t.y);this.setContentSize(e);for(let t=0;t<this.Jd.length;t+=1){const i=this.Jd[t];i instanceof eh&&i.setMinimumSize(e.y).Dr()}return super.Dr()}if(t,e){const i=e.getSize();return t.x+=i.x,t.y=Math.max(t.y,i.y),t}addGap(t=0,e=-1){return this.addElement(ih,e).setSize(l(0,t))}}class eh extends Ko{qe(){super.qe();const t=this.getPosition(l(-1,1),e.UISpace.Content),i=this.Jd.reduce(((t,e)=>t+ +(e instanceof Zo)),0),s=i>0?(this.size.y-this.Kd)/i:0;return this.Jd.reduce(((e,i)=>i instanceof Zo?this.scale.Li({x:t.x,y:e},{x:0,y:-(s+i.getSize().y)}).y:i.setOrigin(l(-1,1)).setPosition(l(t.x,e)).qe().getPosition(l(0,-1)).y),t.y),this}Dr(){for(let t=0;t<this.Jd.length;t+=1){const e=this.Jd[t];e instanceof th&&e.setMinimumSize(0),e.Dr()}const t=this.Jd.reduce(this.if.bind(this),c(0,0));this.Kd=t.y;const e=void 0===this.tf?t:l(t.x,Math.max(t.y,this.tf));this.setContentSize(e);for(let t=0;t<this.Jd.length;t+=1){const i=this.Jd[t];i instanceof th&&i.setMinimumSize(e.x).Dr()}return super.Dr()}if(t,e){const i=e.getSize();return t.y+=i.y,t.x=Math.max(t.x,i.x),t}addGap(t=0,e=-1){return this.addElement(ih,e).setSize(l(0,t))}}const ih={...Hn,...Yn,uiElement:Zo};class sh extends eh{constructor(){super(...arguments),this.Jd=[]}addRow(){return this.addElement(oh,void 0)}getRow(t,e=!1){return e&&this.Jd.length<=t?(this.addRow(),this.getRow(t,!0)):this.Jd[t]}}const rh={...Hn,...Gn,...Wn},nh={...rh,uiElement:eh,background:Wo},oh={...rh,uiElement:th,background:Wo},hh={setTextLabel:null,setText(t){return this.setTextLabel.setText(t),this},getText(){return this.setTextLabel.getText()}},ah=(t,e)=>{const i={},s=`stylable${t}s`;return i[s]=e,i[`set${t}FillStyle`]=function(t){return this[s].forEach((e=>e.setFillStyle(t))),this},i[`get${t}FillStyle`]=function(){return this[s][0].getFillStyle()},i[`set${t}Font`]=function(t){return this[s].forEach((e=>e.setFont(t))),this},i[`get${t}Font`]=function(){return this[s][0].getFont()},i[`set${t}Rotation`]=function(t){return this[s].forEach((e=>e.setTextRotation(t))),this},i[`get${t}Rotation`]=function(){return this[s][0].getTextRotation()},i},lh=ah("Text",[]),ch={button:void 0,isLocked:!1,setOn(t){const e=this.button.getOn()!==t;return this.button.setOn(t),e&&this.R.O("switch",{state:t}),this},getOn(){return this.button.getOn()},setLocked(t){return this.isLocked=t,this},getLocked(){return this.isLocked},setButtonOffFillStyle(t){return this.button.setOffFillStyle(t),this},getButtonOffFillStyle(){return this.button.getOffFillStyle()},setButtonOnFillStyle(t){return this.button.setOnFillStyle(t),this},getButtonOnFillStyle(){return this.button.getOnFillStyle()},setButtonSize(t){return this.button.setSize(t),this},getButtonSize(){return this.button.getSize()},setButtonShape(t){return this.button.setButtonShape(t),this},getButtonShape(){return this.button.getButtonShape()}},uh={textFillStyleHidden:void 0,setTextFillStyleHidden(t){return this.textFillStyleHidden="function"==typeof t?t(this.textFillStyleHidden):t,this},getTextFillStyleHidden(){return this.textFillStyleHidden}},dh={pointable:void 0,setDirection(t){return this.pointable.setDirection(t),this},getDirection(){return this.pointable.getDirection()},setPointerLength(t){return this.pointable.setPointerLength(t),this},getPointerLength(){return this.pointable.getPointerLength()}},fh={...Hn,...Gn,background:Wo,so(t,e,i,s,r,n){const o=new th(t,e,i,this.background,s,r),h=o.addElement(Yo,void 0),a=Object.assign(o,hh,{setTextLabel:h},lh,{stylableTexts:[h]});return Xn(a,r,n),this.applyStylers(a,r)}}.addStyler(Un),gh={...Hn,...Gn,background:Qo,direction:e.UIDirections.Up,setDirection(t){return this.direction=t,this},so(t,i,s,r,n,o){const h=this.direction,a=new th(t,i,s,this.background,r,n),l=a.addElement(Yo,void 0),c=a.getBackground().setDirection(h),u=a.qe.bind(a),d=Object.assign(a,hh,{setTextLabel:l},lh,{stylableTexts:[l]},dh,{pointable:c},{setTickLabelPadding(t){return this.getDirection()===e.UIDirections.Up?(this.setPadding({top:t}),l.setMargin({top:0})):this.getDirection()===e.UIDirections.Down?(this.setPadding({bottom:t}),l.setMargin({bottom:0})):this.getDirection()===e.UIDirections.Right?(this.setPadding({right:t}),l.setMargin({right:0})):this.getDirection()===e.UIDirections.Left&&(this.setPadding({left:t}),l.setMargin({left:0})),this},getTickLabelPadding(){return this.getDirection()===e.UIDirections.Up?this.getPadding().top:this.getDirection()===e.UIDirections.Down?this.getPadding().bottom:this.getDirection()===e.UIDirections.Right?this.getPadding().right:this.getPadding().left},Wh:void 0,qe(){l.Wh=this.Wh,u()}});return d.eo="other",d.setPointerLength(n.xAxisNumericTicks.majorTickStyle.getTickLength()).setTickLabelPadding(n.xAxisNumericTicks.majorTickStyle.getTickPadding()).setTextFont(n.uiTextFont).setTextFillStyle(n.uiTextFillStyle).setBackground((t=>t.setFillStyle(n.uiBackgroundFillStyle).setStrokeStyle(n.uiBackgroundStrokeStyle))),Xn(d,n,o),this.applyStylers(d,n)}};class yh extends On{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.sf=!1,this.ef=V,this.hf=V,this.getOn=()=>this.sf,this.hf=n.uiButtonFillStyleHidden||n.uiButtonFillStyle,this.rf=new Jo(this.Hs,this.renderingScale,this.scale,qt,n).setShape(s).setFillStyle(this.hf),this.R.$t(this.rf)}Bn(){return[...this.rf.Bn()]}setOn(t){return this.sf=t,this.rf.setFillStyle(t?this.ef:this.hf),this.Hs.Bs(),this}setOffFillStyle(t){return this.hf="function"==typeof t?t(this.hf):t,this.sf||this.rf.setFillStyle(this.hf),this}getOffFillStyle(){return this.hf}setSize(t){return this.rf.fitTo("number"==typeof t?l(t,t):t),this}getSize(){return this.rf.getSize()}setOnFillStyle(t){return this.ef="function"==typeof t?t(this.ef):t,this.sf&&this.rf.setFillStyle(this.ef),this}getOnFillStyle(){return this.ef}setButtonShape(t){return this.rf.setShape(t),this.Hs.Bs(),this}getButtonShape(){return this.rf.getShape()}qe(){return super.qe(),this.rf.zn=this.zn,this.rf.setVisible(this.getVisible()).setPosition(this.getPosition(l(0,0),e.UISpace.Content)).qe(),this}Dr(){const t=this.rf.Dr().getSize();return this.setContentSize(t),super.Dr()}dispose(){return super.dispose(),this.rf.dispose(),this}setPointerEvents(t){return this.rf.setPointerEvents(t),this}getPointerEvents(){return this.rf.getPointerEvents()}setHighlight(t){const e=He(t);return this.rf.setHighlight(e),this.R.O("highlightchange",{highlight:e}),this.Hs.Bs(),this}getHighlight(){return this.rf.getHighlight()}}const ph={...Hn,uiElement:yh,buttonShape:e.PointShape.Circle,setButtonShape(t){return{...this,buttonShape:t}},so(t,e,i,s,r,n){const o=this.applyStylers(new this.uiElement(t,e,i,this.buttonShape,s,r),r);return Xn(o,r,n),o}},mh={...Hn,...Gn,background:Wo,buttonBuilder:ph,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},so(t,i,s,r,n,o){var h;const a=new th(t,i,s,this.background,r,n),l=a.addElement(nh);l.addGap();const c=l.addElement(this.buttonBuilder);l.addGap();const u=a.addElement(nh);u.addGap();const d=u.addElement(Yo);u.addGap(),a.addGap();const f=Object.assign(a,hh,{setTextLabel:d},lh,{stylableTexts:[d]},ch,{button:c},uh);let g;return f.addEventListener("click",(()=>{f.getLocked()||f.setOn(!f.getOn())})),f.addEventListener("pointerenter",(()=>{f.setHighlight(!0)})),f.addEventListener("pointerleave",(()=>{f.setHighlight(!1)})),f.setMouseStyle(e.MouseStyles.Point),f.setTextFillStyleHidden(n.uiTextFillStyleHidden||n.uiTextFillStyle),f.addEventListener("switch",(t=>{t.state?g&&f.setTextFillStyle(g):(g=f.getTextFillStyle(),f.setTextFillStyle(f.getTextFillStyleHidden()))})),f.setPadding({left:null!==(h=n.uiTextPadding)&&void 0!==h?h:5}),Xn(f,n,o),this.applyStylers(f,n)}}.addStyler(Un).addStyler(Nn);class xh extends On{constructor(t,e,i,s,r,n){var o,h,a,l,c,u;super(t,e,i,s,r),this.nf=[],this.af="",this.lf=(t,e)=>void 0!==t.label?t.label:e.percentageValues?`${(100*t.value).toFixed(0)}%`:es(t.value,e.min,e.max),this.cf=0,this.uf=!1,this.df=n,this.Cd=t.Ke(e).Qe(Ot),this.R.Gt(this.Cd),this.ff=t.mn(e).Je(r.uiTextFillStyle).Sr(r.uiTextFont).setPointerEvents(!1),this.R.Gt(this.ff),this.Af=null!==(o=r.legendLUTLabelMargin)&&void 0!==o?o:7,this.gf=null!==(h=r.legendLUTUnitLabelMargin)&&void 0!==h?h:7,"vertical"===n?(this.pf=null!==(a=r.legendLUTLengthVertical)&&void 0!==a?a:140,this.vf=null!==(l=r.legendLUTThicknessVertical)&&void 0!==l?l:25):(this.pf=null!==(c=r.legendLUTLengthHorizontal)&&void 0!==c?c:160,this.vf=null!==(u=r.legendLUTThicknessHorizontal)&&void 0!==u?u:15)}Bn(){return[this.Cd,this.ff]}yf(t){this.mf=t;const e=Ah(t,"vertical"===this.df?0:90,this.uf);return this.Cd.Je(e),this.Hs.Bs(),this}Us(){return this.mf}xf(t){return this.pf=t,this.Hs.Bs(),this}Sf(){return this.pf}bf(t){return this.vf=t,this.Hs.Bs(),this}Mf(){return this.vf}wf(t){return this.af=t,this.Hs.Bs(),this}_f(){return this.af}Cf(t){return this.lf=t,this.Hs.Bs(),this}setLUTDisplayProportionalSteps(t){if(this.uf=t,this.mf){const t=Ah(this.mf,"vertical"===this.df?0:90,this.uf);this.Cd.Je(t)}return this.Hs.Bs(),this}getLUTDisplayProportionalSteps(){return this.uf}setFillStyle(t){return this.ff.Je(t),this.Hs.Bs(),this}getFillStyle(){return this.ff.pr()}setFont(t){return this.ff.Sr(t),this.Hs.Bs(),this}getFont(){return this.ff.mr()}setTextRotation(t){return this.cf=t,this.ff.br(t),this.Hs.Bs(),this}getTextRotation(){return this.ff.Mr()}qe(){var t,i,s,r;if(super.qe(),this.ft||!this.getVisible())return this;const n=this.mf;if(n){const o=this.renderingScale.rs(),h=n.min,a=n.max;if("vertical"===this.df){const s=this.getPosition({x:-1,y:-1},e.UISpace.Content),r=Li(s,{x:this.Cd.Mi().x+this.Af*o.x,y:0}),l={x:r.x,y:r.y+(this.af.length>0?this.gf*o.y+this.ff.Mi().y:0)+.5*((null===(t=this.nf[0])||void 0===t?void 0:t.Mi().y)||0)},c={x:l.x,y:this.getPosition({x:-1,y:1},e.UISpace.Content).y-.5*((null===(i=this.nf[this.nf.length-1])||void 0===i?void 0:i.Mi().y)||0)};this.Cd.th({x:s.x,y:l.y}),this.ff.Ul({x:-1,y:-1}).th(r),n.getSteps().forEach(((t,e)=>{const i=Ai(l,c,this.uf?!0===n.getInterpolation()?(t.value-h)/(a-h):.9*(t.value-h)/(a-h):!0===n.getInterpolation()?e/(n.getSteps().length-1):e/n.getSteps().length);this.nf[e].Ul({x:-1,y:0}).th(i)}))}else{const t=this.getPosition({x:-1,y:-1},e.UISpace.Content),i=this.getPosition({x:1,y:1},e.UISpace.Content),l=this.nf.reduce(((t,e)=>Math.max(t,e.Mi().y)),0),c=Li(t,{x:.5*((null===(s=this.nf[0])||void 0===s?void 0:s.Mi().x)||0),y:l}),u={x:i.x,y:c.y},d={x:u.x-(.5*((null===(r=this.nf[this.nf.length-1])||void 0===r?void 0:r.Mi().x)||0)+(this.af.length>0?this.gf*o.x+this.ff.Mi().x:0)),y:c.y},f={x:c.x,y:c.y+this.Af*o.y};this.Cd.th(f),this.ff.Ul({x:1,y:1}).th(u),n.getSteps().forEach(((t,e)=>{const i=Ai(c,d,this.uf?!0===n.getInterpolation()?(t.value-h)/(a-h):.9*(t.value-h)/(a-h):!0===n.getInterpolation()?e/(n.getSteps().length-1):e/n.getSteps().length);this.nf[e].Ul({x:0,y:1}).th(i)}))}}return this}Dr(){if(this.mf&&this.getVisible()){const t=this.mf.getSteps();for(let e=this.nf.length;e<t.length;e+=1){const t=this.Hs.mn(this.renderingScale).setPointerEvents(!1);this.nf.push(t),this.R.Gt(t)}for(let e=0;e<t.length;e+=1)this.nf[e].Je(this.ff.pr()).Sr(this.ff.mr()).jr(this.lf(t[e],this.mf)).br(this.cf);for(let e=t.length;e<this.nf.length;e+=1)this.nf[e].dispose();if(this.nf.length=t.length,this.ff.jr(this.af),"vertical"===this.df){const t=this.vf,e=this.pf;this.Cd.J({x:t*this.renderingScale.x.getPixelSize(),y:e*this.renderingScale.y.getPixelSize()});const i=t+Math.max(this.nf.reduce(((t,e)=>Math.max(t,e.Dr().Pu().x)),0),this.ff.Dr().Pu().x),s=(this.af.length>0?this.gf+this.ff.Dr().Pu().y:0)+e+.5*this.nf[0].Dr().Pu().y+.5*this.nf[this.nf.length-1].Dr().Pu().y;this.setContentSize({x:i,y:s})}else{const t=this.pf,e=this.vf;this.Cd.J({x:t*this.renderingScale.x.getPixelSize(),y:e*this.renderingScale.y.getPixelSize()});const i=Math.max(this.af.length>0?this.gf+this.ff.Dr().Pu().x:0,.5*this.nf[this.nf.length-1].Dr().Pu().x),s=t+.5*this.nf[0].Dr().Pu().x+i,r=e+this.Af+this.nf.reduce(((t,e)=>Math.max(t,e.Dr().Pu().y)),0);this.setContentSize({x:s,y:r})}}else this.nf.forEach((t=>t.dispose())),this.nf.length=0,this.ff.setVisible(!1),this.Cd.setVisible(!1),this.setContentSize({x:0,y:0});return super.Dr()}dispose(){return super.dispose(),this.Cd.dispose(),this.nf.forEach(Jt),this.ff.dispose(),this}setPointerEvents(t){return this.Cd.setPointerEvents(t),this}getPointerEvents(){return this.Cd.getPointerEvents()}}const Sh={lutElement:{},setLUT(t){return this.lutElement.yf(t),this},getLUT(){return this.lutElement.Us()},setLUTLength(t){return this.lutElement.xf(t),this},getLUTLength(){return this.lutElement.Sf()},setLUTThickness(t){return this.lutElement.bf(t),this},getLUTThickness(){return this.lutElement.Mf()},setLookUpUnit(t){return this.lutElement.wf(t),this},getLookUpUnit(){return this.lutElement._f()},setLUTStepValueFormatter(t){return this.lutElement.Cf(t),this},setLUTDisplayProportionalSteps(t){return this.lutElement.setLUTDisplayProportionalSteps(t),this},getLUTDisplayProportionalSteps(){return this.lutElement.getLUTDisplayProportionalSteps()}},vh={...Hn,...Gn,background:Wo,alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},so(t,e,i,s,r,n){const o=new eh(t,e,i,this.background,s,r),h=o.addElement({so:()=>new xh(t,e,i,qt,r,this.alignment)}),a=Object.assign(o,lh,{stylableTexts:[h]},Sh,{lutElement:h});return Xn(a,r,n),this.applyStylers(a,r)}}.addStyler(Un),Ah=(t,e,i)=>{const s=t.getSteps(),r=t.min,n=t.max-r;if(!0===t.getInterpolation())return new tt({angle:e,stops:s.map(((e,o)=>({offset:i?(e.value-r)/n:o/(s.length-1),color:e.color||t.color})))});const o=[];for(let e=0;e<s.length;e+=1){const h=s[e];o.push({offset:i?.9*(h.value-r)/n:e/s.length,color:h.color||t.color});const a=e<s.length-1?s[e+1]:void 0;o.push({offset:i?a?.9*(a.value-r)/n:1:a?(e+1)/s.length:1,color:h.color||t.color})}return new tt({angle:e,stops:o})},bh={...Hn,...Gn,background:Wo,buttonBuilder:ph,setButtonShape(t){return{...this,buttonBuilder:this.buttonBuilder.setButtonShape(t)}},alignment:"horizontal",setAlignment(t){return{...this,alignment:t}},so(t,i,s,r,n){var o,h;const a=new eh(t,i,s,this.background,r,n),l=a.addElement(oh),c=l.addElement(nh);c.addGap();const u=c.addElement(this.buttonBuilder);c.addGap();const d=l.addElement(nh);d.addGap();const f=d.addElement(Yo);d.addGap();const g=a.addElement({so:()=>new xh(t,i,s,qt,n,this.alignment)});"vertical"===this.alignment&&g.setMargin({left:n.uiButtonSize+(null!==(o=n.uiTextPadding)&&void 0!==o?o:5)});const y=Object.assign(a,hh,{setTextLabel:f},lh,{stylableTexts:[f,g]},ah("LUTText",[g]),ch,{button:u},Sh,{lutElement:g},uh);let p;return y.addEventListener("click",(()=>{y.getLocked()||y.setOn(!y.getOn())})),y.addEventListener("pointerenter",(()=>{y.setHighlight(!0)})),y.addEventListener("pointerleave",(()=>{y.setHighlight(!1)})),y.setMouseStyle(e.MouseStyles.Point),y.setTextFillStyleHidden(n.uiTextFillStyleHidden||n.uiTextFillStyle),y.addEventListener("switch",(t=>{t.state?p&&y.setTextFillStyle(p):(p=y.getTextFillStyle(),y.setTextFillStyle(y.getTextFillStyleHidden()))})),y.setPadding({left:null!==(h=n.uiTextPadding)&&void 0!==h?h:5}),this.applyStylers(y,n)}}.addStyler(Un).addStyler(Nn),Ch=t=>"attach"in t,Mh={alignment:null,title:null,entryStylers:null,legendBoxDisposed:null,entries:[],add(t,e){const i=!e||"object"!=typeof e||void 0===e.toggleVisibilityOnClick||e.toggleVisibilityOnClick,s=null==e?void 0:e.matchStyleExactly,r=e&&"object"==typeof e&&void 0!==e.builder?e.builder:void 0;return this.legendBoxDisposed()||(t instanceof Oa?this.addChart(t,i,r,s):Ch(t)?this.addAttachable(t,i,r,s):t&&this.addDashboard(t,i,r,s)),this},addAttachable(t,e,i,s){const r=t.Us&&t.Us(),n=t.$s&&t.$s(),o=void 0!==s&&s;let h=i;if(!h){let t=r?bh.setAlignment(this.alignment):mh;void 0!==n&&(t=t.setButtonShape(n)),h=t}const a=this.addElement(h);if(r&&"setLUT"in a){a.setLUT(r.lut);const t=r.lut.getUnits(),e=r.lookUpProperty,i=t.length>0?t:"x"===e?"x":"y"===e?"y":"z"===e?"z":"";a.setLookUpUnit(i)}this.entryStylers.forEach((t=>t(a)));const l={entry:a,component:t};return this.entries.push(l),a.addEventListener("dispose",(()=>{const t=this.entries.indexOf(l);t>=0&&this.entries.splice(t,1)})),t.attach(a,e,o),e||a.setLocked(!0),this},addChart(t,e,i,s){return t.kf().forEach((t=>this.addAttachable(t,e,i,s))),this},addDashboard(t,e,i,s){return t.getCells().filter((t=>t.panel instanceof Oa)).forEach((t=>this.addChart(t.panel,e,i,s))),this},setTitle(t){return this.title.setText(t),this},getTitle(){return this.title.getText()},setTitleFillStyle(t){return this.title.setTextFillStyle(t),this},getTitleFillStyle(){return this.title.getTextFillStyle()},setTitleFont(t){return this.title.setTextFont(t),this},getTitleFont(){return this.title.getTextFont()},setTitleRotation(t){return this.title.setTextRotation(t),this},getTitleRotation(){return this.title.getTextRotation()},setEntries(t){return this.entries.slice().forEach((e=>t(e.entry,e.component))),this}},Th={alignment:"vertical",layoutBuilder:nh,setAlignment(t){return{...this,alignment:t,layoutBuilder:"horizontal"===t?oh:nh}},getAlignment(){return this.alignment},titleBuilder:fh,styleTitle(t){return{...this,titleBuilder:this.titleBuilder.addStyler(t)}},entryStylers:[],styleEntries(t){return{...this,entryStylers:[...this.entryStylers,t]}}},Eh={...Hn,...Gn,...Th,background:Wo,so(t,e,i,s,r,n){const o=this.layoutBuilder.setBackground(this.background).so(t,e,i,s,r,!1);let h=Object.assign(o,Mh,{alignment:this.alignment,entryStylers:this.entryStylers,legendBoxDisposed:()=>o.ft});h.entries=[];const a=h.addElement("horizontal"===this.alignment?nh:oh),l=a.addElement(this.titleBuilder).setText("Legend").setTextFillStyle(r.legendTitleFillStyle).setTextFont(r.legendTitleFont);return a.addGap(),h=Object.assign(h,{title:l}),"horizontal"===this.alignment&&l.setMargin({right:6}),Xn(h,r,n),this.applyStylers(h,r)}}.addStyler(((t,e)=>{var i;return t.setPadding(null!==(i=e.legendPadding)&&void 0!==i?i:5).setBackground((t=>{e.legendBorderRadius&&Ts(t)&&t.setCornerRadius(e.legendBorderRadius)}))}));class wh extends On{constructor(t,i,s,r,n){super(t,i,s,r,n),this.Tf=10,this.Ff=e.UIDirections.Up,this.If=0,this.eo="major",this.cl=t.mn(this.renderingScale).vn(qe).yn(qe),this.R.Gt(this.cl),this.oh=t.uh(this.renderingScale),this.R.Gt(this.oh)}Bn(){return[this.cl]}qe(){if(super.qe(),this.ft)return this;const t=ot(this.getPosition(),this.scale,this.renderingScale),i=this.renderingScale.Li(t,{x:this.Ff===e.UIDirections.Right?-this.Tf:this.Ff===e.UIDirections.Left?this.Tf:0,y:this.Ff===e.UIDirections.Up?-this.Tf:this.Ff===e.UIDirections.Down?this.Tf:0}),s=this.renderingScale.Li(i,{x:this.Ff===e.UIDirections.Right?-this.If:this.Ff===e.UIDirections.Left?this.If:0,y:this.Ff===e.UIDirections.Up?-this.If:this.Ff===e.UIDirections.Down?this.If:0});return this.oh.fh(t).dh(i),this.cl.th(s).Ul(this.Ff===e.UIDirections.Up?{x:0,y:1}:this.Ff===e.UIDirections.Down?{x:0,y:-1}:this.Ff===e.UIDirections.Right?{x:1,y:0}:{x:-1,y:0}),this.cl.Wh=this.Wh,this}Dr(){const t=this.oh.ro().getThickness();return this.size=this.Ff===e.UIDirections.Left||this.Ff===e.UIDirections.Right?{x:this.Tf+this.If+this.cl.Dr().Pu().x,y:t}:{y:this.Tf+this.If+this.cl.Dr().Pu().y,x:t},super.Dr()}dispose(){return super.dispose(),this.cl.dispose(),this.oh.dispose(),this}setVisible(t){return super.setVisible(t),this.cl.setVisible(t),this.oh.setVisible(t),this}setPointerEvents(t){return this.cl.setPointerEvents(t),this.oh.setPointerEvents(t),this}getPointerEvents(){return this.cl.getPointerEvents()}getText(){return this.cl.Jr()}setTextFillStyle(t){return this.cl.Je(t),this.Hs.Bs(),this}getTextFillStyle(){return this.cl.pr()}setTextFont(t){return this.cl.Sr(t),this}setTextRotation(t){return this.cl.br(t),this}getTextRotation(){return this.cl.Mr()}getTextFont(){return this.cl.mr()}setText(t){return this.cl.jr(t),this.Hs.Bs(),this}setDirection(t){return this.Ff=t,this.Hs.Bs(),this}getDirection(){return this.Ff}setPointerLength(t){return this.Tf=t,this.Hs.Bs(),this}getPointerLength(){return this.Tf}setTickLabelPadding(t){return this.If=t,this.Hs.Bs(),this}getTickLabelPadding(){return this.If}setTickStyle(t){return this.oh.ah(t),this.Hs.Bs(),this}getTickStyle(){return this.oh.ro()}}const Bh={...Hn,direction:e.UIDirections.Up,setDirection(t){return this.direction=t,this},so(t,e,i,s,r,n){const o=this.direction,h=new wh(t,e,i,s,r);return Xn(h,r,n),h.setDirection(o),this.applyStylers(h,r)}}.addStyler(Un),kh=Bh.addStyler(((t,e)=>(t.eo="major",t.setPointerLength(e.xAxisNumericTicks.majorTickStyle.tickLength).setTickLabelPadding(e.xAxisNumericTicks.majorTickStyle.tickPadding).setTickStyle(e.xAxisNumericTicks.majorTickStyle.tickStyle).setTextFont(e.xAxisNumericTicks.majorTickStyle.labelFont).setTextFillStyle(e.xAxisNumericTicks.majorTickStyle.labelFillStyle)))),Rh=Bh.addStyler(((t,e)=>(t.eo="minor",t.setPointerLength(e.xAxisNumericTicks.minorTickStyle.tickLength).setTickLabelPadding(e.xAxisNumericTicks.minorTickStyle.tickPadding).setTickStyle(e.xAxisNumericTicks.minorTickStyle.tickStyle).setTextFont(e.xAxisNumericTicks.minorTickStyle.labelFont).setTextFillStyle(e.xAxisNumericTicks.minorTickStyle.labelFillStyle)))),Fh=mh.addStyler((t=>t.addEventListener("switch",(e=>!0===e.state?setTimeout((()=>t.setOn(!1)),300):void 0)))),Ih=Eh.setAlignment("horizontal"),Oh=Eh.setAlignment("vertical"),Lh={TextBox:fh,CheckBox:mh,ButtonBox:Fh,PointableTextBox:gh,AxisTickMajor:kh,AxisTickMinor:Rh,LUTRange:vh},Dh={HorizontalLegendBox:Ih,VerticalLegendBox:Oh};class Ph extends En{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Pf=r}}class Vh extends Tn{constructor(t,i,s,r,n,o,h,a,l,c,u,d,f,g,y,p){var m,x,S;super(c,l,h,g,y,{numeric:l.getWidth({x:g.xAxisNumericTicks,y:g.yAxisNumericTicks}),datetime:l.getWidth({x:g.xAxisDateTimeTicks,y:g.yAxisDateTimeTicks}),time:l.getWidth({x:g.xAxisTimeTicks,y:g.yAxisTimeTicks})},p),this.Lf=new Map,this.Bf=void 0,this.Df=0,this.Ef=[],this.Rf=[],this.zf=!0,this.Of=[],this.Vf=t=>{const e=this.Rf.indexOf(t);e>=0&&this.Rf.splice(e,1)},this.Nf=t=>(this.Rf.indexOf(t)<0&&this.Rf.push(t),this.Vf),this.Gf="center",this.Uf=!0,this.$f=Ce(this.Of),this.pf={relative:1},this.Yf=0,this.Hf=0,this.Xf=(t,e)=>e.getAllocatesAxisSpace()?Math.max(t,e.update().oo()):t,this.Wf=t=>{const e=this.Ef.indexOf(t);-1!==e&&this.Ef.splice(e,1)},this.us=e.HighlightModes.onHover,this.R=new Ct,this.hh={},this.isX=this.er.getWidth({x:!0,y:!1}),this.isY=this.er.getHeight({x:!0,y:!1}),this.jf=t,this.Zf=i,this.Qf=r,this.Jf=n,this.chart=c,this.Kf=d,this.qf=s,this.ps=o,"logarithmic"===p.type&&this.chart.St.Ma(zn.To),this.vr=zh,f(this,this.Nf),h.tA=this,this.iA=u,this.sA=this.iA>50?1:-1,this.eA=(S=this.er.toPoint(0,-this.sA),Math.abs(S.x)>=Math.abs(S.y)?S.x>=0?e.UIDirections.Right:e.UIDirections.Left:S.y>=0?e.UIDirections.Up:e.UIDirections.Down),this.hA=a,this.rA=this.ct instanceof rs?(new hs).Ji(this.er.toVec2(this.ct,this.hA)):(new as).Ji(this.er.toVec2(this.ct,this.hA)),this.nA=this.chart.oA,this.aA=(new hs).Ji(this.er.toVec2(this.er.getWidth(this.nA),this.hA)),this.lA=this.Zf.uh(this.rA).setPointerEvents(!1),this.cA=this.qf.Ke(this.nA).Je(l.getWidth({x:g.xAxisOverlayStyle,y:g.yAxisOverlayStyle})).Qe(Ot).Rt(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.uA=this.qf.Ke(this.nA).Je(l.getWidth({x:g.xAxisZoomingBandFillStyle,y:g.yAxisZoomingBandFillStyle})).Qe(l.getWidth({x:g.xAxisZoomingBandStrokeStyle,y:g.yAxisZoomingBandStrokeStyle})).Rt(g.highlightColorOffsetAxisOverlay||g.highlightColorOffset),this.jh=this.qf.mn(this.rA).setPointerEvents(!1).br(this.er.getTitleTextRotation(this.sA)).yn(qe).vn(qe),this.chart.St.Ms.bs(this.cA,(t=>this.cA.Dt(t)),{animationEnabled:this.Bh}),this.R.Gt(this.cA),this.lA.ah(l.getWidth({x:g.xAxisStrokeStyle,y:g.yAxisStrokeStyle})),this.jh.Je(l.getWidth({x:g.xAxisTitleFillStyle,y:g.yAxisTitleFillStyle})).Sr(l.getWidth({x:g.xAxisTitleFont,y:g.yAxisTitleFont})),this.vs=o.ys(this,{}),this.wr=this.vs.dA([this.jh]).Ls(g.effectsText),this.fA=null!==(m=l.getWidth({x:g.xAxisMarginAfterTicks,y:g.yAxisMarginAfterTicks}))&&void 0!==m?m:7,this.AA=null!==(x=l.getWidth({x:g.xAxisMarginAfterTitle,y:g.yAxisMarginAfterTitle}))&&void 0!==x?x:7}setHighlight(t){return this.chart.St.Ms.zs(this.cA,t),this.R.O("highlightchange",{highlight:He(t)}),this}getHighlight(){return this.chart.St.Ms.ks(this)}gn(){return this.Rh}pn(){return void 0!==this.Tr}setKeepTickLabelsInAxisBounds(t){return this.Uf=t,this.chart.St.Bs(),this}getKeepTickLabelsInAxisBounds(){return this.Uf}setTickStrategy(t,e){return super.ar(t,e)}getTickStrategy(){return this.Fh}addBand(t=!0){const e=t?this.Jf:this.Qf,i=new sn(e,this.chart,this.$f,this,this.rA,this.er,this.Ct,this.ps);return this.Of.push(i),i}addConstantLine(t=!0){const e=t?this.Jf:this.Qf,i=new rn(e,this.chart,this.$f,this,this.rA,this.er,this.Ct,this.ps);return this.Of.push(i),i}gA(t){this.Of.forEach(t)}pA(t){return this.Of.map(t)}getHighlighters(){return this.Of}setThickness(t){return"number"==typeof t?(this.vA=t,this.yA=t):"object"==typeof t?(this.vA=t.min,this.yA=t.max):void 0===t&&(this.vA=void 0,this.yA=void 0),this.Er=void 0,this.chart.St.Bs(),this}getThickness(){return{min:this.vA,max:this.yA}}mA(){return this.Rf}Or(t){return{}}Ur(t,e,i,s,r){const n=e.kh;return{keyValue:t,tickLevel:e,labelText:i,labelPosition:this.er.toPoint(t,0),labelAlignment:this.er.toPoint(n.getLabelAlignment(),-this.sA),labelOffset:{x:0,y:0},labelRotation:e.kh.labelRotation}}Hr(t,e,i){if(!this.At)return{xA:0,SA:0,bA:0,ticksInfo:e,updatedTicks:i};const s=this.jh&&this.jh.Jr().length>0&&this.getTitleFillStyle()!==V,r=this.er.getHeight(s?this.jh.Dr().Pu():{x:0,y:0})+(s?this.AA:0);let n=0;this.Ih.forEach(((t,e)=>{const i=e.kh.tickLength+e.kh.tickPadding;t.forEach((t=>{if(!t.Lr.getVisible()||_(t.Lr.pr()))return void(n=Math.max(n,i));const e=i+this.er.getHeight(t.Lr.Dr().Pu());n=Math.max(n,e)}))}));const o=this.Ef.reduce(this.Xf,0);n=Math.max(n,o),n+=this.fA;const h=Kt(r+n,void 0!==this.vA?this.vA:0,void 0!==this.yA?this.yA:hi);return this.Df=h,{xA:n,SA:r,bA:h,ticksInfo:e,updatedTicks:i}}Zr(t,e){return new Ph(e,t,this.Zf,this.rA,this.rA)}Qh(){return this.rA}_r(){if(this.Lf){for(const t of this.Lf)t[1].grid.dispose(),t[1].tick.dispose();this.Lf.clear()}super._r()}un(t,e){return"linear"===this.rr.type||"linear-highPrecision"===this.rr.type?Ss(t,e,this.ct):vs(t,e,this.ct)}MA(t,e){return e instanceof rs?Ss:vs}An(t,e,i){if("logarithmic"!==this.rr.type){const s=this.ct.Qi(Math.abs(e-t));return{start:t+Math.sign(t-e)*i.start*s,end:e+Math.sign(e-t)*i.end*s}}const s=this.ct,r={start:s.$,end:s.Y};s.j(t,e).Fi();const n={start:s.Li(t,i.start*Math.sign(t-e)),end:s.Li(e,i.end*Math.sign(e-t))};return s.j(r.start,r.end).Fi(),n}Br(t){var e,i;const s=this.Rr(),r=s.min,n=s.max,o=this.Ih.size>0,h=(null===(e=this.Er)||void 0===e?void 0:e.physicalAxisSize)!==t.physicalAxisSize,a=(null===(i=this.Er)||void 0===i?void 0:i.min)!==r||this.Er.max!==n;return!(!o||h||a||t.anyPreviousAxisUpdated)}qe(t){const i=this.getVisible()&&t.wA>0,s=this.ct.getInnerStart()<this.ct.getInnerEnd()?this.ct.getInnerStart():this.ct.getInnerEnd(),r=this.ct.getInnerEnd()>this.ct.getInnerStart()?this.ct.getInnerEnd():this.ct.getInnerStart();i||this._r();const n=this.lA.ro().getThickness()*this.sA/2,o=this.hA.getInnerInterval(),h=this.iA/100*o,a=h+t._A,l=o*this.sA,c=a+n;if("Empty"!==this.Fh&&i){const e=this.ct.mi(),i=this.ct.xi(),s=Math.min(e,i),r=Math.max(e,i);for(const[e,i]of this.Ih){let n=this.Lf.get(e);if(!n)if(e.ph)n={grid:this.jf[0].CA(this.rA).setPointerEvents(!1),tick:this.jf[0].CA(this.rA).setPointerEvents(!1)};else if("kA"in e){const t=Array.from(this.Ih.keys()).filter((t=>"kA"in t)).reverse().indexOf(e),i=this.jf[t];if(!i)throw new Error("Not enough tick layers. This is an internal LCJS error - if you see this, please contact LightningChart support.");n={grid:i.CA(this.rA).setPointerEvents(!1),tick:i.CA(this.rA).setPointerEvents(!1)}}if(!n)continue;n.grid.ii(),n.tick.ii();const o=e.kh,u=h-l*o.getGridStrokeLength(),d=c+o.getTickLength()*this.sA,f=d+o.getTickPadding()*this.sA;for(const[e,o]of i){const e=t.ticksInfo.get(o);if(!e)continue;const i={start:this.er.toPoint(o.M,a),end:this.er.toPoint(o.M,u)},h={start:this.er.toPoint(o.M,c),end:this.er.toPoint(o.M,d)};let l=0;if(this.Uf){const t=o.Lr.Pu(),i=this.ct.ot(e.keyValue)+this.er.getWidth(e.labelOffset)+(-.5*this.er.getWidth(e.labelAlignment)-.5)*this.er.getWidth(t),n=i+this.er.getWidth(t);l=n>r?r-n:i<s?s-i:0}o.Lr.th(this.er.toPoint(this.ct.Li(o.M,l),f)).Ul(e.labelAlignment).br(e.labelRotation),n.grid.Oo().TA(i.start,i.end),n.tick.Oo().TA(h.start,h.end)}n.grid.ah(e.kh.getGridStrokeStyle()),n.tick.ah(e.kh.getTickStyle()),this.Lf.set(e,n)}}const u=c,d=u+this.sA*t.bA,f={start:this.er.toVec2(this.ct.getInnerStart(),u),end:this.er.toVec2(this.ct.getInnerEnd(),d)},g=ot(f.start,this.rA,this.nA),y=ot(f.end,this.rA,this.nA);this.lA.fh(this.er.toPoint(s,a)).dh(this.er.toPoint(r,a)).setVisible(i);const p=a+t.xA*this.sA;if(this.jh.th(this.er.toPoint(this.er.getWidth(ot("center"===this.Gf?Oi(Li(g,y),.5):"start"===this.Gf?g:y,this.nA,this.rA)),p)).Ul(this.er.toPoint("center"===this.Gf?0:"start"===this.Gf?-1:1,-1*this.sA)).setVisible(i),this.Bf){const e=this.iA/100*o+t._A,i=-this.sA*o-t._A,s={start:this.er.toVec2(this.Bf.min,c+this.sA*this.Df),end:this.er.toVec2(this.Bf.max,e+i)},r=ot(s.start,this.rA,this.nA),n=ot(s.end,this.rA,this.nA);this.uA.th(r).J(Di(n,r)).setVisible(!0)}else this.uA.setVisible(!1);this.cA.th(g).J(Di(y,g)).setVisible(i);for(const s of this.Ef)if(s.update().plot(i,a,l,t._A,c),this.qf.St.Fu&&s.getVisible()&&s.getMarkerVisible()&&s.io.Wh===e.TextObjectIdentifier.CursorTickMarker){const t=Pn(s.io);this.qf.St.Fu.FA({...t,blacklist:[e.TextObjectIdentifier.CursorResultTable,e.TextObjectIdentifier.CursorTickMarker]})}for(const t of this.Of)t.qe();return{width:Math.abs(y.x-g.x),height:Math.abs(y.y-g.y),left:Math.min(g.x,y.x),right:this.nA.x.getInnerEnd()-Math.max(g.x,y.x),bottom:Math.min(g.y,y.y),top:this.nA.y.getInnerEnd()-Math.max(g.y,y.y)}}setLength(t){return this.pf=t,this.Er=void 0,this.chart.St.Bs(),this}getLength(){return this.pf}setMargins(t,e){return this.Yf=t,this.Hf=e,this.Er=void 0,this.chart.St.Bs(),this}getMargins(){return{start:this.Yf,end:this.Hf}}getStackIndex(){var t,e;return null!==(e=null===(t=[...this.chart.IA,...this.chart.PA,...this.chart.LA,...this.chart.BA].find((t=>t.axis===this)))||void 0===t?void 0:t.iStack)&&void 0!==e?e:0}getParallelIndex(){var t,e;return null!==(e=null===(t=[...this.chart.IA,...this.chart.PA,...this.chart.LA,...this.chart.BA].find((t=>t.axis===this)))||void 0===t?void 0:t.iParallel)&&void 0!==e?e:0}DA(){return this.Df}EA(t,i){i=i||Lh.AxisTickMajor;const s=new _n(this,t?this.jf[0]:this.qf,this.qf,this.ct,this.aA,this.aA,this.er,this.eA,this.Wf,this.Ct,i).setTextFormatter(this.formatValue);return this.Ef.push(s),this.Er=void 0,"other"===s.io.eo&&(s.io.Wh=e.TextObjectIdentifier.CursorTickMarker),s}RA(t,e){const i=-this.er.getWidth(e);this.pan(i)}pan(t,e){var i,s;const r=this.lr,n=this.cr,o=this.ct.Li(r,t),h=this.ct.Li(n,t);this.Fr(o,h,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1});const a=this.yr();if(!1!==(null==e?void 0:e.releaseScrollingAxisIfLiveReached)&&(null===(i=this.Ir)||void 0===i?void 0:i.id)===hn&&this.Dh&&a){const t=this.gh({forStart:o,forEnd:h,allowIntervalLengthChange:!1});t&&(this.cr>this.lr&&this.cr>=t.end||this.cr<this.lr&&this.lr>=t.start)&&this.setStopped(!1)}if(!1!==(null==e?void 0:e.releaseScrollingAxisIfLiveReached)&&(null===(s=this.Ir)||void 0===s?void 0:s.id)===an&&this.Dh&&a){const t=this.gh({forStart:o,forEnd:h,allowIntervalLengthChange:!1});t&&(this.cr<this.lr&&this.cr<=t.end||this.cr>this.lr&&this.lr<=t.start)&&this.setStopped(!1)}}zoom(t,e){const i=this.ct.ot(this.lr),s=this.ct.ot(this.cr),r=this.ct.ot(t),n=Kt((r-i)/(s-i),0,1),o=.2*this.ct.Si(),h=n*o*-e,a=(1-n)*o*e,l=this.ct.Li(this.lr,h),c=this.ct.Li(this.cr,a),u=this.fn();let d=l,f=c;if(void 0!==(null==u?void 0:u.intervalMax)&&Math.abs(f-d)>u.intervalMax){const t=u.intervalMax-Math.abs(f-d);d-=t*n,f+=t*(1-n)}if(void 0!==(null==u?void 0:u.intervalMin)&&Math.abs(f-d)<u.intervalMin){const t=u.intervalMin-Math.abs(f-d);d-=t*n,f+=t*(1-n)}this.Fr(d,f,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}addCustomTick(t){return this.EA(!0,t)}setTitlePosition(t){return this.Gf=t,this.chart.St.Bs(),this}getTitlePosition(){return this.Gf}getUiPosition(){return this.iA}setStrokeStyle(t){return this.lA.ah(t),this.Zf.Bs(),this}getStrokeStyle(){return this.lA.ro()}getOverlayStyle(){return this.cA.pr()}setOverlayStyle(t){return this.cA.Je(t),this.Zf.Bs(),this}setAnimationHighlight(t){return this.chart.St.Ms.Os(this.cA,t),this}getAnimationHighlight(){return this.chart.St.Ms.Vs(this.cA)}getMarginAfterTicks(){return this.fA}setMarginAfterTicks(t){return this.fA=t,this.Er=void 0,this.Zf.Bs(),this}getMarginAfterTitle(){return this.AA}setMarginAfterTitle(t){return this.AA=t,this.Er=void 0,this.Zf.Bs(),this}X(){return this.ct.X(),this}W(){return this.ct.W(),this}dispose(){var t;(null===(t=this.Ir)||void 0===t?void 0:t.dispose)&&this.Ir.dispose({axis:this}),this.lA.dispose(),this.cA.dispose(),this.uA.dispose(),this.jh.dispose(),this.Pr(Jt);for(const t of this.Lf.values())t.grid.dispose(),t.tick.dispose();return this.Rf.slice().forEach(Jt),this.Of.slice().forEach(Jt),this.Kf(this),this.R.O("dispose",{}),this}setVisible(t){this.lA.setVisible(t),this.jh.setVisible(t),this.cA.setVisible(t),this.Pr((e=>{e.Fs(t)}));for(const e of this.Lf.values())e.grid.setVisible(t),e.tick.setVisible(t);return super.setVisible(t),this.Er=void 0,this.chart.St.Bs(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationHighlight(this.Bh),this}setHighlightOnHover(t){return this.us=t?e.HighlightModes.onHover:e.HighlightModes.noHighlighting,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.us!==e.HighlightModes.noHighlighting}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}set draggable(t){this.R.draggable=t}get draggable(){return this.R.draggable}setUserInteractions(t){return this.hh=void 0===t?{pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:{pan:!1,paginate:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1}}:t,this}getUserInteractions(){return this.hh}}var _h;e.AxisXYTitlePositionOptions=void 0,(_h=e.AxisXYTitlePositionOptions||(e.AxisXYTitlePositionOptions={})).Start="start",_h.Center="center",_h.End="end";const zh=t=>t.curEnd>t.curStart?{startMin:t.dataMin,endMax:t.dataMax}:{endMin:t.dataMin,startMax:t.dataMax},Uh={getWidth:t=>t.x,getHeight:t=>t.y,toVec2:(t,e)=>({x:t,y:e}),toPoint:(t,e)=>l(t,e)},Nh={getWidth:t=>t.y,getHeight:t=>t.x,toVec2:(t,e)=>({x:e,y:t}),toPoint:(t,e)=>l(e,t)},Xh=t=>!!(t&&"object"==typeof t&&"x"in t&&t.x instanceof Vh&&"y"in t&&t.y instanceof Vh),Hh=s.Record({type:"tick-style",gridStrokeLength:1,gridStrokeStyle:new er,tickLength:7,tickStyle:new er,tickPadding:0,labelFont:new Hs,labelFillStyle:new N,labelAlignment:0,labelRotation:0,labelShadow:void 0});class Gh extends Hh{constructor(t){super(t)}setGridStrokeLength(t){return this.set("gridStrokeLength",t)}getGridStrokeLength(){return this.get("gridStrokeLength")}setGridStrokeStyle(t){return this.set("gridStrokeStyle","function"==typeof t?t(this.get("gridStrokeStyle")):t)}getGridStrokeStyle(){return this.get("gridStrokeStyle")}setTickLength(t){return this.set("tickLength",t)}getTickLength(){return this.get("tickLength")}setTickStyle(t){return this.set("tickStyle","function"==typeof t?t(this.get("tickStyle")):t)}getTickStyle(){return this.get("tickStyle")}setTickPadding(t){return this.set("tickPadding",t)}getTickPadding(){return this.get("tickPadding")}setLabelFillStyle(t){return this.set("labelFillStyle","function"==typeof t?t(this.get("labelFillStyle")):t)}getLabelFillStyle(){return this.get("labelFillStyle")}setLabelShadow(t){return this.set("labelShadow",t)}getLabelShadow(){return this.get("labelShadow")}setLabelFont(t){return this.set("labelFont","function"==typeof t?t(this.get("labelFont")):t)}getLabelFont(){return this.get("labelFont")}setLabelAlignment(t){return this.set("labelAlignment",t)}getLabelAlignment(){return this.get("labelAlignment")}setLabelRotation(t){return this.set("labelRotation",t)}getLabelRotation(){return this.get("labelRotation")}}const Yh=t=>!(!t||"object"!=typeof t||!("type"in t)||"tick-style"!==t.type),Wh=new Gh({labelFillStyle:V,gridStrokeStyle:Ot,tickStyle:Ot}),jh=t=>Yh(t)&&_(t.labelFillStyle)&&Lt(t.gridStrokeStyle)&&Lt(t.tickStyle),$h=1e6,Qh=s.Record({type:"time-ticks",cursorFormatter:void 0,timeOrigin:void 0,majorTickStyle:new Gh,minorTickStyle:new Gh,majorFormattingFunction:void 0,minorFormattingFunction:void 0}),Jh=36e5,qh=6e4,Zh=1e3,Kh=1e-6,ta=(t,e)=>{const i=e-t;return i>=864e5?"MajorHours12":i>=Jh?"MajorHours":i>=6e5?"MajorMinutes15":i>=9e4?"MajorMinutes":i>=10500?"MajorSeconds15":i>=Zh?"MajorSeconds":i>=100?"MajorMilliseconds100":i>=10?"MajorMilliseconds10":i>=1?"MajorMilliseconds":i>=.1?"MajorMicroseconds100":i>=.01?"MajorMicroseconds10":i>=.001?"MajorMicroseconds":i<=.001?"MajorNanoseconds100":"Unknown"},ea={hhmmss:t=>{let e=Math.abs(t);const i=t>=0?"":"-",s=Math.floor(e/Jh);e%=Jh;const r=Math.floor(e/qh);e%=qh;const n=Math.floor(e/Zh);return`${i}${Pe(s,2)}:${Pe(r,2)}:${Pe(n,2)}`},hhmmssmmm:t=>{let e=Math.abs(t);const i=t>=0?"":"-",s=Math.floor(e/Jh);e%=Jh;const r=Math.floor(e/qh);e%=qh;const n=Math.floor(e/Zh);e%=Zh;const o=Math.floor(e/1);return`${i}${Pe(s,2)}:${Pe(r,2)}:${Pe(n,2)}.${Pe(o,3)}`},hhmmssmmmuuu:t=>{const e=Math.abs(t),i=t>=0?"":"-",s=Math.floor(e/Jh),r=Math.floor(e/qh)%60,n=Math.floor(e/Zh)%60,o=Math.floor(e/1)%1e3,h=t.toLocaleString("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}).split(".")[1];return`${i}${Pe(s,2)}:${Pe(r,2)}:${Pe(n,2)}.${Pe(o,3)}${h}`},hhmmssmmmuuunnn:t=>{const e=Math.abs(t),i=t>=0?"":"-",s=Math.floor(e/Jh),r=Math.floor(e/qh)%60,n=Math.floor(e/Zh)%60,o=Math.floor(e/1)%1e3,h=t.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:6}).split(".")[1];return`${i}${Pe(s,2)}:${Pe(r,2)}:${Pe(n,2)}.${Pe(o,3)}${h}`}},ia={MajorHours12:{major:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>{const r=432e5;return t=Math.floor(t/(4*r))*r*4,pn(t,e,r,void 0,$h)},fitKeyValues:xn({ignore:"first"},2,4)},minor:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>yn(t,e,36e5,$h),fitKeyValues:xn({},2,3,4,6)},defaultValueFormatter:ea.hhmmss},MajorHours:{major:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>{const r=Jh;return t=Math.floor(t/(12*r))*r*12,pn(t,e,r,void 0,$h)},fitKeyValues:xn({ignore:"first"},2,6,12)},minor:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>yn(t,e,3e5,$h),fitKeyValues:xn({},2,4,6)},defaultValueFormatter:ea.hhmmss},MajorMinutes15:{major:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>(t=Math.floor(t/Jh)*Jh,pn(t,e,9e5,void 0,$h)),fitKeyValues:xn({ignore:"first"},2)},minor:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>yn(t,e,6e4,$h),fitKeyValues:xn({},3,5)},defaultValueFormatter:ea.hhmmss},MajorMinutes:{major:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>{const r=qh;return t=Math.floor(t/6e5)*r*10,pn(t,e,r,void 0,$h)},fitKeyValues:xn({ignore:"first"},2,5)},minor:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>yn(t,e,5e3,$h),fitKeyValues:xn({},2,3,4,6)},defaultValueFormatter:ea.hhmmss},MajorSeconds15:{major:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>(t=15e3*Math.floor(t/6e4)*4,pn(t,e,15e3,void 0,$h)),fitKeyValues:xn({ignore:"first"},2,4)},minor:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>yn(t,e,1e3,$h),fitKeyValues:xn({},3,5)},defaultValueFormatter:ea.hhmmss},MajorSeconds:{major:{format:ea.hhmmss,getKeyValues:(t,e,i,s)=>{const r=Zh;return t=Math.floor(t/1e4)*r*10,pn(t,e,r,void 0,$h)},fitKeyValues:xn({ignore:"first"},2,5)},minor:{format:ea.hhmmssmmm,getKeyValues:(t,e,i,s)=>yn(t,e,100,$h),fitKeyValues:xn({},2,3,5)},defaultValueFormatter:ea.hhmmssmmm},MajorMilliseconds100:{major:{format:ea.hhmmssmmm,getKeyValues:(t,e,i,s)=>(t=100*Math.floor(t/1e3)*10,pn(t,e,100,void 0,$h)),fitKeyValues:xn({ignore:"first"},2,5)},minor:{format:ea.hhmmssmmm,getKeyValues:(t,e,i,s)=>yn(t,e,10,$h),fitKeyValues:xn({},2,3,5)},defaultValueFormatter:ea.hhmmssmmm},MajorMilliseconds10:{major:{format:ea.hhmmssmmm,getKeyValues:(t,e,i,s)=>(t=10*Math.floor(t/100)*10,pn(t,e,10,void 0,$h)),fitKeyValues:xn({ignore:"first"},2,5)},minor:{format:ea.hhmmssmmm,getKeyValues:(t,e,i,s)=>yn(t,e,1,$h),fitKeyValues:xn({},2,3,5)},defaultValueFormatter:ea.hhmmssmmm},MajorMilliseconds:{major:{format:ea.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>(t=1*Math.floor(t/10)*10,pn(t,e,1,void 0,$h)),fitKeyValues:xn({ignore:"first"},2,5)},minor:{format:ea.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>yn(t,e,.1,$h),fitKeyValues:xn({},2)},defaultValueFormatter:ea.hhmmssmmmuuu},MajorMicroseconds100:{major:{format:ea.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>(t=.1*Math.floor(t/1)*10,pn(t,e,.1,void 0,$h)),fitKeyValues:xn({ignore:"first"},2,5)},minor:{format:ea.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>yn(t,e,.01,$h),fitKeyValues:xn({},2,3,5)},defaultValueFormatter:ea.hhmmssmmmuuu},MajorMicroseconds10:{major:{format:ea.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>(t=.01*Math.floor(t/.1)*10,pn(t,e,.01,void 0,$h)),fitKeyValues:xn({ignore:"first"},2,5)},minor:{format:ea.hhmmssmmmuuu,getKeyValues:(t,e,i,s)=>yn(t,e,.001,$h),fitKeyValues:xn({},2,3,5)},defaultValueFormatter:ea.hhmmssmmmuuu},MajorMicroseconds:{major:{format:ea.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>(t=.001*Math.floor(t/.01)*10,pn(t,e,.001,void 0,$h)),fitKeyValues:xn({ignore:"first"},2,5)},minor:{format:ea.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>yn(t,e,100*Kh,$h),fitKeyValues:xn({},2,3,5)},defaultValueFormatter:ea.hhmmssmmmuuunnn},MajorNanoseconds100:{major:{format:ea.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>{const r=100*Kh;return t=Math.floor(t/.001)*r*10,pn(t,e,r,void 0,$h)},fitKeyValues:xn({ignore:"first"},2,5)},minor:{format:ea.hhmmssmmmuuunnn,getKeyValues:(t,e,i,s)=>yn(t,e,10*Kh,$h),fitKeyValues:xn({},2,3,5)},defaultValueFormatter:ea.hhmmssmmmuuunnn},Unknown:{major:{format:(t,e,i)=>"",getKeyValues:(t,e,i,s)=>[],fitKeyValues:void 0},minor:{format:(t,e,i)=>"",getKeyValues:(t,e,i,s)=>[],fitKeyValues:void 0},defaultValueFormatter:(t,e,i)=>""}};class sa extends Qh{xh(t){const e=this.timeOrigin||0,i=[{Lr:"Major ticks",kA:0,kh:this.majorTickStyle,yh:this.majorFormattingFunction?this.majorFormattingFunction:(t,i,s)=>{const r=ta(Math.min(i.start,i.end),Math.max(i.start,i.end));return(0,ia[r].major.format)(t+e,i,s)},Mn:(t,e,i,s,r)=>{const n=ta(i,s);return(0,ia[n].major.getKeyValues)(t,e,i,s,r)},qh:{Kr:(t,e,i,s,r,n)=>{const o=ta(r,n),h=ia[o].major.fitKeyValues;if(h)return h(t,e,i,s,r,n)},tn:"hide-label"},wn:void 0}];return Yh(this.minorTickStyle)&&i.push({Lr:"Minor ticks",kA:1,kh:this.minorTickStyle,yh:this.minorFormattingFunction?this.minorFormattingFunction:(t,i,s)=>{const r=ta(Math.min(i.start,i.end),Math.max(i.start,i.end));return(0,ia[r].minor.format)(t+e,i,s)},Mn:(t,e,i,s,r)=>{const n=ta(i,s);return(0,ia[n].minor.getKeyValues)(t,e,i,s,r)},qh:{Kr:(t,e,i,s,r,n)=>{const o=ta(r,n),h=ia[o].minor.fitKeyValues;if(h)return h(t,e,i,s,r,n)},tn:"hide-tick"},wn:void 0}),{Sh:[],bh:i,Mh:this.cursorFormatter||((t,i,s)=>{const r=ta(Math.min(i.start,i.end),Math.max(i.start,i.end));return ia[r].defaultValueFormatter(t+e,i,s)}),wh:1e-4,_h:864e6}}setTickStyle(t){return this.setMajorTickStyle(t).setMinorTickStyle(t)}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTimeOrigin(t){return this.set("timeOrigin",t)}getTimeOrigin(){return this.get("timeOrigin")}setFormattingFunction(t){return this.withMutations((e=>e.set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}}const ra=(t,e,i,s,r)=>(n,o)=>h=>{const a=new Date(h+n),l={year:o?a.getUTCFullYear():a.getFullYear(),monthIndex:o?a.getUTCMonth():a.getMonth(),day:o?a.getUTCDate():a.getDate(),hours:o?a.getUTCHours():a.getHours(),minutes:o?a.getUTCMinutes():a.getMinutes(),seconds:o?a.getUTCSeconds():a.getSeconds(),millis:o?a.getUTCMilliseconds():a.getMilliseconds()},c=s?s(l):void 0;if(0===t&&!0===c)return h;const u=l[e];r.includes("year")&&(l.year=Math.floor(l.year/i)*i),r.includes("monthIndex")&&(l.monthIndex=0),r.includes("day")&&(l.day=1),r.includes("hours")&&(l.hours=0),r.includes("minutes")&&(l.minutes=0),r.includes("seconds")&&(l.seconds=0),r.includes("millis")&&(l.millis=0);let d=(0===t?1:t)*i;return-1===t&&!1===c&&(d=0),0!==d&&(l[e]=i*(d>0?Math.floor((u+d)/i):Math.ceil((u+d)/i))),o?Date.UTC(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis)-n:new Date(l.year,l.monthIndex,l.day,l.hours,l.minutes,l.seconds,l.millis).getTime()-n},na=(t,e,i,...s)=>ra(-1,t,e,i,s),oa=(t,e,i,...s)=>ra(-1,t,e,i,s),ha=(t,e,i,...s)=>ra(0,t,e,i,s),aa=(t,e,...i)=>ra(1,t,e,void 0,i),la=t=>(e,i)=>s=>{const r=new Date(s+e),n=i?r.getUTCDay():r.getDay(),o=1===n&&0===(i?r.getUTCHours():r.getHours())&&0===(i?r.getUTCMinutes():r.getMinutes())&&0===r.getSeconds()&&0===r.getMilliseconds();if(0===t&&!0===o)return s;let h=i?r.getUTCDate():r.getDate();return-1===t&&1===n&&!1===o||(-1===t?h-=n>=2?n-1:n+6:h+=n>0?8-n:1),i?Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),h,0,0,0,0)-e:new Date(r.getFullYear(),r.getMonth(),h,0,0,0,0).getTime()-e},ca=[{label:"NanoSecond10",unit:1e-5,irregular:!1,greatTicks:void 0,majorTicks:{fitFunction:xn({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xn(void 0,2)}},{label:"NanoSecond100",unit:1e-4,irregular:!1,greatTicks:{getReferenceKeyValue:(t,e)=>t=>1e-4*Math.floor(t/1e-4)},majorTicks:{fitFunction:xn({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xn(void 0,2)}},{label:"MicroSecond1",unit:.001,irregular:!1,greatTicks:{getReferenceKeyValue:(t,e)=>t=>.001*Math.floor(t/.001)},majorTicks:{fitFunction:xn({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xn(void 0,2)}},{label:"MicroSecond10",unit:.01,irregular:!1,greatTicks:{getReferenceKeyValue:(t,e)=>t=>.01*Math.floor(t/.01)},majorTicks:{fitFunction:xn({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xn(void 0,2)}},{label:"MicroSecond100",unit:.1,irregular:!1,greatTicks:{getReferenceKeyValue:(t,e)=>t=>.1*Math.floor(t/.1)},majorTicks:{fitFunction:xn({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xn(void 0,2)}},{label:"MilliSecond1",unit:1,irregular:!1,greatTicks:{getReferenceKeyValue:na("millis",1,(t=>t.millis%1==0),"millis")},majorTicks:{fitFunction:xn({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xn(void 0,2)}},{label:"MilliSecond10",unit:10,irregular:!1,greatTicks:{getReferenceKeyValue:na("millis",10,(t=>t.millis%10==0),"millis")},majorTicks:{fitFunction:xn({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xn(void 0,2)}},{label:"MilliSecond100",unit:100,irregular:!1,greatTicks:{getReferenceKeyValue:na("millis",100,(t=>t.millis%100==0),"millis")},majorTicks:{fitFunction:xn({offset:0},2,5)},minorTicks:{amount:4,fitFunction:xn(void 0,2)}},{label:"Second",unit:1e3,irregular:!1,greatTicks:{getReferenceKeyValue:na("seconds",1,(t=>0===t.millis),"millis")},majorTicks:{fitFunction:Sn(3,5,10,15,30)},minorTicks:{amount:4,fitFunction:xn(void 0,2)}},{label:"Minute",unit:6e4,irregular:!1,greatTicks:{getReferenceKeyValue:na("minutes",1,(t=>0===t.seconds&&0===t.millis),"seconds","millis")},majorTicks:{fitFunction:Sn(3,5,10,15,30)},minorTicks:{amount:12,fitFunction:xn(void 0,3,6)}},{label:"Hour",unit:36e5,irregular:!1,greatTicks:{getReferenceKeyValue:na("hours",1,(t=>0===t.minutes&&0===t.seconds&&0===t.millis),"minutes","seconds","millis")},majorTicks:{fitFunction:Sn(3,6,12)},minorTicks:{amount:8,fitFunction:xn(void 0,2,4)}},{label:"Day",unit:864e5,irregular:!1,greatTicks:{getReferenceKeyValue:na("day",1,(t=>0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"hours","minutes","seconds","millis")},majorTicks:{fitFunction:xn({ignore:"last"},2,4)},minorTicks:{amount:7,fitFunction:xn({ignore:"last"},2,3)}},{label:"Week",unit:6048e5,irregular:!0,getPrevKeyValue:la(-1),getNextKeyValueIncludingRef:la(0),getNextKeyValue:la(1),greatTicks:!0,majorTicks:{fitFunction:xn(void 0,2)},minorTicks:{fitFunction:void 0}},{label:"Month",unit:2592e6,irregular:!0,getPrevKeyValue:oa("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ha("monthIndex",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"day","hours","minutes","seconds","millis"),getNextKeyValue:aa("monthIndex",1,"day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:xn(void 0,2,3,6)},minorTicks:{fitFunction:xn(void 0,2,4,6)}},{label:"Year",unit:31536e6,irregular:!0,getPrevKeyValue:oa("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ha("year",1,(t=>1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:aa("year",1,"monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:xn({ignore:"first"},2,5)},minorTicks:{fitFunction:xn(void 0,2,5)}},{label:"Decade",unit:31536e7,irregular:!0,getPrevKeyValue:oa("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ha("year",10,(t=>t.year%10==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:aa("year",10,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:xn(void 0,2,4)},minorTicks:{fitFunction:xn(void 0,2,5)}},{label:"Century",unit:316224e7,irregular:!0,getPrevKeyValue:oa("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ha("year",100,(t=>t.year%100==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:aa("year",100,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0},{label:"Millennium",unit:316224e8,irregular:!0,getPrevKeyValue:oa("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValueIncludingRef:ha("year",1e3,(t=>t.year%1e3==0&&1===t.day&&0===t.hours&&0===t.minutes&&0===t.seconds&&0===t.millis),"year","monthIndex","day","hours","minutes","seconds","millis"),getNextKeyValue:aa("year",1e3,"year","monthIndex","day","hours","minutes","seconds","millis"),greatTicks:!0,majorTicks:{fitFunction:void 0},minorTicks:void 0}],ua=(t,e,i,s,r)=>{const n=e-t;let o;for(let t=r?0:ca.length-1;r?t<ca.length:t>=0;r?t+=1:t-=1){const e=n/ca[t].unit;if((void 0===i||e>=i)&&(void 0===s||e<=s)){o=ca[t];break}}return o},da=(t,e,i)=>{let s=ua(e,i,void 0,2,!0);if(void 0!==s&&0===ca.indexOf(s)&&(s=ca[1]),void 0===s)return;if("great"===t)return s;const r="major"===t?1:2,n=ca[ca.indexOf(s)-r];return void 0===n?ca[0]:n},fa=(t,e,i)=>(s,r,n,o)=>{const h=da("great",s,r);if(void 0===h)return[];if("Decade"===h.label||"Century"===h.label||"Millennium"===h.label)return[];const a=o>n?s:r,l=(s+r)/2,c=o>n?r:s;if(ca.indexOf(h)<=ca.findIndex((t=>"Hour"===t.label)))return"left"===i?[a]:[];let u;if(!0===h.irregular)u=mn(s,r,h.getPrevKeyValue(t,e),h.getNextKeyValue(t,e));else{const i=h.greatTicks.getReferenceKeyValue(t,e)(s);u=pn(s,r,h.unit,i,void 0)}const d=((t,e,i)=>{for(const s of i)if(s>=t&&s<=e)return s})(s,r,u);return"left"===i?void 0===d||xi(d,l,c)?[a]:[d]:void 0!==d&&xi(d,l,c)?[d]:[c]},ga=(t,e,i)=>(s,r,n,o)=>{const h=da(t,n,o);let a;if(void 0===h)return[];if("great"===t&&void 0!==h.greatTicks)if(!0===h.irregular)a=mn(s,r,h.getPrevKeyValue(e,i),h.getNextKeyValue(e,i));else{const t=h.greatTicks.getReferenceKeyValue(e,i)(s);a=pn(s,r,h.unit,t,void 0)}else if("major"===t&&void 0!==h.majorTicks)a=!0===h.irregular?((t,e,i,s)=>{const r=[];let n=i(t),o=0;for(;n<e;)if(r.push(n),n=s(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r.push(n),r})(s,r,h.getPrevKeyValue(e,i),h.getNextKeyValue(e,i)):((t,e,i)=>{const s=[];let r=t,n=0;for(;(r-t)/(e-t)<.98;)if(s.push(r),n+=1,r=t+n*i,n>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return s.push(r),s})(s,r,h.unit);else{if("minor"!==t||void 0===h.minorTicks)return[];if(!0===h.irregular)a=((t,e,i,s)=>{const r=[];let n=s(t),o=0;for(;n<e;)if(r.push(n),n=s(n),o+=1,o>1e3)throw new Error("Infinite loop in Axis tick key values logic.");return r})(s,r,h.getNextKeyValueIncludingRef(e,i),h.getNextKeyValue(e,i));else{const t=(t=>{if(void 0!==t)return ca[ca.indexOf(t)+1]})(h);if(void 0===t)return[];a=yn(s,r,t.unit/h.minorTicks.amount,void 0)}}return a},ya=t=>(e,i,s,r,n,o)=>{const h=da(t,n,o);if(void 0===h)return;let a;return"major"===t?a=h.majorTicks.fitFunction:h.minorTicks&&(a=h.minorTicks.fitFunction),a?a(e,i,s,r,n,o):void 0},pa=s.Record({utc:!1,locale:void 0,dateOrigin:void 0,cursorFormatter:void 0,greatTickStyle:new Gh,majorTickStyle:new Gh,minorTickStyle:new Gh,formatOptionsMajorCentury:{year:"numeric",hour12:!1},formatOptionsMinorDecade:{year:"numeric",hour12:!1},formatOptionsMajorDecade:{year:"numeric",hour12:!1},formatOptionsMinorYear:{year:"numeric",hour12:!1},formatOptionsMajorYear:{year:"numeric",hour12:!1},formatOptionsMinorMonth:{month:"short",hour12:!1},formatOptionsGreatYear:{year:"numeric",hour12:!1},formatOptionsMajorMonth:{month:"long",hour12:!1},formatOptionsMinorWeek:{day:"numeric",hour12:!1},formatOptionsGreatMonth:{year:"numeric",month:"long",hour12:!1},formatOptionsMajorWeek:{day:"numeric",weekday:"short",hour12:!1},formatOptionsMinorDay:{day:"numeric",weekday:"short",hour12:!1},formatOptionsGreatWeek:(t,e,i)=>{const s=new Date(t),r=(t=>{const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()));e.setUTCDate(e.getUTCDate()+4-(e.getUTCDay()||7));const i=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-i.getTime())/864e5+1)/7)})(s);return`${new Intl.DateTimeFormat(i,{year:"numeric",month:"long",hour12:!1}).format(s)} Week ${r}`},formatOptionsMajorDay:{weekday:"long",day:"numeric",hour12:!1},formatOptionsMinorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatDay:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorHour:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsGreatHour:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorMinute:{hour:"2-digit",minute:"2-digit",hour12:!1},formatOptionsMinorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsGreatMinute:{year:"numeric",month:"long",day:"numeric",hour12:!1},formatOptionsMajorSecond:{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},formatOptionsMinorMillisecond:t=>{const e=new Date(t);return e.setHours(0,0,0,0),ea.hhmmssmmm(t-e.getTime())},formatMillisecondRange:t=>{const e=new Date(t);return e.setHours(0,0,0,0),ea.hhmmssmmm(t-e.getTime())},formatMicrosecondRange:t=>{const e=new Date(t);return e.setHours(0,0,0,0),ea.hhmmssmmmuuu(t-e.getTime())},formatNanosecondRange:(t,e,i,s)=>{if(s){const t=new Date(s.valueShifted);return t.setHours(0,0,0,0),ea.hhmmssmmmuuunnn(s.valueShifted-t.getTime())}{const e=new Date(t);return e.setHours(0,0,0,0),ea.hhmmssmmmuuunnn(t-e.getTime())}},formatOptionsGreatSecond:{},formatOptionsMajorMilliSecond:{}});class ma extends pa{xh(t){const e=void 0!==this.dateOrigin?this.dateOrigin.getTime():0,i=t=>ca.map((e=>{const i=((t,e,i)=>{switch(i.label){case"NanoSecond10":case"NanoSecond100":return t.formatNanosecondRange;case"MicroSecond1":case"MicroSecond10":case"MicroSecond100":return t.formatMicrosecondRange;case"MilliSecond1":case"MilliSecond10":case"MilliSecond100":return"Great"===e?t.formatOptionsGreatMinute:t.formatMillisecondRange;case"Second":return"Great"===e?t.formatOptionsGreatMinute:"Major"===e?t.formatOptionsMajorSecond:t.formatOptionsMinorSecond;case"Minute":return"Great"===e?t.formatOptionsGreatMinute:"Major"===e?t.formatOptionsMajorMinute:t.formatOptionsMinorMinute;default:case"Hour":return"Great"===e?t.formatOptionsGreatHour:"Major"===e?t.formatOptionsMajorHour:t.formatOptionsMinorHour;case"Day":return"Great"===e?t.formatOptionsGreatDay:"Major"===e?t.formatOptionsMajorDay:t.formatOptionsMinorDay;case"Week":return"Great"===e?t.formatOptionsGreatWeek:"Major"===e?t.formatOptionsMajorWeek:t.formatOptionsMinorWeek;case"Month":return"Great"===e?t.formatOptionsGreatMonth:"Major"===e?t.formatOptionsMajorMonth:t.formatOptionsMinorMonth;case"Year":return"Great"===e?t.formatOptionsGreatYear:"Major"===e?t.formatOptionsMajorYear:t.formatOptionsMinorYear;case"Decade":return"Great"===e?void 0:"Major"===e?t.formatOptionsMajorDecade:t.formatOptionsMinorDecade;case"Century":return"Great"===e?void 0:"Major"===e?t.formatOptionsMajorCentury:void 0;case"Millennium":return}})(this,t,e);if("object"!=typeof i)return i;try{return new Intl.DateTimeFormat(this.locale,i)}catch(t){let e="";for(const t in i)e+=` ${t}: ${i[t]},`;Wt.console.error(`Invalid Intl.DateTimeFormat ( locale: ${this.locale}, formatOptions {${e}} )`)}})),s=new Map;s.set("great",i("Great")),s.set("major",i("Major")),s.set("minor",i("Minor"));const r=t=>String(t),n=(t,i)=>(n,o)=>{let h=n,a=n+e;const l=o.start,c=o.end,u=l>c,d=da(t,u?c:l,u?l:c);if(void 0===d)return r(a);if("great"===t){const t=Zt(n,"left"===i?l:c);let s;if(s=!1===t?n:!1===d.irregular?"left"===i&&!1===u||"right"===i&&!0===u?d.greatTicks.getReferenceKeyValue(e,this.utc)(n):d.greatTicks.getReferenceKeyValue(e,this.utc)(n+1*d.unit):"left"===i&&!1===u||"right"===i&&!0===u?d.getPrevKeyValue(e,this.utc)(n):d.getNextKeyValue(e,this.utc)(n),h=s,a=s+e,"right"===i&&!0===t)return"";if("right"===i&&"Week"===d.label)return""}const f=s.get(t);if(void 0===f)return r(a,this.locale);const g=f[ca.indexOf(d)];return void 0===g?"":"function"==typeof g?g(a,o,this.locale,{valueShifted:h,shiftOrigin:this.dateOrigin?this.dateOrigin.getTime():0}):g.format(a)},o=[],h=[{Lr:"Great ticks (directive)",kA:0,mh:!0,Mn:ga("great",e,this.utc),wn:void 0},{Lr:"Major ticks",kA:1,kh:this.majorTickStyle,yh:n("major"),Mn:ga("major",e,this.utc),qh:{Kr:ya("major"),tn:"hide-tick"},wn:void 0}];jh(this.greatTickStyle)||o.push({Lr:"Great ticks (left)",kh:this.greatTickStyle.setLabelAlignment(-1),yh:n("great","left"),Mn:fa(e,this.utc,"left"),ph:!0,en:!1}),jh(this.minorTickStyle)||h.push({Lr:"Minor ticks",kA:2,kh:this.minorTickStyle,yh:n("minor"),Mn:ga("minor",e,this.utc),qh:{Kr:ya("minor"),tr:(t,e,i,s,r,n)=>{const o=da("minor",r,n);return!o||"Week"!==o.label},tn:"hide-tick"},wn:void 0,qr:2});const a=this.cursorFormatter;return{Sh:o,bh:h,Mh:a?(t,i,s)=>a(e+t,i,s):(t,i,s)=>{const r=ua(Math.min(i.start,i.end),Math.max(i.start,i.end),void 0,1,!0),n=r&&r.unit<=.1,o=r&&r.unit<=100,h=r&&r.unit<=6e4,a=new Date(e+t),l=new Date(e+t);l.setHours(0,0,0,0);const c=n?this.formatNanosecondRange:o?this.formatMicrosecondRange:h?this.formatMillisecondRange:ea.hhmmss;return`${new Intl.DateTimeFormat(s,{year:"numeric",month:"numeric",day:"numeric"}).format(a)} ${c(a.getTime()-l.getTime(),i,this.locale,{valueShifted:t,shiftOrigin:e})}`},wh:10**-5,_h:31536e9}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setTickStyle(t){return this.setGreatTickStyle(t).setMajorTickStyle(t).setMinorTickStyle(t)}setGreatTickStyle(t){if("function"==typeof t){const e=this.get("greatTickStyle");return this.set("greatTickStyle",t(e))}return this.set("greatTickStyle",t)}getGreatTickStyle(){return this.get("greatTickStyle")}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setUTC(t){return this.set("utc",t)}getUTC(){return this.get("utc")}setLocale(t){return this.set("locale",t)}getLocale(){return this.get("locale")}setDateOrigin(t){return this.set("dateOrigin",t)}getDateOrigin(){return this.get("dateOrigin")}setFormatting(t,e,i){return this.withMutations((s=>s.set("formatOptionsGreatYear",t||this.formatOptionsGreatYear).set("formatOptionsGreatMonth",t||this.formatOptionsGreatMonth).set("formatOptionsGreatWeek",t||this.formatOptionsGreatWeek).set("formatOptionsGreatDay",t||this.formatOptionsGreatDay).set("formatOptionsGreatHour",t||this.formatOptionsGreatHour).set("formatOptionsGreatMinute",t||this.formatOptionsGreatMinute).set("formatOptionsMajorCentury",e||this.formatOptionsMajorCentury).set("formatOptionsMajorDecade",e||this.formatOptionsMajorDecade).set("formatOptionsMajorYear",e||this.formatOptionsMajorYear).set("formatOptionsMajorMonth",e||this.formatOptionsMajorMonth).set("formatOptionsMajorWeek",e||this.formatOptionsMajorWeek).set("formatOptionsMajorDay",e||this.formatOptionsMajorDay).set("formatOptionsMajorHour",e||this.formatOptionsMajorHour).set("formatOptionsMajorMinute",e||this.formatOptionsMajorMinute).set("formatOptionsMajorSecond",e||this.formatOptionsMajorSecond).set("formatOptionsMinorDecade",i||this.formatOptionsMinorDecade).set("formatOptionsMinorYear",i||this.formatOptionsMinorYear).set("formatOptionsMinorMonth",i||this.formatOptionsMinorMonth).set("formatOptionsMinorWeek",i||this.formatOptionsMinorWeek).set("formatOptionsMinorDay",i||this.formatOptionsMinorDay).set("formatOptionsMinorHour",i||this.formatOptionsMinorHour).set("formatOptionsMinorMinute",i||this.formatOptionsMinorMinute).set("formatOptionsMinorSecond",i||this.formatOptionsMinorSecond)))}setFormattingDecade(t,e){return this.withMutations((i=>(t&&(i=i.set("formatOptionsMajorDecade",t)),e&&(i=i.set("formatOptionsMinorYear",e)),i)))}setFormattingYear(t,e){return this.withMutations((i=>(t&&(i=i.set("formatOptionsMajorYear",t)),e&&(i=i.set("formatOptionsMinorMonth",e)),i)))}setFormattingMonth(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatYear",t)),e&&(s=s.set("formatOptionsMajorMonth",e)),i&&(s=s.set("formatOptionsMinorWeek",i)),s)))}setFormattingWeek(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatMonth",t)),e&&(s=s.set("formatOptionsMajorWeek",e)),i&&(s=s.set("formatOptionsMinorDay",i)),s)))}setFormattingDay(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatWeek",t)),e&&(s=s.set("formatOptionsMajorDay",e)),i&&(s=s.set("formatOptionsMinorHour",i)),s)))}setFormattingHour(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatDay",t)),e&&(s=s.set("formatOptionsMajorHour",e)),i&&(s=s.set("formatOptionsMinorMinute",i)),s)))}setFormattingMinute(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatHour",t)),e&&(s=s.set("formatOptionsMajorMinute",e)),i&&(s=s.set("formatOptionsMinorSecond",i)),s)))}setFormattingSecond(t,e,i){return this.withMutations((s=>(t&&(s=s.set("formatOptionsGreatMinute",t)),e&&(s=s.set("formatOptionsMajorSecond",e)),i&&(s=s.set("formatOptionsMinorMillisecond",i)),s)))}setFormattingMilliSecond(t,e){return this.withMutations((i=>(t&&(i=i.set("formatOptionsGreatSecond",t)),e&&(i=i.set("formatOptionsMajorMilliSecond",e)),i)))}}const xa=(t,e)=>(i,s,r,n,o)=>{const h=s-i;if(e){let e=5;o<=125?e=2:o<=250?e=3:o<=500&&(e=4);const r=Math.log10(h/e),n=Math.floor(2*r)/2;let a;a=n%1==0?10**(n-t):10**Math.ceil(n)/2;const l=1/a;a=Math.round(a*l)/l;const c=Math.round(Math.floor(i/(10*a))*a*10*l)/l;return pn(c,s,a,void 0,l)}let a=h/5;const l=1/a;return a=Math.round(a*l)/l,yn(i,s,a,l)},Sa=(t,e,i,s,r,n)=>0===e?t.filter(((t,e)=>e%2==0)):1===e?t.filter(((t,e)=>e%5==0)):2===e?t.filter(((t,e)=>e%10==0)):void 0,va=(t,e,i,s,r,n)=>{},Aa=(t,e,i,s,r,n)=>0===e?t.filter(((t,e)=>e%2==0)):1===e?t.filter(((t,e)=>e%3==0)):2===e?t.filter(((t,e)=>e%4==0)):3===e?t.filter(((t,e)=>e%5==0)):void 0,ba=(t,e,i,s,r,n)=>0===e?[t[1],t[3],t[5]]:1===e?[t[0],t[3]]:2===e?[t[1]]:void 0,Ca=(t,e)=>{const i=Ji(t),s=qi(t);if(e)return(t,e)=>{const r=[],n=Math.floor(i(t)),o=Math.ceil(i(e));for(let t=n-1;t<=o+1;t+=1){const e=s**t;r.push(e)}return r};const r=10===t?9:4;return(t,e)=>{const n=Math.round(i(t)),o=Math.round(i(e)),h=[],a=s**n,l=(s**o-a)/r;for(let i=1;i<=r;i+=1){const s=a+l*i;s>t&&s<e&&h.push(s)}return h}},Ma=s.Record({cursorFormatter:void 0,extremeTickStyle:new Gh,majorTickStyle:new Gh,minorTickStyle:new Gh,formattingOffset:void 0,extremeFormattingFunction:void 0,majorFormattingFunction:void 0,minorFormattingFunction:void 0,fallBackToExtremeTicksAutomatically:!0});class Ta extends Ma{xh(t){const e=this.formattingOffset,i=this.get("extremeFormattingFunction")||("logarithmic"===t.type?(e,i)=>is.LogarithmicNoExponents(e,i,void 0,t.base):is.Numeric),s=this.get("majorFormattingFunction")||("logarithmic"===t.type?(e,i)=>is.LogarithmicNoExponents(e,i,void 0,t.base):is.Numeric),r=this.get("minorFormattingFunction")||("logarithmic"===t.type?(e,i)=>is.LogarithmicNoExponents(e,i,void 0,t.base):is.Numeric),n=[],o=[];jh(this.extremeTickStyle)||n.push({Lr:"Extreme ticks",kh:this.extremeTickStyle,yh:void 0===e?i:(t,s,r)=>i(e+t,s,r),Mn:gn,ph:!0,en:!0});const h={Lr:"Major ticks",kA:0,kh:this.majorTickStyle,yh:void 0===e?s:(t,i,r)=>s(e+t,i,r),Mn:"logarithmic"===t.type?Ca(t.base,!0):xa(0,!0),qh:{tn:"hide-label",Kr:"logarithmic"===t.type?Aa:Sa},wn:void 0};if(o.push(h),!jh(this.minorTickStyle)){const i="logarithmic"===t.type?Ca(t.base,!1):xa(1,!1);o.push({Lr:"Minor ticks",kA:1,kh:this.minorTickStyle,yh:void 0===e?r:(t,i,s)=>r(e+t,i,s),Mn:(t,e,s,r,n)=>i(t,e,s,r,n),qh:{tn:"hide-tick",Kr:"logarithmic"===t.type?ba:va},wn:80})}const a=this.cursorFormatter?this.cursorFormatter:is.Numeric;return{Sh:n,bh:o,Mh:void 0===e?a:(t,i,s)=>a(e+t,i,s),wh:1e-9,_h:void 0,Gr:this.fallBackToExtremeTicksAutomatically?h:void 0}}setCursorFormatter(t){return this.set("cursorFormatter",t)}getCursorFormatter(){return this.get("cursorFormatter")}setExtremeTickStyle(t){if("function"==typeof t){const e=this.get("extremeTickStyle");return this.set("extremeTickStyle",t(e))}return this.set("extremeTickStyle",t)}getExtremeTickStyle(){return this.get("extremeTickStyle")}setFormattingOffset(t){return this.set("formattingOffset",t)}getFormattingOffset(){return this.get("formattingOffset")}setTickStyle(t){const e=this.setMajorTickStyle(t).setMinorTickStyle(t);return e.extremeTickStyle!==Wh?e.setExtremeTickStyle(t):e}setMajorTickStyle(t){return"function"==typeof t?this.set("majorTickStyle",t(this.get("majorTickStyle"))):this.set("majorTickStyle",t)}getMajorTickStyle(){return this.get("majorTickStyle")}setMinorTickStyle(t){if("function"==typeof t){const e=this.get("minorTickStyle");return this.set("minorTickStyle",t(e))}return this.set("minorTickStyle",t)}getMinorTickStyle(){return this.get("minorTickStyle")}setFormattingFunction(t){return this.withMutations((e=>e.set("extremeFormattingFunction",t).set("majorFormattingFunction",t).set("minorFormattingFunction",t).set("cursorFormatter",t)))}getExtremeFormattingFunction(){return this.get("extremeFormattingFunction")}setExtremeFormattingFunction(t){return this.set("extremeFormattingFunction",t)}getMajorFormattingFunction(){return this.get("majorFormattingFunction")}setMajorFormattingFunction(t){return this.set("majorFormattingFunction",t)}getMinorFormattingFunction(){return this.get("minorFormattingFunction")}setMinorFormattingFunction(t){return this.set("minorFormattingFunction",t)}getFallBackToExtremeTicksAutomatically(){return this.get("fallBackToExtremeTicksAutomatically")}setFallBackToExtremeTicksAutomatically(t){return this.set("fallBackToExtremeTicksAutomatically",t)}}const Ea=(t,e,i="image/png",s)=>{e+=`.${i.slice(i.indexOf("image/")+6)}`;const r=t.captureFrame(i,s);if("image/png"!==i&&r.type.includes("image/png"))throw new Error(`saveToFile | type not supported by browser: ${i}\nCheck support table for HTMLCanvasElement.toDataURL`);if(Wt.navigator.msSaveBlob)Wt.navigator.msSaveBlob(r,e);else{const t=Wt.document.createElement("a");Wt.document.body.appendChild(t);const i=Wt.URL.createObjectURL(r);t.href=i,t.download=e,t.click(),setTimeout((()=>{Wt.URL.revokeObjectURL(i),Wt.document.body.removeChild(t)}),0)}},wa=(t,i,s,r,n,o)=>{const h=t.so(i,s,r,n,o,!0);return h.setDraggingMode(e.UIDraggingModes.draggable),h},Ba=(t,e)=>{if("relative"===t)return e;if(t instanceof os)return t;const i=t.x instanceof Tn?t.x.ct:t.x.x,s=t.y instanceof Tn?t.y.ct:t.y.y;return ls(i,s)},ka=(t,e,i,s,r)=>{if(i){const n=t,o=e,h=Xh(o)?o:ds(o)?s:void 0;if(h&&cs(i)){const t=ot(n,h,r.ct);return r.ja({engineX:t.x,engineY:t.y})}if(h&&ds(i))return ot(n,h,s);if(h&&Xh(i))return ot(n,h,i)}else{const i=t;if(ds(e)){const t=r.Wa(i);return ot({x:t.engineX,y:t.engineY},r.ct,s)}if(Xh(e)){const t=e,s=r.Wa(i);return ot({x:s.engineX,y:s.engineY},r.ct,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")};class Ra{constructor(t,e,i,s,r,n,o,h){this.coordsRelative="relative",this.coordsClient="client",this.zA=[],this.OA=[],this.VA=void 0,this.NA=void 0,this.GA=void 0,this.ai=m(0,0,0,0),this.UA=!1,this.ft=!1,this.$A=()=>{this.YA=!0,this.HA.Bs()},this.XA=t=>e=>{const i=this.zA.indexOf(e);-1!==i&&this.zA.splice(i,1),this.St.Bs(),t.U()},this.WA=t=>{const e=this.OA.indexOf(t);-1!==e&&this.OA.splice(e,1),this.St.Bs()},this.YA=!0,this.background=new Ct,this.jA=t,this.ZA=i,this.HA=s,this.removePanel=r,this.Ct=e.St.Ct;const a=e.St.Mi();this.uiScale=i.d2({scaleXYConstructor:hs}).ts(0,100).ss(0,100).J(a),this.oA=i.d2({scaleXYConstructor:hs}).ts(0,this.uiScale.x.getCellSize()).ss(0,this.uiScale.y.getCellSize()).J(a),this.engine=e.St.QA,this.St=e.St.Lu,this.vs=this.St.vs.ys(this,{}),this.JA=()=>e.KA("unidentified ui"),this.qA=e.tg(),this.ig=this.HA.Ke(this.uiScale).th(l(0,0)).J(l(100,100)).Je(n).Qe(o),this.background.Gt(this.ig),h?(h.addEventListener("resize",this.$A),this.sg=()=>h.removeEventListener("resize",this.$A)):(e.St.V("resize",this.$A),this.eg=()=>e.St.G("resize",this.$A));const c=t=>{this.UA=t.isInView,this.R.O("inviewchanged",{isInView:this.UA})};e.St.V("inviewchanged",c),this.hg=()=>e.St.G("inviewchanged",c),this.VA=r}getTheme(){return this.Ct}getSizePixels(){return this.oA.getInnerIntervalPixels()}setBackgroundFillStyle(t){return this.ig.Je(t),this.HA.Bs(),this}getBackgroundFillStyle(){return this.ig.pr()}setBackgroundStrokeStyle(t){return this.ig.Qe(t),this.HA.Bs(),this}getBackgroundStrokeStyle(){return this.ig.Ua()}translateCoordinate(t,e,i){return ka(t,e,i,this.oA,this.St)}rg(t){return this.zA.push(t),this.St.Bs(),t}ng(t){return this.OA.push(t),this.St.Bs(),t}addUIElement(t=fh,e=this.uiScale){e=Ba(e,this.oA);const i=this.JA();return this.rg(wa(t,i,this.uiScale,e,this.XA(i),this.Ct))}addLegendBox(t=Eh,i=this.uiScale){i=Ba(i,this.oA);const s=this.ng(wa(t,this.qA,this.uiScale,i,this.WA,this.Ct));return s.setDraggingMode(e.UIDraggingModes.notDraggable),void 0!==i&&i!==this.uiScale||(void 0===t||"vertical"===t.getAlignment()?s.setOrigin(Wr.RightCenter).setPosition({x:100,y:50}):s.setOrigin(Wr.CenterBottom).setPosition(this.uiScale.Li({x:50,y:0},{x:0,y:3}))),s}getLegendBoxes(){return this.OA}dispose(){return this.ft||(this.ft=!0,this.eg&&this.eg(),this.sg&&this.sg(),Fa(this.uiScale),Fa(this.oA),this.hg&&this.hg(),this.NA&&this.NA(),this.HA.U(),this.qA.U(),this.zA.slice().forEach((t=>{t.dispose()})),this.OA.slice().forEach((t=>{t.dispose()})),this.St.Bs(),this.VA&&this.VA(this),this.R.O("dispose",{})),this}isDisposed(){return this.ft}saveToFile(t,e,i){return Ea(this.engine,t,e,i),this}vn(t){this.ai=t,this.$A()}X(){return this.oA.X(),this.uiScale.X(),this}W(){return this.oA.W(),this.uiScale.W(),this}qe(t){if(this.YA){const t=this.HA.St.Mi(),e=t.x,i=t.y;this.uiScale.J(e,i),this.oA.J(e,i);const s=[this.ai.left,this.ai.right],r=[this.ai.bottom,this.ai.top];this.uiScale.Ki(s),this.uiScale.qi(r);const n=this.uiScale.getInnerIntervalPixels();this.oA.ts(0,n.x).Ki(s).ss(0,n.y).qi(r),this.R.O("resize",{width:n.x,height:n.y,engineHeight:i,engineWidth:e})}this.YA=!1}og(){for(let t=0;t<this.zA.length;t+=1)this.zA[t].Dr().qe();for(let t=0;t<this.OA.length;t+=1)this.OA[t].Dr().qe();this.GA&&this.GA()}ag(t,e){if(t){const i=t(e);this.addEventListener("resize",i.Dr.bind(i)),this.NA=i.U.bind(i),this.GA=i.Dr.bind(i)}}getIsInView(){return this.UA}}const Fa=t=>{t.pi&&t.pi()};class Ia extends Ra{constructor(t,e,i,s,r,n){super(t,e,i,e.lg("uipanel bg",0),s,e.St.Ct.uiPanelBackgroundFillStyle,e.St.Ct.uiPanelBackgroundStrokeStyle,n),this.R=new Ct,this.ag(r,this.oA)}setMinimumSize(t){return this.tf=t,this.St.Bs(),this}getMinimumSize(){return this.tf}qe(t){super.qe(t),super.og()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Oa extends Ra{constructor(t,i,s,r,n,o,h,a,c,u,d){var f;super(t,i,s,r,n,o,h,d),this.cg={},this.Bh=!0,this.title=new Ct,this.ug=i.dg("chart internal ui",0),this.Dn=null!==(f=this.Ct.panelPadding)&&void 0!==f?f:{left:10,right:10,top:10,bottom:10},this.Uh=this.ug.mn(this.uiScale).jr("Chart").th(l(50,100)).Ul(l(0,1)).Sr(a).Je(c).setPointerEvents(!1).Wr(u),this.Uh.Wh=e.TextObjectIdentifier.ChartTitle,this.title.Gt(this.Uh),this.Ag=this.vs.dA([this.Uh]).Ls(this.Ct.effectsText)}setAnimationsEnabled(t){return this.Bh=t,this}getAnimationsEnabled(){return this.Bh}setTitle(t){return this.Uh.jr(t),this.St.Bs(),this}getTitle(){return this.Uh.Jr()}getTitleSize(){return this.Uh.Dr().Pu()}setTitleFillStyle(t){return this.Uh.Je(t),this.$A(),this}getTitleFillStyle(){return this.Uh.pr()}setTitleShadow(t){return this.Uh.Wr(t),this.St.Bs(),this}getTitleShadow(){return this.Uh.Dl()}setTitleFont(t){return this.Uh.Sr(t),this.$A(),this}getTitleFont(){return this.Uh.mr()}setTitleRotation(t){return this.Uh.br(t),this.St.Bs(),this}getTitleRotation(){return this.Uh.Mr()}setTitleEffect(t){return this.Ag.Ls(t),this.St.Bs(),this}getTitleEffect(){return this.Ag.Ds()}setTitleMargin(t){var e,i;return this.cg="object"==typeof t?this.cg?(e=this.cg,{left:void 0!==(i=t).left?i.left:e.left,top:void 0!==i.top?i.top:e.top,right:void 0!==i.right?i.right:e.right,bottom:void 0!==i.bottom?i.bottom:e.bottom}):t:{left:t,top:t,right:t,bottom:t},this.$A(),this}getTitleMargin(){return this.cg}setPadding(t){const e="object"==typeof t?S(this.Dn,t):{left:t,top:t,right:t,bottom:t};return e.bottom===this.Dn.bottom&&e.left===this.Dn.left&&e.right===this.Dn.right&&e.top===this.Dn.top||(this.Dn=e,this.$A()),this}getPadding(){return this.Dn}gg(t){const e=t.pg(),i=null==e?void 0:e.height,s=null==e?void 0:e.width;if(void 0!==i&&void 0!==s)return{x:i/2,y:s/2}}dispose(){return super.dispose(),this.ug.U(),this}}const La={vg:(t,e)=>t.pr()!==V&&0!==t.Jr().length&&t.getVisible()?t.Dr().Pu().y:0,yg(t,e){t.th(l(50,100)).vn({top:void 0!==e.top?e.top:10,right:e.right||0,left:e.left||0,bottom:e.bottom||0})}},Da=t=>"show-all-interpolated"===t||"show-nearest-interpolated"===t||"show-pointed-interpolated"===t,Pa=(t,e)=>{const i="series"in t?t.series:void 0;if(!i||!("getCursorFormattingOverride"in i))return e;const s=i.getCursorFormattingOverride();return s?s(t,e):e},Va=t=>{var e,i;const s="series"in t&&t.series,r=s&&Ch(s)&&s.Us(),n="x"in t&&t.x,o="y"in t&&t.y,h="z"in t&&t.z,a="color"in t&&t.color,l=null!==(i=null!==(e="lookupValue"in t?t.lookupValue:void 0)&&void 0!==e?e:"intensity"in t?t.intensity:void 0)&&void 0!==i?i:"value"in t?t.value:void 0;return a?"number"==typeof a?E(a):a:void 0!==l&&r&&"value"===r.lookUpProperty?r.lut.getColors(l,r.valueRange):void 0!==n&&!1!==n&&r&&"x"===r.lookUpProperty?r.lut.getColors(n,_a(s)?{min:s.getXMin(),max:s.getXMax()}:void 0):void 0!==o&&!1!==o&&r&&"y"===r.lookUpProperty?r.lut.getColors(o,_a(s)?{min:s.getYMin(),max:s.getYMax()}:void 0):void 0!==h&&!1!==h&&r&&"z"===r.lookUpProperty?r.lut.getColors(h,za(s)?{min:s.getZMin(),max:s.getZMax()}:void 0):void 0},_a=t=>!(!t||"object"!=typeof t||!("getXMin"in t)),za=t=>!(!t||"object"!=typeof t||!("getZMin"in t)),Ua=(t,e,i,s,r,n,o)=>{let h,a,l,c=r,u=n,d=null,f=!0;s&&(f=!1,s.seriesBackground.addEventListener("pointerenter",(()=>{var e;f=!0,t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(e=l[3])&&void 0!==e?e:{}))?g.qe(...l):t.St.Bs())})),s.seriesBackground.addEventListener("pointerleave",(()=>{var e;f=!1,t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(e=l[3])&&void 0!==e?e:{}))?g.qe(...l):t.St.Bs())})),s.seriesBackground.addEventListener("pointermove",(()=>{var e;f=!0,t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(e=l[3])&&void 0!==e?e:{}))?g.qe(...l):t.St.Bs())})),s.addEventListener("seriesadd",(e=>{const i=e.series;i.addEventListener("pointerenter",((e,s)=>{var r;i.mg()&&(a||t.St.Bs(),h=s||void 0),t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(r=l[3])&&void 0!==r?r:{}))?g.qe(...l):t.St.Bs())})),i.addEventListener("pointermove",((e,s)=>{var r;i.mg()&&(a||t.St.Bs(),h=s||void 0),t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(r=l[3])&&void 0!==r?r:{}))?g.qe(...l):t.St.Bs())})),i.addEventListener("pointerleave",(e=>{var s;i.mg()&&(a||t.St.Bs(),h=void 0),t.getCursorMode()&&(a&&l&&!("explicitTarget"in(null!==(s=l[3])&&void 0!==s?s:{}))?g.qe(...l):t.St.Bs())}))})));const g={setCursor:e=>(e(i),t),getCursor:()=>i,setCursorMode:e=>(c=e,t.St.Bs(),t),getCursorMode:()=>c,setCustomCursor:t=>{a=t},setCursorFormatting:e=>(u=e,t.St.Bs(),t),getCursorFormatting:()=>u,U:()=>{i.dispose(),e.U()},qe:(e,s,r,n)=>{l=[e,s,r,n];const g=t.St.ba();let y=[];if((null==n?void 0:n.explicitTarget)&&c)y=Array.isArray(n.explicitTarget)?n.explicitTarget:[n.explicitTarget];else if(!e&&c){const t=s.find((t=>t.getPointed())),e=g&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&t.Is?t.Is(g):void 0;if(h=e||h,h&&"show-all"!==c&&"show-all-interpolated"!==c)y=[h];else if("show-all"===c||"show-all-interpolated"===c||"show-nearest"===c||"show-nearest-interpolated"===c){if((f||void 0!==t)&&g&&r){for(const t of s){if(!t.getVisible()||t.getCursorEnabled&&!t.getCursorEnabled())continue;const e=r(t,g,c);e&&y.push(e)}"show-nearest"!==c&&"show-nearest-interpolated"!==c||(y.sort(((t,e)=>o(t,g)-o(e,g))),y.length=1)}}else if(("show-pointed"===c||"show-pointed-interpolated"===c)&&g&&t&&(!t.getCursorEnabled||t.getCursorEnabled())&&r){const e=r(t,g,c);e&&(y=[e])}}y=Xe(y.map((t=>ei(t))));const p=(null==n?void 0:n.overrideCursorPositions)||((t,e)=>e),m=y[0],x=y.length>0?y:void 0;if(m!==d&&g&&(a&&a({hit:m,hits:x,mouseLocation:g}),t.R.O("cursortargetchange",{hit:m,hits:x,mouseLocation:g}),d=m),a)i.getVisible()&&(i.setVisible(!1),i.Dr().qe());else{let e=!1;if(y&&y.length>0){const s=u(t,y[0],y);i.setVisible(!0).setPosition(...p(y,y.map((t=>t.cursorPosition)))).setResultTable((t=>t.setContent(s))),e=!0}else i.getVisible()&&(i.setVisible(!1).setPosition().setResultTable((t=>t.setContent([]))),e=!0);(null==n?void 0:n.afterCursorPointedAt)&&n.afterCursorPointedAt(y),e&&(i.Dr(),i.qe())}},solveNearest:(e,i,s,r)=>{const n=e||t.St.ba();if(!n)return[];let h=[];if("show-all"===i||"show-all-interpolated"===i||"show-nearest"===i||"show-nearest-interpolated"===i){for(const t of s){if(!t.getCursorEnabled()||!t.getVisible())continue;const e=r(t,n,i);e&&h.push(e)}"show-nearest"!==i&&"show-nearest-interpolated"!==i||(h.sort(((t,e)=>o(t,n)-o(e,n))),h.length=1)}return h=Xe(h.map((t=>ei(t)))),h},xg:i};return g};class Na{constructor(t,e){this.Sg=t,this.bg=e}alter(t){this.Mg=void 0!==this.Mg?this.Mg:this.bg(),this.wg=t,this.Sg(t)}resetValue(){void 0!==this.wg&&(void 0!==this.Mg&&this.isAltered()&&this.Sg(this.Mg),this.Mg=void 0,this.wg=void 0)}getNormalValue(){return void 0!==this.Mg?this.Mg:this.bg()}isAltered(){return void 0!==this.wg&&this.bg()===this.wg}}class Xa{constructor(t){this._g=[],this.xg=t,this.Cg=t.Cg}update(){return this.Cg.getVisible()?!(this.kg()&&(!this.Tg()||(this.resetTable(),this.Cg.Dr(),this.kg()))&&(this.Fg(),this.Cg.Dr(),this.kg()&&(this.resetTable(),this.Cg.Dr(),1))):(this.Tg()&&this.resetTable(),!0)}Tg(){for(let t=0;t<this._g.length;t+=1)if(this._g[t].isAltered())return!0;return!1}resetTable(){for(let t=0;t<this._g.length;t+=1)this._g[t].resetValue();return this}kg(){const t=this.xg.kg();return t.x||t.y}Ig(){return this.xg.kg().x}Pg(){return this.xg.kg().y}Lg(t){return this._g.push(t),t}}class Ha extends Xa{constructor(){super(...arguments),this.xl=this.Lg(new Na((t=>this.Cg.setOrigin(t)),(()=>this.Cg.getOrigin())))}Fg(){const t=this.xl.getNormalValue(),e=l(this.Ig()?-t.x:t.x,this.Pg()?-t.y:t.y);this.xl.alter(e)}}class Ga extends Xa{constructor(t,e,i){super(t),this.Bg=this.Lg(new Na((t=>this.Cg.setTextFont((e=>e.setSize(t)))),(()=>this.Cg.getTextFont().getSize()))),this.Dg=e,this.Eg=i}Fg(){const t=this.Bg.getNormalValue(),e=this.Dg;if(e<t)for(let i=1;i<=this.Eg;i+=1){const s=t-(t-e)*(i/this.Eg);if(this.Bg.alter(s),this.Cg.Dr(),!this.kg())return}}}const Ya={Flip:t=>new Ha(t),FontSize:(t=5,e=5)=>i=>new Ga(i,t,e)},Wa={None:$n,Rectangle:Wo,Circle:jo,Diamond:$o,Pointer:Qo};class ja extends sh{constructor(t,i,s,r,n,o){super(t,i,s,r,n,o),this.Xn=this.Ct.cursorResultTableTextFont,this.cf=0,this.Rg=this.Ct.cursorResultTableTextFillStyle,this.zn=100,this.Wh=e.TextObjectIdentifier.CursorResultTable}setContent(t){var e;let i;void 0===t?i=[]:Array.isArray(t)?(i=[],t.forEach((t=>{i.push(Array.isArray(t)?t:[t])}))):i=[[t]];for(let t=0;t<i.length;t+=1){const e=i[t];let s=!1;for(let t=0;t<e.length;t+=1){const i=e[t],r="object"==typeof i&&"text"in i?i.text:"string"==typeof i?i:void 0,n="object"==typeof i&&"icon"in i?i.icon:lr(i)?i:void 0,o=i instanceof Cs&&i;if(!(r&&r.length>0||n||o)){s=!0;break}}s||(e.unshift(""),e.push(""))}const s=i.length;let r=this.getMembers().length;for(let t=0;t<Math.max(s,r);t+=1){const o=this.getRow(t,!0);if(t>=s)this.getMembers()[t].dispose(),t-=1,r-=1;else{const r=i[t].length;let h=o.getMembers().length;for(let a=0;a<Math.max(r,h);a+=1){const l=i[t][a],c="object"==typeof l&&"font"in l?l.font:void 0,u="object"==typeof l&&"fillStyle"in l?l.fillStyle:void 0,d="object"==typeof l&&"text"in l?l.text:"string"==typeof l?l:void 0,f="object"==typeof l&&"icon"in l?l.icon:lr(l)?l:void 0,g=l instanceof Cs&&l||("object"==typeof l&&"component"in l?l.component:void 0),y="object"==typeof l&&"componentColor"in l&&l.componentColor,p="object"==typeof l&&"rowFillStyle"in l?l.rowFillStyle:void 0,m=o.getMembers();if(a>=r)o.getMembers()[a].dispose(),a-=1,h-=1;else if(void 0!==d&&d.length>0||f||g){const i=c?this.Xn.withMutations((t=>{for(const e of Object.keys(c)){const i=c[e];void 0!==i&&t.set(e,i)}return t})):this.Xn,r=u||this.Rg,h=m[a];if(d){let t;h&&h instanceof Go?t=h:(h&&h.dispose(),t=o.addElement(Yo,a)),t.setText(d).setFont(i).setFillStyle(r).setTextRotation(this.cf)}else if(f){let t;h&&h instanceof Jo?t=h:(h&&h.dispose(),t=o.addElement(qo,a)),t.setFillStyle(r).setShape(f).setSize({y:i.size,x:i.size}),t.setMargin(null!==(e=this.Ct.uiTextPadding)&&void 0!==e?e:5)}else if(g){let t;h&&"setTextFillStyleHidden"in(n=h)&&"setText"in n?t=h:(h&&h.dispose(),t=o.addElement(mh.setBackground(Wa.None),a).setOn(!0));const e=g.$s();void 0!==e&&t.setButtonShape(e),t.setText(g.getName()).setTextFont(i).setTextFillStyle(r).setTextRotation(this.cf),g.styleLegendEntry(t),y&&t.setButtonOnFillStyle(new N({color:y}))}p&&o.setBackground((e=>{e.setFillStyle(p);const i=this.getBackground();Ts(i)&&e instanceof Wo&&e.setCornerRadius(i.getCornerRadius(),{topLeft:0===t,topRight:0===t,bottomLeft:t===s-1,bottomRight:t===s-1})}))}else{const t=m[a];t&&t instanceof Zo||(t&&t.dispose(),o.addGap(void 0,a))}}}}var n;return this.Hs.Bs(),this}qe(){if(super.qe(),this.Hs.St.Fu&&this.getVisible()){const t=Pn(this);this.Hs.St.Fu.FA({...t,blacklist:[e.TextObjectIdentifier.CursorResultTable]})}return this}setTextFillStyle(t){this.Rg="function"==typeof t?t(this.Rg):t;for(let t=0;t<this.getMemberCount();t+=1){const e=this.getRow(t);for(let t=0;t<e.getMembers().length;t+=1){const i=e.getMembers()[t];i instanceof Go&&i.setFillStyle(this.Rg)}}return this.Hs.Bs(),this}getTextFillStyle(){return this.Rg}setTextFont(t){return Gs(t)?this.Xn=t:this.Xn=t(this.Xn),this.Hs.Bs(),this}getTextFont(){return this.Xn}setTextRotation(t){return this.cf=t,this.Hs.Bs(),this}getTextRotation(){return this.cf}zg(){for(let t=0;t<this.Jd.length;t+=1)for(let e=0;e<this.Jd[t].getMembers().length;e+=1)this.Jd[t].getMembers()[e].dispose()}Dr(){for(let t=0;t<this.Jd.length;t+=1)this.Jd[t].setMinimumSize(void 0);super.Dr();for(let t=0;t<this.Jd.length;t+=1)this.Jd[t].setMinimumSize(this.size.x);return super.Dr(),this}}class $a{constructor(t,e,i,s,r,n){this.Og=[],this.Vg=!0,this.Ng=!0,this.UA=!1,this.At=!0,this.ft=!1,this.Gg=[],this.R=new Ct,this.Hs=t,this.renderingScale=e,this.scale=i,this.Ug=s,this.$g=r,this.Ct=n,this.Cg=new ja(this.Hs,this.renderingScale,this.scale,this.$g,qt,n).setPointerEvents(!1).setBackground((t=>t.setFillStyle(n.cursorResultTableFillStyle).setStrokeStyle(n.cursorResultTableStrokeStyle))).setTextFillStyle(n.cursorResultTableTextFillStyle).setTextFont(n.cursorResultTableTextFont),this.Yg=Ya.Flip(this)}isDisposed(){return this.ft}setPointMarkerVisible(t){return this.Vg=t,this.Og.forEach((e=>e.pointMarker.setVisible(e.targetVisible&&t))),this.Hs.Bs(),this}getPointMarkerVisible(){return this.Vg}setPointMarker(t){return this.Og.forEach((e=>t(e.pointMarker))),this.Gg.push(t),this.Hs.Bs(),this}setResultTableVisible(t){return this.Ng=t,this.Hs.Bs(),this}getResultTableVisible(){return this.Ng}setResultTable(t){return t(this.Cg),this.Hs.Bs(),this}setAutoFitStrategy(t){return this.Yg&&this.Yg.resetTable(),this.Yg=t?t(this):void 0,this.Hs.Bs(),this}getAutoFitStrategy(){return void 0!==this.Yg}setVisible(t){return this.At=t,this.Hs.Bs(),this}getVisible(){return this.At}dispose(){return this.Og.forEach((t=>t.pointMarker.dispose())),this.Cg.dispose(),this.Gg.length=0,this.Ug(this),this.R.O("dispose",{}),this}kg(){const t=this.Cg,i=this.Hs.St.ct,s=ot(t.getPosition(l(-1,-1),e.UISpace.PaddedBackground),t.scale,i),r=ot(t.getPosition(l(1,1),e.UISpace.PaddedBackground),t.scale,i);return{x:s.x<i.x.getInnerStart()||r.x>i.x.getInnerEnd(),y:s.y<i.y.getInnerStart()||r.y>i.y.getInnerEnd()}}qe(){return this.Yg&&this.Yg.update(),this.Og.forEach((t=>t.pointMarker.setVisible(t.targetVisible&&this.UA&&this.At&&this.Vg))),this.Og.forEach((t=>t.pointMarker.qe())),this.Cg.qe(),this}Dr(){return this.Cg.setVisible(this.UA&&this.At&&this.Ng),this.Og.forEach((t=>t.pointMarker.Dr())),this.Cg.Dr(),this}Hg(t,e){const i=e===this.scale?t:ot(t,e,this.scale);this.Cg.setPosition(i)}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const Qa=(t,e)=>t.setResultTable((t=>t.setEffect(!0).setOrigin(l(-1,-1)).setMargin(5).setBackground((t=>{e.cursorResultTableBorderRadius&&Ts(t)&&t.setCornerRadius(e.cursorResultTableBorderRadius)}))));class Ja extends $a{setPosition(...t){const e=this.renderingScale;if(t.length>0){const i=Ba(t[0].resultTableScale,e),s=i===this.scale?t[0].resultTable:ot(t[0].resultTable,i,this.scale);this.Cg.setPosition(s)}return this.UA=!1,this.Og.forEach((t=>{t.targetVisible=!1})),t.forEach(((t,i)=>{const s=Ba(t.pointMarkerScale,e),r=s===this.scale?t.pointMarker:ot(t.pointMarker,s,this.scale);let n=this.Og[i];if(!n){const t=new Jo(this.Hs,this.renderingScale,this.scale,qt,this.Ct).setPointerEvents(!1).setFillStyle(this.Ct.cursorPointMarkerFillStyle).setSize(this.Ct.cursorPointMarkerSize).setShape(this.Ct.cursorPointMarkerShape);n={pointMarker:t,targetVisible:!0},this.Og.push(n),this.Gg.forEach((e=>e(t)))}n.pointMarker.setPosition(r),n.targetVisible=((t,e,i=e)=>{const s=e!==i?ot(t,e,i):t;return s.x>=i.x.getInnerStart()&&s.x<=i.x.getInnerEnd()&&s.y>=i.y.getInnerStart()&&s.y<=i.y.getInnerEnd()})(t.pointMarker,s),n.targetVisible&&(this.UA=!0)})),this.Hs.Bs(),this}}class qa{constructor(t,e=[]){this.Xg=[],this.Wg=(t,e)=>(this.Xg.forEach((i=>i(t,e))),t),this.addStyler=t=>new qa(this.$g,this.Xg.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new qa(t,this.Xg.map((t=>t))),this.jg=(t,e,i,s,r)=>this.Wg(new Ja(t,e,i,s,this.$g,r),r),this.$g=t,this.Xg=e}}const Za=new qa(Wo,[Qa]),Ka=Za,tl=Za,el=Za,il=Za,sl=Ka,rl=new qa(Wo,[Qa,t=>t.setPointMarkerVisible(!1).setResultTable((t=>t.setOrigin(Wr.LeftBottom)))]),nl=Za;var ol;e.SliceLabelIndices=void 0,(ol=e.SliceLabelIndices||(e.SliceLabelIndices={}))[ol.LabelsInsideSlices=0]="LabelsInsideSlices",ol[ol.LabelsOnSides=1]="LabelsOnSides";const hl={SortByName:(t,e)=>t.getName().localeCompare(e.getName(),void 0,{numeric:!0}),SortByValueAscending:(t,e)=>Math.abs(t.getAnimatedValue())-Math.abs(e.getAnimatedValue()),SortByValueDescending:(t,e)=>Math.abs(e.getAnimatedValue())-Math.abs(t.getAnimatedValue()),None:()=>0},al={Name:t=>`${t.getName()}`,NamePlusValue:t=>`${t.getName()}: ${Math.round(t.getAnimatedValue())}`,NamePlusRelativeValue:(t,e)=>`${t.getName()}: ${(100*e).toFixed(2)}%`};class ll extends Cs{constructor(t,e,i,s){super(t,e,i,s),this.Rs="Slice",this.M=0,Wt.requestAnimationFrame((()=>{this.addEventListener("pointermove",(()=>{this.chart.St.Bs()}))}))}}class cl extends ll{}class ul extends cl{constructor(t,e,i,s,r,n,o,h){super(s,n,o,h),this.Zg=!1,this.Qg=V,this.Jg=V,this.Kg=this.M,this.qg=this.Zg?1:0,this.tp=this.getVisible(),this.ip=wt((()=>this.chart.St.Bs())),this.sp=wt((()=>this.chart.St.Bs())),this.ep=()=>{this.hp=void 0},this.rp=()=>{this.np=void 0},this.R=new Ct,this.index=t,this.chart=s,this.scale=r,this.As=n,this.op=e.Pd(r).Dt(this.getHighlight()),this._s(this.op),this.Lr=i.mn(r).Dt(this.getHighlight()),this._s(this.Lr,{isText:!0}),this.addEventListener("click",(t=>{t.defaultPrevented||((t,e)=>{Se(e),t.setExploded(!t.getExploded())})(this,t)}))}setValue(t){return this.chart.getAnimationsEnabled()?this.tp&&this.ap(this.Kg,t):this.Kg=t,this.M=t,this.chart.St.Bs(),this}getValue(){return this.M}setExploded(t){if(t&&!1===this.chart.getMultipleSliceExplosion()){const t=this.chart.getSlices();for(let e=0;e<t.length;e+=1)t[e]!==this&&t[e].getExploded()&&t[e].setExploded(!1)}return this.chart.getAnimationsEnabled()?(this.np&&this.np.finish(),this.np=this.sp(300,Tt.ease)([[this.qg,t?1:0]],(([t])=>{this.qg=t,this.chart.St.Bs()})),this.np.addEventListener("everyAnimationEnd",this.rp),this.Zg=!this.Zg):!1!==this.chart.getMultipleSliceExplosion()||t?(this.qg=this.Zg?0:1,this.Zg=!this.Zg):(this.qg=0,this.Zg=!this.Zg),this.chart.St.Bs(),this}getExploded(){return this.Zg}setVisible(t){return this.tp=t,!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.Kg)>0?(this.hp&&(this.hp.finish(!1),this.hp=void 0),this.ap(this.Kg,0,(()=>super.setVisible(!1)))):(this.Kg=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.hp&&(this.hp.finish(!1),this.hp=void 0),super.setVisible(!0),this.ap(this.Kg,this.M)):(this.Kg=this.M,super.setVisible(!0)),this}ap(t,e,i){this.hp=this.ip(300,Tt.ease)([[t,e]],(([t])=>{this.Kg=t,this.chart.St.Bs()})),this.hp.addEventListener("everyAnimationEnd",this.ep),i&&this.hp.addEventListener("end",i)}setStyle(t,e,i,s,r){this.Qg=t,this.Jg=i,this.op.Je(this.Qg).Qe(e),this.Lr.Je(this.Jg).Sr(s).Wr(r);for(let t=0;t<this.fs.length;t+=1)this.styleLegendEntry(this.fs[t])}getAnimatedValue(){return this.Kg}getAnimatedExplosion(){return this.qg}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.Qg,stroke:this.op.Ua()})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const dl=(t,e,i)=>Li(e,Oi(Gi(.5*(t.eu()+t.Yi())*Math.PI/180),i)),fl=(t,e,i,s,r,n)=>{const o=t.length;let h=90;for(let a=0;a<o;a+=1){const l=t[a],c=h-360*e[a],u=l.getAnimatedExplosion();if(0===u||1===o)l.op.th(i);else{const t=Li(i,Oi(Gi(.5*(h+c)*Math.PI/180),n*u));l.op.th(t)}l.op.lu(h).dh(c).uu(s).du(s).fu(r),h=c}};class gl extends Oa{constructor(t,e,i,s,r,n,o){super(t,e,i,e.lg("pieChart bg",0),s,e.St.Ct.pieChartBackgroundFillStyle,e.St.Ct.pieChartBackgroundStrokeStyle,e.St.Ct.pieChartTitleFont,e.St.Ct.pieChartTitleFillStyle,e.St.Ct.pieChartTitleShadow,n),this.lp=[],this.cp=hl.SortByName,this.Qc=0,this.up=this.Ct.pieChartSliceFillStylePalette,this.dp=this.Ct.pieChartSliceStrokeStyle,this.fp=!0,this.Ap=this.Ct.pieChartSliceLabelFont,this.gp=this.Ct.pieChartSliceLabelFillStyle,this.pp=this.Ct.pieChartSliceLabelShadow,this.vp=0,this.yp=!1,this.mp=20,this.xp=!0,this.Sp=!0,this.bp=t=>{const e=this.lp.indexOf(t);e>=0&&(this.lp.splice(e,1),this.Mp())},this.R=new Ct,this.St.Ma(zn.vo),this.wp=e._p("pieChart bottom",0),this.Cp=e._p("pieChart top",1),this.Uh.jr("Pie Chart"),this.ag(r,this.oA),this.background.addEventListener("dblclick",(t=>{t.defaultPrevented||(()=>{const t=this.getSlices();for(let e=0;e<t.length;e+=1)t[e].setExploded(!1)})()}));const h=e.kp(),a=ee(o?o.cursorBuilder:void 0,el);this.Tp=Ua(this,h,a.jg(h,this.uiScale,this.uiScale,qt,this.Ct),void 0,"show-pointed",yl,(()=>0)),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled))}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}addCursor(t=el){const e=this.JA(),i=t.jg(e,this.uiScale,this.uiScale,this.XA(e),this.Ct);return this.rg(i),i}addSlice(t,e){const i=new ul(this.vp,this.wp,this.Cp,this,this.oA,this.bp,this.Ct,this.St.vs);this.vp+=1,i.setName(t);const s=this.Bh;return this.Bh=!1,i.setValue(e),this.Bh=s,i.setEffect(this.xp),this.Fp(i),this.lp.push(i),this.Mp(),i.setHighlightOnHover(this.fp),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.lp}setMultipleSliceExplosion(t){return this.yp=t,this}getMultipleSliceExplosion(){return this.yp}setInnerRadius(t){return this.Qc=t,this.St.Bs(),this}getInnerRadius(){return this.Qc}setSliceExplosionOffset(t){return this.mp=t,this.St.Bs(),this}getSliceExplosionOffset(){return this.mp}setLUT(t){return this.mf=t,this.St.Bs(),this}setSliceFillStyle(t){this.up=t;for(let t=0;t<this.lp.length;t+=1)this.Fp(this.lp[t]);return this.St.Bs(),this}getSliceFillStyle(){return this.up}setSliceStrokeStyle(t){this.dp="function"==typeof t?t(this.dp):t;for(let t=0;t<this.lp.length;t+=1)this.Fp(this.lp[t]);return this.St.Bs(),this}getSliceStrokeStyle(){return this.dp}setSliceEffect(t){return this.xp=t,this.lp.forEach((e=>e.vs.Ss.Ls(t))),this.St.Bs(),this}getSliceEffect(){return this.xp}setSliceSorter(t){return this.cp=t,this.lp=this.lp.sort(this.cp),this.St.Bs(),this}getSliceSorter(){return this.cp}setLabelFillStyle(t){this.gp="function"==typeof t?t(this.gp):t;for(let t=0;t<this.lp.length;t+=1)this.Fp(this.lp[t]);return this.St.Bs(),this}getLabelFillStyle(){return this.gp}setLabelShadow(t){return this.pp=t,this.St.Bs(),this}getLabelShadow(){return this.pp}setLabelFont(t){this.Ap="function"==typeof t?t(this.Ap):t;for(let t=0;t<this.lp.length;t+=1)this.Fp(this.lp[t]);return this.St.Bs(),this}getLabelFont(){return this.Ap}setLabelEffect(t){return this.Sp=t,this.lp.forEach((e=>e.vs.xs.Ls(t))),this.St.Bs(),this}getLabelEffect(){return this.Sp}setLabelFormatter(t){return this.Ip=t,this.St.Bs(),this}getLabelFormatter(){return this.Ip}setSliceHighlightOnHover(t){return this.fp=t,this.lp.forEach((e=>e.setHighlightOnHover(t))),this}qe(t){super.qe(t),La.yg(this.Uh,this.cg),super.og();const e=La.vg(this.Uh,this.cg),i=l(this.oA.x.getInnerInterval()-(this.Dn.left+this.Dn.right),this.oA.y.getInnerInterval()-(this.Dn.bottom+this.Dn.top+e)),s=l(this.Dn.left+i.x/2,this.Dn.bottom+i.y/2);if(this.mf){const t=this.mf;this.lp.forEach((e=>{this.Fp(e,new N({color:t.getColors(e.getAnimatedValue(),void 0)}))}))}for(let t=0;t<this.lp.length;t+=1){const e=Math.abs(this.lp[t].getAnimatedValue())>0;this.lp[t].op.setVisible(e),this.lp[t].Lr.setVisible(e)}this.lp=this.lp.sort(this.cp);const r=this.lp.filter((t=>Math.abs(t.getAnimatedValue())>0));let n=0;for(let t=0;t<r.length;t+=1)n+=Math.abs(r[t].getAnimatedValue());const o=[];for(let t=0;t<r.length;t+=1)o.push((h=Math.abs(r[t].getAnimatedValue()))>0?h/n:0);var h;for(let t=0;t<r.length;t+=1){const e=r[t];e.Lr.jr(this.Ip(e,o[t])).Dr()}this.Tp.qe(!1,this.lp,((t,e,i)=>{const s=o[r.indexOf(t)]||0,n=this.St.Wa(e);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.St.ct,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.St.ct},slice:t,category:t.getName(),value:t.getValue(),relativeValue:s}})),this.Pp(r,o,s,i)}Fp(t,e=this.up(t.index,t)){t.setStyle(e,this.dp,this.gp,this.Ap,this.pp)}Mp(){this.lp=this.lp.sort(this.cp),this.St.Bs()}kf(){return this.lp}dispose(){return super.dispose(),this.lp.slice().forEach((t=>t.dispose())),this.Tp.U(),this.Cp.U(),this.wp.U(),this}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const yl=(t,e,i)=>[[{component:e.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:e.value.toString(),font:{weight:"bold"}}]],pl={UserSeries:{type:"ApplicationType",args:{type:"UserSeries"}},InternalUI:{type:"ApplicationType",args:{type:"InternalUI"}}},ml=(...t)=>{const e=[];return t.forEach((t=>{var i;t&&"object"==typeof(i=t)&&i&&"pattern"in i&&e.push({type:"DataPattern",args:t})})),e};class xl extends gl{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n,o),this.Ip=al.NamePlusValue,this.Lp=[],this.Bp=40,this.Dp=5,this.Ep=10,this.Rp=this.Ct.pieChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Rp=t;for(let t=0;t<this.Lp.length;t+=1)this.Lp[t].ah(this.Rp);return this.St.Bs(),this}getLabelConnectorStyle(){return this.Rp}setLabelSliceOffset(t){return this.Bp=t,this.St.Bs(),this}getLabelSliceOffset(){return this.Bp}setLabelConnectorGapStart(t){return this.Dp=t,this.St.Bs(),this}getLabelConnectorGapStart(){return this.Dp}setLabelConnectorEndLength(t){return this.Ep=t,this.St.Bs(),this}getLabelConnectorEndLength(){return this.Ep}Pp(t,e,i,s){const r=this.Ap.getSize(),n=this.Bp,o=this.Ep,h=this.Dp,a=Math.min(this.mp,n-h);let l=0;if(1===t.length)l=t[0].Lr.Pu().x;else for(let e=0;e<t.length;e+=1)l=Math.max(l,t[e].Lr.Pu().x);const c=Math.max(.5*(Math.min(s.x-2*l-2*o,s.y-2*r)-2*n),0);if(c<50){const n=Math.max(.5*Math.min(s.x,s.y-2*r),0);fl(t,e,i,n,this.Qc,a),t.forEach((t=>t.Lr.setVisible(!1))),this.Lp.forEach((t=>t.setVisible(!1)))}else{fl(t,e,i,c,this.Qc,a);let s=90;const r=t.map(((t,r)=>{const h=360*e[r],a=s-h,l=Gi(Xi(.5*(s+a))),u=l.x>=0?-1:1,d=Li(Li(i,Oi(l,c+n)),{x:u*-o,y:0});s=a;const f={x:u,y:0};t.Lr.th(d).Ul(f),t.Lr.Dr();const g=t.Lr.Tu();return{position:d,alignment:f,shape:t.Lr,boundaries:g,sliceAngleVec:l,slice:t}})),l=[];for(let t=0;t<r.length;t+=1){const e=r[t],i=l[l.length-1];i&&!1!==yi([i.boundaries,e.boundaries])?e.shape.setVisible(!1):(l.push(e),e.shape.setVisible(!0))}for(let t=0;t<this.Lp.length;t+=1)this.Lp[t].setVisible(!1);l.forEach(((t,e)=>{const s=t.slice.op,r=dl(s,i,c+h+a*t.slice.getAnimatedExplosion()),n=Ni(t.position.y,r,i),o=t.position;this.zp([r,n,o])}))}}getMinimumSize(){return l(500,300)}zp(t){let e;for(let t=0;t<this.Lp.length;t+=1)if(!this.Lp[t].getVisible()){e=this.Lp[t].setVisible(!0);break}void 0===e&&(e=this.Cp.Op(this.oA,void 0,[pl.InternalUI]).ah(this.Rp).setPointerEvents(!1),this.Lp.push(e)),e.ii().dc(t)}}class Sl extends gl{constructor(){super(...arguments),this.Ip=al.Name,this.Vp=.5}Pp(t,e,i,s){const r=this.mp,n=Math.max(0,.5*Math.min(s.x,s.y)-r);fl(t,e,i,n,this.Qc,r);for(let e=0;e<t.length;e+=1){const s=t[e],o=s.op,h=s.Lr,a=this.Qc/100,l=((1-a)*this.Vp+a)*n+s.getAnimatedExplosion()*r,c=dl(o,i,l);h.th(c).zl(0).Nl(0)}}getMinimumSize(){return l(200,200)}setLabelPosition(t){return this.Vp=t,this.St.Bs(),this}getLabelPosition(){return this.Vp}}const vl={LabelsOnSides:xl,LabelsInsideSlices:Sl},Al=t=>{if(ir(t)){const e=t.getThickness(),i=t.getFillStyle();if(X(i))return 1===e?Ws:new $s({size:e,fillStyle:i,shape:"sphere"})}return Ws};class bl{constructor(t,e,i,s,r,n,o,h,a,l){this.M=0,this.At=!0,this.ft=!1,this.dt=!0,this.R=new Ct,this.Bs=t,this.Np=e,this.Gp=i,this.$p=s,this.Yp=r,this.Hp=n,this.cf=o,this.Rg=h,this.Xp=a,this.ho=l}setValue(t){return t===this.M||(this.M=t,this.Bs(),this.R.O("valuechange",{value:this.M})),this}getValue(){return this.M}setTickStyle(t){return this.Gp="function"==typeof t?t(this.Gp):t,this.Bs(),this}getTickStyle(){return this.Gp}setTickLength(t){return this.$p=t,this.Bs(),this}getTickLength(){return this.$p}setGridStrokeStyle(t){return this.Yp="function"==typeof t?t(this.Yp):t,this.Bs(),this}getGridStrokeStyle(){return this.Yp}setTextPadding(t){return this.Hp=t,this.Bs(),this}getTextPadding(){return this.Hp}setTextRotation(t){return this.cf=t,this.Bs(),this}getTextRotation(){return this.cf}setTextFillStyle(t){return this.Rg="function"==typeof t?t(this.Rg):t,this.Bs(),this}getTextFillStyle(){return this.Rg}setTextFont(t){return this.Xp="function"==typeof t?t(this.Xp):t,this.Bs(),this}getTextFont(){return this.Xp}setTextFormatter(t){return this.ho=t,this.Bs(),this}dispose(){return this.ft||(this.ft=!0,this.Np(),this.Bs(),this.R.O("dispose",{})),this}isDisposed(){return this.ft}setVisible(t){const e=this.At!==t;return this.At=t,e&&(this.R.O("visiblechange",{isVisible:this.At}),this.Bs()),this}getVisible(){return this.At}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}setPointerEvents(t){return this.dt=t,this.Bs(),this}getPointerEvents(){return this.dt}}class Cl extends bl{constructor(t,e,i,s,r,n,o,h,a,l,c,u,d){super(t,e,i,s,r,n,o,h,a,l),this.Wp=c,this.jp=u,this.Dn=d}setBackgroundFillStyle(t){return this.Wp="function"==typeof t?t(this.Wp):t,this.Bs(),this}getBackgroundFillStyle(){return this.Wp}setBackgroundStrokeStyle(t){return this.jp="function"==typeof t?t(this.jp):t,this.Bs(),this}getBackgroundStrokeStyle(){return this.jp}setPadding(t){return this.Dn="number"==typeof t?{left:t,top:t,right:t,bottom:t}:{...this.Dn,...t},this.Bs(),this}getPadding(){return this.Dn}}class Ml{constructor(t,e,i,s){this.Zp=[],this.Qp=new Map,this.Jp=t,this.Kp=e,this.qp=i,this.tv=s}sv(){this.qp&&this.qp();const t=[];return{add:(e,i)=>{t.push({instanceUniqueProperties:e,instanceSharedProperties:i})},finishPlot:()=>{const e=[];let i=[];t.forEach((t=>{const i=e.find((e=>((t,e)=>{const i=Object.keys(t);for(const s of i)if(t[s]!==e[s])return!1;return!0})(e.sharedProperties,t.instanceSharedProperties)));i?i.instances.push(t.instanceUniqueProperties):e.push({sharedProperties:t.instanceSharedProperties,instances:[t.instanceUniqueProperties]})}));const s=this.Zp.slice(),r=[];e.forEach((t=>{let e=s.pop();e||(e=this.Jp(),this.Zp.push(e));const n=[],o=e.ev().slice();t.instances.forEach(((t,e)=>{const i=o.shift();n.push({...t,existingMember:i})}));const h=this.Kp(e,n,t.sharedProperties);i=ke(i,h,{canReturnB:!0});for(let i=0;i<t.instances.length;i+=1)r.push({wt:t.instances[i].wt,collection:e,member:h[i]});o.forEach((t=>{null==e||e.qd(t)}))})),s.forEach((t=>{t.dispose();const e=this.Zp.indexOf(t);e<0?_e(0,(()=>{})):this.Zp.splice(e,1)})),r.forEach((t=>{const e=this.Qp.get(t.wt);e&&t.collection.St.Ea({entity:e.collection,collectionMember:e.member},{entity:t.collection,collectionMember:t.member})})),this.Qp.clear(),r.forEach((t=>{this.Qp.set(t.wt,t)})),this.tv&&this.tv(this.Zp,i)}}}hv(){this.Zp.forEach((t=>{t.dispose()})),this.Zp.length=0}}class Tl{constructor(t){this.rv=[],this.nv=t}sv(){return this.ov(),{add:()=>this.ac(),finishPlot:()=>{this.av()}}}ac(){let t=this.rv.find((t=>t.isFree));return t||(t={isFree:!1,shape:this.nv()},this.rv.push(t)),t.isFree=!1,t.shape}ov(){this.rv.forEach((t=>{t.isFree=!0}))}av(){this.rv.filter((t=>t.isFree)).forEach((t=>{t.shape.dispose(),this.rv.splice(this.rv.indexOf(t),1)}))}hv(){this.rv.forEach((t=>t.shape.dispose())),this.rv.length=0}}class El extends Tn{constructor(t,e,i,s,r,n,o,h,a){super(t,e,i,s,h,{numeric:e.lv({x:t.St.Ct.xAxis3DNumericTicks,y:t.St.Ct.yAxis3DNumericTicks,z:t.St.Ct.zAxis3DNumericTicks}),datetime:e.lv({x:t.St.Ct.xAxis3DDateTimeTicks,y:t.St.Ct.yAxis3DDateTimeTicks,z:t.St.Ct.zAxis3DDateTimeTicks}),time:e.lv({x:t.St.Ct.xAxis3DTimeTicks,y:t.St.Ct.yAxis3DTimeTicks,z:t.St.Ct.zAxis3DTimeTicks})},{type:"linear"}),this.Ef=[],this.R=new Ct,this.chart=t,this.cv=r,this.uv=n,this.dv=o,this.fv=this.cv.ct;const l=this.er.lv({x:this.Ct.xAxis3DStrokeStyle,y:this.Ct.yAxis3DStrokeStyle,z:this.Ct.zAxis3DStrokeStyle});this.Av=this.cv.Op([pl.InternalUI]).ah(l).gv(Al(l)).setPointerEvents(!1),this.jh=this.uv.mn(this.dv).setPointerEvents(!1).Je(e.lv({x:t.St.Ct.xAxis3DTitleFillStyle,y:t.St.Ct.yAxis3DTitleFillStyle,z:t.St.Ct.zAxis3DTitleFillStyle})).Sr(e.lv({x:t.St.Ct.xAxis3DTitleFont,y:t.St.Ct.yAxis3DTitleFont,z:t.St.Ct.zAxis3DTitleFont})).Ka(3),this.pv=new Tl((()=>this.uv.mn(this.dv).Ka(2).yn(qe).vn(qe))),this.vv=new Ml((()=>this.uv.yv(this.dv).setPointerEvents(!1).Ka(1)),((t,e,i)=>(t.Je(i.fillStyle).Qe(i.strokeStyle),e.map((({positions:e,existingMember:i})=>{const s=i||t.Oo();return s.wc(e),s}))))),this.mv=new Ml((()=>this.cv.CA().setPointerEvents(!1)),((t,e,i)=>(t.ii().ah(i.lineStyle),e.map((({positions:e,existingMember:i})=>i||t.dc(e)))))),this.vs=a,this.wr=this.vs.dA([this.jh]).Ls(s.effectsText),i.tA=this}setTickStrategy(t,e){return super.ar(t,e)}getTickStrategy(){return this.Fh}addCustomTick(){const t=new Cl((()=>this.chart.St.Bs()),(()=>{const e=this.Ef.indexOf(t);e>=0&&this.Ef.splice(e,1)}),this.Ct.xAxis3DNumericTicks.majorTickStyle.tickStyle,this.Ct.xAxis3DNumericTicks.majorTickStyle.tickLength,this.Ct.xAxis3DNumericTicks.majorTickStyle.gridStrokeStyle,this.Ct.xAxis3DNumericTicks.majorTickStyle.tickPadding,this.Ct.xAxis3DNumericTicks.majorTickStyle.labelRotation,this.Ct.xAxis3DNumericTicks.majorTickStyle.labelFillStyle,this.Ct.xAxis3DNumericTicks.majorTickStyle.labelFont,(t=>this.formatValue(t)),V,Ot,{left:4,right:4,top:4,bottom:4});return this.Ef.push(t),this.chart.St.Bs(),t}setStrokeStyle(t){return this.Av.ah(t).gv(Al(this.Av.ro())),this.chart.St.Bs(),this}getStrokeStyle(){return this.Av.ro()}setVisible(t){return super.setVisible(t),this.Av.setVisible(t),!1===t&&(this.mv.hv(),this.pv.hv(),this.vv.hv()),this.cv.Bs(),this}mA(){return this.chart.getSeries()}An(t,e,i){const s=Math.abs(this.ct.K(Math.abs(e-t))*this.cv.xv(1));return{start:t+i.start*s*Math.sign(t-e),end:e+i.end*s*Math.sign(e-t)}}Or(t){const e=this.fv,i=d(e.x.it(),e.y.it(),e.z.it()),{gridlinePositionA:s,gridlinePositionB:r,gridlinePositionC:n}=this.er.Sv(t.cameraDirection),o=t=>({x:-1===t.x?this.fv.x.getInnerStart():1===t.x?this.fv.x.getInnerEnd():0,y:-1===t.y?this.fv.y.getInnerStart():1===t.y?this.fv.y.getInnerEnd():0,z:-1===t.z?this.fv.z.getInnerStart():1===t.z?this.fv.z.getInnerEnd():0}),h=o(s),a=o(r),c=o(n),u=this.er.Ff,f=bi(t.start,t.end,.5),g=oi.addVec(f,oi.multiplyVec(oi.multiply(u,-1),i)),y=this.cv.bv(f)||l(0,0),p=this.cv.bv(g)||l(0,0);return{center:f,wuSize:i,tickDirection3D:u,tickDirection2D:Ri(Di(ot(y,this.chart.St.ct,this.dv),ot(p,this.chart.St.ct,this.dv))),gridlinePositionA:h,gridlinePositionB:a,gridlinePositionC:c}}Ur(t,e,i,s,r){return{...this.Mv(r,t,e.kh.tickLength,e.kh.tickPadding),keyValue:t,tickLevel:e,labelText:i,labelOffset:{x:0,y:0},labelRotation:e.kh.labelRotation}}Zr(t,e){const i=new wl(e,t,this.uv,this.dv,this.cv);return i.Lr.Ka(0),i}Hr(t,e,i){return{ticksInfo:e,updatedTicks:i}}Qh(){return this.dv}Mv(t,e,i,s){const{wuSize:r,start:n,end:o,tickDirection3D:h,tickDirection2D:a}=t,c=(e-this.ct.getInnerStart())/(this.ct.getInnerEnd()-this.ct.getInnerStart()),u=oi.addVec(bi(n,o,c),oi.multiplyVec(oi.multiply(h,this.cv.xv(.5*this.Av.ro().getThickness())),r)),d=oi.addVec(u,oi.multiplyVec(oi.multiply(h,this.cv.xv(i)),r)),f=this.cv.bv(d)||l(0,0);return{labelPosition:Li(ot(f,this.chart.St.ct,this.dv),Oi(a,s)),labelAlignment:{x:-a.x,y:-a.y},posTickEnd3D:d,posTickStart3D:u,tickPositionRelative:c}}wv(t,e,i){const{wuSize:s,start:r,end:n,tickDirection3D:o}=e,h=(t-this.ct.getInnerStart())/(this.ct.getInnerEnd()-this.ct.getInnerStart()),a=oi.addVec(bi(r,n,h),oi.multiplyVec(oi.multiply(o,this.cv.xv(.5*this.Av.ro().getThickness())),s)),c=oi.addVec(a,oi.multiplyVec(oi.multiply(o,this.cv.xv(10)),s)),u=this.cv.bv(a)||l(0,0),d=this.cv.bv(c)||l(0,0);return this.uv.uh(this.dv).fh(u).dh(d).ah(new er({fillStyle:new N({color:T(120*i)}),thickness:1}))}un(t,e){return Bl(t,e,this.ct)}_v(t){const e=this.fv;let i,s;this.Cv()?(i=d(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerStart()),s=d(e.x.getInnerEnd(),e.y.getInnerStart(),e.z.getInnerEnd())):(i=d(e.x.getInnerStart(),e.y.getInnerStart(),e.z.getInnerStart()),s=this.er.kv(d(e.x.getInnerEnd(),e.y.getInnerEnd(),e.z.getInnerEnd()),i));const r=this.cv.bv(i)||l(0,0),n=this.cv.bv(s)||l(0,0);return{cameraDirection:t,physicalAxisSize:Ii(Di(r,n)),start:i,end:s,start2D:r,end2D:n}}qe(t){if(!this.At)return;const i=Math.min(this.lr,this.cr),s=Math.max(this.lr,this.cr);this.Av.ii().dc([t.start,t.end]);const r=this.mv.sv();for(const[e,i]of this.Ih)for(const[,s]of i){const i=t.ticksInfo.get(s);if(!i)continue;const n=this.Tv(t,i);r.add({wt:0,positions:[n.tickStroke.start,n.tickStroke.end]},{lineStyle:e.kh.tickStyle}),n.gridStroke&&r.add({wt:0,positions:n.gridStroke},{lineStyle:e.kh.gridStrokeStyle}),s.Lr.th(i.labelPosition).Ul(i.labelAlignment).br(i.labelRotation).El(i.labelOffset.x,i.labelOffset.y)}const n=this.pv.sv(),o=this.vv.sv(),h={x:0,y:0};this.Ef.forEach((a=>{if(!a.At||a.M<i||a.M>s)return;const l=this.Mv(t,a.M,a.$p,a.Hp),c=this.Tv(t,l);if(a.Rg!==V){const t=n.add().th(l.labelPosition).Ul(l.labelAlignment).Je(a.Rg).Sr(a.Xp).jr(a.ho(a.M)).br(a.cf).setPointerEvents(a.dt);t.Wh=a.Wh;const i=t.Dr().Mi();if(h.x=Math.max(h.x,i.x),h.y=Math.max(h.y,i.y),a.Wp!==V){const i=t.Tu(),s=[{x:i.min.x-a.Dn.left,y:i.max.y+a.Dn.top},{x:i.max.x+a.Dn.right,y:i.max.y+a.Dn.top},{x:i.max.x+a.Dn.right,y:i.min.y-a.Dn.bottom},{x:i.min.x-a.Dn.left,y:i.min.y-a.Dn.bottom}];o.add({wt:0,positions:s},{fillStyle:a.Wp,strokeStyle:a.jp}),this.uv.St.Fu&&a.Wh===e.TextObjectIdentifier.CursorTickMarker&&this.uv.St.Fu.FA({...this.uv.St.Za(i.min,i.max,t.ct,a.Dn),blacklist:[e.TextObjectIdentifier.CursorTickMarker]})}}r.add({wt:0,positions:[c.tickStroke.start,c.tickStroke.end]},{lineStyle:a.Gp}),c.gridStroke&&r.add({wt:0,positions:c.gridStroke},{lineStyle:a.Yp})})),n.finishPlot(),o.finishPlot(),r.finishPlot();const a=this.sn(((t,e)=>{const i=e.Lr.Dr().Mi();return t.x=Math.max(t.x,i.x),t.y=Math.max(t.y,i.y),t}),{x:h.x,y:h.y}),c=Math.atan((t.end2D.y-t.start2D.y)/(t.end2D.x-t.start2D.x));this.jh.Ul({x:0,y:0}).br(180*-c/Math.PI);const u=oi.addVec(t.center,oi.multiplyVec(oi.multiply(t.tickDirection3D,this.cv.xv(.5*this.Av.ro().getThickness()+this.hn(((t,e)=>Math.max(t,e.tickLength)),0))),t.wuSize)),d=this.cv.bv(u)||l(0,0),f=Li(ot(d,this.chart.St.ct,this.dv),Li(Li(Pi(a,t.tickDirection2D),Oi(t.tickDirection2D,this.hn(((t,e)=>Math.max(t)),0))),Pi(Oi(this.jh.Dr().Mi(),.5),t.tickDirection2D)));this.jh.th(f),this.Av.Fv={overrideFollowing:!1,skipMousePicking:!1}}Tv(t,e){const{gridlinePositionA:i,gridlinePositionB:s,gridlinePositionC:r}=t,n=e.posTickStart3D,o=e.posTickEnd3D,h=e.tickPositionRelative;let a;return Zt(h,0)||Zt(h,1)||(a=[this.Iv()?{...i,x:n.x}:this.Pv()?{...i,y:n.y}:this.Cv()?{...i,z:n.z}:{x:0,y:0,z:0},this.Iv()?{...s,x:n.x}:this.Pv()?{...s,y:n.y}:this.Cv()?{...s,z:n.z}:{x:0,y:0,z:0},this.Iv()?{...r,x:n.x}:this.Pv()?{...r,y:n.y}:this.Cv()?{...r,z:n.z}:{x:0,y:0,z:0}]),{gridStroke:a,tickStroke:{start:n,end:o}}}Lv(t){const e=this.lr,i=this.cr,s=.01*t*(i-e),r=e+s,n=i+s;this.Fr(r,n,{allowIntervalLengthChange:!1,skipIntervalRestriction:!1})}Bv(t,e,i){if(0===e)return;i<0&&(e*=-1,i*=-1);const s=this.cr-this.lr,r=s*(e>=1?1+.02*i:1-.02*i)-s;"centered"===t?this.Fr(this.lr+r/2,this.cr-r/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-start"===t?this.Fr(this.lr,this.cr-r/2,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1}):"keep-end"===t&&this.Fr(this.lr+r/2,this.cr,{allowIntervalLengthChange:!0,skipIntervalRestriction:!1})}_r(){super._r(),this.mv.hv(),this.pv.hv(),this.vv.hv()}Iv(){return this.er.Iv()}Pv(){return this.er.Pv()}Cv(){return this.er.Cv()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}}class wl extends En{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Dv=r}}const Bl=(t,e,i)=>Kt(t+.1*(e-t)+Math.abs(i.it())/100*Math.sign(e-t),Math.min(t,e),Math.max(t,e)),kl=(t,e,i,s)=>({rn:i=>{const s=t();let r;for(const t of s){if(!t.Ev())continue;const s=e(t,i);r=void 0===s?r:void 0!==r?Math.min(r,s):s}return r},nn:e=>{const s=t();let r;for(const t of s){if(!t.Ev())continue;const s=i(t,e);r=void 0===s?r:void 0!==r?Math.max(r,s):s}return r},ln:()=>{const e=t();let i;for(const t of e){if(!t.Ev())continue;const e=s(t);i=void 0===e?i:void 0!==i?Math.max(i,e):e}return i}}),Rl=t=>({...kl(t,(t=>t.getYMin()),(t=>t.getYMax()),(t=>t.ln().y)),lv:t=>t.y,kv:(t,e)=>({x:e.x,y:t.y,z:e.z}),Ff:d(-1,0,0),Sv:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:d(e.x,0,e.z),gridlinePositionB:d(e.x,0,-e.z),gridlinePositionC:d(-e.x,0,-e.z)}},Iv:()=>!1,Pv:()=>!0,Cv:()=>!1}),Fl=t=>({...kl(t,(t=>t.getZMin()),(t=>t.getZMax()),(t=>t.ln().z)),lv:t=>t.z,kv:(t,e)=>({x:e.x,y:e.y,z:t.z}),Ff:d(1,0,0),Sv:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:d(e.x,-e.y,0),gridlinePositionB:d(e.x,e.y,0),gridlinePositionC:d(-e.x,e.y,0)}},Iv:()=>!1,Pv:()=>!1,Cv:()=>!0});class Il extends Cs{constructor(t,e,i,s,r){super(t,e,s,r),this.Rv=Us,this.zv=!0,this.Ov=!0,this.Vv=!0,this.chart=t,this.cv=i,this.gs=new Map}qt(t,e){const i=null==t?void 0:t.dataPoint;if(i)return{cursorPosition:{resultTable:this.chart.translateCoordinate(e,this.chart.coordsRelative),resultTableScale:this.chart.oA,axisLocation:i},...i,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ()}}setCursorEnabled(t){return this.zv=t,this}getCursorEnabled(){return this.zv}setCursorFormattingOverride(t){return this.Nv=t,this}getCursorFormattingOverride(){return this.Nv}mg(){return this.getCursorEnabled()}setAutoScrollingEnabled(t){return this.Ov=t,this.chart.St.Bs(),this}getAutoScrollingEnabled(){return this.Ov}setColorShadingStyle(t){return this.Rv=t,this.gs.forEach(((e,i)=>i.Gv(t))),this.cv.Bs(),this}getColorShadingStyle(){return this.Rv}setDepthTestEnabled(t){return this.Vv=t,this.gs.forEach(((e,i)=>i.Uv(t))),this.cv.Bs(),this}getDepthTestEnabled(){return this.Vv}$v(){}qe(){}tv(){}getXMax(){const t=this.Xl;return t?t.Zt():0}getXMin(){const t=this.Xl;return t?t.jt():0}getYMax(){const t=this.Xl;return t?t.Jt():0}getYMin(){const t=this.Xl;return t?t.Qt():0}getZMax(){const t=this.Xl;return t?t.pe():0}getZMin(){const t=this.Xl;return t?t.ge():0}ln(){const t=this.Xl;return t?d(t.Cc(),t.kc(),t.Yv()):d(0,0,0)}}class Ol extends Il{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Rs="Box Series 3D",this.Hv=.25,this.Xv=!1,this.R=new Ct,this.We=Ve(this.Ct.boxSeries3DFillStyle,r),this.Xl=this.cv.jv().Uv(this.Vv).Je(this.We).Wv(this.Hv).Dt(this.getHighlight()),this._s(this.Xl)}Zv(){return this.Xv}invalidateData(t){const e=t.length;if(0===e)return this;this.Xv&&this.chart.St.Ma(zn.Fo);const i=t[0];if(!i)return this;let s;if("xMin"in i||"yMin"in i||"zMin"in i||"xMax"in i||"yMax"in i||"zMax"in i){s=[];for(let i=0;i<e;i+=1){const e=t[i],r="xMin"in e&&"xMax"in e,n="yMin"in e&&"yMax"in e,o="zMin"in e&&"zMax"in e;s[i]={color:e.color,value:e.value,id:e.id,xCenter:r?(e.xMin+e.xMax)/2:void 0,yCenter:n?(e.yMin+e.yMax)/2:void 0,zCenter:o?(e.zMin+e.zMax)/2:void 0,xSize:r?e.xMax-e.xMin:void 0,ySize:n?e.yMax-e.yMin:void 0,zSize:o?e.zMax-e.zMin:void 0}}}else s=t;return this.Xl.Qv(s.slice()),this.chart.St.Bs(),this.Xv=!0,this}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.Xl.Je(t),this.chart.St.Bs(),this}getFillStyle(){return this.We}setRoundedEdges(t){return void 0!==t&&isNaN(t)&&(console.error("'BoxSeries3D.setRoundedEdges | NaN was supplied.'"),t=void 0),this.Hv=void 0!==t?Kt(t,0,1):void 0,this.Xl.Wv(this.Hv),this.cv.Bs(),this}getRoundedEdges(){return this.Hv}Ev(){return this.Ov&&this.getVisible()}ih(t,e){t.Dt(e),this.chart.St.Bs()}Us(){return Le(this.We,this.Xl.Ft())}qe(){super.qe(),this.Xl.Dr(!1)}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Ll extends Il{constructor(t,e,i,s,r){super(t,e,i,s,r),this.Xv=!1,this.R=new Ct}Zv(){return this.getPointAmount()>0}setStrokeStyle(t){this.gu="function"==typeof t?t(this.gu):t;const e=this.gu;return this.Xl.ah(e),this.cv.Bs(),this}getStrokeStyle(){return this.gu}add(t){return this.Xv&&this.chart.St.Ma(zn.Fo),this.Xv=!0,(t=Array.isArray(t)?t:[t])?(this.Xl.dc(t.slice()),this.cv.Bs(),this):this}clear(){return this.Xl.ii(),this}getPointAmount(){const t=this.Xl;return t.fc()+t.Ac()}Ev(){return this.Ov&&this.getPointAmount()>0&&this.getVisible()}ih(t,e){t.Dt(e),this.cv.Bs()}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{stroke:this.gu})}Us(){return Le(this.gu.getFillStyle(),this.Xl.Ft())}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Dl extends Ll{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Rs="Line Series 3D",this.gu=Ve(s.lineSeries3DStrokeStyle,r),this.Jv=so.pointStyle3D,this.Kv(this.gu),this.Xl=this.cv.Op([pl.UserSeries]).Uv(this.Vv).ah(this.gu).gv(this.Jv).Dt(this.getHighlight()),this._s(this.Xl)}setStrokeStyle(t){super.setStrokeStyle(t),this.Kv(this.gu);const e=this.Jv;return this.Xl.gv(e),this}Kv(t){const e=new Ks.Triangulated({shape:"sphere",fillStyle:t.getFillStyle(),size:t.getThickness()});this.Jv=e}}class Pl extends Ll{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Rs="Point Line Series 3D",this.Jv=Ve(s.pointLineSeries3DPointStyle,r),this.gu=Ve(s.lineSeries3DStrokeStyle,r),this.qv(),this.Xl=this.cv.Op([pl.UserSeries]).Uv(this.Vv).ah(this.gu).gv(this.Jv).Dt(this.getHighlight()),this._s(this.Xl)}setPointStyle(t){return this.Jv="function"==typeof t?t(this.Jv):t,this.qv(),this.Xl.gv(this.Jv),this.cv.Bs(),this}getPointStyle(){return this.Jv}setStrokeStyle(t){super.setStrokeStyle(t);const e=this.gu,i=Math.abs(e.getThickness()),s=this.Jv,r=s.getSize();i>("object"==typeof r?Math.max(r.x,r.y,r.z):r)&&(this.Jv=s.setSize(i)),this.qv();const n=this.Jv;return this.Xl.gv(n),this.cv.Bs(),this}Us(){return Le(this.gu.getFillStyle(),this.Xl.Ft())||Le(this.Jv.getFillStyle(),this.Xl.Ft())}qv(){const t=this.Jv,e=t.getSize();this.Jv=t.setSize(e)}ih(t,e){t.Dt(e),this.cv.Bs()}}class Vl extends Il{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.Xv=!1,this.R=new Ct,((null==n?void 0:n.individualPointSizeAxisEnabled)||(null==n?void 0:n.individualPointSizeEnabled))&&this.chart.St.Ma(zn.Io)}Zv(){return this.getPointAmount()>0}add(t){return this.Xv&&this.chart.St.Ma(zn.Fo),this.Xv=!0,(t=Array.isArray(t)?t:[t])?(this.Xl.dc(t.slice()),this.cv.Bs(),this):this}clear(){return this.Xl.ii(),this}getPointAmount(){const t=this.Xl;return t.fc()+t.Ac()}Ev(){return this.Ov&&this.getPointAmount()>0&&this.getVisible()}ih(t,e){t.Dt(e),this.cv.Bs()}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{point3D:this.ty})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class _l extends Vl{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.Rs="Point Series 3D";const o=void 0!==(null==n?void 0:n.automaticColorIndex)?n.automaticColorIndex:this.chart.getSeries().length;this.ty=Ve(s.pointSeries3DPointStyle,o);const h={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...n};this.Xl=this.cv.sy(h).Uv(this.Vv).iy(this.ty).Dt(this.getHighlight()),this._s(this.Xl)}setPointStyle(t){this.ty="function"==typeof t?t(this.ty):t;const e=this.ty;return this.Xl.iy(e),this.cv.Bs(),this}getPointStyle(){return this.ty}Us(){return Le(this.ty.getFillStyle(),this.Xl.Ft())}}class zl extends Vl{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.Rs="Point Cloud Series 3D";const o=this.chart.getSeries().length;this.ty=Ve(s.pointCloudSeries3DPointStyle,o);const h={individualPointColorEnabled:!1,individualPointSizeEnabled:!1,individualLookupValuesEnabled:!1,individualPointSizeAxisEnabled:!1,...n};this.Xl=this.cv.sy(h).iy(this.ty).Dt(this.getHighlight()),this._s(this.Xl)}setPointStyle(t){this.ty="function"==typeof t?t(this.ty):t;const e=this.ty;return this.Xl.iy(e),this.cv.Bs(),this}getPointStyle(){return this.ty}Us(){return Le(this.ty.getFillStyle(),this.Xl.Ft())}}const Ul={Triangulated:_l,Pixelated:zl};class Nl extends Oa{constructor(t,e,i,s,r,n,o,h,a,l,c){super(t,e,i,s,r,n,o,h,a,l,c),this.ey=[],this.hy=0,this.ny=t=>{const e=this.ey.indexOf(t);e>=0&&(this.ey.splice(e,1),this.R.O("seriesdispose",{series:t}))},this.seriesBackground=new Ct,this.oy=this.vs.dA()}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.ey.forEach((e=>e.setAnimationHighlight(t))),this}ly(t,e){this.oy.Cs([e]),this.seriesBackground.Gt(t)}setSeriesBackgroundFillStyle(t){return this.uy.Je(t),this.St.Bs(),this}getSeriesBackgroundFillStyle(){return this.uy.pr()}setSeriesBackgroundStrokeStyle(t){return this.Ay.Qe(t),this.St.Bs(),this}getSeriesBackgroundStrokeStyle(){return this.Ay.Ua()}setSeriesBackgroundEffect(t){return this.oy.Ls(t),this.St.Bs(),this}getSeriesBackgroundEffect(){return this.oy.Ds()}gy(t){this.ey.push(t),void 0!==this.py&&t.setHighlightOnHover(this.py),this.R.O("seriesadd",{series:t})}kf(){return this.ey}setSeriesHighlightOnHover(t){return this.py=t,this.ey.forEach((e=>e.setHighlightOnHover(t))),this}dispose(){return this.ey.slice().forEach(Jt),super.dispose()}}const Xl=oi.normalize({x:-.5610788649579117,y:-.35242840511865414,z:-1.1349149375849081});class Hl{constructor(t,e,i,s){this.vy=!0,this.yy=!0,this.my=2*-Math.PI/2160,this.xy=2*Math.PI/2160,this.Sy=.1,this.by=1*Math.PI/180,this.My=t,this.wy=e,this._y=i,this.bv=s}getDefaultCameraConfiguration(t,e){const i={direction:Xl,location:oi.multiply(Xl,-1)};return this.cameraLocationChanged({boundingBox:t,cameraDirection:i.direction,cameraLocation:i.location,projection:e})||i}applyCameraInteractions(t,e){let i={direction:t.cameraDirection,location:t.cameraLocation};return e.forEach((t=>{"rotate"===t.type?i=this.Cy(i,t):"wheel-zoom"===t.type?i=this.ky(i,t):"rotate+zoom"===t.type?i=this.Ty(i,t):"fixed-rotate"===t.type?i=this.Fy(i,t):"move"===t.type&&(i=this.Iy(i,t))})),this.vy?i=this.Py(t.boundingBox,i):this.yy&&(i=this.Ly(t.boundingBox,t.projection,i)),i}Cy(t,e){const{rotation:i}=e,s=t.location,r=oi.multiply(oi.normalize(t.location),-1),{Right:n,Up:o}=this.By(r);let h=s;const a=this.Dy(r),l=i.x*this.my*a;h=oi.rotateAroundAxis(h,o,l);const c=(i.y>0?1:-1)*Math.min(Math.abs(i.y)*this.xy,a-this.by);return 0!==c&&(h=oi.rotateAroundAxis(h,n,c)),{location:h,direction:oi.multiply(oi.normalize(h),-1)}}ky(t,e){const{deltaY:i}=e;this.vy&&this.Ey(!1);const s=t.location,r=oi.multiply(oi.normalize(s),-1),n=i*this.Sy,o=oi.length(s)*-n;return{direction:r,location:oi.addVec(s,oi.multiply(r,o))}}Ty(t,e){const{rotation:i,cameraDistance:s}=e;this.vy&&this.Ey(!1);let r=this.Cy(t,{type:"rotate",rotation:i});const n=r.location,o=oi.multiply(oi.normalize(n),-1),h=oi.multiply(o,-s);return r={direction:oi.multiply(oi.normalize(h),-1),location:h},r}Fy(t,e){this.vy&&this.Ey(!1);const{rotation:i}=e,s=t.location,r=t.direction,{Right:n,Up:o}=this.By(r),h=i.x*this.my;let a=oi.normalize(oi.rotateAroundAxis(r,o,h));const l=i.y*this.xy;return a=oi.normalize(oi.rotateAroundAxis(a,n,l)),{location:s,direction:a}}Iy(t,e){this.vy&&this.Ey(!1),this.yy=!1;const{amountRight:i,amountForward:s}=e,r=t.location,n=t.direction,{Right:o}=this.By(n);return{location:oi.addVec(r,oi.multiply(n,.01*s),oi.multiply(o,.01*i)),direction:n}}projectionChanged(t,e){return this.viewportChanged(t)}boundingBoxChanged(t){const e={location:t.cameraLocation,direction:oi.multiply(oi.normalize(t.cameraLocation),-1)};return this.vy?this.Py(t.boundingBox,e):this.Ly(t.boundingBox,t.projection,e)}cameraLocationChanged(t){const e={location:t.cameraLocation,direction:oi.multiply(oi.normalize(t.cameraLocation),-1)};return this.vy?this.Py(t.boundingBox,e):this.Ly(t.boundingBox,t.projection,e)}viewportChanged(t){const e={location:t.cameraLocation,direction:oi.multiply(oi.normalize(t.cameraLocation),-1)};if(this.vy)return this.Py(t.boundingBox,e)}Py(t,e,i){let s=e;i=void 0!==i?i:0,s=this.Ry(t,s,100,20,1,i,5);const r=this.Dy(s.direction);return s=this.zy(s,this.Oy(t,s,100,1),r),s}Ry(t,e,i,s,r,n,o){return Gl(n,o,(t=>({direction:e.direction,location:oi.multiply(e.direction,-t)})),(e=>this.Vy(t,e)),i,r,"linear",s)}Oy(t,e,i,s){const{Right:r,Left:n,Up:o,Down:h}=this.By(e.direction),a=this.Ny(t,!1,e);let l=e;const c=s,u=.1;return Math.abs(a.bottom-a.top)>c&&(l=a.bottom<a.top?Yl(0,u,(t=>({location:l.location,direction:oi.normalize(oi.lerp(l.direction,h,t))})),(e=>this.Gy(t,e)),0,c,!0,i):Yl(0,u,(t=>({location:l.location,direction:oi.normalize(oi.lerp(l.direction,o,t))})),(e=>this.Gy(t,e)),0,c,!0,i)),Math.abs(a.left-a.right)>c&&(l=a.left<a.right?Yl(0,u,(t=>({location:l.location,direction:oi.normalize(oi.lerp(l.direction,n,t))})),(e=>this.Uy(t,e)),0,c,!0,i):Yl(0,u,(t=>({location:l.location,direction:oi.normalize(oi.lerp(l.direction,r,t))})),(e=>this.Uy(t,e)),0,c,!0,i)),l}Vy(t,e){const i=this.Ny(t,!0,e);return Math.min(i.left+i.right,i.top+i.bottom)}Uy(t,e){const i=this.Ny(t,!1,e);return Math.abs(i.left-i.right)}Gy(t,e){const i=this.Ny(t,!1,e);return Math.abs(i.top-i.bottom)}Ny(t,e,i){const s=Ci(this.$y(t,e,i).map((t=>ot(t,this.My,this.wy))));return{left:s.min.x,right:this.wy.x.getInnerEnd()-s.max.x,top:this.wy.y.getInnerEnd()-s.max.y,bottom:s.min.y}}$y(t,e,i){const s=this._y,r=d(s.x.getInnerStart(),s.y.getInnerStart(),s.z.getInnerStart()),n=d(s.x.getInnerEnd(),s.y.getInnerEnd(),s.z.getInnerEnd()),o=[],h=e?16:4,a=(r.x+n.x)/2,l=(r.z+n.z)/2,c=Math.sqrt(2)*(n.x-a),u=Math.sqrt(2)*(n.z-l);return[r.y,n.y].forEach((t=>{for(let e=0;e<h;e+=1){const i=Math.PI/4+2*Math.PI*e/h,s=a+Math.cos(i)*c,r=l+Math.sin(i)*u;o.push({x:s,y:t,z:r})}})),o.map((t=>this.bv(t,i))).filter((t=>void 0!==t))}Ly(t,e,i){const s=oi.length(i.location),r=this.Yy(t,e);return s<r.min?{direction:i.direction,location:oi.multiply(i.direction,-r.min)}:s>r.max?{direction:i.direction,location:oi.multiply(i.direction,-r.max)}:i}Yy(t,e){return{min:("perspective"===e?.8:.5)*Math.sqrt(t.x**2+t.y**2+t.z**2),max:3*Math.sqrt(t.x**2+t.y**2+t.z**2)}}By(t){const e=d(0,1,0),i=oi.normalize(oi.cross(e,oi.multiply(t,-1)));let s=oi.cross(i,t);return s.y=Math.abs(s.y),s=oi.normalize(s),{Right:i,Up:s,Down:oi.multiply(s,-1),Left:oi.multiply(i,-1)}}Dy(t){const e={x:0,y:1,z:0},i=oi.angle(t,e),s=oi.angle(t,oi.multiply(e,-1));return Math.min(i,s)}zy(t,e,i){return{location:oi.lerp(t.location,e.location,i),direction:oi.normalize(oi.lerp(t.direction,e.direction,i))}}Ey(t){return this.vy=t,this}Hy(){return this.vy}}const Gl=(t,e,i,s,r,n,o,h)=>{let a,l=0,c=(e+t)/2;do{const h=i(c);if(a={value:c,result:h,score:s(h)},Math.abs(a.score-r)<=n)break;const u=a.score>r;u&&"linear"===o||!u&&"reversed"===o?(c=(a.value+t)/2,e=a.value):(c=(a.value+e)/2,t=a.value),l+=1}while(l<h);return a.result},Yl=(t,e,i,s,r,n,o,h)=>{let a,l=0,c=t;do{const u=i(c),d=s(u);if(void 0===a||Math.abs(d-r)<Math.abs(a.score-r)){if(a={value:c,result:u,score:s(u)},Math.abs(a.score-r)<=n)break}else if(o)break;l+=1,c+=1/(h-1)*(e-t)}while(l<h);return a.result};class Wl extends Il{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Rs="Surface Grid Series 3D",this.Xy={},this.Xv=!1,this.R=new Ct,this.Rv=_s;const o=void 0!==(null==s?void 0:s.automaticColorIndex)?s.automaticColorIndex:this.chart.getSeries().length;this.We=Ve(this.Ct.surfaceGridSeries3DFillStyle,o),this.Wy=Ve(this.Ct.surfaceGridSeries3DWireframeStyle,o);const h={heatmapDataType:"intensity",dataOrder:s.dataOrder||"columns",columns:s.columns,rows:s.rows};this.Ca=h,this.Xl=this.cv.Zy(h).Je(this.We).jy(this.Wy).Gv(this.Rv).Dt(this.getHighlight()),this._s(this.Xl),this.setHighlightOnHover(!1)}Zv(){return this.Xv}qt(t,e){const i=null==t?void 0:t.dataPoint;if(i)return{cursorPosition:{resultTable:this.chart.translateCoordinate(e,this.chart.coordsRelative),resultTableScale:this.chart.oA,axisLocation:i},...i,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(this.We)?this.We.lut:void 0}}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We})}Qy(){const t=this.Xy.start||{x:0,z:0};let e;e=this.Xy.end?{x:(this.Xy.end.x-t.x)/this.Ca.columns,z:(this.Xy.end.z-t.z)/this.Ca.rows}:this.Xy.step?this.Xy.step:{x:1,z:1},this.Xl.Jy(t,e),this.chart.St.Bs()}setStart(t){return this.Xy.start=t,this.Qy(),this}getStart(){return this.Xl.Ky().start}setStep(t){return this.Xy.step=t,this.Qy(),this}getStep(){return this.Xl.Ky().step}setEnd(t){return this.Xy.end=t,this.Qy(),this}getEnd(){return this.Xl.Ky().end}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.Xl.Je(this.We),this.cv.Bs(),this}getFillStyle(){return this.We}setWireframeStyle(t){return this.Wy="function"==typeof t?t(this.Wy):t,this.Xl.jy(this.Wy),this.cv.Bs(),this}getWireframeStyle(){return this.Xl.qy()}setIntensityInterpolation(t){return t=t||"disabled",this.Xl.tm(t),this.cv.Bs(),this}getIntensityInterpolation(){return this.Xl.im()}invalidateIntensityValues(t){if(this.Xv&&this.chart.St.Ma(zn.Fo),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const e={x:t.length,y:t[0].length,columns:"columns"===this.Ca.dataOrder?t.length:t[0].length,rows:"rows"===this.Ca.dataOrder?t.length:t[0].length},i="columns"===this.Ca.dataOrder?this.Ca.columns:this.Ca.rows,s="columns"===this.Ca.dataOrder?this.Ca.rows:this.Ca.columns;if(e.x>i||e.y>s){if(!0===this.chart.jA.ka){const t=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Ca.columns}x${this.Ca.rows}, input ${e.columns}x${e.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);t=r}this.Xl.sm({type:"intensity",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ca.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ca.dataOrder?t.values.length:t.values[0].length};let i="columns"===this.Ca.dataOrder?t.iColumn:t.iRow;const s=i+e.primary-1;let r="columns"===this.Ca.dataOrder?t.iRow:t.iColumn;const n=r+e.secondary-1,o=("columns"===this.Ca.dataOrder?this.Ca.columns:this.Ca.rows)-1,h=("columns"===this.Ca.dataOrder?this.Ca.rows:this.Ca.columns)-1;if(i<0||r<0||s>o||n>h){if(!0===this.chart.jA.ka){const i=`SurfaceGridSeries3D.invalidateIntensityValues intensity matrix overflow.\n    Grid ${this.Ca.columns}x${this.Ca.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(i)}const a=Math.max(-i,0),l=Math.max(-r,0),c=Math.max(s-o,0),u=Math.max(n-h,0),d=e.primary-(a+c),f=[];if(0===l&&0===u)for(let e=0;e<d;e+=1)f[e]=t.values[a+e];else for(let e=0;e<d;e+=1)f[e]=t.values[a+e].slice(l,0===u?void 0:-u);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},i=Math.max(i,0),r=Math.max(r,0)}this.Xl.sm({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.cv.Bs(),this.Xv=!0,this}invalidateHeightMap(t){if(this.Xv&&this.chart.St.Ma(zn.Fo),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const e={x:t.length,y:t[0].length,columns:"columns"===this.Ca.dataOrder?t.length:t[0].length,rows:"rows"===this.Ca.dataOrder?t.length:t[0].length},i="columns"===this.Ca.dataOrder?this.Ca.columns:this.Ca.rows,s="columns"===this.Ca.dataOrder?this.Ca.rows:this.Ca.columns;if(e.x>i||e.y>s){if(!0===this.chart.jA.ka){const t=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Ca.columns}x${this.Ca.rows}, input ${e.columns}x${e.rows}.\n    Excess data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);t=r}this.Xl.hm({type:"y",lengthPrimary:t.length,lengthSecondary:t[0].length,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ca.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ca.dataOrder?t.values.length:t.values[0].length};let i="columns"===this.Ca.dataOrder?t.iColumn:t.iRow;const s=i+e.primary-1;let r="columns"===this.Ca.dataOrder?t.iRow:t.iColumn;const n=r+e.secondary-1,o=("columns"===this.Ca.dataOrder?this.Ca.columns:this.Ca.rows)-1,h=("columns"===this.Ca.dataOrder?this.Ca.rows:this.Ca.columns)-1;if(i<0||r<0||s>o||n>h){if(!0===this.chart.jA.ka){const i=`SurfaceGridSeries3D.invalidateHeightMap height matrix overflow.\n    Grid ${this.Ca.columns}x${this.Ca.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].\n    Out of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(i)}const a=Math.max(-i,0),l=Math.max(-r,0),c=Math.max(s-o,0),u=Math.max(n-h,0),d=e.primary-(a+c),f=[];if(0===l&&0===u)for(let e=0;e<d;e+=1)f[e]=t.values[a+e];else for(let e=0;e<d;e+=1)f[e]=t.values[a+e].slice(l,0===u?void 0:-u);if(0===f.length||0===f[0].length)return this;t={iColumn:t.iColumn,iRow:t.iRow,values:f},i=Math.max(i,0),r=Math.max(r,0)}this.Xl.hm({type:"y",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.cv.Bs(),this.Xv=!0,this}setCullMode(t){return this.Xl.rm("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Xl.nm()}Us(){return Le(this.We,this.Xl.Ft())}$v(){}qe(){}tv(){}Ev(){return this.Ov&&this.getVisible()}ih(t,e){t.Dt(e),this.cv.Bs()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class jl extends Il{constructor(t,e,i,s,r,n){super(t,e,i,r,n),this.Rs="Surface Grid Series 3D",this.Xv=!1,this.Xy={},this.R=new Ct,this.chart.St.Ma(zn.Fo),this.Rv=_s;const o=void 0!==(null==s?void 0:s.automaticColorIndex)?s.automaticColorIndex:this.chart.getSeries().length;this.We=Ve(this.Ct.surfaceScrollingGridSeries3DFillStyle,o),this.Wy=Ve(this.Ct.surfaceScrollingGridSeries3DWireframeStyle,o);const h={heatmapDataType:"intensity",scrollDimension:s.scrollDimension||"columns",columns:s.columns,rows:s.rows};this.Ca=h,this.Xl=this.cv.om(h).Je(this.We).jy(this.Wy).Gv(this.Rv).Dt(this.getHighlight()),this._s(this.Xl),this.setHighlightOnHover(!1)}Zv(){return this.Xv}qt(t,e){const i=null==t?void 0:t.dataPoint;if(i)return{cursorPosition:{resultTable:this.chart.translateCoordinate(e,this.chart.coordsRelative),resultTableScale:this.chart.oA,axisLocation:i},...i,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(this.We)?this.We.lut:void 0}}Qy(){const t=this.Xy.start||{x:0,z:0};let e;e=this.Xy.step?this.Xy.step:{x:1,z:1},this.Xl.Jy(t,e),this.chart.St.Bs()}setStart(t){return this.Xy.start=t,this.Qy(),this}getStart(){return this.Xl.Ky().start}setStep(t){return this.Xy.step=t,this.Qy(),this}getStep(){return this.Xl.Ky().step}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.Xl.Je(this.We),this.cv.Bs(),this}getFillStyle(){return this.We}setWireframeStyle(t){return this.Wy="function"==typeof t?t(this.Wy):t,this.Xl.jy(this.Wy),this.cv.Bs(),this}getWireframeStyle(){return this.Xl.qy()}setIntensityInterpolation(t){return t=t||"disabled",this.Xl.tm(t),this.cv.Bs(),this}getIntensityInterpolation(){return this.Xl.im()}clear(){return this.Xl.ii(),this.cv.Bs(),this}addValues(t){if(!t)return this;let e=t.yValues,i=t.intensityValues;if(!e&&!i)return this;if(e&&0===e.length&&(e=void 0),i&&0===i.length&&(i=void 0),this.Xv=!0,e){const t=e[0].length,i=0+t-1,s="columns"===this.Ca.scrollDimension?this.Ca.rows:this.Ca.columns;if(i>s-1){if(!0===this.chart.jA.ka){const e=`SurfaceScrollingGridSeries3D.addValues input yValues overflow.\nGrid was created with ${s} ${"columns"===this.Ca.scrollDimension?"rows":"columns"}, input yValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(e)}const i=[];for(let t=0;t<e.length;t+=1)i[t]=e[t].slice(0,s+1);e=i}}if(i){const t=i[0].length,e=0+t-1,s="columns"===this.Ca.scrollDimension?this.Ca.rows:this.Ca.columns;if(e>s-1){if(!0===this.chart.jA.ka){const e=`SurfaceScrollingGridSeries3D.addValues intensityValues overflow.\nGrid was created with ${s} ${"columns"===this.Ca.scrollDimension?"rows":"columns"}, input intensityValues have ${t}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(e)}const e=[];for(let t=0;t<i.length;t+=1)e[t]=i[t].slice(0,s+1);i=e}}if(e&&i){const t=e.length,s=i.length;if(t!==s){if(!0===this.chart.jA.ka){const e=`SurfaceScrollingGridSeries3D.addValues input yValues and intensityValues size does not match.\nyValues: ${t}\nintensityValues: ${s}\nData will be automatically clipped according to the smaller supplied sample. This can result in sub-optimal performance.`;Wt.console.warn(e)}t>s?e=e.slice(0,s):i=i.slice(0,t)}}const s=e?e.length:null==i?void 0:i.length,r=e?e[0].length:null==i?void 0:i[0].length;return this.Xl.am({startPrimary:0,startSecondary:0,lengthPrimary:s,lengthSecondary:r,heightMapValues:e,intensityValues:i}),this.cv.Bs(),this}invalidateValues(t){return this.Xl.sm(t),this.chart.St.Bs(),this}getSampleCount(){return this.Xl.lm()}setCullMode(t){return this.Xl.rm("boolean"==typeof t?t?"cull-back":"disabled":t),this}getCullMode(){return this.Xl.nm()}Us(){return Le(this.We,this.Xl.Ft())}$v(){}qe(){}tv(){}Ev(){return this.Ov&&this.getVisible()}ih(t,e){t.Dt(e),this.cv.Bs()}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const $l=t=>!!(t&&"object"==typeof t&&"id"in t&&"chart"in t&&t.chart instanceof hc),Ql=t=>!!(t&&"object"==typeof t&&"x"in t&&"number"==typeof t.x&&"y"in t&&"number"==typeof t.y&&"z"in t&&"number"==typeof t.z),Jl=(t,e=/\s+/g)=>Array.from(t.split(e).map(parseFloat)),ql=t=>{if(t.length<=3)return t;const e=new Array;for(let i=1;i<t.length-1;i+=1)e.push(t[0]),e.push(t[i]),e.push(t[i+1]);return e},Zl=t=>{const e=t.split(/\s+/g);let i=[],s=[],r=[];for(const t of e){const e=Jl(t.trim(),"/");i.push(e[0]),e.length>1&&!Number.isNaN(e[1])&&r.push(e[1]),e.length>2&&!Number.isNaN(e[2])&&s.push(e[2])}return i=ql(i),r=ql(r),s=ql(s),{vertexIndex:i,textureIndex:r||void 0,normalIndex:s||void 0}},Kl={id:"",ambient:C(0,0,0,0),diffuse:C(254,204,0),emissive:C(0,0,0,0),specular:C(255,255,255),specularCoeff:1,opacity:1};class tc extends Il{constructor(t,e,i,s,r,n){super(t,e,i,s,n),this.Rs="Mesh Model 3D",this.um=new Float32Array,this.dm=new Float32Array,this.fm=new Uint16Array,this.ct={x:1,y:1,z:1},this.Am={x:0,y:0,z:0},this.gm={x:0,y:0,z:0},this.pm={x:0,y:0,z:0},this.vm={w:1,x:0,y:0,z:0},this.ym={x:0,y:0,z:0},this.xm=new Array,this.Sm=[],this.Ql=ci,this.R=new Ct;const o=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this.chart.getSeries().length;this.Xl=this.cv.bm().Uv(this.Vv).Je(Ve(this.Ct.meshModel3DFillStyle||this.Ct.pointSeriesFillStyle,o)).Dt(this.getHighlight()),this._s(this.Xl)}Zv(){return this.um.length>0}qt(t,e){const i=this.getFillStyle();return ti({series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(i)?i.lut:void 0},{cursorPosition:0,index:0,x:0,y:0,z:0,value:0,coordAxis:0,coordModel:0},(()=>{const s=this.Xl.Mm(t,e);if(s)return{cursorPosition:{resultTable:this.chart.translateCoordinate(e,this.chart.coordsRelative),resultTableScale:this.chart.oA,axisLocation:s.coordAxis},...s.coordAxis,index:s.index,value:s.value,coordAxis:s.coordAxis,coordModel:s.coordModel,series:this,axisX:this.chart.getDefaultAxisX(),axisY:this.chart.getDefaultAxisY(),axisZ:this.chart.getDefaultAxisZ(),lut:j(i)?i.lut:void 0}}))}setModelGeometry(t){const{indices:e,vertices:i,normals:s}=t;let r=ai,n=hi,o=ai,h=hi,a=ai,l=hi;for(let t=0;t<i.length;t+=3){const e=i[t],s=i[t+1],c=i[t+2];r=Math.max(r,e),n=Math.min(n,e),o=Math.max(o,s),h=Math.min(h,s),a=Math.max(a,c),l=Math.min(l,c)}this.Ql={min:{x:n,y:h,z:l},max:{x:r,y:o,z:a}};for(let t=0;t<i.length;t+=3)i[t]-=this.Ql.min.x,i[t+1]-=this.Ql.min.y,i[t+2]-=this.Ql.min.z;this.ym={x:this.Ql.max.x-this.Ql.min.x,y:this.Ql.max.y-this.Ql.min.y,z:this.Ql.max.z-this.Ql.min.z},this.um=i instanceof Float32Array?i:new Float32Array(i),this.checkedNormals=s&&!Number.isNaN(s[0])?s instanceof Float32Array?s:new Float32Array(s):void 0,this.checkedNormals||this.setColorShadingStyle(_s);const c=new Array,u={indexStart:0,count:e.length,useIndexBuffer:!0,offset:0,material:{id:Kl.id,diffuse:Kl.diffuse,specular:Kl.specular,ambient:Kl.ambient,emissive:Kl.emissive,specularCoeff:Kl.specularCoeff,opacity:1}};return c.push(u),this.Sm=c,this.Xl.wm({vertices:this.um,normals:this.checkedNormals,indices:e instanceof Uint32Array||e instanceof Uint16Array?e:new Uint16Array(e),modelSize:this.ym,parts:this.Sm}),this.chart.St.Bs(),this}_m(t){if(!t)return this;this.xm=[];let e={id:Kl.id,diffuse:Kl.diffuse,specular:Kl.specular,ambient:Kl.ambient,emissive:Kl.emissive,specularCoeff:Kl.specularCoeff,opacity:1};const i=t.split("\n");for(let t of i){if(t=t.trim(),""===t||t.startsWith("#"))continue;const i=t.split(/\s+/g);switch(i[0].trim().toLowerCase()){case"ka":{const i=Jl(t.substring(2).trim()).map((t=>255*t));e.ambient=C(i[0],i[1],i[2])}break;case"ke":{const i=Jl(t.substring(2).trim()).map((t=>255*t));e.emissive=C(i[0],i[1],i[2])}break;case"kd":{const i=Jl(t.substring(2).trim()).map((t=>255*t));e.diffuse=C(i[0],i[1],i[2])}break;case"ks":{const i=Jl(t.substring(2).trim()).map((t=>255*t));e.specular=C(i[0],i[1],i[2])}break;case"d":e.opacity=parseFloat(i[1].trim());break;case"tr":e.opacity=1-parseFloat(i[1].trim());break;case"newmtl":e.diffuse=C(255*e.diffuse.r,255*e.diffuse.g,255*e.diffuse.b,255*e.opacity),e.specular=C(255*e.specular.r,255*e.specular.g,255*e.specular.b,255*e.opacity),e.emissive=C(255*e.emissive.r,255*e.emissive.g,255*e.emissive.b,255*e.opacity),e={id:i[1],diffuse:Kl.diffuse,specular:Kl.specular,ambient:Kl.ambient,emissive:Kl.emissive,specularCoeff:Kl.specularCoeff,opacity:Kl.opacity},this.xm.push(e)}}return this}setModelMaterial(t){return t?(this._m(t),this.setFillStyle(V),this.Sm?(this.Sm.forEach((t=>{const e=this.xm.find((e=>e.id.toLowerCase()===t.material.id.toLowerCase()));e&&(t.material=e)})),this.Sm.sort(((t,e)=>e.material.opacity-t.material.opacity)),this.chart.St.Bs(),this):this):this}setModelFromObj(t){if(!t)return this;const e=new Array,i=new Array,s=new Array,r=new Array,n=new Array,o=new Array,h=new Array;let a={indexStart:0,count:0,offset:0,useIndexBuffer:!1,material:{id:Kl.id,diffuse:Kl.diffuse,specular:Kl.specular,ambient:Kl.ambient,emissive:Kl.emissive,specularCoeff:Kl.specularCoeff,opacity:Kl.opacity}},l=0,c=0,u=0,d=0,f=0,g=0,y=0,p=ai,m=hi,x=ai,S=hi,v=ai,A=hi;const b=t.replace(/\r/g,"").split("\n");for(let t of b){if(t=t.trim(),""===t||t.startsWith("#"))continue;const b=t.split(/\s+/g);let C=0;switch(b[0].trim().toLowerCase()){case"v":{const i=Jl(t.substring(1).trim()),s=i[0],r=i[1],n=i[2];p=Math.max(p,s),m=Math.min(m,s),x=Math.max(x,r),S=Math.min(S,r),v=Math.max(v,n),A=Math.min(A,n),e.push(...i.slice(0,3)),l+=1,d=l}break;case"vt":{const e=Jl(t.substring(2).trim());i.push(...e),c+=1,f=c}break;case"vn":{const e=Jl(t.substring(2).trim());s.push(...e),u+=1,g=u}break;case"usemtl":{const t=this.xm.find((t=>t.id.toLowerCase()===b[1].toLowerCase()));y+=h.length>0?a.count:0,a={indexStart:void 0!==a?3*y*2:0,count:0,offset:void 0!==a?1*y:0,useIndexBuffer:!1,material:t||{id:b[1].toLowerCase(),diffuse:Kl.diffuse,specular:Kl.specular,ambient:Kl.ambient,emissive:Kl.emissive,specularCoeff:1,opacity:1}},h.push(a)}break;case"fo":C+=1;case"f":C+=1;{const h=Zl(t.substring(C).trim());for(let t=0;t<h.vertexIndex.length;t+=1){let i=h.vertexIndex[t];i<0?i+=d:i-=1,i*=3,r.push(e[i]),r.push(e[i+1]),r.push(e[i+2])}if(a.count+=h.vertexIndex.length,h.textureIndex)for(let t=0;t<h.textureIndex.length;t+=1){let e=h.textureIndex[t];e<0?e+=f:e-=1,e*=3,o.push(i[e]),o.push(i[e+1]),o.push(i[e+2])}if(h.normalIndex)for(let t=0;t<h.normalIndex.length;t+=1){let e=h.normalIndex[t];e<0?e+=g:e-=1,e*=3,n.push(s[e]),n.push(s[e+1]),n.push(s[e+2])}}}}this.Ql={min:{x:m,y:S,z:A},max:{x:p,y:x,z:v}};for(let t=0;t<r.length;t+=3)r[t]-=this.Ql.min.x,r[t+1]-=this.Ql.min.y,r[t+2]-=this.Ql.min.z;if(this.ym={x:this.Ql.max.x-this.Ql.min.x,y:this.Ql.max.y-this.Ql.min.y,z:this.Ql.max.z-this.Ql.min.z},h.length<1&&r.length>0&&(a.count=r.length/3,h.push(a)),this.Sm=h,this.um=new Float32Array(r),n.length<1)for(let t=0;t<r.length/9;t+=1){const e={x:r[9*t],y:r[9*t+1],z:r[9*t+2]},i={x:r[9*t+3],y:r[9*t+4],z:r[9*t+5]},s={x:r[9*t+6],y:r[9*t+7],z:r[9*t+8]},o=oi.normalize(oi.cross(oi.subtractVec(e,i),oi.subtractVec(e,s)));for(let t=0;t<3;t+=1)n.push(o.x),n.push(o.y),n.push(o.z)}return this.dm=new Float32Array(n.map(((t,e)=>n[e]))),this.checkedNormals=new Float32Array,this.xm&&this.Sm.sort(((t,e)=>e.material.opacity-t.material.opacity)),this.Xl.wm({vertices:this.um,normals:this.dm,indices:this.fm,modelSize:this.ym,parts:this.Sm}),this.chart.St.Bs(),this}setVertexValues(t){return this.Xl.Cm(t),this.chart.St.Bs(),this}setScale(t){const e={x:"number"==typeof t?t:(null==t?void 0:t.x)||1,y:"number"==typeof t?t:(null==t?void 0:t.y)||1,z:"number"==typeof t?t:(null==t?void 0:t.z)||1};return this.ct=e,this.Xl.km(e),this.chart.St.Bs(),this}getScale(){return this.ct}setModelLocation(t){return this.gm=t,this.Xl.Tm(t),this.chart.St.Bs(),this}getModelLocation(){return this.gm}setModelAlignment(t){return this.Am=t,this.Xl.Fm(t),this.chart.St.Bs(),this}getModelAlignment(){return this.Am}setModelRotation(t){return this.setModelRotationEuler(t)}getModelRotation(){return this.pm}setModelRotationEuler(t){const e={x:Xi(t.x),y:Xi(t.y),z:Xi(t.z)};return this.pm=e,this.Xl.Im(this.pm),this.chart.St.Bs(),this}getModelRotationEuler(){return this.pm}setModelRotationQuaternion(t){return this.vm=t,this.Xl.Pm(this.vm),this.chart.St.Bs(),this}getModelRotationQuaternion(){return this.vm}setBackfaceCullingMode(t){return this.Xl.Lm(t),this.chart.St.Bs(),this}getBackfaceCullingMode(){return this.Xl.Bm()}setFillStyle(t){return this.Xl.Je(t),this.chart.St.Bs(),this}getFillStyle(){return this.Xl.pr()}setColorShadingStyle(t){return this.checkedNormals||t!==Us?super.setColorShadingStyle(t):(console.warn("Phong shading style is not supported without normals. Switching to Simple shading style."),super.setColorShadingStyle(new Ns.Simple))}Ev(){return!1}ih(t,e){t.Dt(e),this.chart.St.Bs()}Us(){return Le(this.getFillStyle(),this.Xl.Ft())}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.getFillStyle()})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class ec extends $a{constructor(t,i,s,r,n,o,h){super(t,i,s,r,n,o),this.chart=h,this.Dm=this.chart.getDefaultAxisX().addCustomTick().setVisible(!1).setGridStrokeStyle(o.cursor3DGridStrokeStyleX).setTickStyle(o.cursor3DTickStrokeStyleX).setTextFillStyle(o.cursor3DTickLabelFillStyleX).setTextFont(o.cursor3DTickLabelFontX).setBackgroundFillStyle(o.cursor3DTickLabelBackgroundFillStyleX).setBackgroundStrokeStyle(o.cursor3DTickLabelBackgroundStrokeStyleX).setPadding(o.cursor3DTickLabelPaddingX),this.Em=this.chart.getDefaultAxisY().addCustomTick().setVisible(!1).setGridStrokeStyle(o.cursor3DGridStrokeStyleY).setTickStyle(o.cursor3DTickStrokeStyleY).setTextFillStyle(o.cursor3DTickLabelFillStyleY).setTextFont(o.cursor3DTickLabelFontY).setBackgroundFillStyle(o.cursor3DTickLabelBackgroundFillStyleY).setBackgroundStrokeStyle(o.cursor3DTickLabelBackgroundStrokeStyleY).setPadding(o.cursor3DTickLabelPaddingY),this.Rm=this.chart.getDefaultAxisZ().addCustomTick().setVisible(!1).setGridStrokeStyle(o.cursor3DGridStrokeStyleZ).setTickStyle(o.cursor3DTickStrokeStyleZ).setTextFillStyle(o.cursor3DTickLabelFillStyleZ).setTextFont(o.cursor3DTickLabelFontZ).setBackgroundFillStyle(o.cursor3DTickLabelBackgroundFillStyleZ).setBackgroundStrokeStyle(o.cursor3DTickLabelBackgroundStrokeStyleZ).setPadding(o.cursor3DTickLabelPaddingZ),this.Dm.Wh=e.TextObjectIdentifier.CursorTickMarker,this.Em.Wh=e.TextObjectIdentifier.CursorTickMarker,this.Rm.Wh=e.TextObjectIdentifier.CursorTickMarker}setTickX(t){return t(this.Dm),this.chart.St.Bs(),this}setTickY(t){return t(this.Em),this.chart.St.Bs(),this}setTickZ(t){return t(this.Rm),this.chart.St.Bs(),this}setTicks(t){return t(this.Dm),t(this.Em),t(this.Rm),this.chart.St.Bs(),this}dispose(){return super.dispose(),this.Dm.dispose(),this.Em.dispose(),this.Rm.dispose(),this}qe(){return this.Dm.setVisible(this.At&&this.UA),this.Em.setVisible(this.At&&this.UA),this.Rm.setVisible(this.At&&this.UA),super.qe()}setPosition(...t){if(0===t.length)return this;const e=t[0];this.UA=!0;const i=this.renderingScale,s=Ba(e.resultTableScale,i),r=s===this.scale?e.resultTable:ot(e.resultTable,s,this.scale);this.Cg.setPosition(r),this.Dm.setValue(e.axisLocation.x),this.Em.setValue(e.axisLocation.y),this.Rm.setValue(e.axisLocation.z);let n=this.Og[0];if(!n){const t=new Jo(this.Hs,this.renderingScale,this.scale,qt,this.Ct).setPointerEvents(!1).setFillStyle(this.Ct.cursorPointMarkerFillStyle).setSize(this.Ct.cursorPointMarkerSize).setShape(this.Ct.cursorPointMarkerShape);n={pointMarker:t,targetVisible:!0},this.Og.push(n),this.Gg.forEach((e=>e(t)))}return n.pointMarker.setPosition(r),this.chart.St.Bs(),this}}class ic{constructor(t,e){this.Xg=[],this.Wg=(t,e)=>(this.Xg.forEach((i=>i(t,e))),t),this.addStyler=t=>new ic(this.$g,this.Xg.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new ic(t,this.Xg.map((t=>t))),this.jg=(t,e,i,s,r,n)=>this.Wg(new ec(t,e,i,s,this.$g,r,n),r),this.$g=t,this.Xg=e}}const sc=new ic(Wo,[(t,e)=>{Qa(t,e)}]),rc=(t,e,i,s)=>{t.background.addEventListener(e,i,s),t.seriesBackground.addEventListener(e,i,s),t.getSeries().forEach((t=>t.addEventListener(e,i,s)));const r=t=>t.series.addEventListener(e,i,s);return t.addEventListener("seriesadd",r),()=>{t.background.removeEventListener(e,i),t.seriesBackground.removeEventListener(e,i),t.getSeries().forEach((t=>t.removeEventListener(e,i))),t.removeEventListener("seriesadd",r)}},nc=(t,i,s,r)=>{var n,o,h,a,l,c;ni(),i.camera&&s.zm(),i.x&&t.axisX.fit(null!==(n=i.animationsEnabled)&&void 0!==n?n:void 0,null!==(o=i.stopScroll)&&void 0!==o?o:void 0),i.y&&t.axisY.fit(null!==(h=i.animationsEnabled)&&void 0!==h?h:void 0,null!==(a=i.stopScroll)&&void 0!==a?a:void 0),i.z&&t.axisZ.fit(null!==(l=i.animationsEnabled)&&void 0!==l?l:void 0,null!==(c=i.stopScroll)&&void 0!==c?c:void 0);const u=t.engine.setMouseStyle(e.MouseStyles.ZoomOut);Wt.setTimeout((()=>{t.engine.restoreMouseStyle(u)}),500);const d=i.on;d&&Wt.requestAnimationFrame((()=>d({event:r})))},oc=(t,e,i,s)=>{ni(),t.restorePreviousZoomState();const r=e.on;r&&Wt.requestAnimationFrame((()=>r({event:s})))};class hc extends Nl{constructor(t,e,i,s,r,n,o){var h;super(t,e,i,e.lg("chart3D bg",0),s,e.St.Ct.chart3DBackgroundFillStyle,e.St.Ct.chart3DBackgroundStrokeStyle,e.St.Ct.chart3DTitleFont,e.St.Ct.chart3DTitleFillStyle,e.St.Ct.chart3DTitleShadow,n),this.Om=1,this.Vm=[],this.Nm=2,this.Gm=!0,this.Um=!0,this.$m=!0,this.Ym=0,this.coordsAxis={id:"axes",chart:this},this.coordsWorld={id:"world",chart:this},this.sa=[],this.Hm=[],this.Xm=!1,this.Wm=()=>{if(this.ft)return;const t=new Map;this.forEachAxis((e=>{void 0!==e.mA().find((t=>t.Zv()))&&t.set(e,{...e.getInterval(),stopped:e.getStopped()})})),t.size<=0||(this.Hm.push(t),this.Hm.length>100&&this.Hm.shift())},this.da=()=>{const t=this.cv.jm();this.Qm.Zm(t),this.Jm.Zm(t);const e=this.Km.viewportChanged(this.qm());e&&this.tx(e),this.St.Bs()},this.R=new Ct,this.St.Ma(zn.So),this.Uh.jr("Chart3D"),this.ix=i.d3(),this.ix.x.j(-1,1),this.ix.y.j(-1,1),this.ix.z.j(-1,1),this.cv=e.sx("chart3D layer3D",0,this.ix),this.Qm=e.hx("chart3D series bg",0),this.Jm=e._p("chart3D axis ui",1),this.nx={x:new El(this,(h=()=>this.ey,{...kl(h,(t=>t.getXMin()),(t=>t.getXMax()),(t=>t.ln().x)),lv:t=>t.x,kv:(t,e)=>({x:t.x,y:e.y,z:e.z}),Ff:d(0,-1,0),Sv:t=>{const e={x:t.x>=0?1:-1,y:t.y>=0?1:-1,z:t.z>=0?1:-1};return{gridlinePositionA:d(0,e.y,e.z),gridlinePositionB:d(0,e.y,-e.z),gridlinePositionC:d(0,-e.y,-e.z)}},Iv:()=>!0,Pv:()=>!1,Cv:()=>!1}),this.ix.x,this.Ct,this.cv,this.Jm,this.oA,!1,this.vs),y:new El(this,Rl((()=>this.ey)),this.ix.y,this.Ct,this.cv,this.Jm,this.oA,!1,this.vs),z:new El(this,Fl((()=>this.ey)),this.ix.z,this.Ct,this.cv,this.Jm,this.oA,!1,this.vs)},this.ox=this.cv.Op([pl.InternalUI]).setPointerEvents(!1),this.setBoundingBoxStrokeStyle(this.Ct.chart3DBoundingBoxStrokeStyle),this.uy=this.Qm.Ru(this.St.ct,Eo.Simple).Je(this.Ct.chart3DSeriesBackgroundFillStyle).Qe(Ot).setPointerEvents(!0),this.Ay=this.Qm.Ru(this.St.ct,Eo.Simple).Je(V).Qe(this.Ct.chart3DSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.ly(this.uy,this.Ay),this.lx({x:1,y:1,z:1},!0),this.Km=new Hl(this.St.ct,this.oA,this.ix,((t,e)=>(e&&this.tx(e),this.cv.bv(t)))),this.ux=this.Km.getDefaultCameraConfiguration(this.Ax(this.gx),this.getProjection()),this.tx(this.ux);const a=ee(o?o.cursorBuilder:void 0,sc),c=e.kp();this.Tp=Ua(this,c,a.jg(c,this.oA,this.oA,qt,this.Ct,this),this,"show-pointed",ac,(()=>0)),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.addEventListener("resize",this.da),this.da(),this.ag(r,this.oA),this.vx=(t=>{let e=!1,i=!1,s=!1;const r=(t=>{let e=!0,i=t.getCameraLocation(),s=t.getCameraAutomaticFittingEnabled();return{yx:()=>{e&&(i=t.getCameraLocation(),s=t.getCameraAutomaticFittingEnabled()),e=!1},zm:()=>{t.setCameraLocation(i).setCameraAutomaticFittingEnabled(s),e=!0}}})(t);let n={};const o=()=>Gt({rotate:{drag:{},ctrl:{drag:!1},shift:{drag:!1},alt:{drag:!1}},zoom:{wheel:{},camera:!0,mode:"centered",pinch:{camera:!1,x:!0,y:!0,z:!0}},restoreDefault:{doubleClick:!0,camera:!0,x:!0,y:!0,z:!0},restorePrevious:!1},n),h=n=>{const h=o();let a=!1,l=!1,c=!1;for(const t of Object.keys(h)){const e=h[t];"object"==typeof e&&(void 0!==e.ctrl&&(a=!0),void 0!==e.shift&&(l=!0),void 0!==e.alt&&(c=!0))}i=n.ctrlKey,e=n.shiftKey,s=n.altKey,("Control"===n.key&&a||"Shift"===n.key&&l||"Alt"===n.key&&c)&&n.preventDefault();const u=gs(h.restoreDefault,void 0,n,e,i,s);u&&u.code===n.code&&(Se(n),nc(t,u,r,n));const d=gs(h.restorePrevious,void 0,n,e,i,s);d&&d.code===n.code&&(Se(n),oc(t,d,0,n))},a=t=>{i=t.ctrlKey,e=t.shiftKey,s=t.altKey},c=()=>{i=!1,e=!1,s=!1};Wt.addEventListener("keydown",h),Wt.addEventListener("keyup",a),Wt.addEventListener("blur",c),t.addEventListener("dispose",(()=>{Wt.removeEventListener("keydown",h),Wt.removeEventListener("keyup",a),Wt.removeEventListener("blur",c)}));const u=t=>{},d=n=>{const h=ys(!1!==t.St.Ca.ka),a=o(),c=gs(a.rotate,"drag",n,e,i,s),u=gs(a.pan,"drag",n,e,i,s);u&&h.push((()=>((t,e,i,s)=>{const r=t.getCursorMode();t.setCursorMode(void 0);let n=e;"mouse"===e.pointerType&&e.preventDefault();const o=s=>{var r,o,h;if(s.pointerId!==e.pointerId)return;Se(s);const a=s.clientX-n.clientX,l=s.clientY-n.clientY;if(n=s,i&&i.x){const e=a+-l;t.axisX.Lv(-Math.sign(e)*(null!==(r=i.sensitivity)&&void 0!==r?r:1)),!1!==i.stopScroll&&t.axisX.setStopped(!0)}if(i&&i.y){const e=-a+l;t.axisY.Lv(Math.sign(e)*(null!==(o=i.sensitivity)&&void 0!==o?o:1)),!1!==i.stopScroll&&t.axisY.setStopped(!0)}if(i&&i.z){const e=-a+l;t.axisZ.Lv(Math.sign(e)*(null!==(h=i.sensitivity)&&void 0!==h?h:1)),!1!==i.stopScroll&&t.axisZ.setStopped(!0)}const c=null==i?void 0:i.on;c&&Wt.requestAnimationFrame((()=>c({event:s})))},h=i=>{i.pointerId===e.pointerId&&(Se(i),t.setCursorMode(r),Wt.removeEventListener("pointermove",o),Wt.removeEventListener("pointerup",h),t.engine.container.removeEventListener("pointerdown",a),s())},a=i=>{i.pointerId!==e.pointerId&&(t.setCursorMode(r),Wt.removeEventListener("pointermove",o),Wt.removeEventListener("pointerup",h),t.engine.container.removeEventListener("pointerdown",a),s())};Wt.addEventListener("pointermove",o),Wt.addEventListener("pointerup",h),t.engine.container.addEventListener("pointerdown",a),ni()})(t,n,u,f()))),c&&h.push((()=>((t,e,i,s,r)=>{const n=t.getCursorMode();t.setCursorMode(void 0);let o=e,h=!1,a=0;"mouse"===e.pointerType&&e.preventDefault();const l=s=>{var n,l;if(s.pointerId!==e.pointerId)return;Se(s);const c={x:s.clientX-o.clientX,y:s.clientY-o.clientY};o=s,a+=Ii(c),r.yx(),t.mx({x:c.x*(null!==(n=i.sensitivity)&&void 0!==n?n:1),y:-c.y*(null!==(l=i.sensitivity)&&void 0!==l?l:1)}),h||(ri(),h=!0);const u=i.on;u&&Wt.requestAnimationFrame((()=>u({event:s})))},c=i=>{i.pointerId===e.pointerId&&(Se(i),t.setCursorMode(n),Wt.removeEventListener("pointermove",l),Wt.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),s(),a>=10&&si("click"))},u=i=>{i.pointerId!==e.pointerId&&(t.setCursorMode(n),Wt.removeEventListener("pointermove",l),Wt.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),s())};Wt.addEventListener("pointermove",l),Wt.addEventListener("pointerup",c),t.engine.container.addEventListener("pointerdown",u),ni()})(t,n,c,f(),r)));const d=gs(a.zoom,"drag",n,e,i,s);d&&h.push((()=>((t,e,i,s,r)=>{const n=t.getCursorMode();t.setCursorMode(void 0);let o=e;"mouse"===e.pointerType&&e.preventDefault();const h=s=>{var n,h,a,l,c,u,d;if(s.pointerId!==e.pointerId)return;Se(s);const f=s.clientX-o.clientX,g=s.clientY-o.clientY;if(o=s,i.x){const e=f+-g;t.axisX.Bv(null!==(n=i.mode)&&void 0!==n?n:"centered",Math.sign(e),null!==(h=i.sensitivity)&&void 0!==h?h:1),!1!==i.stopScroll&&t.axisX.setStopped(!0)}if(i.y){const e=-f+g;t.axisY.Bv(null!==(a=i.mode)&&void 0!==a?a:"centered",-Math.sign(e),null!==(l=i.sensitivity)&&void 0!==l?l:1),!1!==i.stopScroll&&t.axisY.setStopped(!0)}if(i.z){const e=-f+g;t.axisZ.Bv(null!==(c=i.mode)&&void 0!==c?c:"centered",-Math.sign(e),null!==(u=i.sensitivity)&&void 0!==u?u:1),!1!==i.stopScroll&&t.axisZ.setStopped(!0)}if(i.camera){const e=f+-g;r.yx(),t.xx(-.15*Math.sign(e)*(null!==(d=i.sensitivity)&&void 0!==d?d:1))}const y=i.on;y&&Wt.requestAnimationFrame((()=>y({event:s})))},a=i=>{i.pointerId===e.pointerId&&(Se(i),t.setCursorMode(n),Wt.removeEventListener("pointermove",h),Wt.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),s())},l=e=>{t.setCursorMode(n),Wt.removeEventListener("pointermove",h),Wt.removeEventListener("pointerup",a),t.engine.container.removeEventListener("pointerdown",l),s()};Wt.addEventListener("pointermove",h),Wt.addEventListener("pointerup",a),t.engine.container.addEventListener("pointerdown",l),ni()})(t,n,d,f(),r))),h.end();const g=gs(a.rotate,"pinch",n,e,i,s),y=gs(a.pan,"pinch",n,e,i,s),p=gs(a.zoom,"pinch",n,e,i,s);(g||p||y)&&((t,e,i,s,r,n,o)=>{if(!i&&!s&&!r)return;const h=c=>{if(c.pointerId===e.pointerId)return;const u=n();let d;t.engine.container.removeEventListener("pointerdown",h),Wt.removeEventListener("pointerup",a);let f,g=c;const y=c,p=t.getCursorMode();t.setCursorMode(void 0);const m=t.getCameraLocation();let x,S,v;const A=[],b=()=>{var n,h,a,u,p,b,M,T;C=void 0;const E=d,w=g;if(A.forEach((t=>{t.pointerId===e.pointerId?d=t:t.pointerId===c.pointerId&&(g=t)})),A.length=0,f=f||d,void 0===d||void 0===E||void 0===f)return;if(!S||!v){const e=t=>{for(;t<0;)t+=360;for(;t>360;)t-=360;return t},i=(i,s)=>{const r=t.cv.bv(i),n=t.cv.bv(s);if(!r||!n)return{deg:-1,dir:{x:0,y:0}};const o=t.St.ja({engineX:r.x,engineY:r.y}),h=t.St.ja({engineX:n.x,engineY:n.y});return{deg:e(Hi(Di(n,r))),dir:Ri(Di({x:h.clientX,y:h.clientY},{x:o.clientX,y:o.clientY}))}},s=t.axisX.getInterval(),r=t.axisY.getInterval(),n=t.axisZ.getInterval(),o={x:i({x:s.start,y:r.start,z:n.start},{x:s.end,y:r.start,z:n.start}),y:i({x:s.start,y:r.start,z:n.start},{x:s.start,y:r.end,z:n.start}),z:i({x:s.end,y:r.start,z:n.start},{x:s.end,y:r.start,z:n.end})},h=t.St.Wa(f),a=t.St.Wa(y),l=e(Hi(Di({x:a.engineX,y:a.engineY},{x:h.engineX,y:h.engineY})));S=["x","y","z"].reduce(((t,i)=>{const s=Math.abs(o[i].deg-l),r=Math.abs(e(o[i].deg+180)-l),n=Math.min(s,r);return Math.min(n,r)<t.angleDiff?{angleDiff:n,axis:i}:t}),{axis:"x",angleDiff:1e3}).axis,v=o[S].dir}const B=d.clientX-E.clientX,k=d.clientY-E.clientY,R=g.clientX-w.clientX,F=g.clientY-w.clientY,I=Math.sqrt((f.clientX-y.clientX)**2+(f.clientY-y.clientY)**2),O=Math.sqrt((d.clientX-g.clientX)**2+(d.clientY-g.clientY)**2),L=oi.length(m),D=I/O*(null!==(n=null==r?void 0:r.sensitivity)&&void 0!==n?n:1)*L,P=l((null!==(h=null==i?void 0:i.sensitivity)&&void 0!==h?h:1)*(B+R)/2,(null!==(a=null==i?void 0:i.sensitivity)&&void 0!==a?a:1)*-(k+F)/2);o.yx(),(i||(null==r?void 0:r.camera))&&(t.Vm.push({type:"rotate+zoom",rotation:i?P:{x:0,y:0},cameraDistance:(null==r?void 0:r.camera)?D:L}),t.St.Bs());const V=void 0===x?0:O-Ii(x)?1:-1,_=x?.25*(null!==(u=null==r?void 0:r.sensitivity)&&void 0!==u?u:1)*(O-Ii(x)):0;r&&r.x&&("x"===S||void 0===r.y&&void 0===r.z)&&(t.axisX.Bv(null!==(p=r.mode)&&void 0!==p?p:"centered",V,_),!1!==r.stopScroll&&t.axisX.setStopped(!0)),r&&r.y&&("y"===S||void 0===r.x&&void 0===r.z)&&(t.axisY.Bv(null!==(b=r.mode)&&void 0!==b?b:"centered",V,_),!1!==r.stopScroll&&t.axisY.setStopped(!0)),r&&r.z&&("z"===S||void 0===r.x&&void 0===r.y)&&(t.axisZ.Bv(null!==(M=r.mode)&&void 0!==M?M:"centered",V,_),!1!==r.stopScroll&&t.axisZ.setStopped(!0));const z=(E.clientX+w.clientX)/2,U=(E.clientY+w.clientY)/2,N={x:(d.clientX+g.clientX)/2-z,y:(d.clientY+g.clientY)/2-U},X=zi(Ri(N),v),H=Ii(N)*X*.3*(null!==(T=null==s?void 0:s.sensitivity)&&void 0!==T?T:1);s&&s.x&&("x"===S||void 0===s.y&&void 0===s.z)&&(t.axisX.Lv(-H),!1!==s.stopScroll&&t.axisX.setStopped(!0)),s&&s.y&&("y"===S||void 0===s.x&&void 0===s.z)&&(t.axisY.Lv(-H),!1!==s.stopScroll&&t.axisY.setStopped(!0)),s&&s.z&&("z"===S||void 0===s.x&&void 0===s.y)&&(t.axisZ.Lv(-H),!1!==s.stopScroll&&t.axisZ.setStopped(!0)),x={x:Math.abs(d.clientX-g.clientX),y:Math.abs(d.clientY-g.clientY)};const G=(null==s?void 0:s.on)||(null==i?void 0:i.on)||(null==r?void 0:r.on);G&&Wt.requestAnimationFrame((()=>G({event:void 0})))};let C;const M=t=>{t.pointerId!==e.pointerId&&t.pointerId!==c.pointerId||(Se(t),A.push(t),C||(C=Wt.requestAnimationFrame(b)))},T=i=>{i.pointerId!==e.pointerId&&i.pointerId!==c.pointerId||(Se(i),t.setCursorMode(p),Wt.removeEventListener("pointermove",M),Wt.removeEventListener("pointerup",T),u(),C&&Wt.cancelAnimationFrame(C))};Wt.addEventListener("pointermove",M),Wt.addEventListener("pointerup",T),ni()},a=i=>{i.pointerId===e.pointerId&&(t.engine.container.removeEventListener("pointerdown",h),Wt.removeEventListener("pointerup",a))};t.engine.container.addEventListener("pointerdown",h),Wt.addEventListener("pointerup",a)})(t,n,g,y,p,f,r)};rc(t,"wheel",(n=>{const h=ys(!1!==t.St.Ca.ka),a=o(),l=gs(a.pan,"wheel",n,e,i,s);l&&h.push((()=>((t,e,i)=>{var s,r,n;Se(e),i.x&&(t.axisX.Lv(2*Math.sign(e.deltaY)*(null!==(s=i.sensitivity)&&void 0!==s?s:1)),!1!==i.stopScroll&&t.axisX.setStopped(!0)),i.y&&(t.axisY.Lv(2*Math.sign(e.deltaY)*(null!==(r=i.sensitivity)&&void 0!==r?r:1)),!1!==i.stopScroll&&t.axisY.setStopped(!0)),i.z&&(t.axisZ.Lv(2*Math.sign(e.deltaY)*(null!==(n=i.sensitivity)&&void 0!==n?n:1)),!1!==i.stopScroll&&t.axisZ.setStopped(!0));const o=i.on;o&&Wt.requestAnimationFrame((()=>o({event:e})))})(t,n,l)));const c=gs(a.zoom,"wheel",n,e,i,s);c&&h.push((()=>((t,e,i,s)=>{var r,n,o,h,a,l,c;Se(e),i.x&&(t.axisX.Bv(null!==(r=i.mode)&&void 0!==r?r:"centered",-Math.sign(e.deltaY),3*(null!==(n=i.sensitivity)&&void 0!==n?n:1)),!1!==i.stopScroll&&t.axisX.setStopped(!0)),i.y&&(t.axisY.Bv(null!==(o=i.mode)&&void 0!==o?o:"centered",-Math.sign(e.deltaY),3*(null!==(h=i.sensitivity)&&void 0!==h?h:1)),!1!==i.stopScroll&&t.axisY.setStopped(!0)),i.z&&(t.axisZ.Bv(null!==(a=i.mode)&&void 0!==a?a:"centered",-Math.sign(e.deltaY),3*(null!==(l=i.sensitivity)&&void 0!==l?l:1)),!1!==i.stopScroll&&t.axisZ.setStopped(!0)),i.camera&&(s.yx(),t.xx(.5*Math.sign(e.deltaY)*(null!==(c=i.sensitivity)&&void 0!==c?c:1)));const u=i.on;u&&Wt.requestAnimationFrame((()=>u({event:e})))})(t,n,c,r))),h.end()})),rc(t,"dblclick",(n=>{if(n.defaultPrevented)return;const h=ys(!1!==t.St.Ca.ka),a=o(),l=gs(a.restoreDefault,void 0,n,e,i,s);l&&l.doubleClick&&(Se(n),nc(t,l,r,n));const c=gs(a.restorePrevious,void 0,n,e,i,s);c&&c.doubleClick&&(Se(n),oc(t,c,0,n)),h.end()})),rc(t,"click",(n=>{if(n.defaultPrevented)return;const h=ys(!1!==t.St.Ca.ka),a=o(),l=gs(a.restoreDefault,void 0,n,e,i,s);l&&l.singleClick&&(Se(n),nc(t,l,r,n));const c=gs(a.restorePrevious,void 0,n,e,i,s);c&&c.singleClick&&(Se(n),oc(t,c,0,n)),h.end()})),rc(t,"contextmenu",(n=>{if(n.defaultPrevented)return;const h=ys(!1!==t.St.Ca.ka),a=o(),l=gs(a.restoreDefault,"rmb",n,e,i,s);l&&l.singleClick&&(Se(n),nc(t,l,r,n));const c=gs(a.restorePrevious,"rmb",n,e,i,s);c&&c.singleClick&&(Se(n),oc(t,c,0,n)),h.end()}));const f=()=>(g(),y(),()=>{g=rc(t,"pointermove",u),y=rc(t,"pointerdown",d)});let g=rc(t,"pointermove",u),y=rc(t,"pointerdown",d);return{setUserInteractions:t=>{if(void 0===t)n={rotate:!1,zoom:!1,pan:!1,restoreDefault:!1,restorePrevious:!1};else if(0===Object.keys(t).length)n={};else for(const e of Object.keys(t))!1===t[e]||"object"==typeof t[e]?n[e]=t[e]:n[e]={}},getUserInteractions:o}})(this),this.Sx(this.axisX),this.Sx(this.axisY),this.Sx(this.axisZ)}restorePreviousZoomState(t){if(this.Hm.length<=1)return this;this.Hm.pop();const e=this.Hm[this.Hm.length-1];return e?(this.Xm=!0,this.forEachAxis((i=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(i))return;const s=e.get(i);s?i.ut(s.start,s.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:s.stopped,"userSetInterval"):i.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this.Xm=!1,this):this}clearPreviousZoomStateHistory(){if(void 0!==this.bx)this.Hm.length=0;else for(;this.Hm.length>1;)this.Hm.unshift();return this}Sx(t){const e=()=>{this.Xm||(this.bx&&Wt.clearTimeout(this.bx),this.bx=Wt.setTimeout((()=>{this.Wm(),this.bx=void 0}),300))};Wt.requestAnimationFrame((()=>{e()})),t.addEventListener("intervalchange",e),t.addEventListener("dispose",(()=>{this.Hm.forEach((e=>{e.delete(t)}))}))}setUserInteractions(t){return this.vx.setUserInteractions(t),this}getUserInteractions(){return this.vx.getUserInteractions()}setProjection(t){this.cv.Mx(t);const e=this.Km.projectionChanged(this.qm(),t);return e&&this.tx(e),this.St.Bs(),this}getProjection(){return this.cv.wx()}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}addCursor(t=sc){const e=this.JA(),i=t.jg(e,this.oA,this.oA,this.XA(e),this.Ct,this);return this.rg(i),i}addPointSeries(t){const e=new(t&&t.type||_l)(this,this.ny,this.cv,this.Ct,this.St.vs,t);return this.gy(e),e}addLineSeries(t){const e=new Dl(this,this.ny,this.cv,this.Ct,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,this.St.vs);return this.gy(e),e}addPointLineSeries(t){const e=new Pl(this,this.ny,this.cv,this.Ct,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,this.St.vs);return this.gy(e),e}addSurfaceGridSeries(t){const e=new Wl(this,this.ny,this.cv,t,this.Ct,this.St.vs);return this.gy(e),e}addSurfaceScrollingGridSeries(t){const e=new jl(this,this.ny,this.cv,t,this.Ct,this.St.vs);return this.gy(e),e}addBoxSeries(t){const e=new Ol(this,this.ny,this.cv,this.Ct,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,this.St.vs);return this.gy(e),e}addMeshModel(t){const e=new tc(this,this.ny,this.cv,this.Ct,t,this.St.vs);return this.gy(e),e}translateCoordinate(t,e,i){if($l(e)||$l(i)||Ql(t)){if($l(e)&&$l(i)&&Ql(t)){if("axes"===e.id&&"world"===i.id)return this.cv._x(t);if("world"===e.id&&"axes"===i.id)return this.cv.Cx(t);if(e.id===i.id)return t}if($l(e)&&cs(i)&&Ql(t)){const e=this.cv.bv(t);return e?this.St.ja({engineX:e.x,engineY:e.y}):{clientX:-1,clientY:-1}}if($l(e)&&ds(i)&&Ql(t)){const e=this.cv.bv(t);return e?ot(e,this.St.ct,this.oA):{clientX:-1,clientY:-1}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}return ka(t,e,i,this.oA,this.St)}getDefaultAxisX(){return this.nx.x}getDefaultAxisY(){return this.nx.y}getDefaultAxisZ(){return this.nx.z}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}get axisZ(){return this.getDefaultAxisZ()}get zAxis(){return this.getDefaultAxisZ()}getDefaultAxes(){return[this.nx.x,this.nx.y,this.nx.z]}setCameraLocation(t){let e={location:t,direction:oi.normalize(oi.multiply(t,-1))};const i=this.Km.cameraLocationChanged(this.qm(e));return i&&(e=i),this.tx(e),this.St.Bs(),this}getCameraLocation(){return this.cv.getCameraLocation()}getCameraDirection(){return this.cv.getCameraDirection()}setCameraAutomaticFittingEnabled(t){this.Km.Ey(t);const e=this.Km.cameraLocationChanged(this.qm());return e&&this.tx(e),this}getCameraAutomaticFittingEnabled(){return this.Km.Hy()}setBoundingBoxStrokeStyle(t){return this.ox.ah(t).gv(Al(this.ox.ro())),this.cv.Bs(),this}getBoundingBoxStrokeStyle(){return this.ox.ro()}setBoundingBox(t){return this.lx(t,!1),this}lx(t,e){this.gx=t;const i=this.Ax(t);if(this.ix.x.J(i.x),this.ix.y.J(i.y),this.ix.z.J(-i.z),!e){const t=this.Km.boundingBoxChanged(this.qm());t&&this.tx(t)}this.St.Bs()}getBoundingBox(){return this.gx}qe(t){if(La.yg(this.Uh,this.cg),0!==this.Ym){const e=this.Ym*t*.006;this.Vm.push({type:"wheel-zoom",deltaY:e}),this.Ym=Math.sign(this.Ym)*Math.max(Math.abs(this.Ym)-.01*t,0),0!==this.Ym&&this.St.Bs(!0)}const e=this.getCameraDirection();if(this.Vm.length>0){const t=this.Km.applyCameraInteractions(this.qm(),this.Vm);t&&this.tx(t),this.Vm.length=0}this.kx&&oi.equals(this.kx.location,this.ux.location)&&oi.equals(this.kx.direction,this.ux.direction)||this.R.O("camerachange",{cameraLocation:this.getCameraLocation()}),this.kx=this.ux,super.qe(t);for(let t=0;t<this.ey.length;t+=1)this.ey[t].$v();for(let t=0;t<this.ey.length;t+=1)this.ey[t].qe();this.nx.x.cn(),this.nx.y.cn(),this.nx.z.cn();const i=this.nx.x.Dr(this.nx.x._v(e)),s=this.nx.y.Dr(this.nx.y._v(e)),r=this.nx.z.Dr(this.nx.z._v(e));this.nx.x.qe(i),this.nx.y.qe(s),this.nx.z.qe(r),this.Tp.qe(!1,this.ey,void 0),super.og();const n=this.ix,o=d(n.x.getInnerStart(),n.y.getInnerStart(),n.z.getInnerStart()),h=d(n.x.getInnerEnd(),n.y.getInnerEnd(),n.z.getInnerEnd());this.ox.ii().dc([d(h.x,o.y,o.z),d(h.x,h.y,o.z),d(h.x,h.y,h.z),d(h.x,o.y,h.z),d(o.x,o.y,h.z),d(o.x,h.y,h.z),d(h.x,h.y,h.z),d(h.x,h.y,o.z),d(o.x,h.y,o.z),d(o.x,h.y,h.z),d(o.x,o.y,h.z),d(o.x,o.y,o.z)]);const a=[d(o.x,o.y,o.z),d(h.x,o.y,o.z),d(o.x,h.y,o.z),d(h.x,h.y,o.z),d(o.x,o.y,h.z),d(h.x,o.y,h.z),d(o.x,h.y,h.z),d(h.x,h.y,h.z)].map((t=>this.cv.bv(t))),l=this.cv.bv(d((o.x+h.x)/2,(o.y+h.y)/2,(o.z+h.z)/2)),c=Be(a,l),u=[];for(let t=0;t<c.length;t+=1){const e=c[t];wi(e,l,c[t>0?t-1:c.length-1],c[t<c.length-1?t+1:0])||u.push(e)}const f=Be(u,l);this.uy.wc(f),this.Ay.wc(f);for(let t=0;t<this.ey.length;t+=1)this.ey[t].tv()}dispose(){return this.sa.forEach((t=>{t()})),this.sa.length=0,this.ix.U(),this.cv.U(),this.Jm.U(),this.Qm.U(),this.Tp.U(),super.dispose()}X(){return this.ix.x.X(),this.ix.y.X(),this.ix.z.X(),super.X()}W(){return super.W()}tx(t){this.cv.setCameraLocation(t.location).setCameraDirection(t.direction).setLightLocation(oi.addVec(t.location,oi.multiply(t.direction,-this.Nm))),this.ux=t,this.St.Bs()}Ax(t){return oi.divide(t,oi.length(t)/this.Om)}qm(t=this.ux){return{boundingBox:this.Ax(this.gx),cameraLocation:t.location,cameraDirection:t.direction,projection:this.getProjection()}}forEachAxis(t){return t(this.nx.x),t(this.nx.y),t(this.nx.z),this}getSeries(){return this.ey}getMinimumSize(){}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationZoom(t),this.forEachAxis((e=>e.setAnimationsEnabled(t))),this}setAnimationZoom(t){return this.Gm=!!t,this}getAnimationZoom(){return this.Gm}mx(t){this.Vm.push({type:"rotate",rotation:t}),this.St.Bs()}xx(t){this.Gm?Math.sign(this.Ym)!==Math.sign(t)?this.Ym=t:this.Ym+=t:this.Vm.push({type:"wheel-zoom",deltaY:t}),this.St.Bs()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const ac=(t,e,i)=>{var s,r;return lt(e)?Pa(e,[[{component:e.series,componentColor:Va(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:ms(e.axisX.formatValue(e.x),e.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ms(e.axisY.formatValue(e.y),e.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ms(e.axisZ.formatValue(e.z),e.axisZ),font:{weight:"bold"}}],void 0!==e.intensity?["Value","",{text:ms(e.intensity.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}]:[]]):ut(e)?Pa(e,[[{component:e.series,componentColor:Va(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],void 0!==e.value?["Value","",{text:ms(e.value.toFixed(2),null===(r=e.lut)||void 0===r?void 0:r.units),font:{weight:"bold"}}]:[]]):Pa(e,[[{component:e.series,componentColor:Va(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:ms(e.axisX.formatValue(e.x),e.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ms(e.axisY.formatValue(e.y),e.axisY),font:{weight:"bold"}}],[t.getDefaultAxisZ().getTitle()||"Z","",{text:ms(e.axisZ.formatValue(e.z),e.axisZ),font:{weight:"bold"}}]])},lc={Column:nh,Row:oh};class cc extends Ia{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.Tx=new Map,this.Fx=this.addUIElement(lc.Row).setPosition({x:0,y:100}).setOrigin(Wr.LeftTop).setBackground((t=>t.setFillStyle(V).setStrokeStyle(Ot)))}add(t,e){return(t instanceof Oa?[t]:t instanceof Xg?t.getCells().filter((t=>t.panel instanceof Oa)).map((t=>t.panel)):[]).forEach((t=>{const i=this.Fx.addElement(Dh.VerticalLegendBox).setBackground((t=>t.setFillStyle(V).setStrokeStyle(Ot))).add(t,e).setTitle(t.getTitle());this.Tx.set(t,i)})),this.St.Bs(),this}setLegendBoxes(t){return this.Tx.forEach(((e,i)=>t(e,i))),this}getMinimumSize(){return super.getMinimumSize()||this.Fx.getSize()}}const uc={World:"World",USA:"USA",NorthAmerica:"NorthAmerica",SouthAmerica:"SouthAmerica",Canada:"Canada",Europe:"Europe",Asia:"Asia",Africa:"Africa",Australia:"Australia"},dc=(t,e)=>!(!e.name||t.name.toLowerCase()!==e.name.toLowerCase())||"ISO_A3"in t&&"ISO_A3"in e&&t.ISO_A3.toLowerCase()===e.ISO_A3.toLowerCase(),fc=(t,e)=>{let i=e.geometry;return i=gc(t,e,i),i=yc(t,e,i),i},gc=(t,e,i)=>{if(t===uc.Asia){const t=[];for(let e=0;e<i.length;e+=1){t[e]=[];const s=i[e],r=t[e];for(let t=0;t<s.length;t+=1){const e=s[t];e.x<-100?r[t]={x:e.x+360,y:e.y}:r[t]=e}}return t}return i},yc=(t,e,i)=>{const s=e.name.toLowerCase();let r;if(t===uc.USA&&("alaska"===s?r={translate:{x:55,y:-25},scale:{x:.16,y:.16}}:"hawaii"===s&&(r={translate:{x:48,y:7},scale:{x:1,y:1}})),r){const{translate:t,scale:n}=r,o=Ci(te(i)),h=[];for(let e=0;e<i.length;e+=1){h[e]=[];const r=i[e],a=h[e];for(let e=0;e<r.length;e+=1){const i=r[e];let h=i.x;"alaska"===s&&1===Math.sign(h)&&(h=-180-(180-h)),a[e]={x:t.x+(h-o.min.x)*n.x+o.min.x,y:t.y+(i.y-o.min.y)*n.y+o.min.y}}}return e.outlier=!0,e.transform={...r,vertexBoundaries:o},h}return i},pc={World:{min:{x:-180,y:-90},max:{x:180.0000000000002,y:83.63410065300012}},Europe:{min:{x:-25,y:34},max:{x:40,y:70}},Africa:{min:{x:-17,y:-40},max:{x:52,y:37.37549753800012}},Asia:{min:{x:27,y:-10.922621351999808},max:{x:180.0000000000002,y:81.85871002800009}},NorthAmerica:{min:{x:-179.1435033839999,y:5.515082098000121},max:{x:-50,y:83.11652252800009}},SouthAmerica:{min:{x:-85,y:-55.9185042229998},max:{x:-35,y:15}},USA:{min:{x:-125,y:24},max:{x:-68,y:50}},Canada:{min:{x:-141.0181,y:41.7297},max:{x:-52.6194,y:75}},Australia:{min:{x:111,y:-43.6586},max:{x:155,y:-9.2199}}},mc={World:.6,Europe:1/1.4,Africa:1.3,Asia:.8,NorthAmerica:.9,SouthAmerica:1.5,USA:3/4,Canada:6/8,Australia:11/12};class xc extends Oa{constructor(t,e,i,s,r,n,o){super(t,e,i,e.lg("mapChart bg",0),s,e.St.Ct.mapChartBackgroundFillStyle,e.St.Ct.mapChartBackgroundStrokeStyle,e.St.Ct.mapChartTitleFont,e.St.Ct.mapChartTitleFillStyle,e.St.Ct.mapChartTitleShadow,o),this.Ix=[],this.ct=this.ZA.d2({scaleXYConstructor:hs}),this.Px=!0,this.Lx=this.Ct.mapChartSeparateRegionFillStyle,this.Bx=this.Ct.mapChartSeparateRegionStrokeStyle,this.Bh=!0,this.Dx=0,this.Ex=!0,this.Rx=new Map,this.regions=new Ct,this.zx=t=>{this.ct.x.J(t.engineWidth).yi([this.ai.left+this.Dn.left,this.ai.right+this.Dn.right]),this.ct.y.J(t.engineHeight).yi([this.ai.bottom+this.Dn.bottom,this.ai.top+this.Dn.top+La.vg(this.Uh,this.cg)]),this.Ox&&this.Vx(this.Nx,this.ct,this.Ox)},this.R=new Ct,this.St.Ma(zn.Mo),this.Bh=!1!==(null==n?void 0:n.animationsEnabled),this.Gx=e._p("mapChart plotting",0),this.addEventListener("resize",this.zx),this.Uh.jr("Map Chart");const h=e.kp(),a=ee(n?n.cursorBuilder:void 0,rl);this.Tp=Ua(this,h,a.jg(h,this.uiScale,this.uiScale,qt,this.Ct),void 0,"show-pointed",vc,(()=>0)),this.Ux=this.vs.dA(),this.ag(r,this.uiScale),this.$x=this.Gx.yv(this.ct).setPointerEvents(this.Px).Je(this.Ct.mapChartFillStyle).Qe(this.Ct.mapChartStrokeStyle),this.regions.Ut(this.$x,(t=>{if(!this.Yx)return;const e=this.Hx(this.Yx,t);return e?e.region:void 0})),this.$x.addEventListener("pointermove",((t,e)=>{const i=e.collectionMember;if(!this.Yx||!i)return;const s=this.Hx(this.Yx,i);this.Xx(s),this.Ex&&s&&this.St.Ms.zs(s.region,!0)})),this.$x.addEventListener("pointerleave",((t,e)=>{const i=e.collectionMember;if(!this.Yx||!i)return;const s=this.Hx(this.Yx,i);this.Wx(),this.Ex&&s&&this.St.Ms.zs(s.region,!1)})),this.jx=this.Gx.yv(this.ct).setPointerEvents(this.Px).Je(this.Ct.mapChartOutlierRegionFillStyle).Qe(this.Ct.mapChartOutlierRegionStrokeStyle);const l=ee(n&&n.type,uc.World);this.Nx=l,this.Zx(l).then((()=>{this.R.O("ready",{})}))}setFillStyle(t){return this.$x.Je(t),this.St.Bs(),this}getFillStyle(){return this.$x.pr()}setStrokeStyle(t){return this.$x.Qe(t),this.St.Bs(),this}getStrokeStyle(){return this.$x.Ua()}setEffect(t){return this.Ux.Ls(t),this.St.Bs(),this}getEffect(){return this.Ux.Ds()}setOutlierRegionFillStyle(t){return this.jx.Je(t),this.St.Bs(),this}getOutlierRegionFillStyle(){return this.jx.pr()}setOutlierRegionStrokeStyle(t){return this.jx.Qe(t),this.St.Bs(),this}getOutlierRegionStrokeStyle(){return this.jx.Ua()}setSeparateRegionFillStyle(t){return this.Lx="function"==typeof t?t(this.Lx):t,this.Ix.forEach((t=>t.Je(this.Lx))),this.St.Bs(),this}getSeparateRegionFillStyle(){return this.Lx}setSeparateRegionStrokeStyle(t){return this.Bx="function"==typeof t?t(this.Bx):t,this.Ix.forEach((t=>t.Qe(this.Bx))),this.St.Bs(),this}getSeparateRegionStrokeStyle(){return this.Bx}invalidateRegionValues(t){if(!this.Yx||!this.Qx)return this.Jx=this.Jx||[],this.Jx.push(t),this;if("function"==typeof t)for(let e=0;e<this.Yx.regions.length;e+=1){const i=this.Yx.regions[e],s=this.Qx[e],r=t({...i,geometry:void 0},s);if(void 0!==r&&r!==s){this.Qx[e]=r;const t=this.Rx.get(i);null==t||t.forEach((t=>{t.Kx(r)}))}}else for(const e of t)if(e)for(let t=0;t<this.Yx.regions.length;t+=1){const i=this.Yx.regions[t],s=this.Qx[t];if(void 0!==e.value&&e.value!==s&&dc(i,e)){this.Qx[t]=e.value;const s=this.Rx.get(i);null==s||s.forEach((t=>{t.Kx(e.value)}))}}return this.St.Bs(),this}setPointerEvents(t){return this.Px=t,this.$x.setPointerEvents(t),this}getPointerEvents(){return this.Px}setHighlight(t){var e;return t=He(t),this.Dx=t,null===(e=this.Yx)||void 0===e||e.regions.forEach((e=>{this.St.Ms.zs(e,t)})),this.R.O("highlightchange",{highlight:t}),this}getHighlight(){return this.Dx}setAnimationHighlight(t){var e;return null===(e=this.Yx)||void 0===e||e.regions.forEach((e=>{this.St.Ms.Os(e,t)})),this}getAnimationHighlight(){var t;return this.St.Ms.Vs(null===(t=this.Yx)||void 0===t?void 0:t.regions[0])}setHighlightOnHover(t){return this.Ex=t,!1===t&&this.getHighlight()>0&&this.setHighlight(!1),this}getHighlightOnHover(){return this.Ex}async Zx(t){const e=await((t,e)=>{let i;if(t===uc.World)i="countries_world.json";else if(t===uc.NorthAmerica)i="countries_northAmerica.json";else if(t===uc.SouthAmerica)i="countries_southAmerica.json";else if(t===uc.Africa)i="countries_africa.json";else if(t===uc.Europe)i="countries_europe.json";else if(t===uc.Asia)i="countries_asia.json";else if(t===uc.USA)i="states_usa.json";else if(t===uc.Canada)i="territoriesProvinces_canada.json";else{if(t!==uc.Australia){const e=`LCJS MapChart unidentified \`type\`: ${t}`;throw Wt.alert(e),new Error(e)}i="territories_australia.json"}return new Promise(((t,s)=>{(t=>{if(t.resourcesBaseUrl){const e=`${t.resourcesBaseUrl}${t.fileName}`;return void Wt.fetch(e).then((e=>{t.success(e)})).catch((()=>{t.error({url:e})}))}const e=`${Wt.location.origin}/resources${t.fileName}`;Wt.fetch(e).then((e=>{if(!e.ok)throw new Error;t.success(e)})).catch((()=>{const i=`https://lcjs-resources.lightningchart.com/v1${t.fileName}`;Wt.fetch(i).then((e=>{Wt.console.warn("LightningChart JS warning | fallbacking publicly hosted asset resources.\nFor more information, please see https://lightningchart.com/js-charts/docs/troubleshooting/warning-using-publicly-hosted-resources/"),t.success(e)})).catch((()=>{t.error({url:e})}))}))})({fileName:`/maps/${i}`,resourcesBaseUrl:e,success:e=>e.json().then(t),error:({url:t})=>$e(e,t,"Map Chart",{shouldCrash:!0})})}))})(t,this.jA.ve);this.Qx=new Array(e.regions.length).map((t=>{})).fill(void 0);const i=pc[t];if(!i)throw new Error("Unidentified map type.");for(const t of e.outliers)for(const e of t.geometry)this.jx.Oo().wc(e);if(t===uc.USA){const t=25.8,e=29.7;this.Ix.push(this.HA.Ke(this.ct).setPointerEvents(!1).Je(this.Lx).Qe(this.Bx).th({x:-126,y:t}).J({x:10,y:e-t}),this.HA.Ke(this.ct).setPointerEvents(!1).Je(this.Lx).Qe(this.Bx).th({x:-113,y:t}).J({x:7,y:e-t}))}const s=this.St.Ms.zo(this.$x,{animationEnabled:this.Bh});for(let i=0;i<e.regions.length;i+=1){const r=e.regions[i],n=fc(t,r),o=[];for(const t of n)t.length<3||o.push(this.$x.Oo().wc(t));this.Rx.set(r,o),s.Oo(r,(t=>{o.forEach((e=>e.Dt(t)))}))}if(this.Ux.Cs([this.$x]),this.Ox=i,this.Vx(t,this.ct,i),this.Yx=e,this.Jx){for(const t of this.Jx)this.invalidateRegionValues(t);this.Jx=void 0}this.St.Bs()}Vx(t,e,i){const s=mc[t],r=e.x.getCellSize(),n=e.y.getCellSize()/r,o={min:{x:i.min.x,y:i.min.y},max:{x:i.max.x,y:i.max.y}};if(n<s){const t=(o.max.x-o.min.x)*(s/n-1);o.min.x-=t/2,o.max.x+=t/2}else if(n>s){const t=(o.max.y-o.min.y)*(n/s-1);o.min.y-=t/2,o.max.y+=t/2}e.x.j(o.min.x,o.max.x),e.y.j(o.min.y,o.max.y);const h=this.ct.x._i(),a=this.ct.y._i();this.R.O("viewchange",{latitudeRange:{start:o.min.y,end:o.max.y},longitudeRange:{start:o.min.x,end:o.max.x},margin:{top:a[1],bottom:a[0],left:h[0],right:h[1]}})}Xx(t){this.qx=t,this.St.Bs()}Wx(){this.qx=void 0,this.St.Bs()}Hx(t,e){const i=Array.from(this.Rx.entries()).findIndex((([t,i])=>i.includes(e))),s=null==t?void 0:t.regions[i],r=this.St.ba();if(!r)return;const n=this.St.Wa(r),o=this.Qx&&this.Qx[i];let h=ot({x:n.engineX,y:n.engineY},this.St.ct,this.ct);h={x:Kt(h.x,this.ct.x.getInnerStart(),this.ct.x.getInnerEnd()),y:Kt(h.y,this.ct.y.getInnerStart(),this.ct.y.getInnerEnd())};let a=h.x,l=h.y;const c=s.transform;s.outlier&&c&&(a=(a-c.translate.x-c.vertexBoundaries.min.x)/c.scale.x+c.vertexBoundaries.min.x,l=(l-c.translate.y-c.vertexBoundaries.min.y)/c.scale.y+c.vertexBoundaries.min.y);const u=this.getFillStyle();return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.St.ct,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.St.ct},region:s,value:o,longitude:l,latitude:a,lut:j(u)?u.lut:void 0}}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}addCursor(t=rl){const e=this.JA(),i=t.jg(e,this.uiScale,this.uiScale,this.XA(e),this.Ct);return this.rg(i),i}setAnimationsEnabled(t){return this.Bh=!t,this}getAnimationsEnabled(){return this.Bh}getMinimumSize(){}kf(){return[this]}qe(t){super.qe(t),super.og(),La.yg(this.Uh,this.cg);const e=y(this.ct.x.mi(),this.ct.y.mi(),this.ct.x.Si(),this.ct.y.Si());return this.Gx.Zm(e),this.Tp.qe(!1,[],void 0,{explicitTarget:this.qx}),this}dispose(){return this.Gx.U(),this.Tp.U(),Fa(this.ct),super.dispose()}X(){return super.X(),this.ct.X(),this}W(){return super.W(),this.ct.W(),this}Us(){return Le(this.getFillStyle(),this.$x.Ft())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),this.styleLegendEntry(t,i),this}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.getFillStyle()})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const Sc=(t,e)=>{const i=t>0,s=e>0;return`${[Pe(Math.abs(0|t),2),"° ",Pe(Math.abs(0|(t<0?t=-t:t)%1*60),2),"' "].join("")+(i?"E":"W")}, ${[Pe(Math.abs(0|e),2),"° ",Pe(Math.abs(0|(e<0?e=-e:e)%1*60),2),"' "].join("")+(s?"N":"S")}`},vc=(t,e,i)=>{var s;const r=[[{text:e.region.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[Sc(e.longitude,e.latitude)]];return void 0!==e.value&&r.push({text:ms(e.value.toFixed(1),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}),r};class Ac extends Tn{constructor(t,e,i,s,r,n,o,h,a){super(t,e,e.tS(i),s,r,{numeric:e.iS({amplitude:s.polarAmplitudeAxisNumericTicks,radial:s.polarAmplitudeAxisNumericTicks}),datetime:e.iS({amplitude:s.polarAmplitudeAxisDateTimeTicks,radial:s.polarAmplitudeAxisDateTimeTicks}),time:e.iS({amplitude:s.polarAmplitudeAxisTimeTicks,radial:s.polarAmplitudeAxisTimeTicks})},{type:"linear"}),this.R=new Ct,this.sS=n,this.eS=o,this.hS=h,this.vs=a,this.rS=i,this.nS=e.iS({amplitude:s.polarAmplitudeAxisStrokeStyle,radial:s.polarRadialAxisStrokeStyle}),this.jh=h.mn(i).setPointerEvents(!1).Sr(e.iS({amplitude:s.polarAmplitudeAxisTitleFont,radial:s.polarRadialAxisTitleFont})).Je(e.iS({amplitude:s.polarAmplitudeAxisTitleFillStyle,radial:s.polarRadialAxisTitleFillStyle})),this.wr=this.vs.dA([this.jh]).Ls(s.effectsText)}setTickStrategy(t,e){return super.ar(t,e)}setStrokeStyle(t){return this.nS="function"==typeof t?t(this.nS):t,this.eS.Bs(),this}getStrokeStyle(){return this.nS}Or(t){return{}}Ur(t,e,i,s){const r=this.oS(this.rS,t,e.kh);return{keyValue:t,tickLevel:e,labelText:i,labelPosition:Li(this.aS(this.rS,t),r.padding),labelAlignment:r.alignment,labelRotation:r.rotation,labelOffset:r.offset}}Zr(t,e,i,s){return new bc(e,t,this.rS,this.hS,this.lS(this.sS,this.rS),this.hS.uh(this.rS).setPointerEvents(!1))}Qh(){return this.rS}qe(t){this.cS(this.rS,this.nS,t.bA),this.uS(this.rS,this.jh,t.bA),t.ticksInfo.forEach(((t,e)=>{e.Lr.th(t.labelPosition).Ul(t.labelAlignment).br(t.labelRotation).El(t.labelOffset.x,t.labelOffset.y),this.dS&&!1===this.dS(e)&&e.Lr.setVisible(!1),this.fS(this.rS,e.AS,e.gS,e)}))}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}}class bc extends En{constructor(t,e,i,s,r,n,o){super(t,e,s,i,o),this.AS=r,this.gS=n,r.setPointerEvents(!1),this.gs.push(r,n)}}class Cc extends Ac{constructor(t,e,i,s,r,n,o,h,a){super(t,Mc((()=>this.mA())),e,i,s,r,n,o,h),this.Av=this.eS.uh(this.rS).setPointerEvents(!1),this.pS=a,this.setScrollStrategy(ln.expansion),this.setTickStrategy(cn.Numeric),this.setTitle("Amplitude"),this.jh.Wr(i.polarAmplitudeAxisTitleShadow)}mA(){return this.pS()}Hr(t,e,i){return{ticksInfo:e,bA:this.sn(((t,e)=>{const i=e.xn.kh,s=.5*this.nS.getThickness()+i.tickLength+i.tickPadding+Math.abs(e.Lr.Dr().Pu().y);return Math.max(t,s)}),0),updatedTicks:i}}un(t,e){return Ss(t,e,this.rS.y)}An(t,e,i){const s=2*Math.abs(e-t),r=this.rS.x.Qi(s);return{start:t+i.start*r*Math.sign(t-e),end:e+i.end*r*Math.sign(e-t)}}aS(t,e){return{x:t.ae()?e-t.oe().start:t.oe().start-e,y:0}}lS(t,e){return t.Pd(e)}fS(t,e,i,s){const r=s.xn.kh,n=t.ae()?s.M-t.oe().start:t.oe().start-s.M;Zt(s.M,t.oe().start)||Zt(s.M,t.oe().end)?e.setVisible(!1):e.setVisible(!0).lu(0).dh(360).Au(void 0).fu(0).cu(n).Au(60).Je(V).Qe(r.gridStrokeStyle);const o=.5*this.nS.getThickness();i.fh({x:n,y:-o*t.rs().y}).dh({x:n,y:-(o+r.tickLength)*t.rs().y}).ah(r.tickStyle)}oS(t,e,i){return{alignment:{x:0,y:1},padding:{x:0,y:t.rs().y*-(.5*this.nS.getThickness()+i.tickLength+i.tickPadding)},rotation:0,offset:{x:0,y:0}}}cS(t,e,i){const s=t.ae()?t.oe().end-t.oe().start:t.oe().start-t.oe().end;this.Av.fh({x:0,y:0}).dh({x:s,y:0}).ah(e)}uS(t,e,i){const s=t.ae()?(t.oe().start+t.oe().end)/2-t.oe().start:t.oe().start-(t.oe().start+t.oe().end)/2;e.Ul({x:0,y:1}).th({x:s,y:-i*t.rs().y})}}const Mc=t=>({...kl(t,(t=>t.getAmplitudeMin()),(t=>t.getAmplitudeMax()),(t=>{})),tS:t=>({getInnerStart:()=>t.oe().start,getInnerEnd:()=>t.oe().end,j:(e,i)=>t.re(e,i),ht:(e,i,s,r,n)=>t.y.ht(e,i,s,r,n)}),iS:t=>t.amplitude});class Tc extends Ac{constructor(t,e,i,s,r,n,o,h){var a;super(t,wc,e,i,s,r,n,o,h),this.vS=90,this.yS=12,this.mS=Ec,this.Av=this.eS.Pd(this.rS).setPointerEvents(!1),this.dS=t=>{if(0===this.getTitle().length||_(this.getTitleFillStyle()))return;let e=180*(t.M-this.rS.de())/Math.PI%360;for(;e<0;)e+=360;for(;e>360;)e-=360;return!(e>=0&&e<=20||e>=340&&e<=360)&&void 0},this.Ir=void 0,this.setTickStyle(i.polarRadialAxisTickStyle),this.setTitle("Degrees"),this.setNorth(this.vS),this.xS=null!==(a=this.Ct.polarRadialAxisMarginAfterTicks)&&void 0!==a?a:7}setTickStyle(t){return this.SS="function"==typeof t?t(this.SS):t,this.bS(),this.eS.Bs(),this}getTickStyle(){return this.SS}setTickFormattingFunction(t){return this.mS=t,this.bS(),this.eS.Bs(),this}getTickFormattingFunction(){return this.mS}setClockwise(t){this.rS.le(t);const e=this.vS*Math.PI/180;return t?this.rS.ue(e+Math.PI/2):this.rS.ue(e-Math.PI/2),this.eS.Bs(),this}getClockwise(){return!this.rS.ce()}setNorth(t){for(;t<0;)t+=360;t%=360,this.vS=t;const e=t*Math.PI/180;return this.getClockwise()?this.rS.ue(e+Math.PI/2):this.rS.ue(e-Math.PI/2),this.eS.Bs(),this}getNorth(){return 180*this.rS.de()/Math.PI}setDivision(t){return this.yS=t,this.bS(),this.eS.Bs(),this}getDivision(){return this.yS}getMarginAfterTicks(){return this.xS}setMarginAfterTicks(t){return this.xS=t,this.chart.St.Bs(),this}mA(){return[]}Hr(t,e,i){return{ticksInfo:e,bA:this.sn(((t,e)=>{const i=e.xn.kh,s=.5*this.nS.getThickness()+i.tickLength+i.tickPadding+Math.abs(e.Lr.Dr().Pu().y);return Math.max(t,s)}),0)+this.xS,updatedTicks:i}}un(t,e){return e}An(t,e,i){return{start:t,end:e}}aS(t,e){const i=t.ce()?1:-1,s=t.de(),r=t.ae()?t.oe().end-t.oe().start:t.oe().start-t.oe().end;return{x:Math.cos((e-s)*i)*r,y:Math.sin((e-s)*i)*r}}lS(t,e){return t.uh(e)}fS(t,e,i,s){const r=this.SS,n=t.ce()?1:-1,o=t.de(),h=(s.M-o)*n,a=Math.cos(h),l=Math.sin(h),c=t.ae()?t.oe().end-t.oe().start:t.oe().start-t.oe().end,u={x:a*c,y:l*c};e.fh({x:0,y:0}).dh(u);const d={x:u.x+a*r.tickLength*t.rs().x,y:u.y+l*r.tickLength*t.rs().y};i.fh(u).dh(d),e.ah(r.gridStrokeStyle),i.ah(r.tickStyle)}oS(t,e,i){const s=t.ce()?1:-1;let r,n=(e-t.de())*s;for(;n<0;)n+=2*Math.PI;for(;n>=2*Math.PI;)n-=2*Math.PI;r=n>0&&n<=Math.PI?-n+Math.PI/2:-n-Math.PI/2;const o=Math.cos(n),h=Math.sin(n),a=i.tickLength+i.tickPadding;return{alignment:{x:0,y:0},padding:{x:o*a*t.rs().x,y:h*a*t.rs().y},rotation:180*r/Math.PI,offset:{x:0,y:0}}}cS(t,e,i){const s=t.ae()?t.oe().end-t.oe().start:t.oe().start-t.oe().end;this.Av.lu(0).dh(360).fu(0).cu(s+.5*e.getThickness()*t.rs().x).Au(360).Je(V).Qe(e)}uS(t,e,i){const s=t.de(),r=this.oS(t,0+s,this.SS),n=t.ae()?t.oe().end-t.oe().start:t.oe().start-t.oe().end;e.Ul(r.alignment).br(r.rotation).El(r.offset.x,r.offset.y).th(Li({x:n,y:0},r.padding))}bS(){this.kr({Sh:[],bh:[{Lr:"Radial ticks",kA:0,kh:this.SS,yh:this.mS,Mn:(t,e,i,s)=>{const r=[],n=2*Math.PI/this.yS;for(let t=0;t<2*Math.PI;t+=n)r.push(t);return r},qh:{Kr:()=>{},tr:()=>!1,tn:"hide-label"},wn:void 0}],Mh:Ec,wh:void 0,_h:void 0},"Numeric")}}const Ec=(t,e,i)=>(180*t/Math.PI).toFixed(0),wc={rn:()=>{},nn:()=>{},ln:()=>{},tS:t=>({getInnerStart:()=>0,getInnerEnd:()=>2*Math.PI,j:(t,e)=>{},ht:(e,i,s,r,n)=>t.x.ht(e,i,s,r,n)}),iS:t=>t.radial},Bc=t=>!!(t&&"object"==typeof t&&"axisAmplitude"in t&&"axisRadial"in t),kc=t=>!!(t&&"object"==typeof t&&"angle"in t&&"number"==typeof t.angle&&"amplitude"in t&&"number"==typeof t.amplitude),Rc=(t,e)=>{const i=[],s=e.oe().start,r=e.oe().end,n=e.ae(),o=e.ce()?1:-1,h=e.de(),a=Math.abs(r-s),l=Math.min(s,r)+.001*a,c=Math.max(s,r)-.001*a;for(const e of t){const t=Kt(e.amplitude,l,c),r=e.angle*Math.PI/180-h,a=Math.cos(r*o)*(n?t-s:s-t),u=Math.sin(r*o)*(n?t-s:s-t),d=e.color;i.push({x:a,y:u,color:d})}return i},Fc=t=>{const e={min:hi,max:ai};for(const i of t)e.min=Math.min(e.min,i.amplitude),e.max=Math.max(e.max,i.amplitude);return e},Ic=t=>t.slice().map((t=>t.angle>=0&&t.angle<=360?t:{...t,angle:t.angle%360})),Oc=(t,e)=>{let i=Hi(t);for(e.ce()||(i*=-1),i+=180*e.de()/Math.PI;i<0;)i+=360;i%=360;const s=Ii(t),r=e.oe(),n=Math.abs(r.end-r.start);return{angle:i,amplitude:Rs(r.start,r.end,s/n)}};class Lc extends Cs{constructor(t,e,i,s,r,n){super(e,i,r,n),this.Rs="Sector",this.MS=0,this.wS=1*Math.PI/2,this._S=void 0,this.CS=void 0,this.R=new Ct,this.Hs=t,this.rS=s,this.kS=this.Hs.Ru(this.rS).Dt(this.getHighlight()),this._s(this.kS),this.We=r.polarSectorFillStyle,this.je=r.polarSectorStrokeStyle,this.setPointerEvents(!1)}setAngleStart(t){return this.MS=t,this.Hs.Bs(),this}getAngleStart(){return this.MS}setAngleEnd(t){return this.wS=t,this.Hs.Bs(),this}getAngleEnd(){return this.wS}setAmplitudeStart(t){return this._S=t,this.Hs.Bs(),this}getAmplitudeStart(){return this._S}setAmplitudeEnd(t){return this.CS=t,this.Hs.Bs(),this}getAmplitudeEnd(){return this.CS}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.Hs.Bs(),this}getFillStyle(){return this.We}setStrokeStyle(t){return this.je="function"==typeof t?t(this.je):t,this.Hs.Bs(),this}getStrokeStyle(){return this.je}qe(){const t=this.rS.oe(),e=void 0!==this._S?Kt(this._S,t.start,t.end):t.start,i=void 0!==this.CS?Kt(this.CS,t.start,t.end):t.end,s=[],r=Math.min(this.MS,this.wS),n=Math.max(this.MS,this.wS);for(let t=r;t<=n;t+=1)s.push({angle:t,amplitude:e});for(let t=n;t>=r;t-=1)s.push({angle:t,amplitude:i});const o=Rc(s,this.rS);this.kS.wc(o).Je(this.We).Qe(this.je)}ih(t,e){t.Dt(e),this.Hs.Bs()}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We,stroke:this.je})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Dc extends Cs{constructor(){super(...arguments),this.Ov=!0,this.zv=!0}setAutoScrollingEnabled(t){return this.Ov=t,this.chart.St.Bs(),this}getAutoScrollingEnabled(){return this.Ov}$v(){}qe(){}tv(){}setCursorEnabled(t){return this.zv=t,this}getCursorEnabled(){return this.zv}mg(){return this.getVisible()&&this.getCursorEnabled()}setCursorFormattingOverride(t){return this.Nv=t,this}getCursorFormattingOverride(){return this.Nv}}class Pc extends Dc{constructor(t,e,i,s,r,n){super(e,i,r,n),this.Hs=t,this.chart=e,this.scale=s}getAmplitudeMin(){return this.TS?this.TS.min:void 0}getAmplitudeMax(){return this.TS?this.TS.max:void 0}}class Vc extends Pc{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n),this.Rs="Heatmap Series",this.FS=!0,this.Xv=!1,this.R=new Ct;const h=this.chart.getSeries().length;this.We=Ve(this.Ct.polarHeatmapSeriesFillStyle||this.Ct.heatmapGridSeriesFillStyle,h);const a=o.amplitudeStart||0,l=o.amplitudeEnd?(o.amplitudeEnd-a)/(o.annuli-1):o.amplitudeStep||1,c={sectors:o.sectors,annuli:o.annuli,amplitudeStart:a,amplitudeStep:l,heatmapDataType:"intensity",dataOrder:o.dataOrder||"annuli"};this.Ca=c,this.IS=t.PS(s,[],c).Je(this.We).Dt(this.getHighlight()),this._s(this.IS);const u=Math.min(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep),d=Math.max(c.amplitudeStart,c.amplitudeStart+(c.annuli-1)*c.amplitudeStep);this.TS={min:u,max:d},this.setHighlightOnHover(!1)}solveNearest(t,e="show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=ot(s,this.chart.St.ct,this.scale),n=Oc(r,this.scale),o=Da(e)?this.IS.LS(n):this.IS.wd(n);if(!o)return;const h=Rc([o],this.scale)[0];return{cursorPosition:{pointMarker:h,pointMarkerScale:this.scale,resultTable:h,resultTableScale:this.scale},series:this,angle:o.angle,amplitude:o.amplitude,intensity:o.cellValue,annulus:o.iAnnulus,sector:o.iSector,lut:j(this.We)?this.We.lut:void 0}}qt(t,e){return ti({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0,intensity:0,sector:0,annulus:0,lut:j(this.We)?this.We.lut:void 0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}invalidateIntensityValues(t){if(this.Xv&&this.chart.St.Ma(zn.Fo),Array.isArray(t)){if(0===t.length||0===t[0].length)return this;const e={x:t.length,y:t[0].length,sectors:"annuli"===this.Ca.dataOrder?t[0].length:t.length,annuli:"annuli"===this.Ca.dataOrder?t.length:t[0].length},i="annuli"===this.Ca.dataOrder?this.Ca.annuli:this.Ca.sectors,s="annuli"===this.Ca.dataOrder?this.Ca.sectors:this.Ca.annuli;if(e.x>i||e.y>s){if(!0===this.chart.jA.ka){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nHeatmap ${i}x${s}, input ${e.x}x${e.y}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);if(0===(t=r).length||0===t[0].length)return this}this.IS.sm({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iSector"in t&&"iAnnulus"in t&&"values"in t){if(0===t.values.length||0===t.values[0].length)return this;const e={primary:t.values.length,secondary:t.values[0].length,sectors:"annuli"===this.Ca.dataOrder?t.values[0].length:t.values.length,annuli:"annuli"===this.Ca.dataOrder?t.values.length:t.values[0].length},i="annuli"===this.Ca.dataOrder?t.iAnnulus:t.iSector,s=i+e.primary-1,r="annuli"===this.Ca.dataOrder?t.iSector:t.iAnnulus,n=r+e.secondary-1,o="annuli"===this.Ca.dataOrder?this.Ca.annuli-1:this.Ca.sectors-1,h="annuli"===this.Ca.dataOrder?this.Ca.sectors-1:this.Ca.annuli-1;if(i<0||r<0){if(!0===this.chart.jA.ka){const e=`PolarHeatmapSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niSector: ${t.iSector}, iAnnuli: ${t.iAnnulus}.\nNo intensity values will be invalidated.`;Wt.console.warn(e)}return this}if(s>o||n>h){if(!0===this.chart.jA.ka){const t=`PolarHeatmapSeries.invalidateIntensityValues intensity matrix overflow.\nMax indexes ${o}x${h}, input ${e.primary}x${e.secondary} starting at [${i},${r}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(t)}const a=Math.max(s-o,0),l=e.primary-a,c=Math.max(n-h,0),u=[];for(let e=0;e<l;e+=1)u[e]=t.values[e].slice(0,c>0?-c:void 0);if(0===(t={iSector:t.iSector,iAnnulus:t.iAnnulus,values:u}).values.length||0===t.values[0].length)return this}this.IS.sm({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.Hs.Bs(),this.Xv=!0,this}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.IS.Je(this.We),this.Hs.Bs(),this}getFillStyle(){return this.We}clear(){return this.IS.ii(),this.Hs.Bs(),this}setIntensityInterpolation(t){return t=t||"disabled",this.IS.tm(t),this.Hs.Bs(),this}getIntensityInterpolation(){return this.IS.im()}Us(){return Le(this.We,this.IS.Ft())}Ev(){return this.Ov&&this.getVisible()}ih(t,e){t.Dt(e),this.Hs.Bs()}qe(){}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class _c extends Pc{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Rs="Line Series",this.BS=[],this.DS=!1,this.ES=!1,this.R=new Ct,this.gu=Ve(this.Ct.polarLineSeriesStrokeStyle,n),this.RS=t.Op(s,void 0,[pl.UserSeries]).ah(this.gu).Dt(this.getHighlight()),this._s(this.RS)}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=this.RS.zS(s);if(!r)return;const n=Oc(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}qt(t,e){return ti({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,"show-nearest")))}setData(t){return 0!==this.BS.length&&this.chart.St.Ma(zn.Fo),this.BS=Ic(t),this.DS=!0,this.TS=Fc(this.BS),this.Hs.Bs(),this}setStrokeStyle(t){this.gu="function"==typeof t?t(this.gu):t;const e=this.gu;return this.RS.ah(e),this.Hs.Bs(),this}getStrokeStyle(){return this.gu}setConnectDataAutomaticallyEnabled(t){return this.ES=t,this.Hs.Bs(),this}getConnectDataAutomaticallyEnabled(){return this.ES}Ev(){return this.Ov&&this.BS.length>0&&this.getVisible()}ih(t,e){t.Dt(e),this.Hs.Bs()}qe(){if(this.DS||this.scale.fe()){const t=Rc(this.BS,this.scale),e=Ci(t);this.ES?(t.push({...t[0]}),this.RS.$c(!0)):this.RS.$c(!1),this.RS.ii().dc(t).Lt(e),this.DS=!1,this.RS.Dr()}}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{stroke:this.gu})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class zc extends Pc{constructor(t,i,s,r,n,o,h){super(t,i,s,r,n,h),this.Rs="Point Line Series",this.BS=[],this.DS=!1,this.ES=!1,this.OS=3,this.yl=0,this.VS=e.PointShape.Circle,this.R=new Ct,this.We=Ve(this.Ct.polarPointLineSeriesFillStyle,o),this.gu=Ve(this.Ct.polarPointLineSeriesStrokeStyle,o),this.RS=t.Op(r,void 0,[pl.UserSeries]).ah(this.gu).Dt(this.getHighlight()),this._s(this.RS),this.NS=t.sy(r).Je(this.We).oc(this.VS).J(this.OS).Dt(this.getHighlight()),this._s(this.NS)}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=this.RS.zS(s);if(!r)return;const n=Oc(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}qt(t,e){return ti({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}setData(t){return 0!==this.BS.length&&this.chart.St.Ma(zn.Fo),this.BS=Ic(t),this.DS=!0,this.TS=Fc(this.BS),this.Hs.Bs(),this}setStrokeStyle(t){this.gu="function"==typeof t?t(this.gu):t;const e=this.gu;return this.RS.ah(e),this.Hs.Bs(),this}getStrokeStyle(){return this.gu}setPointFillStyle(t){this.We="function"==typeof t?t(this.We):t;const e=this.We;return this.NS.Je(e),this.Hs.Bs(),this}getPointFillStyle(){return this.We}setPointSize(t){return this.OS=t,this.NS.J(t),this.Hs.Bs(),this}getPointSize(){return this.OS}setPointShape(t){return this.VS=t,this.NS.oc(this.VS),this}getPointShape(){return this.VS}setPointRotation(t){return this.yl=t,this.NS.br(t),this.Hs.Bs(),this}getPointRotation(){return this.yl}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We,stroke:this.gu})}setConnectDataAutomaticallyEnabled(t){return this.ES=t,this.Hs.Bs(),this}getConnectDataAutomaticallyEnabled(){return this.ES}Ev(){return this.Ov&&this.BS.length>0&&this.getVisible()}ih(t,e){t.Dt(e),this.Hs.Bs()}qe(){if(this.DS||this.scale.fe()){const t=Rc(this.BS,this.scale),e=Ci(t);this.ES?(t.push({...t[0]}),this.RS.$c(!0)):this.RS.$c(!1),this.RS.ii().dc(t).Lt(e),this.NS.ii().dc(t).Lt(e),this.DS=!1,this.RS.Dr(),this.NS.Dr()}}$s(){return this.Es||this.VS}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Uc extends In{constructor(t,e,i,s,r,n,o,h,a){super(),this.wt=Ze(),this.ft=!1,this.R=new Ct,this.GS=s,this.US=r,this.$S=n,this.YS=o,this.HS=h,this.Hs=t,this.scale=e,this.XS=i,this.Ct=a}dispose(){return this.XS&&this.XS(this),this.Hs.St.Bs(),this.R.O("dispose",{}),this.ft=!0,this}setVisible(t){return super.setVisible(t),this.$S(),this.Hs.St.Bs(),this}isDisposed(){return this.ft}setPointerEvents(t){return this.YS(this,t),this}getPointerEvents(){return this.HS(this)}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Nc extends Uc{constructor(t,e,i,s,r,n,o,h,a,l,c,u,d,f,y,p,m,x){super(e,i,s,r,n,o,h,a,x),this.WS=1,this.jS=1,this.ey=t,this.Hs=e,this.scale=i,this.dimensionStrategy=l,this.start=c,this.end=u,this.lowerExtreme=d,this.lowerQuartile=f,this.median=y,this.upperQuartile=p,this.upperExtreme=m,this.boundaries=g(this.dimensionStrategy.toPoint(c,d),this.dimensionStrategy.toPoint(u,m)),this.ZS=this.Ct.boxSeriesBodyFillStyle,this.QS=this.Ct.boxSeriesBodyStrokeStyle,this.gu=this.Ct.boxSeriesStrokeStyle,this.JS=this.Ct.boxSeriesMedianStrokeStyle,this.Dr()}qt(t,e){const i=this.ey.Xs.toPoint((this.start+this.end)/2,this.median);return{cursorPosition:{resultTable:i,resultTableScale:this.scale,pointMarker:i,pointMarkerScale:{x:this.ey.axisX,y:this.ey.axisY}},...i,figure:this,start:this.start,end:this.end,lowerExtreme:this.lowerExtreme,lowerQuartile:this.lowerQuartile,median:this.median,upperQuartile:this.upperQuartile,upperExtreme:this.upperExtreme,series:this.ey,axisX:this.ey.axisX,axisY:this.ey.axisY}}KS(){return this.boundaries}setBodyWidth(t){return this.WS=t,this.Dr(),this}getBodyWidth(){return this.WS}setBodyFillStyle(t){return this.ZS="function"==typeof t?t(this.ZS):t,this.US(),this}getBodyFillStyle(){return this.ZS}setBodyStrokeStyle(t){return this.QS="function"==typeof t?t(this.QS):t,this.US(),this}getBodyStrokeStyle(){return this.QS}setTailWidth(t){return this.jS=t,this.Dr(),this}getTailWidth(){return this.jS}setStrokeStyle(t){return this.gu="function"==typeof t?t(this.gu):t,this.US(),this}getStrokeStyle(){return this.gu}setMedianStrokeStyle(t){return this.JS="function"==typeof t?t(this.JS):t,this.US(),this}getMedianStrokeStyle(){return this.JS}Dr(){this.GS()}getDominantStyle(){return this.getBodyFillStyle()}}class Xc extends Dc{constructor(t,e,i,s,r,n,o,h,a,l){super(t,e,a,l),this.Ys=!0,this.gs=new Map,this.chart=t,this.Hs=i,this.axisX=s,this.axisY=r,this.axisXAttachHandler=n,this.axisYAttachHandler=o,this.qS=h,this.scale=ls(s.ct,r.ct),this.tb=t.ib,t.ib+=1,this.sb(this.scale),this.attacheAxis()}get xAxis(){return this.axisX}get yAxis(){return this.axisY}Ja(){const t=Array.from(this.gs.keys());for(const e of t){const t=e.Ja();if(t)return t}}setClipping(t){return this.Ys=t,this.Hs.Bs(),this}getClipping(){return this.Ys}attacheAxis(){this.eb=this.axisXAttachHandler(this),this.hb=this.axisYAttachHandler(this)}_s(t,e){super._s(t,e),t.Ka(this.tb)}getName(){const t=this.ws(),e="ProgressiveY"===t||"RegressiveY"===t?this.axisX.getTitle():this.axisY.getTitle();return this.Rs||e.length>0&&e||"Series"}setDrawOrder(t){return this.tb=t.seriesDrawOrderIndex,this.gs.forEach(((t,e)=>{e.Ka(this.tb)})),this.chart.St.Bs(),this}dispose(){return super.dispose(),this.eb(this),this.hb(this),this}tv(){super.tv(),ps(this.Ys,Array.from(this.gs.keys()),this.scale)}getXMax(){var t;return null!==(t=this.rb(!1))&&void 0!==t?t:0}getXMin(){var t;return null!==(t=this.nb(!1))&&void 0!==t?t:0}getYMax(){var t;return null!==(t=this.ob(!1))&&void 0!==t?t:0}getYMin(){var t;return null!==(t=this.ab(!1))&&void 0!==t?t:0}getBoundaries(){return g(l(this.getXMin()||0,this.getYMin()||0),l(this.getXMax()||0,this.getYMax()||0))}setCursorEnabled(t){return super.setCursorEnabled(t)}}const Hc=(t,e,i,s)=>{const r=t.length;let n=0;if(void 0!==e){const r=i-e;if(r>0){const e=t.slice(n,r);n+=r,s(e,!0)}}for(;n<r;){const e=t.slice(n,n+i);n+=i,s(e,!1)}},Gc=(t,e=t=>t)=>{const i=[];let s;for(let r=0;r<t.length;r+=1){s=t[r];const n=e(s.nc()),o=s.rc(),h=o?e(o):[];let a=!1,l=!1;"Uc"in s&&(a=s.Uc(),l=s.Yc()),i.push.apply(i,n.slice(a?1:0,n.length-(l&&0===h.length?1:0))),i.push.apply(i,h.slice(a&&0===n.length?1:0,h.length-(l?1:0)))}return i};class Yc extends Xc{constructor(){super(...arguments),this.lb=[],this.cb=void 0,this.ub=!1,this.XS=t=>{const e=this.lb.findIndex((e=>e===t));e>=0&&this.lb.splice(e,1),this.ub=!0,this.cb=void 0,this.Hs.Bs()},this.GS=()=>{this.cb=void 0,this.ub=!0,this.chart.St.Bs()},this.US=()=>{this.ub=!0,this.chart.St.Bs()},this.$S=()=>{this.cb=void 0,this.ub=!0,this.chart.St.Bs()},this.YS=(t,e)=>{this.setPointerEvents(e)},this.fb=t=>this.getPointerEvents()}Zv(){return this.lb.length>0}qe(){super.qe(),this.ub&&(this.Ab(this.lb),this.ub=!1)}clear(){return this.lb.slice().forEach(Jt),this.lb.length=0,this.ub=!0,this.cb=void 0,this.Hs.Bs(),this}gb(t,e){void 0!==e?this.lb.splice(e,0,t):this.lb.push(t),this.ub=!0,this.pb&&this.pb(t),this.R.$t(t),this.Hs.Bs()}Ev(){return this.Ov&&this.lb.length>0&&this.getVisible()}setDefaultStyle(t){this.pb=t,this.lb.forEach(t),t(this.yb);for(let t=0;t<this.fs.length;t+=1)this.styleLegendEntry(this.fs[t]);return this.ub=!0,this.chart.St.Bs(),this}setVisible(t){return super.setVisible(t),t!==this.getVisible()&&this.lb.forEach((e=>e.setVisible(t))),this}rb(){return this.cb||(this.cb=this.mb()),this.cb.max.x}nb(){return this.cb||(this.cb=this.mb()),this.cb.min.x}ob(){return this.cb||(this.cb=this.mb()),this.cb.max.y}ab(){return this.cb||(this.cb=this.mb()),this.cb.min.y}ln(){return l(0,0)}mb(){const t=g(c(hi,hi),c(ai,ai));for(let e=0;e<this.lb.length;e+=1)if(this.lb[e].getVisible()){const i=this.lb[e].KS();t.min.x=Math.min(t.min.x,i.min.x),t.min.y=Math.min(t.min.y,i.min.y),t.max.x=Math.max(t.max.x,i.max.x),t.max.y=Math.max(t.max.y,i.max.y)}return t}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.lb.length>0?this.lb[0].getDominantStyle():this.yb.getDominantStyle()})}}const Wc=(t,e=1,i)=>{const s=void 0!==i?i:0,r=new Array(t.length);for(let i=0;i<t.length;i+=1)r[i]={x:s+e*i,y:t[i]};return r};class jc extends Xc{constructor(t,i,s,r,n,o,h,a,l,c,u){super(t,i,s,r,n,o,h,a,c,u),this.xb=[],this.bu=[],this.Sb=0,this.bb=!1,this.us=e.HighlightModes.onHover,this.R=new Ct,this.chart.St.Ma(zn._o),this.Mb=l}Zv(){return this.getPointAmount()>0}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.Sb=void 0!==e&&e>0?e:0,this.Hs.Bs(),this}add(t){if(0!==this.xb.length&&this.chart.St.Ma(zn.Fo),Array.isArray(t)?this.wb(t):this.wb([t]),this.bu.length>0){const t=this.bu[this.bu.length-1];this._b={x:t.x,y:t.y}}return this}addArrayX(t,e=1,i){let s=i;return s||(s=this._b?this._b.y+e:0),this.add(((t,e=1,i)=>{const s=void 0!==i?i:0,r=new Array(t.length);for(let i=0;i<t.length;i+=1)r[i]={x:t[i],y:s+e*i};return r})(t,e,s)),this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this._b?this._b.x+e:0),this.add(Wc(t,e,s)),this}addArraysXY(t,e){if(t.length!==e.length)throw new Error("arrayX and arrayY lengths are not equal");return this.add(((t,e)=>{const i=new Array(t.length);for(let s=0;s<t.length;s+=1)i[s]={x:t[s],y:e[s]};return i})(t,e)),this}getPointAmount(){return this.xb.reduce(((t,e)=>t+e.fc()+e.Ac()),this.bu.length)}clear(){this.Cb=void 0;for(let t=0;t<this.xb.length;t+=1)this.xb[t].ii();return this.bu.length=0,this._b=void 0,this.Hs.Bs(),this.R.O("dataclear",{}),this}getLastPoint(){return this._b}Ev(){return this.Ov&&this.getPointAmount()>0&&this.getVisible()}rb(){return this.Mb.getXMax(this.xb,this.Cb)||0}nb(){return this.Mb.getXMin(this.xb,this.Cb)||0}ob(){return this.Mb.getYMax(this.xb,this.Cb)||0}ab(){return this.Mb.getYMin(this.xb,this.Cb)||0}ln(){const t=l(0,0);for(const e of this.xb)t.x=Math.max(t.x,e.Cc()),t.y=Math.max(t.y,e.kc());return t}kb(t,e,i,s){this.Mb.kb(t,e,i,s,this.scale,(t=>{}))}$v(){super.$v(),this.Tb&&this.kb(this.xb,this.getPointAmount(),this.Tb,this.Sb)}qe(){super.qe();const t=this.getBoundaries();this.bu.length>0&&(this.Fb(this.bu),this.bu=[]);for(const e of this.xb)e.Lt(t);return super.qe()}tv(){super.tv(),this.Cb=void 0,this.bu.length=0}wb(t){0!==t.length&&(this.Cb?this.Cb=Ti(this.Cb,Ci(t)):this.Cb=Ci(t),this.R.O("dataadd",{data:t,boundaries:this.Cb}),this.bu=ke(this.bu,t,{canReturnB:!1}),this.Hs.Bs())}Ib(){return Gc(this.xb)}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const $c=(t,e,i,s)=>{let r,n,o=Number.MAX_VALUE;for(let h=0;h<e.length;h+=1){const a=e[h],l=i(a,t);if(l){const e=s(t,l);(void 0===r||e<o)&&(r=l,n=a,o=e)}}return r&&n?[r,n]:void 0};class Qc extends Yc{constructor(t,e,i,s,r,n,o,h,a,l,c,u){super(t,e,i,s,r,n,o,h,l,c),this.Rs="Box Series",this.Pb=Je(),this.Lb=t=>ot(this.Xs.toPoint((t.start+t.end)/2,t.median),this.scale,this.Hs.St.ct),this.R=new Ct,this.chart.St.Ma(zn.ko),this.Xs=a,this.yb=new Nc(this,this.Hs,this.scale,this.XS,qt,qt,qt,qt,(t=>!1),this.Xs,0,0,0,0,0,0,0,this.Ct).dispose(),this.Bb=new Ml((()=>{const t=this.Hs.CA(this.scale);return this._s(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.ah(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Oo();return i.TA(e.start,e.end),i}))))),this.Db=new Ml((()=>{const t=this.Pb.Kt(this.Hs.yv(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.Je(i.fillStyle).Qe(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Oo();return i.wc(e.vertices),this.Pb.ti(i,e.figure),i})))),(()=>{this.Pb.ii()}),((t,e)=>{this.Ts(e)}))}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY};if(0===this.lb.length)return;const r=$c(s,this.lb.filter((t=>t.getVisible())),this.Lb,Si);if(!r)return;const n=ot(r[0],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],start:r[1].start,end:r[1].end,lowerExtreme:r[1].lowerExtreme,lowerQuartile:r[1].lowerQuartile,median:r[1].median,upperQuartile:r[1].upperQuartile,upperExtreme:r[1].upperExtreme,series:this,axisX:this.axisX,axisY:this.axisY}}qt(t,e){return ti({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,median:0,lowerQuartile:0,upperQuartile:0,lowerExtreme:0,upperExtreme:0,start:0,end:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}sb(t){if(!(t instanceof hs||t instanceof as))throw new Error("BoxSeries only supports Linear Axes")}Ab(t){const e=this.Db.sv(),i=this.Bb.sv();t.forEach((t=>{if(!t.getVisible())return;const s=this.Xs.toPoint((t.start+t.end-t.WS*(t.end-t.start))/2,t.lowerQuartile),r=this.Xs.toPoint((t.end-t.start)*t.WS,t.upperQuartile-t.lowerQuartile),n=this.Xs.toPoint((t.start+t.end)/2,t.lowerQuartile),o=this.Xs.toPoint((t.start+t.end)/2,t.lowerExtreme),h=this.Xs.toPoint((t.start+t.end)/2,t.upperQuartile),a=this.Xs.toPoint((t.start+t.end)/2,t.upperExtreme),l=this.Xs.toPoint((t.start+t.end-t.jS*(t.end-t.start))/2,t.lowerExtreme),c=this.Xs.toPoint((t.start+t.end+t.jS*(t.end-t.start))/2,t.lowerExtreme),u=this.Xs.toPoint((t.start+t.end-t.jS*(t.end-t.start))/2,t.upperExtreme),d=this.Xs.toPoint((t.start+t.end+t.jS*(t.end-t.start))/2,t.upperExtreme),f=this.Xs.toPoint((t.start+t.end-t.WS*(t.end-t.start))/2,t.median),g=this.Xs.toPoint((t.start+t.end+t.WS*(t.end-t.start))/2,t.median);e.add({wt:t.wt,vertices:[{x:s.x,y:s.y},{x:s.x,y:s.y+r.y},{x:s.x+r.x,y:s.y+r.y},{x:s.x+r.x,y:s.y}],figure:t},{fillStyle:t.ZS,strokeStyle:t.QS}),i.add({wt:0,start:n,end:o,figure:t},{strokeStyle:t.gu}),i.add({wt:0,start:h,end:a,figure:t},{strokeStyle:t.gu}),i.add({wt:0,start:l,end:c,figure:t},{strokeStyle:t.gu}),i.add({wt:0,start:u,end:d,figure:t},{strokeStyle:t.gu}),i.add({wt:0,start:f,end:g,figure:t},{strokeStyle:t.JS})})),e.finishPlot(),i.finishPlot()}add(t){const e=new Nc(this,this.Hs,this.scale,this.XS,this.GS,this.US,this.$S,this.YS,this.fb,this.Xs,t.start,t.end,t.lowerExtreme,t.lowerQuartile,t.median,t.upperQuartile,t.upperExtreme,this.Ct);return this.gb(e),this.ub=!0,this.chart.St.Bs(),e}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Jc extends Uc{constructor(t,e,i,s,r,n,o,h,a,c,u){super(e,i,s,r,n,o,h,a,c),this.dimensions={x:0,y:0,radiusX:0,radiusY:0},this.Ql=g(l(0,0),l(0,0)),this.ey=t,this.Hs=e,this.scale=i,this.We=Ve(c.ellipseSeriesFillStyle,u),this.je=Ve(c.ellipseSeriesStrokeStyle,u)}qt(t,e){const i=this.getDimensions(),s=l(i.x,i.y);return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.ey.axisX,y:this.ey.axisY}},...s,figure:this,...this.getDimensions(),series:this.ey,axisX:this.ey.axisX,axisY:this.ey.axisY}}KS(){return this.Ql}setDimensions(t){return this.dimensions=t,this.Ql=g(l(t.x-t.radiusX,t.y-t.radiusY),l(t.x+t.radiusX,t.y+t.radiusY)),this.GS(),this.Hs.Bs(),this}getDimensions(){return this.dimensions}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.US(),this}getFillStyle(){return this.We}setStrokeStyle(t){return this.je="function"==typeof t?t(this.je):t,this.US(),this}getStrokeStyle(){return this.je}getDominantStyle(){return this.We}}class qc extends Yc{constructor(t,e,i,s,r,n,o,h,a,c,u){super(t,e,i,s,r,n,o,h,a,c),this.Rs="Ellipse Series",this.Pb=Je(),this.Lb=t=>{const e=t.getDimensions(),i=l(e.x,e.y);return ot(i,this.scale,this.Hs.St.ct)},this.R=new Ct,this.chart.St.Ma(zn.ko),this.Eb=u,this.yb=new Jc(this,this.Hs,this.scale,qt,qt,qt,qt,qt,(t=>!1),this.Ct,this.Eb).dispose(),this.Db=new Ml((()=>{const t=this.Pb.Kt(this.Hs.yv(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.Je(i.fillStyle).Qe(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Oo();return i.wc(e.vertices),this.Pb.ti(i,e.figure),i})))),(()=>{this.Pb.ii()}),((t,e)=>{this.Ts(e)}))}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY};if(0===this.lb.length)return;const r=$c(s,this.lb.filter((t=>t.getVisible())),this.Lb,Si);if(!r)return;const n=ot(r[0],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],...r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}qt(t,e){return ti({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,radiusX:0,radiusY:0,drawSteps:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}sb(t){if(!(t instanceof hs||t instanceof as))throw new Error("EllipseSeries only supports Linear Axes")}Ab(t){const e=this.Db.sv();t.forEach((t=>{if(!t.getVisible())return;const i=t.getDimensions(),s=[],r=void 0!==i.drawSteps?i.drawSteps:72;for(let t=0;t<=r;t+=1){const e=t/r*2*Math.PI,n=i.x+i.radiusX*Math.cos(e),o=i.y+i.radiusY*Math.sin(e);s.push({x:n,y:o})}const n=t.getFillStyle(),o=t.getStrokeStyle();e.add({wt:t.wt,vertices:s,figure:t},{fillStyle:n,strokeStyle:o})})),e.finishPlot()}add(t){const e=new Jc(this,this.Hs,this.scale,this.XS,this.GS,this.US,this.$S,this.YS,this.fb,this.Ct,this.Eb).setDimensions(t);return this.gb(e),this.ub=!0,this.chart.St.Bs(),e}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Zc extends Uc{constructor(t,e,i,s,r,n,o,h,a,l,c){super(e,i,s,r,n,o,h,a,l),this.Rb=[],this.Ql=li,this.ey=t,this.Hs=e,this.scale=i,this.We=Ve(l.polygonSeriesFillStyle,c),this.je=Ve(l.polygonSeriesStrokeStyle,c)}qt(t,e){const i=this.KS(),s=l((i.min.x+i.max.x)/2,(i.min.y+i.max.y)/2);return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.ey.axisX,y:this.ey.axisY}},...s,figure:this,coordinates:this.getDimensions(),series:this.ey,axisX:this.ey.axisX,axisY:this.ey.axisY}}KS(){return this.Ql}setDimensions(t){return this.Rb=t,this.Ql=Ci(this.Rb),this.GS(),this.Hs.Bs(),this}getDimensions(){return this.Rb}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.US(),this}getFillStyle(){return this.We}setStrokeStyle(t){return this.je="function"==typeof t?t(this.je):t,this.US(),this}getStrokeStyle(){return this.je}getDominantStyle(){return this.We}}class Kc extends Yc{constructor(t,e,i,s,r,n,o,h,a,c,u){super(t,e,i,s,r,n,o,h,a,c),this.Rs="Polygon Series",this.Pb=Je(),this.Lb=t=>{const e=t.KS(),i=l((e.min.x+e.max.x)/2,(e.min.y+e.max.y)/2);return ot(i,this.scale,this.Hs.St.ct)},this.R=new Ct,this.chart.St.Ma(zn.ko),this.Eb=u,this.yb=new Zc(this,this.Hs,this.scale,qt,qt,qt,qt,qt,(t=>!1),this.Ct,this.Eb).dispose(),this.Db=new Ml((()=>{const t=this.Pb.Kt(this.Hs.yv(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.Je(i.fillStyle).Qe(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Oo();return i.wc(e.vertices),this.Pb.ti(i,e.figure),i})))),(()=>{this.Pb.ii()}),((t,e)=>{this.Ts(e)}))}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY};if(0===this.lb.length)return;const r=$c(s,this.lb.filter((t=>t.getVisible())),this.Lb,Si);if(!r)return;const n=ot(r[0],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],coordinates:r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}qt(t,e){return ti({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,coordinates:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}sb(t){}Ab(t){const e=this.Db.sv();t.forEach((t=>{if(!t.getVisible())return;const i=t.getDimensions(),s=t.getFillStyle(),r=t.getStrokeStyle();e.add({wt:t.wt,vertices:i,figure:t},{fillStyle:s,strokeStyle:r})})),e.finishPlot()}add(t){const e=new Zc(this,this.Hs,this.scale,this.XS,this.GS,this.US,this.$S,this.YS,this.fb,this.Ct,this.Eb).setDimensions(t);return this.gb(e),this.ub=!0,this.chart.St.Bs(),e}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class tu extends Uc{constructor(t,e,i,s,r,n,o,h,a,c,u){super(e,i,s,r,n,o,h,a,c),this.zb={x:0,y:0,width:0,height:0},this.Ob={x1:0,y1:0,x2:0,y2:0},this.Ql=g(l(0,0),l(0,0)),this.ey=t,this.We=Ve(c.rectangleSeriesFillStyle,u),this.Hs=e,this.scale=i,this.je=Ve(c.rectangleSeriesStrokeStyle,u)}setCornerRadius(t){return this.Vb=t,this.GS(),this}getCornerRadius(){return this.Vb}qt(t,e){const i=this.getDimensionsPositionAndSize(),s=l(i.x+i.width/2,i.y+i.height/2);return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.ey.axisX,y:this.ey.axisY}},...s,figure:this,...this.getDimensionsPositionAndSize(),...this.getDimensionsTwoPoints(),series:this.ey,axisX:this.ey.axisX,axisY:this.ey.axisY}}KS(){return this.Ql}setDimensions(t){return"x"in t?(this.zb=t,this.Ob={x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}):(this.Ob=t,this.zb={x:t.x1,y:t.y1,width:t.x2-t.x1,height:t.y2-t.y1}),this.Ql=Ci([this.zb,l(this.zb.x+this.zb.width,this.zb.y+this.zb.height)]),this.GS(),this.Hs.Bs(),this}getDimensionsPositionAndSize(){return this.zb}getDimensionsTwoPoints(){return this.Ob}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.US(),this}getFillStyle(){return this.We}setStrokeStyle(t){return this.je="function"==typeof t?t(this.je):t,this.US(),this}getStrokeStyle(){return this.je}getDominantStyle(){return this.We}}class eu extends Yc{constructor(t,e,i,s,r,n,o,h,a,c,u){super(t,e,i,s,r,n,o,h,a,c),this.Rs="Rectangle Series",this.Nb=Je(),this.Lb=t=>{const e=t.getDimensionsPositionAndSize(),i=l(e.x+e.width/2,e.y+e.height/2);return ot(i,this.scale,this.Hs.St.ct)},this.R=new Ct,this.chart.St.Ma(zn.ko),this.Eb=u,this.yb=new tu(this,this.Hs,this.scale,qt,qt,qt,qt,qt,(t=>!1),this.Ct,this.Eb).dispose(),this.Gb=new Ml((()=>{const t=this.Nb.Kt(this.Hs._d(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.Je(i.fillStyle).Qe(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Oo();return i.Fd(e.x1,e.y1,e.x2,e.y2).Td(e.roundedCorners?{extent:e.roundedCorners,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0),this.Nb.ti(i,e.figure),i})))),(()=>{this.Nb.ii()}),((t,e)=>{this.Ts(e)}))}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY};if(0===this.lb.length)return;const r=$c(s,this.lb.filter((t=>t.getVisible())),this.Lb,Si);if(!r)return;const n=ot(r[0],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],...r[1].getDimensionsPositionAndSize(),...r[1].getDimensionsTwoPoints(),series:this,axisX:this.axisX,axisY:this.axisY}}qt(t,e){return ti({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,x1:0,y1:0,x2:0,y2:0,width:0,height:0,multiHit:0,figure:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}sb(t){}Ab(t){const e=this.Gb.sv();t.forEach((t=>{if(!t.getVisible())return;const i=t.getDimensionsTwoPoints(),s=t.getFillStyle(),r=t.getStrokeStyle();e.add({wt:t.wt,figure:t,roundedCorners:t.Vb,...i},{fillStyle:s,strokeStyle:r})})),e.finishPlot()}add(t){const e=new tu(this,this.Hs,this.scale,this.XS,this.GS,this.US,this.$S,this.YS,this.fb,this.Ct,this.Eb).setDimensions(t);return this.gb(e),this.ub=!0,this.chart.St.Bs(),e}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class iu extends Uc{constructor(t,e,i,s,r,n,o,h,a,c,u){super(e,i,s,r,n,o,h,a,c),this.dimensions={startX:0,startY:0,endX:0,endY:0},this.Ql=g(l(0,0),l(0,0)),this.ey=t,this.Ct=c,this.Hs=e,this.scale=i,this.je=Ve(c.segmentSeriesStrokeStyle,u)}qt(t,e){const i=this.getDimensions(),s=l((i.startX+i.endX)/2,(i.startY+i.endY)/2);return{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.ey.axisX,y:this.ey.axisY}},...s,figure:this,...this.getDimensions(),series:this.ey,axisX:this.ey.axisX,axisY:this.ey.axisY}}KS(){return this.Ql}setDimensions(t){return this.dimensions=t,this.Ql=g(l(Math.min(t.startX,t.endX),Math.min(t.startY,t.endY)),l(Math.max(t.startX,t.endX),Math.max(t.startY,t.endY))),this.GS(),this.Hs.Bs(),this}getDimensions(){return this.dimensions}setStrokeStyle(t){return this.je="function"==typeof t?t(this.je):t,this.US(),this}getStrokeStyle(){return this.je}getDominantStyle(){const t=this.je;return t!==Ot?t.getFillStyle():V}}class su extends Yc{constructor(t,e,i,s,r,n,o,h,a,c,u){super(t,e,i,s,r,n,o,h,a,c),this.Rs="Segment Series",this.Ub=Je(),this.Lb=t=>{const e=t.getDimensions(),i=l((e.startX+e.endX)/2,(e.startY+e.endY)/2);return ot(i,this.scale,this.Hs.St.ct)},this.R=new Ct,this.chart.St.Ma(zn.ko),this.Eb=u,this.yb=new iu(this,this.Hs,this.scale,qt,qt,qt,qt,qt,(t=>!1),this.Ct,this.Eb).dispose(),this.Bb=new Ml((()=>{const t=this.Ub.Kt(this.Hs.CA(this.scale));return this._s(t,{setEventHandlers:!1}),t}),((t,e,i)=>(t.ah(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Oo();return i.TA(e.start,e.end),this.Ub.ti(i,e.figure),i})))),(()=>{this.Ub.ii()}),((t,e)=>{this.Ts(e)}))}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY};if(0===this.lb.length)return;const r=$c(s,this.lb.filter((t=>t.getVisible())),this.Lb,Si);if(!r)return;const n=ot(r[0],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],...r[1].getDimensions(),series:this,axisX:this.axisX,axisY:this.axisY}}qt(t,e){return ti({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0,startX:0,startY:0,endX:0,endY:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}sb(t){}Ab(t){const e=this.Bb.sv();t.forEach((t=>{if(!t.getVisible())return;const i=t.getDimensions(),s={x:i.startX,y:i.startY},r={x:i.endX,y:i.endY},n=t.getStrokeStyle();e.add({wt:t.wt,start:s,end:r,figure:t},{strokeStyle:n})})),e.finishPlot()}add(t){const e=new iu(this,this.Hs,this.scale,this.XS,this.GS,this.US,this.$S,this.YS,this.fb,this.Ct,this.Eb).setDimensions(t);return this.gb(e),this.ub=!0,this.chart.St.Bs(),e}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const ru={x:0,y:0};class nu extends Uc{constructor(t,e,i,s,r,n,o,h,a,l,c){var u;super(e,i,s,r,n,o,h,a,l),this.cl="Text",this.Ko=ru,this.df=ru,this.yl=0,this.ai=qe,this.ey=t,this.We=l.textSeriesFillStyle?Ve(l.textSeriesFillStyle,c):l.uiTextFillStyle,this.Xn=null!==(u=l.textSeriesFont)&&void 0!==u?u:l.uiTextFont,this.Xl=this.Hs.mn(i,!1).Wr(l.textSeriesShadow),this.Xl.ul=!0,this.R.Gt(this.Xl,{getExtraData:(t,e,i)=>this.qt(i,t)}),this.addEventListener("dispose",(()=>this.Xl.dispose()))}qt(t,e){const i=this.Ko;return{cursorPosition:{resultTable:i,resultTableScale:this.scale,pointMarker:i,pointMarkerScale:{x:this.ey.axisX,y:this.ey.axisY}},...i,figure:this,series:this.ey,axisX:this.ey.axisX,axisY:this.ey.axisY}}KS(){return{min:{x:this.Ko.x,y:this.Ko.y},max:{x:this.Ko.x,y:this.Ko.y}}}$b(){this.Xl.jr(this.cl).th(this.Ko).Ul(this.df).br(this.yl).vn(this.ai).Je(this.We).Sr(this.Xn)}getSizePixels(){return this.$b(),this.Xl.Dr().Pu()}getBoundingBox(){return this.$b(),this.Xl.Dr().Tu()}setText(t){return this.cl=t,this.GS(),this}getText(){return this.cl}setLocation(t){return this.Ko=t,this.GS(),this}getLocation(){return this.Ko}setAlignment(t){return this.df=t,this.GS(),this}getAlignment(){return this.df}setRotation(t){return this.yl=t,this.GS(),this}getRotation(){return this.yl}setMargin(t){return this.ai=S(this.ai,t),this.GS(),this}getMargin(){return this.ai}setLabelShadow(t){return this.Xl.Wr(t),this.Hs.Bs(),this}getLabelShadow(){return this.Xl.Dl()}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.US(),this}getFillStyle(){return this.We}setFont(t){return this.Xn="function"==typeof t?t(this.Xn):t,this.US(),this}getFont(){return this.Xn}getDominantStyle(){return this.We}}class ou extends Yc{constructor(t,e,i,s,r,n,o,h,a,l,c){super(t,e,i,s,r,n,o,h,a,l),this.Rs="Text Series",this.Lb=t=>ot(t.getLocation(),this.scale,this.Hs.St.ct),this.R=new Ct,this.Eb=c,this.yb=new nu(this,this.Hs,this.scale,qt,qt,qt,qt,qt,(t=>!1),this.Ct,this.Eb).dispose()}sb(t){}Ab(t){t.forEach((t=>{t.$b(),t.Xl.setVisible(t.getVisible())}))}add(t){const e=new nu(this,this.Hs,this.scale,this.XS,this.GS,this.US,this.$S,this.YS,this.fb,this.Ct,this.Eb);return(null==t?void 0:t.alignment)&&e.setAlignment(t.alignment),(null==t?void 0:t.fillStyle)&&e.setFillStyle(t.fillStyle),(null==t?void 0:t.font)&&e.setFont(t.font),(null==t?void 0:t.location)&&e.setLocation(t.location),(null==t?void 0:t.margin)&&e.setMargin(t.margin),void 0!==(null==t?void 0:t.rotation)&&e.setRotation(t.rotation),(null==t?void 0:t.text)&&e.setText(t.text),this.gb(e),this.ub=!0,this._s(e.Xl,{setEventHandlers:!1,isText:!0}),this.chart.St.Bs(),this.R.Gt(e.Xl,{getExtraData:(t,i,s)=>e.qt(s,t)}),e}qt(t,e){return ti({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,figure:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY};if(0===this.lb.length)return;const r=$c(s,this.lb.filter((t=>t.getVisible())),this.Lb,Si);if(!r)return;const n=ot(r[0],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,figure:r[1],series:this,axisX:this.axisX,axisY:this.axisY}}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class hu extends Xc{constructor(t,e,i,s,r,n,o,h,a,l,c,u){super(t,e,i,s,r,n,o,h,l,c),this.Rs="Heatmap Grid Series",this.Xy={},this.chart.St.Ma(zn.Co),this.Yb=a,this.Ct=l;const d=u;this.We=Ve(l.heatmapGridSeriesFillStyle,d),this.Wy=Ve(this.Ct.heatmapGridSeriesWireframeStyle,d);const f={heatmapDataType:"intensity",dataOrder:a.dataOrder||"columns",columns:a.columns,rows:a.rows};this.Ca=f,this.Hb=this.Hs.Xb(this.scale,[],f).Je(this.We).jy(this.Wy).Dt(this.getHighlight()),this._s(this.Hb),this.setHighlightOnHover(!1)}solveNearest(t,e="show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=ot(s,this.Hs.St.ct,this.scale),n=Da(e)?this.Hb.LS(r):this.Hb.wd(r);if(n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:n.x,y:n.y,column:n.column,row:n.row,intensity:n.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:j(this.We)?this.We.lut:void 0}}qt(t,e){return ti({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,intensity:0,column:0,row:0,lut:j(this.We)?this.We.lut:void 0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}Qy(){const t=this.Xy.start||{x:0,y:0};let e;e=this.Xy.end?{x:(this.Xy.end.x-t.x)/this.Ca.columns,y:(this.Xy.end.y-t.y)/this.Ca.rows}:this.Xy.step?this.Xy.step:{x:1,y:1},this.Hb.Jy(t,e),this.chart.St.Bs()}setStart(t){return this.Xy.start=t,this.Qy(),this}getStart(){return this.Hb.Ky().start}setStep(t){return this.Xy.step=t,this.Qy(),this}getStep(){return this.Hb.Ky().step}setEnd(t){return this.Xy.end=t,this.Qy(),this}getEnd(){return this.Hb.Ky().end}Ev(){return this.Ov&&this.getVisible()}Us(){return Le(this.We,this.Hb.Ft())}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We})}Wb(t){this.Hb.Wb().forEach((e=>{t.Hb.sm(e)}))}rb(){const t=this.Hb;return t?t.Zt():void 0}nb(){const t=this.Hb;return t?t.jt():void 0}ob(){const t=this.Hb;return t?t.Jt():void 0}ab(){const t=this.Hb;return t?t.Qt():void 0}ln(){const t=l(0,0);return t.x=Math.max(t.x,this.Hb.Cc()),t.y=Math.max(t.y,this.Hb.kc()),t}sb(t){if(!(t instanceof hs))throw new Error("HeatmapGridSeries can only be attached to a pair of Linear Axes.")}ih(t,e){t.Dt(e),this.Hs.Bs()}qe(){return super.qe(),this.Hb.Lt(this.getBoundaries()),this}}class au extends hu{constructor(t,e,i,s,r,n,o,h,a,l,c,u){super(t,e,i,s,r,n,o,h,a,l,c,u),this.Xv=!1,this.R=new Ct}Zv(){return this.Xv}invalidateIntensityValues(t){if(this.Xv&&this.chart.St.Ma(zn.Fo),Array.isArray(t)){if(0===t.length)return this;const e={x:t.length,y:t[0].length,columns:"columns"===this.Ca.dataOrder?t.length:t[0].length,rows:"rows"===this.Ca.dataOrder?t.length:t[0].length},i="columns"===this.Ca.dataOrder?this.Ca.columns:this.Ca.rows,s="columns"===this.Ca.dataOrder?this.Ca.rows:this.Ca.columns;if(e.x>i||e.y>s){if(!0===this.chart.jA.ka){const t=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Ca.columns}x${this.Ca.rows}, input ${e.columns}x${e.rows}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(t)}const r=[];for(let e=0;e<i;e+=1)r[e]=t[e].slice(0,s);t=r}this.Hb.sm({type:"intensity",lengthPrimary:e.x,lengthSecondary:e.y,startPrimary:0,startSecondary:0,values:t})}else if("iColumn"in t&&"iRow"in t&&"values"in t){if(0===t.values.length)return this;const e={primary:t.values.length,secondary:t.values[0].length,columns:"columns"===this.Ca.dataOrder?t.values.length:t.values[0].length,rows:"rows"===this.Ca.dataOrder?t.values.length:t.values[0].length},i="columns"===this.Ca.dataOrder?t.iColumn:t.iRow,s=i+e.primary-1,r="columns"===this.Ca.dataOrder?t.iRow:t.iColumn,n=r+e.secondary-1,o=("columns"===this.Ca.dataOrder?this.Ca.columns:this.Ca.rows)-1,h=("columns"===this.Ca.dataOrder?this.Ca.rows:this.Ca.columns)-1;if(i<0||r<0){if(!0===this.chart.jA.ka){const e=`HeatmapGridSeries.invalidateIntensityValues invalidation start below 0 not permitted.\niColumn: ${t.iColumn}, iRow: ${t.iRow}.\nNo intensity values will be invalidated.`;Wt.console.warn(e)}return this}if(s>o||n>h){if(!0===this.chart.jA.ka){const i=`HeatmapGridSeries.invalidateIntensityValues intensity matrix overflow.\nGrid ${this.Ca.columns}x${this.Ca.rows}, input ${e.columns}x${e.rows} starting at [${t.iColumn},${t.iRow}].\nOut of bounds data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(i)}const i=Math.max(s-o,0),r=e.primary-i,a=Math.max(n-h,0),l=[];for(let e=0;e<r;e+=1)l[e]=t.values[e].slice(0,a>0?-a:void 0);t={iColumn:t.iColumn,iRow:t.iRow,values:l}}this.Hb.sm({type:"intensity",lengthPrimary:t.values.length,lengthSecondary:t.values[0].length,startPrimary:i,startSecondary:r,values:t.values})}return this.R.O("invalidateintensity",{value:t}),this.Hs.Bs(),this.Xv=!0,this}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.Hb.Je(this.We),this.R.O("stylechange",{}),this.Hs.Bs(),this}getFillStyle(){return this.We}setIntensityInterpolation(t){return t=t||"disabled",this.Hb.tm(t),this.Hs.Bs(),this.R.O("stylechange",{}),this}getIntensityInterpolation(){return this.Hb.im()}clear(){return this.Hb.ii(),this.Hs.Bs(),this.R.O("dataclear",{}),this}setWireframeStyle(t){return this.Wy="function"==typeof t?t(this.Wy):t,this.Hb.jy(this.Wy),this.Hs.Bs(),this.R.O("stylechange",{}),this}getWireframeStyle(){return this.Wy}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class lu extends Xc{constructor(t,e,i,s,r,n,o,h,a,l,c,u){super(t,e,i,s,r,n,o,h,l,c),this.Rs="Scrolling Heatmap Grid Series",this.Xy={},this.chart.St.Ma(zn.Co),this.chart.St.Ma(zn.Fo);const d=u;this.We=Ve(l.heatmapScrollingGridSeriesFillStyle,d),this.Wy=Ve(this.Ct.heatmapScrollingGridSeriesWireframeStyle,d);const f={scrollDimension:"columns",heatmapDataType:"intensity",...a};this.Ca=f,this.jb=this.Hs.Zb(this.scale,[],f).Je(this.We).jy(this.Wy).Dt(this.getHighlight()),this._s(this.jb),this.setHighlightOnHover(!1)}Zv(){return this.jb.lm()>0}solveNearest(t,e="show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=ot(s,this.Hs.St.ct,this.scale),n=Da(e)?this.jb.LS(r):this.jb.wd(r);if(n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},x:n.x,y:n.y,column:n.column,row:n.row,intensity:n.cellValue,series:this,axisX:this.axisX,axisY:this.axisY,lut:j(this.We)?this.We.lut:void 0}}qt(t,e){return ti({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,intensity:0,multiHit:0,column:0,row:0,lut:j(this.We)?this.We.lut:void 0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}Qy(){const t=this.Xy.start||{x:0,y:0};let e;e=this.Xy.step?this.Xy.step:{x:1,y:1},this.jb.Jy(t,e),this.chart.St.Bs()}setStart(t){return this.Xy.start=t,this.Qy(),this}getStart(){return this.jb.Ky().start}setStep(t){return this.Xy.step=t,this.Qy(),this}getStep(){return this.jb.Ky().step}clear(){return this.jb.ii(),this.Hs.Bs(),this}setWireframeStyle(t){return this.Wy="function"==typeof t?t(this.Wy):t,this.jb.jy(this.Wy),this.Hs.Bs(),this}getWireframeStyle(){return this.Wy}setPixelInterpolationMode(t){return t=t||"disabled",this.jb.tm(t),this.Hs.Bs(),this}getPixelInterpolationMode(){return this.jb.im()}setDataCleaning(t){return this.jb.wu(t),this.Hs.Bs(),this}Ev(){return this.Ov&&this.getVisible()}Us(){return Le(this.We,this.jb.Ft())}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We})}Je(t){return this.We="function"==typeof t?t(this.We):t,this.jb.Je(this.We),this.Hs.Bs(),this}sb(t){if(!(t instanceof hs))throw new Error("HeatmapScrollingGridSeries can only be attached to a pair of Linear Axes.")}rb(){return this.jb.Zt()||0}nb(){return this.jb.jt()||0}ob(){return this.jb.Jt()||0}ab(){return this.jb.Qt()||0}ln(){const t=l(0,0);return t.x=Math.max(t.x,this.jb.Cc()),t.y=Math.max(t.y,this.jb.kc()),t}ih(t,e){t.Dt(e),this.Hs.Bs()}}class cu extends lu{constructor(t,e,i,s,r,n,o,h,a,l,c,u){super(t,e,i,s,r,n,o,h,a,l,c,u),this.R=new Ct}addIntensityValues(t){if(0===t.length||0===t[0].length)return this;const e=t.length,i=t[0].length,s=("columns"===this.Ca.scrollDimension?t.length:t[0].length,"rows"===this.Ca.scrollDimension?t.length:t[0].length,0+i-1),r=this.Ca.resolution-1;if(s>r){if(!0===this.chart.jA.ka){const t=`HeatmapScrollingGridSeries.addIntensityValues intensity matrix overflow.\nGrid resolution: ${this.Ca.resolution}, input ${e}x${i}.\nExcess data will be automatically clipped. This can result in sub-optimal performance.`;Wt.console.warn(t)}const s=[];for(let i=0;i<e;i+=1)s[i]=t[i].slice(0,r+1);t=s}return this.jb.am(t),this.Hs.Bs(),this}invalidateIntensityValues(t){return this.jb.sm(t.iSample,t.values),this.Hs.Bs(),this}getSampleCount(){return this.jb.lm()}setFillStyle(t){return this.Je(t),this}getFillStyle(){return this.We}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const uu=(t,e,i)=>{let s,r,n=Number.MAX_VALUE;for(let o=0;o<e.length;o+=1){const h=e[o],a=i(h,t);if(a){const e=Si(t,a[0]),i=Si(t,a[1]);(void 0===s||e<n||i<n)&&(s=a,r=h,e<n?n=e:i<n&&(n=i))}}return s&&r?[s,r]:void 0};class du extends Xc{constructor(){super(...arguments),this.xb=[],this.bu=[],this.Qb=[],this.Jb=[],this.Tb=1e3,this.Sb=0,this.us=e.HighlightModes.onHover,this.Ic={type:"disabled",packager:(t,e,i)=>t.slice()},this.Kb=[],this.qb=[],this.tM=!1,this.iM=(t,e)=>{const i=t.zS(e);if(i)return[ot(i[0],this.scale,this.Hs.St.ct),ot(i[1],this.scale,this.Hs.St.ct)]},this.sM=(t,e)=>{const i=t.eM(e);if(i)return[ot(i[0],this.scale,this.Hs.St.ct),ot(i[1],this.scale,this.Hs.St.ct)]},this.hM=t=>{const e=t.length;if(this.xb.length>0){const i=this.xb.length-1,s=this.xb[i];if(e>0){const[e,i]=s.nc(),[r,n]=s.rc();if((r?e.length+r.length:e.length)>=this.Tb){const o=r&&r.length>0?r[r.length-1]:e[e.length-1],h=n&&n.length>0?n[n.length-1]:i[e.length-1],a=(o.x+t[0].position)/2,c=Ui(a,o,l(t[0].position,t[0].high)).y,d=Ui(a,h,l(t[0].position,t[0].low)).y,f=u(a,c,d);s.dc(f,g(l(a,d),l(a,c))).$c(!0),this.rM([f].concat(t)).Gc(!0)}else s.dc(t)}}else e>0&&this.rM(t)},this.nM=t=>{const e=this.Kb,i=t.length;if(this.Kb.length>0){if(i>0){const i=e[e.length-1],s=i.nc(),r=i.rc();if(s.length+r.length>=this.Tb){const n=r.length>0?r[r.length-1]:s[s.length-1],o=(n.x+t[0].x)/2,h=Ui(o,n,l(t[0].x,t[0].y)).y,a=l(o,h);i.dc(a,g(l(o,h),l(o,h))).$c(!0),e.push(this.oM([a].concat(t),this.Cb).Gc(!0))}else i.dc(t)}}else i>0&&e.push(this.oM(t))},this.aM=t=>{const e=this.qb,i=t.length;if(this.qb.length>0){if(i>0){const i=e[e.length-1],s=i.nc(),r=i.rc();if(s.length+r.length>=this.Tb){const n=r.length>0?r[r.length-1]:s[s.length-1],o=(n.x+t[0].x)/2,h=Ui(o,n,l(t[0].x,t[0].y)).y,a=l(o,h);i.dc(a,g(l(o,h),l(o,h))).$c(!0),e.push(this.lM([a].concat(t)).Gc(!0))}else i.dc(t)}}else i>0&&e.push(this.lM(t))}}ws(){return"ProgressiveX"}Zv(){return this.getPointAmount()>0}setDataCleaning(t){const e=t&&t.minDataPointCount;return this.Sb=void 0!==e&&e>0?e:0,this.Hs.Bs(),this}clear(){for(let t=0;t<this.xb.length;t+=1)this.xb[t].dispose();for(let t=0;t<this.Kb.length;t+=1)this.Kb[t].dispose();for(let t=0;t<this.qb.length;t+=1)this.qb[t].dispose();return this.bu.length=0,this.Qb.length=0,this.Jb.length=0,this.Cb=void 0,this.xb.length=0,this.Kb.length=0,this.qb.length=0,this.Hs.Bs(),this.R.O("dataclear",{}),this}getPointAmount(){return this.xb.reduce(((t,e)=>t+e.fc()+e.Ac()),this.bu.length)}rb(){return ce(this.xb,se,Math.max,he,this.Cb)||0}nb(){return ce(this.xb,ie,Math.min,oe,this.Cb)||0}ob(){return ce(this.xb,ne,Math.max,le,this.Cb)||0}ab(){return ce(this.xb,re,Math.min,ae,this.Cb)||0}ln(){const t=l(0,0);for(const e of this.xb)t.x=Math.max(t.x,e.Cc()),t.y=Math.max(t.y,e.kc());return t}Us(){return Le(this.cM,void 0)||Le(this.uM,void 0)}Ev(){return this.Ov&&this.getPointAmount()>0&&this.getVisible()}sb(t){}wb(t,e,i){this.bu=ke(this.bu,t,{canReturnB:!1}),this.Qb=ke(this.Qb,e,{canReturnB:!1}),this.Jb=ke(this.Jb,i,{canReturnB:!1}),this.Hs.Bs()}dM(t,e,i,s){this.fM(e,i,s),this.wb(Array.isArray(t)?t:[t],e,i)}fM(t,e,i){const s=Ti(Ci(t),Ci(e));this.Cb?this.Cb=Ti(this.Cb,s):this.Cb=s,i&&(this.Cb=Ti(this.Cb,i))}AM(){const t=this.xb.length,e=Math.min(this.scale.x.getInnerStart(),this.scale.x.getInnerEnd());let i=0;if(t>1)for(let s=0;s<t-1;s+=1)this.scale.x.Li(this.xb[s].Zt(),this.xb[s].Cc())<e&&(i+=1);return i}kb(t,e,i,s){if(i>0){const r=Math.ceil(i/e),n=t.length-r;if(n>0&&s>0){const e=n-s>0?s:n;if(e>0){for(let i=0;i<e;i+=1)t[i].dispose();t.splice(0,e)}}}}gM(t){const e=this.xb.length>0?this.xb[this.xb.length-1]:void 0,i=e?e.nc()[0].length+(e.rc()[0]?e.rc()[0].length:0):void 0;Hc(t,i,this.Tb,this.hM)}pM(t){const e=this.Kb.length>0?this.Kb[this.Kb.length-1].nc().length+this.Kb[this.Kb.length-1].rc().length:void 0;Hc(t,e,this.Tb,this.nM)}vM(t,e){const i=this.Kb.length>0?this.Kb[this.Kb.length-1].nc().length+this.Kb[this.Kb.length-1].rc().length:void 0;Hc(t,i,this.Tb,this.nM),Hc(e,i,this.Tb,this.aM)}rM(t,e){const i=this.Hs.yM(this.scale).dc(t,e).Je(this.cM).Vc(this.uM).zc(this.Ic).Dt(this.getHighlight());return this.xb.push(i),this._s(i),i}mM(t,e,i){const s=this.Hs.Op(this.scale,void 0,[pl.UserSeries]).dc(t,i).setPointerEvents(!1).ah(e).Dt(this.getHighlight());return this._s(s),s}oM(t,e){return this.mM(t,this.xM,e)}lM(t,e){return this.mM(t,this.SM,e)}bM(t){this.cM="function"==typeof t?t(this.cM):t;const e=this.cM;for(let t=0;t<this.xb.length;t+=1)this.xb[t].Je(e);this.Hs.Bs()}MM(t){this.uM="function"==typeof t?t(this.uM):t;const e=this.uM;for(let t=0;t<this.xb.length;t+=1)this.xb[t].Vc(e);this.Hs.Bs()}wM(){return this.cM}Nc(){return this.uM}_M(t){this.xM="function"==typeof t?t(this.xM):t;const e=this.xM;for(let t=0;t<this.Kb.length;t+=1)this.Kb[t].ah(e);this.Hs.Bs()}CM(t){this.SM="function"==typeof t?t(this.SM):t;const e=this.SM;for(let t=0;t<this.qb.length;t+=1)this.qb[t].ah(e);this.Hs.Bs()}kM(){return this.xM}TM(){return this.SM}ih(t,e){t.Dt(e),this.FM(e),this.Hs.Bs()}FM(t){for(let e=0;e<this.Kb.length;e+=1)this.Kb[e].Dt(t);for(let e=0;e<this.qb.length;e+=1)this.qb[e].Dt(t)}$v(){if(super.$v(),this.tM=!1,this.Sb>0){const t=this.AM();this.kb(this.xb,this.Tb,this.Sb,t),this.Kb.length>0&&this.kb(this.Kb,this.Tb,this.Sb,t),this.qb.length>0&&this.kb(this.qb,this.Tb,this.Sb,t),this.tM=!0}}qe(){if(super.qe(),this.bu.length>0&&(this.gM(this.bu),this.IM(this.Qb,this.Jb),this.tM=!0),this.tM){const t=this.getBoundaries();for(const e of this.xb)e.Lt(t);for(const e of this.Kb)e.Lt(t);for(const e of this.qb)e.Lt(t)}}tv(){super.tv(),this.Cb=void 0,this.bu.length=0,this.Qb.length=0,this.Jb.length=0}}class fu extends du{constructor(t,e,i,s,r,n,o,h,a=0,l,c){super(t,e,i,s,r,n,o,h,l,c),this.R=new Ct,this.chart.St.Ma(zn._o),this.PM=a}add(t){0!==this.xb.length&&this.chart.St.Ma(zn.Fo);const e=Array.isArray(t)?t:[t];if(e.length>0){const t=this.LM(e),[i,s]=this.BM(t);this.dM(t,i,s,g(l(hi,this.PM),l(ai,this.PM)));const r=this.bu[this.bu.length-1];this._b=r?{position:r.position,high:r.high,low:r.low}:void 0,this.R.O("dataadd",{data:e,boundaries:this.Cb})}return this}addArrayY(t,e=1,i=0){let s=i;return s||(s=this._b?this._b.position+e:0),this.add(Wc(t,e,s)),this}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class gu extends fu{constructor(t,e,i,s,r,n,o,h,a,l,c){super(t,e,i,s,r,n,o,h,a,l,c);const u=t.getSeries().length;this.cM=Ve(this.Ct.areaSeriesBipolarHighFillStyle,u),this.xM=Ve(this.Ct.areaSeriesBipolarHighStrokeStyle,u),this.uM=Ve(this.Ct.areaSeriesBipolarLowFillStyle,u),this.SM=Ve(this.Ct.areaSeriesBipolarLowStrokeStyle,u)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=uu(s,this.xb,Da(e)?this.sM:this.iM);if(void 0!==r&&void 0!==r[0]){const t=ot(r[0][0],this.Hs.St.ct,this.scale),e=ot(r[0][1],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,e]}}}LM(t){return this.DM(t)}IM(t,e){return this.vM(t,e)}DM(t){let e=0;const i=[],s=t.length,r=this.PM;return s>0&&(this.EM&&(this.EM.y<=r&&r<=t[0].y||this.EM.y>=r&&r>=t[0].y)&&(i[e]=u(.5*(this.EM.x+t[0].x),r,r),e+=1),this.EM=t[s-1],1===s?this.RM(t[0],i,e):this.zM(t,i)),i}RM(t,e,i=0){return e[i]=u(t.x,t.y,this.PM),i+1}zM(t,e){let i=0,s=0;const r=t.length-1,n=this.PM;for(;s<r;){const r=t[s],o=t[s+=1],h=u(r.x,r.y,n);if(0!==i&&ue(e[i-1],h)||(e[i]=h,i+=1),r.y<=n&&n<=o.y||r.y>=n&&n>=o.y){const t=r.y,s=o.y,h=n,a=t===s?o.x:Rs(r.x,o.x,(h-t)/(s-t));e[i]=u(a,n,n),i+=1}e[i]=u(o.x,o.y,n),i+=1}return i}BM(t){const e=t.length,i=Array(e),s=Array(e),r=this.PM;for(let n=0;n<e;n+=1){const e=t[n];e.high>r?(i[n]=l(e.position,e.high),s[n]=l(e.position,r)):e.high<r?(i[n]=l(e.position,r),s[n]=l(e.position,e.high)):(i[n]=l(e.position,e.high),s[n]=l(e.position,e.high))}return[i,s]}Ib(){return Gc(this.xb,(t=>t[0]))}setPositiveFillStyle(t){return this.bM(t),this}setNegativeFillStyle(t){return this.MM(t),this}setPositiveStrokeStyle(t){return this._M(t),this}setNegativeStrokeStyle(t){return this.CM(t),this}getPositiveFillStyle(){return this.wM()}getNegativeFillStyle(){return this.Nc()}getPositiveStrokeStyle(){return this.kM()}getNegativeStrokeStyle(){return this.TM()}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.cM,fill2:this.uM,behavior:{colorStep:!0}})}}class yu extends fu{constructor(){super(...arguments),this.SM=Ot}IM(t){return this.pM(t)}BM(t){const e=t.length,i=Array(e);for(let s=0;s<e;s+=1){const e=t[s];i[s]=l(e.position,e.high)}return[i,[]]}setStrokeStyle(t){return this._M(t),this}getStrokeStyle(){return this.kM()}}class pu extends yu{constructor(t,e,i,s,r,n,o,h,a,l,c){super(t,e,i,s,r,n,o,h,a,l,c);const u=t.getSeries().length;this.cM=V,this.uM=Ve(this.Ct.areaSeriesNegativeFillStyle,u),this.xM=Ve(this.Ct.areaSeriesNegativeStrokeStyle,u)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=uu(s,this.xb,Da(e)?this.sM:this.iM);if(void 0!==r&&void 0!==r[0]){const t=ot(r[0][0],this.Hs.St.ct,this.scale),e=ot(r[0][1],this.Hs.St.ct,this.scale),i=t.y<e.y?t:e;return{cursorPosition:{resultTable:i,resultTableScale:this.scale,pointMarker:i,pointMarkerScale:{x:this.axisX,y:this.axisY}},...i,series:this,axisX:this.axisX,axisY:this.axisY}}}LM(t){return this.OM(t)}OM(t){const e=[];return 1===t.length?this.RM(t[0],e):this.zM(t,e),e}RM(t,e,i=0){const s=this.PM;return e[i]=t.y>s?u(t.x,s,s):u(t.x,t.y,s),i+1}zM(t,e,i=0){let s=0;const r=t.length-1,n=this.PM;for(;s<r;){const r=t[s],o=t[s+=1];if(r.y<=n){const t=u(r.x,r.y,n);if(0!==i&&ue(e[i-1],t)||(e[i]=t,i+=1),o.y>n){const t=Yi(l(ai,n),l(hi,n),r,o);t&&(e[i]=u(t.x,t.y,n),i+=1),e[i]=u(o.x,n,n),i+=1}else e[i]=u(o.x,o.y,n),i+=1}else{const t=u(r.x,n,n);if(0!==i&&ue(e[i-1],t)||(e[i]=t,i+=1),o.y<=n){const t=Yi(l(ai,n),l(hi,n),r,o);t&&(e[i]=u(t.x,t.y,n),i+=1),e[i]=u(o.x,o.y,n),i+=1}else e[i]=u(o.x,n,n),i+=1}}return i}Ib(){return Gc(this.xb,(t=>t[1]))}setFillStyle(t){return this.MM(t),this}getFillStyle(){return this.Nc()}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.uM,stroke:this.xM})}}class mu extends yu{constructor(t,e,i,s,r,n,o,h,a,l,c,u){super(t,e,i,s,r,n,o,h,a,l,c);const d=u;this.cM=Ve(this.Ct.areaSeriesPositiveFillStyle,d),this.uM=V,this.xM=Ve(this.Ct.areaSeriesPositiveStrokeStyle,d)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=uu(s,this.xb,Da(e)?this.sM:this.iM);if(void 0!==r&&void 0!==r[0]){const t=ot(r[0][0],this.Hs.St.ct,this.scale),e=ot(r[0][1],this.Hs.St.ct,this.scale),i=t.y<e.y?e:t;return{cursorPosition:{resultTable:i,resultTableScale:this.scale,pointMarker:i,pointMarkerScale:{x:this.axisX,y:this.axisY}},...i,series:this,axisX:this.axisX,axisY:this.axisY}}}LM(t){return this.VM(t)}VM(t){const e=[];return 1===t.length?this.RM(t[0],e):this.zM(t,e),e}RM(t,e,i=0){const s=this.PM;return e[i]=t.y<s?u(t.x,s,s):u(t.x,t.y,s),i+1}zM(t,e,i=0){let s=0;const r=t.length-1,n=this.PM;for(;s<r;){const r=t[s],o=t[s+=1];if(r.y>=n){const t=u(r.x,r.y,n);if(0!==i&&ue(e[i-1],t)||(e[i]=t,i+=1),o.y<n){const t=Yi(l(ai,n),l(hi,n),r,o);t&&(e[i]=u(t.x,t.y,n),i+=1),e[i]=u(o.x,n,n),i+=1}else e[i]=u(o.x,o.y,n),i+=1}else{const t=u(r.x,n,n);if(0!==i&&ue(e[i-1],t)||(e[i]=t,i+=1),o.y>=n){const t=Yi(l(ai,n),l(hi,n),r,o);t&&(e[i]=u(t.x,t.y,n),i+=1),e[i]=u(o.x,o.y,n),i+=1}else e[i]=u(o.x,n,n),i+=1}}return i}Ib(){return Gc(this.xb,(t=>t[0]||[]))}setFillStyle(t){return this.bM(t),this}getFillStyle(){return this.wM()}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.cM,stroke:this.xM})}}const xu={Positive:mu,Negative:pu,Bipolar:gu};class Su extends du{constructor(t,e,i,s,r,n,o,h,a,l,c){super(t,e,i,s,r,n,o,h,a,l),this.R=new Ct,this.chart.St.Ma(zn._o);const u=c;this.cM=Ve(this.Ct.areaRangeSeriesFillStyle,u),this.xM=Ve(this.Ct.areaRangeSeriesStrokeStyle,u),this.uM=Ve(this.Ct.areaRangeSeriesFillStyleInverted,u),this.SM=Ve(this.Ct.areaRangeSeriesStrokeStyleInverted,u)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=uu(s,this.xb,Da(e)?this.sM:this.iM);if(void 0!==r&&void 0!==r[0]){const t=ot(r[0][0],this.Hs.St.ct,this.scale),e=ot(r[0][1],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY,multiHit:[t,e]}}}add(t){const e=Array.isArray(t)?t:[t],[i,s]=f(e);this.dM(t,i,s);const r=this.bu[this.bu.length-1];return this._b=r?{position:r.position,high:r.high,low:r.low}:void 0,this.R.O("dataadd",{data:e,boundaries:this.Cb}),this}addArraysHighLow(t,e,i=1,s=0){if(t.length!==e.length)throw new Error("arrayHigh and arrayLow lengths are not equal");{let r=s;r||(r=this._b?this._b.position+i:0),this.add(((t,e,i=1,s)=>{const r=void 0!==s?s:0,n=new Array(t.length);for(let s=0;s<t.length;s+=1)n[s]={position:r+i*s,high:t[s],low:e[s]};return n})(t,e,i,r))}return this}IM(t,e){this.vM(t,e)}setHighFillStyle(t){return this.bM(t),this}setLowFillStyle(t){return this.MM(t),this}setHighStrokeStyle(t){return this._M(t),this}setLowStrokeStyle(t){return this.CM(t),this}getHighFillStyle(){return this.wM()}getLowFillStyle(){return this.Nc()}getHighStrokeStyle(){return this.kM()}getLowStrokeStyle(){return this.TM()}Ib(){return Gc(this.xb,(t=>{const e=t[0],i=t[1];if(!e||!i)return[];const s=[],r=e.length;for(let t=0;t<r;t+=1)s[t]={position:e[t].x,high:e[t].y,low:i[t].y};return s}))}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.cM,fill2:this.uM,behavior:{colorStep:!0}})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}var vu;e.StepOptions=void 0,(vu=e.StepOptions||(e.StepOptions={}))[vu.before=0]="before",vu[vu.middle=.5]="middle",vu[vu.after=1]="after";const Au=(t,e)=>{const i=[],s=t.length,r=e;if(s>0){let e=0,n=t[0];i[e]=n,e+=1;for(let o=1;o<s;o+=1){const s=t[o];if(r<=0)i[e]=l(n.x,s.y),e+=1;else{const t=n.x*(1-r)+s.x*r;i[e]=l(t,n.y),e+=1,i[e]=l(t,s.y),e+=1}i[e]=s,e+=1,n=s}}return i},bu=(t,e)=>{const i=t*t,s=i*t,r=1-t,n=r*r,o=n*r;return l(o*e[0].x+3*t*n*e[1].x+3*i*r*e[2].x+s*e[3].x,o*e[0].y+3*t*n*e[1].y+3*i*r*e[2].y+s*e[3].y)},Cu=(t,e=32)=>{if(2===t.length)return[t[0],t[1]];const i=(t=>{const e=1e-5,i=t.length-1,s=Array(i);if(i>1){let r=l(0,0),n=l(0,0),o=l(0,0),h=Ri(Di(t[1],t[0]));const a=3;let c=0,u=0;for(let d=0;d<i;d+=1){const f=Array(4);if(f[0]=t[d],f[1]=t[d],f[3]=t[d+1],f[2]=t[d+1],o=h,r=n,d+1<i?(h=t[d+2]===t[d+1]?l(0,0):Ri(Di(t[d+2],t[d+1])),n=Ri(Li(o,h))):n=l(0,0),t[d+1].y===t[d].y)c=0,u=0;else{const i=t[d+1].x-t[d].x;c=Math.abs(r.x)>e?Math.abs(i/(a*r.x)):1,u=Math.abs(n.x)>e?Math.abs(i/(a*n.x)):1}f[1]=Li(Oi(r,c),f[1]),f[2]=Di(f[2],Oi(n,u)),s[d]=f}}return s.length>0?s:[]})(t),s=i.length,r=Array(s*e);let n=0;for(let t=0;t<s;t+=1)for(let s=0;s<=e;s+=1)r[n]=bu(s/e,i[t]),n+=1;return r};class Mu extends jc{constructor(t,e,i,s,r,n,o,h,a,c,u,d,f,y,p){super(t,e,i,s,r,n,o,h,a,u,d),this.xb=[],this.Tb=1e5,this.OS=5,this.yl=0,this.Wl=!1,this.jl=!1,this.Zl=!1,this.NM=1,this.GM=[],this.UM=(t,e)=>{const i=t.wd(e);if(i)return ot(i,this.scale,this.Hs.St.ct)},this.$M=(t,e)=>{const i=t.eM(e);if(i)return ot(i,this.scale,this.Hs.St.ct)},this.YM=t=>{if(this.xb.length>0){const e=this.xb[this.xb.length-1];if(t.length>0){const i=e.nc(),s=e.rc(),r=i.length+s.length-+e.Uc();if(r>=this.Tb){const n=s.length>0?s[s.length-1]:i[e.Uc()?r:r-1],o=l((n.x+t[0].x)/2,(n.y+t[0].y)/2);e.dc(o,g(l(o.x,o.y),l(o.x,o.y))).$c(!0),this.HM([o].concat(t)).Gc(!0)}else e.dc(t,this.Cb)}}else t.length>0&&this.HM(t)},this.XM=t=>{if(this.GM.length>0){const e=this.GM[this.GM.length-1];t.length>0&&((e.nc().length+e.rc().length)*this.NM>=this.Tb?this.WM(t):e.dc(t))}else t.length>0&&this.WM(t)},this.Ca=p,this.VS=c,this.jM=f,this.ZM=Ve(u.pointLineSeriesFillStyle,y),this.gu=Ve(this.Ct.pointLineSeriesStrokeStyle,y)}add(t){return super.add(t),this}Ib(){return Gc(this.GM)}setStrokeStyle(t){this.gu="function"==typeof t?t(this.gu):t;const e=this.gu;for(let t=0;t<this.xb.length;t+=1)this.xb[t].ah(e);return this.Hs.Bs(),this}getStrokeStyle(){return this.gu}setPointFillStyle(t){this.ZM="function"==typeof t?t(this.ZM):t;const e=this.ZM;for(let t=0;t<this.GM.length;t+=1)this.GM[t].Je(e);return this.Hs.Bs(),this}getPointFillStyle(){return this.ZM}setPointSize(t){this.OS=t;for(let e=0;e<this.GM.length;e+=1)this.GM[e].J(t);return this.Hs.Bs(),this}getPointSize(){return this.OS}getPointShape(){return this.VS}setPointRotation(t){this.yl=t;for(let e=0;e<this.GM.length;e+=1)this.GM[e].br(t);return this.Hs.Bs(),this}getPointRotation(){return this.yl}setIndividualPointSizeEnabled(t){this.Wl=t,t&&this.chart.St.Ma(zn.Io);for(let e=0;e<this.GM.length;e+=1)this.GM[e].lc(t);return this.Hs.Bs(),this}getIndividualPointSizeEnabled(){return this.Wl}setIndividualPointRotationEnabled(t){this.jl=t;for(let e=0;e<this.GM.length;e+=1)this.GM[e].cc(t);return this.Hs.Bs(),this}getIndividualPointRotationEnabled(){return this.jl}setIndividualPointValueEnabled(t){this.Zl=t;for(let e=0;e<this.GM.length;e+=1)this.GM[e].uc(t);return this.Hs.Bs(),this}getIndividualPointValueEnabled(){return this.Zl}setVisible(t){return super.setVisible(t),this.GM.forEach((e=>e.setVisible(t))),this}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY};if(0===this.xb.length)return;const r=this.xb[0].kt()||dt.NearestX,n=Da(e)?$c(s,this.xb,this.$M,r===dt.NearestX?(t,e)=>Math.abs(t.x-e.x):r===dt.NearestY?(t,e)=>Math.abs(t.y-e.y):(t,e)=>(t.x-e.x)**2+(t.y-e.y)**2):$c(s,this.GM,this.UM,r===dt.NearestX?(t,e)=>Math.abs(t.x-e.x):r===dt.NearestY?(t,e)=>Math.abs(t.y-e.y):(t,e)=>(t.x-e.x)**2+(t.y-e.y)**2);if(void 0!==n){const t=ot(n[0],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Us(){return Le(this.ZM,void 0)||Le(this.gu.getFillStyle(),void 0)}$s(){return this.Es||this.VS}sb(t){}ih(t,e){t.Dt(e),this.Hs.Bs()}Fb(t){const e=this.xb.length>0?this.xb[this.xb.length-1].nc().length+this.xb[this.xb.length-1].rc().length-+this.xb[this.xb.length-1].Uc():void 0;Hc(t,e,this.Tb,this.YM),Hc(t,e,this.Tb,this.XM)}WM(t,e){const i=this.Hs.sy(this.scale).dc(t,e).Je(this.ZM).oc(this.VS).J(this.OS).br(this.yl).lc(this.Wl).cc(this.jl).uc(this.Zl).Dt(this.getHighlight());return this._s(i),this.GM.push(i),i}HM(t,e){const i=this.Hs.Op(this.scale,void 0,[pl.UserSeries,...this.jM]).dc(t,e).ah(this.gu).Dt(this.getHighlight());return this._s(i),this.xb.push(i),i}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{stroke:this.gu,fill:this.ZM})}getPointAmount(){return this.GM.reduce(((t,e)=>t+e.fc()+e.Ac()),this.bu.length)}clear(){super.clear();for(let t=0;t<this.xb.length;t+=1)this.xb[t].dispose();this.xb.length=0;for(let t=0;t<this.GM.length;t+=1)this.GM[t].dispose();return this.GM.length=0,this}kb(t,e,i,s){super.kb(t,e,i,s),this.Mb.kb(this.GM,e,i,s,this.scale,(t=>{}))}}const Tu=32,Eu=(t,e)=>t.rc().length>=e?t.rc().slice(-e):Array.prototype.concat(t.nc(),t.rc()).slice(-e),wu=(t,e,i)=>{const s=Array.prototype.concat(t.nc(),t.rc()).slice(0,-i-1).concat(e.slice(i+1,2*i+2));t.ii().dc(s).Dr()};class Bu extends Mu{constructor(t,e,i,s,r,n,o,h,a,l,c,u,d,f,g){super(t,e,i,s,r,n,o,h,a,l,c,u,d,f,g),this.NM=Tu,this.Tb=8e3,this.QM=t=>{if(0===t.length)return;const e=this.GM.length;if(e>0){const i=e>1,s=this.GM[e-1];if(i){const i=Array.prototype.concat(s.nc(),s.rc()),r=i.length;if(r*Tu>=this.Tb){const i=Eu(s,3),r=Array.prototype.concat(i,t),n=Cu(r,Tu);wu(this.xb[e-1],n,Tu),this.HM(n.slice(66))}else if(r<5){const s=this.GM[e-2],r=Eu(s,3),n=Array.prototype.concat(r,i,t),o=Cu(n,Tu),h=this.xb[e-1],a=o.slice(66);h.ii().dc(a).Dr()}else{const i=this.xb[e-1],r=Array.prototype.concat(i.nc(),i.rc()),n=Eu(s,4),o=Array.prototype.concat(n,t),h=Cu(o,Tu),a=r.slice(0,-66).concat(h.slice(33));i.ii().dc(a).Dr()}}else{const i=Array.prototype.concat(s.nc(),s.rc()),r=i.length,n=this.xb[e-1];if(r*Tu>=this.Tb){const e=Eu(s,3),i=Array.prototype.concat(e,t),r=Cu(i,Tu);wu(this.xb[0],r,Tu),this.HM(r.slice(66))}else if(r+t.length>1){const e=Array.prototype.concat(i,t),s=Cu(e,Tu);n.ii().dc(s).Dr()}else n.dc(t)}}else{const e=t.length>0?Cu(t,Tu):t,i=Ci(e);this.HM(e,i)}this.XM(t)}}Fb(t){const e=this.GM.length,i=this.GM.length>0?this.GM[e-1].nc().length+this.GM[e-1].rc().length:void 0;Hc(t,i,Math.ceil(this.Tb/this.NM),this.QM)}}class ku{constructor(){this.hs="FreeformPattern",this.Ic={type:"disabled",packager:(t,e,i)=>t.slice()}}kb(t,e,i,s,r,n){if(s>0){const r=Math.trunc((e-s)/i);if(r>0&&t.length>1){const e=t.splice(0,r);for(let t=0;t<e.length;t+=1)n(e[t]),e[t].dispose()}}}JM(t,e){const i=t.x-e.x,s=t.y-e.y;return Math.sqrt(i*i+s*s)}getXMax(t=[],e){return ce(t,se,Math.max,he,e)}getXMin(t=[],e){return ce(t,ie,Math.min,oe,e)}getYMax(t=[],e){return ce(t,ne,Math.max,le,e)}getYMin(t=[],e){return ce(t,re,Math.min,ae,e)}}const Ru=t=>{switch(t){case"normal":default:return 1;case"high":return.25}},Fu=s.Record({Ic:{type:"disabled",packager:(t,e,i)=>t.slice()}});class Iu extends Fu{kb(t,e,i,s,r,n){if(s>0){const e=Math.ceil(s/i),o=t.length-e;if(o>0){const e=this.AM(t,r);if(e>0){const i=o-e>0?e:o;if(i>0){for(let e=0;e<i;e+=1)n(t[e]),t[e].dispose();t.splice(0,i)}}}}}}const Ou=(t,e)=>{const i=e.Qt();return t?Math.min(i,t):i},Lu=(t,e)=>{const i=e.Jt();return t?Math.max(i,t):i};class Du extends Iu{JM(t,e){return Math.abs(t.x-e.x)}getYMax(t=[],e){return t.reduce(Lu,e?e.max.y:void 0)}getYMin(t=[],e){return t.reduce(Ou,e?e.min.y:void 0)}}const Pu=(t,e)=>{const i=e.jt();return t?Math.min(i,t):i},Vu=(t,e)=>{const i=e.Zt();return t?Math.max(i,t):i};class _u extends Iu{JM(t,e){return Math.abs(t.y-e.y)}getXMax(t=[],e){return t.reduce(Vu,e?e.max.x:void 0)}getXMin(t=[],e){return t.reduce(Pu,e?e.min.x:void 0)}}const zu={horizontalProgressive:new class extends Du{constructor(){super({Ic:no()}),this.hs="HorizontalProgressivePattern"}AM(t,e){const i=t.length,s=Math.min(e.x.getInnerStart(),e.x.getInnerEnd());let r=0;if(i>1)for(let n=0;n<i-1;n+=1)e.x.Li(t[n].Zt(),t[n].Cc())<s&&(r+=1);return r}getXMax(t=[],e){return void 0!==e?e?e.max.x:void 0:t.length>0?t[t.length-1].Zt():void 0}getXMin(t=[],e){return t.length>0&&t[0].fc()>0?t[0].jt():e?e.min.x:void 0}setPrecision(t){return this.set("_columnPackaging",no(Ru(t)))}},horizontalRegressive:new class extends Du{constructor(){super({Ic:oo()}),this.hs="HorizontalRegressivePattern"}AM(t,e){const i=t.length,s=Math.max(e.x.getInnerStart(),e.x.getInnerEnd());let r=0;if(i>1)for(let n=0;n<i-1;n+=1)s<e.x.Li(t[n].jt(),-t[n].Cc())&&(r+=1);return r}getXMax(t=[],e){return t.length>0&&t[0].fc()>0?t[0].Zt():e?e.max.x:void 0}getXMin(t=[],e){return void 0!==e?e?e.min.x:void 0:t.length>0?t[t.length-1].jt():void 0}setPrecision(t){return this.set("_columnPackaging",oo(Ru(t)))}},verticalProgressive:new class extends _u{constructor(){super({Ic:ho()}),this.hs="VerticalProgressivePattern"}AM(t,e){const i=t.length,s=Math.min(e.y.getInnerStart(),e.y.getInnerEnd());let r=0;if(i>1)for(let n=0;n<i-1;n+=1)e.y.Li(t[n].Jt(),t[n].kc())<s&&(r+=1);return r}getYMax(t=[],e){return void 0!==e?e?e.max.y:void 0:t.length>0?t[t.length-1].Jt():void 0}getYMin(t=[],e){return t.length>0&&t[0].fc()>0?t[0].Qt():e?e.min.y:void 0}setPrecision(t){return this.set("_columnPackaging",ho(Ru(t)))}},verticalRegressive:new class extends _u{constructor(){super({Ic:ao()}),this.hs="VerticalRegressivePattern"}AM(t,e){const i=t.length,s=Math.max(e.y.getInnerStart(),e.y.getInnerEnd());let r=0;if(i>1)for(let n=0;n<i-1;n+=1)s<e.y.Li(t[n].Qt(),-t[n].kc())&&(r+=1);return r}getYMax(t=[],e){return t.length>0&&t[0].fc()>0?t[0].Jt():e?e.max.y:void 0}getYMin(t=[],e){return void 0!==e?e?e.min.y:void 0:t.length>0?t[t.length-1].Qt():void 0}setPrecision(t){return this.set("_columnPackaging",ao(Ru(t)))}},freeform:new ku};class Uu extends Mu{constructor(t,e,i,s,r,n,o,h,a,c,u,d,f,y,p){super(t,e,i,s,r,n,o,h,zu.horizontalProgressive,a,u,d,f,y,p),this.YM=t=>{const e=this.xb.length>0?this.xb[this.xb.length-1].nc().length+this.xb[this.xb.length-1].rc().length:void 0;Hc(t,e,this.Tb,this.KM)},this.KM=t=>{const e=t.length;if(this.xb.length>0){const i=this.xb[this.xb.length-1];if(e>0){const e=i.nc(),s=i.rc(),r=s.length>0?s[s.length-1]:e[e.length-1],n=Au([r].concat(t),this.qM);n.shift();const o=l((r.x+n[0].x)/2,(r.y+n[0].y)/2),h=Array.prototype.concat(o,n);(s.length>0?e.length+s.length:e.length)>=this.Tb?(i.dc(o,g(l(o.x,o.y),l(o.x,o.y))).$c(!0),this.HM(h).Gc(!0),this.WM(t)):i.dc(h)}}else e>0&&this.HM(Au(t,this.qM));this.XM(t)},this.qM=c,void 0===this.jM.find((t=>"DataPattern"===t.type))&&this.jM.push({type:"DataPattern",args:{pattern:"ProgressiveX"}})}}class Nu extends Xc{constructor(t,e,i,s,r,n,o,h,a,l){super(t,e,i,s,r,n,o,h,a,l),this.tw=t=>t[4]>=t[1],this.cb=g(c(hi,hi),c(ai,ai)),this.iw=[],this.sw=!1,this.ew=-1,this.hw=[],this.rw=!0,this.nw=!1,this.ow=4,this.aw=[1e-7,1e-6,1e-5,1e-4,.001,.01,.1,1,5,10,30,60,300,600,1800,3600,7200,14400,28800,36e3,43200,50400,57600,64800,72e3,86400,172800,259200,345600,432e3,604800,1209600,2592e3,7776e3,10368e3,15552e3,31536e3,15768e4,31536e4,63072e4,7884e5,15768e5,31536e5,3942e6,47304e5,63072e5,7884e6,15768e6,31536e6,3942e7,47304e6,63072e6,7884e7,15768e7,31536e7,63072e7,7884e8,15768e8,31536e8,47304e8,63072e8],this.R=new Ct,this.chart.St.Ma(zn.Ao)}Zv(){return this.hw.length>0}ws(){return"ProgressiveX"}Ib(){return this.hw}Ev(){return this.Ov&&this.hw.length>0&&this.getVisible()}lw(t){if(!(this.hw.length<1))return[this.hw[t][0],this.hw[t][1],this.hw[t][2],this.hw[t][3],this.hw[t][4]]}solveNearest(t,e){if(0===this.hw.length)return;const i=this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}).x,s=void 0!==this.getPackDataState();let r,n,o,h,a;if(s){const t=this.cw;if(!t)return;const e=Qe(i,t.length-1,(e=>t[e][0])),s=void 0!==e&&t[e];if(!s)return;h=s[3],o=s[2],n=s[1],a=s[4],r=s[0]}else{const t=Qe(i,this.hw.length-1,(t=>this.hw[t][0])),e=void 0!==t&&this.hw[t];if(!e)return;r=e[0],n=e[1],o=e[2],h=e[3],a=e[4]}return{cursorPosition:{resultTable:l(r,a),resultTableScale:this.scale,pointMarker:l(r,a),pointMarkerScale:{x:this.axisX,y:this.axisY}},x:r,y:a,open:n,high:o,low:h,close:a,position:r,isPacked:s,series:this,axisX:this.axisX,axisY:this.axisY}}qt(t,e){return ti({series:this,axisX:this.axisX,axisY:this.axisY},{cursorPosition:0,x:0,y:0,multiHit:0,open:0,high:0,low:0,close:0,position:0,isPacked:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}sb(t){if(!(t.x instanceof rs))throw new Error("OHLCSeries must be attached to a Linear X Axis.");this.uw=t.x}ln(){return l(5,5)}tM(t){const e=t.length-1;if(e<0)return this;for(let i=0;i<=e;i+=1)t[i][3]<this.cb.min.y&&(this.cb.min.y=t[i][3]),this.cb.max.y<t[i][2]&&(this.cb.max.y=t[i][2]);return this.cb.min.x=Math.min(this.cb.min.x,t[0][0]),this.cb.max.x=Math.max(this.cb.max.x,t[e][0]),this}rb(){return this.cb.max.x}nb(){return this.cb.min.x}ob(){return this.cb.max.y}ab(){return this.cb.min.y}add(t){this.hw.length>0&&this.chart.St.Ma(zn.Fo);const e=Array.isArray(t[0])?t:[t[0]];if(e.length>0){this.sw=!0;const t=this.hw.length,i=this.iw.length,s=e.length;this.hw.length=t+s,this.iw.length=i+s;for(let r=0;r<s;r+=1)this.hw[t+r]=e[r],this.iw[i+r]=this.hw[t+r];this.tM(e),this.R.O("dataadd",{data:e}),this.Hs.Bs()}return this}setPackData(t){return t!==this.rw&&(this.nw=!0,this.rw=t,this.chart.St.Bs()),this}getPackData(){return this.rw}getPackDataState(){const t=this.ew;if(!(t<0||void 0===this.cw||this.cw.length===this.hw.length))return{figureAxisInterval:t}}setFigureWidth(t){return this.dw=t,this.chart.St.Bs(),this}getFigureWidth(){return this.dw}setFigureMinimumGap(t){return this.ow=t,this.chart.St.Bs(),this}getFigureMinimumGap(){return this.ow}clear(){return this.hw=[],this.iw=[],this.cw=void 0,this.fw(),this.cb.min.x=hi,this.cb.min.y=hi,this.cb.max.x=ai,this.cb.max.y=ai,this.R.O("dataclear",{}),this}Aw(t){return this.uw.getPixelSize()*t/1e3}gw(){const t=this.aw.length-1,e=this.Aw(this.dw+this.ow);let i=Qe(e,t,(t=>this.aw[t]));return void 0===i?i=e<this.aw[0]?0:this.aw[t]<e?t:this.aw.length/2:this.aw[i]<e&&(i+=1),this.aw.length<=i&&(i=t),1e3*this.aw[i]}qe(){if(super.qe(),!this.rw){this.cw=void 0;let t=null;if(this.nw?(this.nw=!1,t=this.hw,this.fw()):t=this.iw,t.length>=1){for(let e=0;e<t.length;e+=1){const i=t[e],s=i[0];this.tw(i)?this.pw(s,i):this.yw(s,i)}this.iw.length=0,this.sw=!1,this.ew=-1}}}tv(){super.tv();const t=this.gw();if(this.rw&&this.hw.length>=1&&(t!==this.ew||this.sw||this.nw)){this.nw=!1,this.ew=t,this.sw=!1,this.fw(),this.cw=[];const e=this.hw.length;let i=this.hw[0][0]-this.hw[0][0]%(t/2)+t,s=0;for(;s<e;){let r=this.lw(s);if(void 0===r)break;let n=r[3],o=r[2];const h=s;for(s+=1;s<e&&this.hw[s][0]<i;)r=this.hw[s],this.hw[s][3]<n&&(n=this.hw[s][3]),o<this.hw[s][2]&&(o=this.hw[s][2]),s+=1;const a=s-1;let l=r[0];h<a&&(l=this.hw[a][0],r=[l,this.hw[h][1],o,n,this.hw[a][4]]),r[1]<r[4]?this.pw(l,r):this.yw(l,r),this.cw.push(r),i+=t}}}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Xu extends Nu{constructor(t,e,i,s,r,n,o,h,a,l){super(t,e,i,s,r,n,o,h,a,l),this.mw=1175494351e-14,this.dw=this.Ct.ohlcCandleThicknessPixels||5,this.xw=this.Ct.ohlcCandleTailStrokeStylePositive,this.Sw=this.Ct.ohlcCandleTailStrokeStyleNegative,this.bw=this.Ct.ohlcCandleBodyFillStylePositive,this.Mw=this.Ct.ohlcCandleBodyFillStyleNegative,this.ww=i.CA(this.scale).ah(new er({thickness:this.dw,fillStyle:this.bw})),this.ww.xu={x:0,y:1},this._w=i.CA(this.scale).ah(new er({thickness:this.dw,fillStyle:this.Mw})),this._w.xu={x:0,y:-1},this.Cw=i.CA(this.scale).ah(this.xw),this.kw=i.CA(this.scale).ah(this.Sw),this._s(this.ww),this._s(this._w),this._s(this.Cw),this._s(this.kw)}setBodyThickness(t){return this.dw=t,this.ww.ah(new er({thickness:this.dw,fillStyle:this.bw})),this._w.ah(new er({thickness:this.dw,fillStyle:this.Mw})),this.chart.St.Bs(),this}getBodyThickness(){return this.dw}setBodyFillStylePositive(t){return this.bw="function"==typeof t?t(this.bw):t,this.ww.ah(new er({thickness:this.dw,fillStyle:this.bw})),this.chart.St.Bs(),this}getBodyFillStylePositive(){return this.bw}setBodyFillStyleNegative(t){return this.Mw="function"==typeof t?t(this.Mw):t,this._w.ah(new er({thickness:this.dw,fillStyle:this.Mw})),this.chart.St.Bs(),this}getBodyFillStyleNegative(){return this.Mw}setTailStrokeStylePositive(t){return this.xw="function"==typeof t?t(this.xw):t,this.Cw.ah(this.xw),this.chart.St.Bs(),this}getTailStrokeStylePositive(){return this.xw}setTailStrokeStyleNegative(t){return this.Sw="function"==typeof t?t(this.Sw):t,this.kw.ah(this.Sw),this.chart.St.Bs(),this}getTailStrokeStyleNegative(){return this.Sw}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.bw,fill2:this.Mw,behavior:{colorStep:!0}})}fw(){return this.Cw.ii(),this.kw.ii(),this.ww.ii(),this._w.ii(),this}pw(t,e){return Math.abs(e[1]-e[4])<this.mw?this.ww.Oo().TA({x:t,y:e[1]-this.mw},{x:t,y:e[1]+this.mw}):this.ww.Oo().TA({x:t,y:e[1]},{x:t,y:e[4]}),e[4]<e[2]&&this.Cw.Oo().TA({x:t,y:e[4]},{x:t,y:e[2]}),e[3]<e[1]&&this.Cw.Oo().TA({x:t,y:e[3]},{x:t,y:e[1]}),this}yw(t,e){return Math.abs(e[1]-e[4])<this.mw?this._w.Oo().TA({x:t,y:e[1]-this.mw},{x:t,y:e[1]+this.mw}):this._w.Oo().TA({x:t,y:e[1]},{x:t,y:e[4]}),e[3]<e[4]&&this.kw.Oo().TA({x:t,y:e[3]},{x:t,y:e[4]}),e[1]<e[2]&&this.kw.Oo().TA({x:t,y:e[1]},{x:t,y:e[2]}),this}}class Hu extends Nu{constructor(t,e,i,s,r,n,o,h,a,l){super(t,e,i,s,r,n,o,h,a,l),this.dw=this.Ct.ohlcBarThicknessPixels||10,this.Tw=this.Ct.ohlcBarStrokeStylePositive,this.Fw=this.Ct.ohlcBarStrokeStyleNegative,this.Iw=i.CA(this.scale).ah(this.Tw),this._s(this.Iw),this.Pw=i.CA(this.scale).ah(this.Tw),this.Pw.xu={x:-this.dw/2,y:0},this._s(this.Pw),this.Lw=i.CA(this.scale).ah(this.Tw),this.Lw.xu={x:this.dw/2,y:0},this._s(this.Lw),this.Bw=i.CA(this.scale).ah(this.Fw),this._s(this.Bw),this.Dw=i.CA(this.scale).ah(this.Fw),this.Dw.xu={x:-this.dw/2,y:0},this._s(this.Dw),this.Ew=i.CA(this.scale).ah(this.Fw),this.Ew.xu={x:this.dw/2,y:0},this._s(this.Ew)}setStrokeStylePositive(t){return this.Tw="function"==typeof t?t(this.Tw):t,this.Iw.ah(this.Tw),this.Pw.ah(this.Tw),this.Lw.ah(this.Tw),this.chart.St.Bs(),this}getStrokeStylePositive(){return this.Tw}setStrokeStyleNegative(t){return this.Fw="function"==typeof t?t(this.Fw):t,this.Bw.ah(this.Fw),this.Dw.ah(this.Fw),this.Ew.ah(this.Fw),this.chart.St.Bs(),this}getStrokeStyleNegative(){return this.Fw}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.Tw.getFillStyle(),fill2:this.Fw.getFillStyle(),behavior:{colorStep:!0}})}setFigureWidth(t){return super.setFigureWidth(t),this.Pw.xu={x:-t/2,y:0},this.Dw.xu={x:-t/2,y:0},this.Lw.xu={x:t/2,y:0},this.Ew.xu={x:t/2,y:0},this}fw(){return this.Bw.ii(),this.Iw.ii(),this.Dw.ii(),this.Pw.ii(),this.Ew.ii(),this.Lw.ii(),this}pw(t,e){return this.Iw.Oo().TA({x:t,y:e[3]},{x:t,y:e[2]}),this.Pw.Oo().TA({x:t,y:e[1]},{x:t,y:e[1]}),this.Lw.Oo().TA({x:t,y:e[4]},{x:t,y:e[4]}),this}yw(t,e){return this.Bw.Oo().TA({x:t,y:e[3]},{x:t,y:e[2]}),this.Dw.Oo().TA({x:t,y:e[1]},{x:t,y:e[1]}),this.Ew.Oo().TA({x:t,y:e[4]},{x:t,y:e[4]}),this}}const Gu={Candlesticks:Xu,Bars:Hu},Yu=t=>({defaultDragMouseStyle:e.MouseStyles.Horizontal,getTitleTextRotation:()=>0,...kl(t,((t,e)=>t.nb(e)),((t,e)=>t.rb(e)),(t=>t.ln().x))}),Wu=t=>({defaultDragMouseStyle:e.MouseStyles.Vertical,getTitleTextRotation:t=>90*t,...kl(t,((t,e)=>t.ab(e)),((t,e)=>t.ob(e)),(t=>t.ln().y))});class ju extends $a{constructor(t,e,i,s,r,n,o,h){super(t,e,i,s,r,h),this.Rw=!1,this.zw=!1,this.Ow=!1,this.Vw=!1,this.Nw=!1,this.Gw=new Map,this.Uw=new Map,this.$w=[],this.Yw=[],this.Hw=!0,this.Xw=!0,this.Ww=!1,this.jw=[],this.Zw=new Set,this.Qw=!1,this.$g=r,this.Jw=n,this.Kw=o,this.qw=h.cursorGridStrokeStyleX,this.t_=h.cursorGridStrokeStyleY}setKeepWithinAxisBoundaries(t){return this.Rw=t,this.Hs.Bs(),this}getKeepWithinAxisBoundaries(){return this.Rw}dispose(){return super.dispose(),this.Gw.forEach((t=>t.forEach((t=>t.dispose())))),this.Uw.forEach((t=>t.forEach((t=>t.dispose())))),this.$w.length=0,this.Yw.length=0,this.Gg.length=0,this}qe(){return this.Ww&&this.At&&this.setPosition(...this.jw),this.Gw.forEach((t=>{t.forEach((t=>t.setVisible(!1).setMarkerVisible(!1)))})),this.Uw.forEach((t=>{t.forEach((t=>t.setVisible(!1).setMarkerVisible(!1)))})),this.$w.forEach((t=>t.setVisible(this.At&&this.UA).setMarkerVisible(this.At&&this.UA&&this.Hw))),this.Yw.forEach((t=>t.setVisible(this.At&&this.UA).setMarkerVisible(this.At&&this.UA&&this.Xw))),super.qe()}kg(){if(!this.Rw)return super.kg();const t={x:!0,y:!0},i=this.Cg,s=i.getPosition(l(-1,-1),e.UISpace.PaddedBackground),r=i.getPosition(l(1,1),e.UISpace.PaddedBackground);return this.jw.forEach(((e,n)=>{const o=e.pointMarkerScale.x,h=e.pointMarkerScale.y,a=ot(s,i.scale,{x:o,y:h}),l=ot(r,i.scale,{x:o,y:h});xi(a.x,o.lr,o.cr)&&xi(l.x,o.lr,o.cr)&&(t.x=!1),xi(a.y,h.lr,h.cr)&&xi(l.y,h.lr,h.cr)&&(t.y=!1)})),t}setPosition(...t){t=t.filter((t=>!Number.isNaN(t.pointMarker.x)&&!Number.isNaN(t.pointMarker.y))),this.jw=t,this.$w.length=0,this.Yw.length=0;const e=this.renderingScale;if(t.length>0){const i=t[0].resultTable,s=Ba(t[0].resultTableScale,e),r=s===this.scale?i:ot(i,s,this.scale);this.Cg.setPosition(r)}this.UA=!1,this.Og.forEach((t=>{t.targetVisible=!1}));const i=new Map;t.forEach(((t,s)=>{const r=t.pointMarkerScale.x,n=t.pointMarkerScale.y,o=i.get(r)||[],h=i.get(n)||[],a=!o.includes(t.pointMarker.x),c=!h.includes(t.pointMarker.y);o.push(t.pointMarker.x),h.push(t.pointMarker.y),i.set(r,o),i.set(n,h);const u=t.pointMarker,d=Ju(l(u.x,u.y),r,n);if(a){const t=this.i_(r,!0);t.setValue(u.x),t.setGridStrokeLength(this.zw?d.x:1).setAllocatesAxisSpace(this.Qw),this.$w.push(t)}if(c){const t=this.i_(n,!1);t.setValue(u.y),t.setGridStrokeLength(this.Ow?d.y:1).setAllocatesAxisSpace(this.Qw),this.Yw.push(t)}let f=this.Og[s];if(!f){const t=new Jo(this.Hs,this.renderingScale,this.scale,qt,this.Ct).setPointerEvents(!1).setFillStyle(this.Ct.cursorPointMarkerFillStyle).setSize(this.Ct.cursorPointMarkerSize).setShape(this.Ct.cursorPointMarkerShape);f={pointMarker:t,targetVisible:!0},this.Og.push(f),this.Gg.forEach((e=>e(t)))}const g=Ba(t.pointMarkerScale,e),y=g===this.scale?t.pointMarker:ot(t.pointMarker,g,this.scale);f.pointMarker.setPosition(y),f.targetVisible=!0;const p=r.getInterval(),m=n.getInterval(),x=Math.min(p.start,p.end),S=Math.max(p.start,p.end),v=Math.min(m.start,m.end),A=Math.max(m.start,m.end);u.x>=x&&u.x<=S&&u.y>=v&&u.y<=A&&(this.UA=!0)}));for(const t of this.Og)t.targetVisible||(t.pointMarker.dispose(),this.Og.splice(this.Og.indexOf(t),1));return this}setTickMarkersAllocateAxisSpace(t){return this.Qw=t,this.Hs.Bs(),this}getTickMarkersAllocateAxisSpace(){return this.Qw}i_(t,e){this.Zw.has(t)||(t.addEventListener("dispose",(()=>{var e;null===(e=i.get(t))||void 0===e||e.forEach((t=>t.dispose())),i.delete(t)})),this.Zw.add(t));const i=e?this.Gw:this.Uw,s=e?this.$w:this.Yw,r=i.get(t)||[];i.set(t,r);let n=r.find((t=>!s.includes(t)));return n||(n=e?t.EA(!1,this.Jw):t.EA(!1,this.Kw),r.push(n),this.Xr(n,e),n.setPointerEvents(!1)),n}Xr(t,e){const i=e?this.qw:this.t_;return t.setGridStrokeStyle(i),t.setPointerEvents(!1),(e?this.Hw:this.Xw)?t.setMarkerVisible(!0):t.setMarkerVisible(!1),t}setGridStrokeXCut(t){return this.zw=t,this.Hs.Bs(),this}getGridStrokeXCut(){return this.zw}setGridStrokeYCut(t){return this.Ow=t,this.Hs.Bs(),this}getGridStrokeYCut(){return this.Ow}setGridStrokeXStyle(t){return this.qw=t instanceof Function?t(this.getGridStrokeXStyle()):t,this.Gw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.qw))))),this}getGridStrokeXStyle(){return this.qw}setGridStrokeYStyle(t){return this.t_=t instanceof Function?t(this.getGridStrokeYStyle()):t,this.Uw.forEach((t=>t.forEach((t=>t.setGridStrokeStyle(this.t_))))),this}getGridStrokeYStyle(){return this.t_}setTickMarkerXVisible(t){return this.Hw=t,this.Hs.Bs(),this}getTickMarkerXVisible(){return this.Hw}setTickMarkerYVisible(t){return this.Xw=t,this.Hs.Bs(),this}getTickMarkerYVisible(){return this.Xw}setTickMarkerX(t){return this.Gw.forEach((e=>e.forEach((e=>e.setMarker(t))))),this.Jw=this.Jw.addStyler(t),this.Hs.Bs(),this}setTickMarkerY(t){return this.Uw.forEach((e=>e.forEach((e=>e.setMarker(t))))),this.Kw=this.Kw.addStyler(t),this.Hs.Bs(),this}}class $u{constructor(t,e,i,s){this.Xg=[],this.Wg=(t,e)=>(this.Xg.forEach((i=>i(t,e))),t),this.addStyler=t=>new $u(this.$g,this.Jw,this.Kw,this.Xg.map((t=>t)).concat(t)),this.setResultTableBackground=t=>new $u(t,this.Jw,this.Kw,this.Xg.map((t=>t))),this.jg=(t,e,i,s,r)=>this.Wg(new ju(t,e,i,s,this.$g,this.Jw,this.Kw,r),r),this.$g=t,this.Xg=s,this.Jw=e,this.Kw=i}}const Qu=new $u(Wo,Lh.PointableTextBox,Lh.PointableTextBox,[(t,e)=>{Qa(t,e),t.setTickMarkerX((t=>{t.setEffect(!0).setTextFont(e.cursorTickMarkerXTextFont).setTextFillStyle(e.cursorTickMarkerXTextFillStyle),Dn(t)&&t.setBackground((t=>t.setFillStyle(e.cursorTickMarkerXBackgroundFillStyle).setStrokeStyle(e.cursorTickMarkerXBackgroundStrokeStyle)))})),t.setTickMarkerY((t=>{t.setEffect(!0).setTextFont(e.cursorTickMarkerYTextFont).setTextFillStyle(e.cursorTickMarkerYTextFillStyle),Dn(t)&&t.setBackground((t=>t.setFillStyle(e.cursorTickMarkerYBackgroundFillStyle).setStrokeStyle(e.cursorTickMarkerYBackgroundStrokeStyle)))}))}]),Ju=(t,e,i)=>{const s=e.ct,r=i.ct;let n=(t.x-s.getInnerStart())/(s.getInnerEnd()-s.getInnerStart()),o=(t.y-r.getInnerStart())/(r.getInnerEnd()-r.getInnerStart());return 1===i.sA&&(n=1-n),1===e.sA&&(o=1-o),l(o,n)};class qu extends jc{constructor(t,e,i,s,r,n,o,h,a,l,c,u,d,f){super(t,e,i,s,r,n,o,h,a,l,c),this.xb=[],this.FS=!0,this.Tb=void 0,this.Mu=void 0,this.s_=(t,e)=>{const i=t.zS(e);if(i)return ot(i,this.scale,this.Hs.St.ct)},this.$M=(t,e)=>{const i=t.eM(e);if(i)return ot(i,this.scale,this.Hs.St.ct)},this.jM=u,this.Ca=f,this.gu=Ve(this.Ct.lineSeriesStrokeStyle,d),this.e_={individualLookupValuesEnabled:void 0!==(null==f?void 0:f.individualLookupValuesEnabled)&&f.individualLookupValuesEnabled}}ws(){var t,e;return null===(e=null===(t=this.Ca)||void 0===t?void 0:t.dataPattern)||void 0===e?void 0:e.pattern}add(t){return super.add(t),this}setPointerEvents(t){return super.setPointerEvents(t)}setStrokeStyle(t){this.gu="function"==typeof t?t(this.gu):t;const e=this.gu;for(let t=0;t<this.xb.length;t+=1)this.xb[t].ah(e);return this.Hs.Bs(),this}getStrokeStyle(){return this.gu}setDataCleaning(t){return this.Mu=t,this.xb.forEach((t=>t.wu(this.Mu))),this.Hs.Bs(),this}setCursorInterpolationEnabled(t){return this.FS=t,this.Hs.St.Bs(),this}getCursorInterpolationEnabled(){return this.FS}sb(t){}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY};if(0===this.xb.length)return;const r=this.xb[0].kt()||dt.NearestX,n=$c(s,this.xb,Da(e)?this.$M:this.s_,r===dt.NearestX?(t,e)=>Math.abs(t.x-e.x):r===dt.NearestY?(t,e)=>Math.abs(t.y-e.y):(t,e)=>(t.x-e.x)**2+(t.y-e.y)**2);if(void 0!==n){const t=ot(n[0],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Fb(t){let e=this.xb[0];e||(e=this.HM(),this.xb.push(e),this._s(e)),e.dc(t,this.Cb)}Us(){return Le(this.gu.getFillStyle(),void 0)}HM(){return this.Hs.Op(this.scale,this.e_,[pl.UserSeries,...this.jM]).ah(this.gu).wu(this.Mu).Dt(this.getHighlight())}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{stroke:this.gu})}ih(t,e){t.Dt(e),this.Hs.Bs()}kb(t,e,i,s){}}class Zu extends jc{constructor(t,e,i,s,r,n,o,h,a,l,c,u,d){super(t,e,i,s,r,n,o,h,new ku,l,c),this.xb=[],this.OS=5,this.yl=0,this.Wl=!1,this.jl=!1,this.Zl=!1,this.Tb=void 0,this.UM=(t,e)=>{const i=t.wd(e);if(i)return ot(i,this.scale,this.Hs.St.ct)},this.Ca=d,this.VS=a,this.We=Ve(l.pointSeriesFillStyle,u)}add(t){return super.add(t),this}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=$c(s,this.xb,this.UM,Si);if(void 0!==r){const t=ot(r[0],this.Hs.St.ct,this.scale);return{cursorPosition:{resultTable:t,resultTableScale:this.scale,pointMarker:t,pointMarkerScale:{x:this.axisX,y:this.axisY}},...t,series:this,axisX:this.axisX,axisY:this.axisY}}}Us(){return Le(this.We,void 0)}$s(){return this.Es||this.VS}sb(t){}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We})}ih(t,e){t.Dt(e),this.Hs.Bs()}setPointFillStyle(t){this.We="function"==typeof t?t(this.We):t;const e=this.We;for(let t=0;t<this.xb.length;t+=1)this.xb[t].Je(e);return this.Hs.Bs(),this}getPointFillStyle(){return this.We}setPointSize(t){this.OS=t;for(let e=0;e<this.xb.length;e+=1)this.xb[e].J(t);return this.Hs.Bs(),this}getPointSize(){return this.OS}getPointShape(){return this.VS}setPointRotation(t){this.yl=t;for(let e=0;e<this.xb.length;e+=1)this.xb[e].br(t);return this.Hs.Bs(),this}getPointRotation(){return this.yl}setIndividualPointSizeEnabled(t){this.Wl=t,t&&this.chart.St.Ma(zn.Io);for(let e=0;e<this.xb.length;e+=1)this.xb[e].lc(t);return this.Hs.Bs(),this}getIndividualPointSizeEnabled(){return this.Wl}setIndividualPointRotationEnabled(t){this.jl=t;for(let e=0;e<this.xb.length;e+=1)this.xb[e].cc(t);return this.Hs.Bs(),this}getIndividualPointRotationEnabled(){return this.jl}setIndividualPointValueEnabled(t){this.Zl=t;for(let e=0;e<this.xb.length;e+=1)this.xb[e].uc(t);return this.Hs.Bs(),this}getIndividualPointValueEnabled(){return this.Zl}Fb(t){let e=this.xb[0];e||(e=this.HM()),e.dc(t,this.Cb)}HM(){const t=this.Hs.sy(this.scale).oc(this.VS).J(this.OS).br(this.yl).lc(this.Wl).cc(this.jl).uc(this.Zl).Je(this.We).Dt(this.getHighlight());return this.xb.push(t),this._s(t),t}}class Ku{constructor(t,e,i,s){this.h_=!1,this.R=new Ct,this.chart=i,this.r_=s,this.ve=t.ve,this.we=s||Kr,this.n_=Wt.document.createElement("div"),this.n_.style.position="absolute",this.n_.style.pointerEvents="none",Wt.document.body.append(this.n_);const r=()=>{const t=i.engine.container.getBoundingClientRect();this.n_.style.left=`${t.left}px`,this.n_.style.top=`${t.top}px`,this.n_.style.width=`${t.width}px`,this.n_.style.height=`${t.height}px`};r(),i.addEventListener("resize",r),this.o_(this.n_),this.a_(),this.l_(),this.c_(),this.u_(e),this.chart.d_().push(this)}o_(t){this.f_=Wt.document.createElement("div"),this.f_.style.pointerEvents="all",t.append(this.f_),this.A_=Wt.document.createElement("div"),this.g_=new Gr(this.ve,this.we,this.chart,this.A_),this.p_=Wt.document.createElement("table"),this.p_.style.borderSpacing="0",this.f_.appendChild(this.g_.Be()),this.f_.appendChild(this.A_),this.A_.appendChild(this.p_)}l_(){let t=0,e=0,i=0,s=0,r=!1;this.h_=!1,this.f_.onmousedown=n=>{n=n||Wt.event,i=n.clientX,s=n.clientY,r=!0,Wt.document.onmouseup=t=>{this.h_?this.f_.addEventListener("click",Se,!0):this.f_.removeEventListener("click",Se,!0),r=!1,this.h_=!1,Wt.document.onmouseup=null,Wt.document.onmousemove=null},Wt.document.onmousemove=n=>{n=n||Wt.event,r&&(t=i-n.clientX,e=s-n.clientY,i=n.clientX,s=n.clientY,this.h_=!0,this.f_.style.top=this.f_.offsetTop-e+"px",this.f_.style.left=this.f_.offsetLeft-t+"px",this.f_.style.removeProperty("right"),this.f_.style.removeProperty("bottom"))}}}c_(){let t=0,e=0,i=0,s=0,r=!1;this.f_.ontouchstart=n=>{n=n||Wt.event,i=n.touches[0].clientX,s=n.touches[0].clientY,r=!0,this.f_.ontouchend=()=>{r=!1,Wt.document.ontouchend=null,Wt.document.ontouchmove=null},this.f_.ontouchmove=n=>{r&&(Se(n),n=n||Wt.event,t=i-n.touches[0].clientX,e=s-n.touches[0].clientY,i=n.touches[0].clientX,s=n.touches[0].clientY,this.f_.style.top=this.f_.offsetTop-e+"px",this.f_.style.left=this.f_.offsetLeft-t+"px",this.f_.style.removeProperty("right"),this.f_.style.removeProperty("bottom"))}}}a_(){this.f_.style.setProperty("top","10px"),this.f_.style.setProperty("left","10px"),this.f_.style.position="absolute",this.f_.style.display="flex",this.f_.style.alignItems="flex-start",this.A_.style.setProperty("display","none")}removePositionProperty(){this.f_.style.removeProperty("top"),this.f_.style.removeProperty("left"),this.f_.style.removeProperty("bottom"),this.f_.style.removeProperty("right")}setPositionProperty(t){switch(this.removePositionProperty(),t){case e.OSMPosition.BottomLeft:this.f_.style.setProperty("bottom","10px"),this.f_.style.setProperty("left","10px");break;case e.OSMPosition.TopLeft:this.f_.style.setProperty("top","10px"),this.f_.style.setProperty("left","10px");break;case e.OSMPosition.BottomRight:this.f_.style.setProperty("bottom","10px"),this.f_.style.setProperty("right","10px");break;case e.OSMPosition.TopRight:default:this.f_.style.setProperty("top","10px"),this.f_.style.setProperty("right","10px")}}u_(t){for(let e=0;e<t.length;e+=1){const i=this.p_.insertRow();for(let s=0;s<t[e].length;s+=1){const r=i.insertCell(),n=t[e][s];"object"!=typeof n?this.v_(n,r):this.addCustomButton(n,r)}}}v_(t,i){switch(t){case e.OnScreenMenuButtonType.ZoomIn:this.y_(new Dr(this.ve,this.chart,this.we),i);break;case e.OnScreenMenuButtonType.ZoomInX:this.y_(new Pr(this.ve,this.chart,this.we),i);break;case e.OnScreenMenuButtonType.ZoomInY:this.y_(new Vr(this.ve,this.chart,this.we),i);break;case e.OnScreenMenuButtonType.ZoomOut:this.y_(new _r(this.ve,this.chart,this.we),i);break;case e.OnScreenMenuButtonType.ZoomOutX:this.y_(new zr(this.ve,this.chart,this.we),i);break;case e.OnScreenMenuButtonType.ZoomOutY:this.y_(new Ur(this.ve,this.chart,this.we),i);break;case e.OnScreenMenuButtonType.ZoomToFit:this.y_(new Xr(this.ve,this.chart,this.we),i);break;case e.OnScreenMenuButtonType.ToggleAnimations:this.y_(new Nr(this.ve,this.chart,this.we),i);break;default:console.error(`No predefined button like "${e.OnScreenMenuButtonType[t]}" exists.`)}}y_(t,e){e.rowSpan=t.ye.rows,e.colSpan=t.ye.columns,t.Le(e)}addCustomButton(t,e){const i=new Hr(this.ve,t,this.chart);return this.y_(i,e),this}dispose(){this.n_.remove(),this.R.O("dispose",{})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class td extends Xc{constructor(t,e,i,s,r,n,o,h,a,l,c,u){var d;super(t,e,i,s,r,n,o,h,a,l),this.m_=0,this.R=new Ct,this.Ca=u,this.Xl=this.Hs.Yd(this.scale).ah(Ve(this.Ct.lineSeriesStrokeStyle,c)).Ud(Ve(this.Ct.pointSeriesFillStyle,c)).$d(Ve(this.Ct.areaSeriesPositiveFillStyle,c)).x_(void 0).Qd(7),this.Xl.S_=!1!==(null===(d=this.Ca)||void 0===d?void 0:d.allowDataGrouping),this._s(this.Xl)}Zv(){return this.getSampleCount()>0}ws(){return this.getDataSet().md()}setDataSet(t){var e;return t===(null===(e=this.Nd)||void 0===e?void 0:e.ei)||(t.ju&&this.chart.St.Ma(zn.Po),t.Qu&&this.chart.St.Ma(zn.Io),this.Nd=Ke(t,this.Nd,(()=>({change:()=>{this.m_+=1,this.m_>1&&this.chart.St.Ma(zn.Fo),this.chart.St.Bs()},clear:()=>{this.chart.St.Bs()}}))),this.Xl.Gd(t),this.chart.St.Bs()),this}getDataSet(){return this.b_()}setStrokeStyle(t){return this.Xl.ah(t),this.Hs.Bs(),this}getStrokeStyle(){return this.Xl.ro()}setAreaFillStyle(t){return this.Xl.$d(t),this.Hs.Bs(),this}getAreaFillStyle(){return this.Xl.M_()}setPointFillStyle(t){return this.Xl.Ud(t),this.Hs.Bs(),this}getPointFillStyle(){return this.Xl.Zd()}setPointSize(t){return this.Xl.Qd(t),this.Hs.Bs(),this}getPointSize(){return this.Xl.w_()}setPointShape(t){return this.Xl.Hd(t),this.Hs.Bs(),this}getPointShape(){return this.Xl.Xd()}setPointRotation(t){return this.Xl.Wd(t),this.Hs.Bs(),this}getPointRotation(){return this.Xl.jd()}setPointAlignment(t){return this.Xl.__(t),this.chart.St.Bs(),this}getPointAlignment(){return this.Xl.C_()}setCurvePreprocessing(t){return this.Xl.x_(t),this.Hs.Bs(),this}getCurvePreprocessing(){return this.Xl.k_()}add(t){return this.b_().add(t),this.Hs.Bs(),this}addArraysXY(t,e){return this.b_().addArraysXY(t,e),this.Hs.Bs(),this}appendJSON(t,e){return this.b_().appendJSON(t,e),this.Hs.Bs(),this}appendSample(t){return this.b_().appendSample(t),this.Hs.Bs(),this}appendSamples(t){return this.b_().appendSamples(t),this.Hs.Bs(),this}fill(t){return this.b_().fill(t),this.Hs.Bs(),this}setSamples(t){return this.b_().setSamples(t),this.Hs.Bs(),this}alterSamples(t,e){return this.b_().alterSamples(t,e),this.Hs.Bs(),this}alterSamplesByID(t,e){return this.b_().alterSamplesByID(t,e),this.Hs.Bs(),this}getSampleCount(){return this.b_().getSampleCount()}getNextSampleIndex(){return this.b_().getNextSampleIndex()}clear(){return this.b_().clear(),this.Hs.Bs(),this}setMaxSampleCount(t){return this.b_().setMaxSampleCount(t),this.Hs.Bs(),this}getMaxSampleCount(){return this.b_().getMaxSampleCount()}readBack(t){return this.b_().readBack(t)}solveNearest(t,e=this.chart.getCursorMode()||"show-nearest"){let i=Da(e);void 0!==this.getCurvePreprocessing()&&(i=!1);const s=this.T_(),r=us(t)?this.chart.translateCoordinate(t,{x:this.axisX,y:this.axisY}):t,n=s.wd(r,i,this.scale,this.chart.oA);if(void 0!==n)return{cursorPosition:{resultTable:n,resultTableScale:this.scale,pointMarker:n,pointMarkerScale:{x:this.axisX,y:this.axisY}},...n,series:this,axisX:this.axisX,axisY:this.axisY}}qt(t,e){const i=this.getDataSet(),s=null==t?void 0:t.dataPoint;return void 0===i.md()||s?s?{cursorPosition:{resultTable:s,resultTableScale:this.scale,pointMarker:s,pointMarkerScale:{x:this.axisX,y:this.axisY}},...s,series:this,axisX:this.axisX,axisY:this.axisY}:void 0:ti({series:this,axisX:this.axisX,axisY:this.axisY},{x:0,y:0,cursorPosition:0,id:0,rotation:0,size:0,color:0,lookupValue:0,multiHit:0,iSample:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}T_(){return this.b_()}Us(){return Le(this.getPointFillStyle(),this.Xl.Ft())||Le(this.getStrokeStyle().getFillStyle(),this.Xl.Ft())||Le(this.getAreaFillStyle(),this.Xl.Ft())}Ev(){var t;const e=null===(t=this.Nd)||void 0===t?void 0:t.ei;return this.getVisible()&&this.getAutoScrollingEnabled()&&void 0!==e&&e.Gu>0}sb(t){}rb(t){const e=this.Xl.Ja();return e&&"y"===e.F_&&t&&e.I_(),this.Xl.Zt(t)}nb(t){const e=this.Xl.Ja();return e&&"y"===e.F_&&t&&e.I_(),this.Xl.jt(t)}ob(t){const e=this.Xl.Ja();return e&&"x"===e.F_&&!t&&e.I_(),this.Xl.Jt(t)}ab(t){const e=this.Xl.Ja();return e&&"x"===e.F_&&t&&e.I_(),this.Xl.Qt(t)}ln(){return{x:this.Xl.Cc(),y:this.Xl.kc()}}$v(){var t;super.$v();const e=Bs(null!==(t=this.ws())&&void 0!==t?t:"ProgressiveX");this.Xl.P_("x"===e?0===this.xAxis.iA?"bottom":"top":0===this.yAxis.iA?"left":"right")}b_(){if(!this.Nd){const t=new Do(this.Ca);t.ju&&this.chart.St.Ma(zn.Po),t.Qu&&this.chart.St.Ma(zn.Io),this.Nd=Ke(t,this.Nd,(()=>({change:()=>{this.m_+=1,this.m_>1&&this.chart.St.Ma(zn.Fo),this.chart.St.Bs()},clear:()=>{this.chart.St.Bs()}}))),this.Xl.Gd(t)}return this.Nd.ei}styleLegendEntry(t,e=!1){const i=this.getPointFillStyle(),s=this.getAreaFillStyle();Oe(t,this.Ct,e,{stroke:this.getStrokeStyle(),fill:i!==V?i:s,behavior:{priority:"stroke"}})}$s(){return this.Es||this.getPointShape()}ih(t,e){t.Dt(e),this.Hs.Bs()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const ed={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,chartInteractions:void 0},id=(t,e,i,s)=>{t.seriesBackground.addEventListener(e,i,s),t.getSeries().forEach((t=>t.addEventListener(e,i,s)));const r=t=>t.series.addEventListener(e,i,s);return t.addEventListener("seriesadd",r),()=>{t.seriesBackground.removeEventListener(e,i),t.getSeries().forEach((t=>t.removeEventListener(e,i))),t.removeEventListener("seriesadd",r)}},sd=(t,e,i,s)=>{const r=[];return t.forEachAxis((t=>{const n=e=>i(t,e);t.addEventListener(e,n,s),r.push((()=>t.removeEventListener(e,n)))})),t.addEventListener("axisadd",(t=>{const n=e=>i(t.axis,e);t.axis.addEventListener(e,n,s),r.push((()=>t.axis.removeEventListener(e,n)))})),()=>{r.forEach((t=>t()))}},rd=(t,i,s)=>{ni();const r=new Map;t.forEachAxis((t=>{var e,s;const n=t.hh.chartInteractions;!1===n||"object"==typeof n&&!1===n.restoreDefault||r.set(t,{animate:null!==(e=i.animationsEnabled)&&void 0!==e?e:void 0,stopAxisAfter:null!==(s=i.stopScroll)&&void 0!==s?s:void 0})})),t.L_(r);const n=t.engine.setMouseStyle(e.MouseStyles.ZoomOut);Wt.setTimeout((()=>{t.engine.restoreMouseStyle(n)}),500);const o=i.on;o&&Wt.requestAnimationFrame((()=>o({event:s})))},nd=(...t)=>(e,i)=>t.forEach((t=>t.forEach((t=>{t.axis.ct.J(e),t.axis.hA.J(i)})))),od=l(10,10);var hd;e.AxisPosition=void 0,(hd=e.AxisPosition||(e.AxisPosition={}))[hd.Top=0]="Top",hd[hd.Bottom=1]="Bottom",hd[hd.Left=2]="Left",hd[hd.Right=3]="Right";const ad=new Set([e.AxisPosition.Top,e.AxisPosition.Bottom,e.AxisPosition.Left,e.AxisPosition.Right]),ld=t=>t.setStopped(!0),cd=(t,e)=>{if(!t||!e)throw new Error("LightningChart JS error | either X or Y axis didn't exist when creating a series.");const i="linear-highPrecision"===t.rr.type||"linear-highPrecision"===e.rr.type,s="logarithmic"===t.rr.type||"logarithmic"===e.rr.type;if(i&&s){const i=`Invalid Axis combination | 'logarithmic' can't be combined with 'linear-highPrecision' (x: ${t.rr.type}, y: ${e.rr.type})`;throw new Error(i)}};var ud,dd,fd;!function(t){t[t.seriesBackground=0]="seriesBackground",t[t.gridLine0=1]="gridLine0",t[t.gridLine1=2]="gridLine1",t[t.gridLine2=3]="gridLine2",t[t.highlightersBelow=4]="highlightersBelow"}(ud||(ud={})),function(t){t[t.plotting=0]="plotting",t[t.highlightersAbove=1]="highlightersAbove",t[t.fg=2]="fg"}(dd||(dd={}));class gd extends Nl{constructor(t,i,s,r,n,o,h){var a;super(t,i,s,i.lg("chartXY bg",0),r,i.St.Ct.chartXYBackgroundFillStyle,i.St.Ct.chartXYBackgroundStrokeStyle,i.St.Ct.chartXYTitleFont,i.St.Ct.chartXYTitleFillStyle,i.St.Ct.chartXYTitleShadow,h),this.B_=this.ZA.d2({scaleXYConstructor:hs}),this.IA=[],this.PA=[],this.BA=[],this.LA=[],this.D_=new Map,this.E_=!0,this.R_=[],this.z_=this.Ct.chartXYZoomingRectangleFillStyle,this.O_=this.Ct.chartXYZoomingRectangleStrokeStyle,this.Gf=yd,this.ib=0,this.Hm=[],this.Wm=()=>{if(this.ft)return;const t=new Map;this.forEachAxis((e=>{void 0!==e.mA().find((t=>t.Zv()))&&t.set(e,{...e.getInterval(),stopped:e.getStopped()})})),t.size<=0||(this.Hm.push(t),this.Hm.length>100&&this.Hm.shift())},this.V_=(t,e,i)=>{const s=t.solveNearest(e,i);return s&&xi(s.cursorPosition.pointMarker.x,s.axisX.getInterval().start,s.axisX.getInterval().end)&&xi(s.cursorPosition.pointMarker.y,s.axisY.getInterval().start,s.axisY.getInterval().end)?s:void 0},this.N_=nd(this.PA,this.IA),this.G_=nd(this.BA,this.LA),this.U_=t=>{this.N_(t.engineWidth,t.engineHeight),this.G_(t.engineHeight,t.engineWidth),this.B_.J(t.engineWidth,t.engineHeight),this.St.Bs()},this.Y_=(t,e)=>{this.D_.set(t,e)},this.Kf=t=>{const e=this.PA.findIndex((e=>e.axis===t)),i=this.IA.findIndex((e=>e.axis===t)),s=this.BA.findIndex((e=>e.axis===t)),r=this.LA.findIndex((e=>e.axis===t));e>=0&&this.PA.splice(e,1),i>=0&&this.IA.splice(i,1),s>=0&&this.BA.splice(s,1),r>=0&&this.LA.splice(r,1),this.D_.delete(t),this.St.Bs()},this.addAreaSeries=t=>{const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);const s=t&&t.baseline?t.baseline:0,r=new(t&&t.type?t.type:xu.Positive)(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,s,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length);return this.gy(r),r},this.addAreaRangeSeries=t=>{const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);const s=new Su(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length);return this.gy(s),s},this.R=new Ct,this.St.Ma(zn.wo),this.setPadding(null!==(a=this.Ct.chartXYPadding)&&void 0!==a?a:{left:10,right:15,top:10,bottom:10}),this.X_=i.hx("chartXY series bg",ud.seriesBackground),this.W_=[ud.gridLine0,ud.gridLine1,ud.gridLine2].map((t=>i.j_(`chartXY gridline #${t}`,t))),this.Qf=i.j_("chartXY highlighters below",ud.highlightersBelow),this.Gx=i._p("chartXY plotting",dd.plotting),this.Jf=i._p("chartXY highlighters above",dd.highlightersAbove),this.Zf=i._p("chartXY fg",dd.fg),this.B_.x.j(0,this.uiScale.x.getCellSize()-(this.ai.left+this.ai.right+this.Dn.left+this.Dn.right)),this.B_.y.j(0,this.uiScale.y.getCellSize()-(this.ai.bottom+this.ai.top+this.Dn.bottom+this.Dn.top)),this.B_.J(this.uiScale.Mi().x,this.uiScale.Mi().y),this.uy=this.X_.Ke(this.B_).Je(this.Ct.chartXYSeriesBackgroundFillStyle).Qe(Ot),this.Ay=this.X_.Ke(this.B_).Je(V).Qe(this.Ct.chartXYSeriesBackgroundStrokeStyle).setPointerEvents(!1),super.ly(this.uy,this.Ay),this.setSeriesBackgroundEffect(!1);const l=ee(o?o.cursorBuilder:void 0,Qu),c=i.kp();this.Tp=Ua(this,c,l.jg(c,this.B_,this.B_,qt,this.Ct),this,"show-all",vd,((t,e)=>{const i=this.translateCoordinate(t,{x:t.axisX,y:t.axisY},this.coordsClient);return Math.sqrt((i.clientX-e.clientX)**2+(i.clientY-e.clientY)**2)})),this.addAxisX(o&&o.defaultAxisX),this.addAxisY(o&&o.defaultAxisY),this.addEventListener("resize",this.U_),this.Uh.jr("ChartXY"),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.ag(n,this.B_),this.vx=(t=>{let i={},s=!1,r=!1,n=!1;const o=()=>{var e;const s=t.getAxes().find((t=>{var e,i;return(null===(e=t.getScrollStrategy())||void 0===e?void 0:e.id)===hn||(null===(i=t.getScrollStrategy())||void 0===i?void 0:i.id)===an})),r=t.getSeries().map((t=>t.ws())).find((t=>t)),n=t.getSeries().find((t=>t instanceof fu||t instanceof td&&!_(t.getAreaFillStyle())&&t.ws())),o=s?{type:"scrolling",scrollingAxis:s,x:s.isX,y:s.isY}:r?{type:"progressive",x:"ProgressiveX"===r||"RegressiveX"===r,y:"ProgressiveY"===r||"RegressiveY"===r}:{type:"freeform"};if("progressive"===o.type){const t={zoom:{wheel:{},stopScroll:!0},pan:{lmb:!1,rmb:{drag:{}}},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}},e={pan:{lmb:!1,rmb:{drag:{}}},zoom:{wheel:{},mode:n?"keep-start":"centered"},restoreDefault:{doubleClick:!0},rectangleZoom:{lmb:{drag:{}},rmb:!1}};return Gt({rectangleZoom:{x:o.x,y:o.y,rmb:!1},pan:{x:o.x,y:o.y,pinch:{},lmb:!1,rmb:{drag:{}}},paginate:!1,zoom:{x:o.x,y:o.y,wheel:{},pinch:{},stopScroll:!0},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},xAxis:o.x?t:e,yAxis:o.y?t:e},i)}if("scrolling"===o.type){const t=((null===(e=o.scrollingAxis.Ir)||void 0===e?void 0:e.id)===an?-1:1)*(o.scrollingAxis.getInterval().end>o.scrollingAxis.getInterval().start?1:-1)>0?"keep-end":"keep-start",s={zoom:{wheel:{},stopScroll:!1,mode:t},pan:{drag:{}},restoreDefault:{doubleClick:!0}},r={rectangleZoom:{lmb:{},rmb:!1,mmb:!1},pan:{lmb:!1,rmb:{drag:{}},mmb:!1},zoom:{drag:!1,wheel:{},mode:n?"keep-start":"centered"},restoreDefault:{doubleClick:!0}};return Gt({rectangleZoom:!1,pan:{x:o.x,y:o.y,pinch:{},drag:{}},paginate:!1,zoom:{x:o.x,y:o.y,wheel:{},pinch:{stopScroll:!0},stopScroll:!1,mode:t},restoreDefault:{doubleClick:!0},restorePrevious:!1,xAxis:o.x?s:r,yAxis:o.y?s:r},i)}return Gt({pan:{x:!0,y:!0,pinch:{},lmb:!1,rmb:{drag:{}}},zoom:{x:!0,y:!0,pinch:{},wheel:{},mode:"toward-pointer"},rectangleZoom:{x:!0,y:!0,lmb:!0,rmb:!1},restoreDefault:{doubleClick:!0},restorePrevious:{ctrl:{code:"KeyZ"}},axes:{pan:{rmb:{drag:{}},lmb:!1},rectangleZoom:{lmb:{drag:{}},rmb:!1},zoom:{wheel:{}},restoreDefault:{doubleClick:!0}}},i)},h=t=>{const e=o(),i=t.getUserInteractions();let s=t.isX?e.xAxis:e.yAxis,r=e.axes;return s=!1!==s?s:ed,r=!1!==r?r:ed,Gt(null!=r?r:{},null!=s?s:{},i)},a=t=>{},l=i=>{if(!t.axisX||!t.axisY)return;const h=ys(!1!==t.St.Ca.ka),a=o(),l=gs(a.pan,"drag",i,s,r,n);l&&h.push((()=>((t,i,s,r)=>{let n;const o=t.getCursorMode();let h=!1,a=i;"mouse"===i.pointerType&&i.preventDefault();const l=r=>{if(r.pointerId!==i.pointerId)return;const o=r.clientX-a.clientX,l=r.clientY-a.clientY;if(a=r,!h){if(!("mouse"===r.pointerType||Math.max(Math.abs(r.clientX-i.clientX),Math.abs(r.clientY-i.clientY))>=10))return;h=!0,n=t.engine.setMouseStyle(!1===s.x?e.MouseStyles.Vertical:!1===s.y?e.MouseStyles.Horizontal:e.MouseStyles.Move),t.setCursorMode(void 0),ri()}Se(r),s.x&&t.forEachAxisX((t=>{var e;const i=t.hh.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-o*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),s.y&&t.forEachAxisY((t=>{var e;const i=t.hh.chartInteractions;!1===i||"object"==typeof i&&!1===i.pan||(!1!==s.stopScroll&&t.setStopped(!0),t.pan(l*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))}));const c=s.on;c&&Wt.requestAnimationFrame((()=>c({event:r})))},c=e=>{e.pointerId===i.pointerId&&(Wt.removeEventListener("pointermove",l),Wt.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),n=t.engine.restoreMouseStyle(n),r(),t.setCursorMode(o))},u=e=>{e.pointerId!==i.pointerId&&(Wt.removeEventListener("pointermove",l),Wt.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),n=t.engine.restoreMouseStyle(n),r(),t.setCursorMode(o))};Wt.addEventListener("pointermove",l),Wt.addEventListener("pointerup",c),t.engine.container.addEventListener("pointerdown",u),ni()})(t,i,l,g())));const c=gs(a.zoom,"drag",i,s,r,n);c&&h.push((()=>((t,i,s,r)=>{let n=t.engine.setMouseStyle(e.MouseStyles.ZoomIn);const o=t.getCursorMode();t.setCursorMode(void 0);let h=!1,a=i;"mouse"===i.pointerType&&i.preventDefault();const l=r=>{if(r.pointerId!==i.pointerId)return;Se(r);const o={x:r.clientX-a.clientX,y:r.clientY-a.clientY};a=r,s.x&&t.forEachAxisX((r=>{var h;const a=r.hh.chartInteractions;if(!1===a||"object"==typeof a&&!1===a.zoom)return;let l;l="keep-start"===s.mode?r.getInterval().start:"keep-end"===s.mode?r.getInterval().end:"centered"===s.mode?r.ct.nt((r.ct.mi()+r.ct.xi())/2):t.translateCoordinate(i,{x:r,y:r}).x;const c=.05*r.er.getWidth({x:-o.x,y:o.y})*(null!==(h=s.sensitivity)&&void 0!==h?h:1);r.zoom(l,c),!1!==s.stopScroll&&r.setStopped(!0),n=t.engine.setMouseStyle(c<0?e.MouseStyles.ZoomIn:e.MouseStyles.ZoomOut,n)})),s.y&&t.forEachAxisY((r=>{var h;const a=r.hh.chartInteractions;if(!1===a||"object"==typeof a&&!1===a.zoom)return;let l;l="keep-start"===s.mode?r.getInterval().start:"keep-end"===s.mode?r.getInterval().end:"centered"===s.mode?r.ct.nt((r.ct.mi()+r.ct.xi())/2):t.translateCoordinate(i,{x:r,y:r}).y;const c=.05*r.er.getWidth({x:-o.x,y:o.y})*(null!==(h=s.sensitivity)&&void 0!==h?h:1);r.zoom(l,c),!1!==s.stopScroll&&r.setStopped(!0),n=t.engine.setMouseStyle(c<0?e.MouseStyles.ZoomIn:e.MouseStyles.ZoomOut,n)})),h||(ri(),h=!0);const l=s.on;l&&Wt.requestAnimationFrame((()=>l({event:r})))},c=e=>{e.pointerId===i.pointerId&&(Wt.removeEventListener("pointermove",l),Wt.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),n=t.engine.restoreMouseStyle(n),r(),t.setCursorMode(o))},u=e=>{e.pointerId!==i.pointerId&&(Wt.removeEventListener("pointermove",l),Wt.removeEventListener("pointerup",c),t.engine.container.removeEventListener("pointerdown",u),n=t.engine.restoreMouseStyle(n),r(),t.setCursorMode(o))};Wt.addEventListener("pointermove",l),Wt.addEventListener("pointerup",c),t.engine.container.addEventListener("pointerdown",u),ni()})(t,i,c,g())));const u=gs(a.rectangleZoom,void 0,i,s,r,n);u&&h.push((()=>((t,i,s,r)=>{let n;const o=t.getCursorMode(),h=t.addRectangleSeries().setDrawOrder({seriesDrawOrderIndex:1e3}).setPointerEvents(!1).setCursorEnabled(!1).setAutoScrollingEnabled(!1).setClipping(!1),a=h.add({x1:0,x2:0,y1:0,y2:0});let l=!1,c=!1;"mouse"===i.pointerType&&i.preventDefault();const u=r=>{if(r.pointerId!==i.pointerId)return;Se(r),s.x&&t.forEachAxisX((t=>{const e=t.hh.chartInteractions;!1===e||"object"==typeof e&&!1===e.rectangleZoom||t.setStopped(!0)})),s.y&&t.forEachAxisY((t=>{const e=t.hh.chartInteractions;!1===e||"object"==typeof e&&!1===e.rectangleZoom||t.setStopped(!0)}));const h=t.translateCoordinate(i,t.coordsAxis),u=t.translateCoordinate(r,t.coordsAxis),d=ot({x:0,y:0},t.B_,t.coordsAxis),f=ot({x:t.B_.x.getInnerEnd(),y:t.B_.y.getInnerEnd()},t.B_,t.coordsAxis);!1===s.x?a.setDimensions({y1:h.y,x1:d.x,y2:u.y,x2:f.x}):!1===s.y?a.setDimensions({x1:h.x,y1:d.y,x2:u.x,y2:f.y}):a.setDimensions({x1:h.x,y1:h.y,x2:u.x,y2:u.y});const g=Si({x:r.clientX,y:r.clientY},{x:s.x?i.clientX:r.clientX,y:s.y?i.clientY:r.clientY})>=20,y=xi(u.x,d.x,f.x)&&xi(u.y,d.y,f.y);if(a.setFillStyle(g&&y?t.getZoomingRectangleFillStyle():V).setStrokeStyle(g&&y?t.getZoomingRectangleStrokeStyle():Ot),l||(ri(),l=!0),t.setCursorMode(g?void 0:o),g){if(n=t.engine.setMouseStyle(e.MouseStyles.ZoomIn,n),!c){const t=s.start;t&&t({event:r})}}else n=t.engine.restoreMouseStyle(n);c=g},d=e=>{if(e.pointerId!==i.pointerId)return;const a=Si({x:e.clientX,y:e.clientY},{x:s.x?i.clientX:e.clientX,y:s.y?i.clientY:e.clientY})>=20,l=t.translateCoordinate(e,t.coordsAxis),c=ot({x:0,y:0},t.B_,t.coordsAxis),g=ot({x:t.B_.x.getInnerEnd(),y:t.B_.y.getInnerEnd()},t.B_,t.coordsAxis),y=xi(l.x,c.x,g.x)&&xi(l.y,c.y,g.y);a&&y&&t.forEachAxis((r=>{var n,o;if(r.isX&&!s.x)return;if(r.isY&&!s.y)return;const h=r.hh.chartInteractions;if(!1===h||"object"==typeof h&&!1===h.rectangleZoom)return;const a=t.translateCoordinate(i,{x:r,y:r}),l=t.translateCoordinate(e,{x:r,y:r}),c=r.er.getWidth(a),u=r.er.getWidth(l),d=Math.sign(u-c),f=Math.sign(r.getInterval().end-r.getInterval().start),g=d===f?c:u,y=d===f?u:c;r.ut(g,y,null!==(n=s.animationsEnabled)&&void 0!==n?n:void 0,null!==(o=s.stopScroll)&&void 0!==o?o:void 0,"interactionSetInterval")})),a&&si("click"),t.setCursorMode(o),h.dispose(),Wt.removeEventListener("pointermove",u),Wt.removeEventListener("pointerup",d),t.engine.container.removeEventListener("pointerdown",f),n=t.engine.restoreMouseStyle(n),r();const p=a&&y&&s.on;p&&Wt.requestAnimationFrame((()=>p({event:e})))},f=e=>{e.pointerId!==i.pointerId&&(t.setCursorMode(o),h.dispose(),Wt.removeEventListener("pointermove",u),Wt.removeEventListener("pointerup",d),t.engine.container.removeEventListener("pointerdown",f),n=t.engine.restoreMouseStyle(n),r())};Wt.addEventListener("pointermove",u),Wt.addEventListener("pointerup",d),t.engine.container.addEventListener("pointerdown",f),ni()})(t,i,u,g()))),h.end();const d=gs(a.pan,"pinch",i,s,r,n),f=gs(a.zoom,"pinch",i,s,r,n);(f||d)&&((t,e,i,s,r)=>{if(!i&&!s)return;const n=h=>{if(h.pointerId===e.pointerId)return;const a=r();let l;t.engine.container.removeEventListener("pointerdown",n),Wt.removeEventListener("pointerup",o);let c=h;const u=t.getCursorMode();t.setCursorMode(void 0);const d=r=>{var n,o,a,u;const d=l,f=c;if(r.pointerId===e.pointerId)l=r;else{if(r.pointerId!==h.pointerId)return;c=r}if(Se(r),void 0===l||void 0===d)return;const g={x:(l.clientX-d.clientX+(c.clientX-f.clientX))/2*(null!==(n=null==i?void 0:i.sensitivity)&&void 0!==n?n:1),y:(l.clientY-d.clientY+(c.clientY-f.clientY))/-2*(null!==(o=null==i?void 0:i.sensitivity)&&void 0!==o?o:1)};let y=!1;if(i&&i.x&&(y=!0,t.forEachAxisX((t=>{const e=t.hh.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||t.RA({},g)}))),i&&i.y&&(y=!0,t.forEachAxisY((t=>{const e=t.hh.chartInteractions;!1===e||"object"==typeof e&&!1===e.pan||t.RA({},g)}))),y){const t=null==i?void 0:i.on;t&&Wt.requestAnimationFrame((()=>t({event:r})))}const p=Pi(Di({x:Math.abs(d.clientX-f.clientX),y:Math.abs(d.clientY-f.clientY)},{x:Math.abs(l.clientX-c.clientX),y:Math.abs(l.clientY-c.clientY)}),{x:null!==(a=null==s?void 0:s.sensitivity)&&void 0!==a?a:1,y:null!==(u=null==s?void 0:s.sensitivity)&&void 0!==u?u:1});let m=!1;if(s&&s.x&&(m=!0,t.forEachAxisX((t=>{var e;const i=t.hh.chartInteractions;!1===i||"object"==typeof i&&!1===i.zoom||t.ut(t.ct.Li(t.getInterval().start,-t.er.getWidth(p)),t.ct.Li(t.getInterval().end,t.er.getWidth(p)),!1,null!==(e=s.stopScroll)&&void 0!==e?e:void 0,"interactionZoom")}))),s&&s.y&&(m=!0,t.forEachAxisY((t=>{var e;const i=t.hh.chartInteractions;!1===i||"object"==typeof i&&!1===i.zoom||t.ut(t.ct.Li(t.getInterval().start,-t.er.getWidth(p)),t.ct.Li(t.getInterval().end,t.er.getWidth(p)),!1,null!==(e=s.stopScroll)&&void 0!==e?e:void 0,"interactionZoom")}))),m){const t=null==s?void 0:s.on;t&&Wt.requestAnimationFrame((()=>t({event:r})))}},f=i=>{i.pointerId!==e.pointerId&&i.pointerId!==h.pointerId||(Se(i),t.setCursorMode(u),Wt.removeEventListener("pointermove",d),Wt.removeEventListener("pointerup",f),a())};Wt.addEventListener("pointermove",d),Wt.addEventListener("pointerup",f),ni()},o=i=>{i.pointerId===e.pointerId&&(t.engine.container.removeEventListener("pointerdown",n),Wt.removeEventListener("pointerup",o))};t.engine.container.addEventListener("pointerdown",n),Wt.addEventListener("pointerup",o)})(t,i,d,f,g)};id(t,"wheel",(i=>{const h=ys(!1!==t.St.Ca.ka),a=o(),l=gs(a.pan,"wheel",i,s,r,n);l&&h.push((()=>((t,i,s)=>{if(Se(i),t.forEachAxisX((t=>{var e;const r=t.hh.chartInteractions;!1===r||"object"==typeof r&&!1===r.pan||s.x&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),t.forEachAxisY((t=>{var e;const r=t.hh.chartInteractions;!1===r||"object"==typeof r&&!1===r.pan||s.y&&(!1!==s.stopScroll&&t.setStopped(!0),t.pan(-30*Math.sign(i.deltaY)*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),s.x||s.y){const r=t.engine.setMouseStyle(!s.x&&s.y?e.MouseStyles.Vertical:s.x&&!s.y?e.MouseStyles.Horizontal:e.MouseStyles.Move);Wt.setTimeout((()=>{t.engine.restoreMouseStyle(r)}),500);const n=s.on;n&&Wt.requestAnimationFrame((()=>n({event:i})))}})(t,i,l)));const c=gs(a.zoom,"wheel",i,s,r,n);c&&h.push((()=>((t,i,s)=>{Se(i),t.forEachAxisX((e=>{var r;const n=e.hh.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.zoom)return;if(!s.x)return;let o;o="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ct.nt((e.ct.mi()+e.ct.xi())/2):t.translateCoordinate(i,{x:e,y:e}).x,e.zoom(o,Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&e.setStopped(!0)})),t.forEachAxisY((e=>{var r;const n=e.hh.chartInteractions;if(!1===n||"object"==typeof n&&!1===n.zoom)return;if(!s.y)return;let o;o="keep-start"===s.mode?e.getInterval().start:"keep-end"===s.mode?e.getInterval().end:"centered"===s.mode?e.ct.nt((e.ct.mi()+e.ct.xi())/2):t.translateCoordinate(i,{x:e,y:e}).y,e.zoom(o,Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&e.setStopped(!0)}));const r=t.engine.setMouseStyle(i.deltaY<0?e.MouseStyles.ZoomIn:e.MouseStyles.ZoomOut);Wt.setTimeout((()=>{t.engine.restoreMouseStyle(r)}),500);const n=s.on;n&&Wt.requestAnimationFrame((()=>n({event:i})))})(t,i,c))),h.end()})),id(t,"click",(i=>{if(i.defaultPrevented)return;const h=ys(!1!==t.St.Ca.ka),a=o(),l=gs(a.restoreDefault,void 0,i,s,r,n);l&&l.singleClick&&h.push((()=>{Se(i),rd(t,l,i)}));const c=gs(a.restorePrevious,void 0,i,s,r,n);c&&c.singleClick&&h.push((()=>{Se(i);const s=t.getAxes().filter((t=>{const e=t.hh.chartInteractions;return!(!1===e||"object"==typeof e&&!1===e.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});const r=t.engine.setMouseStyle(e.MouseStyles.ZoomOut);Wt.setTimeout((()=>{t.engine.restoreMouseStyle(r)}),500);const n=c.on;n&&Wt.requestAnimationFrame((()=>n({event:i})))})),h.end()})),id(t,"contextmenu",(i=>{if(i.defaultPrevented)return;const h=ys(!1!==t.St.Ca.ka),a=o(),l=gs(a.restoreDefault,"rmb",i,s,r,n);l&&l.singleClick&&h.push((()=>{Se(i),rd(t,l,i)}));const c=gs(a.restorePrevious,"rmb",i,s,r,n);c&&c.singleClick&&h.push((()=>{Se(i);const s=t.getAxes().filter((t=>{const e=t.hh.chartInteractions;return!(!1===e||"object"==typeof e&&!1===e.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});const r=t.engine.setMouseStyle(e.MouseStyles.ZoomOut);Wt.setTimeout((()=>{t.engine.restoreMouseStyle(r)}),500);const n=c.on;n&&Wt.requestAnimationFrame((()=>n({event:i})))})),h.end()})),id(t,"dblclick",(i=>{if(i.defaultPrevented)return;const h=ys(!1!==t.St.Ca.ka),a=o(),l=gs(a.restoreDefault,void 0,i,s,r,n);l&&l.doubleClick&&h.push((()=>{Se(i),rd(t,l,i)}));const c=gs(a.restorePrevious,void 0,i,s,r,n);c&&c.doubleClick&&h.push((()=>{Se(i);const s=t.getAxes().filter((t=>{const e=t.hh.chartInteractions;return!(!1===e||"object"==typeof e&&!1===e.restorePrevious)}));t.restorePreviousZoomState({whitelist:s});const r=t.engine.setMouseStyle(e.MouseStyles.ZoomOut);Wt.setTimeout((()=>{t.engine.restoreMouseStyle(r)}),500);const n=c.on;n&&Wt.requestAnimationFrame((()=>n({event:i})))})),h.end()}));const c=(i,o)=>{const a=ys(!1!==t.St.Ca.ka),l=h(i),c=gs(l.pan,"drag",o,s,r,n);c&&a.push((()=>((t,i,s,r)=>{const n=t.chart,o=n.getCursorMode();n.setCursorMode(void 0);let h=n.engine.setMouseStyle(t.isY?e.MouseStyles.Vertical:e.MouseStyles.Horizontal),a=!1,l=i;"mouse"===i.pointerType&&i.preventDefault();const c=e=>{var r;if(e.pointerId!==i.pointerId)return;Se(e);const n=e.clientX-l.clientX,o=e.clientY-l.clientY;l=e,!1!==s.stopScroll&&t.setStopped(!0),t.pan((t.isX?-n:o)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),a||(ri(),a=!0);const h=s.on;h&&Wt.requestAnimationFrame((()=>h({event:e})))},u=e=>{e.pointerId===i.pointerId&&(Se(e),Wt.removeEventListener("pointermove",c),Wt.removeEventListener("pointerup",u),h=t.chart.engine.restoreMouseStyle(h),r(),t.chart.setCursorMode(o))};Wt.addEventListener("pointermove",c),Wt.addEventListener("pointerup",u)})(i,o,c,g())));const u=gs(l.zoom,"drag",o,s,r,n);u&&a.push((()=>((t,i,s,r)=>{const n=t.chart;let o=n.engine.setMouseStyle(e.MouseStyles.ZoomIn);const h=n.getCursorMode();n.setCursorMode(void 0);let a=!1,l=i;"mouse"===i.pointerType&&i.preventDefault();const c=r=>{var h;if(r.pointerId!==i.pointerId)return;Se(r);const c={x:r.clientX-l.clientX,y:r.clientY-l.clientY};let u;l=r,u="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:t.ct.nt((t.ct.mi()+t.ct.xi())/2);const d=.05*t.er.getWidth({x:-c.x,y:c.y})*(null!==(h=s.sensitivity)&&void 0!==h?h:1);t.zoom(u,d),!1!==s.stopScroll&&t.setStopped(!0),o=n.engine.setMouseStyle(d<0?e.MouseStyles.ZoomIn:e.MouseStyles.ZoomOut,o),a||(ri(),a=!0);const f=s.on;f&&Wt.requestAnimationFrame((()=>f({event:r})))},u=t=>{t.pointerId===i.pointerId&&(Se(t),Wt.removeEventListener("pointermove",c),Wt.removeEventListener("pointerup",u),o=n.engine.restoreMouseStyle(o),n.setCursorMode(h),r())};Wt.addEventListener("pointermove",c),Wt.addEventListener("pointerup",u)})(i,o,u,g())));const d=gs(l.rectangleZoom,void 0,o,s,r,n);d&&a.push((()=>((t,i,s,r)=>{const n=t.chart,o=n.getCursorMode();n.setCursorMode(void 0);let h=n.engine.setMouseStyle(e.MouseStyles.ZoomIn);const a=t.addBand(!0).setPointerEvents(!1).setValueStart(t.er.getWidth(n.translateCoordinate(i,{x:t,y:t}))).setValueEnd(t.er.getWidth(n.translateCoordinate(i,{x:t,y:t}))).setVisible(!1).setFillStyle(n.getZoomingRectangleFillStyle()).setStrokeStyle(n.getZoomingRectangleStrokeStyle());let l=!1,c=!1;"mouse"===i.pointerType&&i.preventDefault();const u=e=>{if(e.pointerId!==i.pointerId)return;Se(e),t.setStopped(!0);const r=n.translateCoordinate(e,{x:t,y:t});a.setValueEnd(t.er.getWidth(r));const o=Si({x:e.clientX,y:e.clientY},{x:t.isX?i.clientX:e.clientX,y:t.isY?i.clientY:e.clientY})>=20;if(a.setVisible(o),l||(ri(),l=!0),o&&!c){const t=o&&s.start;t&&t({event:e})}c=o},d=e=>{var l,c;if(e.pointerId!==i.pointerId)return;Se(e);const f=Si({x:e.clientX,y:e.clientY},{x:t.isX?i.clientX:e.clientX,y:t.isY?i.clientY:e.clientY})>=20;if(f){const r=t.er.getWidth(n.translateCoordinate(i,{x:t,y:t})),o=t.er.getWidth(n.translateCoordinate(e,{x:t,y:t})),h=Math.sign(o-r),a=Math.sign(t.getInterval().end-t.getInterval().start),u=h===a?r:o,d=h===a?o:r;t.ut(u,d,null!==(l=s.animationsEnabled)&&void 0!==l?l:void 0,null!==(c=s.stopScroll)&&void 0!==c?c:void 0,"interactionSetInterval")}a.dispose(),Wt.removeEventListener("pointermove",u),Wt.removeEventListener("pointerup",d),h=n.engine.restoreMouseStyle(h),r(),n.setCursorMode(o);const g=f&&s.on;g&&Wt.requestAnimationFrame((()=>g({event:e})))};Wt.addEventListener("pointermove",u),Wt.addEventListener("pointerup",d)})(i,o,d,g()))),a.end()};sd(t,"pointerenter",((t,e)=>{const i=h(t);t.getHighlightOnHover()&&(i.pan||i.rectangleZoom||i.restoreDefault||i.zoom)&&t.setHighlight(!0)})),sd(t,"pointerleave",((t,e)=>{t.getHighlightOnHover()&&t.setHighlight(!1)})),sd(t,"wheel",((i,o)=>{const a=ys(!1!==t.St.Ca.ka),l=h(i),c=gs(l.zoom,"wheel",o,s,r,n);c&&a.push((()=>((t,i,s)=>{var r;let n;Se(i),n="keep-start"===s.mode?t.getInterval().start:"keep-end"===s.mode?t.getInterval().end:"centered"===s.mode?t.ct.nt((t.ct.mi()+t.ct.xi())/2):t.er.getWidth(t.chart.translateCoordinate(i,{x:t,y:t})),t.zoom(n,Math.sign(i.deltaY)*(null!==(r=s.sensitivity)&&void 0!==r?r:1)),!1!==s.stopScroll&&t.setStopped(!0);const o=t.chart.engine.setMouseStyle(i.deltaY<0?e.MouseStyles.ZoomIn:e.MouseStyles.ZoomOut);Wt.setTimeout((()=>{t.chart.engine.restoreMouseStyle(o)}),500);const h=s.on;h&&Wt.requestAnimationFrame((()=>h({event:i})))})(i,o,c)));const u=gs(l.pan,"wheel",o,s,r,n);u&&a.push((()=>((t,i,s)=>{var r;Se(i);const n=t.chart;!1!==s.stopScroll&&t.setStopped(!0),t.pan(30*Math.sign(i.deltaY)*t.er.getWidth({x:-1,y:1})*(null!==(r=s.sensitivity)&&void 0!==r?r:1));const o=n.engine.setMouseStyle(t.isY?e.MouseStyles.Vertical:e.MouseStyles.Horizontal);Wt.setTimeout((()=>{t.chart.engine.restoreMouseStyle(o)}),500);const h=s.on;h&&Wt.requestAnimationFrame((()=>h({event:i})))})(i,o,u))),a.end()})),sd(t,"dblclick",((i,o)=>{var a,l;if(o.defaultPrevented)return;const c=h(i),u=gs(c.restoreDefault,void 0,o,s,r,n);if(u&&u.doubleClick){Se(o),i.fit(null!==(a=u.animationsEnabled)&&void 0!==a?a:void 0,null!==(l=u.stopScroll)&&void 0!==l?l:void 0);const s=t.engine.setMouseStyle(e.MouseStyles.ZoomOut);Wt.setTimeout((()=>{t.engine.restoreMouseStyle(s)}),500);const r=u.on;r&&Wt.requestAnimationFrame((()=>r({event:o})))}}));const u=i=>{const h=o();let a=!1,l=!1,c=!1;for(const t of Object.keys(h)){const e=h[t];if("object"==typeof e)if("axes"===t||"xAxis"===t||"yAxis"===t){const t=e;if("object"!=typeof t)continue;for(const e of Object.keys(t)){const i=t[e];"object"==typeof i&&("ctrl"in i&&void 0!==i.ctrl&&(a=!0),"shift"in i&&void 0!==i.shift&&(l=!0),"alt"in i&&void 0!==i.alt&&(c=!0))}}else"ctrl"in e&&void 0!==e.ctrl&&(a=!0),"shift"in e&&void 0!==e.shift&&(l=!0),"alt"in e&&void 0!==e.alt&&(c=!0)}r=i.ctrlKey,s=i.shiftKey,n=i.altKey,("Control"===i.key&&a||"Shift"===i.key&&l||"Alt"===i.key&&c)&&i.preventDefault();const u=gs(h.restorePrevious,void 0,i,s,r,n);if(u&&u.code===i.code){Se(i);const e=t.getAxes().filter((t=>{const e=t.hh.chartInteractions;return!(!1===e||"object"==typeof e&&!1===e.restorePrevious)}));t.restorePreviousZoomState({whitelist:e});const s=u.on;s&&Wt.requestAnimationFrame((()=>s({event:i})))}const d=gs(h.paginate,void 0,i,s,r,n);d&&((t,i,s)=>{var r,n,o,h;const a=null!==(n=null===(r=s.forward)||void 0===r?void 0:r.code)&&void 0!==n?n:"ArrowLeft",l=null!==(h=null===(o=s.backward)||void 0===o?void 0:o.code)&&void 0!==h?h:"ArrowRight",c=i.code===a?1:i.code===l?-1:0;if(0===c)return;let u=!1;if(t.forEachAxis((t=>{var e;const i=t.hh.chartInteractions;!1===i||"object"==typeof i&&!1===i.paginate||t.isX&&!s.x||t.isY&&!s.y||(u=!0,!1!==s.stopScroll&&t.setStopped(!0),t.pan(-c*(t.cr>t.lr?1:-1)*.5*t.ct.Si()*(null!==(e=s.sensitivity)&&void 0!==e?e:1)))})),u){Se(i);const r=t.engine.setMouseStyle(!s.x&&s.y?e.MouseStyles.Vertical:s.x&&!s.y?e.MouseStyles.Horizontal:e.MouseStyles.Move);Wt.setTimeout((()=>{t.engine.restoreMouseStyle(r)}),500);const n=s.on;n&&Wt.requestAnimationFrame((()=>n({event:i})))}})(t,i,d);const f=gs(h.restoreDefault,void 0,i,s,r,n);if(f&&f.code===i.code){Se(i),t.getAxes().forEach((t=>{var e,i;const s=t.hh.chartInteractions;!1===s||"object"==typeof s&&!1===s.restoreDefault||t.fit(null!==(e=f.animationsEnabled)&&void 0!==e?e:void 0,null!==(i=f.stopScroll)&&void 0!==i?i:void 0)}));const e=f.on;e&&Wt.requestAnimationFrame((()=>e({event:i})))}},d=t=>{r=t.ctrlKey,s=t.shiftKey,n=t.altKey},f=()=>{r=!1,s=!1,n=!1};Wt.addEventListener("keydown",u),Wt.addEventListener("keyup",d),Wt.addEventListener("blur",f),t.addEventListener("dispose",(()=>{Wt.removeEventListener("keydown",u),Wt.removeEventListener("keyup",d),Wt.removeEventListener("blur",f)}));const g=()=>(y(),p(),m(),()=>{y=id(t,"pointermove",a),p=id(t,"pointerdown",l),m=sd(t,"pointerdown",c)});let y=id(t,"pointermove",a),p=id(t,"pointerdown",l),m=sd(t,"pointerdown",c);return{setUserInteractions:t=>{if(void 0===t)i={pan:!1,zoom:!1,rectangleZoom:!1,restoreDefault:!1,restorePrevious:!1,axes:!1,xAxis:!1,yAxis:!1};else if(0===Object.keys(t).length)i={};else for(const e of Object.keys(t))!1===t[e]||"object"==typeof t[e]?i[e]=t[e]:i[e]={}},getUserInteractions:o}})(this)}get coordsAxis(){return{x:this.getDefaultAxisX(),y:this.getDefaultAxisY()}}getSeries(){return this.ey}restorePreviousZoomState(t){if(this.Hm.length<=1)return this;this.Hm.pop();const e=this.Hm[this.Hm.length-1];return e?(this.Z_=Wt.performance.now(),this.forEachAxis((i=>{if((null==t?void 0:t.whitelist)&&!t.whitelist.includes(i))return;const s=e.get(i);s?i.ut(s.start,s.end,null==t?void 0:t.animate,void 0!==(null==t?void 0:t.stopAxisAfter)?t.stopAxisAfter:s.stopped,"userSetInterval"):i.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)})),this):this}clearPreviousZoomStateHistory(){if(void 0!==this.bx)this.Hm.length=0;else for(;this.Hm.length>1;)this.Hm.unshift();return this}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}solveNearest(t,e=this.getCursorMode()||"show-nearest"){return this.Tp.solveNearest(t,e,this.ey,this.V_)}addCursor(t=Qu){const e=this.JA(),i=t.jg(e,this.B_,this.B_,this.XA(e),this.Ct);return i.Ww=!0,this.rg(i),i}getMinimumSize(){var t;const e={x:0,y:0};e.x+=this.ai.left+this.ai.right+this.Dn.left+this.Dn.right,e.y+=this.ai.top+this.ai.bottom+this.Dn.top+this.Dn.bottom;const i=this.Uh.Dr().Pu(),s=S(pd(this.Gf||yd,null!==(t=this.Ct.chartXYTitleMargin)&&void 0!==t?t:5),this.cg);return e.x+=i.x+s.left+s.right,e.y+=i.y+s.top+s.bottom,this.Q_&&(e.x+=this.Q_.left,e.x+=this.Q_.right,e.y+=this.Q_.top,e.y+=this.Q_.bottom),e.x+=od.x,e.y+=od.y,e}getLayout(){const t=this.J_;return this.St.K_()||!t?new Promise((t=>{this.addEventListener("layoutchange",t,{once:!0}),this.J_=void 0})):new Promise((e=>{e(t)}))}addAxisX(t){var e,i;const{opposite:s,type:r}=xs(t);let n;n="linear"===r.type?this.ZA.d1({dimension:"x",scale1DConstructor:rs}):"linear-highPrecision"===r.type?this.ZA.d1({dimension:"x",scale1DConstructor:rs}).Vi():this.ZA.d1({dimension:"x",scale1DConstructor:Qi}).Ii(r.base),n.J(this.B_.x.Mi());const o=s?this.IA:this.PA,h=new Vh(this.W_,this.Zf,this.ug,this.Qf,this.Jf,this.St.vs,n,this.B_.y,(a=()=>h.mA(),{...Uh,...Yu(a)}),this,s?100:0,this.Kf,this.Y_,this.Ct,this.Bh,r);var a;let l,c;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=o.reduce(((t,e)=>Math.max(t,e.iParallel+1)),0),c=0):(l=null!==(e=t.iParallel)&&void 0!==e?e:0,c=null!==(i=t.iStack)&&void 0!==i?i:0),o.push({axis:h,iStack:c,iParallel:l}),this.St.Bs(),this.R.O("axisadd",{axis:h}),this.Sx(h),h}addAxisY(t){var e,i;const{opposite:s,type:r}=xs(t);let n;n="linear"===r.type?this.ZA.d1({dimension:"y",scale1DConstructor:rs}):"linear-highPrecision"===r.type?this.ZA.d1({dimension:"y",scale1DConstructor:rs}).Vi():this.ZA.d1({dimension:"y",scale1DConstructor:Qi}).Ii(r.base),n.J(this.B_.y.Mi());const o=s?this.LA:this.BA,h=new Vh(this.W_,this.Zf,this.ug,this.Qf,this.Jf,this.St.vs,n,this.B_.x,(a=()=>h.mA(),{...Nh,...Wu(a)}),this,s?100:0,this.Kf,this.Y_,this.Ct,this.Bh,r);var a;let l,c;return void 0===(null==t?void 0:t.iParallel)&&void 0===(null==t?void 0:t.iStack)?(l=o.reduce(((t,e)=>Math.max(t,e.iParallel+1)),0),c=0):(l=null!==(e=t.iParallel)&&void 0!==e?e:0,c=null!==(i=t.iStack)&&void 0!==i?i:0),o.push({axis:h,iParallel:l,iStack:c}),this.St.Bs(),this.R.O("axisadd",{axis:h}),this.Sx(h),h}Sx(t){const e=()=>{void 0!==this.Z_&&Wt.performance.now()-this.Z_<=1e3||t.getVisible()&&(this.bx&&Wt.clearTimeout(this.bx),this.bx=Wt.setTimeout((()=>{this.Wm(),this.bx=void 0}),300))};Wt.requestAnimationFrame((()=>{e()})),t.addEventListener("intervalchange",e),t.addEventListener("dispose",(()=>{this.Hm.forEach((e=>{e.delete(t)}))}))}swapAxes(t,e){const i=[this.PA,this.BA,this.LA,this.IA],s=i.find((e=>void 0!==e.find((e=>e.axis===t)))),r=i.find((t=>void 0!==t.find((t=>t.axis===e))));if(!s||!r)return this;if(s!==r)throw new Error("LightningChart JS ChartXY.swapAxes does not support swapping Axes that are on different sides.");const n=s.find((e=>e.axis===t)),o=s.find((t=>t.axis===e));if(!n||!o)return this;const h=n.iParallel,a=n.iStack;return n.iParallel=o.iParallel,n.iStack=o.iStack,o.iParallel=h,o.iStack=a,this.J_=void 0,this.St.Bs(),this}dispose(){return this.Tp.U(),this.X_.U(),this.Gx.U(),this.Zf.U(),this.W_.forEach((t=>t.U())),this.Jf.U(),this.Qf.U(),this.d_().forEach((t=>t.dispose())),Fa(this.B_),this.PA.slice().forEach((t=>t.axis.dispose())),this.BA.slice().forEach((t=>t.axis.dispose())),this.LA.slice().forEach((t=>t.axis.dispose())),this.IA.slice().forEach((t=>t.axis.dispose())),this.ey.slice().forEach((t=>{t.dispose()})),super.dispose()}getDefaultAxisX(){var t;return null===(t=[...this.PA,...this.IA].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}getDefaultAxisY(){var t;return null===(t=[...this.BA,...this.LA].find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}getDefaultAxes(){return[this.getDefaultAxisX(),this.getDefaultAxisY()]}getAxes(...t){const i=t&&t.length>0?new Set(t):ad;return te(Array.from(i).map((t=>{switch(t){default:case e.AxisPosition.Top:return this.IA.slice().sort(((t,e)=>t.iStack-e.iStack)).map((t=>t.axis));case e.AxisPosition.Bottom:return this.PA.slice().sort(((t,e)=>t.iStack-e.iStack)).map((t=>t.axis));case e.AxisPosition.Left:return this.BA.slice().sort(((t,e)=>t.iStack-e.iStack)).map((t=>t.axis));case e.AxisPosition.Right:return this.LA.slice().sort(((t,e)=>t.iStack-e.iStack)).map((t=>t.axis))}})))}q_(t){let e;return this.forEachAxisX((i=>{e=t===i?"x":e})),this.forEachAxisY((i=>{e=t===i?"y":e})),e}forEachAxisX(t){this.PA.forEach(((e,i,s)=>t(e.axis,i,s.map((t=>t.axis))))),this.IA.forEach(((e,i,s)=>t(e.axis,i,s.map((t=>t.axis)))))}forEachAxisY(t){this.BA.forEach(((e,i,s)=>t(e.axis,i,s.map((t=>t.axis))))),this.LA.forEach(((e,i,s)=>t(e.axis,i,s.map((t=>t.axis)))))}setTitlePosition(t){return this.Gf=t,this.St.Bs(),this}getTitlePosition(){return this.Gf}qe(t,e=!1){var i;super.qe(t);for(const t of this.ey)t.$v();for(const t of this.ey)t.qe();const s=Xe(this.ey.map((t=>t.Ja()))),r=new Set(s.map((t=>t.F_)));if(1===r.size){const t=Array.from(r)[0],e="x"===t?[this.PA,this.IA]:[this.BA,this.LA],i="y"===t?[this.PA,this.IA]:[this.BA,this.LA];e.forEach((t=>t.forEach((t=>t.axis.cn())))),i.forEach((t=>t.forEach((t=>t.axis.cn()))))}else this.BA.forEach((t=>t.axis.cn())),this.PA.forEach((t=>t.axis.cn())),this.IA.forEach((t=>t.axis.cn())),this.LA.forEach((t=>t.axis.cn()));let n=!1;this.forEachAxis((t=>{(t.gn()||t.pn())&&(n=!0)}));const o=!this.E_&&n,h=new Set(this.getAxes().map((t=>t.getStackIndex()))).size>1;this.Tp.qe(o,h?this.ey.sort(((t,e)=>e.axisY.getStackIndex()-t.axisY.getStackIndex())):this.ey,this.V_,{afterCursorPointedAt:t=>{const e=this.St.ba();if(t.length>1&&e){const t=this.St.Wa(e);this.Tp.xg.Hg({x:t.engineX,y:t.engineY},this.St.ct)}},overrideCursorPositions:(t,e)=>t.map((t=>t.multiHit?t.multiHit.map((e=>({...t.cursorPosition,pointMarker:e}))):[t.cursorPosition])).flat()});const a=(t,e,i,s,r={})=>{const n=Sd(t);let o=0;const h=[];return{parallels:n.parallels.map((t=>{const n=t.stacks.reduce(((t,e)=>t+(e.axis.getVisible()?e.axis.Yf+e.axis.Hf:0)),0),a=t.stacks.reduce(((t,e)=>t+(e.axis.getVisible()&&"pixels"in e.axis.pf?e.axis.pf.pixels:0)),0),l=e-n-a;let c=0;const u=t.stacks.map((i=>{const n=i.axis,a=n.getVisible(),u=Math.max(e-c,0),d=Math.min(a?"pixels"in n.pf?n.pf.pixels:n.pf.relative/t.sumRelativeSize*l:0,u),f={...r,availableSpace:e,stack:i,axisLength:d,axisLengthOffset:c,axisThicknessOffset:o},g=s(f,h);return h.push({...f,...g}),a&&(c+=d+n.Yf+n.Hf),{...g,stack:i,axis:n}})),d=u.reduce(((t,e)=>e.axis.getVisible()?Math.max(t,e.bA):t),0),f=u.reduce(((t,e)=>Math.max(t,e.xA)),0);return u.forEach((t=>{t.xA=f})),o+=d*i,{...t,stacks:u}})),thicknessTotal:Math.abs(o)}},c=this.getTitleFillStyle()!==V&&this.getTitle().length>0,u=c?this.Uh.Dr().Pu():{x:0,y:0},d=S(pd(this.Gf,null!==(i=this.Ct.chartXYTitleMargin)&&void 0!==i?i:5),this.cg),f=c?md(this.Gf,u,d):qe,g=this.B_.x.getCellSize()-(this.Dn.left+this.Dn.right+f.left+f.right),p=this.B_.y.getCellSize()-(this.Dn.top+this.Dn.bottom+f.bottom+f.top),m=new Map,x=(t,e)=>{const i=!!e.find((t=>!0===t.updatedTicks)),s={physicalAxisSize:t.axisLength,wA:t.axisLength,tC:t.axisLengthOffset,_A:t.axisThicknessOffset,anyPreviousAxisUpdated:i};return t.stack.axis.Dr(s)},v=a(this.BA,p,-1,x),A=a(this.LA,p,1,x),b=a(this.PA,g,-1,x),C=a(this.IA,g,1,x),M=[this.Dn.left+f.left+v.thicknessTotal,this.Dn.right+f.right+A.thicknessTotal],T=[this.Dn.bottom+b.thicknessTotal+f.bottom,this.Dn.top+f.top+C.thicknessTotal],E=this.B_.x.getCellSize()-(M[0]+M[1]),w=this.B_.y.getCellSize()-(T[0]+T[1]);this.B_.x.j(0,E),this.B_.y.j(0,w),this.B_.x.yi(M),this.B_.y.yi(T),super.og();const B=[...v.parallels,...b.parallels,...A.parallels,...C.parallels].map((t=>t.stacks)).flat(),k=t=>{const e=t.stack.axis,i=B.find((t=>t.axis===e));if(!i)throw new Error("LightningChart JS unexpected runtime error");const s=e.getVisible()?t.margins[0]+t.axisLengthOffset+e.Yf:0,r=e.getVisible()?t.margins[1]+(t.availableSpace-t.axisLengthOffset)-t.axisLength-e.Yf:0;e.ct.yi([s,r]);const n=t.stack.axis.qe(i);return m.set(t.stack.axis,n),i},R=g-(v.thicknessTotal+A.thicknessTotal),F=p-(b.thicknessTotal+C.thicknessTotal);a(this.BA,F,-1,k,{margins:T}),a(this.LA,F,1,k,{margins:T}),a(this.PA,R,-1,k,{margins:M}),a(this.IA,R,1,k,{margins:M}),this.Q_={left:v.thicknessTotal,top:C.thicknessTotal,right:A.thicknessTotal,bottom:b.thicknessTotal};const I={chartWidth:this.B_.x.getCellSize(),chartHeight:this.B_.y.getCellSize(),viewportWidth:E,viewportHeight:w,margins:{left:M[0],right:M[1],bottom:T[0],top:T[1]},axes:m},O=this.J_;if(e)this.R.O("layoutchange",{...I,userChangedLayout:()=>{}});else if(!O||Math.abs(O.chartWidth-I.chartWidth)>=1||Math.abs(O.chartHeight-I.chartHeight)>=1||Math.abs(O.viewportWidth-I.viewportWidth)>=1||Math.abs(O.viewportHeight-I.viewportHeight)>=1||this.getAxes().find((t=>{var e,i,s,r,n,o,h,a,l,c,u,d;const f=O.axes.get(t),g=I.axes.get(t);if(Math.abs((null!==(e=null==f?void 0:f.width)&&void 0!==e?e:0)-(null!==(i=null==g?void 0:g.width)&&void 0!==i?i:0))>=1||Math.abs((null!==(s=null==f?void 0:f.height)&&void 0!==s?s:0)-(null!==(r=null==g?void 0:g.height)&&void 0!==r?r:0))>=1||Math.abs((null!==(n=null==f?void 0:f.left)&&void 0!==n?n:0)-(null!==(o=null==g?void 0:g.left)&&void 0!==o?o:0))>=1||Math.abs((null!==(h=null==f?void 0:f.right)&&void 0!==h?h:0)-(null!==(a=null==g?void 0:g.right)&&void 0!==a?a:0))>=1||Math.abs((null!==(l=null==f?void 0:f.bottom)&&void 0!==l?l:0)-(null!==(c=null==g?void 0:g.bottom)&&void 0!==c?c:0))>=1||Math.abs((null!==(u=null==f?void 0:f.top)&&void 0!==u?u:0)-(null!==(d=null==g?void 0:g.top)&&void 0!==d?d:0))>=1)return t}))){let e=!1;const i=()=>{e=!0};if(this.R.O("layoutchange",{...I,userChangedLayout:i}),this.YA||e)return this.engine.layout(),this.U_({width:this.uiScale.Mi().x,height:this.uiScale.Mi().y,engineWidth:this.St.ct.Mi().x,engineHeight:this.St.ct.Mi().y}),this.YA=!0,void this.qe(t,!0)}this.J_=I,this.uy.th(l(0,0)).J(l(E,w)),this.Ay.th(l(0,0)).J(l(E,w));const L=xd(this.Gf,u,d,this.uiScale.rs(),this.Dn,M,T);this.Uh.th(L.position).zl(L.horizontalAlignment).Nl(L.verticalAlignment);const D=y(this.B_.x.mi(),this.B_.y.mi(),this.B_.x.Si(),this.B_.y.Si());this.Gx.Zm(D),this.Qf.Zm(D),this.Jf.Zm(D),this.GA&&this.GA();for(const t of this.ey)t.tv()}L_(t){const e=Xe(this.ey.map((t=>t.Ja()))),i=new Set(e.map((t=>t.F_)));if(1===i.size){const s=Array.from(i)[0],r="x"===s?[this.PA,this.IA]:[this.BA,this.LA],n="y"===s?[this.PA,this.IA]:[this.BA,this.LA];r.forEach((e=>e.forEach((e=>{const i=t.get(e.axis);i&&e.axis.fit(i.animate,i.stopAxisAfter)})))),e.forEach((t=>t.I_())),n.forEach((e=>e.forEach((e=>{const i=t.get(e.axis);i&&(e.axis.getScrollStrategy()&&void 0===e.axis.getDefaultInterval()?e.axis.setStopped(!1):e.axis.fit(i.animate,i.stopAxisAfter))}))))}else t.forEach(((t,e)=>e.fit(null==t?void 0:t.animate,null==t?void 0:t.stopAxisAfter)))}X(){for(let t=0;t<this.PA.length;t+=1)this.PA[t].axis.X();for(let t=0;t<this.IA.length;t+=1)this.IA[t].axis.X();for(let t=0;t<this.BA.length;t+=1)this.BA[t].axis.X();for(let t=0;t<this.LA.length;t+=1)this.LA[t].axis.X();return super.X()}H_(t){if(this.D_.has(t))return this.D_.get(t);throw new Error("No attach handler for axis Make sure that passed axes definitely belong to this chart and that they haven't been disposed of.")}addLineSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);let s=zu.freeform;t&&t.dataPattern&&(s="ProgressiveX"===t.dataPattern.pattern?zu.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?zu.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?zu.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?zu.verticalRegressive:zu.freeform);const r=new qu(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,s,this.Ct,this.St.vs,ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,t);return this.gy(r),r}addPointLineAreaSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);const s=new td(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,t);return this.gy(s),s}addPointSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(i,s);const r=t&&t.pointShape&&Object.values(e.PointShape).includes(t.pointShape)?"string"==typeof t.pointShape?e.PointShape[t.pointShape]:t.pointShape:e.PointShape.Square,n=new Zu(this,this.ny,this.Gx,i,s,this.H_(i),this.H_(s),this.JA,r,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,t);return this.gy(n),n}addPointLineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(i,s);const r=t&&t.pointShape&&Object.values(e.PointShape).includes(t.pointShape)?"string"==typeof t.pointShape?e.PointShape[t.pointShape]:t.pointShape:e.PointShape.Square;let n=zu.freeform;t&&t.dataPattern&&(n="ProgressiveX"===t.dataPattern.pattern?zu.horizontalProgressive:"ProgressiveY"===t.dataPattern.pattern?zu.verticalProgressive:"RegressiveX"===t.dataPattern.pattern?zu.horizontalRegressive:"RegressiveY"===t.dataPattern.pattern?zu.verticalRegressive:zu.freeform);const o=new Mu(this,this.ny,this.Gx,i,s,this.H_(i),this.H_(s),this.JA,n,r,this.Ct,this.St.vs,ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,t);return this.gy(o),o}addStepSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(i,s);const r=t&&t.pointShape?t.pointShape:e.PointShape.Square,n=t&&t.mode?t.mode:e.StepOptions.before,o=new Uu(this,this.ny,this.Gx,i,s,this.H_(i),this.H_(s),this.JA,r,n,this.Ct,this.St.vs,ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,t);return this.gy(o),o}addSplineSeries(t){const i=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),s=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(i,s);const r=t&&t.pointShape?t.pointShape:e.PointShape.Square;let n=zu.freeform;t&&t.dataPattern&&(n="ProgressiveX"===t.dataPattern.pattern?zu.horizontalProgressive:"RegressiveX"===t.dataPattern.pattern?zu.horizontalRegressive:zu.freeform);const o=new Bu(this,this.ny,this.Gx,i,s,this.H_(i),this.H_(s),this.JA,n,r,this.Ct,this.St.vs,ml(t&&t.dataPattern),void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,t);return this.gy(o),o}addRectangleSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);const s=new eu(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length);return this.gy(s),s}addPolygonSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY(),s=new Kc(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length);return this.gy(s),s}addSegmentSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);const s=new su(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length);return this.gy(s),s}addEllipseSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);const s=new qc(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length);return this.gy(s),s}addBoxSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);const s=t&&t.dimensionStrategy?t.dimensionStrategy:Uh,r=new Qc(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,s,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length);return this.gy(r),r}addTextSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);const s=new ou(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length);return this.gy(s),s}addHeatmapGridSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let s;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new au(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,t,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length),this.gy(s),s}addHeatmapScrollingGridSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();let s;if(void 0!==t.heatmapDataType&&"intensity"!==t.heatmapDataType)throw new Error(`Unsupported Heatmap Grid heatmapDataType: '${t.heatmapDataType}'`);return s=new cu(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,t,this.Ct,this.St.vs,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length),this.gy(s),s}addOHLCSeries(t){const e=(null==t?void 0:t.axisX)||(null==t?void 0:t.xAxis)||this.getDefaultAxisX(),i=(null==t?void 0:t.axisY)||(null==t?void 0:t.yAxis)||this.getDefaultAxisY();cd(e,i);const s=new(t&&t.type?t.type:Gu.Candlesticks)(this,this.ny,this.Gx,e,i,this.H_(e),this.H_(i),this.JA,this.Ct,this.St.vs);return this.gy(s),s}addOnScreenMenu(t,e){return new Ku(this.jA,t,this,e)}setZoomingRectangleFillStyle(t){return this.z_="function"==typeof t?t(this.z_):t,this.St.Bs(),this}getZoomingRectangleFillStyle(){return this.z_}setZoomingRectangleStrokeStyle(t){return this.O_="function"==typeof t?t(this.O_):t,this.St.Bs(),this}getZoomingRectangleStrokeStyle(){return this.O_}addLegendBox(t,e){var i;const s=super.addLegendBox(t,e);if(void 0===e||e===this.uiScale)if(void 0===t||"vertical"===t.getAlignment())s.setOrigin(Wr.RightCenter).setPosition({x:this.uiScale.x.nt(this.uiScale.x.xi()-this.Dn.right),y:nt(this.B_.y.nt(this.B_.y.mi()+this.B_.y.Si()/2),this.B_.y,this.uiScale.y)});else{const t=this.Gf||yd,e=md(t,this.getTitleFillStyle()===V||0===this.getTitle().length?{x:0,y:0}:this.Uh.Dr().Pu(),S(pd(t,null!==(i=this.Ct.chartXYTitleMargin)&&void 0!==i?i:5),this.cg)).top+this.Dn.top;s.setOrigin(Wr.RightTop).setPosition(ot({x:this.oA.x.getInnerEnd()-this.Dn.right,y:this.oA.y.getInnerEnd()-e},this.oA,this.uiScale))}return s}pan(t){this.forEachAxisX((e=>{e.setStopped(!0).pan(t.x)})),this.forEachAxisY((e=>{e.setStopped(!0).pan(t.y)}))}zoom(t,e){this.forEachAxis(ld),this.forEachAxisX((i=>{i.zoom(i.ct.nt(t.x),e.x)})),this.forEachAxisY((i=>{i.zoom(i.ct.nt(t.y),e.y)}))}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.forEachAxis((e=>e.setAnimationsEnabled(t))),this}kf(){const t=[];return this.forEachAxis((e=>e.gA((e=>t.push(e))))),super.kf().concat(t)}d_(){return this.R_}Ue(){return this.gg(this.Gx)}setCursorEnabledDuringAxisAnimation(t){return this.E_=t,this}getCursorEnabledDuringAxisAnimation(){return this.E_}forEachAxis(t){return this.forEachAxisX(t),this.forEachAxisY(t),this}translateCoordinate(t,e,i){if(i){const s=t,r=e,n=Xh(r)?r:ds(r)?this.oA:void 0;if(n&&cs(i)){const t=ot(s,n,this.St.ct);return this.St.ja({engineX:t.x,engineY:t.y})}if(n&&ds(i))return ot(s,n,this.oA);if(n&&Xh(i))return ot(s,n,i)}else{const i=t;if(ds(e)){const t=this.St.Wa(i);return ot({x:t.engineX,y:t.engineY},this.St.ct,this.oA)}if(Xh(e)){const t=e,s=this.St.Wa(i);return ot({x:s.engineX,y:s.engineY},this.St.ct,t)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addEventListener(t,e,i){this.R.addEventListener(t,e,i),"layoutchange"===t&&this.J_&&e({...this.J_,userChangedLayout:()=>{}})}removeEventListener(t,e){this.R.removeEventListener(t,e)}setUserInteractions(t){return this.vx.setUserInteractions(t),this}getUserInteractions(){return this.vx.getUserInteractions()}}e.ChartXYTitlePositionOptions=void 0,(fd=e.ChartXYTitlePositionOptions||(e.ChartXYTitlePositionOptions={})).CenterTop="center-top",fd.RightTop="right-top",fd.LeftTop="left-top",fd.CenterBottom="center-bottom",fd.RightBottom="right-bottom",fd.LeftBottom="left-bottom",fd.SeriesCenterTop="series-center-top",fd.SeriesRightTop="series-right-top",fd.SeriesLeftTop="series-left-top",fd.SeriesCenterBottom="series-center-bottom",fd.SeriesRightBottom="series-right-bottom",fd.SeriesLeftBottom="series-left-bottom";const yd=e.ChartXYTitlePositionOptions.CenterTop,pd=(t,e)=>{switch(t){case"center-top":case"series-center-bottom":return{left:0,right:0,top:0,bottom:e};case"left-top":return{left:20,right:0,top:0,bottom:e};case"right-top":return{left:0,right:20,top:0,bottom:e};case"center-bottom":return{left:0,right:0,top:0,bottom:0};case"left-bottom":return{left:20,right:0,top:0,bottom:0};case"right-bottom":return{left:0,right:20,top:0,bottom:0};case"series-center-top":return{left:0,right:0,top:e,bottom:0};case"series-left-top":return{left:e,right:0,top:e,bottom:0};case"series-right-top":return{left:0,right:e,top:e,bottom:0};case"series-left-bottom":return{left:e,right:0,top:0,bottom:e};case"series-right-bottom":return{left:0,right:e,top:0,bottom:e}}return Ye(0,`Unexpected ChartXY title position selection ${t}`)},md=(t,e,i)=>{switch(t){case"center-top":case"left-top":case"right-top":return{top:e.y+i.top+i.bottom,right:0,bottom:0,left:0};case"center-bottom":case"left-bottom":case"right-bottom":return{bottom:e.y+i.top+i.bottom,right:0,left:0,top:0};default:return qe}},xd=(t,e,i,s,r,n,o)=>{const h=(i.left-i.right)*s.x,a=(i.bottom-i.top)*s.y;switch(t){case"center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+h,y:100-(r.top+i.top)*s.y}};case"left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:h,y:100-(r.top-i.top)*s.y}};case"right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100+h,y:100-(r.top-i.top)*s.y}};case"center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50+h,y:(r.bottom+i.bottom)*s.y}};case"left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:h,y:(r.bottom+i.bottom)*s.y}};case"right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100+h,y:(r.bottom+i.bottom)*s.y}};case"series-center-top":return{horizontalAlignment:0,verticalAlignment:1,position:{x:50+h,y:100-o[1]*s.y+a}};case"series-left-top":return{horizontalAlignment:-1,verticalAlignment:1,position:{x:n[0]*s.x+h,y:100-o[1]*s.y+a}};case"series-right-top":return{horizontalAlignment:1,verticalAlignment:1,position:{x:100-n[1]*s.x+h,y:100-o[1]*s.y+a}};case"series-center-bottom":return{horizontalAlignment:0,verticalAlignment:-1,position:{x:50,y:o[0]*s.y+a}};case"series-left-bottom":return{horizontalAlignment:-1,verticalAlignment:-1,position:{x:n[0]*s.x+h,y:o[0]*s.y+a}};case"series-right-bottom":return{horizontalAlignment:1,verticalAlignment:-1,position:{x:100-n[1]*s.x+h,y:o[0]*s.y+a}}}return Ye(0,`Unexpected ChartXY title position selection ${t}`)},Sd=t=>{const e=[];t.forEach(((t,i)=>{const s=e.find((e=>e.iParallel===t.iParallel));s?(s.stacks.push({...t}),s.stacks.sort(((t,e)=>t.iStack-e.iStack))):e.push({iParallel:t.iParallel,stacks:[{...t}]})}));const i=e.map((t=>{const e=t.stacks.reduce(((t,e)=>t+(e.axis.getVisible()&&"relative"in e.axis.pf?e.axis.pf.relative:0)),0);return{...t,sumRelativeSize:e}}));return i.sort(((t,e)=>t.iParallel-e.iParallel)),{parallels:i}},vd=(t,e,i)=>{var s;const r=Array.from(new Set(i.map((t=>t.series.ws())))),n=1===r.length&&void 0!==r[0]?r[0]:void 0,o="ProgressiveY"===n||"RegressiveY"===n?{progressiveDimension:e.axisY.getTitle()||"Y",progressiveAxis:e.axisY,valueDimension:e.axisX.getTitle()||"X",hitValueAxis:t=>t.axisX,value:t=>t.x,position:t=>t.y}:{progressiveDimension:e.axisX.getTitle()||"X",progressiveAxis:e.axisX,valueDimension:e.axisY.getTitle()||"Y",hitValueAxis:t=>t.axisY,value:t=>t.y,position:t=>t.x},h=o.progressiveAxis.getTickStrategy();return at(e)?Pa(e,[[{component:e.series,componentColor:Va(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[t.getDefaultAxisX().getTitle()||"X","",{text:ms(e.axisX.formatValue(e.x),e.axisX),font:{weight:"bold"}}],[t.getDefaultAxisY().getTitle()||"Y","",{text:ms(e.axisY.formatValue(e.y),e.axisY),font:{weight:"bold"}}],void 0!==e.intensity?["Value","",{text:ms(e.intensity.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}]:[]]):1===i.length?"Time"===h||"DateTime"===h?e.multiHit?[[{text:ms(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...Pa(e,[[{component:e.series,componentColor:Va(e)},""],[`${o.valueDimension}1`,"",{text:ms(o.hitValueAxis(e).formatValue(o.value(e.multiHit[0])),o.hitValueAxis(e)),font:{weight:"bold"}}],[`${o.valueDimension}2`,"",{text:ms(o.hitValueAxis(e).formatValue(o.value(e.multiHit[1])),o.hitValueAxis(e)),font:{weight:"bold"}}]])]:[[{text:ms(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...Pa(e,[[{component:e.series,componentColor:Va(e)},"",{text:ms(o.hitValueAxis(e).formatValue(o.value(e)),o.hitValueAxis(e)),font:{weight:"bold"}}]])]:e.multiHit?Pa(e,[[{component:e.series,componentColor:Va(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[o.progressiveDimension,"",{text:ms(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),font:{weight:"bold"}}],[`${o.valueDimension}1`,"",{text:ms(o.hitValueAxis(e).formatValue(o.value(e.multiHit[0])),o.hitValueAxis(e)),font:{weight:"bold"}}],[`${o.valueDimension}2`,"",{text:ms(o.hitValueAxis(e).formatValue(o.value(e.multiHit[1])),o.hitValueAxis(e)),font:{weight:"bold"}}]]):Pa(e,[[{component:e.series,componentColor:Va(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[o.progressiveDimension,"",{text:ms(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),font:{weight:"bold"}}],[o.valueDimension,"",{text:ms(o.hitValueAxis(e).formatValue(o.value(e)),o.hitValueAxis(e)),font:{weight:"bold"}}]]):n?[[{text:ms(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...i.map((t=>t.multiHit?Pa(t,[[{component:t.series,componentColor:Va(t)},""],[`${o.valueDimension}1`,"",{text:ms(o.hitValueAxis(t).formatValue(o.value(t.multiHit[0])),o.hitValueAxis(t)),font:{weight:"bold"}}],[`${o.valueDimension}2`,"",{text:ms(o.hitValueAxis(t).formatValue(o.value(t.multiHit[1])),o.hitValueAxis(t)),font:{weight:"bold"}}]]):Pa(t,[[{component:t.series,componentColor:Va(t)},"",{text:ms(o.hitValueAxis(t).formatValue(o.value(t)),o.hitValueAxis(t)),font:{weight:"bold"}}]]))).flat()]:i.map((e=>Pa(e,[[{component:e.series,componentColor:Va(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[o.progressiveDimension,"",{text:ms(o.progressiveAxis.formatValue(o.position(e)),o.progressiveAxis),font:{weight:"bold"}}],[o.valueDimension,"",{text:ms(o.hitValueAxis(e).formatValue(o.value(e)),o.hitValueAxis(e)),font:{weight:"bold"}}]]))).flat()};class Ad{constructor(t,e,i,s,r,n,o){this.coordsRelative="relative",this.coordsClient="client",this.iC=[],this.sC=new Map,this.ey=new Map,this.eC=!0,this.hC=new Set,this.rC=()=>{this.nC.St.Bs()},this.oC=(t,e,i)=>{0!==this.ey.size&&void 0!==[...this.ey.values()].find((({series:t})=>!0===t.getVisible()))||this.aC.ut(e,i,!1,!1,"zoomBandChartOther"),this.nC.St.Bs()},this.lC=!0,this.R=new Ct,e.St.Ma(zn.bo),this.jA=t,this.cC=(null==n?void 0:n.orientation)||"x",this.uC=void 0!==(null==n?void 0:n.useSharedValueAxis)&&n.useSharedValueAxis,this.dC=s,this.jn="x"===this.cC?Uh:Nh;const h={...n,defaultAxisX:this.jn.getWidth({x:null==n?void 0:n.defaultAxis,y:void 0}),defaultAxisY:this.jn.getHeight({x:null==n?void 0:n.defaultAxis,y:void 0})};this.nC=new gd(t,e,i,qt,r,h,o).setTitle("Zoom Band Chart").setUserInteractions(void 0).setCursorMode(void 0),this.engine=this.nC.engine;const a=this.nC.getDefaultAxisX().setPointerEvents(!1),l=this.nC.getDefaultAxisY().setPointerEvents(!1);this.aC=this.jn.getWidth({x:a,y:l}).setScrollStrategy(ln.fitting()).setAnimationScroll(!1).setStrokeStyle(Ot).setTickStrategy(cn.Empty),(null==n?void 0:n.useSharedValueAxis)?this.fC=this.jn.getHeight({x:a,y:l}):this.jn.getHeight({x:a,y:l}).dispose();const c=this.getTheme().zoomBandChartDefocusOverlayFillStyle||new N({color:this.getTheme().isDark?C(0,0,0,180):C(255,255,255,180)});this.AC=[this.nC.Zf.Ke(this.aC.rA).Je(c).Qe(Ot),this.nC.Zf.Ke(this.aC.rA).Je(c).Qe(Ot)];const u=this.nC.Zf.CA(this.aC.rA).ah(this.getTheme().zoomBandChartSplitterStrokeStyle||this.getTheme().chartXYSeriesBackgroundStrokeStyle);this.gC={collection:u,members:new Array(5).fill(0).map((t=>u.Oo()))};const d=this.getTheme(),f="function"==typeof d.zoomBandChartKnobFillStyle?Yt({resourcesBaseUrl:this.jA.ve,styleFactory:d.zoomBandChartKnobFillStyle,apply:t=>this.setKnobFillStyle(t)}):d.zoomBandChartKnobFillStyle||V;this.pC=[this.nC.Zf.Ke(this.nC.oA).Je(f).Qe(Ot),this.nC.Zf.Ke(this.nC.oA).Je(f).Qe(Ot)],this.vC=this.getTheme().zoomBandChartKnobSize||{x:0,y:0},this.yC()}get chart(){return this.nC}setUserInteractions(t){return this.hh=void 0===t?{pan:{drag:!1,click:!1},zoom:{wheel:void 0,dragKnob:!1}}:t,this}getUserInteractions(){return Gt({pan:{drag:!0,click:!0},zoom:{wheel:{},dragKnob:!0}},this.hh)}add(t){var e,i,s,r,n;this.hC.has(t.chart)||(this.hC.add(t.chart),t.chart.addEventListener("layoutchange",this.rC));const o=this.iC.map((t=>t.axis)),h="x"===this.cC?t.axisX:t.axisY;if(!o.includes(h)){const t=t=>{this.oC(h,t.start,t.end)};h.addEventListener("intervalchange",t),this.iC.push({axis:h,deattach:()=>{h.removeEventListener("intervalchange",t)}}),this.aC.kr(h.Cr(),h.getTickStrategy()),this.mC&&this.mC.remove(),this.mC=ht(...this.iC.map((t=>t.axis)))}const a=this.jn.getHeight({x:t.axisX,y:t.axisY});let l;if(this.uC)l=this.fC;else{const t=this.sC.get(a);t?l=t:(l=this.jn.getHeight({x:this.nC.addAxisX.bind(this.nC),y:this.nC.addAxisY.bind(this.nC)})(),this.xC(l)),this.sC.set(a,l)}const c=this.jn.getWidth({x:this.aC,y:l}),u=this.jn.getHeight({x:this.aC,y:l});let d;const f=[],g=(t,e)=>{const i=t=>{if(0!==t.length)if("x"in t[0]){const i=t;e.add(i)}else{const i=t,s=[];for(let t=0;t<i.length;t+=1){const e=i[t];s.push({x:e[0],y:e[4]})}e.add(s)}},s=t.Ib();i(s);const r=t=>{i(t.data)},n=()=>{e.clear()};t.addEventListener("dataadd",r),t.addEventListener("dataclear",n),f.push((()=>{t.removeEventListener("dataadd",r),t.removeEventListener("dataclear",n)}))};if(t instanceof td)d=this.nC.addPointLineAreaSeries({...t.Ca,axisX:c,axisY:u,xAxis:c,yAxis:u}).setStrokeStyle(t.getStrokeStyle()).setAreaFillStyle(t.getAreaFillStyle()).setPointFillStyle(t.getPointFillStyle()).setPointAlignment(t.getPointAlignment()).setPointRotation(t.getPointRotation()).setPointShape(t.getPointShape()).setPointSize(t.getPointSize()).setCurvePreprocessing(t.getCurvePreprocessing()),d.setDataSet(t.T_());else if(t instanceof qu||t instanceof Nu){const i=this.nC.addLineSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,dataPattern:t instanceof qu?null===(e=t.Ca)||void 0===e?void 0:e.dataPattern:void 0});if(t instanceof qu)i.setStrokeStyle(t.getStrokeStyle());else{const e=bd(t);e&&i.setStrokeStyle(e)}g(t,i),d=i}else if(t instanceof yu){const e=this.nC.addAreaSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,baseline:t.PM}).setFillStyle(t.getFillStyle()).setStrokeStyle(t.getStrokeStyle());g(t,e),d=e}else if(t instanceof Zu){const e=this.nC.addPointSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(i=t.Ca)||void 0===i?void 0:i.pointShape}).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());g(t,e),d=e}else if(t instanceof Uu){const e=this.nC.addStepSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(s=t.Ca)||void 0===s?void 0:s.pointShape,mode:t.qM}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());g(t,e),d=e}else if(t instanceof Bu){const e=this.nC.addSplineSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(r=t.Ca)||void 0===r?void 0:r.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());g(t,e),d=e}else if(t instanceof Mu){const e=this.nC.addSplineSeries({axisX:c,axisY:u,xAxis:c,yAxis:u,pointShape:null===(n=t.Ca)||void 0===n?void 0:n.pointShape}).setStrokeStyle(t.getStrokeStyle()).setPointFillStyle(t.getPointFillStyle()).setPointSize(t.getPointSize()).setPointRotation(t.getPointRotation());g(t,e),d=e}else if(t instanceof Su){const e=this.nC.addAreaRangeSeries({axisX:c,axisY:u,xAxis:c,yAxis:u}).setLowFillStyle(t.getLowFillStyle()).setHighFillStyle(t.getHighFillStyle()).setLowStrokeStyle(t.getLowStrokeStyle()).setHighStrokeStyle(t.getHighStrokeStyle()).add(t.Ib()),i=t=>e.add(t.data);t.addEventListener("dataadd",i),f.push((()=>t.removeEventListener("dataadd",i))),d=e;const s=t=>e.clear();t.addEventListener("dataclear",s),f.push((()=>{t.removeEventListener("dataclear",s)}))}else{if(!(t instanceof hu))throw new Error("LightningChart JS Zoom Band Chart unsupported series type");{const e=this.nC.addHeatmapGridSeries({...t.Yb,axisX:c,axisY:u,xAxis:c,yAxis:u}),i=()=>{e.setWireframeStyle(t.getWireframeStyle()).setIntensityInterpolation(t.getIntensityInterpolation()).setFillStyle(t.getFillStyle())};i(),d=e,t.Wb(d);const s=t=>e.invalidateIntensityValues(t.value);t.addEventListener("stylechange",i),f.push((()=>{t.removeEventListener("invalidateintensity",s),t.removeEventListener("stylechange",i)}));const r=()=>{e.clear()};t.addEventListener("dataclear",r),f.push((()=>{t.removeEventListener("dataclear",r)}))}}d.setPointerEvents(!1);const y=t=>{d.setVisible(t.isVisible)};t.addEventListener("visiblechange",y),f.push((()=>{t.removeEventListener("visiblechange",y)}));const p=t=>{d.setHighlight(t.highlight)};f.push((()=>{t.addEventListener("highlightchange",p),t.removeEventListener("highlightchange",p)}));const m=()=>{this.disposeSeries(t)};return t.addEventListener("dispose",m),f.push((()=>{t.removeEventListener("dispose",m)})),this.ey.set(t,{series:d,clearReferences:()=>f.forEach((t=>t()))}),d}disposeSeries(t){const e=this.ey.get(t);if(e){const{clearReferences:i}=e;i(),this.ey.delete(t),e.series.dispose();const s=this.jn.getHeight({x:t.axisX,y:t.axisY}),r=this.sC.get(s);r&&0===r.mA().length&&(this.sC.delete(s),r.dispose())}const i="x"===this.cC?t.axisX:t.axisY;if(!Array.from(this.ey.keys()).find((t=>i===("x"===this.cC?t.axisX:t.axisY)))){const t=this.iC.findIndex((t=>t.axis===i));t>=0&&(this.iC[t].deattach(),this.iC.splice(t,1))}const s=Array.from(this.ey.keys()).find((t=>t.chart==t.chart));return s||(t.chart.removeEventListener("layoutchange",this.rC),this.hC.delete(t.chart)),this}setDefocusOverlayFillStyle(t){return this.AC.forEach((e=>e.Je(t))),this.nC.St.Bs(),this}getDefocusOverlayFillStyle(){return this.AC[0].pr()}setSplitterStrokeStyle(t){return this.gC.collection.ah(t),this.nC.St.Bs(),this}getSplitterStrokeStyle(){return this.gC.collection.ro()}setKnobFillStyle(t){return this.pC.forEach((e=>e.Je(t))),this.nC.St.Bs(),this}getKnobFillStyle(){return this.pC[0].pr()}setKnobStrokeStyle(t){return this.pC.forEach((e=>e.Qe(t))),this.nC.St.Bs(),this}getKnobStrokeStyle(){return this.pC[0].Ua()}setKnobSize(t){return this.vC=t,this.nC.St.Bs(),this}getKnobSize(){return this.vC}getDefaultAxisX(){return this.nC.getDefaultAxisX()}getDefaultAxisY(){return this.nC.getDefaultAxisY()}get axisX(){return this.getDefaultAxisX()}get xAxis(){return this.getDefaultAxisX()}get axisY(){return this.getDefaultAxisY()}get yAxis(){return this.getDefaultAxisY()}xC(t){t.setTickStrategy(cn.Empty).setPointerEvents(!1).setStrokeStyle(Ot)}setStopAxisOnInteraction(t){return this.eC=t,this}getStopAxisOnInteraction(){return this.eC}yC(){let t;const i=(t,e,i,s)=>{var r,n;const o="x"===this.cC?null===(r=Array.from(this.ey.keys())[0])||void 0===r?void 0:r.axisX:null===(n=Array.from(this.ey.keys())[0])||void 0===n?void 0:n.axisY;if(!o)return;const h=o.getInterval(),a=this.aC.getInterval(),l=Math.abs(this.aC.ct.ot(t)-this.aC.ct.ot(e));i.preventTooSmall&&l<10||Math.sign(e-t)!==Math.sign(h.end-h.start)||Math.min(t,e)<Math.min(a.start,a.end)||Math.max(t,e)>Math.max(a.start,a.end)&&Math.max(h.start,h.end)<Math.max(t,e)||o.ut(t,e,i.animated,this.eC,s)};this.pC.forEach(((s,r)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().zoom)||void 0===i?void 0:i.dragKnob)&&(t=this.engine.setMouseStyle(this.jn.getWidth({x:e.MouseStyles.Horizontal,y:e.MouseStyles.Vertical}),t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("pointerdown",(t=>{var e,s,n;if(!(null===(e=this.getUserInteractions().zoom)||void 0===e?void 0:e.dragKnob))return;const o="x"===this.cC?null===(s=Array.from(this.ey.keys())[0])||void 0===s?void 0:s.axisX:null===(n=Array.from(this.ey.keys())[0])||void 0===n?void 0:n.axisY;if(!o)return;Se(t);const h=e=>{if(e.pointerId!==t.pointerId)return;Se(e);const s=this.jn.getWidth(this.nC.translateCoordinate(e,this.nC.coordsAxis)),n=o.getInterval(),h=0===r?s:n.start,a=1===r?s:n.end;i(h,a,{animated:!1,preventTooSmall:!0},"zoomBandChartOther")},a=e=>{e.pointerId===t.pointerId&&(Se(e),Wt.removeEventListener("pointermove",h),Wt.removeEventListener("pointerup",a))};Wt.addEventListener("pointermove",h),Wt.addEventListener("pointerup",a)}))})),this.nC.seriesBackground.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.drag)&&(t=this.engine.setMouseStyle(e.MouseStyles.Move,t))})),this.nC.seriesBackground.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)}));const s=(t,e)=>{var s,r,n;if(!(null===(s=this.getUserInteractions().pan)||void 0===s?void 0:s.drag))return;const o="x"===this.cC?null===(r=Array.from(this.ey.keys())[0])||void 0===r?void 0:r.axisX:null===(n=Array.from(this.ey.keys())[0])||void 0===n?void 0:n.axisY;if(!o)return;const h=o.getInterval(),a=this.aC.ct.Li(h.start,this.jn.getWidth(t)),l=this.aC.ct.Li(h.end,this.jn.getWidth(t));i(a,l,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),Se(e)};this.nC.seriesBackground.addEventListener("pointerdown",(t=>{var e,i;if(!("x"===this.cC?null===(e=Array.from(this.ey.keys())[0])||void 0===e?void 0:e.axisX:null===(i=Array.from(this.ey.keys())[0])||void 0===i?void 0:i.axisY))return;Se(t);let r=t;const n=e=>{if(e.pointerId!==t.pointerId)return;const i={x:e.clientX-r.clientX,y:r.clientY-e.clientY};r=e,s(i,e)},o=e=>{e.pointerId===t.pointerId&&(Se(e),ri(),Wt.removeEventListener("pointermove",n),Wt.removeEventListener("pointerup",o))};Wt.addEventListener("pointermove",n),Wt.addEventListener("pointerup",o)})),this.nC.seriesBackground.addEventListener("wheel",(t=>{var e,s,r,n;const o=this.getUserInteractions();if(!(null===(e=o.zoom)||void 0===e?void 0:e.wheel))return;const h="x"===this.cC?null===(s=Array.from(this.ey.keys())[0])||void 0===s?void 0:s.axisX:null===(r=Array.from(this.ey.keys())[0])||void 0===r?void 0:r.axisY;if(!h)return;const a=h.getInterval(),l=this.aC.getInterval(),c=this.jn.getWidth(this.nC.translateCoordinate(t,this.nC.coordsAxis)),u=this.aC.ct.ot(a.start),d=this.aC.ct.ot(a.end),f=this.aC.ct.ot(c),g=Kt((f-u)/(d-u),0,1),y=.2*Math.abs(d-u)*(null!==(n=o.zoom.wheel.sensitivity)&&void 0!==n?n:1),p=g*y*-Math.sign(t.deltaY),m=(1-g)*y*Math.sign(t.deltaY),x=Kt(this.aC.ct.Li(a.start,p),l.start,l.end),S=Kt(this.aC.ct.Li(a.end,m),l.start,l.end);i(x,S,{animated:!1,preventTooSmall:!0},"zoomBandChartOther"),Se(t)})),this.AC.forEach(((s,r)=>{s.addEventListener("pointerenter",(()=>{var i;(null===(i=this.getUserInteractions().pan)||void 0===i?void 0:i.click)&&(t=this.engine.setMouseStyle(e.MouseStyles.Point,t))})),s.addEventListener("pointerleave",(()=>{t=this.engine.restoreMouseStyle(t)})),s.addEventListener("click",(t=>{var e,s,r;if(t.defaultPrevented)return;if(!(null===(e=this.getUserInteractions().pan)||void 0===e?void 0:e.click))return;const n="x"===this.cC?null===(s=Array.from(this.ey.keys())[0])||void 0===s?void 0:s.axisX:null===(r=Array.from(this.ey.keys())[0])||void 0===r?void 0:r.axisY;if(!n)return;const o=this.jn.getWidth(this.nC.translateCoordinate(t,this.nC.coordsAxis)),h=n.getInterval(),a=this.aC.getInterval(),l=Kt(o-(h.end-h.start)/2,Math.min(a.start,a.end),Math.max(a.start,a.end)-Math.abs(h.end-h.start)),c=l+(h.end-h.start);i(l,c,{animated:!0,preventTooSmall:!1},"zoomBandChartClick"),Se(t)}))}))}getSizePixels(){return this.nC.getSizePixels()}vn(t){this.nC.vn(t)}getMinimumSize(){return this.nC.getMinimumSize()}X(){return this.nC.X()}W(){return this.nC.W()}qe(t){var e,i,s,r;const n=Ne(Array.from(this.ey.keys()).map((t=>t.chart))),o="x"===this.cC?null===(e=Array.from(this.ey.keys())[0])||void 0===e?void 0:e.axisX:null===(i=Array.from(this.ey.keys())[0])||void 0===i?void 0:i.axisY,h=(()=>{var t;const e=null===(t=this.iC.find((t=>t.axis.getVisible())))||void 0===t?void 0:t.axis;return!!e&&Math.sign(e.getInterval().end-e.getInterval().start)})(),a=Math.sign(this.aC.getInterval().end-this.aC.getInterval().start);if(a!==h&&0!==a&&0!==h&&this.aC.ut(this.aC.getInterval().end,this.aC.getInterval().start,!1,this.aC.getStopped(),"zoomBandChartOther"),this.lC)if("x"===this.cC){const t=n.reduce(((t,e)=>{const i=[];e.forEachAxisY((t=>{if(!t.getVisible()||0!==t.iA)return;let e=i.find((e=>e.iParallel===t.getParallelIndex()));e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.DA())}));const s=i.reduce(((t,e)=>t+e.maxHeight),0);return Math.max(t,s)}),0),e=n.reduce(((t,e)=>{const i=[];e.forEachAxisY((t=>{if(!t.getVisible()||100!==t.iA)return;let e=i.find((e=>e.iParallel===t.getParallelIndex()));e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.DA())}));const s=i.reduce(((t,e)=>t+e.maxHeight),0);return Math.max(t,s)}),0),i=n.reduce(((t,e)=>Math.max(t,e.getPadding().left)),0),r=n.reduce(((t,e)=>Math.max(t,e.getPadding().right)),0);this.nC.forEachAxisY((t=>t.setThickness(0))),null===(s=this.getDefaultAxisY())||void 0===s||s.setThickness(t),this.nC.setPadding({left:i+(0===n.length?10:0),right:r+e+(0===n.length?10:0)})}else{const t=n.reduce(((t,e)=>{const i=[];e.forEachAxisX((t=>{if(!t.getVisible()||0!==t.iA)return;let e=i.find((e=>e.iParallel===t.getParallelIndex()));e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.DA())}));const s=i.reduce(((t,e)=>t+e.maxHeight),0);return Math.max(t,s)}),0),e=n.reduce(((t,e)=>{const i=[];e.forEachAxisX((t=>{if(!t.getVisible()||100!==t.iA)return;let e=i.find((e=>e.iParallel===t.getParallelIndex()));e||(e={iParallel:t.getParallelIndex(),maxHeight:0},i.push(e)),e.maxHeight=Math.max(e.maxHeight,t.DA())}));const s=i.reduce(((t,e)=>t+e.maxHeight),0);return Math.max(t,s)}),0),i=n.reduce(((t,e)=>Math.max(t,e.getPadding().bottom)),0),s=n.reduce(((t,e)=>Math.max(t,e.getPadding().top)),0);this.nC.forEachAxisX((t=>t.setThickness(0))),null===(r=this.getDefaultAxisX())||void 0===r||r.setThickness(t),this.nC.setPadding({bottom:i+(0===n.length?10:0),top:s+e+(0===n.length?10:0)})}this.nC.qe(t);const l=this.aC.getInterval().start,c=this.aC.getInterval().end,u=Kt(o?o.getInterval().start:l,l,c),d=Kt(o?o.getInterval().end:c,l,c),f=this.jn.getHeight(this.nC.B_.getInnerIntervalPixels());this.AC[0].th(this.jn.toPoint(l,0)).J(this.jn.toPoint(u-l,f)),this.AC[1].th(this.jn.toPoint(d,0)).J(this.jn.toPoint(c-d,f)),this.gC.members[0].TA(this.jn.toPoint(l,f),this.jn.toPoint(u,f)),this.gC.members[1].TA(this.jn.toPoint(u,f),this.jn.toPoint(u,0)),this.gC.members[2].TA(this.jn.toPoint(u,0),this.jn.toPoint(d,0)),this.gC.members[3].TA(this.jn.toPoint(d,0),this.jn.toPoint(d,f)),this.gC.members[4].TA(this.jn.toPoint(d,f),this.jn.toPoint(c,f));const g=ot(this.jn.toPoint(u,f/2),this.aC.rA,this.nC.oA),y=ot(this.jn.toPoint(d,f/2),this.aC.rA,this.nC.oA),p=this.vC;this.pC[0].th({x:g.x-p.x/2,y:g.y-p.y/2}).J({x:p.x,y:p.y}).br(this.jn.getWidth({x:0,y:90})),this.pC[1].th({x:y.x-p.x/2,y:y.y-p.y/2}).J({x:p.x,y:p.y}).br(this.jn.getWidth({x:0,y:90}))}setSeriesBackgroundFillStyle(t){return this.nC.setSeriesBackgroundFillStyle(t),this.nC.St.Bs(),this}getSeriesBackgroundFillStyle(){return this.nC.getSeriesBackgroundFillStyle()}setSeriesBackgroundStrokeStyle(t){return this.nC.setSeriesBackgroundStrokeStyle(t),this.nC.St.Bs(),this}getSeriesBackgroundStrokeStyle(){return this.nC.getSeriesBackgroundStrokeStyle()}setSeriesBackgroundEffect(t){return this.nC.setSeriesBackgroundEffect(t),this.nC.St.Bs(),this}getSeriesBackgroundEffect(){return this.nC.getSeriesBackgroundEffect()}getTheme(){return this.nC.getTheme()}setTitle(t){return this.nC.setTitle(t),this}getTitle(){return this.nC.getTitle()}setTitleFillStyle(t){return this.nC.setTitleFillStyle(t),this}getTitleFillStyle(){return this.nC.getTitleFillStyle()}setTitleFont(t){return this.nC.setTitleFont(t),this}getTitleFont(){return this.nC.getTitleFont()}setTitleMargin(t){return this.nC.setTitleMargin(t),this}getTitleMargin(){return this.nC.getTitleMargin()}setPadding(t){return void 0===t?this.lC=!0:(this.lC=!1,this.nC.setPadding(t),this.nC.forEachAxis((t=>t.setThickness(void 0)))),this.nC.St.Bs(),this}getPadding(){return this.nC.getPadding()}setBackgroundFillStyle(t){return this.nC.setBackgroundFillStyle(t),this}getBackgroundFillStyle(){return this.nC.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.nC.setBackgroundStrokeStyle(t),this}getBackgroundStrokeStyle(){return this.nC.getBackgroundStrokeStyle()}translateCoordinate(t,e,i){return ka(t,e,i,this.nC.oA,this.nC.St)}addUIElement(t,e){return this.nC.addUIElement(t,e)}addLegendBox(t,e){return this.nC.addLegendBox(t,e)}getLegendBoxes(){return this.nC.getLegendBoxes()}saveToFile(t,e,i){return this.nC.saveToFile(t,e,i),this}dispose(){return this.nC.dispose(),this.sC.clear(),this.ey.clear(),this.dC(this),this}isDisposed(){return this.nC.isDisposed()}getLayout(){return this.nC.getLayout()}addEventListener(t,e,i){this.nC.addEventListener(t,e,i)}removeEventListener(t,e){this.nC.removeEventListener(t,e)}}const bd=t=>{if("getStrokeStyle"in t)return t.getStrokeStyle();const e=(t=>t instanceof qu||t instanceof yu?t.getStrokeStyle().getFillStyle():t instanceof Zu||t instanceof Mu?t.getPointFillStyle():void 0)(t);return e?new er({thickness:2,fillStyle:e}):void 0};class Cd extends Pc{constructor(t,i,s,r,n,o,h){super(t,i,s,r,n,h),this.Rs="Point Series",this.BS=[],this.DS=!1,this.OS=3,this.yl=0,this.R=new Ct,this.We=Ve(this.Ct.polarPointSeriesFillStyle,o),this.Nd=new Do({dataPattern:null}),this.Xl=t.Yd(r).ah(Ot).$d(V).Ud(this.We).Hd(e.PointShape.Circle).Qd(this.OS).Dt(this.getHighlight()).Gd(this.Nd),this._s(this.Xl)}solveNearest(t,e="show-nearest"){const i=this.chart.translateCoordinate(t,this.chart.coordsAxis),s=Rc([i],this.scale)[0],r=this.Nd.wd(s,Da(e),this.scale,this.chart.oA);if(!r)return;const n=Oc(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}qt(t,e){return ti({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}setData(t){return 0!==this.BS.length&&this.chart.St.Ma(zn.Fo),this.BS=Ic(t),this.DS=!0,this.TS=Fc(this.BS),this.Hs.Bs(),this}setPointAlignment(t){return this.Xl.__(t),this.chart.St.Bs(),this}getPointAlignment(){return this.Xl.C_()}setPointFillStyle(t){this.We="function"==typeof t?t(this.We):t;const e=this.We;return this.Xl.Ud(e),this.Hs.Bs(),this}getPointFillStyle(){return this.We}setPointSize(t){return this.OS=t,this.Xl.Qd(t),this.Hs.Bs(),this}getPointSize(){return this.OS}setPointShape(t){return this.Xl.Hd(t),this.chart.St.Bs(),this}getPointShape(){return this.Xl.Xd()}setPointRotation(t){return this.yl=t,this.Xl.Wd(t),this.Hs.Bs(),this}getPointRotation(){return this.yl}Ev(){return this.Ov&&this.BS.length>0&&this.getVisible()}ih(t,e){t.Dt(e),this.Hs.Bs()}qe(){if(this.DS||this.scale.fe()){const t=Rc(this.BS,this.scale),e=Ci(t);this.Nd.clear().add(t),this.Xl.Lt(e),this.DS=!1,this.Xl.Dr()}}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We})}$s(){return this.Es||this.getPointShape()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Md{constructor(t,e,i,s){this.SC=!1,this.R=new Ct,this._e=t,this.bC=e,this.ey=i,this.Xl=s}setGeometry(t){return this.MC=t,this.SC=!0,this._e.St.Bs(),this}getGeometry(){return this.MC}setPointerEvents(t){return this.Xl.setPointerEvents(t),this}dispose(){return this.Xl.dispose(),this.bC(this),this.R.O("dispose",{}),this}setVisible(t){const e=this.Xl.getVisible()!==t;return this.Xl.setVisible(t),e&&this.R.O("visiblechange",{isVisible:t}),this._e.St.Bs(),this}getVisible(){return this.Xl.getVisible()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Td extends Pc{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Rs="Polygon Series",this.wC=[],this._C=[],this.CC=t=>{const e=this._C.indexOf(t);e>=0&&this._C.splice(e,1);const i=this.wC.findIndex((e=>e===t.Xl));i>=0&&this.wC.splice(i,1),this.Hs.Bs()},this.R=new Ct,this.We=Ve(this.Ct.polarPolygonSeriesFillStyle,n),this.je=Ve(this.Ct.polarPolygonSeriesStrokeStyle,n)}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=$c(s,this.wC,((t,e)=>{const i=t.wd(e);if(i)return ot(i,this.scale,t.St.ct)}),Si);if(!r)return;const n=ot(r[0],r[1].St.ct,this.scale);if(!this.kC(r[1]))return;const o=Oc(n,this.scale);return{cursorPosition:{pointMarker:n,pointMarkerScale:this.scale,resultTable:n,resultTableScale:this.scale},series:this,...o}}qt(t,e){return ti({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}addPolygon(){const t=new Md(this.chart,this.CC,this,this.TC());return this._C.push(t),t}setFillStyle(t){this.We="function"==typeof t?t(this.We):t;const e=this.We;for(const t of this.wC)t.Je(e);return this.Hs.Bs(),this}getFillStyle(){return this.We}setStrokeStyle(t){this.je="function"==typeof t?t(this.je):t;const e=this.je;for(const t of this.wC)t.Qe(e);return this.Hs.Bs(),this}getStrokeStyle(){return this.je}Ev(){return this.Ov&&void 0!==this._C.find((t=>void 0!==t.FC))&&this.getVisible()}qe(){this._C.forEach((t=>{(t.SC||this.scale.fe())&&t.IC&&(t.Xl.wc(Rc(t.IC,this.scale)),t.SC=!1,t.Xl.Dr())}))}$v(){super.$v();const t=g(hi,ai);this._C.forEach((e=>{if(!e.MC)return;const i=!e.SC&&e.IC?e.IC:Ic(e.MC);e.IC=i;const s=!e.SC&&e.FC?e.FC:Fc(i);e.FC=s,t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max)})),this.TS=t}ih(t,e){t.Dt(e),this.Hs.Bs()}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We,stroke:this.je})}TC(){const t=this.Hs.Ru(this.scale,Eo.Simple).Je(this.We).Qe(this.je).Dt(this.getHighlight());return this.wC.push(t),this._s(t),t}kC(t){return this._C.find((e=>e.Xl===t))}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class Ed extends Pc{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,o),this.Rs="Area Series",this.BS=[],this.DS=!1,this.ES=!1,this.PC=!1,this.R=new Ct,this.We=Ve(this.Ct.polarAreaSeriesFillStyle,n),this.je=Ve(this.Ct.polarAreaSeriesStrokeStyle,n)}setData(t){0!==this.BS.length&&this.chart.St.Ma(zn.Fo);const e=(t=>{const e=[];let i,s,r=!1;for(let n=0;n<t.length;n+=1){const o=t[n];let h=!0;if(i){h=!1;const t=o.angle-i.angle;if(Zt(t,0))h=!0;else{const e=Math.sign(t);void 0===s?(s=e,h=!0):s===e&&(h=!0)}}h?e.push(o):r=!0,i=o}return{progressivePoints:e,userDataModified:r}})(t);return e.userDataModified&&!1===this.PC&&(console.warn(`${this.Rs} setData data format is faulty. Consecutive 'angle' values should progress in the same direction! Invalid data points have been removed.`),this.PC=!0),this.BS=e.progressivePoints,this.DS=!0,this.TS=Fc(this.BS),this.Hs.Bs(),this}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.Hs.Bs(),this}getFillStyle(){return this.We}setStrokeStyle(t){return this.je="function"==typeof t?t(this.je):t,this.Hs.Bs(),this}getStrokeStyle(){return this.je}setConnectDataAutomaticallyEnabled(t){return this.ES=t,this.Hs.Bs(),this}getConnectDataAutomaticallyEnabled(){return this.ES}Ev(){return this.Ov&&this.BS.length>0&&this.getVisible()}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We,stroke:this.je})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class wd extends Ed{constructor(t,e,i,s,r,n,o){super(t,e,i,s,r,n,o),this.kS=this.Hs.Ru(this.scale,Eo.Simple).Dt(this.getHighlight()),this._s(this.kS)}solveNearest(t,e){const i=this.chart.St.Wa(t),s={x:i.engineX,y:i.engineY},r=this.kS.wd(s);if(!r)return;const n=Oc(r,this.scale);return{cursorPosition:{pointMarker:r,pointMarkerScale:this.scale,resultTable:r,resultTableScale:this.scale},series:this,...n}}qt(t,e){return ti({series:this},{cursorPosition:0,amplitude:0,angle:0,color:0},(()=>this.solveNearest(e,this.chart.getCursorMode())))}qe(){if(this.DS||this.scale.fe()){const t=this.BS,e=!0===this.ES?Rc(t,this.scale):[...Rc(t,this.scale),{x:0,y:0}];this.kS.wc(e).Je(this.We).Qe(this.je),this.DS=!1,this.kS.Dr()}}ih(t,e){t.Dt(e),this.Hs.Bs()}}class Bd extends Nl{constructor(t,e,i,s,r,n,o){super(t,e,i,e.lg("polarChart bg",0),s,e.St.Ct.polarChartBackgroundFillStyle,e.St.Ct.polarChartBackgroundStrokeStyle,e.St.Ct.polarChartTitleFont,e.St.Ct.polarChartTitleFillStyle,e.St.Ct.polarChartTitleShadow,o),this.coordsClient="client",this.Of=[],this.LC=t=>{this.rS.J(t.engineWidth,t.engineHeight)},this.$f=Ce(this.Of),this.BC=t=>{this.Of.push(t)},this.DC=()=>this.ey,this.R=new Ct,this.St.Ma(zn.xo),this.X_=e.hx("polarChart series bg",0),this.EC=e._p("polarChart axis gridlines",0),this.RC=e._p("polarChart series",1),this.zC=e._p("polarChart axis lines",2),this.OC=e._p("polarChart axis ticks",3),this.rS=i.d2({scaleXYConstructor:dr}),this.addEventListener("resize",this.LC),this.Uh.jr("Polar Chart"),this.uy=this.X_.Pd(this.rS).Je(this.Ct.polarChartSeriesBackgroundFillStyle).Qe(Ot).lu(0).dh(360).fu(0),this.Ay=this.X_.Pd(this.rS).Je(V).Qe(this.Ct.polarChartSeriesBackgroundStrokeStyle).lu(0).dh(360).fu(0),super.ly(this.uy,this.Ay),this.ag(r,this.oA),this.VC=new Cc(this,this.rS,this.Ct,!1!==(null==n?void 0:n.animationsEnabled),this.EC,this.zC,this.OC,this.vs,this.DC),this.NC=new Tc(this,this.rS,this.Ct,!1!==(null==n?void 0:n.animationsEnabled),this.EC,this.zC,this.OC,this.vs),this.coordsAxis={axisAmplitude:this.VC,axisRadial:this.NC};const h=e.kp(),a=ee(n?n.cursorBuilder:void 0,sl);this.Tp=Ua(this,h,a.jg(h,this.uiScale,this.uiScale,qt,this.Ct),this,"show-nearest",Rd,((t,e)=>{const i=this.translateCoordinate(t,this.coordsClient);return Math.sqrt((i.clientX-e.clientX)**2+(i.clientY-e.clientY)**2)})),this.setAnimationsEnabled(!1!==(null==n?void 0:n.animationsEnabled))}getSeries(){return this.ey}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}solveNearest(t,e=this.getCursorMode()||"show-nearest"){return this.Tp.solveNearest(t,e,this.ey,((t,e,i)=>t.solveNearest(e,i)))}addCursor(t=sl){const e=this.JA(),i=t.jg(e,this.uiScale,this.uiScale,this.XA(e),this.Ct);return this.rg(i),i}translateCoordinate(t,e,i){if(i){const e=t,s=this.oA,r=i;if(cs(r)){const t=ot(e,s,this.St.ct);return this.St.ja({engineX:t.x,engineY:t.y})}if(ds(r))return e;if(Bc(r)){const t=ot(e,s,this.rS);return Oc(t,this.rS)}}else{const i=t,s=e;if(us(i)){if(Bc(s)){const t=this.St.Wa(i),e=ot({x:t.engineX,y:t.engineY},this.St.ct,this.rS);return Oc(e,this.rS)}if(cs(s))return i;if(ds(s)){const t=this.St.Wa(i);return ot({x:t.engineX,y:t.engineY},this.St.ct,this.oA)}}else if(kc(i)){if(Bc(s))return i;const t=Rc([i],this.rS)[0];if(cs(s)){const e=ot(t,this.rS,this.St.ct),i={engineX:e.x,engineY:e.y};return this.St.ja(i)}if(ds(s))return ot(t,this.rS,this.oA)}}throw new Error("translateCoordinate unexpected error. Input or target coordinate system not recognized.")}addLineSeries(t){const e=new _c(this.RC,this,this.ny,this.rS,this.Ct,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,this.St.vs);return this.gy(e),e}addPointSeries(t){const e=new Cd(this.RC,this,this.ny,this.rS,this.Ct,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,this.St.vs);return this.gy(e),e}addPointLineSeries(t){const e=new zc(this.RC,this,this.ny,this.rS,this.Ct,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,this.St.vs);return this.gy(e),e}addAreaSeries(t){const e=new wd(this.RC,this,this.ny,this.rS,this.Ct,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,this.St.vs);return this.gy(e),e}addPolygonSeries(t){const e=new Td(this.RC,this,this.ny,this.rS,this.Ct,void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,this.St.vs);return this.gy(e),e}addHeatmapSeries(t){const e=new Vc(this.RC,this,this.ny,this.rS,this.Ct,this.St.vs,t);return this.gy(e),e}addSector(){const t=new Lc(this.RC,this,this.$f,this.rS,this.Ct,this.St.vs);return this.BC(t),t}getAmplitudeAxis(){return this.VC}get amplitudeAxis(){return this.VC}get axisAmplitude(){return this.VC}getRadialAxis(){return this.NC}get radialAxis(){return this.NC}get axisRadial(){return this.NC}qe(t){super.qe(t),La.yg(this.Uh,this.cg);for(const t of this.ey)t.$v();this.VC.cn(),this.NC.cn();for(const t of this.ey)t.qe();const e=this.rS.getInnerIntervalPixels().x/2,i=this.VC.Dr({physicalAxisSize:e}),s=this.NC.Dr({physicalAxisSize:2*Math.PI*e});this.VC.qe(i),this.NC.qe(s);const r=La.vg(this.Uh,this.cg),n=[this.Dn.left+s.bA,this.Dn.right+s.bA],o=[this.Dn.bottom+s.bA,this.Dn.top+s.bA+r];this.rS.Ki(n).qi(o);const h=this.rS.oe().start,a=this.rS.oe().end,l=this.rS.ae()?(s.bA||0)*this.rS.x.getPixelSize()+a-h:(s.bA||0)*this.rS.x.getPixelSize()+h-a;this.uy.cu(l).Au(360),this.Ay.cu(l).Au(360);for(const t of this.Of)t.qe();this.Tp.qe(!1,this.ey,((t,e,i)=>t.solveNearest(e,i)));for(const t of this.ey)t.tv();return super.og(),this.GC(),this}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.VC.setAnimationsEnabled(t),this.NC.setAnimationsEnabled(t),this}getMinimumSize(){return l(kd,kd)}GC(){}forEachAxis(t){return t(this.VC),t(this.NC),this}dispose(){return this.Of.slice().forEach((t=>t.dispose())),this.Tp.U(),this.X_.U(),this.EC.U(),this.RC.U(),this.zC.U(),this.OC.U(),super.dispose()}kf(){return[...this.ey,...this.Of]}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const kd=300,Rd=(t,e,i)=>{var s;return ct(e)?Pa(e,[[{component:e.series,componentColor:Va(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:e.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ms(t.getAmplitudeAxis().formatValue(e.amplitude),t.amplitudeAxis),font:{weight:"bold"}}],["Intensity","",{text:ms(e.intensity.toFixed(2),null===(s=e.lut)||void 0===s?void 0:s.units),font:{weight:"bold"}}]]):Pa(e,[[{component:e.series,componentColor:Va(e),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],["Angle","",{text:e.angle.toFixed(0),font:{weight:"bold"}}],["Amplitude","",{text:ms(t.getAmplitudeAxis().formatValue(e.amplitude),t.amplitudeAxis),font:{weight:"bold"}}]])};class Fd extends ll{}class Id extends Fd{constructor(t,e,i,s,r,n,o,h){super(s,n,o,h),this.Rs="Slice",this.M=0,this.Zg=!1,this.UC=V,this.Jg=V,this.Kg=this.M,this.ip=wt((()=>this.chart.St.Bs())),this.ep=()=>{this.hp=void 0},this.R=new Ct,this.index=t,this.chart=s,this.scale=r,this.As=n,this.kS=e.Ru(r,Eo.Simple).Dt(this.getHighlight()),this._s(this.kS),this.Lr=i.mn(r).Dt(this.getHighlight()),this._s(this.Lr,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.ap(this.Kg,t):this.Kg=t,this.M=t,this.chart.St.Bs(),this}getValue(){return this.M}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.Kg)>0?(this.hp&&(this.hp.finish(!1),this.hp=void 0),this.ap(this.Kg,0,(()=>super.setVisible(!1)))):(this.Kg=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.hp&&(this.hp.finish(!1),this.hp=void 0),super.setVisible(!0),this.ap(this.Kg,this.M)):(this.Kg=this.M,super.setVisible(!0)),this}ap(t,e,i){this.hp=this.ip(300,Tt.ease)([[t,e]],(([t])=>{this.Kg=t,this.chart.St.Bs()})),this.hp.addEventListener("everyAnimationEnd",this.ep),i&&this.hp.addEventListener("end",i)}setStyle(t,e,i,s,r){this.UC=t,this.Jg=i,this.kS.Je(this.UC).Qe(e),this.Lr.Je(this.Jg).Sr(s).Wr(r);for(let t=0;t<this.fs.length;t+=1)this.styleLegendEntry(this.fs[t])}getAnimatedValue(){return this.Kg}ih(t,e){return t.Dt(e),this.chart.St.Bs(),this}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.UC,stroke:this.kS.Ua()})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}var Od;e.FunnelSliceModes=void 0,(Od=e.FunnelSliceModes||(e.FunnelSliceModes={}))[Od.VariableHeight=0]="VariableHeight",Od[Od.VariableWidth=1]="VariableWidth";const Ld=(t,e)=>{let i=100;return t<=0?t=0:(i=t>=100?100:t,t=e*(i/100)),t},Dd=(t,i,s,r,n,o=0,h=e.FunnelSliceModes.VariableHeight,a)=>{i=Ld(i,r.x),s=Ld(s,r.x);const l=t.length;let c=0,u=0;c=t.reduce(((t,e)=>t+Math.abs(e.getAnimatedValue())),0);let d={x:a-i/2,y:r.y+n.bottom},f={x:a+i/2,y:r.y+n.bottom},g={x:0,y:n.bottom},y={x:0,y:n.bottom},p=0,m=0;if(o)for(let i=0;i<t.length;i+=1){const s=t[i],a=10;m+=Math.abs(s.getAnimatedValue());const u=h===e.FunnelSliceModes.VariableWidth?(r.y-o*l)/l:r.y+n.bottom-m/c*r.y;if(h===e.FunnelSliceModes.VariableWidth){o=u-o<a?Math.max(20,u-a):o;break}0!==p&&p-u-o<a&&(o=Math.max(0,p-u-a)),p=u}const x=(i-s)/2/r.y;for(let p=0;p<l;p+=1){const m=t[p];u+=Math.abs(m.getAnimatedValue());const S=h===e.FunnelSliceModes.VariableWidth?(r.y-o*l)/l:r.y+n.bottom-u/c*r.y;let v=0;p>0&&(d={x:g.x+x*o,y:g.y-o},f={x:y.x-x*o,y:y.y-o}),v=(i+u/c*(s-i))/2,g={x:a-v,y:parseInt(`${h===e.FunnelSliceModes.VariableWidth?d.y-S:S}`,10)},y={x:a+v,y:parseInt(`${h===e.FunnelSliceModes.VariableWidth?f.y-S:S}`,10)},f.x>=d.x&&y.x>g.x&&m.kS.wc([g,d,f,y])}};class Pd extends Oa{constructor(t,i,s,r,n,o,h){super(t,i,s,i.lg("funnelChart bg",0),r,i.St.Ct.funnelChartBackgroundFillStyle,i.St.Ct.funnelChartBackgroundStrokeStyle,i.St.Ct.funnelChartTitleFont,i.St.Ct.funnelChartTitleFillStyle,i.St.Ct.funnelChartTitleShadow,o),this.lp=[],this.cp=hl.None,this.fp=!0,this.pp=this.Ct.funnelChartSliceLabelShadow,this.vp=0,this.$C=80,this.YC=20,this.HC=0,this.XC=e.FunnelSliceModes.VariableHeight,this.xp=!0,this.bp=t=>{const e=this.lp.indexOf(t);e>=0&&(this.lp.splice(e,1),this.Mp())},this.R=new Ct,this.St.Ma(zn.vo),this.Sp=this.Ct.effectsText,this.wp=i._p("funnelChart bottom",0),this.Cp=i._p("funnelChart top",1),this.Uh.jr("Funnel Chart"),this.up=this.Ct.funnelChartSliceFillStylePalette,this.dp=this.Ct.funnelChartSliceStrokeStyle,this.Ap=this.Ct.funnelChartSliceLabelFont,this.gp=this.Ct.funnelChartSliceLabelFillStyle;const a=i.kp(),l=ee(h?h.cursorBuilder:void 0,el);this.Tp=Ua(this,a,l.jg(a,this.uiScale,this.uiScale,qt,this.Ct),void 0,"show-pointed",Vd,(()=>0)),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled)),this.ag(n,this.oA)}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}addCursor(t=el){const e=this.JA(),i=t.jg(e,this.uiScale,this.uiScale,this.XA(e),this.Ct);return this.rg(i),i}addSlice(t,e){const i=new Id(this.vp,this.wp,this.Cp,this,this.oA,this.bp,this.Ct,this.St.vs);return this.vp+=1,i.setName(t),i.setValue(e),i.vs.xs.Ls(this.Sp),i.vs.Ss.Ls(this.xp),this.lp.push(i),this.St.Bs(),i.setHighlightOnHover(this.fp),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.lp}setHeadWidth(t){return this.$C=t,this.St.Bs(),this}getHeadWidth(){return this.$C}setNeckWidth(t){return this.YC=t,this.St.Bs(),this}getNeckWidth(){return this.YC}setSliceGap(t){return this.HC=Math.min(Math.max(t,0),20),this.St.Bs(),this}setSliceMode(t){return this.XC=t,this.St.Bs(),this}getFunnelSliceMode(){return this.XC}setLUT(t){return this.mf=t,this.St.Bs(),this}setSliceFillStyle(t){return this.up=t,this.St.Bs(),this}getSliceFillStyle(){return this.up}setSliceStrokeStyle(t){return this.dp="function"==typeof t?t(this.dp):t,this.St.Bs(),this}getSliceStrokeStyle(){return this.dp}setSliceEffect(t){return this.xp=t,this.lp.forEach((e=>e.vs.Ss.Ls(t))),this.St.Bs(),this}getSliceEffect(){return this.xp}setSliceSorter(t){return this.cp=t,this.lp=this.lp.sort(this.cp),this.St.Bs(),this}getSliceSorter(){return this.cp}setLabelFillStyle(t){return this.gp="function"==typeof t?t(this.gp):t,this.St.Bs(),this}getLabelFillStyle(){return this.gp}setLabelShadow(t){return this.pp=t,this.St.Bs(),this}getLabelShadow(){return this.pp}setLabelFont(t){return this.Ap="function"==typeof t?t(this.Ap):t,this.St.Bs(),this}getLabelFont(){return this.Ap}setLabelEffect(t){return this.Sp=t,this.lp.forEach((e=>e.vs.xs.Ls(t))),this.St.Bs(),this}getLabelEffect(){return this.Sp}setLabelFormatter(t){return this.Ip=t,this.St.Bs(),this}getLabelFormatter(){return this.Ip}setSliceHighlightOnHover(t){return this.fp=t,this.lp.forEach((e=>e.setHighlightOnHover(t))),this}qe(t){super.qe(t),La.yg(this.Uh,this.cg),super.og();const e=La.vg(this.Uh,this.cg),i=l(this.oA.x.getInnerInterval()-(this.Dn.left+this.Dn.right),this.oA.y.getInnerInterval()-(this.Dn.bottom+this.Dn.top+e)),s=l(this.Dn.left+i.x/2,this.Dn.bottom+i.y/2);this.lp=this.lp.sort(this.cp);for(let t=0,{length:e}=this.lp;t<e;t+=1)this.Fp(this.lp[t],t);const r=this.lp.filter((t=>Math.abs(t.getAnimatedValue())>0));let n=0;for(let t=0;t<r.length;t+=1)n+=Math.abs(r[t].getAnimatedValue());const o=[];for(let t=0;t<r.length;t+=1)o.push((h=Math.abs(r[t].getAnimatedValue()))>0?h/n:0);var h;for(let t=0;t<r.length;t+=1){const e=r[t];e.Lr.jr(this.Ip(e,o[t])).Dr()}o.push(n),this.Tp.qe(!1,this.lp,((t,e,i)=>{const s=o[r.indexOf(t)]||0,n=this.St.Wa(e);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.St.ct,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.St.ct},slice:t,category:t.getName(),value:t.getValue(),relativeValue:s}})),this.Pp(r,o,s,i)}Fp(t,e){t.setStyle(this.mf?new N({color:this.mf.getColors(t.getAnimatedValue(),void 0)}):this.up(e,t),this.dp,this.gp,this.Ap,this.pp)}Mp(){this.lp=this.lp.sort(this.cp),this.St.Bs()}kf(){return this.lp}dispose(){return this.lp.slice().forEach((t=>t.dispose())),this.Tp.U(),this.wp.U(),this.Cp.U(),super.dispose()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const Vd=(t,e,i)=>[[{component:e.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:e.value.toString(),font:{weight:"bold"}}]],_d=(t,i,s)=>{const r=t._c();if(r.length>0){let t;const n=(r[1].y-r[0].y)/2+r[0].y;return t=i===e.FunnelLabelSide.Left?(r[0].x-r[1].x)/2+r[1].x-s:(r[2].x-(4===r.length?r[3].x:r[1].x))/2+(4===r.length?r[3].x:r[1].x)+s,{x:t,y:n}}},zd=t=>{const e=t._c();if(e.length>0)return{x:(e[2].x-e[1].x)/2+e[1].x,y:(e[1].y-e[0].y)/2+e[0].y}};class Ud extends Pd{constructor(){super(...arguments),this.Ip=al.NamePlusValue,this.WC=10,this.jC=e.FunnelLabelSide.Left,this.ZC=e.SliceLabelIndices.LabelsOnSides,this.Lp=[],this.Rp=this.Ct.funnelChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Rp=t;for(let t=0;t<this.Lp.length;t+=1)this.Lp[t].ah(this.Rp);return this.St.Bs(),this}getLabelConnectorStyle(){return this.Rp}setLabelConnectorGap(t){return this.WC=t,this.St.Bs(),this}getLabelConnectorGap(){return this.WC}setLabelSide(t){return this.jC=t,this.St.Bs(),this}getLabelSide(){return this.jC}Pp(t,i,s,r){const n=r.x+this.Dn.left+this.Dn.right,o=r.y+this.Dn.top+this.Dn.bottom<250||n<250,h=this.WC;let a,c=0;if(!o)for(let e=0;e<t.length;e+=1)c=Math.max(c,t[e].Lr.Mi().x);a=o?n/2:this.jC===e.FunnelLabelSide.Right?(this.Dn.left+(n-(this.Dn.right+c)))/2:(this.Dn.left+c+(n-this.Dn.right))/2;const u=r.x-c,d=l(u,r.y);if(Dd(t,this.$C,this.YC,d,this.Dn,this.HC,this.XC,a),o)return t.forEach((t=>t.Lr.setVisible(!1))),void this.Lp.forEach((t=>t.setVisible(!1)));this.QC(t,this.jC===e.FunnelLabelSide.Left?-1:1,-1,s,r);for(let t=0;t<this.Lp.length;t+=1)this.Lp[t].setVisible(!1);for(let e=0;e<t.length;e+=1)t[e].getVisible()&&this.zp(this.JC(t[e],-1,s,h))}getMinimumSize(){return l(500,300)}QC(t,e,i,s,r){if(0===t.length)return;const n=s.x+e*r.x*.5,o=1===i?Math.max:Math.min;let h;for(let s=0;s<t.length;s+=1){const r=t[s];if(0===r.kS._c().length)r.Lr.setVisible(!1);else{let t;r.Lr.setVisible(!0),h&&(t=h.Lr.Ll().y+i*(h.Lr.Mi().y+10));const s=(_d(r.kS,this.jC,0)||l(0,0)).y,a=void 0===t?s:o(s,t);r.Lr.th(l(n,a)).zl(e).Nl(0),h=r}}}JC(t,i,s,r){const n=t.kS,o=t.Lr,h=_d(n,this.jC,r);if(h){const t={x:Ui(this.jC===e.FunnelLabelSide.Left?o.Ll().x-i*(r+o.Mi().x):o.Ll().x+i*(r+o.Mi().x),h,s).x,y:Ni(o.Ll().y,h,s).y};return[h,t,l(this.jC===e.FunnelLabelSide.Left?o.Ll().x-i*(r+o.Mi().x):o.Ll().x+i*(r+o.Mi().x),t.y)]}}zp(t){if(t){let e;for(let t=0;t<this.Lp.length;t+=1)if(!this.Lp[t].getVisible()){e=this.Lp[t].setVisible(!0);break}void 0===e&&(e=this.Cp.Op(this.oA,void 0,[pl.InternalUI]).ah(this.Rp),this.Lp.push(e)),e.ii().dc(t)}}}class Nd extends Pd{constructor(){super(...arguments),this.Ip=al.Name,this.ZC=e.SliceLabelIndices.LabelsInsideSlices}Pp(t,e,i,s){const r=this.Dn.left+s.x/2;Dd(t,this.$C,this.YC,s,this.Dn,this.HC,this.XC,r);for(let e=0;e<t.length;e+=1){const i=t[e],s=i.kS,r=i.Lr,n=zd(s);n&&r.th(n).zl(0).Nl(0)}}getMinimumSize(){return l(200,200)}}const Xd={LabelsOnSides:Ud,LabelsInsideSlices:Nd};var Hd,Gd;e.FunnelLabelSide=void 0,(Hd=e.FunnelLabelSide||(e.FunnelLabelSide={}))[Hd.Right=0]="Right",Hd[Hd.Left=1]="Left";class Yd extends ll{}class Wd extends Yd{constructor(t,e,i,s,r,n,o,h){super(s,n,o,h),this.Rs="Slice",this.M=0,this.Zg=!1,this.UC=V,this.Jg=V,this.Kg=this.M,this.ip=wt((()=>this.chart.St.Bs())),this.ep=()=>{this.hp=void 0},this.R=new Ct,this.index=t,this.chart=s,this.scale=r,this.As=n,this.kS=e.Ru(r,Eo.Simple).Dt(this.getHighlight()),this._s(this.kS),this.Lr=i.mn(r).Dt(this.getHighlight()),this._s(this.Lr,{isText:!0})}setValue(t){return this.chart.getAnimationsEnabled()?this.getVisible()&&this.ap(this.Kg,t):this.Kg=t,this.M=t,this.chart.St.Bs(),this}getValue(){return this.M}setVisible(t){return!1===t?this.chart.getAnimationsEnabled()&&Math.abs(this.Kg)>0?(this.hp&&(this.hp.finish(!1),this.hp=void 0),this.ap(this.Kg,0,(()=>super.setVisible(!1)))):(this.Kg=0,super.setVisible(!1)):this.chart.getAnimationsEnabled()?(this.hp&&(this.hp.finish(!1),this.hp=void 0),super.setVisible(!0),this.ap(this.Kg,this.M)):(this.Kg=this.M,super.setVisible(!0)),this}ap(t,e,i){this.hp=this.ip(300,Tt.ease)([[t,e]],(([t])=>{this.Kg=t,this.chart.St.Bs()})),this.hp.addEventListener("everyAnimationEnd",this.ep),i&&this.hp.addEventListener("end",i)}setStyle(t,e,i,s,r){this.UC=t,this.Jg=i,this.kS.Je(this.UC).Qe(e),this.Lr.Je(this.Jg).Sr(s).Wr(r);for(let t=0;t<this.fs.length;t+=1)this.styleLegendEntry(this.fs[t])}getAnimatedValue(){return this.Kg}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.UC,stroke:this.kS.Ua()})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}e.PyramidSliceModes=void 0,(Gd=e.PyramidSliceModes||(e.PyramidSliceModes={}))[Gd.VariableHeight=0]="VariableHeight",Gd[Gd.VariableWidth=1]="VariableWidth";const jd=(t,e)=>{let i=100;return t<=0?t=0:(i=t>=100?100:t,t=e*(i/100)),t},$d=(t,i,s,r,n,o=0,h=e.PyramidSliceModes.VariableHeight,a)=>{i=jd(i,r.x),s=jd(s,r.x);const l=t.length;let c=0,u=0;c=t.reduce(((t,e)=>t+Math.abs(e.getAnimatedValue())),0);let d={x:a-i/2,y:r.y+n.bottom},f={x:a+i/2,y:r.y+n.bottom},g={x:0,y:n.bottom},y={x:0,y:n.bottom},p=0,m=0;if(o)for(let i=0;i<t.length;i+=1){const s=10;m+=Math.abs(t[i].getAnimatedValue());const a=h===e.PyramidSliceModes.VariableWidth?(r.y-o*l)/l:r.y+n.bottom-m/c*r.y;if(h===e.PyramidSliceModes.VariableWidth){o=a-o<s?Math.max(20,a-s):o;break}0!==p&&p-a-o<s&&(o=Math.max(0,p-a-s)),p=a}const x=(i-s)/2/r.y;for(let p=0;p<l;p+=1){const m=t[p];u+=Math.abs(m.getAnimatedValue());const S=h===e.PyramidSliceModes.VariableWidth?(r.y-o*l)/l:r.y+n.bottom-u/c*r.y;let v=0;p>0&&(d={x:g.x+x*o,y:g.y-o},f={x:y.x-x*o,y:y.y-o}),v=(i+u/c*(s-i))/2,g={x:a-v,y:parseInt(`${h===e.PyramidSliceModes.VariableWidth?d.y-S:S}`,10)},y={x:a+v,y:parseInt(`${h===e.PyramidSliceModes.VariableWidth?f.y-S:S}`,10)},f.x>=d.x&&y.x>=g.x&&m.kS.wc([g,d,f,y])}};class Qd extends Oa{constructor(t,i,s,r,n,o,h){super(t,i,s,i.lg("pyramidChart bg",0),r,i.St.Ct.pyramidChartBackgroundFillStyle,i.St.Ct.pyramidChartBackgroundStrokeStyle,i.St.Ct.pyramidChartTitleFont,i.St.Ct.pyramidChartTitleFillStyle,i.St.Ct.pyramidChartTitleShadow,o),this.lp=[],this.cp=hl.None,this.up=this.Ct.pyramidChartSliceFillStylePalette,this.dp=this.Ct.pyramidChartSliceStrokeStyle,this.fp=!0,this.Ap=this.Ct.pyramidChartSliceLabelFont,this.gp=this.Ct.pyramidChartSliceLabelFillStyle,this.pp=this.Ct.pyramidChartSliceLabelShadow,this.vp=0,this.$C=0,this.YC=80,this.HC=0,this.XC=e.PyramidSliceModes.VariableHeight,this.xp=!0,this.bp=t=>{const e=this.lp.indexOf(t);e>=0&&(this.lp.splice(e,1),this.Mp())},this.R=new Ct,this.St.Ma(zn.vo),this.Sp=this.Ct.effectsText,this.wp=i._p("pyramidChart bottom",0),this.Cp=i._p("pyramidChart top",1),this.Uh.jr("Pyramid Chart");const a=i.kp(),l=ee(h?h.cursorBuilder:void 0,el);this.Tp=Ua(this,a,l.jg(a,this.uiScale,this.uiScale,qt,this.Ct),void 0,"show-pointed",Jd,(()=>0)),this.ag(n,this.oA),this.setAnimationsEnabled(!1!==(null==h?void 0:h.animationsEnabled))}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}addCursor(t=el){const e=this.JA(),i=t.jg(e,this.uiScale,this.uiScale,this.XA(e),this.Ct);return this.rg(i),i}addSlice(t,e){const i=new Wd(this.vp,this.wp,this.Cp,this,this.oA,this.bp,this.Ct,this.St.vs);return this.vp+=1,i.setName(t),i.setValue(e),i.vs.xs.Ls(this.Sp),i.vs.Ss.Ls(this.xp),this.lp.push(i),this.St.Bs(),i}addSlices(t){const e=[];for(let i=0;i<t.length;i+=1)e.push(this.addSlice(t[i].name,t[i].value));return e}getSlices(){return this.lp}setNeckWidth(t){return this.YC=t,this.St.Bs(),this}getNeckWidth(){return this.YC}setSliceGap(t){return this.HC=Math.min(Math.max(t,0),20),this.St.Bs(),this}setSliceMode(t){return this.XC=t,this.St.Bs(),this}getPyramidSliceMode(){return this.XC}setLUT(t){return this.mf=t,this.St.Bs(),this}setSliceFillStyle(t){return this.up=t,this.St.Bs(),this}getSliceFillStyle(){return this.up}setSliceStrokeStyle(t){return this.dp="function"==typeof t?t(this.dp):t,this.St.Bs(),this}getSliceStrokeStyle(){return this.dp}setSliceEffect(t){return this.xp=t,this.lp.forEach((e=>e.vs.Ss.Ls(t))),this.St.Bs(),this}getSliceEffect(){return this.xp}setSliceSorter(t){return this.cp=t,this.lp=this.lp.sort(this.cp),this.St.Bs(),this}getSliceSorter(){return this.cp}setLabelFillStyle(t){return this.gp="function"==typeof t?t(this.gp):t,this.St.Bs(),this}getLabelFillStyle(){return this.gp}setLabelShadow(t){return this.pp=t,this.St.Bs(),this}getLabelShadow(){return this.pp}setLabelFont(t){return this.Ap="function"==typeof t?t(this.Ap):t,this.St.Bs(),this}getLabelFont(){return this.Ap}setLabelEffect(t){return this.Sp=t,this.lp.forEach((e=>e.vs.xs.Ls(t))),this.St.Bs(),this}getLabelEffect(){return this.Sp}setLabelFormatter(t){return this.Ip=t,this.St.Bs(),this}getLabelFormatter(){return this.Ip}setSliceHighlightOnHover(t){return this.fp=t,this.lp.forEach((e=>e.setHighlightOnHover(t))),this}qe(t){super.qe(t),La.yg(this.Uh,this.cg),super.og();const e=La.vg(this.Uh,this.cg),i=l(this.oA.x.getInnerInterval()-(this.Dn.left+this.Dn.right),this.oA.y.getInnerInterval()-(this.Dn.bottom+this.Dn.top+e)),s=l(this.Dn.left+i.x/2,this.Dn.bottom+i.y/2);this.lp=this.lp.sort(this.cp);for(let t=0,{length:e}=this.lp;t<e;t+=1)this.Fp(this.lp[t],t);const r=this.lp.filter((t=>Math.abs(t.getAnimatedValue())>0));let n=0;for(let t=0;t<r.length;t+=1)n+=Math.abs(r[t].getAnimatedValue());const o=[];for(let t=0;t<r.length;t+=1)o.push((h=Math.abs(r[t].getAnimatedValue()))>0?h/n:0);var h;for(let t=0;t<r.length;t+=1){const e=r[t];e.Lr.jr(this.Ip(e,o[t])).Dr()}o.push(n),this.Tp.qe(!1,this.lp,((t,e,i)=>{const s=o[r.indexOf(t)]||0,n=this.St.Wa(e);return{cursorPosition:{pointMarker:{x:n.engineX,y:n.engineY},pointMarkerScale:this.St.ct,resultTable:{x:n.engineX,y:n.engineY},resultTableScale:this.St.ct},slice:t,category:t.getName(),value:t.getValue(),relativeValue:s}})),this.Pp(r,o,s,i)}Fp(t,e){t.setStyle(this.mf?new N({color:this.mf.getColors(t.getAnimatedValue(),void 0)}):this.up(e,t),this.dp,this.gp,this.Ap,this.pp)}Mp(){this.lp=this.lp.sort(this.cp),this.St.Bs()}kf(){return this.lp}dispose(){return this.lp.slice().forEach((t=>t.dispose())),this.Tp.U(),this.wp.U(),this.Cp.U(),super.dispose()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const Jd=(t,e,i)=>[[{component:e.slice,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:e.value.toString(),font:{weight:"bold"}}]],qd=(t,i,s)=>{const r=t._c();if(r.length>0){let t;const n=(r[1].y-r[0].y)/2+r[0].y;return t=i===e.PyramidLabelSide.Left?(r[0].x-r[1].x)/2+r[1].x-s:(r[2].x-(4===r.length?r[3].x:r[1].x))/2+(4===r.length?r[3].x:r[1].x)+s,{x:t,y:n}}},Zd=t=>{const e=t._c();if(e.length>0)return{x:(e[2].x-e[1].x)/2+e[1].x,y:(e[1].y-e[0].y)/2+e[0].y}};class Kd extends Qd{constructor(){super(...arguments),this.Ip=al.NamePlusValue,this.WC=10,this.jC=e.PyramidLabelSide.Left,this.ZC=e.SliceLabelIndices.LabelsOnSides,this.Lp=[],this.Rp=this.Ct.pyramidChartConnectorStrokeStyle}setLabelConnectorStyle(t){this.Rp=t;for(let t=0;t<this.Lp.length;t+=1)this.Lp[t].ah(this.Rp);return this.St.Bs(),this}getLabelConnectorStyle(){return this.Rp}setLabelConnectorGap(t){return this.WC=t,this.St.Bs(),this}getLabelConnectorGap(){return this.WC}setLabelSide(t){return this.jC=t,this.St.Bs(),this}getLabelSide(){return this.jC}Pp(t,i,s,r){const n=r.x+this.Dn.left+this.Dn.right,o=r.y+this.Dn.top+this.Dn.bottom<250||n<250,h=this.WC;let a,c=0;if(!o)for(let e=0;e<t.length;e+=1)c=Math.max(c,t[e].Lr.Mi().x);a=o?n/2:this.jC===e.PyramidLabelSide.Right?(this.Dn.left+(n-(this.Dn.right+c)))/2:(this.Dn.left+c+(n-this.Dn.right))/2;const u=r.x-c,d=l(u,r.y);if($d(t,this.$C,this.YC,d,this.Dn,this.HC,this.XC,a),o)return t.forEach((t=>t.Lr.setVisible(!1))),void this.Lp.forEach((t=>t.setVisible(!1)));this.QC(t,this.jC===e.PyramidLabelSide.Left?-1:1,-1,s,r);for(let t=0;t<this.Lp.length;t+=1)this.Lp[t].setVisible(!1);for(let e=0;e<t.length;e+=1)if(t[e].getVisible()){const i=this.JC(t[e],-1,s,h);i&&this.zp(i)}}getMinimumSize(){return l(500,300)}QC(t,e,i,s,r){if(0===t.length)return;const n=s.x+e*r.x*.5,o=1===i?Math.max:Math.min;let h;for(let s=0;s<t.length;s+=1){const r=t[s];let a;0===r.kS._c().length?r.Lr.setVisible(!1):r.Lr.setVisible(!0),h&&(a=h.Lr.Ll().y+i*(h.Lr.Mi().y+10));const c=qd(r.kS,this.jC,0);if(c){const t=c.y,i=void 0===a?t:o(t,a);r.Lr.th(l(n,i)).zl(e).Nl(0)}h=r}}JC(t,i,s,r){const n=t.kS,o=t.Lr,h=qd(n,this.jC,r);if(h){const t={x:Ui(this.jC===e.PyramidLabelSide.Left?o.Ll().x-i*(r+o.Mi().x):o.Ll().x+i*(r+o.Mi().x),h,s).x,y:Ni(o.Ll().y,h,s).y};return[h,t,l(this.jC===e.PyramidLabelSide.Left?o.Ll().x-i*(r+o.Mi().x):o.Ll().x+i*(r+o.Mi().x),t.y)]}}zp(t){let e;for(let t=0;t<this.Lp.length;t+=1)if(!this.Lp[t].getVisible()){e=this.Lp[t].setVisible(!0);break}void 0===e&&(e=this.Cp.Op(this.oA,void 0,[pl.InternalUI]).ah(this.Rp),this.Lp.push(e)),e.ii().dc(t)}}class tf extends Qd{constructor(){super(...arguments),this.Ip=al.Name,this.ZC=e.SliceLabelIndices.LabelsInsideSlices}Pp(t,e,i,s){const r=this.Dn.left+s.x/2;$d(t,this.$C,this.YC,s,this.Dn,this.HC,this.XC,r);for(let e=0;e<t.length;e+=1){const i=t[e].kS,s=t[e].Lr,r=Zd(i);r&&s.th(r).zl(0).Nl(0)}}getMinimumSize(){return l(200,200)}}const ef={LabelsOnSides:Kd,LabelsInsideSlices:tf};var sf;e.PyramidLabelSide=void 0,(sf=e.PyramidLabelSide||(e.PyramidLabelSide={}))[sf.Right=0]="Right",sf[sf.Left=1]="Left";const rf=(t,e,i,s,r,n)=>(t.alignmentX=(r+Math.PI/2)%(2*Math.PI)<=Math.PI?-1:1,t.alignmentY=r%(2*Math.PI)<=Math.PI?-1:1,t.paddingX=Math.cos(r)*n,t.paddingY=Math.sin(r)*n,t),nf=t=>{if(0===t.axisIndex)return t.paddingX=t.labelPadding,t.alignmentX=-1,t;let e=!1;const i=t.chart.getAxes();if(i.length>1){const t=i[0].getInterval();e=i.some((e=>{const i=e.getInterval();return i.start!==t.start||i.end!==t.end}))}return e?(t.paddingX=t.labelPadding,t.alignmentX=-1,t):void 0};var of;e.SpiderWebMode=void 0,(of=e.SpiderWebMode||(e.SpiderWebMode={}))[of.Normal=0]="Normal",of[of.Circle=1]="Circle";class hf{constructor(t,e,i,s,r,n,o,h,a){this.Dh=!1,this.KC=ln.fitting({start:!1}),this.qC=t=>this.axisScale.ji(t,is.Numeric),this.formatValue=t=>this.qC(t,{start:this.axisScale.$,end:this.axisScale.Y}),this.tk=t,this.Sn=e,this.scale=i,this.chart=s,this.tag=r,this.axisScale=rt.d1({scale1DConstructor:rs,dimension:"x"}).j(0,1),this.ik=n,this.KC=h,a&&(this.qC=a),o&&this.setInterval(o),this.sk=this.tk.uh(this.scale).setPointerEvents(!1),this.ek=this.Sn.mn(this.scale).jr(this.tag).setPointerEvents(!1),this.hk=this.tk.Op(this.scale,void 0,[pl.InternalUI]).ah(this.chart.getNibStyle()),this.ik.Cs([this.ek])}Pp(t,i,s,r,n,o,h){const a=i.length,c=i[s>0?s-1:a-1],u=i[s],d=i[s<a-1?s+1:0],f=this.chart.getNibLength();this.sk.fh(t).dh(u).ah(this.chart.getAxisStyle()),this.hk.ii().dc(o===e.SpiderWebMode.Normal?[Ai(u,c,Kt(.5*f/Ii(Di(c,u)),0,1)),u,Ai(u,d,Kt(.5*f/Ii(Di(d,u)),0,1))]:((t,e,i,s,r=2)=>{const n=s/i,o=[];for(let h=-s/2;h<=s/2;h+=r){const r=n*(h/s)+e,a=l(t.x+Math.cos(r)*i,t.y+Math.sin(r)*i);o.push(a)}return o})(t,r,n,f)),h?this.ek.setVisible(!0).th(Li(u,l(h.paddingX,h.paddingY))).zl(h.alignmentX).Nl(h.alignmentY):this.ek.setVisible(!1)}cn(t){if(this.KC&&!this.Dh){const e=this.KC.apply({axis:this,curStart:this.axisScale.getInnerStart(),curEnd:this.axisScale.getInnerEnd(),seriesDataRange:t});e&&this.axisScale.j(e.start,e.end)}}getLabelSize(){return this.ek.Sr(this.chart.getAxisLabelFont()).Je(this.chart.getAxisLabelStyle()).Dr().Mi()}dispose(){this.sk&&this.sk.dispose(),this.ek&&this.ek.dispose(),this.hk&&this.hk.dispose()}getTag(){return this.tag}setInterval(t){const{start:e,end:i,stopAxisAfter:s}=t;return void 0!==s&&(this.Dh=s),this.axisScale.j(null!=e?e:this.axisScale.getInnerStart(),null!=i?i:this.axisScale.getInnerEnd()),this.chart.St.Bs(),this}getInterval(){return{start:this.axisScale.getInnerStart(),end:this.axisScale.getInnerEnd()}}setScaleLabelFormatter(t){return this.qC=t,this.chart.St.Bs(),this}setScrollStrategy(t){return this.KC=bn(t),this.chart.St.Bs(),this}getScrollStrategy(){return this.KC}}class af extends Dc{constructor(t,i,s,r,n,o,h,a,l,c,u,d){super(t,l,c,d),this.Rs="Spider Series",this.rk=new Map,this.nk=new Map,this.us=e.HighlightModes.onHover,this.OS=8,this.yl=0,this.ak=(()=>{const t=wt((()=>{}));let e;return(i,s,r,n)=>{const o=null==n?void 0:n.onStart,h=null==n?void 0:n.onCompleted,a=(null==n?void 0:n.easing)||Tt.ease,l=(null==n?void 0:n.durationMs)||1e3;let c;if(e)if(0===e.nextAnimations.length){const t=e.NextAnimation([[i,s]],(([i])=>{e=t,r(i)}),l,a);c=t}else{i=e.nextAnimations.pop().values[0][0];const t=e.NextAnimation([[i,s]],(([i])=>{e=t,r(i)}),l,a);c=t}else c=t(l,a)([[i,s]],(([t])=>{r(t)})),e=c;c.addEventListener("end",(()=>{e=void 0})),o&&c.addEventListener("start",o),h&&c.addEventListener("end",h)}})(),this.lk={},this.ck={},this.tp=this.getVisible(),this.uk=1,this.dk=((t,e)=>{const i=wt((()=>{}));let s,r,n=1;return(o,h,a)=>{if(o===r)return;r=o;const l=(null==a?void 0:a.easing)||Tt.ease,c=(null==a?void 0:a.durationMs)||1e3;s&&(s.finish(!1),s=void 0),!1===o?h&&n&&(s=i(c,l)([[n,0]],(([e])=>{n=e,t(n)})),s.addEventListener("end",(()=>{s=void 0,e(!1)})),n=0,e(!1)):h?(e(!0),s=i(c,l)([[n,1]],(([e])=>{n=e,t(n)})),s.addEventListener("end",(()=>{s=void 0}))):(n=1,e(!0))}})((t=>{this.uk=t,this.Hs.St.Bs()}),(t=>{super.setVisible(t)})),this.fk=!1,this.R=new Ct,this.chart=t,this.Hs=i,this.VS=r,this.Ak=n,this.nx=o,this.gk=h,this.pk=a,this.scale=s,this.vk=Ve(c.spiderSeriesFillStyle,u),this.yk=Ve(c.spiderSeriesStrokeStyle,u),this.mk=Ve(c.spiderSeriesPointFillStyle,u)}xk(){return this.fk}qt(t,e){const i=this.pk(e);if(void 0!==i&&this.rk.has(i.tag)){const t=this.rk.get(i.tag),e=this.gk(i.tag,t);return{cursorPosition:{pointMarker:e,pointMarkerScale:this.scale,resultTable:e,resultTableScale:this.scale},series:this,axis:i.tag,value:t}}}Ev(){return this.Ov&&this.rk.size>0&&this.getVisible()}addPoints(...t){const e=0===this.rk.size;e||this.chart.St.Ma(zn.Fo),t=t.filter((t=>void 0!==t.axis));for(let e=0;e<t.length;e+=1){const i=t[e].axis;this.Ak(i)}if(this.chart.getAnimationsEnabled()&&void 0!==this.lk){let i;t.forEach((t=>this.nk.set(t.axis,t.value))),this.ak(0,1,(t=>{this.nk.forEach(((e,s)=>{const r=(null==i?void 0:i.get(s))||0;this.rk.set(s,r+t*(e-r)),this.Hs.St.Bs()}))}),{easing:this.lk.easing,durationMs:this.lk.durationMs,onStart:()=>{this.fk=e,i=new Map(this.rk)},onCompleted:()=>{this.fk=!1}})}else for(let e=0;e<t.length;e+=1){const i=t[e].axis;this.rk.set(i,t[e].value),this.nk.set(i,t[e].value)}return this.Hs.Bs(),this}getValue(t,e=!1){if(this.chart.getAxis(t))return e?this.rk.get(t):this.nk.get(t)}setAnimationAddPoints(t,e){return this.lk=t?{easing:t,durationMs:e}:void 0,this.Hs.Bs(),this}setVisibleStateChangedAnimation(t,e){return this.ck=t?{easing:t,durationMs:e}:void 0,this.Hs.Bs(),this}setFillStyle(t){return this.vk="function"==typeof t?t(this.vk):t,this.kS&&(this.kS.Je(this.vk),this.Hs.Bs()),this}getFillStyle(){return this.vk}setStrokeStyle(t){return this.yk="function"==typeof t?t(this.yk):t,this.kS&&(this.kS.Qe(this.yk),this.Hs.Bs()),this}getStrokeStyle(){return this.yk}setPointFillStyle(t){return this.mk="function"==typeof t?t(this.mk):t,this.NS&&(this.NS.Je(this.mk),this.Hs.Bs()),this}getPointFillStyle(){return this.mk}setPointSize(t){return this.OS=t,this.NS&&this.NS.J(t),this}getPointSize(){return this.OS}getPointShape(){return this.VS}setPointRotation(t){return this.yl=t,this.NS&&this.NS.br(t),this.Hs.Bs(),this}getPointRotation(){return this.yl}qe(){if(super.qe(),!this.ft){const t=new Array(this.nx.length);for(let e=0;e<this.nx.length;e+=1){const i=this.nx[e].getInterval().start,s=this.rk.get(this.nx[e].tag);t[e]=void 0!==s?this.gk(this.nx[e].tag,i+this.uk*(s-i)):this.gk(this.nx[e].tag,i)}Me(t),t.length>=3&&(this.kS||(this.kS=this.Hs.Ru(this.scale,Eo.Simple).Qe(this.yk).Je(this.vk).Dt(this.getHighlight()),this._s(this.kS)),this.kS.wc(t),this.NS||(this.NS=this.Hs.sy(this.scale).J(this.OS).oc(this.VS).br(this.yl).Je(this.mk).Dt(this.getHighlight()),this._s(this.NS)),this.NS.ii().dc(t))}}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.vk,stroke:this.yk})}$s(){return this.Es||this.VS}Sk(){for(let t=0;t<this.fs.length;t+=1)Oe(this.fs[t],this.Ct,!1,{fill:this.vk,stroke:this.yk})}ih(t,e){return t.Dt(e),this.Hs.Bs(),this}setVisible(t){var e,i;return this.tp=t,this.dk(t,this.chart.getAnimationsEnabled()&&void 0!==this.ck,{easing:null===(e=this.ck)||void 0===e?void 0:e.easing,durationMs:null===(i=this.ck)||void 0===i?void 0:i.durationMs}),this}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const lf=(t,e)=>{const i=Math.PI/2-2*t*Math.PI/e;return i>=0?i:i+2*Math.PI},cf=t=>t.ek.Tu(),uf=t=>t.Tu(),df=(t,i,s,r)=>t.fu(0).th(s).lu(90).dh(-270).Au(i===e.SpiderWebMode.Circle?void 0:r.length),ff={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},gf={alignmentX:0,alignmentY:0,paddingX:0,paddingY:0},yf=()=>{gf.alignmentX=0,gf.alignmentY=0,gf.paddingX=0,gf.paddingY=0};class pf extends Nl{constructor(t,i,s,r,n,o,h){super(t,i,s,i.lg("spiderChart bg",0),r,i.St.Ct.spiderChartBackgroundFillStyle,i.St.Ct.spiderChartBackgroundStrokeStyle,i.St.Ct.spiderChartTitleFont,i.St.Ct.spiderChartTitleFillStyle,i.St.Ct.spiderChartTitleShadow,h),this.Dn=m(20,20,20,20),this.nx=[],this.bk=[],this.Mk=[],this.KC=ln.fitting({start:!1}),this.wk=!0,this._k=nf,this.Ck=rf,this.kk=e.SpiderWebMode.Normal,this.Tk=4,this.Fk=this.Ct.spiderChartWebStyle,this.Ik=this.Ct.spiderChartScaleLabelFillStyle,this.Pk=this.Ct.spiderChartScaleLabelShadow,this.Lk=this.Ct.spiderChartScaleLabelFont,this.Bk=5,this.Dk=this.Ct.spiderChartAxisLabelFillStyle,this.Ek=this.Ct.spiderChartAxisLabelFont,this.Rk=5,this.zk=this.Ct.spiderChartAxisStrokeStyle,this.Ok=this.Ct.spiderChartAxisNibStrokeStyle,this.Vk=10,this.Nk=m(),this.hasAxis=t=>this.nx.reduce(((e,i)=>e||i.tag===t),!1),this.Gk=()=>{const t=this.nx.map(cf).concat(this.Mk.map(uf));return yi(t)},this.Uk=()=>this.$k.Pd(this.oA).setPointerEvents(!1),this.Yk=t=>t.dispose(),this.Hk=()=>this.Zf.mn(this.oA).setPointerEvents(!1),this.Xk=t=>t.dispose(),this.Wk=t=>{this.wk&&!this.hasAxis(t)&&this.addAxis(t)},this.gk=(t,e)=>{for(const i of this.nx)if(i.tag===t){const t=Math.max(Math.min((e-i.axisScale.getInnerStart())/(i.axisScale.getInnerEnd()-i.axisScale.getInnerStart()),1),0);return Ai(i.sk.Xi(),i.sk.Yi(),t)}},this.pk=t=>{if(0===this.nx.length)return;const e=Di(this.translateCoordinate(t,this.coordsRelative),this.nx[0].sk.Xi()),i=Math.atan2(e.y,e.x);let s,r=hi;for(const t of this.nx){const e=Di(t.sk.Yi(),t.sk.Xi()),n=Math.atan2(e.y,e.x),o=Math.abs(i-n);o<r&&(s=t,r=o)}return s},this.R=new Ct,this.St.Ma(zn.mo),this.X_=i.hx("spiderChart series bg",0),this.$k=i._p("spiderChart web shapes",0),this.jk=i._p("spiderChart axis bg",1),this.Gx=i._p("spiderChart plotting",2),this.Zf=i._p("spiderChart fg",3),this.ik=this.vs.dA().Ls(this.Ct.effectsText),this.Uh.jr("Spider Chart"),this.uy=this.X_.Pd(this.oA).Je(this.Ct.spiderChartSeriesBackgroundFillStyle).Qe(Ot).lu(90).dh(-270).fu(0),this.Ay=this.X_.Pd(this.oA).Je(V).Qe(this.Ct.spiderChartSeriesBackgroundStrokeStyle).lu(90).dh(-270).fu(0),super.ly(this.uy,this.Ay);const a=i.kp(),l=ee(o?o.cursorBuilder:void 0,Ka);this.Tp=Ua(this,a,l.jg(a,this.uiScale,this.uiScale,qt,this.Ct),this,"show-pointed",mf,(()=>0)),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.ag(n,this.oA)}getSeries(){return this.ey}getAxes(){return this.nx}getAxis(t){const e=this.nx.find((e=>e.getTag()===t));if(!e)throw new Error(`Axis with tag "${t}" was not found.`);return e}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}addCursor(t=Ka){const e=this.JA(),i=t.jg(e,this.uiScale,this.uiScale,this.XA(e),this.Ct);return this.rg(i),i}addAxis(t){const e=this.nx.find((e=>e.tag===t));if(e)return e;const i=new hf(this.jk,this.Zf,this.oA,this,t,this.ik,this.Zk,this.KC,this.scaleLabelFormatter);return this.nx.push(i),this.ik.Cs(this.nx.map((t=>t.ek))),this.St.Bs(),i}addSeries(t){const i=void 0!==(null==t?void 0:t.pointShape)?t.pointShape:e.PointShape.Circle,s=void 0!==(null==t?void 0:t.automaticColorIndex)?t.automaticColorIndex:this.ey.length,r=new af(this,this.Gx,this.oA,i,this.Wk,this.nx,this.gk,this.pk,this.ny,this.Ct,s,this.St.vs);return this.gy(r),r}getSeriesCount(){return this.ey.length}setWebMode(t){return this.kk=t,this.St.Bs(),this}getWebMode(){return this.kk}setWebCount(t){return this.Tk=t,this.St.Bs(),this}getWebCount(){return this.Tk}setWebStyle(t){return this.Fk="function"==typeof t?t(this.Fk):t,this.St.Bs(),this}getWebStyle(){return this.Fk}setScaleLabelStyle(t){return this.Ik="function"==typeof t?t(this.Ik):t,this.St.Bs(),this}getScaleLabelStyle(){return this.Ik}setScaleLabelShadow(t){return this.Pk=t,this.St.Bs(),this}getScaleLabelShadow(){return this.Pk}setScaleLabelFont(t){return this.Lk="function"==typeof t?t(this.Lk):t,this.St.Bs(),this}getScaleLabelFont(){return this.Lk}setScaleLabelPadding(t){return this.Bk=t,this.St.Bs(),this}getScaleLabelPadding(){return this.Bk}setScaleLabelStrategy(t){return this._k=t,this.St.Bs(),this}setScaleLabelFormatter(t){return this.scaleLabelFormatter=t,this.nx.forEach((e=>{e.setScaleLabelFormatter(t)})),this.St.Bs(),this}setAxisLabelStyle(t){return this.Dk="function"==typeof t?t(this.Dk):t,this.St.Bs(),this}getAxisLabelStyle(){return this.Dk}setAxisLabelFont(t){return this.Ek="function"==typeof t?t(this.Ek):t,this.St.Bs(),this}getAxisLabelFont(){return this.Ek}setAxisLabelEffect(t){return this.ik.Ls(t),this.St.Bs(),this}getAxisLabelEffect(){return this.ik.Ds()}setAxisLabelPadding(t){return this.Rk=t,this.St.Bs(),this}getAxisLabelPadding(){return this.Rk}setAxisLabelStrategy(t){return this.Ck=t,this.St.Bs(),this}setAxisStyle(t){return this.zk="function"==typeof t?t(this.zk):t,this.St.Bs(),this}getAxisStyle(){return this.zk}setNibStyle(t){return this.Ok="function"==typeof t?t(this.Ok):t,this.St.Bs(),this}getNibStyle(){return this.Ok}setNibLength(t){return this.Vk=t,this.St.Bs(),this}getNibLength(){return this.Vk}setAutoAxis(t){return this.wk=t,this}getAutoAxis(){return this.wk}setScrollStrategy(t){return this.KC=bn(t),this.nx.forEach((e=>e.setScrollStrategy(t))),this.St.Bs(),this}setAxisInterval(t){return this.Zk=t,this.nx.forEach((e=>e.setInterval(t))),this}qe(t){super.qe(t),La.yg(this.Uh,this.cg);const e=this.nx.length,i=La.vg(this.Uh,this.cg),s=l(this.oA.x.getInnerInterval()-(this.Dn.left+this.Dn.right),this.oA.y.getInnerInterval()-(this.Dn.bottom+this.Dn.top+i)),r=((t=0,e=0,i=0,s=0)=>({left:t,top:e,right:i,bottom:s}))(0,0,0,0);if(void 0!==this.Ck){const t=Math.min(s.x,s.y)/2;for(let i=0;i<e;i+=1){const s=lf(i,e),n=Math.cos(s),o=Math.sin(s),h=this.nx[i].getLabelSize();yf();const a=this.Ck(gf,i,e,this.nx[i].tag,s,this.Rk),c=l(n*t+a.paddingX,o*t+a.paddingY);n>0?r.right=Math.max(r.right,c.x+.5*(1-a.alignmentX)*h.x-t):r.left=Math.max(r.left,-c.x+.5*(a.alignmentX+1)*h.x-t),o>0?r.top=Math.max(r.top,c.y+.5*(1-a.alignmentY)*h.y-t):r.bottom=Math.max(r.bottom,-c.y+.5*(a.alignmentY+1)*h.y-t)}}this.nx.forEach((t=>{const e=!this.getSeries().some((t=>t.xk()))&&this.getSeriesCount()>1,i=this.Qk(t.tag,e);i&&t.cn(i)}));const n=l(this.oA.x.getInnerStart()+(r.left+this.oA.x.getInnerInterval()-r.right)/2,this.oA.y.getInnerStart()+(r.bottom+this.oA.y.getInnerInterval()-r.top)/2),o=Math.min(s.x/2-(r.left+r.right)/2,s.y/2-(r.bottom+r.top)/2);this.Nk=m(this.ai.left+this.Dn.left+r.left,this.ai.top+this.Dn.top+i+r.top,this.ai.right+this.Dn.right+r.right,this.ai.bottom+this.Dn.bottom+r.bottom),this.Pp(n,o);for(const t of this.ey)t.$v();for(const t of this.ey)t.qe();this.Tp.qe(!1,this.ey,void 0),super.og();for(const t of this.ey)t.tv()}dispose(){return this.X_.U(),this.$k.U(),this.jk.U(),this.Gx.U(),this.Zf.U(),this.Tp.U(),super.dispose()}getMinimumSize(){return l(this.Nk.left+this.Nk.right+100,this.Nk.bottom+this.Nk.top+100)}Pp(t,e){const i=this.nx.length,s=[];for(let r=0;r<i;r+=1){const n=lf(r,i),o=l(t.x+Math.cos(n)*e,t.y+Math.sin(n)*e);s.push(o)}df(this.uy,this.kk,t,s),df(this.Ay,this.kk,t,s),this.uy.cu(e),this.Ay.cu(e),((t,e,i,s,r,n,o,h)=>{const a=t.length,l=n.length,c=e>0&&l>1;for(let l=0;l<Math.max(e,a);l+=1)if(c&&l<e){l>=a&&t.push(o());const h=t[l];df(h,i,s,n);const c=r*((l+1)/e);h.cu(c)}else l<t.length&&h(t[l]);t.length=c?e:0})(this.bk,this.Tk,this.kk,t,e,s,this.Uk,this.Yk);for(const t of this.bk)t.Je(V).Qe(this.Fk);for(let r=0;r<i;r+=1){const n=this.nx[r],o=lf(r,i);yf();const h=void 0!==this.Ck?this.Ck(gf,r,i,this.nx[r].tag,o,this.Rk):void 0;n.Pp(t,s,r,o,e,this.kk,h)}((t,e,i,s,r,n,o,h,a)=>{const c=r.length,u=t.length;let d=0;void 0!==e&&r.forEach(((r,a)=>{var f,g,y,p;const m=r.tag,x=lf(a,c);for(let S=0;S<i;S+=1){ff.alignmentX=0,ff.alignmentY=0,ff.paddingX=0,ff.paddingY=0;const v=e({...ff,chart:r.chart,axis:r,axisIndex:a,axisCount:c,axisTag:m,axisAngle:x,webIndex:S,webCount:i,labelPadding:s});if(void 0!==v){d>=u&&t.push(h());const e=t[d];d+=1;const s=(i-S)/i,c=r.formatValue(r.axisScale.getInnerStart()+s*(r.axisScale.getInnerEnd()-r.axisScale.getInnerStart())),m=Ai(n,o[a],s);e.th(Li(m,l(null!==(f=v.paddingX)&&void 0!==f?f:0,null!==(g=v.paddingY)&&void 0!==g?g:0))).zl(null!==(y=v.alignmentX)&&void 0!==y?y:0).Nl(null!==(p=v.alignmentY)&&void 0!==p?p:0).jr(c)}}}));for(let e=d;e<u;e+=1)a(t[e]);t.length=d})(this.Mk,this._k,this.Tk,this.Bk,this.nx,t,s,this.Hk,this.Xk);for(const t of this.Mk)t.Je(this.Ik).Sr(this.Lk).Wr(this.Pk)}Qk(t,e){let i,s;const r=this.getAxis(t);for(const t of this.ey){const n=t.getValue(r.tag,e);void 0!==n&&(i=void 0===i?n:Math.min(i,n),s=void 0===s?n:Math.max(s,n))}if(void 0!==i&&void 0!==s)return g(i,s)}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const mf=(t,e,i)=>Pa(e,[[{component:e.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[e.axis],[{text:t.getAxis(e.axis).formatValue(e.value),font:{weight:"bold"}}]]),xf=510001,Sf=(t,e)=>{const i=Math.floor(99999/e),s=Math.floor(99999/e),r=Math.floor(99998/e),n=Math.floor(99998/e),o=Math.floor(99999/(e+1)),h=Math.floor(89999/(e+1)),a=xf+e*h;let l=0;return{Jk:()=>{const e=t.Kk("dashboard ui",a+l);return l+=1,e},qk:()=>t.Kk("dashboard legend",51e4),tT:e=>{const a=1+e*i,l=100001+e*s,c=200002+e*r,u=300002+e*n,d=400001+e*o,f=xf+e*h;let g=0;return{St:t,lg:(e,i)=>{const s=a+i;return t.Kk(e,s)},hx:(e,i)=>{const s=l+i;return t.Kk(e,s)},j_:(e,i)=>{const s=c+i;return t.Kk(e,s)},_p:(e,i)=>{const s=u+i;return t.Kk(e,s)},sx:(e,i,s)=>{const r=u+i;return t.iT(e,r,s)},dg:(e,i)=>{const s=d+i;return t.Kk(e,s)},KA:e=>{const i=f+g,s=t.Kk(e,i);return g+=1,s},tg:()=>t.Kk("panel legend",500002+e),kp:()=>t.Kk("panel cursor",600001+e)}}}};class vf{constructor(t){this.R=new Ct,this.M=t}C(t){return this.M=t,this.R.O("change",{value:t}),this}T(){return this.M}V(t,e,i){this.R.addEventListener(t,e,i)}G(t,e){this.R.removeEventListener(t,e)}}const Af={Dh:!1,Eh:0,Rh:!1,Oh:0,zh:!1,Vh:0,Nh:0,Ir:ln.fitting({})},bf=t=>{if(!t||"object"!=typeof t||null===t)return!1;const e=t.type;return!(!e||!["spark-line","spark-bar","spark-win-loss","spark-area","spark-pie"].includes(e))},Cf=(t,e,i,s,r,n,o,h)=>{const{type:a,data:l}=t;if(0===l.length)return;const c=[s,r];"spark-line"===a&&If(t,e,c,n,o,h),"spark-bar"===a&&Of({...t,winLoss:!1},e,c,n,o,h),"spark-win-loss"===a&&Of({...t,winLoss:!0},e,c,n,o,h),"spark-area"===a&&Lf(t,e,c,n,o,h),"spark-pie"===a&&Df(t,e,c,n,o,h)},Mf=(t,e,i,s)=>({x:Ef(t.x,e.x,i.x,s),y:wf(t.y,e.y,i.y,s)}),Tf=(t,e,i,s)=>({position:Ef(t.position,e.x,i.x,s),high:wf(t.high,e.y,i.y,s),low:wf(t.low,e.y,i.y,s)}),Ef=(t,e,i,s)=>{const r=Kt(t,e,e+i);return s[0].x+s[1].x*(r-e)/i},wf=(t,e,i,s)=>{const r=Kt(t,e,e+i);return s[0].y+s[1].y*(r-e)/i},Bf=(t,e,i,s,r,n,o,h)=>{for(const a of t)"point"===a.type&&kf(a,e,i,r,n,o,h),"axis-band"===a.type&&Rf(a,i,r,n,o,h),"constant-line"===a.type&&Ff(a,i,s,r,n,o,h)},kf=(t,i,s,r,n,o,h)=>{const{value:a,fillStyle:l,shape:c,size:u,rotation:d}=t;let f={x:NaN,y:NaN};if("start"===a&&(f=i[0]),"end"===a&&(f=i[i.length-1]),"min"===a){f=i[0];for(const t of i)f=f.y<t.y?f:t}if("max"===a){f=i[0];for(const t of i)f=f.y>t.y?f:t}("object"!=typeof a||(f=Mf(a,s,r,n),((t,e)=>{const i=e[0],s=e[1],r=t.x,n=t.y;return i.x<=r&&r<=i.x+s.x&&i.y<=n&&n<=i.y+s.y})(f,n)))&&o.pointSet.add().ii().oc(void 0!==c?c:e.PointShape.Circle).br(d||0).J(u||5).Je(l||h.sparkPointChartFillStyle).dc(f)},Rf=(t,e,i,s,r,n)=>{const{axis:o,start:h,end:a,fillStyle:c,strokeStyle:u}=t;let d=l(ai,hi),f=l(ai,hi);"x"===o&&(d=Mf({x:h,y:ai},e,i,s),f=Mf({x:a,y:hi},e,i,s)),"y"===o&&(d=Mf({x:ai,y:h},e,i,s),f=Mf({x:hi,y:a},e,i,s));const g=s[0],y=s[1],p=Kt(d.x,g.x,g.x+y.x),m=Kt(d.y,g.y,g.y+y.y),x=Kt(f.x,g.x,g.x+y.x),S=Kt(f.y,g.y,g.y+y.y);r.rect.add().yc(p).mc(m).J(l(x-p,S-m)).Je(c||n.sparkChartBandFillStyle).Qe(u||n.sparkChartBandStrokeStyle).Qe(Ot)},Ff=(t,e,i,s,r,n,o)=>{const{axis:h,value:a,strokeStyle:c}=t,u=a||0,d=e.y,f=i.y,g=e.x,y=i.x,p=[];if("y"===h&&d<=u&&u<=f){const t=Mf(l(g,u),{x:g,y:d},s,r),e=Mf(l(y,u),{x:g,y:d},s,r);p.push([t,e])}if("x"===h&&g<=u&&u<=y){const t=Mf(l(u,d),{x:g,y:d},s,r),e=Mf(l(u,f),{x:g,y:d},s,r);p.push([t,e])}p.length>0&&n.line.add().ah(c||o.sparkChartConstantLineStrokeStyle).fh(p[0][0]).dh(p[0][1])},If=(t,e,i,s,r,n)=>{const{strokeStyle:o,data:h,markers:a}=t,l=h.length;l>1e4&&r.ka&&Wt.console.warn("LightningChart JS warning: SparkLineChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let c=hi,u=ai,d=hi,f=ai;for(let t=0;t<l;t+=1){const e=h[t];c=Math.min(c,e.x),u=Math.max(u,e.x),d=Math.min(d,e.y),f=Math.max(f,e.y)}const g={x:u-c,y:f-d},y=h.map((t=>Mf(t,{x:c,y:d},g,i)));e.lineSet.add().Dt(n).ah(o||s.sparkLineChartStrokeStyle).ii().dc(y),a&&Bf(a,y,{x:c,y:d},{x:u,y:f},g,i,e,s)},Of=(t,e,i,s,r,n)=>{const{data:o,fillStyle:h,strokeStyle:a,threshold:l,winFillStyle:c,lossFillStyle:u}=t,d=t.barSize||1,f=t.gap||1,g=t.winLoss,y=l||0,p=f/d*1;let m=hi,x=ai;if(g)m=-1,x=1;else for(const t of o)m=Math.min(m,t),x=Math.max(x,t);const S={x:0,y:g?-1:Math.min(0,m)},v={x:1*o.length+(o.length-1)*p,y:g?2:Math.max(x,1e-5)};o.map(((t,e)=>{const s={x:1*(e+1)+e*p,y:g?t>=y?1:0:t},r=Mf({x:1*e+e*p,y:g?t>=y?0:-1:0},S,v,i),n=Mf(s,S,v,i);return{value:t,position:r,width:n.x-r.x,height:n.y-r.y}})).forEach((t=>{var i;e.rect.add().Dt(n).th(t.position).Sc(t.height).xc(t.width).Je((i=t.value,g?(i>=y?c:u)||s.sparkBarChartFillStyle:h||s.sparkBarChartFillStyle)).Qe(a||s.sparkBarChartStrokeStyle)}))},Lf=(t,e,i,s,r,n)=>{const{data:o,fillStyle:h,strokeStyle:a,markers:l}=t,c=o.length;c>1e4&&r.ka&&Wt.console.warn("LightningChart JS warning: SparkAreaChart has over 10000 data points. This feature is not designed for large data sets which might show as performance drop. If you want to request improvements to this, contact https://lightningchart.com/js-charts/docs/contact. To disable this warning, use LightningChartOptions.warning property (refer to API documentation for more detail).");let d=hi,f=ai,g=hi,y=ai;for(let t=0;t<c;t+=1){const e=o[t];d=Math.min(d,e.x),f=Math.max(f,e.x),g=Math.min(g,e.y),y=Math.max(y,e.y)}const p={x:f-d,y:y-g},m=[],x=[];for(const t of o){const e=u(t.x,t.y,g);m.push(Tf(e,{x:d,y:g},p,i)),x.push(Mf(t,{x:d,y:g},p,i))}e.junction.add().Dt(n).ii().dc(m).Je(h||s.sparkAreaChartFillStyle),e.lineSet.add().Dt(n).ii().dc(x).ah(a||s.sparkAreaChartStrokeStyle),l&&Bf(l,x,{x:d,y:g},{x:f,y},p,i,e,s)},Df=(t,e,i,s,r,n)=>{const{data:o,strokeStyle:h}=t,a=o.map((t=>"number"==typeof t?t:t.value)),c=o.map((t=>"object"==typeof t?t.fillStyle:void 0)),u=a.reduce(((t,e)=>t+e),0),d=Mf(l(50,50),{x:0,y:0},{x:100,y:100},i),f=i[1],g=f.x<=f.y?f.x/2:f.y/2;let y=90;a.forEach(((t,i)=>{const r=t/u*360;e.arc.add().Dt(n).th(d).cu(g).fu(0).lu(y).dh(y+r).Je(c[i]||Ve(s.sparkPieChartFillStyle,i)).Qe(h||s.sparkPieChartStrokeStyle),y+=r}))},Pf={XY:Qu,Spider:Ka,BarChart:tl,Map:rl,Polar:sl,D3:sc},Vf={Angola:{name:"Angola",ISO_A3:"AGO"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Gabon:{name:"Gabon",ISO_A3:"GAB"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Namibia:{name:"Namibia",ISO_A3:"NAM"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Oman:{name:"Oman",ISO_A3:"OMN"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},Somalia:{name:"Somalia",ISO_A3:"SOM"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"}},_f={Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Armenia:{name:"Armenia",ISO_A3:"ARM"},Australia:{name:"Australia",ISO_A3:"AUS"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},China:{name:"China",ISO_A3:"CHN"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},India:{name:"India",ISO_A3:"IND"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Israel:{name:"Israel",ISO_A3:"ISR"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Nepal:{name:"Nepal",ISO_A3:"NPL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Philippines:{name:"Philippines",ISO_A3:"PHL"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Palestine:{name:"Palestine",ISO_A3:"PSE"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Russia:{name:"Russia",ISO_A3:"RUS"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Singapore:{name:"Singapore",ISO_A3:"SGP"},Syria:{name:"Syria",ISO_A3:"SYR"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Yemen:{name:"Yemen",ISO_A3:"YEM"}},zf={"New South Wales":{name:"New South Wales"},Victoria:{name:"Victoria"},Queensland:{name:"Queensland"},"South Australia":{name:"South Australia"},"Western Australia":{name:"Western Australia"},Tasmania:{name:"Tasmania"},"Northern Territory":{name:"Northern Territory"},"Australian Capital Territory":{name:"Australian Capital Territory"},"Other Territories":{name:"Other Territories"}},Uf={"British Columbia":{name:"British Columbia"},Quebec:{name:"Quebec"},Nunavut:{name:"Nunavut"},"Prince Edward Island":{name:"Prince Edward Island"},Saskatchewan:{name:"Saskatchewan"},Yukon:{name:"Yukon"},Manitoba:{name:"Manitoba"},Ontario:{name:"Ontario"},"New Brunswick":{name:"New Brunswick"},"Northwest Territories":{name:"Northwest Territories"},Alberta:{name:"Alberta"},"Newfoundland and Labrador":{name:"Newfoundland and Labrador"},"Nova Scotia":{name:"Nova Scotia"}},Nf={Albania:{name:"Albania",ISO_A3:"ALB"},Austria:{name:"Austria",ISO_A3:"AUT"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Denmark:{name:"Denmark",ISO_A3:"DNK"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Finland:{name:"Finland",ISO_A3:"FIN"},France:{name:"France",ISO_A3:"FRA"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Greece:{name:"Greece",ISO_A3:"GRC"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Italy:{name:"Italy",ISO_A3:"ITA"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Malta:{name:"Malta",ISO_A3:"MLT"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Poland:{name:"Poland",ISO_A3:"POL"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Romania:{name:"Romania",ISO_A3:"ROU"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Russia:{name:"Russia",ISO_A3:"RUS"},Turkey:{name:"Turkey",ISO_A3:"TUR"}},Xf={Aruba:{name:"Aruba",ISO_A3:"ABW"},Afghanistan:{name:"Afghanistan",ISO_A3:"AFG"},Angola:{name:"Angola",ISO_A3:"AGO"},Anguilla:{name:"Anguilla",ISO_A3:"AIA"},Albania:{name:"Albania",ISO_A3:"ALB"},Aland:{name:"Aland",ISO_A3:"ALA"},Andorra:{name:"Andorra",ISO_A3:"AND"},"United Arab Emirates":{name:"United Arab Emirates",ISO_A3:"ARE"},Argentina:{name:"Argentina",ISO_A3:"ARG"},Armenia:{name:"Armenia",ISO_A3:"ARM"},"American Samoa":{name:"American Samoa",ISO_A3:"ASM"},Antarctica:{name:"Antarctica",ISO_A3:"ATA"},"French Southern and Antarctic Lands":{name:"French Southern and Antarctic Lands",ISO_A3:"ATF"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},Australia:{name:"Australia",ISO_A3:"AUS"},Austria:{name:"Austria",ISO_A3:"AUT"},Azerbaijan:{name:"Azerbaijan",ISO_A3:"AZE"},Burundi:{name:"Burundi",ISO_A3:"BDI"},Belgium:{name:"Belgium",ISO_A3:"BEL"},Benin:{name:"Benin",ISO_A3:"BEN"},"Burkina Faso":{name:"Burkina Faso",ISO_A3:"BFA"},Bangladesh:{name:"Bangladesh",ISO_A3:"BGD"},Bulgaria:{name:"Bulgaria",ISO_A3:"BGR"},Bahrain:{name:"Bahrain",ISO_A3:"BHR"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},"Bosnia and Herzegovina":{name:"Bosnia and Herzegovina",ISO_A3:"BIH"},Belarus:{name:"Belarus",ISO_A3:"BLR"},Belize:{name:"Belize",ISO_A3:"BLZ"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Brunei:{name:"Brunei",ISO_A3:"BRN"},Bhutan:{name:"Bhutan",ISO_A3:"BTN"},Botswana:{name:"Botswana",ISO_A3:"BWA"},"Central African Republic":{name:"Central African Republic",ISO_A3:"CAF"},Canada:{name:"Canada",ISO_A3:"CAN"},Switzerland:{name:"Switzerland",ISO_A3:"CHE"},Chile:{name:"Chile",ISO_A3:"CHL"},China:{name:"China",ISO_A3:"CHN"},"Ivory Coast":{name:"Ivory Coast",ISO_A3:"CIV"},Cameroon:{name:"Cameroon",ISO_A3:"CMR"},"Cyprus No Mans Area":{name:"Cyprus No Mans Area",ISO_A3:"-99"},"Democratic Republic of the Congo":{name:"Democratic Republic of the Congo",ISO_A3:"COD"},"Republic of Congo":{name:"Republic of Congo",ISO_A3:"COG"},"Cook Islands":{name:"Cook Islands",ISO_A3:"COK"},Colombia:{name:"Colombia",ISO_A3:"COL"},Comoros:{name:"Comoros",ISO_A3:"COM"},"Cape Verde":{name:"Cape Verde",ISO_A3:"CPV"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Cuba:{name:"Cuba",ISO_A3:"CUB"},Curaçao:{name:"Curaçao",ISO_A3:"CUW"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},"Northern Cyprus":{name:"Northern Cyprus",ISO_A3:"-99"},Cyprus:{name:"Cyprus",ISO_A3:"CYP"},"Czech Republic":{name:"Czech Republic",ISO_A3:"CZE"},Germany:{name:"Germany",ISO_A3:"DEU"},Djibouti:{name:"Djibouti",ISO_A3:"DJI"},Dominica:{name:"Dominica",ISO_A3:"DMA"},Denmark:{name:"Denmark",ISO_A3:"DNK"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Algeria:{name:"Algeria",ISO_A3:"DZA"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},Egypt:{name:"Egypt",ISO_A3:"EGY"},Eritrea:{name:"Eritrea",ISO_A3:"ERI"},"Dhekelia Sovereign Base Area":{name:"Dhekelia Sovereign Base Area",ISO_A3:"-99"},Spain:{name:"Spain",ISO_A3:"ESP"},Estonia:{name:"Estonia",ISO_A3:"EST"},Ethiopia:{name:"Ethiopia",ISO_A3:"ETH"},Finland:{name:"Finland",ISO_A3:"FIN"},Fiji:{name:"Fiji",ISO_A3:"FJI"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},France:{name:"France",ISO_A3:"FRA"},"Faroe Islands":{name:"Faroe Islands",ISO_A3:"FRO"},"Federated States of Micronesia":{name:"Federated States of Micronesia",ISO_A3:"FSM"},Gabon:{name:"Gabon",ISO_A3:"GAB"},"United Kingdom":{name:"United Kingdom",ISO_A3:"GBR"},Georgia:{name:"Georgia",ISO_A3:"GEO"},Guernsey:{name:"Guernsey",ISO_A3:"GGY"},Ghana:{name:"Ghana",ISO_A3:"GHA"},Guinea:{name:"Guinea",ISO_A3:"GIN"},Gambia:{name:"Gambia",ISO_A3:"GMB"},"Guinea Bissau":{name:"Guinea Bissau",ISO_A3:"GNB"},"Equatorial Guinea":{name:"Equatorial Guinea",ISO_A3:"GNQ"},Greece:{name:"Greece",ISO_A3:"GRC"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},Guam:{name:"Guam",ISO_A3:"GUM"},Guyana:{name:"Guyana",ISO_A3:"GUY"},"Hong Kong S.A.R.":{name:"Hong Kong S.A.R.",ISO_A3:"HKG"},"Heard Island and McDonald Islands":{name:"Heard Island and McDonald Islands",ISO_A3:"HMD"},Honduras:{name:"Honduras",ISO_A3:"HND"},Croatia:{name:"Croatia",ISO_A3:"HRV"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Hungary:{name:"Hungary",ISO_A3:"HUN"},Indonesia:{name:"Indonesia",ISO_A3:"IDN"},"Isle of Man":{name:"Isle of Man",ISO_A3:"IMN"},India:{name:"India",ISO_A3:"IND"},"Indian Ocean Territories":{name:"Indian Ocean Territories",ISO_A3:"-99"},"British Indian Ocean Territory":{name:"British Indian Ocean Territory",ISO_A3:"IOT"},Ireland:{name:"Ireland",ISO_A3:"IRL"},Iran:{name:"Iran",ISO_A3:"IRN"},Iraq:{name:"Iraq",ISO_A3:"IRQ"},Iceland:{name:"Iceland",ISO_A3:"ISL"},Israel:{name:"Israel",ISO_A3:"ISR"},Italy:{name:"Italy",ISO_A3:"ITA"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},Jersey:{name:"Jersey",ISO_A3:"JEY"},Jordan:{name:"Jordan",ISO_A3:"JOR"},Japan:{name:"Japan",ISO_A3:"JPN"},"Baykonur Cosmodrome":{name:"Baykonur Cosmodrome",ISO_A3:"-99"},"Siachen Glacier":{name:"Siachen Glacier",ISO_A3:"-99"},Kazakhstan:{name:"Kazakhstan",ISO_A3:"KAZ"},Kenya:{name:"Kenya",ISO_A3:"KEN"},Kyrgyzstan:{name:"Kyrgyzstan",ISO_A3:"KGZ"},Cambodia:{name:"Cambodia",ISO_A3:"KHM"},Kiribati:{name:"Kiribati",ISO_A3:"KIR"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"South Korea":{name:"South Korea",ISO_A3:"KOR"},Kosovo:{name:"Kosovo",ISO_A3:"-99"},Kuwait:{name:"Kuwait",ISO_A3:"KWT"},Laos:{name:"Laos",ISO_A3:"LAO"},Lebanon:{name:"Lebanon",ISO_A3:"LBN"},Liberia:{name:"Liberia",ISO_A3:"LBR"},Libya:{name:"Libya",ISO_A3:"LBY"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},Liechtenstein:{name:"Liechtenstein",ISO_A3:"LIE"},"Sri Lanka":{name:"Sri Lanka",ISO_A3:"LKA"},Lesotho:{name:"Lesotho",ISO_A3:"LSO"},Lithuania:{name:"Lithuania",ISO_A3:"LTU"},Luxembourg:{name:"Luxembourg",ISO_A3:"LUX"},Latvia:{name:"Latvia",ISO_A3:"LVA"},"Macao S.A.R":{name:"Macao S.A.R",ISO_A3:"MAC"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Morocco:{name:"Morocco",ISO_A3:"MAR"},Moldova:{name:"Moldova",ISO_A3:"MDA"},Madagascar:{name:"Madagascar",ISO_A3:"MDG"},Maldives:{name:"Maldives",ISO_A3:"MDV"},Mexico:{name:"Mexico",ISO_A3:"MEX"},"Marshall Islands":{name:"Marshall Islands",ISO_A3:"MHL"},Macedonia:{name:"Macedonia",ISO_A3:"MKD"},Mali:{name:"Mali",ISO_A3:"MLI"},Malta:{name:"Malta",ISO_A3:"MLT"},Myanmar:{name:"Myanmar",ISO_A3:"MMR"},Montenegro:{name:"Montenegro",ISO_A3:"MNE"},Mongolia:{name:"Mongolia",ISO_A3:"MNG"},"Northern Mariana Islands":{name:"Northern Mariana Islands",ISO_A3:"MNP"},Mozambique:{name:"Mozambique",ISO_A3:"MOZ"},Mauritania:{name:"Mauritania",ISO_A3:"MRT"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},Mauritius:{name:"Mauritius",ISO_A3:"MUS"},Malawi:{name:"Malawi",ISO_A3:"MWI"},Malaysia:{name:"Malaysia",ISO_A3:"MYS"},Namibia:{name:"Namibia",ISO_A3:"NAM"},"New Caledonia":{name:"New Caledonia",ISO_A3:"NCL"},Niger:{name:"Niger",ISO_A3:"NER"},Nigeria:{name:"Nigeria",ISO_A3:"NGA"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Niue:{name:"Niue",ISO_A3:"NIU"},Netherlands:{name:"Netherlands",ISO_A3:"NLD"},Norway:{name:"Norway",ISO_A3:"NOR"},Nepal:{name:"Nepal",ISO_A3:"NPL"},"New Zealand":{name:"New Zealand",ISO_A3:"NZL"},Oman:{name:"Oman",ISO_A3:"OMN"},Pakistan:{name:"Pakistan",ISO_A3:"PAK"},Panama:{name:"Panama",ISO_A3:"PAN"},"Pitcairn Islands":{name:"Pitcairn Islands",ISO_A3:"PCN"},Peru:{name:"Peru",ISO_A3:"PER"},"Spratly Islands":{name:"Spratly Islands",ISO_A3:"-99"},Philippines:{name:"Philippines",ISO_A3:"PHL"},Palau:{name:"Palau",ISO_A3:"PLW"},"Papua New Guinea":{name:"Papua New Guinea",ISO_A3:"PNG"},Poland:{name:"Poland",ISO_A3:"POL"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"North Korea":{name:"North Korea",ISO_A3:"PRK"},Portugal:{name:"Portugal",ISO_A3:"PRT"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Palestine:{name:"Palestine",ISO_A3:"PSE"},"French Polynesia":{name:"French Polynesia",ISO_A3:"PYF"},Qatar:{name:"Qatar",ISO_A3:"QAT"},Romania:{name:"Romania",ISO_A3:"ROU"},Russia:{name:"Russia",ISO_A3:"RUS"},Rwanda:{name:"Rwanda",ISO_A3:"RWA"},"Western Sahara":{name:"Western Sahara",ISO_A3:"ESH"},"Saudi Arabia":{name:"Saudi Arabia",ISO_A3:"SAU"},Sudan:{name:"Sudan",ISO_A3:"SDN"},"South Sudan":{name:"South Sudan",ISO_A3:"SSD"},Senegal:{name:"Senegal",ISO_A3:"SEN"},Singapore:{name:"Singapore",ISO_A3:"SGP"},"South Georgia and South Sandwich Islands":{name:"South Georgia and South Sandwich Islands",ISO_A3:"SGS"},"Saint Helena":{name:"Saint Helena",ISO_A3:"SHN"},"Solomon Islands":{name:"Solomon Islands",ISO_A3:"SLB"},"Sierra Leone":{name:"Sierra Leone",ISO_A3:"SLE"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Somalia:{name:"Somalia",ISO_A3:"SOM"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Republic of Serbia":{name:"Republic of Serbia",ISO_A3:"SRB"},"Sao Tome and Principe":{name:"Sao Tome and Principe",ISO_A3:"STP"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Slovakia:{name:"Slovakia",ISO_A3:"SVK"},Slovenia:{name:"Slovenia",ISO_A3:"SVN"},Sweden:{name:"Sweden",ISO_A3:"SWE"},Swaziland:{name:"Swaziland",ISO_A3:"SWZ"},Seychelles:{name:"Seychelles",ISO_A3:"SYC"},Syria:{name:"Syria",ISO_A3:"SYR"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},Chad:{name:"Chad",ISO_A3:"TCD"},Togo:{name:"Togo",ISO_A3:"TGO"},Thailand:{name:"Thailand",ISO_A3:"THA"},Tajikistan:{name:"Tajikistan",ISO_A3:"TJK"},Turkmenistan:{name:"Turkmenistan",ISO_A3:"TKM"},"East Timor":{name:"East Timor",ISO_A3:"TLS"},Tonga:{name:"Tonga",ISO_A3:"TON"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},Tunisia:{name:"Tunisia",ISO_A3:"TUN"},Turkey:{name:"Turkey",ISO_A3:"TUR"},Tuvalu:{name:"Tuvalu",ISO_A3:"TUV"},Taiwan:{name:"Taiwan",ISO_A3:"TWN"},"United Republic of Tanzania":{name:"United Republic of Tanzania",ISO_A3:"TZA"},Uganda:{name:"Uganda",ISO_A3:"UGA"},Ukraine:{name:"Ukraine",ISO_A3:"UKR"},"United States Minor Outlying Islands":{name:"United States Minor Outlying Islands",ISO_A3:"UMI"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"US Naval Base Guantanamo Bay":{name:"US Naval Base Guantanamo Bay",ISO_A3:"-99"},Uzbekistan:{name:"Uzbekistan",ISO_A3:"UZB"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"},Vietnam:{name:"Vietnam",ISO_A3:"VNM"},Vanuatu:{name:"Vanuatu",ISO_A3:"VUT"},"Wallis and Futuna":{name:"Wallis and Futuna",ISO_A3:"WLF"},"Akrotiri Sovereign Base Area":{name:"Akrotiri Sovereign Base Area",ISO_A3:"-99"},Samoa:{name:"Samoa",ISO_A3:"WSM"},Yemen:{name:"Yemen",ISO_A3:"YEM"},"South Africa":{name:"South Africa",ISO_A3:"ZAF"},Zambia:{name:"Zambia",ISO_A3:"ZMB"},Zimbabwe:{name:"Zimbabwe",ISO_A3:"ZWE"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"}},Hf={Alabama:{name:"Alabama"},Alaska:{name:"Alaska"},Arizona:{name:"Arizona"},Arkansas:{name:"Arkansas"},California:{name:"California"},Colorado:{name:"Colorado"},Connecticut:{name:"Connecticut"},Delaware:{name:"Delaware"},"District of Columbia":{name:"District of Columbia"},Florida:{name:"Florida"},Georgia:{name:"Georgia"},Hawaii:{name:"Hawaii"},Idaho:{name:"Idaho"},Illinois:{name:"Illinois"},Indiana:{name:"Indiana"},Iowa:{name:"Iowa"},Kansas:{name:"Kansas"},Kentucky:{name:"Kentucky"},Louisiana:{name:"Louisiana"},Maine:{name:"Maine"},Maryland:{name:"Maryland"},Massachusetts:{name:"Massachusetts"},Michigan:{name:"Michigan"},Minnesota:{name:"Minnesota"},Mississippi:{name:"Mississippi"},Missouri:{name:"Missouri"},Montana:{name:"Montana"},Nebraska:{name:"Nebraska"},Nevada:{name:"Nevada"},"New Hampshire":{name:"New Hampshire"},"New Jersey":{name:"New Jersey"},"New Mexico":{name:"New Mexico"},"New York":{name:"New York"},"North Carolina":{name:"North Carolina"},"North Dakota":{name:"North Dakota"},Ohio:{name:"Ohio"},Oklahoma:{name:"Oklahoma"},Oregon:{name:"Oregon"},Pennsylvania:{name:"Pennsylvania"},"Rhode Island":{name:"Rhode Island"},"South Carolina":{name:"South Carolina"},"South Dakota":{name:"South Dakota"},Tennessee:{name:"Tennessee"},Texas:{name:"Texas"},Utah:{name:"Utah"},Vermont:{name:"Vermont"},Virginia:{name:"Virginia"},Washington:{name:"Washington"},"West Virginia":{name:"West Virginia"},Wisconsin:{name:"Wisconsin"},Wyoming:{name:"Wyoming"}},Gf={Anguilla:{name:"Anguilla",ISO_A3:"AIA"},"Antigua and Barbuda":{name:"Antigua and Barbuda",ISO_A3:"ATG"},"The Bahamas":{name:"The Bahamas",ISO_A3:"BHS"},Bermuda:{name:"Bermuda",ISO_A3:"BMU"},Barbados:{name:"Barbados",ISO_A3:"BRB"},Canada:{name:"Canada",ISO_A3:"CAN"},Cuba:{name:"Cuba",ISO_A3:"CUB"},"Cayman Islands":{name:"Cayman Islands",ISO_A3:"CYM"},Dominica:{name:"Dominica",ISO_A3:"DMA"},"Dominican Republic":{name:"Dominican Republic",ISO_A3:"DOM"},Grenada:{name:"Grenada",ISO_A3:"GRD"},Greenland:{name:"Greenland",ISO_A3:"GRL"},Haiti:{name:"Haiti",ISO_A3:"HTI"},Jamaica:{name:"Jamaica",ISO_A3:"JAM"},"Saint Kitts and Nevis":{name:"Saint Kitts and Nevis",ISO_A3:"KNA"},"Saint Lucia":{name:"Saint Lucia",ISO_A3:"LCA"},"Saint Martin":{name:"Saint Martin",ISO_A3:"MAF"},Mexico:{name:"Mexico",ISO_A3:"MEX"},Montserrat:{name:"Montserrat",ISO_A3:"MSR"},"Puerto Rico":{name:"Puerto Rico",ISO_A3:"PRI"},"Saint Pierre and Miquelon":{name:"Saint Pierre and Miquelon",ISO_A3:"SPM"},"Turks and Caicos Islands":{name:"Turks and Caicos Islands",ISO_A3:"TCA"},"Trinidad and Tobago":{name:"Trinidad and Tobago",ISO_A3:"TTO"},"United States of America":{name:"United States of America",ISO_A3:"USA"},"Saint Vincent and the Grenadines":{name:"Saint Vincent and the Grenadines",ISO_A3:"VCT"},"British Virgin Islands":{name:"British Virgin Islands",ISO_A3:"VGB"},"United States Virgin Islands":{name:"United States Virgin Islands",ISO_A3:"VIR"}},Yf={Argentina:{name:"Argentina",ISO_A3:"ARG"},Bolivia:{name:"Bolivia",ISO_A3:"BOL"},Brazil:{name:"Brazil",ISO_A3:"BRA"},Chile:{name:"Chile",ISO_A3:"CHL"},Colombia:{name:"Colombia",ISO_A3:"COL"},"Costa Rica":{name:"Costa Rica",ISO_A3:"CRI"},Ecuador:{name:"Ecuador",ISO_A3:"ECU"},"Falkland Islands":{name:"Falkland Islands",ISO_A3:"FLK"},Guyana:{name:"Guyana",ISO_A3:"GUY"},Nicaragua:{name:"Nicaragua",ISO_A3:"NIC"},Panama:{name:"Panama",ISO_A3:"PAN"},Peru:{name:"Peru",ISO_A3:"PER"},Paraguay:{name:"Paraguay",ISO_A3:"PRY"},Suriname:{name:"Suriname",ISO_A3:"SUR"},Uruguay:{name:"Uruguay",ISO_A3:"URY"},Venezuela:{name:"Venezuela",ISO_A3:"VEN"},"French Guyana":{name:"French Guyana",ISO_A3:"GUF"},Guatemala:{name:"Guatemala",ISO_A3:"GTM"},"El Salvador":{name:"El Salvador",ISO_A3:"SLV"},Honduras:{name:"Honduras",ISO_A3:"HND"}},Wf={World:Xf,USA:Hf,NorthAmerica:Gf,SouthAmerica:Yf,Canada:Uf,Europe:Nf,Asia:_f,Africa:Vf,Australia:zf};class jf extends Tn{constructor(t,e,i,s,r,n){super(t,{nn(){},rn(){},ln(){}},s,e,i,{numeric:e.xAxisNumericTicks.setFallBackToExtremeTicksAutomatically(!1),datetime:e.xAxisDateTimeTicks,time:e.xAxisTimeTicks},{type:"linear"}),this.R=new Ct,this.chart=t,this.vs=n,this.Hs=r,this.jh=r.mn(t.sT).Sr(this.Ct.barChartCategoryAxisTitleFont||this.Ct.xAxisTitleFont).Je(this.Ct.barChartCategoryAxisTitleFillStyle||this.Ct.xAxisTitleFillStyle),this.setTitleRotation(this.chart.Xs.getWidth({x:0,y:-90})),this.wr=this.vs.dA([this.jh]).Ls(e.effectsText),this.eT=r.uh(t.sT).ah(e.barChartCategoryAxisStrokeStyle||e.xAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.vA=t,this.yA=t):"object"==typeof t&&(this.vA=t.min,this.yA=t.max),this.chart.St.Bs(),this}getThickness(){return{min:this.vA,max:this.yA}}setStrokeStyle(t){return this.eT.ah(t),this.chart.St.Bs(),this}getStrokeStyle(){return this.eT.ro()}qe(t){const e=this.getInterval(),i=this.chart.valueAxis.getInterval();this.eT.fh(this.chart.Xs.toPoint(e.start,i.start)).dh(this.chart.Xs.toPoint(e.end,i.start)).setVisible(this.At),this.jh.th(this.chart.Xs.toPoint(.5*(e.start+e.end),this.chart.valueAxis.ct.Li(i.start,-t.xA))).Ul(this.chart.Xs.toPoint(0,1)).setVisible(this.At),t.ticksInfo.forEach(((t,e)=>{e.Lr.th(t.labelPosition).Ul(t.labelAlignment).br(t.labelRotation).El(t.labelOffset.x,t.labelOffset.y)}))}Or(t){return{}}Ur(t,e,i,s){return{keyValue:t,tickLevel:e,labelText:i,labelAlignment:{x:0,y:0},labelPosition:{x:0,y:0},labelOffset:{x:0,y:0},labelRotation:0}}Zr(t,e){return new En(e,t,this.Hs,this.chart.sT)}Hr(t,e,i){const s=t.xA,r=this.chart.Xs.getHeight(this.jh.Dr().Pu());return{SA:r,vf:Kt(this.eT.ro().Wt()/2+s+r,void 0!==this.vA?this.vA:0,void 0!==this.yA?this.yA:hi),ticksInfo:e,updatedTicks:i}}Qh(){return this.chart.uiScale}un(t,e){return e}An(t,e,i){return{start:t,end:e}}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}}class $f extends Tn{constructor(t,e,i,s,r,n,o){super(t,{nn:()=>{var e;if(t.hT){if("positive"===t.rT||"bipolar"===t.rT){if("after-bar"===(null===(e=t.nT)||void 0===e?void 0:e.position)){const e=this.ct.Si();return this.ct.Li(t.hT.max,Math.min(this.chart.Xs.getHeight(this.chart.oT())+t.nT.labelMargin,.3*e))}return t.hT.max}return t.aT?Kt(-1,-1e-6,t.hT.max):0}},rn:()=>{var e;if(t.hT){if("negative"===t.rT||"bipolar"===t.rT){if("after-bar"===(null===(e=t.nT)||void 0===e?void 0:e.position)){const e=this.ct.Si();return this.ct.Li(t.hT.min,-Math.min(this.chart.Xs.getHeight(this.chart.oT())+t.nT.labelMargin,.3*e))}return t.hT.min}return t.aT?Kt(1,1e-6,t.hT.min):0}},ln:()=>{}},s,e,i,{numeric:e.barChartValueAxisTicks||e.yAxisNumericTicks,datetime:e.yAxisDateTimeTicks,time:e.yAxisTimeTicks},o),this.R=new Ct,this.chart=t,this.vs=n,this.Hs=r,this.jh=r.mn(t.sT).Sr(this.Ct.barChartValueAxisTitleFont||this.Ct.yAxisTitleFont).Je(this.Ct.barChartValueAxisTitleFillStyle||this.Ct.yAxisTitleFillStyle),this.setTitleRotation(this.chart.Xs.getHeight({x:0,y:-90})),this.wr=this.vs.dA([this.jh]).Ls(e.effectsText),this.eT=r.uh(t.sT).ah(e.barChartValueAxisStrokeStyle||this.Ct.yAxisStrokeStyle)}setThickness(t){return"number"==typeof t?(this.vA=t,this.yA=t):"object"==typeof t&&(this.vA=t.min,this.yA=t.max),this.chart.St.Bs(),this}getThickness(){return{min:this.vA,max:this.yA}}setStrokeStyle(t){return this.eT.ah(t),this.chart.St.Bs(),this}getStrokeStyle(){return this.eT.ro()}setTickStrategy(t,e){return super.ar(t,e)}qe(t){const e=this.getInterval();this.eT.fh(this.chart.Xs.toPoint(-.5,this.lr)).dh(this.chart.Xs.toPoint(-.5,this.cr)).setVisible(this.At);const i="logarithmic"===this.rr.type?Math.sqrt(e.start+e.end):.5*(e.start+e.end),s=this.chart.Xs.toPoint(this.chart.categoryAxis.ct.Li(-.5,t.xA*this.chart.Xs.lT),i),r=this.chart.Xs.toPoint(this.chart.Xs.cT,0);this.jh.th(s).Ul(r).setVisible(this.At),t.ticksInfo.forEach(((e,i)=>{i.Lr.th(e.labelPosition).Ul(e.labelAlignment).br(e.labelRotation).El(e.labelOffset.x,e.labelOffset.y);const s=i.xn.kh;s.tickStyle!==Ot&&0!==s.tickLength&&t.plotLines.add({positions:[e.positionTicklineStart,e.positionTicklineEnd]},{lineStyle:s.tickStyle}),s.gridStrokeStyle!==Ot&&s.gridStrokeLength>0&&t.plotLines.add({positions:[e.positionTicklineStart,e.positionGridlineEnd]},{lineStyle:s.gridStrokeStyle})}))}Or(t){return{}}Ur(t,e,i,s,r){const n=e.kh,o=this.chart.Xs.toPoint(-.5,t),h=this.chart.sT.Li(o,this.chart.Xs.toPoint(n.getTickLength()*this.chart.Xs.lT,0)),a=this.chart.sT.Li(o,this.chart.Xs.toPoint(n.gridStrokeLength*s.oppositeAxisSize*-this.chart.Xs.lT,0));return{keyValue:t,tickLevel:e,labelText:i,labelPosition:this.chart.sT.Li(h,this.chart.Xs.toPoint(n.getTickPadding()*this.chart.Xs.lT,0)),labelAlignment:this.chart.Xs.toPoint(this.chart.Xs.cT,n.getLabelAlignment()),labelOffset:{x:0,y:0},labelRotation:e.kh.labelRotation,positionTicklineStart:o,positionTicklineEnd:h,positionGridlineEnd:a}}Zr(t,e){return new En(e,t,this.Hs,this.chart.sT)}Hr(t,e,i){let s=0;for(const t of this.Ih.values())for(const e of t.values()){const t=e.xn.kh,i=this.chart.Xs.getWidth(e.Lr.Dr().Pu()),r=t.getTickLength()+t.getTickPadding()+i;s=Math.max(s,r)}const r=s+this.eT.ro().Wt()/2,n=this.chart.Xs.getWidth(this.jh.Dr().Pu());return{xA:r,SA:n,vf:Kt(r+n,void 0!==this.vA?this.vA:0,void 0!==this.yA?this.yA:hi),ticksInfo:e,updatedTicks:i}}Qh(){return this.chart.sT}un(t,e){return"linear"===this.rr.type?Ss(t,e,this.ct):vs(t,e,this.ct)}An(t,e,i){return{start:t,end:e}}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}}class Qf extends Dc{constructor(t,e,i,s,r,n,o){super(t,e,i,s),this.wt=Ze(),this.M=0,this.uT=!1,this.R=new Ct,this.chart=t,this.chart=t,this.category=r,this.subCategory=n,this.Rs=r,this.We=Ve(i.barChartBarFillStyle||i.rectangleSeriesFillStyle,o),this.je=Ve(i.barChartBarStrokeStyle||i.rectangleSeriesStrokeStyle,o),this.addEventListener("visiblechange",(()=>this.chart.dT())),this.addEventListener("dispose",(()=>{this.chart.dT(),this.chart.fT.delete(this.category),this.chart.AT.delete(this)}))}qt(t,e){const i=this.chart.St.Wa(e);return{cursorPosition:{pointMarker:{x:i.engineX,y:i.engineY},pointMarkerScale:this.chart.St.ct,resultTable:{x:i.engineX,y:i.engineY},resultTableScale:this.chart.St.ct},category:this.category,subCategory:this.subCategory,bar:this,value:this.getValue()}}setValue(t){return this.uT=!0,this.M=t,this.chart.dT(),this.chart.St.Bs(),this.chart.fT.delete(this.category),this.chart.AT.delete(this),this}getValue(){return this.M}get value(){return this.M}setFillStyle(t){return this.We="function"==typeof t?t(this.We):t,this.chart.dT(),this}getFillStyle(){return this.We}setStrokeStyle(t){return this.je="function"==typeof t?t(this.je):t,this.chart.dT(),this}getStrokeStyle(){return this.je}Ev(){return this.Ov}setEffect(t){return this.chart.setBarsEffect(t),this}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:this.We})}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const Jf=t=>!!(t&&"object"==typeof t&&"iCategory"in t&&"number"==typeof t.iCategory&&"value"in t&&"number"==typeof t.value);class qf extends Nl{constructor(t,e,i,s,r,n,o){var h;let a;super(t,e,i,e.lg("barChart bg",0),s,e.St.Ct.barChartBackgroundFillStyle||e.St.Ct.chartXYBackgroundFillStyle,e.St.Ct.barChartBackgroundStrokeStyle||e.St.Ct.chartXYBackgroundStrokeStyle,e.St.Ct.barChartTitleFont||e.St.Ct.chartXYTitleFont,e.St.Ct.barChartTitleFillStyle||e.St.Ct.chartXYTitleFillStyle,e.St.Ct.barChartTitleShadow||e.St.Ct.chartXYTitleShadow,n),this.coordsBars="barChart",this.gT=Zf.Descending,this.pT=this.Ct.barChartCategoryLabels,this.nT=this.Ct.barChartValueLabelsAfterBars,this.vT=!0,this.Nb=Je(),this.fT=new Map,this.AT=new Map,this.rT="positive",this.yT="columns",this.mT=!0,this.xT=new Map,this.ST={speed:1},this.hp={speed:1},this.bT=.08,this.MT=!1,this.wT={left:2,right:2,top:2,bottom:2},this._T=[],this.da=t=>{this.sT.J(t.engineWidth,t.engineHeight),this.MT=!0},this.R=new Ct,this.St.Ma(zn.po),this.CT=this.Ct.barChartCornerRadius,this.Xs="horizontal"===(null==o?void 0:o.type)?tg:Kf,this.Uh.jr("Bar Chart"),this.kT=e._p("barChart plotting 1",0),this.TT=e._p("barChart plotting 2",1),this.aT="logarithmic"===(null===(h=null==o?void 0:o.valueAxis)||void 0===h?void 0:h.type),this.aT?"horizontal"===this.Xs.FT?(a=i.d1({scale1DConstructor:rs,dimension:"y"}),this.sT=(new as).Ji(i.d1({scale1DConstructor:Qi,dimension:"x"}),a)):(a=i.d1({scale1DConstructor:rs,dimension:"x"}),this.sT=(new as).Ji(a,i.d1({scale1DConstructor:Qi,dimension:"y"}))):(this.sT=i.d2({scaleXYConstructor:hs}),a=this.Xs.getWidth(this.sT)),this.IT=this.vs.dA(),this.Gb=new Ml((()=>this.Nb.Kt(this.kT._d(this.sT).Ka(0))),((t,e,i)=>(t.Je(i.fillStyle).Qe(i.strokeStyle),e.map((e=>{const i=e.existingMember||t.Oo();return i.Fd(e.x1,e.y1,e.x2,e.y2).Td(e.rounding),this.Nb.ti(i,e.bar),e.bar.Ts([i]),i})))),(()=>{this.Nb.ii()}),(t=>{this.IT.Cs(t)})),this.uy=this.HA.Ke(this.sT).Je(this.Ct.barChartSeriesBackgroundFillStyle||V).Qe(Ot),this.Ay=this.HA.Ke(this.sT).Je(V).Qe(this.Ct.barChartSeriesBackgroundStrokeStyle||Ot).setPointerEvents(!1),super.ly(this.uy,this.Ay),this.categoryAxis=new jf(this,this.Ct,!1!==(null==o?void 0:o.animationsEnabled),a,this.TT,this.vs),this.categoryAxis.setInterval(this.Xs.getWidth({x:{start:-.5,end:.5},y:{start:.5,end:-.5}}));const l=xs(null==o?void 0:o.valueAxis);this.valueAxis=new $f(this,this.Ct,!1!==(null==o?void 0:o.animationsEnabled),this.Xs.getHeight(this.sT),this.TT,this.vs,l.type),this.PT=new Tl((()=>this.TT.mn(this.sT).yn(qe).vn(qe).Ka(1))),this.LT=new Ml((()=>this.HA.CA(this.sT).setPointerEvents(!1)),((t,e,i)=>(t.ah(i.lineStyle),e.map((({positions:e,existingMember:i})=>(i||t.Oo()).TA(e[0],e[1]))))));const c=e.kp(),u=ee(o?o.cursorBuilder:void 0,tl);this.Tp=Ua(this,c,u.jg(c,this.uiScale,this.uiScale,qt,this.Ct),this,"show-pointed",eg,(()=>0)),this.addEventListener("resize",this.da),this.ag(r,this.sT),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled))}getSeries(){return this.ey}setCornerRadius(t){return this.CT=t,this.vT=!0,this.St.Bs(),this}getCornerRadius(){return this.CT}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}addCursor(t=tl){const e=this.JA(),i=t.jg(e,this.uiScale,this.uiScale,this.XA(e),this.Ct);return this.rg(i),i}setBarsMargin(t){return this.bT=Kt(t,0,.49),this.vT=!0,this.St.Bs(),this}getBarsMargin(){return this.bT}setBarsEffect(t){return this.IT.Ls(t),this.St.Bs(),this}getBarsEffect(){return this.IT.Ds()}setData(t){let e;if(Array.isArray(t))e=[],t.forEach(((t,i)=>{"string"==typeof t?e.push({category:t}):"number"==typeof t?e.push({category:`Category ${i+1}`,value:t}):"object"==typeof t&&e.push(t)}));else{e=[];const i=Object.keys(t);for(const s of i){const i=t[s];e.push({category:s,value:"number"==typeof i?i:void 0})}}return this.BT("columns",e),this}setDataStacked(t,e){const i=[];return e.forEach((e=>{const{subCategory:s,values:r}=e;r.forEach(((e,r)=>{const n=t[r];i.push({category:n,subCategory:s,value:e})}))})),this.BT("stacks",i),this}setDataGrouped(t,e){const i=[];return e.forEach((e=>{const{subCategory:s,values:r}=e;r.forEach(((e,r)=>{const n=t[r];i.push({category:n,subCategory:s,value:e})}))})),this.BT("groups",i),this}BT(t,e){this.ey.length>0&&this.St.Ma(zn.Fo),this.yT=t,this._T=e.map((t=>({category:t.category,subCategory:t.subCategory}))),this.DT(e);const i=Ne(e.map((t=>t.category))),s=i.length,r=Ne(e.map((t=>t.subCategory))).filter((t=>void 0!==t));if(e.forEach((t=>{let e=this.ey.find((e=>e.category===t.category&&e.subCategory===t.subCategory));if(!e){const s=i.indexOf(t.category),n=void 0!==t.subCategory&&r.includes(t.subCategory)?r.indexOf(t.subCategory):void 0;e=new Qf(this,this.ny,this.Ct,this.St.vs,t.category,t.subCategory,ee(n,s)),this.gy(e),this.xT.set(e,{category:s,valueStart:this.aT?1e-6:0,valueEnd:void 0!==t.value?t.value:0})}void 0!==t.value&&e.setValue(t.value)})),this.ey.slice().forEach((t=>{void 0===e.find((e=>e.category===t.category&&e.subCategory===t.subCategory))&&(t.dispose(),this.xT.delete(t))})),this.categoryAxis.setInterval(this.Xs.getWidth({x:{start:-.5,end:Math.max(s,1)-.5},y:{start:Math.max(s,1)-.5,end:-.5}})),this.hT=0===this.ey.length?void 0:"stacks"!==t?this.ey.reduce(((t,e)=>({min:Math.min(t.min,e.getValue()),max:Math.max(t.max,e.getValue())})),{min:hi,max:ai}):{min:0,max:i.reduce(((t,i)=>Math.max(t,e.reduce(((t,e)=>e.category!==i?t:void 0!==e.value?t+e.value:t),0))),0)},this.hT&&(this.rT=this.hT.min>=0?"positive":this.hT.max<=0?"negative":"bipolar",("bipolar"===this.rT||"negative"===this.rT)&&this.aT))throw new Error("LightningChart JS BarChart bipolar/negative data + logarithmic value axis combination not supported.");if(this.ET&&this.ET(),"groups"===t||"stacks"===t){const t=r.map((t=>(t=>{let e=!1;const i=new Array;return t.forEach((s=>{const r=i=>{e||(e=!0,t.forEach((t=>s!==t?t.setHighlight(i.highlight):void 0)),e=!1)};s.addEventListener("highlightchange",r),i.push((()=>s.removeEventListener("highlightchange",r)))})),t.forEach((e=>{const s=()=>{const i=t.indexOf(e);i>=0&&t.splice(i,1)};e.addEventListener("dispose",s),i.push((()=>e.removeEventListener("dispose",s)))})),()=>{i.forEach((t=>t()))}})(this.ey.filter((e=>e.subCategory===t)))));this.ET=()=>t.forEach((t=>t()))}this.DT(this.ey),this.fT.clear(),this.AT.clear(),this.vT=!0,this.St.Bs()}setCategoryLabels(t){const e="function"==typeof t?this.pT?t(this.pT):this.pT:t;return this.pT=e?{...this.Ct.barChartCategoryLabels,...e}:void 0,this.fT.clear(),this.St.Bs(),this.MT=!0,this}getCategoryLabels(){return this.pT}setValueLabels(t){var e;const i="function"==typeof t?this.nT?t(this.nT):this.nT:t,s=(null==i?void 0:i.position)||(null===(e=this.nT)||void 0===e?void 0:e.position);return i&&s?"after-bar"===s?this.nT={...this.Ct.barChartValueLabelsAfterBars,...i}:"inside-bar"!==s&&"inside-bar-start"!==s&&"inside-bar-centered"!==s&&"inside-bar-end"!==s||(this.nT={...this.Ct.barChartValueLabelsInsideBars,...i}):this.nT=void 0,this.AT.clear(),this.St.Bs(),this.MT=!0,this}getValueLabels(){return this.nT}setLabelFittingEnabled(t){return this.mT=t,this.St.Bs(),this}getLabelFittingEnabled(){return this.mT}setLabelFittingMargins(t){return this.wT="object"==typeof t?t:"number"==typeof t?{left:t,right:t,top:t,bottom:t}:qe,this.MT=!0,this.St.Bs(),this}getLabelFittingMargins(){return this.wT}getBar(t,e){if(("groups"===this.yT||"stacks"===this.yT)&&void 0===e)throw new Error("LightningChart JS BarChart.getBar() | `subCategory` parameter is required for grouped and stacked bar charts!");const i=this.ey.find((i=>i.category===t&&(void 0===e||e===i.subCategory)));if(!i)throw new Error(`BarChart.getBar() no such bar: "${t}" ${e?`"${e}"`:""}`);return i}getBars(){return this.ey}setSorting(t){this.gT=t;const e=this.ey.slice();return this.ey.length=0,this.ey.push(...Xe(this._T.map((t=>e.find((e=>e.category===t.category&&(void 0===t.subCategory||t.subCategory===e.subCategory))))))),this.DT(this.ey),this.St.Bs(),this.vT=!0,this}getSorting(){return this.gT}setAnimationCategoryPosition(t,e=1){return this.ST=t?{speed:e}:void 0,this.St.Bs(),this}setAnimationValues(t,e=1){return this.hp=t?{speed:e}:void 0,this.St.Bs(),this}translateCoordinate(t,e,i){if(i&&fs(t)&&ds(e))return super.translateCoordinate(t,e,i);const s=e;let r;if(us(t))r=this.St.Wa(t);else if(fs(t)){const e=ot(t,this.oA,this.St.ct);r={engineX:e.x,engineY:e.y}}else{if(!Jf(t))throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Input coordinate system not recognized.");{const e=ot(this.Xs.toPoint(t.iCategory,t.value),this.sT,this.St.ct);r={engineX:e.x,engineY:e.y}}}if(cs(s))return this.St.ja(r);if("barChart"===s){const t=ot({x:r.engineX,y:r.engineY},this.St.ct,this.sT);return{iCategory:this.Xs.getWidth(t),value:this.Xs.getHeight(t)}}if(ds(s))return ot({x:r.engineX,y:r.engineY},this.St.ct,this.oA);throw new Error("LightningChart JS BarChart.translateCoordinate unexpected error. Target coordinate system not recognized.")}kf(){if("columns"===this.yT)return this.ey;const t=Ne(Xe(this.ey.map((t=>t.subCategory))));return Xe(t.map((t=>{const e=this.ey.filter((e=>e.subCategory===t)),i=e[0];if(i)return{attach(s,r){return Ge(s,e,{toggleVisibilityOnClick:r,label:t,style:i.getFillStyle()}),this},Us:()=>{}}})))}qe(t){var e,i,s;super.qe(t);const r=this.PT.sv(),n=this.LT.sv(),o=this.ey.filter((t=>t.getVisible()&&t.uT)),h=Ne(o.map((t=>t.category))),a=Ne(Xe(o.map((t=>t.subCategory)))),l=5e-4*t*((null===(e=this.ST)||void 0===e?void 0:e.speed)||0),c=.003*t*((null===(i=this.ST)||void 0===i?void 0:i.speed)||0),u=this.valueAxis.ct,d=u instanceof rs?(t,e)=>{var i;return Ss(t,e,u,(null===(i=this.hp)||void 0===i?void 0:i.speed)||0)}:(t,e)=>{var i;return vs(t,e,u,(null===(i=this.hp)||void 0===i?void 0:i.speed)||0)};let f;const g=null!==(s="positive"===this.rT&&this.hT?Math.min(this.hT.min,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)-(this.hT.max-this.hT.min):"negative"===this.rT&&this.hT?Math.max(this.hT.max,this.valueAxis.getInterval().start,this.valueAxis.getInterval().end)+(this.hT.max-this.hT.min):void 0)&&void 0!==s?s:0;"columns"===this.yT?f=o.map((t=>({bar:t,position:{category:h.indexOf(t.category),valueStart:this.aT?1e-6:g,valueEnd:t.value}}))):"groups"===this.yT?f=o.map((t=>{const e=h.indexOf(t.category),i=a.indexOf(t.subCategory),s=1/(a.length+2*(a.length+1)*this.bT),r=this.bT*s;return{bar:t,position:{category:e+(i-(a.length-1)/2)*(s+r),valueStart:this.aT?1e-6:g,valueEnd:t.value}}})):(f=[],h.forEach((t=>{const e=o.filter((e=>e.category===t));let i=this.aT?1e-6:0;e.forEach((e=>{f.push({bar:e,position:{category:h.indexOf(t),valueStart:i,valueEnd:i+e.value}}),i+=e.value}))}))),f.forEach((t=>{const{bar:e,position:i}=t;let s,r,n=this.xT.get(e);void 0===n&&(n=i);const o=i.valueStart;if(this.ST&&n.category!==i.category){const t=Math.sign(i.category-n.category);s=n.category+l*t+c*(i.category-n.category),t!==Math.sign(i.category-s)&&(s=i.category)}else s=i.category;if(this.hp&&n.valueEnd!==i.valueEnd){const t=Math.sign(i.valueEnd-n.valueEnd);r=d(n.valueEnd,i.valueEnd),t!==Math.sign(i.valueEnd-r)&&(r=i.valueEnd)}else r=i.valueEnd;this.xT.set(e,{category:s,valueStart:o,valueEnd:r}),s===i.category&&r===i.valueEnd||this.St.Bs(!0),s===n.category&&r===n.valueEnd||(this.vT=!0)})),La.yg(this.Uh,this.cg);const y=o.length>0;this.categoryAxis.cn(),this.valueAxis.cn();const{labelMarginBeforeCategoryAxisPixels:p,labels:m}=y?this.RT(h,a,o,r,n):{labelMarginBeforeCategoryAxisPixels:0,labels:[]},x=this.categoryAxis.Dr({physicalAxisSize:this.categoryAxis.ct.Si(),xA:p}),S=this.valueAxis.Dr({plotLines:n,physicalAxisSize:this.valueAxis.ct.Si(),oppositeAxisSize:this.Xs.getWidth(this.sT).Si()}),v=La.vg(this.Uh,this.cg);this.sT.qi([this.ai.bottom+this.Dn.bottom+("vertical"===this.Xs.FT?x.vf:0),this.ai.top+this.Dn.top+v+("horizontal"===this.Xs.FT?S.vf:0)]),this.sT.Ki([this.ai.left+this.Dn.left+this.Xs.getHeight({x:x.vf,y:S.vf}),this.ai.right+this.Dn.right]),this.kT.Zm({x:this.sT.x.mi(),y:this.sT.y.mi(),width:this.sT.x.Si(),height:this.sT.y.Si()}),this.GA&&this.GA();const A={x:Math.min(this.sT.x.getInnerStart(),this.sT.x.getInnerEnd()),y:Math.min(this.sT.y.getInnerStart(),this.sT.y.getInnerEnd())},b=Math.max(this.sT.x.getInnerStart(),this.sT.x.getInnerEnd()),C=Math.max(this.sT.y.getInnerStart(),this.sT.y.getInnerEnd()),M={x:b-A.x,y:C-A.y};if(this.uy.th(A),this.uy.J(M),this.Ay.th(A),this.Ay.J(M),this.categoryAxis.qe(x),this.valueAxis.qe(S),super.og(),this.Tp.qe(!1,this.ey,void 0),(this.vT||this.MT)&&this.mT){const t=m.map((t=>{const e=t.setVisible(!0).Dr().Tu();if(0!==this.wT.bottom||0!==this.wT.left||0!==this.wT.right||0!==this.wT.top){const i=Math.sign(this.sT.x.Y-this.sT.x.$),s=Math.sign(this.sT.y.Y-this.sT.y.$),r=s>0?e.min.y:e.max.y,n=s>0?e.max.y:e.min.y,o=i>0?e.min.x:e.max.x,h=i>0?e.max.x:e.min.x,a=t.ct.Li({x:o,y:r},{x:-this.wT.left,y:-this.wT.bottom}),l=t.ct.Li({x:h,y:n},{x:this.wT.right,y:this.wT.top});return{min:{x:Math.min(a.x,l.x),y:Math.min(a.y,l.y)},max:{x:Math.max(a.x,l.x),y:Math.max(a.y,l.y)}}}return e}));for(let e=0;e<m.length;e+=1){if(!m[e].getVisible())continue;const i=t[e];let s;do{s=m.findIndex(((s,r)=>r!==e&&m[r].getVisible()&&di(i,t[r]))),s>=0&&m[s].setVisible(!1)}while(s>=0)}}if(this.vT){const t=this.Gb.sv(),e="groups"===this.yT?1/(a.length+2*(a.length+1)*this.bT):1-2*this.bT;o.forEach((i=>{const s=this.xT.get(i);if(void 0===s)return;const r=s.category-.5*e,n=s.category+.5*e,o=this.Xs.toPoint(r,s.valueStart),h=this.Xs.toPoint(n,s.valueEnd);let l;this.CT&&(l={extent:this.CT,c_x1_y2:"vertical"===this.Xs.FT,c_x2_y2:"vertical"===this.Xs.FT||"horizontal"===this.Xs.FT,c_x1_y1:!1,c_x2_y1:"horizontal"===this.Xs.FT},"stacks"===this.yT&&i.subCategory&&a.indexOf(i.subCategory)!==a.length-1&&(l=void 0)),t.add({wt:i.wt,bar:i,x1:o.x,y1:o.y,x2:h.x,y2:h.y,rounding:l},{fillStyle:i.We,strokeStyle:i.je})})),t.finishPlot()}r.finishPlot(),n.finishPlot(),this.vT=!1,this.MT=!1}setAnimationsEnabled(t){return super.setAnimationsEnabled(t),this.setAnimationCategoryPosition(t),this.setAnimationValues(t),this.valueAxis.setAnimationsEnabled(t),this.categoryAxis.setAnimationsEnabled(t),this}dispose(){return this.TT.U(),this.kT.U(),this.Tp.U(),super.dispose()}DT(t){const e=this.gT;e&&t.sort(((i,s)=>e({category:i.category,value:t.reduce(((t,e)=>t+(e.category===i.category&&e.value||0)),0)},{category:s.category,value:t.reduce(((t,e)=>t+(e.category===s.category&&e.value||0)),0)})))}RT(t,e,i,s,r){let n=0;const o=this.pT,h=this.nT,a=this.valueAxis.getInterval(),l=[];if(o&&o.labelFillStyle!==V){const e=o.tickLength+o.labelMargin,h=this.Xs.toPoint(0,1),c={nf:t.map(((t,s)=>{const r=i.reduce(((e,i)=>i.category!==t?e:e+i.value),0),n=o.formatter(t,r);if(!n)return;const l=s;return void 0!==l?{text:n,position:this.Xs.toPoint(l,this.valueAxis.ct.Li(a.start,-e)),alignment:h,rotation:o.labelRotation,sizePixels:this.zT(t,r)}:void 0})),Xn:o.labelFont,ct:this.sT};c.nf.forEach((t=>{t&&l.push(s.add().jr(t.text).th(t.position).Ul(t.alignment).br(t.rotation).Je(o.labelFillStyle).Sr(o.labelFont).Wr(o.labelShadow))})),o.tickStyle!==Ot&&0!==o.tickLength&&c.nf.forEach((t=>{if(!t)return;const e=this.Xs.getWidth(t.position);r.add({positions:[this.Xs.toPoint(e,this.valueAxis.ct.getInnerStart()),this.Xs.toPoint(e,this.valueAxis.ct.Li(a.start,-o.tickLength))]},{lineStyle:o.tickStyle})})),n=c.nf.reduce(((t,e)=>e?Math.max(t,this.Xs.getHeight(e.sizePixels)):t),0)+o.tickLength+o.labelMargin}if(h&&h.labelFillStyle!==V){const r={nf:[],Xn:h.labelFont,ct:this.sT};"stacks"===this.yT&&h.displayStackedSum&&r.nf.push(...t.map(((t,s)=>{const r=i.reduce(((e,i)=>e+(i.category===t?i.value:0)),0),n=h.formatter({chart:this,bar:void 0,category:t,value:r,subCategory:void 0});if(!n)return;const o=i.filter((e=>e.category===t)).sort(((t,i)=>{var s,r;return e.indexOf(null!==(s=t.subCategory)&&void 0!==s?s:"")-e.indexOf(null!==(r=i.subCategory)&&void 0!==r?r:"")})),a=o[o.length-1],l=this.xT.get(a);return void 0!==l?{text:n,position:this.Xs.toPoint(l.category,this.valueAxis.ct.Li(l.valueEnd,h.labelMargin*Math.sign(l.valueEnd))),alignment:this.Xs.toPoint(0,-1*Math.sign(l.valueEnd)),rotation:h.labelRotation,sizePixels:this.St.Kh.Ch(n,h.labelFont,h.labelRotation)}:void 0}))),"after-bar"!==h.position||"stacks"===this.yT&&!h.displayStackedIndividuals?"inside-bar"!==h.position&&"inside-bar-start"!==h.position&&"inside-bar-centered"!==h.position&&"inside-bar-end"!==h.position||r.nf.push(...i.map(((t,e)=>{const i=h.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!i)return;const s=this.xT.get(t);if(void 0===s)return;const r="bipolar"===this.rT?Math.sign(s.valueEnd):"negative"===this.rT?-1:1,n=this.Xs.toPoint(0,"inside-bar"===h.position||"inside-bar-end"===h.position?1*r:"inside-bar-centered"===h.position?0:-1*r);return{text:i,position:this.Xs.toPoint(s.category,"inside-bar"===h.position||"inside-bar-end"===h.position?this.valueAxis.ct.Li(s.valueEnd,-h.labelMargin*r):"inside-bar-centered"===h.position?(s.valueStart+s.valueEnd)/2:this.valueAxis.ct.Li(s.valueStart,h.labelMargin*r)),alignment:n,rotation:h.labelRotation,sizePixels:this.OT(t)}}))):r.nf.push(...i.map(((t,e)=>{const i=h.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory});if(!i)return;const s=this.xT.get(t);return void 0!==s?{text:i,position:this.Xs.toPoint(s.category,this.valueAxis.ct.Li(s.valueEnd,h.labelMargin*Math.sign(s.valueEnd))),alignment:this.Xs.toPoint(0,-1*Math.sign(s.valueEnd)),rotation:h.labelRotation,sizePixels:this.OT(t)}:void 0}))),r&&r.nf.forEach((t=>{t&&l.push(s.add().jr(t.text).th(t.position).Ul(t.alignment).br(t.rotation).Je(h.labelFillStyle).Sr(h.labelFont).Wr(h.labelShadow).setPointerEvents(!1))}))}return{labelMarginBeforeCategoryAxisPixels:n,labels:l}}zT(t,e){if(!this.pT||this.pT.labelFillStyle===V)return{x:0,y:0};const i=this.fT.get(t);if(i)return i;const s=this.pT.formatter(t,e),r=this.St.Kh.Ch(s,this.pT.labelFont,this.pT.labelRotation);return r.isEstimate?this.St.Bs(!0):this.fT.set(t,r),r}OT(t){if(!this.nT||this.nT.labelFillStyle===V)return{x:0,y:0};const e=this.AT.get(t);if(e)return e;const i=this.St.Kh.Ch(this.nT.formatter({chart:this,bar:t,category:t.category,value:t.value,subCategory:t.subCategory}),this.nT.labelFont,this.nT.labelRotation);return i.isEstimate?this.St.Bs(!0):this.AT.set(t,i),i}oT(){return this.ey.reduce(((t,e)=>{const i=this.OT(e);return{x:Math.max(t.x,i.x),y:Math.max(t.y,i.y)}}),{x:0,y:0})}dT(){this.vT=!0,this.St.Bs()}X(){return super.X(),this.sT.X(),this}W(){return super.W(),this.sT.W(),this}getMinimumSize(){return{x:200,y:200}}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const Zf={Disabled:void 0,None:void 0,Ascending:(t,e)=>t.value-e.value,Descending:(t,e)=>e.value-t.value,Alphabetical:(t,e)=>t.category.localeCompare(e.category)},Kf={...Uh,FT:"vertical",lT:-1,cT:1},tg={...Nh,FT:"horizontal",lT:1,cT:-1},eg=(t,e,i)=>{const s=[[{component:e.bar,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]],r=t.valueAxis.getTitle();return r&&s.push([r]),e.subCategory?s.push([e.subCategory,"",{text:ms(t.valueAxis.formatValue(e.bar.getValue()),t.valueAxis),font:{weight:"bold"}}]):s.push({text:ms(t.valueAxis.formatValue(e.bar.getValue()),t.valueAxis),font:{weight:"bold"}}),s},ig=(t,e)=>Math.abs(t)+Math.abs(e);function sg(t,e){const i=t.reduce(ig,0),s=(r=t,Math.max(...r.map((t=>t))));var r;const n=(t=>Math.min(...t.map((t=>t))))(t);return Math.max(e**2*s/i**2,i**2/(e**2*n))}const rg=({height:t,width:e})=>t>e?{value:e,vertical:!1}:{value:t,vertical:!0},ng=({data:t,dimensions:e})=>{const{x:i,y:s,width:r,height:n}=e,o=t.map((t=>t.value)).reduce(ig,0),h=t.map((t=>t.animatedValue)).reduce(ig,0),a=t.map((t=>t.animatedValue*n*r/h)),l=a.reduce(((t,e)=>t+e),0),c=a.map((t=>t/l*100)),u=a.filter(((t,e)=>c[e])),d={children:[],id:0,parentID:-1,name:"Main Rectangle",value:o,animatedValue:h,x:i,y:s,width:r,height:n,nodeIndex:-1,userNode:{name:"Main Rectangle",value:o}};if(1===t.length){const i={...t[0],x:e.x,y:e.y,width:e.width,height:e.height,userNode:{...t[0].userNode,value:t[0].value}};d.children.push(i)}else hg(u,rg(d).value,t,d);return d.children},og=(t,e,i,s,r)=>{const n=t.reduce(ig,0)/e;t.forEach(((t,e)=>{const o=Math.abs(t)/n,{x:h,y:a,children:l}=r,c=s[l.length],u={...c,x:h,y:a,width:i?n:o,height:i?o:n,userNode:{...c.userNode,value:c.value}};i?r.y-=o:r.x+=o,l.push(u)})),i?(r.x+=n,r.y+=e,r.width-=n):(r.x-=e,r.y-=n,r.height-=n)},hg=(t,e,i,s)=>{const r=[{children:t,width:e,row:[]}];for(;r.length>0;){const t=r.pop();if(!t)continue;const{children:e,width:n,row:o}=t;let h=0;const a=[...o];for(;h<e.length;){const t=[...a,e[h]],o=sg(a,n),l=sg(t,n);if(!(0===a.length||o>l)){og(a,n,rg(s).vertical,i,s),r.push({children:e.slice(h),width:rg(s).value,row:[]});break}a.push(e[h]),h+=1}h===e.length&&og(a,n,rg(s).vertical,i,s)}};class ag extends Oa{constructor(t,i,s,r,n,o,h){if(super(t,i,s,i.lg("treeMapChart bg",0),r,i.St.Ct.treeMapChartBackgroundFillStyle||i.St.Ct.chartXYSeriesBackgroundFillStyle,i.St.Ct.treeMapChartBackgroundStrokeStyle||i.St.Ct.chartXYBackgroundStrokeStyle,i.St.Ct.treeMapChartTitleFont||i.St.Ct.chartXYTitleFont,i.St.Ct.treeMapChartTitleFillStyle||i.St.Ct.chartXYTitleFillStyle,i.St.Ct.treeMapChartTitleShadow||i.St.Ct.chartXYTitleShadow,h),this.VT=new Map,this.NT=[],this.GT={},this.UT=p([]),this.hp={speed:1},this.$T=hi,this.YT="Go Back",this.HT=[],this.XT=this.Ct.treeMapChartPathLabelFillStyle||this.Ct.uiTextFillStyle,this.WT=this.Ct.treeMapChartPathLabelFont||this.Ct.uiTextFont,this.jT=this.Ct.treeMapChartLabelHeaderFillStyle||this.Ct.uiTextFillStyle,this.ZT=this.Ct.treeMapChartLabelHeaderFont||this.Ct.uiTextFont,this.QT=this.Ct.treeMapChartLabelFillStyle||this.Ct.uiTextFillStyle,this.JT=this.Ct.treeMapChartLabelFont||this.Ct.uiTextFont,this.Ex=!0,this.KT=!1,this.qT=this.Ct.treeMapChartParentColor||k,this.tF=this.Ct.treeMapChartNodeStrokeStyle||this.Ct.uiBackgroundStrokeStyle,this.Vb=this.Ct.treeMapChartCornerRadius,this.zx=()=>{this.St.Bs(),this.KT=!0},this.iF=(t,i)=>{var s;const{collectionMember:r}=i,n=this.sF(r);n&&(this.qx=this.eF(n,t),this.Ex&&this.St.Ms.zs(r,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(e.MouseStyles.Point),this.St.Bs())},this.hF=(t,i)=>{const{collectionMember:s}=i;this.sF(s)&&(this.qx=void 0,this.Ex&&this.St.Ms.zs(s,!1),this.engine.setMouseStyle(e.MouseStyles.Default),this.St.Bs())},this.rF=(t,i)=>{var s;const{collectionMember:r}=i,n=this.sF(r);n&&(this.qx=this.eF(n,t),this.Ex&&this.St.Ms.zs(r,!0),(null===(s=this.getUserInteractions().drillDown)||void 0===s?void 0:s.click)&&this.engine.setMouseStyle(e.MouseStyles.Point),this.St.Bs())},this.nF=(t,e)=>{var i;if(t.defaultPrevented)return;const{collectionMember:s}=e,r=this.sF(s);if(r){if(null===(i=this.getUserInteractions().drillDown)||void 0===i?void 0:i.click){const e=(null==r?void 0:r.children.length)?r:r.parentID?this.GT[r.parentID]:void 0;e&&(this.UT.C([e]),this.qx=void 0,this.R.O("viewchange",{nodes:this.UT.T().map((t=>t.userNode))}),this.KT=!0),t&&Se(t)}this.St.Bs()}},this.oF=t=>{const e=this.GT[this.HT[t].id]?[this.GT[this.HT[t].id]]:this.NT;this.UT.C(e),this.R.O("viewchange",{nodes:e.map((t=>t.userNode))}),this.KT=!0,this.St.Bs()},this.nodes=new Ct,this.R=new Ct,this.Ct.treeMapChartNodeColors)this.aF=this.Ct.treeMapChartNodeColors;else{const t=this.Ct.pointSeriesFillStyle,e=t=>X(t)?t.getColor():k;this.aF="function"==typeof t?new Array(5).fill(0).map(((i,s)=>e(t(s)))):[e(t)]}this.St.Ma(zn.Lo),this.wp=i.hx("TreeMapChart plotting",0),this.Cp=i.hx("TreeMap UI plotting",1),this.addEventListener("resize",this.zx),this.Uh.jr("TreeMap Chart");const a=i.kp(),l=ee(o?o.cursorBuilder:void 0,il);this.Tp=Ua(this,a,l.jg(a,this.uiScale,this.uiScale,qt,this.Ct),void 0,"show-pointed",lg,(()=>0)),this.lF=this.vs.dA(),this.ag(n,this.uiScale),this.cF=this.wp._d(this.oA).Je(new H).Qe(this.tF),this.uF=this.St.Ms.zo(this,{animationEnabled:!1!==(null==o?void 0:o.animationsEnabled)}),this.dF=new Tl((()=>this.Cp.mn(this.oA).setPointerEvents(!1))),this.fF=new Tl((()=>this.Cp.mn(this.uiScale))),this.cF.setPointerEvents(!0),this.nodes.Ut(this.cF,(t=>{const e=this.sF(t);if(e)return e.userNode})),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.cF.addEventListener("pointerenter",this.iF),this.cF.addEventListener("pointerleave",this.hF),this.cF.addEventListener("click",this.nF),this.cF.addEventListener("pointermove",this.rF)}setCornerRadius(t){return this.Vb=t,this.KT=!0,this.St.Bs(),this}getCornerRadius(){return this.Vb}setData(t){t=Array.isArray(t)?t.slice():[t];const{AF:e}=(()=>{let t=0;return{AF:e=>{var i;const s=e.map(((t,e)=>({node:t,parent:null}))),r=[];for(;s.length>0;){const e=s.pop();if(!e)continue;const{node:n,parent:o}=e;t+=1;const h={id:t,parentID:null==o?void 0:o.id,name:n.name,value:Number(n.value)||0,animatedValue:Number(n.value)||0,children:[],nodeIndex:o?o.nodeIndex:-1,userNode:n};o?o.children.push(h):r.push(h),null===(i=n.children)||void 0===i||i.forEach((t=>{s.push({node:t,parent:h})}))}const n=t=>{t.children.forEach(n),t.children.length>0&&(t.value+=t.children.reduce(((t,e)=>t+e.value),0),t.animatedValue+=t.children.reduce(((t,e)=>t+e.animatedValue),0),t.children.sort(((t,e)=>e.animatedValue-t.animatedValue)))};r.forEach(n);const o=1===e.length?r[0].children:r;return o.sort(((t,e)=>e.animatedValue-t.animatedValue)),o.forEach(((t,e)=>{t.nodeIndex=e;const i=e=>{e.children.forEach((e=>{e.nodeIndex=t.nodeIndex,i(e)}))};i(t)})),r}}})(),i=e(t);return i.forEach((t=>{const e=this.GT[t.id];e&&this.gF(t,e)})),this.qx=void 0,this.UT.C(i),this.NT=i,this.GT=this.pF(i),this.KT=!0,this.St.Bs(),this}setAnimationValues(t,e=1){return this.hp=t?{speed:e}:void 0,this.St.Bs(),this}setInitPathButtonText(t){return this.YT=t,this.KT=!0,this.St.Bs(),this}setDisplayedLevelsCount(t){return this.$T=t,this.KT=!0,this.St.Bs(),this}setDrillDownNode(t){var e,i;if(this.qx=void 0,void 0===t)this.UT.C(this.NT);else{const s=[...this.NT];for(;s.length>0;){const r=s.pop();if(r){if(void 0!==r.value&&r.userNode===t||r.parentID&&Array.isArray(t)&&(null===(i=null===(e=this.GT[r.parentID])||void 0===e?void 0:e.userNode)||void 0===i?void 0:i.children)===t){const t=r.children.length?r:r.parentID?this.GT[r.parentID]:this.NT[0];this.UT.C([t]);break}if(r.children)for(let t=r.children.length-1;t>=0;t-=1)s.push(r.children[t])}}}return this.R.O("viewchange",{nodes:this.UT.T().map((t=>t.userNode))}),this.KT=!0,this.St.Bs(),this}setNodeColoring(t){return t instanceof Array?(this.cF.Je(new H),this.aF=t):this.cF.Je(t),this.KT=!0,this.St.Bs(),this}setParentNodeColor(t){return this.qT=t,this.KT=!0,this.St.Bs(),this}setPathLabelFillStyle(t){return this.XT="function"==typeof t?t(this.XT):t,this.KT=!0,this.St.Bs(),this}getPathLabelFillStyle(){return this.XT}setPathLabelFont(t){return Gs(t)?this.WT=t:this.WT=t(this.WT),this.KT=!0,this.St.Bs(),this}getPathLabelFont(){return this.WT}setHeaderFont(t){return Gs(t)?this.ZT=t:this.ZT=t(this.ZT),this.KT=!0,this.St.Bs(),this}getHeaderFont(){return this.ZT}setHeaderFillStyle(t){return this.jT="function"==typeof t?t(this.jT):t,this.KT=!0,this.St.Bs(),this}getHeaderFillStyle(){return this.jT}setLabelFont(t){return Gs(t)?this.JT=t:this.JT=t(this.JT),this.KT=!0,this.St.Bs(),this}getLabelFont(){return this.JT}setLabelFillStyle(t){return this.QT="function"==typeof t?t(this.QT):t,this.KT=!0,this.St.Bs(),this}getLabelFillStyle(){return this.QT}setNodeBorderStyle(t){return this.cF.Qe(t),this.KT=!0,this.St.Bs(),this}getNodeBorderStyle(){return this.cF.Ua()}setNodeEffect(t){return this.lF.Ls(t),this.St.Bs(),this}getNodeEffect(){return this.lF.Ds()}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}addCursor(t=il){const e=this.JA(),i=t.jg(e,this.uiScale,this.uiScale,this.XA(e),this.Ct);return this.rg(i),i}setAnimationHighlight(t){return this.uF.No(t),this}getAnimationHighlight(){return this.uF.Go()}setHighlightOnHover(t){return this.Ex=t,this}getHighlightOnHover(){return this.Ex}eF(t,e){const i=this.St.Wa(e);return{cursorPosition:{pointMarker:{x:i.engineX,y:i.engineY},pointMarkerScale:this.St.ct,resultTable:{x:i.engineX,y:i.engineY},resultTableScale:this.St.ct},name:t.name,value:t.value,node:t.userNode}}getMinimumSize(){}kf(){return[this]}qe(t){super.qe(t),super.og(),La.yg(this.Uh,this.cg);const i=La.vg(this.Uh,this.cg);if(this.KT&&this.UT.T().length){this.cF.ii(),this.VT.clear(),this.uF.Vo(),this.Bh&&this.vF(t);const s=ng({data:this.UT.T(),dimensions:{x:0+this.Dn.left,y:this.oA.y.getInnerEnd()-i-this.Dn.top,width:this.oA.x.getInnerEnd()-this.Dn.right-this.Dn.left,height:this.oA.y.getInnerEnd()-i-this.Dn.top-this.Dn.bottom}}),r=this.dF.sv();this.yF(s,r),r.finishPlot(),this.mF(),this.NT!==this.UT.T()&&this.NT.length>1&&this.HT.unshift({name:this.YT,id:0});let n=0;const o=this.fF.sv(),h=this.WT;this.HT.forEach(((t,i)=>{const s=o.add(),r=this.St.Kh.Ch(t.name,h,0);let a;s.jr(`← ${t.name}`).Sr(h).th({x:0,y:100}).Ul({x:-1,y:1}).vn({left:this.Dn.left+n,top:this.Dn.top,right:0,bottom:0}).Je(this.XT),s.addEventListener("click",(()=>this.oF(i))),s.addEventListener("pointerenter",(()=>{a=this.engine.setMouseStyle(e.MouseStyles.Point,a)})),s.addEventListener("pointerleave",(()=>{this.engine.restoreMouseStyle(a)})),n+=r.x+25})),o.finishPlot(),this.UT.T().every((t=>t.value===t.animatedValue))?this.KT=!1:this.St.Bs(!0)}return this.Tp.qe(!1,[],void 0,{explicitTarget:this.qx}),this}dispose(){return this.Cp.U(),this.wp.U(),this.Tp.U(),this.cF.dispose(),this.VT.clear(),this.dF.hv(),this.fF.hv(),super.dispose()}X(){return super.X(),this}W(){return super.W(),this}Us(){return Le(this.cF.pr(),this.cF.Ft())}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),Oe(t,this.Ct,i,{}),this}yF(t,e,i=!1,s=0){const r=t.map(((t,e)=>({node:t,isChild:i,visibleDepth:s}))),n=this.Vb?{extent:this.Vb,c_x1_y1:!0,c_x1_y2:!0,c_x2_y1:!0,c_x2_y2:!0}:void 0;for(;r.length>0;){const t=r.pop();if(!t)continue;const{node:i,visibleDepth:s,opacity:o}=t,{x:h,y:a,height:l,width:c,children:u,animatedValue:d,name:f,nodeIndex:g}=i,y=this.aF,p=0===s&&1===this.UT.T().length?this.qT:y[g%y.length],m=this.cF.Oo().Fd(h,a,h+c,a-l).xF(p.setA(p.getA()*((null!=o?o:255)/255))).Kx(d).Td(n);this.VT.set(m,i),this.uF.Oo(m,(t=>m.Dt(t)));const x=h+5,S=a+25+5,v=Math.max(l-25-5,0),A=Math.max(c-5-5,0);if(u&&u.length&&s<this.$T&&A>15&&v>15){const t=ng({data:u,dimensions:{x:A>0?x:h,y:v>0?a-25:S,width:A,height:v}});for(let e=0;e<t.length;e+=1){const n=(255-(u.length>7?50:150))/(u.length-1),h=1===i.id&&1===this.NT.length||this.NT===this.UT.T()?255:o?o/(s+1):255-e*n;r.push({node:t[e],isChild:!0,visibleDepth:s+1,opacity:h})}}const b=0===s&&1===this.UT.T().length?this.jT:this.QT,C=0===s?this.ZT:this.JT,M=this.SF(f,c-25,C),T=this.St.Kh.Ch(M,C,0),E=e.add();c-25>T.x&&l>25?E.jr(M).th({x:h+5,y:a-2.5}).Ul({x:-1,y:1}).Je(b).Sr(C):E.jr("")}}pF(t){const e={},i=[...t];for(;i.length>0;){const t=i.pop();t&&(e[t.id]=t,t.children&&i.push(...t.children))}return e}sF(t){if(!this.KT&&t)return this.VT.get(t)}mF(){this.HT=[];const t=this.UT.T()[0].id;let e=this.GT[t].parentID;for(;e;)this.HT.push({name:this.GT[e].name,id:e}),e=this.GT[e].parentID;return this.HT.reverse()}SF(t,e,i){let s=this.St.Kh.Ch(t,i,0).x;if(s<=e)return t;const r=t.split(" ");let n=t;for(;r.length>1&&s>e;)r.pop(),n=`${r.join(" ")}...`,s=this.St.Kh.Ch(n,i,0).x;if(s>e)for(n=`${r[0]}...`,s=this.St.Kh.Ch(n,i,0).x;n.length>3&&s>e;)n=`${n.substring(0,n.length-4)}...`,s=this.St.Kh.Ch(n,i,0).x;return n.length<=3&&s>e?"":n}vF(t){var e;const i=[...this.NT];for(;i.length>0;){const s=i.pop();if(!s)continue;const r=s.value-s.animatedValue;if(Math.abs(r)<.0015*s.value||void 0===this.hp)s.animatedValue=s.value;else{const i=r/255*((null===(e=this.hp)||void 0===e?void 0:e.speed)||1)*t;s.animatedValue+=i,(r>0&&s.animatedValue>s.value||r<0&&s.animatedValue<s.value)&&(s.animatedValue=s.value)}s.children&&s.children.length>0&&i.push(...s.children)}}gF(t,e){const i=[{current:t,previous:e}];for(;i.length>0;){const t=i.pop();if(!t)continue;const{current:e,previous:s}=t;e.animatedValue=this.Bh?s.animatedValue:e.value,s.nodeIndex<0?e.nodeIndex=0:e.nodeIndex=s.nodeIndex;const r=new Map(s.children.map((t=>[t.id,t])));e.children.forEach(((t,e)=>{const n=r.get(t.id);i.push({current:t,previous:n||s})}))}}setUserInteractions(t){return this.hh=void 0===t?{drillDown:{click:!1}}:t,this}getUserInteractions(){return Gt({drillDown:{click:!0}},this.hh)}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const lg=(t,e,i)=>[[{text:e.name,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],[{text:e.value.toString(),font:{weight:"bold"}}]];class cg extends Oa{constructor(t,e,i,s,r,n,o){super(t,e,i,e.lg("gaugeChart bg",0),s,e.St.Ct.gaugeChartBackgroundFillStyle,e.St.Ct.gaugeChartBackgroundStrokeStyle,e.St.Ct.gaugeChartTitleFont,e.St.Ct.gaugeChartTitleFillStyle,e.St.Ct.gaugeChartTitleShadow,n),this.qc=this.Ct.gaugeChartStartAngle,this.tu=this.Ct.gaugeChartEndAngle,this.bF={start:0,end:100},this.M=0,this.MF=[],this.wF=this.Ct.gaugeChartBarThickness,this._F=this.Ct.gaugeChartValueIndicatorThickness,this.CF=this.Ct.gaugeChartNeedleLength,this.kF=this.Ct.gaugeChartNeedleThickness,this.TF=this.Ct.gaugeChartNeedleFillStyle,this.FF=this.Ct.gaugeChartNeedleStrokeStyle,this.kd=this.Ct.gaugeChartRoundedEdges,this.IF=!0,this.PF=!0,this.LF=!0,this.BF=[],this.DF=[],this.EF=!0,this.RF=!0,this.Kg=this.M,this.zF=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.OF=this.Ct.gaugeChartBarGradient,this.VF=t=>Number.isInteger(t)?t.toString():t.toFixed(2),this.NF=this.Ct.gaugeChartTickFont,this.GF=this.Ct.gaugeChartValueLabelFont,this.UF=this.Ct.gaugeChartValueLabelFillStyle,this.$F=this.Ct.gaugeChartUnitLabelFont,this.YF=this.Ct.gaugeChartUnitLabelFillStyle,this.HF=this.Ct.gaugeChartTickFillStyle,this.XF=this.Ct.gaugeChartBarColor,this.WF=this.Ct.gaugeChartGlowColor,this.jF=this.Ct.gaugeChartGlowColor.getA(),this.ZF=1,this.QF=1,this.JF=this.Ct.gaugeChartNeedleAlignment,this.KF=!1,this.qF=this.Ct.gaugeChartGapBetweenBarAndValueIndicators,this.tI=this.Ct.gaugeChartBarStrokeStyle,this.iI=!1,this.R=new Ct,this.St.Ma(zn.yo),this.Uh.jr("Gauge Chart"),this.ag(r,this.oA),this.setAnimationsEnabled(!1!==(null==o?void 0:o.animationsEnabled)),this.sI=this.XF,this.eI=this.WF,this.hI=C(0,0,0,0),this.rI=this.vs.dA(),this.nI=this.vs.dA().Ls(this.Ct.effectsText),this.oI=this.HA.Ru(this.oA).Qe(this.tI).setPointerEvents(!1),this.aI=this.HA.Pd(this.oA).lu(0).dh(360).fu(0).Qe(Ot).setPointerEvents(!1),this.lI=this.ug.uh(this.oA).ah(this.Ct.gaugeChartNeedleStrokeStyle).setPointerEvents(!1),this.cI=this.ug.uh(this.oA).ah(new er({thickness:this.kF,fillStyle:this.TF})).setPointerEvents(!1),this.uI=this.ug.mn(this.oA).Sr(this.GF).Je(this.UF).setPointerEvents(!1),this.ff=this.ug.mn(this.oA).Sr(this.$F).Je(this.YF).jr("").setPointerEvents(!1),this.dI=this.HA.mn(this.oA).Sr(this.NF).Je(this.HF).setPointerEvents(!1),this.fI=this.HA.mn(this.oA).Sr(this.NF).Je(this.HF).setPointerEvents(!1),this.rI.Cs([this.oI]),this.nI.Cs([this.uI,this.ff,this.dI,this.fI]),this.AI(),this.addEventListener("resize",(()=>{this.KF=!0}))}AI(){this.cI.ah((t=>t.setThickness(this.kF))),this.lI.ah((t=>t.setThickness(2*this.FF.getThickness()+this.kF)))}setAnimationsEnabled(t){return this.Bh=t,this.RF=t,this.EF=t,this}setInterval(t,e){return this.bF={start:t,end:e},this.KF=!0,this.St.Bs(),this}getInterval(){return this.bF}setTickFillStyle(t){return this.HF="function"==typeof t?t(this.HF):t,this.DF.forEach((e=>{e.start.Je(t),e.end.Je(t)})),this.dI.Je(t),this.fI.Je(t),this.KF=!0,this.St.Bs(),this}getTickFillStyle(){return this.HF}setTickFont(t){return this.NF="function"==typeof t?t(this.NF):t,this.DF.forEach((e=>{e.start.Sr(t),e.end.Sr(t)})),this.dI.Sr(t),this.fI.Sr(t),this.KF=!0,this.St.Bs(),this}getTickFont(){return this.NF}setTickFormatter(t){return this.zF=t,this.KF=!0,this.St.Bs(),this}getTickFormatter(){return this.zF}setValueLabelFillStyle(t){return this.UF="function"==typeof t?t(this.UF):t,this.uI.Je(t),this.KF=!0,this.St.Bs(),this}getValueLabelFillStyle(){return this.uI.pr()}setValueLabelFont(t){return this.GF="function"==typeof t?t(this.GF):t,this.uI.Sr(t),this.KF=!0,this.St.Bs(),this}getValueLabelFont(){return this.uI.mr()}setValueFormatter(t){return this.VF="string"==typeof t?e=>t:t,this.KF=!0,this.St.Bs(),this}getValueLabel(){return this.uI.Jr()||this.VF}setUnitLabelFillStyle(t){return this.YF="function"==typeof t?t(this.YF):t,this.ff.Je(t),this.KF=!0,this.St.Bs(),this}getUnitLabelFillStyle(){return this.ff.pr()}setUnitLabelFont(t){return this.$F="function"==typeof t?t(this.$F):t,this.ff.Sr(t),this.KF=!0,this.St.Bs(),this}getUnitLabelFont(){return this.ff.mr()}setUnitLabel(t){return this.ff.jr(t),this.KF=!0,this.St.Bs(),this}getUnitLabel(){return this.ff.Jr()}setNeedleFillStyle(t){return this.TF="function"==typeof t?t(this.TF):t,this.cI.ah((e=>e.setFillStyle(t))),this.KF=!0,this.St.Bs(),this}getNeedleFillStyle(){return this.cI.ro().getFillStyle()}setNeedleThickness(t){return this.kF=t,this.AI(),this.KF=!0,this.St.Bs(),this}getNeedleThickness(){return this.kF}setNeedleStrokeStyle(t){return this.FF="function"==typeof t?t(this.FF):t,this.lI.ah(t),this.AI(),this.KF=!0,this.St.Bs(),this}getNeedleStrokeStyle(){return this.lI.ro()}setNeedleLength(t){return this.CF=t,this.KF=!0,this.St.Bs(),this}getNeedleLength(){return this.CF}setBarColor(t){return this.XF=t,this.KF=!0,this.St.Bs(),this}getBarColor(){return this.sI}setBarGradient(t){return this.OF=t,this.KF=!0,this.St.Bs(),this}getBarGradient(){return this.OF}setBarStrokeStyle(t){return this.tI="function"==typeof t?t(this.tI):t,this.oI.Qe(t),this.KF=!0,this.St.Bs(),this}getBarStrokeStyle(){return this.oI.Ua()}setBarThickness(t){return this.wF=t,this.KF=!0,this.St.Bs(),this}getBarThickness(){return this.wF}setAngleInterval(t,e){return Math.abs(t-e)>360&&(e=t<e?t+360:t-360),this.qc=t,this.tu=e,this.KF=!0,this.St.Bs(),this}getAngleInterval(){return{start:this.qc,end:this.tu}}setValue(t){return this.iI&&this.St.Ma(zn.Fo),this.iI=!0,this.M=t,this.EF||(this.Kg=this.M),this.KF=!0,this.St.Bs(),this}getValue(){return this.M}setValueAnimation(t,e=1){return this.EF=t,this.ZF=Math.max(0,e),this.KF=!0,this.St.Bs(),this}setColorAnimation(t,e=1){return this.RF=t,this.QF=Math.max(0,e),this.KF=!0,this.St.Bs(),this}setRoundedEdges(t){return this.kd=t,this.KF=!0,this.St.Bs(),this}getRoundedEdges(){return this.kd}setValueIndicators(t){return this.MF=t,this.BF.forEach((t=>{t.dispose()})),this.BF.length=0,this.DF.forEach((t=>{t.start.dispose(),t.end.dispose()})),this.DF.length=0,this.MF.forEach((t=>{const e=this.HA.Ru(this.oA).Qe(Ot).Je(new N({color:t.color})).setPointerEvents(!1);this.BF.push(e);const i=this.HA.mn(this.oA).Sr(this.NF).Je(this.HF).setPointerEvents(!1),s=this.HA.mn(this.oA).Sr(this.NF).Je(this.HF).setPointerEvents(!1);this.DF.push({start:i,end:s})})),this.rI.Cs([this.oI,...this.BF]),this.nI.Cs([this.uI,this.ff,this.dI,this.fI,...this.DF.map((t=>[t.start,t.end])).flat()]),this.KF=!0,this.St.Bs(),this}getValueIndicators(){return this.MF}setValueIndicatorThickness(t){return this._F=t,this.KF=!0,this.St.Bs(),this}getValueIndicatorThickness(){return this._F}setAutomaticBarColoring(t){return this.LF=!!t,this.KF=!0,this.St.Bs(),this}getAutomaticBarColoring(){return this.LF}setGlowColor(t){return void 0===t?(this.IF=!1,this.eI=void 0):"object"==typeof t&&"auto"in t?(this.PF=t.auto,t.auto&&(this.eI=void 0),void 0!==t.alpha&&(this.jF=t.alpha),this.IF=!0):(this.eI=t,this.jF=t.getA(),this.PF=!1,this.IF=!0),this.KF=!0,this.St.Bs(),this}getAutomaticGlowColoring(){return this.PF}setNeedleAlignment(t){return this.JF=t,this.KF=!0,this.St.Bs(),this}getNeedleAlignment(){return this.JF}setGapBetweenBarAndValueIndicators(t){return this.qF=t,this.KF=!0,this.St.Bs(),this}getGapBetweenBarAndValueIndicators(){return this.qF}setBarEffect(t){return this.rI.Ls(t),this.St.Bs(),this}getBarEffect(){return this.rI.Ds()}setLabelEffect(t){return this.nI.Ls(t),this.St.Bs(),this}getLabelEffect(){return this.nI.Ds()}qe(t){var i;if(super.qe(t),La.yg(this.Uh,this.cg),super.og(),this.Kg!==this.M){if(this.EF){const e=5e-4*t,i=.003*t,s=Math.sign(this.M-this.Kg);this.Kg=this.Kg+e*s+i*this.ZF*(this.M-this.Kg),s!==Math.sign(this.M-this.Kg)?this.Kg=this.M:this.St.Bs(!0)}else this.Kg=this.M;this.KF=!0}let s=this.MF.find((t=>this.Kg>=t.start&&this.Kg<=t.end));if(s||(this.Kg<this.bF.start?s=this.MF.find((t=>t.start===this.bF.start)):this.Kg>this.bF.end&&(s=this.MF.find((t=>t.end===this.bF.end)))),this.sI=this.LF&&s?s.color:this.XF,this.RF){if(this.hI!==this.sI){const e=this.hI.getR(),i=this.hI.getG(),s=this.hI.getB(),r=this.sI.getR(),n=this.sI.getG(),o=this.sI.getB(),h=Math.sign(r-e),a=Math.sign(n-i),l=Math.sign(o-s),c=.005*t,u=.003*t;this.hI=C(e+c*h+u*this.QF*(r-e),i+c*a+u*this.QF*(n-i),s+c*l+u*this.QF*(o-s));const d=Math.abs(r-this.hI.getR()),f=Math.abs(n-this.hI.getG()),g=Math.abs(o-this.hI.getB());d<1&&f<1&&g<1?this.hI=this.sI:this.St.Bs(!0),this.KF=!0}}else this.hI=this.sI;if(this.KF){let t=hi,r=ai,n=hi,o=ai;if(new Array(100).fill(0).forEach(((e,i,s)=>{const h=this.qc+i/s.length*(this.tu-this.qc),a=Math.sin(h*Math.PI/180),l=Math.cos(h*Math.PI/180);a<t&&(t=a),a>r&&(r=a),l<n&&(n=l),l>o&&(o=l)})),this.OF?this.oI.Je(new q({stops:[{offset:0,color:M("#000000")},{offset:1,color:this.hI}],position:{x:.5,y:.5}})):this.oI.Je(new N({color:this.hI})),this.IF){const t=this.PF&&s?this.hI:null!==(i=this.eI)&&void 0!==i?i:this.WF;this.aI.Je(new q({stops:[{offset:0,color:t.setA(this.jF)},{offset:1,color:t.setA(0)}],position:{x:.5,y:.5},extent:e.GradientExtent.farthestSide}))}else this.aI.Je(V);const h=this.zF(this.bF.start),a=this.zF(this.bF.end);let l=0,c=0;const u=this.St.Kh.Ch(h,this.dI.mr(),this.dI.Mr()),d=this.St.Kh.Ch(a,this.fI.mr(),this.fI.Mr());u.x>l&&(l=u.x),u.y>c&&(c=u.y),d.x>l&&(l=d.x),d.y>c&&(c=d.y),this.DF.forEach(((t,e)=>{if(e>=this.MF.length)return;const i=this.MF[e],s=this.zF(i.start),r=this.zF(i.end),n=this.St.Kh.Ch(s,t.start.mr(),t.start.Mr()),o=this.St.Kh.Ch(r,t.end.mr(),t.end.Mr());n.x>l&&(l=n.x),n.y>c&&(c=n.y),o.x>l&&(l=o.x),o.y>c&&(c=o.y)}));const f=this.MF.length>0?this._F:0,g=this.oA.getInnerIntervalPixels(),y=La.vg(this.Uh,this.cg),p={x:g.x-(this.Dn.left+this.Dn.right),y:g.y-(this.Dn.bottom+this.Dn.top)-y},m={x:this.Dn.left+.5*p.x,y:this.Dn.bottom+.5*p.y},x=f+2*this.qF+this.wF/2,S=l+x,v=c+x,A=v+y,b=p.y-(A+v),C=p.x-(S+S),T=Math.max(0,b<C?b:C),E=.5*T,w=.5*E,B=(t+r)*w,k=(n+o)*w,R={x:m.x-k,y:m.y-B},F=T>0;if(this.oI.setVisible(F),this.BF.forEach((t=>t.setVisible(F))),this.cI.setVisible(F),this.lI.setVisible(F),this.aI.setVisible(F),this.ff.setVisible(F),this.uI.setVisible(F),this.dI.setVisible(F),this.fI.setVisible(F),this.DF.forEach((t=>{t.start.setVisible(F),t.end.setVisible(F)})),!F)return;const I={x:m.x-.5*k,y:m.y-.5*B};this.aI.th(m).cu(.5*Math.min(p.x,p.y)),this.uI.th(I).jr(this.VF(this.Kg));let O=this.uI.Pu(),L=this.ff.Pu();0===O.y&&(O=this.St.Kh.Ch(this.uI.Jr(),this.uI.mr(),this.uI.Mr())),0===L.y&&(L=this.St.Kh.Ch(this.ff.Jr(),this.ff.mr(),this.ff.Mr())),this.ff.th({x:I.x,y:I.y-O.y-L.y/4});const D=fg(this.bF,this.qc,this.tu,this.Kg,R,E+this.JF*(this.CF/2+this.wF/2)),P=D.angle*(Math.PI/180),_=.5*this.CF,z=Math.cos(P),U=Math.sin(P);this.cI.fh({x:D.x+_*z,y:D.y+_*U}).dh({x:D.x-_*z,y:D.y-_*U}),this.lI.fh({x:D.x+_*z,y:D.y+_*U}).dh({x:D.x-_*z,y:D.y-_*U});const X=ug(R,E,this.qc,this.tu,this.wF,this.kd,!1,!1);this.oI.wc(X).Lt({min:{x:R.x-E,y:R.y-E},max:{x:R.x+E,y:R.y+E}});const H=R.y+E,G=R.y-E,Y=R.x+E,W=R.x-E,[j,$]=this.bF.start<this.bF.end?[this.bF.start,this.bF.end]:[this.bF.end,this.bF.start],Q=E+.5*this.wF+f/2+this.qF,J=Q+f/2;this.MF.forEach(((t,e)=>{var i,s;const r=t.start>=j&&t.end<=$;this.BF[e].setVisible(r),this.DF[e].start.setVisible(r),this.DF[e].end.setVisible(r);const n=fg(this.bF,this.qc,this.tu,t.start,R,J),o=fg(this.bF,this.qc,this.tu,t.end,R,J),h=ug(R,Q,n.angle,o.angle,this._F,this.kd,!(0===e),!(e===this.MF.length-1));this.BF[e].wc(h);const a=this.bF.start===t.start||this.bF.end===t.start,l=this.bF.start===t.end||this.bF.end===t.end||this.MF.some((e=>e.start===t.end&&e!==t));this.DF[e].start.th({x:n.x,y:n.y}).Ul({x:Math.min(1,Math.max(-1,2*(n.x-Y)/(W-Y)-1)),y:Math.min(1,Math.max(-1,2*(n.y-H)/(G-H)-1))}).jr(null!==(i=t.startLabel)&&void 0!==i?i:a?"":this.zF(t.start)),this.DF[e].end.th({x:o.x,y:o.y}).Ul({x:Math.min(1,Math.max(-1,2*(o.x-Y)/(W-Y)-1)),y:Math.min(1,Math.max(-1,2*(o.y-H)/(G-H)-1))}).jr(null!==(s=t.endLabel)&&void 0!==s?s:l?"":this.zF(t.end))}));const Z=this.MF.some((t=>t.start<t.end?this.bF.start>=t.start&&this.bF.start<=t.end:this.bF.start<=t.start&&this.bF.start>=t.end)),K=fg(this.bF,this.qc,this.tu,this.bF.start,R,Z?J:Q-this.qF);this.dI.th({x:K.x,y:K.y}).Ul({x:Math.min(1,Math.max(-1,2*(K.x-Y)/(W-Y)-1)),y:Math.min(1,Math.max(-1,2*(K.y-H)/(G-H)-1))}).jr(h);const tt=this.MF.some((t=>t.start<t.end?this.bF.end>=t.start&&this.bF.end<=t.end:this.bF.end<=t.start&&this.bF.end>=t.end)),et=fg(this.bF,this.qc,this.tu,this.bF.end,R,tt?J:Q-this.qF);this.fI.th({x:et.x,y:et.y}).Ul({x:Math.min(1,Math.max(-1,2*(et.x-Y)/(W-Y)-1)),y:Math.min(1,Math.max(-1,2*(et.y-H)/(G-H)-1))}).jr(a),this.KF=!1}}getMinimumSize(){return{x:150,y:150}}Us(){}kf(){return[this]}attach(t,e=!0,i=!1){return t.setText(this.getTitle()),t.setOn(!0).setLocked(!0),t.setPointerEvents(!1),Oe(t,this.Ct,i,{fill:new N({color:this.getBarColor()})}),this}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const ug=(t,e,i,s,r,n=!0,o=!0,h=!0)=>{const a=[],l=.5*r,c=i>s,u=Math.sign(i-s),d=-1*u;if(n){const t=l/(2*Math.PI*e)*360+.1;o&&(i+=t*d),h&&(s+=t*u)}else i+=.1*d,s+=.1*u;const f=dg(t,e+l,i,s,c);if(a.push(...f),n){const r={x:t.x+e*Math.cos(s*(Math.PI/180)),y:t.y+e*Math.sin(s*(Math.PI/180))};let n;n=i>s?dg(r,l,s+180,s+360,c):dg(r,l,s-180,s-360,c),a.push(...n)}const g=dg(t,e-l,s,i,!c);if(a.push(...g),n){const r={x:t.x+e*Math.cos(i*(Math.PI/180)),y:t.y+e*Math.sin(i*(Math.PI/180))};let n;n=i>s?dg(r,l,i-180,i-360,c):dg(r,l,i+180,i+360,c),a.push(...n)}return a},dg=(t,e,i,s,r)=>{i<s&&([i,s]=[s,i]);const n=[],o=r?-2:2,h=r?t=>t>s:t=>t<i;for(let a=r?i:s;h(a);a+=o){const i=a*(Math.PI/180),s=t.x+e*Math.cos(i),r=t.y+e*Math.sin(i);n.push({x:s,y:r})}const a=(r?s:i)*(Math.PI/180),l=t.x+e*Math.cos(a),c=t.y+e*Math.sin(a);return n.push({x:l,y:c}),n},fg=(t,e,i,s,r,n)=>{const[o,h]=t.start<t.end?[t.start,t.end]:[t.end,t.start],a=Math.max(o,Math.min(h,s)),l=t.start<t.end?i-e:e-i,c=t.start<t.end?e+(a-t.start)/(t.end-t.start)*l:e-(a-t.start)/(t.end-t.start)*l,u=c*(Math.PI/180);return{x:r.x+n*Math.cos(u),y:r.y+n*Math.sin(u),angle:Math.round(c)}};class gg extends bl{constructor(t,e,i,s,r,n,o,h,a,l,c){super(t,e,i,s,r,n,o,h,a,l),this.gI=c}setLabelAlignment(t){return this.gI=t,this.Bs(),this}getLabelAlignment(){return this.gI}}class yg extends Tn{constructor(t,i,s,r,n,o,h){let a;super(t,{nn:()=>t.pI?t.pI[this.key].max:void 0,rn:()=>t.pI?t.pI[this.key].min:void 0,ln:()=>{}},o,i,s,{numeric:i.parallelCoordinateAxisNumericTicks||i.yAxisNumericTicks,datetime:i.parallelCoordinateAxisDateTimeTicks||i.yAxisDateTimeTicks,time:i.parallelCoordinateAxisTimeTicks||i.yAxisTimeTicks},{type:"linear"}),this.vI=[],this.Ef=[],this.yI=8,this.ft=!1,this.R=new Ct,this.chart=t,this.key=r,this.userID=n,this.vs=this.chart.St.vs.ys(this,{}),this.Hs=h,this.mI=h.Ke(t.xI).Je(this.Ct.parallelCoordinateAxisBackgroundFillStyle||V).Qe(Ot).setPointerEvents(!1),this.jh=h.mn(t.xI).Sr(this.Ct.parallelCoordinateAxisTitleFont||this.Ct.yAxisTitleFont).Je(this.Ct.parallelCoordinateAxisTitleFillStyle||this.Ct.yAxisTitleFillStyle).setPointerEvents(!1).vn(qe).yn(qe),this.wr=this.vs.dA([this.jh]).Ls(i.effectsText),this.eT=h.uh(t.xI).ah(i.parallelCoordinateAxisStrokeStyle||i.yAxisStrokeStyle),this.setAnimationsEnabled(!1),this.addEventListener("intervalchange",(e=>{t.SI(this,e.start,e.end)})),this.eT.addEventListener("pointerenter",(()=>{var t,i;(null===(i=null===(t=this.chart.getUserInteractions().rangeSelectors)||void 0===t?void 0:t.create)||void 0===i?void 0:i.doubleClickAxis)&&(a=this.chart.engine.setMouseStyle(e.MouseStyles.Point))})),this.eT.addEventListener("pointerleave",(()=>{a=this.chart.engine.restoreMouseStyle(a)})),this.eT.addEventListener("dblclick",(t=>{var e,i;t.defaultPrevented||(null===(i=null===(e=this.chart.getUserInteractions().rangeSelectors)||void 0===e?void 0:e.create)||void 0===i?void 0:i.doubleClickAxis)&&(this.addRangeSelector(),Se(t))})),this.setTitle(r)}setBackgroundFillStyle(t){return this.mI.Je(t),this.Hs.Bs(),this}getBackgroundFillStyle(){return this.mI.pr()}setStrokeStyle(t){const e="function"==typeof t?t(this.eT.ro()):t,i=e.getFillStyle();return j(i)?(this.bI=i.lut,this.chart.MI=!0):this.bI=void 0,this.eT.ah(e),this.chart.St.Bs(),this}getStrokeStyle(){return this.eT.ro()}setTickStrategy(t,e){return super.ar(t,e)}getTickStrategy(){return this.Fh}addRangeSelector(){const t=this.Rr(),i=this.Hs.Ke(this.chart.xI).Je(this.Ct.parallelCoordinateAxisRangeSelectorFillStyle||this.Ct.dataGridScrollBarFillStyle).Qe(this.Ct.parallelCoordinateAxisRangeSelectorStrokeStyle||this.Ct.dataGridScrollBarStrokeStyle);let s;const r=t=>{var i,r;(null===(r=null===(i=this.chart.getUserInteractions().rangeSelectors)||void 0===i?void 0:i.move)||void 0===r?void 0:r.drag)&&(s=this.chart.engine.setMouseStyle(e.MouseStyles.Vertical,s))},n=t=>{s=this.chart.engine.restoreMouseStyle(s)};i.addEventListener("pointermove",r),i.addEventListener("pointerleave",n),i.addEventListener("pointerdown",(t=>{var e,h;if(!(null===(h=null===(e=this.chart.getUserInteractions().rangeSelectors)||void 0===e?void 0:e.move)||void 0===h?void 0:h.drag))return;const a=this.chart.getCursorMode();let l;this.chart.setCursorMode(void 0);const c=this.chart.St.Wa(t),u=ot({x:c.engineX,y:c.engineY},this.chart.St.ct,this.chart.xI),d=this.chart.xI.y.Li(i.Qt(),10),f=this.chart.xI.y.Li(i.Jt(),-10);l=u.y<=d?"scaleMin":u.y>=f?"scaleMax":"move",Se(t);let g=t;const y=t=>{if(void 0===this.wI)return;const e=.05*Math.abs(this.cr-this.lr),i=(t.clientX,g.clientX,t.clientY-g.clientY);if(g=t,"move"===l){const t=o.max-o.min,e=this.chart._I(o.max,this.wI,this).y,s=this.chart.xI.y.Li(e,-i),r=this.chart.CI(s,this.wI,this);o.max=Kt(r,Math.max(this.lr,this.cr),Math.min(this.lr,this.cr)+t),o.min=o.max-t}else if("scaleMax"===l){const t=this.chart._I(o.max,this.wI,this).y,s=this.chart.xI.y.Li(t,-i),r=this.chart.CI(s,this.wI,this);o.max=Kt(r,o.min+e,Math.max(this.lr,this.cr))}else if("scaleMin"===l){const t=this.chart._I(o.min,this.wI,this).y,s=this.chart.xI.y.Li(t,-i),r=this.chart.CI(s,this.wI,this);o.min=Kt(r,o.max-e,Math.min(this.lr,this.cr))}this.chart.kI(),Se(t)},p=e=>{e.pointerId===t.pointerId&&(this.chart.setCursorMode(a),i.addEventListener("pointermove",r),i.addEventListener("pointerleave",n),Wt.removeEventListener("pointermove",y),Wt.removeEventListener("pointerup",p),s=this.chart.engine.restoreMouseStyle(s))};i.removeEventListener("pointermove",r),i.removeEventListener("pointerleave",n),Wt.addEventListener("pointermove",y),Wt.addEventListener("pointerup",p)})),i.addEventListener("dblclick",(t=>{var e,i;if(!(null===(i=null===(e=this.chart.getUserInteractions().rangeSelectors)||void 0===e?void 0:e.dispose)||void 0===i?void 0:i.doubleClick))return;const s=this.vI.indexOf(o);s>=0&&this.vI.splice(s,1),o.shape.dispose(),this.chart.kI(),Se(t)}));const o={min:t.min+.25*(t.max-t.min),max:t.max-.25*(t.max-t.min),shape:i};this.vI.push(o),this.chart.kI();const h={setInterval:(t,e)=>(o.min=Math.min(t,e),o.max=Math.max(t,e),this.chart.kI(),h),setPointerEvents:t=>(i.setPointerEvents(t),h),dispose:()=>{const t=this.vI.indexOf(o);return t>=0&&(this.vI.splice(t,1),this.chart.kI()),h}};return h}addCustomTick(){const t=new gg((()=>this.chart.St.Bs()),(()=>{const e=this.Ef.indexOf(t);e>=0&&this.Ef.splice(e,1)}),(this.Ct.parallelCoordinateAxisNumericTicks||this.Ct.yAxisNumericTicks).majorTickStyle.tickStyle,(this.Ct.parallelCoordinateAxisNumericTicks||this.Ct.yAxisNumericTicks).majorTickStyle.tickLength,(this.Ct.parallelCoordinateAxisNumericTicks||this.Ct.yAxisNumericTicks).majorTickStyle.gridStrokeStyle,(this.Ct.parallelCoordinateAxisNumericTicks||this.Ct.yAxisNumericTicks).majorTickStyle.tickPadding,(this.Ct.parallelCoordinateAxisNumericTicks||this.Ct.yAxisNumericTicks).majorTickStyle.labelRotation,(this.Ct.parallelCoordinateAxisNumericTicks||this.Ct.yAxisNumericTicks).majorTickStyle.labelFillStyle,(this.Ct.parallelCoordinateAxisNumericTicks||this.Ct.yAxisNumericTicks).majorTickStyle.labelFont,(t=>this.formatValue(t)),(this.Ct.parallelCoordinateAxisNumericTicks||this.Ct.yAxisNumericTicks).majorTickStyle.labelAlignment);return this.Ef.push(t),this.chart.St.Bs(),t}qe(t){this.wI=t.parallelAxisIndex;const e=Math.min(this.lr,this.cr),i=Math.max(this.lr,this.cr);for(const[e,i]of this.Ih)for(const[,s]of i){const i=t.ticksInfo.get(s);i&&(t.plotAxisLines.add({positions:[i.positionTicklineStart,i.positionTicklineEnd]},{lineStyle:e.kh.tickStyle}),s.Lr.th(i.labelPosition).Ul(i.labelAlignment).br(i.labelRotation).El(i.labelOffset.x,i.labelOffset.y))}this.Ef.forEach((s=>{if(!s.At||s.M<e||s.M>i)return;const r=this.TI(t.parallelAxisIndex,t.halfAxisThickness,s.M,s.$p,s.Hp,s.gI);t.plotAxisLines.add({positions:[r.positionTicklineStart,r.positionTicklineEnd]},{lineStyle:s.Gp}),t.plotAxisText.add().th(r.labelPosition).Ul(r.labelAlignment).Je(s.Rg).Sr(s.Xp).jr(s.ho(s.M)).br(s.cf).setPointerEvents(s.dt)})),this.eT.fh({x:t.parallelAxisIndex,y:0}).dh({x:t.parallelAxisIndex,y:1}),this.jh.th({x:t.parallelAxisIndex,y:this.chart.xI.y.Li(0,-(t.halfAxisThickness+this.yI))}).br(this.getTitleRotation()).Ul({x:0,y:1});const s=0===t.parallelAxisIndex?t.parallelAxisIndex:this.chart.xI.x.Li(t.parallelAxisIndex,-1.2*t.xA);this.mI.th({x:s,y:0}).J({x:t.parallelAxisIndex-s,y:1});const r=this.chart.xI.rs();this.vI.forEach((e=>{const i=this.chart._I(e.min,t.parallelAxisIndex,this),s=this.chart._I(e.max,t.parallelAxisIndex,this),n={x:t.parallelAxisIndex-10*r.x*.5,y:i.y},o=t.parallelAxisIndex+10*r.x*.5,h=s.y;e.shape.th(n).J({x:o-n.x,y:h-n.y})}))}U(){this.mI.dispose(),this.jh.dispose(),this.eT.dispose(),this.vI.forEach((t=>t.shape.dispose())),this.vI.length=0,this._r(),this.Yr(),this.ft=!0,this.R.O("dispose",{})}isDisposed(){return this.ft}TI(t,e,i,s,r,n){const o=this.chart.xI.Li({x:t,y:(i-this.lr)/(this.cr-this.lr)},{x:0-e,y:0}),h=this.chart.xI.Li(o,{x:-s,y:0});return{positionTicklineStart:o,positionTicklineEnd:h,labelPosition:this.chart.xI.Li(h,{x:-r,y:0}),labelAlignment:{x:1,y:n}}}Or(t){const e=this.eT.ro();return{halfAxisThickness:ir(e)?e.getThickness()/2:0}}Ur(t,e,i,s,r){const n=e.kh,o=this.getInterval();return{...this.TI(s.parallelAxisIndex,r.halfAxisThickness,t,n.getTickLength(),n.getTickPadding(),2*(t-o.start)/(o.end-o.start)-1),keyValue:t,tickLevel:e,labelText:i,labelRotation:n.labelRotation,labelOffset:{x:0,y:0}}}Zr(t,e){return new En(e,t,this.Hs,this.chart.xI)}Hr(t,e,i){const s=this.jh&&this.jh.Jr().length>0&&this.getTitleFillStyle()!==V?this.jh.Dr().Pu():{x:0,y:0};let r=0;this.Ih.forEach(((t,e)=>{const i=e.kh.tickLength+e.kh.tickPadding;t.forEach((t=>{if(!t.Lr.getVisible())return void(r=Math.max(r,i));const e=i+t.Lr.Dr().Pu().x;r=Math.max(r,e)}))}));const n=this.Ef.reduce(((t,e)=>Math.max(t,e.At?this.chart.St.Kh.Ch(e.ho(e.M),e.Xp,e.cf).x+e.$p+e.Hp:0)),0);r=Math.max(r,n);const o=s.y+this.yI;r=Math.max(r,s.x/2);const h=r;return{xA:r,FI:o,II:s.x,vf:h,ticksInfo:e,updatedTicks:i}}Qh(){return this.chart.xI}un(t,e){return Ss(t,e,this.ct)}An(t,e,i){return{start:t,end:e}}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}setPointerEvents(t){return this.R.setPointerEvents(t),this}getPointerEvents(){return this.R.getPointerEvents()}}class pg extends Dc{constructor(t,e,i,s,r){super(t,e,i,s),this.Rs="Parallel Coordinate Series",this.LI=!1,this.R=new Ct,this._e=t;const n=void 0!==(null==r?void 0:r.automaticColorIndex)?r.automaticColorIndex:this._e.getSeries().length;this.BI=Ve(this.Ct.parallelCoordinateChartSeriesColor,n)||(()=>{const t=Ve(this.Ct.lineSeriesStrokeStyle,n).getFillStyle();return(X(t)?t.getColor():void 0)||C(255,255,0)})(),this.addEventListener("visiblechange",(t=>{this._e.DI()})),this.addEventListener("dispose",(t=>{this._e.DI()})),this.setHighlightOnHover(!1)}setData(t){const e=void 0!==this.EI;return this.EI=this._e.RI(t),e&&this._e.zI(),this}getData(){return this.EI}setColor(t){const e="function"==typeof t?t(this.BI):t;return e===this.BI||(this.BI=e,this._e.St.Bs(),this._e.OI(this)),this}getColor(){return this.BI}Ev(){return this.getAutoScrollingEnabled()}$v(){}qe(){}tv(){}styleLegendEntry(t,e=!1){Oe(t,this.Ct,e,{fill:new N({color:this.BI})})}mg(){return super.mg()&&!this.LI}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}class mg extends Nl{constructor(t,e,i,s,r,n,o){var h,a;super(t,e,i,e.lg("parallelAxisChart bg",0),s,e.St.Ct.parallelCoordinateChartBackgroundFillStyle||e.St.Ct.chartXYBackgroundFillStyle,e.St.Ct.parallelCoordinateChartBackgroundStrokeStyle||e.St.Ct.chartXYBackgroundStrokeStyle,e.St.Ct.parallelCoordinateChartTitleFont||e.St.Ct.chartXYTitleFont,e.St.Ct.parallelCoordinateChartTitleFillStyle||e.St.Ct.chartXYTitleFillStyle,e.St.Ct.parallelCoordinateChartTitleShadow||e.St.Ct.chartXYTitleShadow,n),this.axes=[],this.VI=!0,this.NI=Je(),this.GI=new Map,this.UI=this.Ct.parallelCoordinateChartSeriesColorUnselected||C(255,255,255,30),this.$I=p({resolution:32}),this.MI=!1,this.YI=!1,this.HI=!0,this.XI=!1,this.WI=!1,this.jI=!1,this.ZI=!1,this.da=t=>{this.xI.J(t.engineWidth,t.engineHeight)},this.R=new Ct,this.RC=e._p("parallelAxisChart series",0),this.QI=e._p("parallelAxisChart labels",1),this.Uh.jr("Parallel Coordinate Chart"),this.St.Ma(zn.Bo),this.xI=this.ZA.d2({scaleXYConstructor:hs}).ss(0,1),this.ag(r,this.xI),this.uy=this.HA.Ke(this.xI).th({x:0,y:0}).J({x:0,y:1}).Je(this.Ct.parallelCoordinateChartSeriesBackgroundFillStyle||this.Ct.chartXYSeriesBackgroundFillStyle).Qe(Ot).setPointerEvents(!0),this.Ay=this.HA.Ke(this.xI).th({x:0,y:0}).J({x:0,y:1}).Je(V).Qe(this.Ct.parallelCoordinateChartSeriesBackgroundStrokeStyle||this.Ct.chartXYBackgroundStrokeStyle).setPointerEvents(!1),super.ly(this.uy,this.Ay),this.setSeriesBackgroundEffect(!1),this.JI=new er({thickness:null!==(h=this.Ct.parallelCoordinateChartSeriesLineThickness)&&void 0!==h?h:2,fillStyle:new H}),this.KI=new er({thickness:null!==(a=this.Ct.parallelCoordinateChartSeriesLineThickness)&&void 0!==a?a:2,fillStyle:new N({color:this.Ct.parallelCoordinateChartSeriesColorUnselected})}),this.qI=this.NI.Kt(this.RC.CA(this.xI)).ah(this.JI),this.qI.Su=5e4,this.tP=this.RC.CA(this.xI).ah(this.Ct.parallelCoordinateChartPointedSeriesLineStyle||Ve(this.Ct.lineSeriesStrokeStyle,0)).setPointerEvents(!1),this.iP=new Tl((()=>this.QI.mn(this.xI))),this.sP=new Ml((()=>this.QI.CA(this.xI).setPointerEvents(!1)),((t,e,i)=>(t.ii().ah(i.lineStyle),e.map((({positions:e})=>t.Oo().TA(e[0],e[1]))))));const l=e.kp(),c=ee(o?o.cursorBuilder:void 0,nl);this.Tp=Ua(this,l,c.jg(l,this.uiScale,this.uiScale,qt,this.Ct),this,"show-nearest",xg,(()=>0)),this.addEventListener("resize",this.da)}setCursor(t){return this.Tp.setCursor(t),this}getCursor(){return this.Tp.getCursor()}setCursorMode(t){return this.Tp.setCursorMode(t),this}getCursorMode(){return this.Tp.getCursorMode()}setCustomCursor(t){return this.Tp.setCustomCursor(t),this}setCursorFormatting(t){return this.Tp.setCursorFormatting(t),this}getCursorFormatting(){return this.Tp.getCursorFormatting()}addCursor(t=nl){const e=this.JA(),i=t.jg(e,this.uiScale,this.uiScale,this.XA(e),this.Ct);return this.rg(i),i}setUnselectedSeriesColor(t){return this.UI="function"==typeof t?t(this.UI):t,this.KI=new er({thickness:this.getSeriesStrokeThickness(),fillStyle:new N({color:this.UI})}),this.St.Bs(),this}getUnselectedSeriesColor(){return this.UI}setPointedSeriesStrokeStyle(t){return this.tP.ah(t),this.St.Bs(),this}getPointedSeriesStrokeStyle(){return this.tP.ro()}setSpline(t,e){return t?this.$I.C({resolution:void 0!==(null==e?void 0:e.resolution)?e.resolution:32}):this.$I.C(void 0),this.St.Bs(),this}setAxes(t){const e=Array.isArray(t)?t.map(((t,e)=>({key:t,id:e}))):"object"==typeof t?Object.entries(t).map(((t,e)=>({key:t[0],id:t[1]}))):void 0;if(!e)return this;const i=e.filter((t=>void 0===this.axes.find((e=>e.key===t.key)))),s=this.axes.filter((t=>void 0===e.find((e=>t.key===e.key))));return i.forEach((t=>{const e=this.eP(),i=new yg(this,this.Ct,!this.Bh,t.key,t.id,e,this.QI),s=()=>{this.HI=!0};i.addEventListener("visiblechange",s),i.addEventListener("dispose",(()=>i.removeEventListener("visiblechange",s))),this.axes.push(i)})),s.forEach((t=>{t.U();const e=this.axes.indexOf(t);e>=0&&this.axes.splice(e,1)})),this.axes=e.map((t=>this.axes.find((e=>e.key===t.key)))),this.HI=!0,this.pI=void 0,this.St.Bs(),this}getAxis(t){const e=this.hP(t);if(!e)throw new Error(`ParallelAxisChart.getAxis | no such axis: "${t}". Found: ${this.axes.map((t=>void 0!==t.userID?`${t.key}, ${t.userID}`:t.key)).join(", ")}`);return e}hasAxis(t){return void 0!==this.hP(t)}addSeries(t){const e=new pg(this,this.ny,this.Ct,this.St.vs,t);return super.gy(e),this.WI=!0,this.pI=void 0,this.St.Bs(),e}setSeriesStrokeThickness(t){return this.JI=this.JI.setThickness(t),this.KI=this.KI.setThickness(t),this.qI.ah(this.JI),this.St.Bs(),this}getSeriesStrokeThickness(){return this.JI.getThickness()}setLUT(t){return this.mf=t,this.mf&&0===this.mf.lut.units.length&&(this.mf.lut=this.mf.lut.setUnits(this.mf.axis.getTitle())),this.ZI=!0,this.St.Bs(),this}qe(t){super.qe(t);const e=this.axes.filter((t=>t.getVisible()));this.xI.ts(0,e.length-1),this.uy.J({x:e.length-1,y:1}),this.Ay.J({x:e.length-1,y:1});const i=void 0===this.pI;if(!this.pI){const t={};e.forEach((e=>{t[e.key]={min:hi,max:ai}})),this.ey.forEach((e=>{e.EI&&Object.entries(e.EI).forEach((([e,i])=>{const s=t[e];s&&!Number.isNaN(i)&&(s.min=Math.min(s.min,i),s.max=Math.max(s.max,i))}))})),this.pI=t}if(this.jI||this.XI||this.WI){const t=e.map(((t,e)=>t.vI));this.ey.forEach((i=>{const s=i.EI;if(!s)return;let r=!1;for(let i=0;i<e.length;i+=1){const n=e[i],o=t[i],h=void 0!==o.find((t=>xi(s[n.key],t.min,t.max)));if(o.length>0&&!h){r=!0;break}}i.LI=r}));const i=this.ey.filter((t=>!t.LI));this.R.O("seriesselect",{selectedSeries:i})}for(const t of this.ey)t.$v();for(const t of this.ey)t.qe();super.og();const s=this.St.Gs(this.uy)||void 0!==this.ey.find((t=>t.getPointed()))?this.rP():void 0;if(this.Tp.qe(!1,this.ey,void 0,{explicitTarget:s,afterCursorPointedAt:t=>{const e=this.St.ba();if(t.length>1&&e){const t=this.St.Wa(e);this.Tp.xg.Hg({x:t.engineX,y:t.engineY},this.St.ct)}}}),La.yg(this.Uh,this.cg),e.length>=2){const t=this.iP.sv(),s=this.sP.sv(),r=e.map(((e,i)=>(e.cn(),e.Dr({plotAxisLines:s,plotAxisText:t,physicalAxisSize:this.xI.y.Si(),parallelAxisIndex:i})))),n=La.vg(this.Uh,this.cg);this.xI.Ki([this.ai.left+this.Dn.left+r[0].vf,this.ai.right+this.Dn.right+r[r.length-1].II/2]),this.xI.qi([this.ai.bottom+this.Dn.bottom+r.reduce(((t,e)=>Math.max(t,e.FI)),0),this.ai.top+this.Dn.top+n]),r.forEach(((t,i)=>e[i].qe(t))),t.finishPlot(),s.finishPlot(),(i||this.MI)&&e.forEach(((t,e)=>{if(!t.bI)return;const i=t.bI.steps.map((i=>({...i,value:this._I(i.value,e,t).y}))),s=t.bI.setSteps(i);t.eT.ah((t=>t.setFillStyle(new W({lookUpProperty:"y",lut:s}))))}));const o=this.HI||this.XI||this.VI||this.$I.u;o&&(this.qI.ii(),this.NI.ii(),this.GI.clear(),this.ey.forEach((t=>{const i=t.EI;if(!t.getVisible()||!i)return;const s=this.nP(t,i,e,this.qI,this.NI);this.GI.set(t,s),t.Ts(s)}))),(o||this.jI||this.ZI||this.XI)&&this.oP(this.ey),!o&&this.WI&&this.ey.forEach((t=>{if(t.ds.length>0)return;const i=t.EI;if(!t.getVisible()||!i)return;const s=this.nP(t,i,e,this.qI,this.NI);this.GI.set(t,s),t.Ts(s),this.oP([t])})),this.ey.find((t=>t.EI&&Object.keys(t.EI).length>0))&&(this.YI=!0)}const r=1===(null==s?void 0:s.length)?s[0]:void 0;(r!==this.aP||this.XI)&&(this.tP.ii(),r&&r.series.EI?(this.nP(r.series,r.series.EI,e,this.tP,void 0),this.qI.ah(this.KI)):this.qI.ah(this.JI));const n=y(this.xI.x.mi(),this.xI.y.mi(),this.xI.x.Si(),this.xI.y.Si());this.RC.Zm(n);for(const t of this.ey)t.tv();this.VI=!1,this.jI=!1,this.HI=!1,this.XI=!1,this.WI=!1,this.ZI=!1,this.$I.u=!1,this.MI=!1,this.aP=r}oP(t){const e=this.mf&&{lut:this.mf.lut,key:this.mf.axis.key};t.forEach((t=>{const i=t.EI,s=this.GI.get(t);if(!i||!s)return;let r;if(t.LI)r=this.UI;else if(e){const t=i[e.key],s=this.pI&&this.pI[e.key];r=e.lut.getColors(t,s)}else r=t.BI;s.forEach((t=>t.xF(r)))}))}DI(){this.XI=!0,this.St.Bs()}zI(){this.YI&&this.St.Ma(zn.Fo),this.XI=!0,this.St.Bs()}hP(t){return this.axes.find((e=>e.key===t))||this.axes.find((e=>e.userID===t))}eP(){return rt.d1({scale1DConstructor:rs,dimension:"x"}).j(0,1)}RI(t){if(this.pI=void 0,this.St.Bs(),Array.isArray(t)){const e={};return t.forEach(((t,i)=>{var s;if("number"==typeof t){const r=null===(s=this.axes[i])||void 0===s?void 0:s.key;if(!r)throw new Error("ParallelCoordinateSeries Axis count doesnt match supplied data");e[r]=t}else"object"==typeof t&&(e[t.key]=t.value)})),e}if("object"==typeof t)return t;throw new Error("ParallelCoordinateSeries unidentified data format")}SI(t,e,i){this.VI=!0,this.St.Bs()}_I(t,e,i){return{x:e,y:(t-i.ct.$)/(i.ct.Y-i.ct.$)}}CI(t,e,i){const s=i.getInterval();return s.start+t*(s.end-s.start)}OI(t){this.ZI=!0,this.St.Bs()}kI(){this.jI=!0,this.St.Bs()}getSeries(){return this.ey}kf(){const t=[],e=this.mf;return e&&t.push({Us:()=>({lut:e.lut,lookUpProperty:void 0}),attach:(t,i)=>{t.setText("Value based color").setOn(!0),t.addEventListener("switch",(t=>{this.setLUT(t.state?e:void 0)}))}}),t}getMinimumSize(){return{x:200,y:200}}forEachAxis(t){return this.axes.slice().forEach((e=>t(e))),this}dispose(){return super.dispose(),this.axes.forEach((t=>t.U())),this.Tp.U(),this.RC.U(),this.QI.U(),this}addLegendBox(t,e){const i=super.addLegendBox(t,e);return void 0!==e&&e!==this.uiScale||void 0!==t&&"vertical"!==t.getAlignment()||i.setOrigin(Wr.RightCenter).setPosition({x:this.uiScale.x.nt(this.uiScale.x.xi()-this.Dn.right),y:nt(this.oA.y.nt(this.oA.y.mi()+this.oA.y.Si()/2),this.oA.y,this.uiScale.y)}),i}nP(t,e,i,s,r){const n=[];let o;for(let h=0;h<i.length;h+=1){const a=i[h],l=e[a.key],c=this._I(l,h,a),u=this.$I.T();if(u){if(void 0!==o){const e=u.resolution;let i;for(let h=0;h<=e;h+=1){const a=(h-1)/e,l=h/e,u=l<.5?4*l*l*l:1-(-2*l+2)**3/2;if(void 0!==i){const e={x:o.x+a*(c.x-o.x),y:o.y+i*(c.y-o.y)},h={x:o.x+l*(c.x-o.x),y:o.y+u*(c.y-o.y)},d=s.Oo();r&&r.ti(d,t),n.push(d),d.TA(e,h)}i=u}}}else if(void 0!==o){const e=s.Oo();r&&r.ti(e,t),n.push(e),e.TA(o,c)}o=c}return n}rP(){const t=this.getCursorMode(),e=this.St.ba();if(t&&e){const i=this.St.Wa(e),s=ot({x:i.engineX,y:i.engineY},this.St.ct,this.xI),r=Math.round(s.x),n=this.axes.filter((t=>t.getVisible()))[r],o=n.key,h=Xe(this.ey.map((t=>{if(!t.EI||!t.mg())return;const e=t.EI[o],i=this._I(e,r,n);return{cursorPosition:{pointMarker:i,pointMarkerScale:this.xI,resultTable:i,resultTableScale:this.xI},value:e,series:t,axis:n}})));return"show-nearest"===t?[h.filter((t=>!Number.isNaN(t.cursorPosition.pointMarker.y))).sort(((t,e)=>Math.abs(t.cursorPosition.pointMarker.y-s.y)-Math.abs(e.cursorPosition.pointMarker.y-s.y)))[0]]:("show-nearest-interpolated"!==t&&"show-all-interpolated"!==t||Wt.console.warn('LightningChart JS ParallelCoordinateChart does not support "interpolated" cursor modes.'),h)}}setUserInteractions(t){return this.hh=void 0===t?{rangeSelectors:{create:{doubleClickAxis:!1},move:{drag:!1},dispose:{doubleClick:!1}}}:t,this}getUserInteractions(){return Gt({rangeSelectors:{create:{doubleClickAxis:!0},move:{drag:!0},dispose:{doubleClick:!0}}},this.hh)}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const xg=(t,e,i)=>{if(i.length>1)return[[{text:i[0].axis.getTitle(),rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}],...Xe(i.map((t=>{const e=t.series.getData(),i=e?e[t.axis.key]:void 0;if(void 0!==i)return Pa(t,[[t.series,"",ms(t.axis.formatValue(i),t.axis)]])})).flat())];const s=i[0],r=[[{component:s.series,rowFillStyle:t.getTheme().cursorResultTableHeaderBackgroundFillStyle}]];return t.axes.forEach((e=>{const i=s.series.getData();if(!i)return;const n=i[e.key];if(void 0===n)return;const o=t.axes.filter((t=>t.getVisible()))[s.cursorPosition.pointMarker.x]===e?{weight:"bold"}:{};r.push([{text:e.getTitle(),font:o},"",{text:e.formatValue(n),font:o}])})),r},Sg=(t,i)=>{const s=(t=>{const i=new N({color:t.uiStrokeColorContrastHigh}),s=new N({color:t.uiStrokeColorContrastMedium}),r=new N({color:t.uiStrokeColorContrastLow}),n=new Hs({family:t.fontFamily,weight:"normal",style:"normal"}),o=t.isDark?C(0,0,0,255):void 0,h=n.setSize(18*t.fontScaler),a=n.setSize(16*t.fontScaler),l=n.setSize(14*t.fontScaler),c=n.setSize(10*t.fontScaler),u=n.withMutations((e=>e.set("size",14*t.fontScaler).set("weight","bold"))),d=n.setSize(13*t.fontScaler),f=new er({thickness:2,fillStyle:r}),g=new N({color:t.dataHighlightOverlayColor}),y=new er({thickness:2,fillStyle:t.legendBackgroundBorderFillStyle}),p=t.dataColorPalette.map((t=>new N({color:t.stroke}))),m=t=>p[t%p.length],x=p.map((t=>new er({thickness:2,fillStyle:t}))),S=t=>x[t%x.length],v=t.dataColorPalette.map((t=>new N({color:t.border}))).map((t=>new er({thickness:2,fillStyle:t}))),A=t=>v[t%v.length],b=t.dataColorPalette.map((t=>{const e=t.area;return new tt({angle:0,stops:[{offset:0,color:e.setA(0)},{offset:.8,color:e}]})})),T=t=>b[t%b.length],E=t.dataColorPaletteInverted.map((t=>{const e=t.area;return new tt({angle:180,stops:[{offset:0,color:e.setA(0)},{offset:.8,color:e}]})})),w=t=>E[t%E.length],B=t.dataColorPalette.map((t=>{const e=t.area;return new tt({angle:180,stops:[{color:Re(e,C(255,255,255,e.getA()),.3),offset:0},{color:e,offset:.5},{color:Re(e,C(0,0,0,e.getA()),.3),offset:1}]})})),k=t=>B[t%B.length],R=t.dataColorPaletteInverted.map((t=>new N({color:t.border}))).map((t=>new er({thickness:2,fillStyle:t}))),F=t=>R[t%R.length],I=new N({color:t.dataColorPositive}),O=new N({color:t.dataColorNegative}),L=new er({thickness:1,fillStyle:new N({color:t.dataStrokeColorContrastHigh.setA(50)})}),D=new er({thickness:2,fillStyle:t.axisLineFillStyle}),P=new N({color:C(0,0,0,1)}),_=new er({thickness:1,fillStyle:t.axisGridMajorFillStyle}),z=new er({thickness:1,fillStyle:t.axisTickMajorFillStyle}),U=l,X=t.axisLabelMajorFillStyle,H=new er({thickness:1,fillStyle:t.axisGridMinorFillStyle}),G=new er({thickness:1,fillStyle:t.axisTickMinorFillStyle}),Y=c,W=X,j=Wh,$=new Gh({gridStrokeStyle:_,tickStyle:z,tickLength:7,tickPadding:5,labelFont:U,labelFillStyle:X,labelShadow:o}),Q=new Gh({gridStrokeStyle:H,tickStyle:G,tickLength:4,tickPadding:10,labelFont:Y,labelFillStyle:W,labelShadow:o}),J=new Ta({extremeTickStyle:j,majorTickStyle:$,minorTickStyle:Q.setLabelFillStyle(V)}),q=new ma({greatTickStyle:Wh,majorTickStyle:$,minorTickStyle:Q}),Z=q,K=q,et=new sa({majorTickStyle:$,minorTickStyle:Q}),it=new N({color:t.dataHighlightOverlayColor}),st=new er({thickness:1,fillStyle:s}),rt=new er({thickness:2,fillStyle:s}),nt=t=>new Ks.Triangulated({shape:"sphere",size:10,fillStyle:p[t%p.length]}),ot=p[0],ht=t.uiTextFillStyle,at=t.legendBackgroundFillStyle,lt=new er({thickness:1,fillStyle:t.legendBackgroundBorderFillStyle}),ct=Ie(t.legendButtonDefaultColor),ut=Ie(t.isDark?C(70,70,70,255):C(170,170,170,255)),dt=new N({color:t.isDark?C(70,70,70,255):C(170,170,170,255)}),ft=new er({thickness:1,fillStyle:i}),gt=new nr({thickness:1,fillStyle:t.cursorGridFillStyle,pattern:sr.DashedEqual,patternScale:3}),yt=new er({thickness:1,fillStyle:t.cursorGridFillStyle}),pt=t.zoomBandChartDefocusOverlayFillStyle,mt=new er({thickness:2,fillStyle:new N({color:t.zoomBandChartSplitterColor})}),xt=new N({color:t.uiBackgroundColor});let St={isDark:t.isDark,effect:t.effect,effectsText:t.effectsText,effectsDashboardSplitters:t.effectsDashboardSplitters,lcjsBackgroundFillStyle:t.lcjsBackgroundFillStyle,lcjsBackgroundStrokeStyle:Ot,highlightColorOffset:t.highlightColorOffset,highlightColorOffsetAxisOverlay:t.highlightColorOffsetAxisOverlay,dashboardSplitterStyle:new er({thickness:4,fillStyle:t.dashboardSplitterFillStyle}),panelPadding:{right:10,left:10,top:10,bottom:10},chartXYBackgroundFillStyle:t.panelBackgroundFillStyle,chartXYBackgroundStrokeStyle:Ot,chartXYTitleFont:h,chartXYTitleFillStyle:t.titleFillStyle,chartXYTitleShadow:o,chartXYTitleMargin:5,chartXYPadding:{right:15,left:10,top:10,bottom:10},chartXYSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chartXYSeriesBackgroundStrokeStyle:f,chartXYZoomingRectangleFillStyle:g,chartXYZoomingRectangleStrokeStyle:y,lineSeriesStrokeStyle:S,pointLineSeriesStrokeStyle:S,pointLineSeriesFillStyle:m,pointSeriesFillStyle:m,ellipseSeriesFillStyle:m,ellipseSeriesStrokeStyle:S,polygonSeriesFillStyle:m,polygonSeriesStrokeStyle:S,rectangleSeriesFillStyle:m,rectangleSeriesStrokeStyle:Ot,segmentSeriesStrokeStyle:S,boxSeriesBodyFillStyle:m(0),boxSeriesBodyStrokeStyle:Ot,boxSeriesStrokeStyle:new er({thickness:1,fillStyle:p[0]}),boxSeriesMedianStrokeStyle:new er({thickness:1,fillStyle:new N({color:C(0,0,0)})}),ohlcCandleThicknessPixels:5,ohlcCandleBodyFillStylePositive:I,ohlcCandleBodyFillStyleNegative:O,ohlcCandleTailStrokeStylePositive:new er({thickness:1,fillStyle:new N({color:t.uiStrokeColorContrastHigh})}),ohlcCandleTailStrokeStyleNegative:new er({thickness:1,fillStyle:new N({color:t.uiStrokeColorContrastHigh})}),ohlcBarThicknessPixels:10,ohlcBarStrokeStylePositive:new er({thickness:2,fillStyle:I}),ohlcBarStrokeStyleNegative:new er({thickness:2,fillStyle:O}),heatmapGridSeriesFillStyle:m,heatmapGridSeriesWireframeStyle:L,heatmapScrollingGridSeriesFillStyle:m,heatmapScrollingGridSeriesWireframeStyle:L,areaRangeSeriesFillStyle:T,areaRangeSeriesStrokeStyle:A,areaRangeSeriesFillStyleInverted:w,areaRangeSeriesStrokeStyleInverted:F,areaSeriesBipolarHighFillStyle:T,areaSeriesBipolarHighStrokeStyle:A,areaSeriesBipolarLowFillStyle:w,areaSeriesBipolarLowStrokeStyle:F,areaSeriesPositiveFillStyle:T,areaSeriesPositiveStrokeStyle:A,areaSeriesNegativeFillStyle:w,areaSeriesNegativeStrokeStyle:F,xAxisTitleFont:a,xAxisTitleFillStyle:t.axisTitleFillStyle,xAxisStrokeStyle:D,xAxisOverlayStyle:P,xAxisZoomingBandFillStyle:g,xAxisZoomingBandStrokeStyle:Ot,xAxisNumericTicks:J,xAxisDateTimeTicks:Z,xAxisTimeTicks:et,yAxisTitleFont:a,yAxisTitleFillStyle:t.axisTitleFillStyle,yAxisStrokeStyle:D,yAxisOverlayStyle:P,yAxisZoomingBandFillStyle:g,yAxisZoomingBandStrokeStyle:Ot,yAxisNumericTicks:J,yAxisDateTimeTicks:K,yAxisTimeTicks:et,bandFillStyle:it,bandStrokeStyle:st,constantLineStrokeStyle:rt,barChartBackgroundFillStyle:t.panelBackgroundFillStyle,barChartBackgroundStrokeStyle:Ot,barChartTitleFont:h,barChartTitleFillStyle:t.titleFillStyle,barChartTitleShadow:o,barChartSeriesBackgroundFillStyle:V,barChartSeriesBackgroundStrokeStyle:Ot,barChartBarFillStyle:m,barChartBarStrokeStyle:new er({thickness:1,fillStyle:r}),barChartValueAxisTitleFont:a,barChartValueAxisTitleFillStyle:t.axisTitleFillStyle,barChartValueAxisStrokeStyle:D,barChartValueAxisTicks:J.setMajorTickStyle((t=>t.setGridStrokeStyle(Ot))).setMinorTickStyle((t=>t.setGridStrokeStyle(Ot))),barChartCategoryAxisTitleFont:a,barChartCategoryAxisTitleFillStyle:t.axisTitleFillStyle,barChartCategoryAxisStrokeStyle:D,barChartCategoryLabels:{formatter:(t,e)=>t,labelFillStyle:J.majorTickStyle.labelFillStyle,labelFont:J.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,tickStyle:J.majorTickStyle.tickStyle,tickLength:0,labelShadow:o},barChartValueLabelsAfterBars:{position:"after-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:J.majorTickStyle.labelFillStyle,labelFont:J.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:o},barChartValueLabelsInsideBars:{position:"inside-bar",formatter:t=>t.chart.valueAxis.formatValue(t.value),labelFillStyle:J.majorTickStyle.labelFillStyle,labelFont:J.majorTickStyle.labelFont,labelMargin:8,labelRotation:0,displayStackedIndividuals:!1,displayStackedSum:!0,labelShadow:o},barChartCornerRadius:10,chart3DBackgroundFillStyle:t.panelBackgroundFillStyle,chart3DBackgroundStrokeStyle:Ot,chart3DTitleFont:h,chart3DTitleFillStyle:t.titleFillStyle,chart3DTitleShadow:o,chart3DSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,chart3DSeriesBackgroundStrokeStyle:f,chart3DBoundingBoxStrokeStyle:Ot,xAxis3DTitleFont:a,xAxis3DTitleFillStyle:t.axisTitleFillStyle,xAxis3DStrokeStyle:D,xAxis3DNumericTicks:J,xAxis3DDateTimeTicks:q,xAxis3DTimeTicks:et,yAxis3DTitleFont:a,yAxis3DTitleFillStyle:t.axisTitleFillStyle,yAxis3DStrokeStyle:D,yAxis3DNumericTicks:J,yAxis3DDateTimeTicks:q,yAxis3DTimeTicks:et,zAxis3DTitleFont:a,zAxis3DTitleFillStyle:t.axisTitleFillStyle,zAxis3DStrokeStyle:D,zAxis3DNumericTicks:J,zAxis3DDateTimeTicks:q,zAxis3DTimeTicks:et,lineSeries3DStrokeStyle:S,pointLineSeries3DStrokeStyle:S,pointLineSeries3DPointStyle:nt,pointSeries3DPointStyle:nt,pointCloudSeries3DPointStyle:t=>new Ks.Pixelated({size:5,fillStyle:p[t%p.length]}),surfaceGridSeries3DFillStyle:m,surfaceGridSeries3DWireframeStyle:L,surfaceScrollingGridSeries3DFillStyle:m,surfaceScrollingGridSeries3DWireframeStyle:L,boxSeries3DFillStyle:m,meshModel3DFillStyle:m(0),polarChartBackgroundFillStyle:t.panelBackgroundFillStyle,polarChartBackgroundStrokeStyle:Ot,polarChartTitleFont:h,polarChartTitleFillStyle:t.titleFillStyle,polarChartTitleShadow:o,polarChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,polarChartSeriesBackgroundStrokeStyle:f,polarSectorFillStyle:it,polarSectorStrokeStyle:st,polarAmplitudeAxisTitleFont:a,polarAmplitudeAxisTitleFillStyle:t.axisTitleFillStyle,polarAmplitudeAxisTitleShadow:o,polarAmplitudeAxisStrokeStyle:D,polarAmplitudeAxisNumericTicks:J,polarAmplitudeAxisDateTimeTicks:q,polarAmplitudeAxisTimeTicks:et,polarRadialAxisTitleFont:a,polarRadialAxisTitleFillStyle:t.axisTitleFillStyle,polarRadialAxisStrokeStyle:D,polarRadialAxisTickStyle:$.setTickPadding(10),polarRadialAxisMarginAfterTicks:0,polarLineSeriesStrokeStyle:S,polarPointLineSeriesFillStyle:m,polarPointLineSeriesStrokeStyle:S,polarPointSeriesFillStyle:m,polarPolygonSeriesFillStyle:k,polarPolygonSeriesStrokeStyle:A,polarAreaSeriesFillStyle:k,polarAreaSeriesStrokeStyle:A,polarHeatmapSeriesFillStyle:m,mapChartBackgroundFillStyle:t.panelBackgroundFillStyle,mapChartBackgroundStrokeStyle:Ot,mapChartTitleFont:h,mapChartTitleFillStyle:t.titleFillStyle,mapChartTitleShadow:o,mapChartFillStyle:ot,mapChartStrokeStyle:new er({thickness:1,fillStyle:new N({color:t.dataStrokeColorContrastMedium})}),mapChartOutlierRegionFillStyle:V,mapChartOutlierRegionStrokeStyle:new er({thickness:1,fillStyle:r}),mapChartSeparateRegionFillStyle:at,mapChartSeparateRegionStrokeStyle:lt,dataGridBackgroundFillStyle:t.panelBackgroundFillStyle,dataGridBackgroundStrokeStyle:Ot,dataGridTitleFont:h,dataGridTitleFillStyle:t.titleFillStyle,dataGridTitleShadow:o,dataGridTextFont:l,dataGridTextFillStyle:ot,dataGridCellBackgroundFillStyle:new N({color:t.uiBackgroundColor}),dataGridBorderStrokeStyle:new er({thickness:.4,fillStyle:new N({color:t.uiBackgroundBorderColor})}),dataGridScrollBarBackgroundFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarBackgroundStrokeStyle:Ot,dataGridScrollBarFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarStrokeStyle:lt,dataGridScrollBarButtonFillStyle:t.seriesBackgroundFillStyle,dataGridScrollBarButtonStrokeStyle:lt,dataGridScrollBarButtonArrowFillStyle:new N({color:t.legendButtonDefaultColor}),dataGridScrollBarThickness:20,dataGridCellPadding:5,sparkLineChartStrokeStyle:S(0),sparkPointChartFillStyle:m(0),sparkBarChartFillStyle:m(0),sparkBarChartStrokeStyle:A(0),sparkAreaChartFillStyle:T(0),sparkAreaChartStrokeStyle:A(0),sparkPieChartFillStyle:m,sparkPieChartStrokeStyle:lt,sparkChartBandFillStyle:it,sparkChartBandStrokeStyle:st,sparkChartConstantLineStrokeStyle:rt,dataGridTextShadow:o,textSeriesShadow:o,spiderChartBackgroundFillStyle:t.panelBackgroundFillStyle,spiderChartBackgroundStrokeStyle:Ot,spiderChartTitleFont:h,spiderChartTitleFillStyle:t.titleFillStyle,spiderChartTitleShadow:o,spiderChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,spiderChartSeriesBackgroundStrokeStyle:f,spiderChartWebStyle:new er({thickness:2,fillStyle:r}),spiderChartScaleLabelFillStyle:t.axisLabelMajorFillStyle,spiderChartScaleLabelFont:l,spiderChartAxisLabelFillStyle:t.axisTitleFillStyle,spiderChartAxisLabelFont:a,spiderChartAxisStrokeStyle:new er({thickness:2,fillStyle:s}),spiderChartAxisNibStrokeStyle:new er({thickness:2,fillStyle:i}),spiderSeriesFillStyle:k,spiderSeriesStrokeStyle:A,spiderSeriesPointFillStyle:m,spiderChartScaleLabelShadow:o,pieChartBackgroundFillStyle:t.panelBackgroundFillStyle,pieChartBackgroundStrokeStyle:Ot,pieChartTitleFont:h,pieChartTitleFillStyle:t.titleFillStyle,pieChartTitleShadow:o,pieChartSliceFillStylePalette:m,pieChartSliceStrokeStyle:lt,pieChartSliceLabelFont:d,pieChartSliceLabelFillStyle:t.uiTextFillStyle,pieChartConnectorStrokeStyle:ft,pieChartSliceLabelShadow:o,funnelChartBackgroundFillStyle:t.panelBackgroundFillStyle,funnelChartBackgroundStrokeStyle:Ot,funnelChartTitleFont:h,funnelChartTitleFillStyle:t.titleFillStyle,funnelChartTitleShadow:o,funnelChartSliceFillStylePalette:m,funnelChartSliceStrokeStyle:lt,funnelChartSliceLabelFont:d,funnelChartSliceLabelFillStyle:t.uiTextFillStyle,funnelChartConnectorStrokeStyle:ft,funnelChartSliceLabelShadow:o,pyramidChartBackgroundFillStyle:t.panelBackgroundFillStyle,pyramidChartBackgroundStrokeStyle:Ot,pyramidChartTitleFont:h,pyramidChartTitleFillStyle:t.titleFillStyle,pyramidChartTitleShadow:o,pyramidChartSliceFillStylePalette:m,pyramidChartSliceStrokeStyle:lt,pyramidChartSliceLabelFont:d,pyramidChartSliceLabelFillStyle:t.uiTextFillStyle,pyramidChartConnectorStrokeStyle:ft,gaugeChartValueLabelFont:d.setSize(60),gaugeChartUnitLabelFont:d.setSize(40),gaugeChartTickFont:d.setSize(30),gaugeChartBarThickness:40,gaugeChartValueIndicatorThickness:10,gaugeChartRoundedEdges:!0,gaugeChartNeedleLength:40,gaugeChartStartAngle:225,gaugeChartEndAngle:-45,gaugeChartNeedleAlignment:0,gaugeChartGapBetweenBarAndValueIndicators:10,gaugeChartTickFillStyle:t.uiTextFillStyle,gaugeChartBarGradient:!0,gaugeChartBarStrokeStyle:Ot,gaugeChartUnitLabelFillStyle:t.uiTextFillStyle,gaugeChartValueLabelFillStyle:t.uiTextFillStyle,gaugeChartBarColor:C(255,255,255),gaugeChartGlowColor:C(255,255,64),gaugeChartNeedleFillStyle:new N({color:C(255,255,255)}),gaugeChartNeedleThickness:10,gaugeChartNeedleStrokeStyle:new er({thickness:2,fillStyle:new N({color:C(0,0,0)})}),pyramidChartSliceLabelShadow:o,gaugeChartBackgroundFillStyle:t.panelBackgroundFillStyle,gaugeChartBackgroundStrokeStyle:Ot,gaugeChartTitleFont:h,gaugeChartTitleFillStyle:t.titleFillStyle,gaugeChartTitleShadow:o,treeMapChartBackgroundFillStyle:t.panelBackgroundFillStyle,treeMapChartBackgroundStrokeStyle:Ot,treeMapChartParentColor:t.treeMapChartParentColor,treeMapChartNodeColors:t.treeMapChartNodeColors,treeMapChartNodeStrokeStyle:new er({thickness:1,fillStyle:new N({color:M("000")})}),treeMapChartTitleFillStyle:t.titleFillStyle,treeMapChartTitleShadow:o,treeMapChartTitleFont:h,treeMapChartPathLabelFillStyle:ht,treeMapChartPathLabelFont:d,treeMapChartLabelHeaderFillStyle:t.treeMapChartLabelHeaderFillStyle,treeMapChartLabelHeaderFont:h,treeMapChartLabelFillStyle:t.treeMapChartLabelFillStyle,treeMapChartLabelFont:d,treeMapChartCornerRadius:8,uiPanelBackgroundFillStyle:t.panelBackgroundFillStyle,uiPanelBackgroundStrokeStyle:Ot,zoomBandChartDefocusOverlayFillStyle:pt,zoomBandChartSplitterStrokeStyle:mt,zoomBandChartKnobFillStyle:t.zoomBandChartKnobFillStyle,zoomBandChartKnobSize:t.zoomBandChartKnobSize,onScreenMenuBackgroundColor:C(254,204,0,.7),parallelCoordinateChartBackgroundFillStyle:t.panelBackgroundFillStyle,parallelCoordinateChartBackgroundStrokeStyle:Ot,parallelCoordinateChartTitleFont:h,parallelCoordinateChartTitleFillStyle:t.titleFillStyle,parallelCoordinateChartTitleShadow:o,parallelCoordinateChartSeriesBackgroundFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateChartSeriesBackgroundStrokeStyle:f,parallelCoordinateChartSeriesColor:e=>t.dataColorPalette[e%t.dataColorPalette.length].stroke,parallelCoordinateChartSeriesColorUnselected:t.dataColorUnselected,parallelCoordinateChartSeriesLineThickness:2,parallelCoordinateChartPointedSeriesLineStyle:x[0],parallelCoordinateAxisTitleFont:a,parallelCoordinateAxisTitleFillStyle:t.axisTitleFillStyle,parallelCoordinateAxisNumericTicks:J,parallelCoordinateAxisDateTimeTicks:q,parallelCoordinateAxisTimeTicks:et,parallelCoordinateAxisStrokeStyle:D,parallelCoordinateAxisRangeSelectorFillStyle:t.seriesBackgroundFillStyle,parallelCoordinateAxisRangeSelectorStrokeStyle:lt,parallelCoordinateAxisBackgroundFillStyle:new tt({angle:90,stops:[{offset:0,color:t.isDark?C(0,0,0,0):C(255,255,255,0)},{offset:1,color:t.isDark?C(0,0,0,255):C(255,255,255,180)}]}),uiButtonFillStyle:ct,uiButtonFillStyleHidden:ut,uiButtonStrokeStyle:lt,uiButtonSize:10,uiBackgroundFillStyle:at,uiBackgroundStrokeStyle:lt,uiTextFillStyle:ht,uiTextFillStyleHidden:dt,uiTextFont:d,uiTextPadding:5,legendTitleFillStyle:ht,legendTitleFont:u,legendBorderRadius:5,legendPadding:5,legendLUTLabelMargin:7,legendLUTUnitLabelMargin:7,legendLUTLengthHorizontal:160,legendLUTThicknessHorizontal:15,legendLUTLengthVertical:140,legendLUTThicknessVertical:25,cursorTickMarkerXBackgroundFillStyle:at,cursorTickMarkerXBackgroundStrokeStyle:lt,cursorTickMarkerXTextFillStyle:ht,cursorTickMarkerXTextFont:d,cursorTickMarkerYBackgroundFillStyle:at,cursorTickMarkerYBackgroundStrokeStyle:lt,cursorTickMarkerYTextFillStyle:ht,cursorTickMarkerYTextFont:d,cursorPointMarkerFillStyle:gt.getFillStyle(),cursorPointMarkerSize:{x:9,y:9},cursorPointMarkerShape:e.PointShape.Cross,cursorResultTableFillStyle:t.resultTableBackgroundFillStyle,cursorResultTableStrokeStyle:new er({thickness:1,fillStyle:t.resultTableBackgroundBorderFillStyle}),cursorResultTableTextFillStyle:ht,cursorResultTableTextFont:d,cursorResultTableHeaderBackgroundFillStyle:t.resultTableHeaderBackgroundFillStyle,cursorResultTableBorderRadius:5,cursorGridStrokeStyleX:gt,cursorGridStrokeStyleY:gt,cursor3DGridStrokeStyleX:yt,cursor3DGridStrokeStyleY:yt,cursor3DGridStrokeStyleZ:yt,cursor3DTickStrokeStyleX:$.tickStyle,cursor3DTickStrokeStyleY:$.tickStyle,cursor3DTickStrokeStyleZ:$.tickStyle,cursor3DTickLabelFillStyleX:ht,cursor3DTickLabelFillStyleY:ht,cursor3DTickLabelFillStyleZ:ht,cursor3DTickLabelFontX:d,cursor3DTickLabelFontY:d,cursor3DTickLabelFontZ:d,cursor3DTickLabelBackgroundFillStyleX:xt,cursor3DTickLabelBackgroundFillStyleY:xt,cursor3DTickLabelBackgroundFillStyleZ:xt,cursor3DTickLabelBackgroundStrokeStyleX:lt,cursor3DTickLabelBackgroundStrokeStyleY:lt,cursor3DTickLabelBackgroundStrokeStyleZ:lt,cursor3DTickLabelPaddingX:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingY:{left:4,right:4,top:4,bottom:4},cursor3DTickLabelPaddingZ:{left:4,right:4,top:4,bottom:4}};return t.overrideThemeProperties&&(St={...St,...t.overrideThemeProperties}),St})(t),r={...i,header1Font:s.xAxisTitleFont,header2Font:s.xAxisNumericTicks.getMajorTickStyle().labelFont,header3Font:s.uiTextFont,mainDataColor:t.dataColorPalette[0].stroke};return{...s,examples:r}},vg="Segoe UI, -apple-system, Verdana, Helvetica",Ag=(t,e)=>{const i=new Image;i.crossOrigin="*";const s=`${t}/${e}`;return i.src=s,i},bg=(t,e,i)=>s=>{const r=!0===t?e[s%e.length].stroke:Re(e[s%e.length].stroke,C(255,255,255),.5);return new q({stops:[{color:Re(r,C(255,255,255),.5*i).setA(100),offset:0},{color:r.setA(100),offset:.5},{color:Re(r,C(30,30,30),.5*i).setA(100),offset:1}]})},Cg=(t,e,i)=>s=>{const r=!0===t?e[s%e.length].stroke:Re(e[s%e.length].stroke,C(255,255,255),.2);return new q({stops:[{color:Re(r,C(255,255,255),.2*i),offset:0},{color:r,offset:.5},{color:Re(r,C(0,0,0),.2*i),offset:1}]})},Mg=(t,e,i)=>s=>{const r=!0===t?e[s%e.length].stroke:Re(e[s%e.length].stroke,C(255,255,255),.2);return new tt({angle:90,stops:[{color:Re(r,C(255,255,255),.5*i),offset:0},{color:r,offset:.35},{color:Re(r,C(30,30,30),.5*i),offset:1}]})},Tg=(t,e,i)=>(()=>{const i=new Map;return s=>{const r=i.get(s);if(r)return r;const n=(i=>{const s=!0===t?e[i%e.length].stroke:Re(e[i%e.length].stroke,C(255,255,255),.3);return new tt({angle:90,stops:[{color:Re(s,C(255,255,255),.5),offset:0},{color:s,offset:.35},{color:Re(s,C(30,30,30),.5),offset:1}]})})(s);return i.set(s,n),n}})(),Eg=We((()=>{const t=C(255,255,255),i=new N({color:t}),s=!0,r=new ur({spread:1,blur:9,offset:{x:0,y:0},color:C(0,0,0,150)}),n=new q({position:{x:.8,y:.8},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.ellipse,stops:[{offset:0,color:C(50,51,52)},{offset:.5,color:C(14,15,16)},{offset:1,color:C(0,0,0)}]}),o=new N({color:C(45,45,45)}),h=new q({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:C(120,120,120,100)},{offset:1,color:C(0,0,0,50)}]}),a=new q({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:C(30,30,30,200)},{offset:1,color:C(0,0,0,255)}]}),l=vg,c=new N({color:C(255,255,220)}),u=new N({color:C(255,255,166)}),d=new N({color:C(255,255,220)}),f=new N({color:C(255,255,200)}),g=f,y=g,p=new tt({angle:45,stops:[{offset:0,color:C(230,230,230)},{offset:1,color:C(150,150,150)}]}),m=new N({color:C(220,220,220)}),x=new N({color:C(200,200,200,50)}),S=new N({color:C(200,200,200,150)}),v=new N({color:C(200,200,200,20)}),A=new N({color:C(220,220,220)}),b=new tt({angle:0,stops:[{offset:0,color:C(10,10,10,220)},{offset:1,color:C(30,30,30,220)}]}),M=i,T=C(255,255,200),E=new N({color:C(0,0,0,224)}),w=new N({color:C(166,166,166)}),B=new N({color:C(49,53,58)}),k=C(20,20,20),R=C(0,0,0),F=t,I=C(150,150,150),O=C(50,50,50),L=C(50,50,50),D=C(100,100,100),P=C(200,200,200),V=[C(255,255,91,255),C(255,205,91,255),C(255,155,91,255),C(255,196,188,255),C(255,148,184,255),C(219,148,198,255),C(235,196,224,255),C(169,148,198,255),C(148,226,198,255),C(148,255,176,255),C(180,255,165,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),_=t.setA(20),z=C(176,255,157,255),U=C(255,112,76,255),X={mapChartFillStyle:new tt({angle:135,stops:[{color:C(255,255,91,255),offset:0},{color:C(255,155,91,255),offset:1}]}),spiderSeriesFillStyle:bg(s,V,.5),pieChartSliceFillStylePalette:Cg(s,V,1),funnelChartSliceFillStylePalette:Mg(s,V,1),pyramidChartSliceFillStylePalette:Mg(s,V,1),rectangleSeriesFillStyle:Tg(s,V),gaugeChartBarColor:C(255,255,91,255),gaugeChartGlowColor:C(255,255,91,64)},H=new N({color:C(176,255,157,255)}),G=new N({color:C(255,146,146,255)}),Y=new N({color:C(176,255,157,255)}),W=new N({color:C(230,63,63,255)}),j=new N({color:C(176,255,157,120)}),$=new N({color:C(229,63,63,180)}),Q=new N({color:C(27,37,36,255)}),J=new N({color:C(62,27,27,255)}),Z=[C(255,0,0),C(255,255,0),C(0,255,0)],K=[C(10,10,255),C(10,190,255),C(251,255,0),C(255,38,0)],et=[C(255,255,0),C(255,204,0),C(255,128,0),C(255,0,0)],it=[C(0,0,0),C(167,4,69,255),C(255,0,0),C(252,252,168,255)],st=new q({stops:[{color:C(61,61,80,100),offset:0},{color:C(44,44,55,30),offset:1}]}),rt=new N({color:C(148,148,198,255)}),nt=j.getColor().setA(255),ot=C(100,100,100),ht=[C(255,241,149,200),C(255,230,65,200),C(238,211,32,200),C(238,176,32,200),C(255,159,13,200),C(254,120,37,200),C(253,91,56,200),C(253,75,84,200),C(254,95,124,200),C(227,56,160,200),C(226,53,134,200),C(216,90,166,200),C(254,151,206,200),C(237,151,254,200),C(243,177,255,200),C(233,133,252,200),C(210,101,230,200),C(178,61,200,200),C(193,81,156,200),C(217,95,145,200)];return Sg({isDark:s,highlightColorOffset:C(60,60,60,60),highlightColorOffsetAxisOverlay:C(255,255,255,40),effect:r,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:n,dashboardSplitterFillStyle:o,panelBackgroundFillStyle:h,seriesBackgroundFillStyle:a,fontFamily:l,fontScaler:1,titleFillStyle:c,axisTitleFillStyle:u,axisLabelMajorFillStyle:d,uiTitleFillStyle:f,uiTextFillStyle:g,cursorTextFillStyle:y,axisLineFillStyle:p,axisTickMajorFillStyle:m,axisGridMajorFillStyle:x,axisTickMinorFillStyle:S,axisGridMinorFillStyle:v,cursorGridFillStyle:A,legendBackgroundFillStyle:b,legendBackgroundBorderFillStyle:M,legendButtonDefaultColor:T,resultTableBackgroundFillStyle:E,resultTableBackgroundBorderFillStyle:w,resultTableHeaderBackgroundFillStyle:B,uiBackgroundColor:k,uiBackgroundBorderColor:R,uiStrokeColorContrastHigh:F,uiStrokeColorContrastMedium:I,uiStrokeColorContrastLow:O,dataStrokeColorContrastHigh:L,dataStrokeColorContrastMedium:D,dataStrokeColorContrastLow:P,dataColorPalette:V,dataColorPaletteInverted:[{area:C(190,50,50,100),border:C(210,80,80)}],dataHighlightOverlayColor:_,dataColorPositive:z,dataColorNegative:U,zoomBandChartDefocusOverlayFillStyle:new N({color:C(0,0,0,180)}),zoomBandChartSplitterColor:C(251,251,90),zoomBandChartKnobFillStyle:t=>new Rt({source:Ag(t,"zoomBandChart/darkgold-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:C(255,255,255,24),overrideThemeProperties:X,treeMapChartParentColor:C(24,30,33),treeMapChartNodeColors:ht,treeMapChartLabelFillStyle:new N({color:C(33,33,33)}),treeMapChartLabelHeaderFillStyle:new N({color:C(250,250,250)})},{positiveTextFillStyle:H,negativeTextFillStyle:G,positiveFillStyle:Y,negativeFillStyle:W,positiveAreaFillStyle:j,negativeAreaFillStyle:$,positiveBackgroundFillStyle:Q,negativeBackgroundFillStyle:J,badGoodColorPalette:Z,coldHotColorPalette:K,intensityColorPalette:et,spectrogramColorPalette:it,bollingerFillStyle:st,bollingerBorderFillStyle:rt,highlightPointColor:t,highlightDataGridColor:nt,unfocusedDataColor:ot})})),wg=We((()=>{const t=C(255,255,255),i=new N({color:t}),s=!0,r=new ur({spread:0,blur:9,offset:{x:0,y:0},color:C(105,255,236,40)}),n=new N({color:C(2,21,30)}),o=new q({stops:[{color:C(19,40,66,150),offset:0},{color:C(0,0,0,150),offset:1}]}),h=new N({color:C(0,5,8,150)}),a=vg,l=i,c=i,u=i,d=i,f=i,g=f,y=new N({color:C(20,224,250,255)}),p=i,m=new N({color:C(61,94,110,100)}),x=new N({color:C(61,94,110,255)}),S=new N({color:C(61,94,110,40)}),v=i,A=new N({color:C(0,18,23,255)}),b=i,M=t,T=new N({color:C(0,0,0,225)}),E=i,w=new N({color:C(18,66,75)}),B=C(0,38,48,220),k=C(0,0,0),R=t,F=C(150,150,150),I=C(19,78,93),O=C(50,50,50),L=C(0,36,48),D=C(200,200,200),P=[C(45,253,253,255),C(44,172,247,255),C(46,100,248,255),C(96,84,199,255),C(184,104,245,255),C(98,160,218,255),C(43,238,245,255),C(38,140,206,255),C(112,96,224,255),C(206,157,255,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),V=t.setA(50),_=C(3,217,194,255),z=C(230,63,63,255),U={mapChartFillStyle:new tt({angle:135,stops:[{color:C(118,248,231,255),offset:0},{color:C(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:bg(s,P,1),pieChartSliceFillStylePalette:Cg(s,P,1),funnelChartSliceFillStylePalette:Mg(s,P,1),pyramidChartSliceFillStylePalette:Mg(s,P,1),rectangleSeriesFillStyle:Tg(s,P),gaugeChartBarColor:C(3,217,194,255),gaugeChartGlowColor:C(3,217,194,120)},X=new N({color:C(45,253,253,255)}),H=new N({color:C(255,146,146,255)}),G=new N({color:C(45,253,253,255)}),Y=new N({color:C(230,63,63,255)}),W=new N({color:C(1,190,164,120)}),j=new N({color:C(229,63,63,180)}),$=new N({color:C(1,53,57,255)}),Q=new N({color:C(62,27,27,255)}),J=[C(1,104,119,255),C(0,165,144,255),C(0,246,214,255)],Z=[C(0,87,95,255),C(0,125,124,255),C(1,209,182,255),C(0,255,221,255),C(218,112,112,255),C(172,47,47,255)],K=[C(126,255,253,255),C(50,233,230,255),C(0,196,193,255),C(62,138,178,255),C(139,88,191,255),C(162,55,143,255)],et=[C(13,31,52,255),C(101,50,118,255),C(1,142,172,255),C(2,196,170,255),C(0,255,221,255)],it=new q({stops:[{color:C(122,103,254,70),offset:0},{color:C(178,168,255,10),offset:1}]}),st=new N({color:C(122,103,254,255)}),rt=W.getColor().setA(255),nt=C(15,83,83),ot=[C(139,252,252,150),C(60,239,239,150),C(2,201,201,150),C(26,159,159,150),C(15,146,187,150),C(65,168,200,150),C(67,146,207,150),C(64,108,209,150),C(189,64,233,150),C(219,84,238,150),C(192,55,212,150),C(212,98,229,150),C(248,110,211,150),C(251,154,225,150),C(251,154,184,150),C(233,105,144,150),C(255,133,170,150),C(249,110,135,150),C(245,72,101,150),C(210,57,84,150)];return Sg({isDark:s,highlightColorOffset:C(60,60,60,60),highlightColorOffsetAxisOverlay:C(255,255,255,40),effect:r,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Rt({source:Ag(t,"themes/turquoiseHexagon.jpg"),fitMode:e.ImageFitMode.Fill}),dashboardSplitterFillStyle:n,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:h,fontFamily:a,fontScaler:1,titleFillStyle:l,axisTitleFillStyle:c,axisLabelMajorFillStyle:u,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:g,axisLineFillStyle:y,axisTickMajorFillStyle:p,axisGridMajorFillStyle:m,axisTickMinorFillStyle:x,axisGridMinorFillStyle:S,cursorGridFillStyle:v,legendBackgroundFillStyle:A,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:T,resultTableBackgroundBorderFillStyle:E,resultTableHeaderBackgroundFillStyle:w,uiBackgroundColor:B,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:R,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:O,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:D,dataColorPalette:P,dataColorPaletteInverted:[{area:C(170,60,210,100),border:C(210,100,250)}],dataHighlightOverlayColor:V,dataColorPositive:_,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new N({color:C(0,0,0,180)}),zoomBandChartSplitterColor:C(43,244,244),zoomBandChartKnobFillStyle:t=>new Rt({source:Ag(t,"zoomBandChart/turquoise-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:C(255,255,255,24),overrideThemeProperties:U,treeMapChartParentColor:C(0,35,41),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new N({color:C(33,33,33)}),treeMapChartLabelHeaderFillStyle:new N({color:C(250,250,250)})},{positiveTextFillStyle:X,negativeTextFillStyle:H,positiveFillStyle:G,negativeFillStyle:Y,positiveAreaFillStyle:W,negativeAreaFillStyle:j,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:Q,badGoodColorPalette:J,coldHotColorPalette:Z,intensityColorPalette:K,spectrogramColorPalette:et,bollingerFillStyle:it,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:rt,unfocusedDataColor:nt})})),Bg=We((()=>{const t=!1,i=new ur({spread:0,blur:6,offset:{x:2,y:-2},color:C(0,0,0,30)}),s=new q({position:{x:.8,y:.8},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.ellipse,stops:[{offset:0,color:C(255,255,255)},{offset:1,color:C(255,255,255)}]}),r=new N({color:C(219,227,233,255)}),n=new q({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:C(255,255,255,200)},{offset:1,color:C(240,244,246,200)}]}),o=new q({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:C(255,255,255,255)},{offset:1,color:C(255,255,255,255)}]}),h=vg,a=new N({color:C(33,43,49)}),l=new N({color:C(33,43,49)}),c=new N({color:C(33,43,49)}),u=new N({color:C(33,43,49)}),d=u,f=d,g=new tt({angle:45,stops:[{offset:0,color:C(225,225,225)},{offset:1,color:C(225,225,225)}]}),y=new N({color:C(150,150,150,255)}),p=new N({color:C(150,150,150,170)}),m=new N({color:C(150,150,150,150)}),x=new N({color:C(150,150,150,100)}),S=new N({color:C(60,70,80)}),v=new tt({angle:0,stops:[{offset:0,color:C(255,255,255,240)},{offset:1,color:C(255,255,255,240)}]}),A=new N({color:C(168,186,199)}),b=C(150,150,150),M=new N({color:C(255,255,255,230)}),T=new N({color:C(168,186,199)}),E=new N({color:C(228,235,243)}),w=C(255,255,255,255),B=C(168,168,199,255),k=C(168,186,199,255),R=C(168,186,199,255),F=C(168,186,199,255),I=C(168,186,199,255),O=C(100,100,100),L=C(200,200,200),D=[C(28,181,140,255),C(255,132,0,255),C(240,39,39,255),C(86,121,251,255),C(2,181,213,255),C(13,212,158,255),C(22,167,3,255),C(234,103,232,255),C(62,183,179,255),C(140,93,3,255),C(155,158,186,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),P=C(150,150,150,80),V=C(46,182,120,255),_=C(255,66,66,255),z=new er({thickness:2,fillStyle:new N({color:C(168,186,199,255)})}),U={mapChartFillStyle:new tt({angle:-45,stops:[{color:C(2,181,213,255),offset:0},{color:C(175,243,255,255),offset:1}]}),spiderSeriesFillStyle:bg(t,D,.8),pieChartSliceFillStylePalette:Cg(t,D,.8),funnelChartSliceFillStylePalette:Mg(t,D,.5),pyramidChartSliceFillStylePalette:Mg(t,D,.5),rectangleSeriesFillStyle:Tg(t,D),gaugeChartBarColor:C(46,182,120,255),gaugeChartGlowColor:C(46,182,120,120),chartXYSeriesBackgroundStrokeStyle:z,chart3DSeriesBackgroundStrokeStyle:z,polarChartSeriesBackgroundStrokeStyle:z,spiderChartSeriesBackgroundStrokeStyle:z,dataGridTextFillStyle:new N({color:C(0,88,64,255)})},X=new N({color:C(4,146,108,255)}),H=new N({color:C(240,39,39,255)}),G=new N({color:C(28,181,140,255)}),Y=new N({color:C(230,88,88,255)}),W=new N({color:C(28,181,140,180)}),j=new N({color:C(230,88,88,180)}),$=new N({color:C(229,243,228)}),Q=new N({color:C(232,225,216)}),J=[C(193,48,48,255),C(240,234,60,255),C(45,191,55,255)],Z=[C(10,19,255,255),C(15,191,250,255),C(249,255,2,255),C(253,133,0,255),C(255,24,0,255)],K=[C(50,99,213),C(8,179,77),C(255,246,0),C(255,126,0),C(189,36,30)],et=[C(16,64,176),C(8,179,77),C(255,246,0),C(255,126,0),C(168,6,0)],it=new N({color:C(185,198,207,255)}),st=new q({stops:[{color:C(151,190,220,10),offset:0},{color:C(151,190,220,50),offset:1}]}),rt=W.getColor().setA(255),nt=C(150,150,150),ot=[C(255,243,136,125),C(254,237,99,125),C(255,216,109,125),C(255,172,100,125),C(255,133,101,125),C(255,113,142,125),C(230,103,129,125),C(242,126,219,125),C(255,155,235,125),C(255,181,240,125),C(203,143,255,125),C(208,154,255,125),C(171,188,255,125),C(197,209,255,125),C(171,187,255,125),C(84,167,239,125),C(38,196,214,125),C(38,214,196,125),C(69,225,141,125),C(36,191,88,125)];return Sg({isDark:t,highlightColorOffset:C(-60,-60,-60,60),highlightColorOffsetAxisOverlay:C(0,0,0,40),effect:i,effectsText:!1,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:s,dashboardSplitterFillStyle:r,panelBackgroundFillStyle:n,seriesBackgroundFillStyle:o,fontFamily:h,fontScaler:1,titleFillStyle:a,axisTitleFillStyle:l,axisLabelMajorFillStyle:c,uiTitleFillStyle:u,uiTextFillStyle:d,cursorTextFillStyle:f,axisLineFillStyle:g,axisTickMajorFillStyle:y,axisGridMajorFillStyle:p,axisTickMinorFillStyle:m,axisGridMinorFillStyle:x,cursorGridFillStyle:S,legendBackgroundFillStyle:v,legendBackgroundBorderFillStyle:A,legendButtonDefaultColor:b,resultTableBackgroundFillStyle:M,resultTableBackgroundBorderFillStyle:T,resultTableHeaderBackgroundFillStyle:E,uiBackgroundColor:w,uiBackgroundBorderColor:B,uiStrokeColorContrastHigh:k,uiStrokeColorContrastMedium:R,uiStrokeColorContrastLow:F,dataStrokeColorContrastHigh:I,dataStrokeColorContrastMedium:O,dataStrokeColorContrastLow:L,dataColorPalette:D,dataColorPaletteInverted:[{area:C(190,50,50,100),border:C(210,80,80)}],dataHighlightOverlayColor:P,dataColorPositive:V,dataColorNegative:_,zoomBandChartDefocusOverlayFillStyle:new N({color:C(255,255,255,180)}),zoomBandChartSplitterColor:C(80,93,101),zoomBandChartKnobFillStyle:t=>new Rt({source:Ag(t,"zoomBandChart/light-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:C(0,0,0,24),overrideThemeProperties:U,treeMapChartParentColor:C(217,217,217),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new N({color:C(0,0,0)}),treeMapChartLabelHeaderFillStyle:new N({color:C(33,33,33)})},{positiveTextFillStyle:X,negativeTextFillStyle:H,positiveFillStyle:G,negativeFillStyle:Y,positiveAreaFillStyle:W,negativeAreaFillStyle:j,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:Q,badGoodColorPalette:J,coldHotColorPalette:Z,intensityColorPalette:K,spectrogramColorPalette:et,bollingerFillStyle:st,bollingerBorderFillStyle:it,highlightPointColor:C(0,0,0),highlightDataGridColor:rt,unfocusedDataColor:nt})})),kg=We((()=>{const t=!1,i=new q({position:{x:.8,y:.8},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.ellipse,stops:[{offset:0,color:C(255,255,255)},{offset:1,color:C(255,255,255)}]}),s=new N({color:C(214,236,216,255)}),r=new q({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:C(233,244,231,70)},{offset:1,color:C(233,244,231,200)}]}),n=new q({position:{x:.5,y:.5},extent:e.GradientExtent.farthestCorner,shape:e.GradientShape.circle,stops:[{offset:0,color:C(255,255,255,255)},{offset:1,color:C(255,255,255,255)}]}),o=vg,h=new N({color:C(1,61,53)}),a=new N({color:C(1,61,53)}),l=new N({color:C(1,61,53)}),c=new N({color:C(1,61,53)}),u=c,d=u,f=new tt({angle:45,stops:[{offset:0,color:C(225,225,225)},{offset:1,color:C(225,225,225)}]}),g=new N({color:C(188,211,186,255)}),y=new N({color:C(188,211,186,150)}),p=new N({color:C(188,211,186,50)}),m=new N({color:C(188,211,186,50)}),x=new N({color:C(104,148,111,255)}),S=new tt({angle:0,stops:[{offset:0,color:C(255,255,255,240)},{offset:1,color:C(255,255,255,240)}]}),v=new N({color:C(104,148,111)}),A=C(150,150,150),b=new N({color:C(255,255,255,230)}),M=new N({color:C(104,148,111)}),T=new N({color:C(226,236,224)}),E=C(255,255,255,255),w=C(179,201,183,255),B=C(188,211,186,255),k=C(188,211,186,255),R=C(188,211,186,255),F=C(188,211,186,255),I=C(100,100,100),O=C(200,200,200),L=[C(138,195,142,255),C(193,161,114,255),C(178,99,99,255),C(142,156,210,255),C(154,209,219,255),C(164,212,199,255),C(104,156,97,255),C(196,147,195,255),C(92,190,187,255),C(126,100,51,255),C(136,138,157,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),D=C(150,150,150,80),P=C(46,182,84,255),V=C(232,96,96,255),_=new er({thickness:2,fillStyle:new N({color:C(188,211,186,255)})}),z={mapChartFillStyle:new tt({angle:-45,stops:[{color:C(118,160,121,255),offset:0},{color:C(174,227,178,255),offset:1}]}),spiderSeriesFillStyle:bg(t,L,.8),pieChartSliceFillStylePalette:Cg(t,L,.8),pyramidChartSliceFillStylePalette:Mg(t,L,.5),funnelChartSliceFillStylePalette:Mg(t,L,.5),rectangleSeriesFillStyle:Tg(t,L),gaugeChartBarColor:C(46,182,84,255),gaugeChartGlowColor:C(46,182,84,120),chartXYSeriesBackgroundStrokeStyle:_,chart3DSeriesBackgroundStrokeStyle:_,polarChartSeriesBackgroundStrokeStyle:_,spiderChartSeriesBackgroundStrokeStyle:_,dataGridTextFillStyle:new N({color:C(77,66,21,255)})},U=new N({color:C(93,151,97,255)}),X=new N({color:C(178,99,99,255)}),H=new N({color:C(138,195,142,255)}),G=new N({color:C(178,99,99,255)}),Y=new N({color:C(138,195,142,180)}),W=new N({color:C(178,99,99,180)}),j=new N({color:C(224,240,237)}),$=new N({color:C(251,227,227)}),Q=[C(178,99,99,255),C(215,224,111,255),C(80,186,88,255)],J=[C(62,64,142,255),C(66,131,77,255),C(250,250,135,255),C(202,161,78,255),C(179,53,53,255)],Z=[C(64,86,138),C(123,192,205),C(255,252,149),C(220,155,92),C(184,78,74)],K=[C(64,86,138),C(123,192,205),C(255,252,149),C(220,155,92),C(132,60,57)],et=new N({color:C(185,198,207,255)}),it=new q({stops:[{color:C(151,190,220,10),offset:0},{color:C(151,190,220,50),offset:1}]}),st=Y.getColor().setA(255),rt=C(150,150,150),nt=[C(242,239,210,150),C(243,238,183,150),C(210,222,136,150),C(204,217,148,150),C(157,190,124,150),C(143,178,72,150),C(198,147,88,150),C(216,148,71,150),C(229,142,103,150),C(225,174,152,150),C(219,149,203,150),C(216,188,209,150),C(109,198,189,150),C(172,206,202,150),C(164,223,217,150),C(174,215,233,150),C(203,225,235,150),C(220,227,243,150),C(207,213,227,150),C(171,182,209,150)];return Sg({isDark:t,highlightColorOffset:C(-60,-60,-60,60),highlightColorOffsetAxisOverlay:C(0,0,0,40),effect:void 0,effectsText:!1,effectsDashboardSplitters:!1,lcjsBackgroundFillStyle:i,dashboardSplitterFillStyle:s,panelBackgroundFillStyle:r,seriesBackgroundFillStyle:n,fontFamily:o,fontScaler:1,titleFillStyle:h,axisTitleFillStyle:a,axisLabelMajorFillStyle:l,uiTitleFillStyle:c,uiTextFillStyle:u,cursorTextFillStyle:d,axisLineFillStyle:f,axisTickMajorFillStyle:g,axisGridMajorFillStyle:y,axisTickMinorFillStyle:p,axisGridMinorFillStyle:m,cursorGridFillStyle:x,legendBackgroundFillStyle:S,legendBackgroundBorderFillStyle:v,legendButtonDefaultColor:A,resultTableBackgroundFillStyle:b,resultTableBackgroundBorderFillStyle:M,resultTableHeaderBackgroundFillStyle:T,uiBackgroundColor:E,uiBackgroundBorderColor:w,uiStrokeColorContrastHigh:B,uiStrokeColorContrastMedium:k,uiStrokeColorContrastLow:R,dataStrokeColorContrastHigh:F,dataStrokeColorContrastMedium:I,dataStrokeColorContrastLow:O,dataColorPalette:L,dataColorPaletteInverted:[{area:C(210,70,70,100),border:C(200,110,110)}],dataHighlightOverlayColor:D,dataColorPositive:P,dataColorNegative:V,zoomBandChartDefocusOverlayFillStyle:new N({color:C(255,255,255,180)}),zoomBandChartSplitterColor:C(68,106,64),zoomBandChartKnobFillStyle:t=>new Rt({source:Ag(t,"zoomBandChart/lightnature-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:C(0,0,0,24),overrideThemeProperties:z,treeMapChartParentColor:C(239,247,238),treeMapChartNodeColors:nt,treeMapChartLabelFillStyle:new N({color:C(0,0,0)}),treeMapChartLabelHeaderFillStyle:new N({color:C(33,33,33)})},{positiveTextFillStyle:U,negativeTextFillStyle:X,positiveFillStyle:H,negativeFillStyle:G,positiveAreaFillStyle:Y,negativeAreaFillStyle:W,positiveBackgroundFillStyle:j,negativeBackgroundFillStyle:$,badGoodColorPalette:Q,coldHotColorPalette:J,intensityColorPalette:Z,spectrogramColorPalette:K,bollingerFillStyle:it,bollingerBorderFillStyle:et,highlightPointColor:C(0,0,0),highlightDataGridColor:st,unfocusedDataColor:rt})})),Rg=We((()=>{const t=C(255,255,255),i=new N({color:t}),s=!0,r=new ur({spread:1,blur:9,offset:{x:0,y:0},color:C(255,255,255,30)}),n=new N({color:C(6,15,36)}),o=new q({stops:[{color:C(46,13,87,50),offset:0},{color:C(0,0,0,150),offset:1}]}),h=new N({color:C(0,5,8,150)}),a=vg,l=i,c=i,u=i,d=i,f=i,g=f,y=new tt({angle:45,stops:[{offset:0,color:C(241,133,255,255)},{offset:1,color:C(115,207,238,255)}]}),p=i,m=new N({color:C(61,94,110,100)}),x=new N({color:C(61,94,110,255)}),S=new N({color:C(61,94,110,40)}),v=i,A=new N({color:C(0,18,23,255)}),b=i,M=C(115,207,238,255),T=new N({color:C(0,0,0,224)}),E=i,w=new N({color:C(68,31,78)}),B=C(0,38,48,255),k=C(0,0,0),R=t,F=C(150,150,150),I=C(19,57,93),O=C(50,50,50),L=C(0,17,48),D=C(200,200,200),P=[C(20,211,237,255),C(98,147,252,255),C(164,73,250,255),C(129,117,253,255),C(95,134,252,255),C(22,133,212,255),C(35,200,242,255),C(104,121,233,255),C(137,69,232,255),C(70,72,241,255)].map((t=>({stroke:t,border:t,area:t.setA(180)}))),V=t.setA(50),_=C(3,217,194,255),z=C(243,21,110,255),U={mapChartFillStyle:new tt({angle:135,stops:[{color:C(118,248,231,255),offset:0},{color:C(45,177,255,255),offset:1}]}),spiderSeriesFillStyle:bg(s,P,.5),pieChartSliceFillStylePalette:Cg(s,P,2),funnelChartSliceFillStylePalette:Mg(s,P,1),pyramidChartSliceFillStylePalette:Mg(s,P,1),rectangleSeriesFillStyle:Tg(s,P),gaugeChartBarColor:C(3,217,194,255),gaugeChartGlowColor:C(3,217,194,150)},X=new N({color:C(20,211,237,255)}),H=new N({color:C(253,145,178,255)}),G=new N({color:C(20,211,237,255)}),Y=new N({color:C(239,68,121,255)}),W=new N({color:C(20,211,237,120)}),j=new N({color:C(239,68,121,180)}),$=new N({color:C(1,53,57,255)}),Q=new N({color:C(94,19,42,255)}),J=[C(174,51,132,255),C(204,107,218,255),C(189,215,253,255)],Z=[C(0,63,95,255),C(0,149,255,255),C(0,225,255,255),C(255,154,254,255),C(204,98,170,255),C(139,39,84,255)],K=[C(197,241,255,255),C(70,210,255,255),C(0,164,217,255),C(90,99,222,255),C(138,75,192,255),C(151,27,162,255)],et=[C(13,31,52,255),C(129,54,130,255),C(131,108,176,255),C(7,162,213,255),C(26,247,255,255)],it=new q({stops:[{color:C(219,42,235,60),offset:0},{color:C(237,73,252,10),offset:1}]}),st=new N({color:C(237,73,252,255)}),rt=W.getColor().setA(255),nt=C(8,70,100),ot=[C(149,230,255,150),C(93,213,243,150),C(20,189,223,150),C(5,151,181,150),C(2,138,198,150),C(2,113,198,150),C(97,148,236,150),C(93,111,230,150),C(151,120,223,150),C(128,87,227,150),C(153,52,230,150),C(179,92,245,150),C(248,110,211,150),C(255,155,228,150),C(251,88,207,150),C(255,0,162,150),C(214,73,177,150),C(209,71,159,150),C(238,101,169,150),C(210,57,134,150)];return Sg({isDark:s,highlightColorOffset:C(60,60,60,60),highlightColorOffsetAxisOverlay:C(255,255,255,40),effect:r,effectsText:!0,effectsDashboardSplitters:!0,lcjsBackgroundFillStyle:t=>new Rt({source:Ag(t,"themes/cyberSpace.jpg"),fitMode:e.ImageFitMode.Fill}),dashboardSplitterFillStyle:n,panelBackgroundFillStyle:o,seriesBackgroundFillStyle:h,fontFamily:a,fontScaler:1,titleFillStyle:l,axisTitleFillStyle:c,axisLabelMajorFillStyle:u,uiTitleFillStyle:d,uiTextFillStyle:f,cursorTextFillStyle:g,axisLineFillStyle:y,axisTickMajorFillStyle:p,axisGridMajorFillStyle:m,axisTickMinorFillStyle:x,axisGridMinorFillStyle:S,cursorGridFillStyle:v,legendBackgroundFillStyle:A,legendBackgroundBorderFillStyle:b,legendButtonDefaultColor:M,resultTableBackgroundFillStyle:T,resultTableBackgroundBorderFillStyle:E,resultTableHeaderBackgroundFillStyle:w,uiBackgroundColor:B,uiBackgroundBorderColor:k,uiStrokeColorContrastHigh:R,uiStrokeColorContrastMedium:F,uiStrokeColorContrastLow:I,dataStrokeColorContrastHigh:O,dataStrokeColorContrastMedium:L,dataStrokeColorContrastLow:D,dataColorPalette:P,dataColorPaletteInverted:[{area:C(41,130,255,100),border:C(45,110,240)}],dataHighlightOverlayColor:V,dataColorPositive:_,dataColorNegative:z,zoomBandChartDefocusOverlayFillStyle:new N({color:C(0,0,0,180)}),zoomBandChartSplitterColor:C(219,119,255),zoomBandChartKnobFillStyle:t=>new Rt({source:Ag(t,"zoomBandChart/cyberspace-selector.png"),fitMode:e.ImageFitMode.Fill}),zoomBandChartKnobSize:{x:14,y:30},dataColorUnselected:C(255,255,255,24),overrideThemeProperties:U,treeMapChartParentColor:C(30,30,59),treeMapChartNodeColors:ot,treeMapChartLabelFillStyle:new N({color:C(33,33,33)}),treeMapChartLabelHeaderFillStyle:new N({color:C(250,250,250)})},{positiveTextFillStyle:X,negativeTextFillStyle:H,positiveFillStyle:G,negativeFillStyle:Y,positiveAreaFillStyle:W,negativeAreaFillStyle:j,positiveBackgroundFillStyle:$,negativeBackgroundFillStyle:Q,badGoodColorPalette:J,coldHotColorPalette:Z,intensityColorPalette:K,spectrogramColorPalette:et,bollingerFillStyle:it,bollingerBorderFillStyle:st,highlightPointColor:t,highlightDataGridColor:rt,unfocusedDataColor:nt})})),Fg={};Object.defineProperty(Fg,"darkGold",{get:Eg,enumerable:!0}),Object.defineProperty(Fg,"turquoiseHexagon",{get:wg,enumerable:!0}),Object.defineProperty(Fg,"light",{get:Bg,enumerable:!0}),Object.defineProperty(Fg,"lightNature",{get:kg,enumerable:!0}),Object.defineProperty(Fg,"cyberSpace",{get:Rg,enumerable:!0});const Ig=Fg,Og=Ig.darkGold;class Lg extends Oa{constructor(t,i,s,r,n,o){var h,a,l,c;let u;super(t,i,s,i.lg("dataGrid bg",0),r,i.St.Ct.dataGridBackgroundFillStyle,i.St.Ct.dataGridBackgroundStrokeStyle,i.St.Ct.dataGridTitleFont,i.St.Ct.dataGridTitleFillStyle,i.St.Ct.dataGridTitleShadow,o),this.lP=[],this.cP=[],this.uP=[],this.dP=new Map,this.fP=!0,this.AP=!0,this.gP=!0,this.pP=!0,this.vP=!0,this.yP=!0,this.mP=!0,this.xP=!0,this.SP=!0,this.bP=!0,this.MP=!0,this.wP=!0,this._P=!0,this.CP=!0,this.kP=!0,this.TP=!0,this.FP=new Set,this.IP=new Set,this.PP=!0,this.LP=!0,this.BP=(t,e)=>{t.borders=void 0===e?_g:{...t.borders,...e},this.DP(t),this.wP=!0,this.St.Bs()},this.DP=t=>{t.borders&&(!1===t.borders.top&&this.EP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!1}:{...this.RP,bottom:!1}})),!1===t.borders.bottom&&this.EP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!1}:{...this.RP,top:!1}})),!1===t.borders.left&&this.EP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!1}:{...this.RP,right:!1}})),!1===t.borders.right&&this.EP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!1}:{...this.RP,left:!1}})),!0===t.borders.top&&this.EP(t.column,t.row-1,(t=>{t.borders=t.borders?{...null==t?void 0:t.borders,bottom:!0}:{...this.RP,bottom:!0}})),!0===t.borders.bottom&&this.EP(t.column,t.row+1,(t=>{t.borders=t.borders?{...t.borders,top:!0}:{...this.RP,top:!0}})),!0===t.borders.left&&this.EP(t.column-1,t.row,(t=>{t.borders=t.borders?{...t.borders,right:!0}:{...this.RP,right:!0}})),!0===t.borders.right&&this.EP(t.column+1,t.row,(t=>{t.borders=t.borders?{...t.borders,left:!0}:{...this.RP,left:!0}})))},this.zP={x:0,y:0},this.cells=new Ct,this.R=new Ct,this.St.Ma(zn.co),this.Uh.jr("Data Grid"),this.OP=s.d2({scaleXYConstructor:hs}),this.OP.x.tA=Af,this.VP=s.d2({scaleXYConstructor:hs}),this.NP={x:0,y:0},this.GP=this.Ct.dataGridTextFont,this.UP=this.Ct.dataGridTextFillStyle,this.RP={top:!0,bottom:!0,left:!0,right:!0},this.$P=this.Ct.dataGridCellBackgroundFillStyle,this.YP=this.Ct.dataGridBorderStrokeStyle,this.HP="left-center",this.XP={left:null!==(h=this.Ct.dataGridCellPadding)&&void 0!==h?h:5,right:null!==(a=this.Ct.dataGridCellPadding)&&void 0!==a?a:5,bottom:null!==(l=this.Ct.dataGridCellPadding)&&void 0!==l?l:5,top:null!==(c=this.Ct.dataGridCellPadding)&&void 0!==c?c:5},this.WP=i.hx("dataGrid grid bg",0),this.jP=i.hx("dataGrid cell bg",1),this.ZP=i._p("dataGrid cell content",0),this.QP=i._p("dataGrid scrollbar bg",1),this.JP=i._p("dataGrid scrollbar fg",2),this.KP=this.WP.Ru(this.VP).Je(this.Ct.dataGridBackgroundFillStyle).Qe(Ot).setPointerEvents(!1),this.qP=this.ZP.CA(this.OP).setPointerEvents(!1),this.tL=new Tl((()=>{const t=this.jP.Ke(this.OP).setPointerEvents(!0);return this.cells.Gt(t,{getExtraData:()=>this.dP.get(t),continueIfNotPrevented:(t,e,i)=>{const s=gs(this.getUserInteractions().scroll,"wheel",e,e.shiftKey,e.ctrlKey,e.altKey);if(s&&"wheel"===t&&e instanceof WheelEvent){Se(e),this.iL({x:!0===s.x?Math.sign(e.deltaY):0,y:!0===s.y?Math.sign(e.deltaY):0});const t=s.on;t&&t({event:e})}}}),t})),this.sL=new Tl((()=>this.ZP.Ke(this.OP).setPointerEvents(!1))),this.eL=new Tl((()=>this.ZP.mn(this.OP,!1).setPointerEvents(!1))),this.hL=new Tl((()=>this.ZP.Op(this.OP,{},[pl.InternalUI,{type:"DataPattern",args:{pattern:"ProgressiveX"}}]).setPointerEvents(!1))),this.rL=new Tl((()=>this.ZP.uh(this.OP).setPointerEvents(!1))),this.nL=new Tl((()=>this.ZP.sy(this.OP).setPointerEvents(!1))),this.oL=new Tl((()=>this.ZP.Ke(this.OP).setPointerEvents(!1))),this.aL=new Tl((()=>this.ZP.yM(this.OP).setPointerEvents(!1))),this.lL=new Tl((()=>this.ZP.Pd(this.OP).setPointerEvents(!1))),this.cL={background:this.QP.Ke(this.VP).setPointerEvents(!0).Je(this.Ct.dataGridScrollBarBackgroundFillStyle).Qe(this.Ct.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.JP.Ke(this.VP).setPointerEvents(!0).Je(this.Ct.dataGridScrollBarFillStyle).Qe(this.Ct.dataGridScrollBarStrokeStyle),button1:this.QP.Ke(this.VP).setPointerEvents(!0).Je(this.Ct.dataGridScrollBarButtonFillStyle).Qe(this.Ct.dataGridScrollBarButtonStrokeStyle),button2:this.QP.Ke(this.VP).setPointerEvents(!0).Je(this.Ct.dataGridScrollBarButtonFillStyle).Qe(this.Ct.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.JP.Yd(this.VP).setPointerEvents(!1).ah(Ot).Ud(this.Ct.dataGridScrollBarButtonArrowFillStyle).Hd(e.PointShape.Triangle),buttonIcon2:this.JP.Yd(this.VP).setPointerEvents(!1).ah(Ot).Ud(this.Ct.dataGridScrollBarButtonArrowFillStyle).Hd(e.PointShape.Triangle)},this.uL={background:this.QP.Ke(this.VP).setPointerEvents(!0).Je(this.Ct.dataGridScrollBarBackgroundFillStyle).Qe(this.Ct.dataGridScrollBarBackgroundStrokeStyle),scrollbar:this.JP.Ke(this.VP).setPointerEvents(!0).Je(this.Ct.dataGridScrollBarFillStyle).Qe(this.Ct.dataGridScrollBarStrokeStyle),button1:this.QP.Ke(this.VP).setPointerEvents(!0).Je(this.Ct.dataGridScrollBarButtonFillStyle).Qe(this.Ct.dataGridScrollBarButtonStrokeStyle),button2:this.QP.Ke(this.VP).setPointerEvents(!0).Je(this.Ct.dataGridScrollBarButtonFillStyle).Qe(this.Ct.dataGridScrollBarButtonStrokeStyle),buttonIcon1:this.JP.Yd(this.VP).setPointerEvents(!1).ah(Ot).Ud(this.Ct.dataGridScrollBarButtonArrowFillStyle).Hd(e.PointShape.Triangle),buttonIcon2:this.JP.Yd(this.VP).setPointerEvents(!1).ah(Ot).Ud(this.Ct.dataGridScrollBarButtonArrowFillStyle).Hd(e.PointShape.Triangle)},this.cL.scrollbar.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(e.MouseStyles.Vertical,u)})),this.cL.scrollbar.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.cL.scrollbar.addEventListener("pointerdown",(t=>{Se(t);let e=t;const i=t=>{const i=t.clientY-e.clientY;e=t,this.dL({x:0,y:-i})},s=e=>{e.pointerId===t.pointerId&&(Wt.removeEventListener("pointermove",i),Wt.removeEventListener("pointerup",s))};Wt.addEventListener("pointermove",i),Wt.addEventListener("pointerup",s)})),this.cL.scrollbar.addEventListener("wheel",(t=>{Se(t),this.iL({x:0,y:Math.sign(t.deltaY)})})),this.cL.background.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(e.MouseStyles.Vertical,u)})),this.cL.background.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.cL.background.addEventListener("click",(t=>{Se(t);const e=this.St.Wa(t),i=ot({x:e.engineX,y:e.engineY},this.St.ct,this.VP);this.iL({x:0,y:i.y>this.cL.scrollbar.Ll().y?-1:1})})),this.cL.background.addEventListener("wheel",(t=>{Se(t),this.iL({x:0,y:Math.sign(t.deltaY)})})),this.cL.button1.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(e.MouseStyles.Point,u)})),this.cL.button1.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.cL.button1.addEventListener("click",(t=>{Se(t),this.iL({x:0,y:1})})),this.cL.button2.addEventListener("click",(t=>{Se(t),this.iL({x:0,y:-1})})),this.cL.button2.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(e.MouseStyles.Point,u)})),this.cL.button2.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.uL.scrollbar.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(e.MouseStyles.Horizontal,u)})),this.uL.scrollbar.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.uL.scrollbar.addEventListener("pointerdown",(t=>{Se(t);let e=t;const i=t=>{const i=t.clientX-e.clientX;e=t,this.dL({x:i,y:0})},s=e=>{e.pointerId===t.pointerId&&(Wt.removeEventListener("pointermove",i),Wt.removeEventListener("pointerup",s))};Wt.addEventListener("pointermove",i),Wt.addEventListener("pointerup",s)})),this.uL.scrollbar.addEventListener("wheel",(t=>{Se(t),this.iL({x:Math.sign(t.deltaY),y:0})})),this.uL.background.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(e.MouseStyles.Horizontal,u)})),this.uL.background.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.uL.background.addEventListener("click",(t=>{Se(t);const e=this.St.Wa(t),i=ot({x:e.engineX,y:e.engineY},this.St.ct,this.VP);this.iL({x:i.x<this.uL.scrollbar.Ll().x?-1:1,y:0})})),this.uL.background.addEventListener("wheel",(t=>{Se(t),this.iL({x:Math.sign(t.deltaY),y:0})})),this.uL.button1.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(e.MouseStyles.Point,u)})),this.uL.button1.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.uL.button1.addEventListener("click",(t=>{Se(t),this.iL({x:-1,y:0})})),this.uL.button2.addEventListener("click",(t=>{Se(t),this.iL({x:1,y:0})})),this.uL.button2.addEventListener("pointerenter",(t=>{u=this.engine.setMouseStyle(e.MouseStyles.Point,u)})),this.uL.button2.addEventListener("pointerleave",(t=>{u=this.engine.restoreMouseStyle(u)})),this.ag(n,this.uiScale),this.addEventListener("resize",(()=>{this.fP=!0,this.St.Bs(),this.OP.J(this.oA.Mi()),this.VP.J(this.oA.Mi())})),this.fL=this.vs.dA([this.KP])}getMinimumSize(){return{x:200,y:200}}setAnimationsEnabled(t){return this}kf(){return[]}dispose(){return super.dispose(),this.WP.U(),this.jP.U(),this.ZP.U(),this.QP.U(),this.JP.U(),Fa(this.OP),Fa(this.VP),this.eL.hv(),this.tL.hv(),this.sL.hv(),this.hL.hv(),this.rL.hv(),this.nL.hv(),this.oL.hv(),this.aL.hv(),this.lL.hv(),this}X(){return super.X(),this.OP.X(),this.VP.X(),this}W(){return super.W(),this.OP.W(),this.VP.W(),this}setBackgroundEffect(t){return this.fL.Ls(t),this.St.Bs(),this}getBackgroundEffect(){return this.fL.Ds()}setUserInteractions(t){return this.hh=void 0===t?{scroll:!1}:t,this}getUserInteractions(){return Gt({scroll:{wheel:{x:!1,y:!0},ctrl:{wheel:{x:!0,y:!1}}}},this.hh)}setGridBackgroundFillStyle(t){return this.KP.Je(t),this.St.Bs(),this}getGridBackgroundFillStyle(){return this.KP.pr()}setCellContent(t,e,i,s,r){if("number"==typeof i&&void 0!==s&&void 0!==r){const n=i,o=s,h=r;let a=[];for(let i=t;i<t+n;i+=1)for(let t=e;t<e+o;t+=1){const e=this.EP(i,t);e&&a.push(e)}a=Ne(a);let l={highlight:0};for(const t of a){const e=this.lP.indexOf(t);e<0||(l={...l,highlight:t.highlight,textFont:t.textFont,textFillStyle:t.textFillStyle,contentAlignment:t.contentAlignment,borders:t.borders,padding:t.padding,backgroundFillStyle:t.backgroundFillStyle},this.lP.splice(e,1))}const c={...l,column:t,row:e,columnSpan:n,rowSpan:o,content:h};this.lP.push(c),this.pP=!0,"string"==typeof c.content||"number"==typeof c.content?this.AP=!0:this.gP=!0,this.St.Bs()}else this.AL(t,e,i);return this}setColumnContent(t,e){const i=e.length;if(0===i)return this;for(let s=0;s<i;s+=1){const i=e[s];this.AL(t,s,i)}return this}setRowContent(t,e){const i=e.length;if(0===i)return this;for(let s=0;s<i;s+=1){const i=e[s];this.AL(s,t,i)}return this}setTableContent(t){const e=t.length;if(0===e)return this;const i=t[0].length;if(0===i)return this;for(let s=0;s<i;s+=1)for(let i=0;i<e;i+=1){const e=t[i][s];this.AL(s,i,e)}return this}setColumnWidth(t,e){let i=this.cP.find((e=>e.column===t));return i||(i={column:t,min:void 0,max:void 0},this.cP.push(i)),"object"==typeof e?(i.min=e.min,i.max=e.max):void 0===e?this.cP.splice(this.cP.indexOf(i),1):(i.min=e,i.max=e),this.yP=!0,this.St.Bs(),this}setRowHeight(t,e){let i=this.uP.find((e=>e.row===t));return i||(i={row:t,min:void 0,max:void 0},this.uP.push(i)),"object"==typeof e?(i.min=e.min,i.max=e.max):void 0===e?this.uP.splice(this.uP.indexOf(i),1):(i.min=e,i.max=e),this.yP=!0,this.St.Bs(),this}setColumnPaddings(t,e){return"number"==typeof e&&(e=x(e,e,e,e)),this.gL(t,(t=>this.pL(t,e))),this}setRowPaddings(t,e){return"number"==typeof e&&(e=x(e,e,e,e)),this.vL(t,(t=>this.pL(t,e))),this}setCellPadding(t,e,i){return"number"==typeof i&&(i=x(i,i,i,i)),this.EP(t,e,(t=>this.pL(t,i))),this}setCellsPaddings(t){return"number"==typeof t&&(t=x(t,t,t,t)),this.XP={...this.XP,...t},this.yL((t=>this.pL(t,this.XP))),this}setCellBorders(t,e,i){return this.EP(t,e,(t=>this.BP(t,i))),this}setRowBorders(t,e){return this.vL(t,(t=>this.BP(t,e))),this}setColumnBorders(t,e){return this.gL(t,(t=>this.BP(t,e))),this}setCellsBorders(t){return this.RP=void 0===t?_g:t,this.yL((t=>this.BP(t,this.RP))),this}setCellsBorderStrokeStyle(t){return this.YP="function"==typeof t?t(this.YP):t,this.CP=!0,this.St.Bs(),this}setColumnTextFillStyle(t,e){return this.gL(t,(t=>this.mL(t,e))),this}setRowTextFillStyle(t,e){return this.vL(t,(t=>this.mL(t,e))),this}setCellTextFillStyle(t,e,i){return this.EP(t,e,(t=>this.mL(t,i))),this}setCellsTextFillStyle(t){return this.UP="function"==typeof t?t(this.UP):t,this.yL((t=>this.mL(t,this.UP))),this}setColumnTextFont(t,e){return this.gL(t,(t=>this.xL(t,e))),this}setRowTextFont(t,e){return this.vL(t,(t=>this.xL(t,e))),this}setCellTextFont(t,e,i){return this.EP(t,e,(t=>this.xL(t,i))),this}setCellsTextFont(t){return this.GP="function"==typeof t?t(this.GP):t,this.yL((t=>this.xL(t,this.GP))),this}setColumnContentAlignment(t,e){return this.gL(t,(t=>this.SL(t,e))),this}setRowContentAlignment(t,e){return this.vL(t,(t=>this.SL(t,e))),this}setCellContentAlignment(t,e,i){return this.EP(t,e,(t=>this.SL(t,i))),this}setCellsContentAlignment(t){return this.HP=t,this.yL((t=>this.SL(t,this.HP))),this}setCellBackgroundFillStyle(t,e,i){return this.EP(t,e,(t=>this.bL(t,i))),this}setColumnBackgroundFillStyle(t,e){return this.gL(t,(t=>this.bL(t,e))),this}setRowBackgroundFillStyle(t,e){return this.vL(t,(t=>this.bL(t,e))),this}setCellsBackgroundFillStyle(t){return this.$P="function"==typeof t?t(this.$P):t,this.yL((t=>this.bL(t,this.$P))),this}setCellHighlight(t,e,i){return this.EP(t,e,(t=>{t.highlight=He(i)})),this._P=!0,this.St.Bs(),this}setColumnHighlight(t,e){const i=He(e);return this.gL(t,(t=>{t.highlight=i})),this._P=!0,this.St.Bs(),this}setRowHighlight(t,e){const i=He(e);return this.vL(t,(t=>{t.highlight=i})),this._P=!0,this.St.Bs(),this}removeCell(t,e){return this.EP(t,e,(t=>this.lP.splice(this.lP.indexOf(t),1))),this.vP=!0,this.St.Bs(),this}removeRow(t){return this.vL(t,(t=>this.lP.splice(this.lP.indexOf(t),1))),this.lP.filter((e=>e.row>t)).forEach((t=>{t.row-=1})),this.vP=!0,this.St.Bs(),this}removeColumn(t){return this.gL(t,(t=>this.lP.splice(this.lP.indexOf(t),1))),this.lP.filter((e=>e.column>t)).forEach((t=>{t.column-=1})),this.vP=!0,this.St.Bs(),this}removeCells(){return this.lP.splice(0),this.vP=!0,this.St.Bs(),this}getColumnMax(){return 0===this.lP.length?0:this.lP.reduce(((t,e)=>Math.max(t,e.column+e.columnSpan-1)),0)}getRowMax(){return 0===this.lP.length?0:this.lP.reduce(((t,e)=>Math.max(t,e.row+e.rowSpan-1)),0)}qe(t){var e;super.qe(t),La.yg(this.Uh,this.cg),super.og();const i=Math.round(this.YP.Wt()),s=i/2;let r=this.AP||this.gP||this.pP||this.vP||this.yP||this.mP||this.MP||this.wP||this.CP||this.TP;if(r){this.lP.forEach((t=>{this.IP.add(t.column)})),this.lP.forEach((t=>{this.FP.add(t.row)}));const t=this.eL.sv(),e=this.ML(s,t);t.finishPlot();const n=this.wL(this.IP.size,e),o=this._L(this.FP.size,e),h=n.reduce(pi,0)+i,a=o.reduce(pi,0)+i,l=new Array(n.length+1).fill(0).map(((t,e)=>n.reduce(((t,i,s)=>t+(s<e?i:0)),0))),c=new Array(o.length+1).fill(0).map(((t,e)=>o.reduce(((t,i,s)=>t+(s<e?i:0)),0)));if(this.CL){const t=this.CL.columnWidths.every(((t,e)=>t===n[e])),e=this.CL.rowHeights.every(((t,e)=>t===o[e]));t&&e&&(r=!1)}this.CL={columnWidths:n,rowHeights:o,dataGridWidth:h,dataGridHeight:a,columnWidthsCumulative:l,rowHeightsCumulative:c,cellsContentSizes:e}}const n=r||this.gP||this.pP||this.vP||this.xP||this.SP||this.bP||this.wP||this._P||this.CP||this.fP||this.TP;if((n||this.kP)&&this.CL){const t=this.oA.getInnerIntervalPixels(),r=La.vg(this.Uh,this.cg),o=[this.Dn.left+s,this.Dn.right+s],h=[this.Dn.bottom+s,this.Dn.top+r+s],a={x:t.x-o[0]-o[1],y:t.y-h[0]-h[1]},l=[this.Dn.left,this.Dn.right],c=[this.Dn.bottom,this.Dn.top+r],u={x:Math.round(t.x-l[0]-l[1]),y:Math.round(t.y-c[0]-c[1])},d={x:Math.ceil(s),y:Math.floor(u.y-s)};this.VP.Ki(o).qi(h).ts(0,a.x).ss(0,a.y);const f=null!==(e=this.Ct.dataGridScrollBarThickness)&&void 0!==e?e:20,g={x:Math.min(a.x,this.CL.dataGridWidth+f)-f,y:Math.min(a.y,this.CL.dataGridHeight+f)-f};0===this.zP.x&&0===this.zP.y||(this.NP.y+=this.CL.dataGridHeight*this.zP.y/g.y,this.NP.x+=this.CL.dataGridWidth*this.zP.x/g.x,this.zP.x=0,this.zP.y=0),this.NP.y=Kt(this.NP.y,a.y-this.CL.dataGridHeight-f,0),this.NP.x=Kt(this.NP.x,0,this.CL.dataGridWidth-a.x+f);const y=this.NP;this.OP.Ki(l).qi(c).ts(y.x,u.x+y.x).ss(y.y,u.y+y.y);const p={x:this.OP.x.mi(),y:this.OP.y.mi()+f,width:this.OP.x.Si()+i-f,height:this.OP.y.Si()+i-f};this.ZP.Zm(p),this.jP.Zm(p);const m=this.CL,x=[{x:this.OP.x.getInnerStart(),y:this.OP.y.getInnerStart()},{x:this.OP.x.getInnerEnd(),y:this.OP.y.getInnerStart()},{x:this.OP.x.getInnerEnd(),y:this.OP.y.getInnerEnd()},{x:this.OP.x.getInnerStart(),y:this.OP.y.getInnerEnd()}];m.cellsContentSizes.forEach((t=>{var e;const i={x:d.x+m.columnWidthsCumulative[t.cell.column],y:d.y-m.rowHeightsCumulative[t.cell.row+t.cell.rowSpan]},s={x:i.x+m.columnWidths[t.cell.column],y:i.y+m.rowHeights[t.cell.row]},r=fi([i,{x:s.x,y:i.y},s,{x:i.x,y:s.y}],x);null===(e=t.text)||void 0===e||e.setVisible(r)})),n&&this.kL(d,this.CL,i);const S=a.y-f<this.CL.dataGridHeight;this.cL.background.setVisible(S).th({x:g.x,y:f}).J({x:f,y:g.y}),this.cL.scrollbar.setVisible(S).th({x:g.x,y:f+g.y-f+-(g.y-2*f)*(-this.NP.y/this.CL.dataGridHeight)}).J({x:f,y:-(g.y-2*f)*(g.y/this.CL.dataGridHeight)}),this.cL.button1.setVisible(S).th({x:g.x,y:f}).J({x:f,y:f}),this.cL.buttonIcon1.setVisible(S).Qd(.5*f).Wd(0).Gd(new Do({dataPattern:null}).appendSample({x:g.x+f/2,y:1.5*f})),this.cL.button2.setVisible(S).th({x:g.x,y:g.y}).J({x:f,y:f}),this.cL.buttonIcon2.setVisible(S).Qd(.5*f).Wd(180).Gd(new Do({dataPattern:null}).appendSample({x:g.x+f/2,y:g.y+f/2}));const v=a.x-f<this.CL.dataGridWidth,A=Math.max(a.y-this.CL.dataGridHeight-f,0);this.uL.background.setVisible(v).th({x:0,y:A}).J({x:g.x,y:f}),this.uL.scrollbar.setVisible(v).th({x:f+(g.x-2*f)*(this.NP.x/this.CL.dataGridWidth),y:A}).J({x:(g.x-2*f)*(g.x/this.CL.dataGridWidth),y:f}),this.uL.button1.setVisible(v).th({x:0,y:A}).J({x:f,y:f}),this.uL.buttonIcon1.setVisible(v).Qd(.5*f).Wd(90).Gd(new Do({dataPattern:null}).appendSample({x:f/2,y:A+f/2})),this.uL.button2.setVisible(v).th({x:g.x-f,y:A}).J({x:f,y:f}),this.uL.buttonIcon2.setVisible(v).Qd(.5*f).Wd(270).Gd(new Do({dataPattern:null}).appendSample({x:g.x-f/2,y:A+f/2})),this.KP.wc([d,{x:d.x+g.x+(S?f:0),y:d.y},{x:d.x+g.x+(S?f:0),y:d.y-g.y},{x:d.x+g.x,y:d.y-g.y},{x:d.x+g.x,y:d.y-g.y-(v?f:0)},{x:d.x,y:d.y-g.y-(v?f:0)}])}this.fP=!1,this.AP=!1,this.gP=!1,this.pP=!1,this.vP=!1,this.yP=!1,this.mP=!1,this.xP=!1,this.SP=!1,this.bP=!1,this.MP=!1,this.wP=!1,this._P=!1,this.CP=!1,this.kP=!1,this.TP=!1}ML(t,e){const i=[],s={left:Math.ceil(t),right:Math.ceil(t),top:Math.ceil(t),bottom:Math.ceil(t)};for(const t of this.lP){const{content:r}=t,n={...this.XP,...t.padding};let o,h,a,l={x:0,y:0};if("string"==typeof r||"number"==typeof r){const i=String(r);o=e.add(),l=o.jr(i).Sr(t.textFont||this.GP).Dr().Pu()}if(bf(r)&&(h=r,l={x:200,y:50}),lr(r)){const t=this.St.TL(r);t.FL()?(a=r,l=a.Mi()):t.IL((()=>{this.TP=!0,this.St.Bs()}))}if(o||h||a){n.top=Math.round(n.top),n.left=Math.round(n.left),n.right=Math.round(n.right),n.bottom=Math.round(n.bottom);const e={x:Math.round(l.x+n.left+n.right+s.left+s.right),y:Math.round(l.y+n.top+n.bottom+s.top+s.bottom)};i.push({cell:t,contentSize:e,text:o,sparkChart:h,icon:a,cellPadding:n,cellMargin:s})}}return i}kL(t,i,s){const{cellsContentSizes:r,columnWidths:n,columnWidthsCumulative:o,rowHeights:h,rowHeightsCumulative:a}=i;this.qP.ah(this.YP),this.dP.clear();const l={cellBackground:this.tL.sv(),cellIconRect:this.sL.sv(),lineSet:this.hL.sv(),line:this.rL.sv(),pointSet:this.nL.sv(),rect:this.oL.sv(),junction:this.aL.sv(),arc:this.lL.sv()},c=[];for(const i of r){const{cell:r,text:u,sparkChart:d,icon:f,cellPadding:g,cellMargin:y}=i,p={column:r.column,row:r.row},m={x:t.x+o[r.column],y:t.y-a[r.row+r.rowSpan]},x={x:m.x+y.left,y:m.y+y.bottom},S={x:x.x+g.left,y:x.y+g.bottom},v={x:new Array(r.columnSpan).fill(0).reduce(((t,e,i)=>t+n[r.column+i]),0),y:new Array(r.rowSpan).fill(0).reduce(((t,e,i)=>t+h[r.row+i]),0)},A={x:v.x-y.left-y.right,y:v.y-y.top-y.bottom},b={x:A.x-g.left-g.right,y:A.y-g.top-g.bottom};if(u){const t=Vg(S,b,r.contentAlignment||this.HP);u.th(t[0]).Ul({x:t[1],y:t[2]}).Je(this.PL(r.textFillStyle||this.UP,r.content,this.UP)).Dt(r.highlight).Wr(this.Ct.dataGridTextShadow)}const C=this.PL(r.backgroundFillStyle||this.$P,r.content);if(C!==V){const t=l.cellBackground.add();t.th(m).J(v).Je(C).Qe(Ot).Dt(r.highlight),this.dP.set(t,p)}const M=r.borders||this.RP;if(M&&Pg(m,v,M,s,c),d){const t=S,e=b;Cf(d,l,this.OP,t,e,this.Ct,this.jA,r.highlight)}if(f){const t=f.Mi(),i=Vg(S,b,r.contentAlignment||this.HP);l.cellIconRect.add().th({x:i[0].x+t.x*(-.5-i[1]/2),y:i[0].y+t.y*(-.5-i[2]/2)}).J(t).Je(new Rt({source:f.js,fitMode:e.ImageFitMode.Stretch})).Qe(Ot).Dt(r.highlight)}}this.qP.ii();for(const t of c)this.qP.Oo().TA(t[0],t[1]);l.cellBackground.finishPlot(),l.cellIconRect.finishPlot(),l.lineSet.finishPlot(),l.line.finishPlot(),l.pointSet.finishPlot(),l.rect.finishPlot(),l.junction.finishPlot(),l.arc.finishPlot()}wL(t,e){const i=new Array(t).fill(0);for(const t of this.IP.values()){const s=e.filter((e=>t>=e.cell.column&&t+1<=e.cell.column+e.cell.columnSpan)).reduce(((t,e)=>{const i=e.contentSize.x/e.cell.columnSpan;return Math.max(t,i)}),0),r=this.cP.find((e=>e.column===t)),n=r?Kt(s,void 0!==r.min?r.min:ai,void 0!==r.max?r.max:hi):s;i[t]=n}return i}_L(t,e){const i=new Array(t).fill(0);for(const t of this.FP.values()){const s=e.filter((e=>t>=e.cell.row&&t+1<=e.cell.row+e.cell.rowSpan)).reduce(((t,e)=>{const i=e.contentSize.y/e.cell.rowSpan;return Math.max(t,i)}),0),r=this.uP.find((e=>e.row===t)),n=r?Kt(s,void 0!==r.min?r.min:ai,void 0!==r.max?r.max:hi):s;i[t]=n}return i}PL(t,e,i){if(j(t)){try{const i=Number(e);return new N({color:t.getPalette().getColors(i,void 0)})}catch(t){}return i||V}return t}mL(t,e){t.textFillStyle="function"==typeof e?e(t.textFillStyle||this.UP):e,this.bP=!0,this.St.Bs()}xL(t,e){t.textFont="function"==typeof e?e(t.textFont||this.GP):e,this.MP=!0,this.St.Bs()}bL(t,e){t.backgroundFillStyle="function"==typeof e?e(t.backgroundFillStyle||this.$P):e,this.SP=!0,this.St.Bs()}SL(t,e){t.contentAlignment=e,this.xP=!0,this.St.Bs()}pL(t,e){t.padding={...t.padding,...e},this.mP=!0,this.St.Bs()}AL(t,e,i){let s=this.EP(t,e);s?s.content=i:(s={column:t,row:e,columnSpan:1,rowSpan:1,content:i,highlight:0},this.lP.push(s),this.pP=!0),"string"==typeof s.content||"number"==typeof s.content?this.AP=!0:this.gP=!0,this.St.Bs()}yL(t){this.lP.forEach((e=>t(e)))}EP(t,e,i){const s=this.lP.find((i=>t>=i.column&&t+1<=i.column+i.columnSpan&&e>=i.row&&e+1<=i.row+i.rowSpan));return s&&i&&i(s),s}gL(t,e){const i=this.lP.filter((e=>t>=e.column&&t+1<=e.column+e.columnSpan));for(const t of i)t&&e(t)}vL(t,e){const i=this.lP.filter((e=>t>=e.row&&t+1<=e.row+e.rowSpan));for(const t of i)t&&e(t)}iL(t){var e,i,s,r,n,o;if(this.CL){if(0!==t.y){const r=null!==(i=null===(e=this.CL.rowHeightsCumulative.map(((t,e)=>({value:t,index:e}))).reverse().find((e=>-this.NP.y+(t.y>0?1:0)>=e.value)))||void 0===e?void 0:e.index)&&void 0!==i?i:0,n=null!==(s=this.CL.rowHeightsCumulative[r+t.y])&&void 0!==s?s:0;this.NP.y=-n,this.kP=!0,this.St.Bs()}if(0!==t.x){const e=null!==(n=null===(r=this.CL.columnWidthsCumulative.map(((t,e)=>({value:t,index:e}))).reverse().find((e=>this.NP.x+(t.x>0?1:0)>=e.value)))||void 0===r?void 0:r.index)&&void 0!==n?n:0,i=null!==(o=this.CL.columnWidthsCumulative[e+t.x])&&void 0!==o?o:0;this.NP.x=i,this.kP=!0,this.St.Bs()}}}dL(t){this.CL&&(this.zP.x+=t.x,this.zP.y+=t.y,this.kP=!0,this.St.Bs())}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}var Dg;e.DataGridCellContentAlignmentOptions=void 0,(Dg=e.DataGridCellContentAlignmentOptions||(e.DataGridCellContentAlignmentOptions={})).Center="center",Dg.RightCenter="right-center",Dg.LeftCenter="left-center",Dg.RightTop="right-top",Dg.LeftTop="left-top",Dg.RightBottom="right-bottom",Dg.LeftBottom="left-bottom",Dg.CenterTop="center-top",Dg.CenterBottom="center-bottom";const Pg=(t,e,i,s,r)=>{const n={x:t.x,y:t.y},o={x:t.x,y:t.y+e.y},h={x:t.x+e.x,y:t.y},a={x:t.x+e.x,y:t.y+e.y};i.top&&r.push([o,a]),i.bottom&&r.push([n,h]),i.left&&r.push([n,o]),i.right&&r.push([h,a])},Vg=(t,e,i)=>{const s=t.x,r=t.x+e.x,n=t.x+e.x/2,o=t.y+e.y,h=t.y,a=t.y+e.y/2;switch(i){case"left-center":return[l(s,a),-1,0];case"right-center":return[l(r,a),1,0];case"center":return[l(n,a),0,0];case"left-bottom":return[l(s,h),-1,-1];case"right-bottom":return[l(r,h),1,-1];case"center-bottom":return[l(n,h),0,-1];case"left-top":return[l(s,o),-1,1];case"right-top":return[l(r,o),1,1];case"center-top":return[l(n,o),0,1]}return Ye(0,`Unidentified DataGrid cell content alignment option: ${i}`)},_g={top:!1,bottom:!1,left:!1,right:!1},zg=(t,e)=>e?t.x:t.y,Ug=(t,e,i,s)=>1===e&&s===(i?t.columnIndex:t.rowIndex)||-1===e&&s===(i?t.columnIndex+t.columnSpan:t.rowIndex+t.rowSpan),Ng=(t,e,i,s,r,n)=>{const o=e.length,h=Math.sign(s),a=[],l=e.reduce(((t,e)=>t+e));for(let t=1;t<=o-1;t+=1)a.push(zg(r,n)*e.slice(0,t).reduce(((t,e)=>t+e),0)/l);const c=a.map((t=>0));let u=a[i-1]+s;for(let e=i;e>0&&e<o;e+=h){const s=t.filter((t=>Ug(t,h,n,e))).reduce(((t,e)=>Math.max(t,zg(e.panel.getMinimumSize()||{x:0,y:0},n))),20),o=a[e-1];if(1===h&&u>zg(r,n)-s||-1===h&&u<0+s){c.fill(0);break}if(e!==i&&(1===h?o>u:o<u))break;c[e-1]=u-o,u+=s*h}const d=c.map(((t,e)=>a[e]+t)),f=d.map(((t,e)=>(t-(e>0?d[e-1]:0))/zg(r,n)));return f.push(1-f.reduce(((t,e)=>t+e),0)),f};class Xg{constructor(t,e,i,s,r,n){this.coordsRelative="relative",this.coordsClient="client",this.ft=!1,this.lP=new Array,this.LL=[],this.OA=[],this.BL=void 0,this.DL=!0,this.EL=!0,this.RL=!0,this.UA=!1,this.zL=!0,this.OL=()=>{this.zL=!0,this.St.Bs()},this.VL=[],this.NL=t=>{for(let e=0;e<this.lP.length;e+=1)if(this.lP[e].panel===t){this.lP.splice(e,1),this.DL=!0,this.St.Bs();break}},this.GL=t=>{const e=this.LL.indexOf(t);e>=0&&this.LL.splice(e,1)},this.WA=t=>{const e=this.OA.indexOf(t);e>=0&&this.OA.splice(e,1)},this.UL=(t,e,i,s,r)=>{if(this.$L(e,i,s,r)){const n={panel:t,columnIndex:e,rowIndex:i,columnSpan:s,rowSpan:r};return this.lP.push(n),this.YL(n),this.DL=!0,t}throw new Vt("Out of dashboard range.")},this.R=new Ct,this.HL=e.numberOfRows,this.XL=e.numberOfColumns,this.jA=t,this.WL=e,this.jL=s;const o=this.XL*this.HL;this.ZL={x:new vf(new Array(this.XL).fill(1)),y:new vf(new Array(this.HL).fill(1))},this.Ct=i.Ct,this.QL=this.Ct.dashboardSplitterStyle,this.Bh=!1!==(null==e?void 0:e.animationsEnabled),this.JL=Sf(i,o),this.KL=i.Kk("dashboard splitters",500001),this.qS=()=>this.JL.Jk(),this.qA=this.JL.qk(),this.vs=i.vs.ys(this,{qL:{}}),this.vs.qL.Ls(this.Ct.effectsDashboardSplitters);const h=i.Mi();this.uiScale=rt.d2({scaleXYConstructor:hs}).ts(0,100).ss(0,100).J(h),this.oA=rt.d2({scaleXYConstructor:hs}).ts(0,this.uiScale.x.getCellSize()).ss(0,this.uiScale.y.getCellSize()).J(h),this.tB=i.iB.bind(i),this.sB=i.eB.bind(i),this.hB=i.rB.bind(i),this.nB=i.oB.bind(i),this.za=i.za.bind(i),this.Va=i.Va.bind(i),this.engine=i.QA,this.St=i.Lu,i.V("resize",this.OL),i.Bs();const a=t=>{this.UA=t.isInView,this.R.O("inviewchange",{isInView:this.UA})};i.V("inviewchanged",a),this.hg=()=>{i.G("inviewchanged",a)},this.aB(),this.setAnimationsEnabled(this.Bh),this.createChartXY=t=>{const e=Hg(t,this.WL,this.Bh);return this.UL(new gd(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createSpiderChart=t=>{const e=Hg(t,this.WL,this.Bh);return this.UL(new pf(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createPolarChart=t=>{const e=Hg(t,this.WL,this.Bh);return this.UL(new Bd(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createPieChart=t=>{const e=Hg(t,this.WL,this.Bh),i=e&&e.type?e.type:xl;return this.UL(new i(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createGaugeChart=t=>{const e=Hg(t,this.WL,this.Bh);return this.UL(new cg(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createFunnelChart=t=>{const e=Hg(t,this.WL,this.Bh),i=e&&e.type?e.type:Ud;return this.UL(new i(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createPyramidChart=t=>{const e=Hg(t,this.WL,this.Bh),i=t&&t.type?t.type:Kd;return this.UL(new i(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this,e),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createUIPanel=t=>{const e=Hg(t,this.WL,this.Bh);return this.UL(new Ia(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createLegendBoxPanel=t=>{const e=Hg(t,this.WL,this.Bh);return this.UL(new cc(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createZoomBandChart=t=>{const e=Hg(t,this.WL,this.Bh);return this.UL(new Ad(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createMapChart=t=>{const e=Hg(t,this.WL,this.Bh);return this.UL(new xc(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,e,this),e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createChart3D=t=>{const e=Hg(t,this.WL,this.Bh),i=new hc(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this,e);return this.UL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createDataGrid=t=>{const e=Hg(t,this.WL,this.Bh),i=new Lg(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this);return this.UL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createBarChart=t=>{const e=Hg(t,this.WL,this.Bh),i=new qf(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this,e);return this.UL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)},this.createParallelCoordinateChart=t=>{const e=Hg(t,this.WL,this.Bh),i=new mg(this.jA,this.JL.tT(this.lB(t.columnIndex,t.rowIndex)),this.cB(e,this.ZL),this.NL,n,this,e);return this.UL(i,e.columnIndex,e.rowIndex,e.columnSpan,e.rowSpan)}}lB(t,e){return t+e*this.XL}cB(t,e){return{d1:i=>new i.scale1DConstructor("x"===i.dimension?t.columnIndex:t.rowIndex,"x"===i.dimension?t.columnSpan:t.rowSpan,"x"===i.dimension?this.XL:this.HL,"x"===i.dimension?e.x:e.y),d2:i=>(new i.scaleXYConstructor).rt({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.XL,y:this.HL},e),d3:()=>new it({x:t.columnIndex,y:t.rowIndex},{x:t.columnSpan,y:t.rowSpan},{x:this.XL,y:this.HL},e)}}setWidth(t){return t instanceof Array||(t=[t,t]),this.tB(t[0]),this.sB(t[1]),this}setHeight(t){return t instanceof Array||(t=[t,t]),this.hB(t[0]),this.nB(t[1]),this}getWidth(){return this.za()}getHeight(){return this.Va()}setBackgroundFillStyle(t){return this.engine.setBackgroundFillStyle(t),this.KL.Bs(),this}getBackgroundFillStyle(){return this.engine.getBackgroundFillStyle()}setBackgroundStrokeStyle(t){return this.engine.setBackgroundStrokeStyle(t),this.KL.Bs(),this}getBackgroundStrokeStyle(){return this.engine.getBackgroundStrokeStyle()}getTheme(){return this.Ct}setSplitterStyle(t){const e=this.QL;return this.QL="function"==typeof t?t(this.QL):t,this.uB(e),this}getSplitterStyle(){return this.QL}setSplitterEffect(t){return this.vs.qL.Ls(t),this.St.Bs(),this}getSplitterEffect(){return this.vs.qL.Ds()}setAnimationHighlight(t){return this.RL=t,this.VL.forEach((e=>this.St.Ms.Os(e.line,t))),this}getAnimationHighlight(){return this.RL}uB(t){for(const t of this.VL)t.line.ah(this.QL);this.aB()}setColumnWidth(t,e){const i=this.ZL.x.T();return t>=0&&t<i.length&&(i[t]=e,this.ZL.x.C(i)),this.OL(),this}getColumnWidth(t){const e=this.ZL.x.T();if(t>=e.length)throw new Vt("Column index is out of dashboard range.");return e[t]}setRowHeight(t,e){const i=this.ZL.y.T();return t>=0&&t<i.length&&(i[Math.abs(i.length-1-t)]=e,this.ZL.y.C(i)),this.OL(),this}getRowHeight(t){const e=this.ZL.y.T();if(t>=e.length)throw new Vt("Row index is out of dashboard range.");return e[Math.abs(e.length-1-t)]}getSizePixels(){return this.oA.getInnerIntervalPixels()}dB(t,e,i){if(i&&Math.abs(t.x)>0)this.fB(e,t.x);else{if(i||!(Math.abs(t.y)>0))return;this.AB(e,t.y)}for(const t of this.lP)t.panel.W();this.OL()}AB(t,e){const i=Ng(this.lP,this.ZL.y.T(),t,e,this.oA.Mi(),!1);this.ZL.y.C(i),this.OL()}fB(t,e){const i=Ng(this.lP,this.ZL.x.T(),t,e,this.oA.Mi(),!0);this.ZL.x.C(i),this.OL()}gB(){this.VL.forEach((t=>t.line.dispose())),this.VL.length=0;for(let t=1;t<=this.XL-1;t+=1)for(let i=0;i<=this.HL-1;i+=1)if(void 0!==this.lP.find((e=>xi(i,e.rowIndex,e.rowIndex+e.rowSpan-1)&&(t===e.columnIndex||t===e.columnIndex+e.columnSpan)))){const s=this.KL.uh(this.oA).ah(this.QL);s.addEventListener("pointerenter",(i=>{this.VL.forEach((e=>{"vertical"===e.alignment&&e.column===t&&(this.St.Ms.zs(e.line,1),this.KL.pB(e.line))})),this.BL=this.engine.setMouseStyle(e.MouseStyles.ResizeColumn,this.BL),this.St.Bs()})),s.addEventListener("pointerleave",(e=>{this.VL.forEach((e=>{"vertical"===e.alignment&&e.column===t&&this.St.Ms.zs(e.line,0)})),this.BL=this.engine.restoreMouseStyle(this.BL),this.St.Bs()})),s.addEventListener("pointerdown",(i=>{Se(i);let s=i;const r=i=>{Se(i),this.BL=this.engine.setMouseStyle(e.MouseStyles.ResizeColumn,this.BL),this.VL.forEach((e=>{"vertical"===e.alignment&&e.column===t&&(this.St.Ms.zs(e.line,1),this.KL.pB(e.line))}));const r={x:i.clientX-s.clientX,y:i.clientY-s.clientY};s=i,this.dB(r,t,!0)},n=e=>{e.pointerId===i.pointerId&&(this.VL.forEach((e=>{"vertical"===e.alignment&&e.column===t&&this.St.Ms.zs(e.line,0)})),this.BL=this.engine.restoreMouseStyle(this.BL),Wt.removeEventListener("pointermove",r),Wt.removeEventListener("pointerup",n))};Wt.addEventListener("pointermove",r),Wt.addEventListener("pointerup",n)})),this.St.Ms.bs(s,(t=>s.Dt(t)),{animationEnabled:this.RL}),this.VL.push({row:i,column:t,line:s,alignment:"vertical"})}for(let t=1;t<=this.HL-1;t+=1)for(let i=0;i<=this.XL-1;i+=1)if(void 0!==this.lP.find((e=>xi(i,e.columnIndex,e.columnIndex+e.columnSpan-1)&&(t===e.rowIndex||t===e.rowIndex+e.rowSpan)))){const s=this.KL.uh(this.oA).ah(this.QL);s.addEventListener("pointerenter",(i=>{this.VL.forEach((e=>{"horizontal"===e.alignment&&e.row===t&&(this.St.Ms.zs(e.line,1),this.KL.pB(e.line))})),this.BL=this.engine.setMouseStyle(e.MouseStyles.ResizeRow,this.BL),this.St.Bs()})),s.addEventListener("pointerleave",(e=>{this.VL.forEach((e=>{"horizontal"===e.alignment&&e.row===t&&this.St.Ms.zs(e.line,0)})),this.BL=this.engine.restoreMouseStyle(this.BL),this.St.Bs()})),s.addEventListener("pointerdown",(i=>{Se(i);let s=i;const r=i=>{Se(i),this.BL=this.engine.setMouseStyle(e.MouseStyles.ResizeRow,this.BL),this.VL.forEach((e=>{"horizontal"===e.alignment&&e.row===t&&(this.St.Ms.zs(e.line,1),this.KL.pB(e.line))}));const r={x:i.clientX-s.clientX,y:-(i.clientY-s.clientY)};s=i,this.dB(r,t,!1)},n=e=>{e.pointerId===i.pointerId&&(this.VL.forEach((e=>{"horizontal"===e.alignment&&e.row===t&&this.St.Ms.zs(e.line,0)})),this.BL=this.engine.restoreMouseStyle(this.BL),Wt.removeEventListener("pointermove",r),Wt.removeEventListener("pointerup",n))};Wt.addEventListener("pointermove",r),Wt.addEventListener("pointerup",n)})),this.St.Ms.bs(s,(t=>s.Dt(t)),{animationEnabled:this.RL}),this.VL.push({row:t,column:i,line:s,alignment:"horizontal"})}this.vs.qL.Cs(this.VL.map((t=>t.line)))}vB(){const t=this.oA.Mi(),e=this.ZL.x.T(),i=e.reduce(((t,e)=>t+e)),s=this.ZL.y.T(),r=s.reduce(((t,e)=>t+e));this.VL.forEach((n=>{if("vertical"===n.alignment){const o=l(t.x*e.slice(0,n.column).reduce(((t,e)=>t+e),0)/i,t.y*s.slice(0,n.row).reduce(((t,e)=>t+e),0)/r),h=l(o.x,t.y*s.slice(0,n.row+1).reduce(((t,e)=>t+e),0)/r);n.line.fh(o).dh(h)}else{const o=l(t.x*e.slice(0,n.column).reduce(((t,e)=>t+e),0)/i,t.y*s.slice(0,n.row).reduce(((t,e)=>t+e),0)/r),h=l(t.x*e.slice(0,n.column+1).reduce(((t,e)=>t+e),0)/i,o.y);n.line.fh(o).dh(h)}}))}setAnimationsEnabled(t){return this.Bh=t,this.getCells().filter((t=>t.panel instanceof Oa)).forEach((e=>e.panel.setAnimationsEnabled(t))),this.setAnimationHighlight(this.Bh),this}getAnimationsEnabled(){return this.Bh}getCells(){return this.lP.slice()}dispose(){return this.ft||(this.hg&&this.hg(),this.lP.slice().forEach((t=>t.panel.dispose())),this.LL.slice().forEach((t=>t.dispose())),this.OA.slice().forEach((t=>t.dispose())),this.ft=!0,this.jL(),this.R.O("dispose",{})),this}isDisposed(){return this.ft}getIsInView(){return this.UA}saveToFile(t,e,i){return Ea(this.engine,t,e,i),this}Bu(t){if(this.zL){const t=this.St.ct.Mi(),e=t.x,i=t.y;this.uiScale.J(e,i),this.oA.J(e,i);const s=this.uiScale.getInnerIntervalPixels();this.oA.ts(0,s.x).ss(0,s.y),this.R.O("resize",{width:s.x,height:s.y,engineWidth:e,engineHeight:i}),this.EL=!0}this.DL&&(this.gB(),this.DL=!1,this.EL=!0),this.EL&&(this.vB(),this.EL=!1);for(const e of this.lP)e.panel.qe(t);return this.LL.forEach((t=>t.Dr())),this.LL.forEach((t=>t.qe())),this.OA.forEach((t=>t.Dr())),this.OA.forEach((t=>t.qe())),this.zL=!1,this}X(){for(const t of this.lP)t.panel.X();return this.oA.x.X(),this.oA.y.X(),this.uiScale.x.X(),this.uiScale.y.X(),this}W(){for(const t of this.lP)t.panel.W();return this.oA.x.W(),this.oA.y.W(),this.uiScale.x.W(),this.uiScale.y.W(),this}translateCoordinate(t,e,i){return ka(t,e,i,this.oA,this.St)}addUIElement(t=fh,e=this.uiScale){e=Ba(e,this.oA);const i=wa(t,this.qS(),this.uiScale,e,this.GL,this.Ct);return this.LL.push(i),i}addLegendBox(t=Eh,i=this.uiScale){i=Ba(i,this.oA);const s=wa(t,this.qA,this.uiScale,i,this.WA,this.Ct);return s.setDraggingMode(e.UIDraggingModes.notDraggable),this.OA.push(s),s}getLegendBoxes(){return this.OA}$L(t,e,i,s){return e>=0&&t>=0&&e+s<=this.HL&&t+i<=this.XL}YL(t){const e=this.QL,i=e===Ot?0:e.getThickness()/2,s={left:t.columnIndex>0?i:0,top:t.rowIndex<this.HL-1?i:0,right:t.columnIndex<this.XL-1?i:0,bottom:t.rowIndex>0?i:0};t.panel.vn(s)}aB(){this.uiScale.x.yi([0,0]),this.uiScale.y.yi([0,0]),this.oA.x.yi([0,0]),this.oA.y.yi([0,0]);for(const t of this.lP)this.YL(t);this.St.Bs()}addEventListener(t,e,i){this.R.addEventListener(t,e,i)}removeEventListener(t,e){this.R.removeEventListener(t,e)}}const Hg=(t,e,i)=>{const s={...t,columnSpan:t.columnSpan||1,rowSpan:t.rowSpan||1,animationsEnabled:void 0!==t.animationsEnabled?t.animationsEnabled:i};var r,n;return s.rowIndex=(r=s.rowIndex,n=s.rowSpan,e.numberOfRows-(r+n)),s},Gg=(t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAgCAYAAADwkoGKAAAsa2NhQlgAACxranVtYgAAAB5qdW1kYzJwYQARABCAAACqADibcQNjMnBhAAAALEVqdW1iAAAAR2p1bWRjMm1hABEAEIAAAKoAOJtxA3Vybjp1dWlkOjlmZDBkZjkzLTVmMDMtNDczYi1hZThhLTFhNDM4NmMzNmJhYQAAAAGzanVtYgAAAClqdW1kYzJhcwARABCAAACqADibcQNjMnBhLmFzc2VydGlvbnMAAAAA12p1bWIAAAAmanVtZGNib3IAEQAQgAAAqgA4m3EDYzJwYS5hY3Rpb25zAAAAAKljYm9yoWdhY3Rpb25zgaNmYWN0aW9ua2MycGEuZWRpdGVkbXNvZnR3YXJlQWdlbnRtQWRvYmUgRmlyZWZseXFkaWdpdGFsU291cmNlVHlwZXhTaHR0cDovL2N2LmlwdGMub3JnL25ld3Njb2Rlcy9kaWdpdGFsc291cmNldHlwZS9jb21wb3NpdGVXaXRoVHJhaW5lZEFsZ29yaXRobWljTWVkaWEAAACranVtYgAAAChqdW1kY2JvcgARABCAAACqADibcQNjMnBhLmhhc2guZGF0YQAAAAB7Y2JvcqVqZXhjbHVzaW9uc4GiZXN0YXJ0GCFmbGVuZ3RoGSx3ZG5hbWVuanVtYmYgbWFuaWZlc3RjYWxnZnNoYTI1NmRoYXNoWCBvErgv+J0u7bVCYViyMUgw5yMb8idAv1erA3/DALx9NWNwYWRIAAAAAAAAAAAAAAIDanVtYgAAACRqdW1kYzJjbAARABCAAACqADibcQNjMnBhLmNsYWltAAAAAddjYm9yqGhkYzp0aXRsZW9HZW5lcmF0ZWQgaW1hZ2VpZGM6Zm9ybWF0aWltYWdlL3BuZ2ppbnN0YW5jZUlEeCh4bXAuaWlkOjI3NEMxQjdDN0E0MDExRUVBQkZFQUNFQjJDOTA0NzVCb2NsYWltX2dlbmVyYXRvcng2QWRvYmVfUGhvdG9zaG9wLzI1LjIuMCBhZG9iZV9jMnBhLzAuNy42IGMycGEtcnMvMC4yNS4ydGNsYWltX2dlbmVyYXRvcl9pbmZvgb9kbmFtZW9BZG9iZSBQaG90b3Nob3BndmVyc2lvbmYyNS4yLjD/aXNpZ25hdHVyZXgZc2VsZiNqdW1iZj1jMnBhLnNpZ25hdHVyZWphc3NlcnRpb25zgqJjdXJseCdzZWxmI2p1bWJmPWMycGEuYXNzZXJ0aW9ucy9jMnBhLmFjdGlvbnNkaGFzaFggSmnBvf+o3kEweL4k7cz4MTrB0WSVNFZxoA1rBrM31K+iY3VybHgpc2VsZiNqdW1iZj1jMnBhLmFzc2VydGlvbnMvYzJwYS5oYXNoLmRhdGFkaGFzaFggL2g6Dghd536quyA5vPlS/9NGA5WvLRkkKJmqn0VxCoFjYWxnZnNoYTI1NgAAKEBqdW1iAAAAKGp1bWRjMmNzABEAEIAAAKoAOJtxA2MycGEuc2lnbmF0dXJlAAAAKBBjYm9y0oREoQE4JKNmc2lnVHN0oWl0c3RUb2tlbnOBoWN2YWxZDjYwgg4yMAMCAQAwgg4pBgkqhkiG9w0BBwKggg4aMIIOFgIBAzEPMA0GCWCGSAFlAwQCAQUAMIGCBgsqhkiG9w0BCRABBKBzBHEwbwIBAQYJYIZIAYb9bAcBMDEwDQYJYIZIAWUDBAIBBQAEIHj4VpJDPzaO0x4hOPnj/w1GTHuwXU0IpBf4VVocIQzoAhB3SsxvHza2JR1fKj3Mjr0yGA8yMDIzMTEwMzExNTcyNloCCQCyOL6wAOGCbaCCC70wggUHMIIC76ADAgECAhAFHp6R1x6RCrvkPVzt0N3ZMA0GCSqGSIb3DQEBCwUAMGMxCzAJBgNVBAYTAlVTMRcwFQYDVQQKEw5EaWdpQ2VydCwgSW5jLjE7MDkGA1UEAxMyRGlnaUNlcnQgVHJ1c3RlZCBHNCBSU0E0MDk2IFNIQTI1NiBUaW1lU3RhbXBpbmcgQ0EwHhcNMjMwOTA4MDAwMDAwWhcNMzQxMjA3MjM1OTU5WjBYMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xMDAuBgNVBAMTJ0RpZ2lDZXJ0IEFkb2JlIEFBVEwgVGltZXN0YW1wIFJlc3BvbmRlcjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABE0srlH5A/+15/MFl1asNh8Q8TubOsEVfu0qlJrF0smjtwL1IeHZ/AB7J59u1Trpho1BDN85lfTY30rNBsfT+myjggGLMIIBhzAOBgNVHQ8BAf8EBAMCB4AwDAYDVR0TAQH/BAIwADAWBgNVHSUBAf8EDDAKBggrBgEFBQcDCDAgBgNVHSAEGTAXMAgGBmeBDAEEAjALBglghkgBhv1sBwEwHwYDVR0jBBgwFoAUuhbZbU2FL3MpdpovdYxqII+eyG8wHQYDVR0OBBYEFLA1qlbDIamLztO4vIsWJVed7zThMFoGA1UdHwRTMFEwT6BNoEuGSWh0dHA6Ly9jcmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcmwwgZAGCCsGAQUFBwEBBIGDMIGAMCQGCCsGAQUFBzABhhhodHRwOi8vb2NzcC5kaWdpY2VydC5jb20wWAYIKwYBBQUHMAKGTGh0dHA6Ly9jYWNlcnRzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydFRydXN0ZWRHNFJTQTQwOTZTSEEyNTZUaW1lU3RhbXBpbmdDQS5jcnQwDQYJKoZIhvcNAQELBQADggIBAHgrjELHhBCEWJSCyRX7lsL0C9LJgbX1ryVYySNRxHkMR2LqC7PQZRJgDNR+kJop8P5v2Bzp/jMrzw4U4pY6rYv3I8HpFlJa4uBwUTIUgHWpi8Xxd1JEEX94POODi7HySekX60A055BozFb7GGVaxb0LreQTRXnkr6ggPNUPX9Gh+2ScOxlTdQQLgZbkdYvxo3Ap6cy9riZijRxOZqiOyWSxMUhgKxeKzwrFW6Xbe0awNhOUXZzIxc4ixpKzWSItpPJ30ZiBQn49U3ADYTnshbN9ZkTA1pHf/Nov2ZUvvddkZ8UYvwo9vBvLTDvnmABnRMBKaXYAs3ZCvw9CkDPOWTeUJMFRAtmUx52ohaA3nD8bCJ6UfpQ2pFfOdShwpb6GKv0g+BgcdIG2LHPJ0Ufmr+XmpgZgq/HIge0hjcCADpjDgq2z4B0L4xtAA1M8MrUx02hxb7104nFKqMuv5zJTQl3sgwqXUyP+9zHQP9y/Z5Fx/AQWrOXCW56dV7P4cFBJl8zHqinlhkOStZ1m22+9Hlq+eC0hJ2lkF1LuzRdJJb/51LXoPKRnopFDng6XpoD7eG6w4YpAx9+P00JuUoBsYSrdsuFiyWyQQGBAnjI69ggbSLcW+hJytuinaxawVlItJkS2eV5Z4XsxPg7f82uRkdtN0hTHeI93CN3OWeRebnK7MIIGrjCCBJagAwIBAgIQBzY3tyRUfNhHrP0oZipeWzANBgkqhkiG9w0BAQsFADBiMQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3d3cuZGlnaWNlcnQuY29tMSEwHwYDVQQDExhEaWdpQ2VydCBUcnVzdGVkIFJvb3QgRzQwHhcNMjIwMzIzMDAwMDAwWhcNMzcwMzIyMjM1OTU5WjBjMQswCQYDVQQGEwJVUzEXMBUGA1UEChMORGlnaUNlcnQsIEluYy4xOzA5BgNVBAMTMkRpZ2lDZXJ0IFRydXN0ZWQgRzQgUlNBNDA5NiBTSEEyNTYgVGltZVN0YW1waW5nIENBMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAxoY1BkmzwT1ySVFVxyUDxPKRN6mXUaHW0oPRnkyibaCwzIP5WvYRoUQVQl+kiPNo+n3znIkLf50fng8zH1ATCyZzlm34V6gCff1DtITaEfFzsbPuK4CEiiIY3+vaPcQXf6sZKz5C3GeO6lE98NZW1OcoLevTsbV15x8GZY2UKdPZ7Gnf2ZCHRgB720RBidx8ald68Dd5n12sy+iEZLRS8nZH92GDGd1ftFQLIWhuNyG7QKxfst5Kfc71ORJn7w6lY2zkpsUdzTYNXNXmG6jBZHRAp8ByxbpOH7G1WE15/tePc5OsLDnipUjW8LAxE6lXKZYnLvWHpo9OdhVVJnCYJn+gGkcgQ+NDY4B7dW4nJZCYOjgRs/b2nuY7W+yB3iIU2YIqx5K/oN7jPqJz+ucfWmyU8lKVEStYdEAoq3NDzt9KoRxrOMUp88qqlnNCaJ+2RrOdOqPVA+C/8KI8ykLcGEh/FDTP0kyr75s9/g64ZCr6dSgkQe1CvwWcZklSUPRR8zZJTYsg0ixXNXkrqPNFYLwjjVj33GHek/45wPmyMKVM1+mYSlg+0wOI/rOP015LdhJRk8mMDDtbiiKowSYI+RQQEgN9XyO7ZONj4KbhPvbCdLI/Hgl27KtdRnXiYKNYCQEoAA6EVO7O6V3IXjASvUaetdN2udIOa5kM0jO0zbECAwEAAaOCAV0wggFZMBIGA1UdEwEB/wQIMAYBAf8CAQAwHQYDVR0OBBYEFLoW2W1NhS9zKXaaL3WMaiCPnshvMB8GA1UdIwQYMBaAFOzX44LScV1kTN8uZz/nupiuHA9PMA4GA1UdDwEB/wQEAwIBhjATBgNVHSUEDDAKBggrBgEFBQcDCDB3BggrBgEFBQcBAQRrMGkwJAYIKwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBBBggrBgEFBQcwAoY1aHR0cDovL2NhY2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcnQwQwYDVR0fBDwwOjA4oDagNIYyaHR0cDovL2NybDMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0VHJ1c3RlZFJvb3RHNC5jcmwwIAYDVR0gBBkwFzAIBgZngQwBBAIwCwYJYIZIAYb9bAcBMA0GCSqGSIb3DQEBCwUAA4ICAQB9WY7Ak7ZvmKlEIgF+ZtbYIULhsBguEE0TzzBTzr8Y+8dQXeJLKftwig2qKWn8acHPHQfpPmDI2AvlXFvXbYf6hCAlNDFnzbYSlm/EUExiHQwIgqgWvalWzxVzjQEiJc6VaT9Hd/tydBTX/6tPiix6q4XNQ1/tYLaqT5Fmniye4Iqs5f2MvGQmh2ySvZ180HAKfO+ovHVPulr3qRCyXen/KFSJ8NWKcXZl2szwcqMj+sAngkSumScbqyQeJsG33irr9p6xeZmBo1aGqwpFyd/EjaDnmPv7pp1yr8THwcFqcdnGE4AJxLafzYeHJLtPo0m5d2aR8XKc6UsCUqc3fpNTrDsdCEkPlM05et3/JWOZJyw9P2un8WbDQc1PtkCbISFA0LcTJM3cHXg65J6t5TRxktcma+Q4c6umAU+9Pzt4rUyt+8SVe+0KXzM5h0F4ejjpnOHdI/0dKNPH+ejxmF/7K9h+8kaddSweJywm228Vex4Ziza4k9Tm8heZWcpw8De/mADfIBZPJ/tgZxahZrrdVcA6KYawmKAr7ZVBtzrVFZgxtGIJDwq9gdkT/r+k0fNX2bwE+oLeMt8EifAAzV3C+dAjfwAL5HYCJtnwZXZCpimHCUcr5n8apIUP/JiW9lVUKx+A+sDyDivl1vupL0QVSucTDh3bNzgaoSv27dZ8/DGCAbgwggG0AgEBMHcwYzELMAkGA1UEBhMCVVMxFzAVBgNVBAoTDkRpZ2lDZXJ0LCBJbmMuMTswOQYDVQQDEzJEaWdpQ2VydCBUcnVzdGVkIEc0IFJTQTQwOTYgU0hBMjU2IFRpbWVTdGFtcGluZyBDQQIQBR6ekdcekQq75D1c7dDd2TANBglghkgBZQMEAgEFAKCB0TAaBgkqhkiG9w0BCQMxDQYLKoZIhvcNAQkQAQQwHAYJKoZIhvcNAQkFMQ8XDTIzMTEwMzExNTcyNlowKwYLKoZIhvcNAQkQAgwxHDAaMBgwFgQU2Rq5M/4XremCHqYT9aQ6cU4+fn0wLwYJKoZIhvcNAQkEMSIEIGmY+GsCefCDmP0PFcYjdxBUfi0EgKYuEZb9pUMyLNuVMDcGCyqGSIb3DQEJEAIvMSgwJjAkMCIEIILa8ZSVezaEAkWP1ScAaf5ixxRW+p4Lhqv4J+hTICfZMAoGCCqGSM49BAMCBEcwRQIgcxxuf7QHV9Fkpj1VhPrFqhNFh8dZzl8qUU/2N3Sr4eoCIQDKu0KGYL++CSsDAXjJciMDbr5ImTy3jw0yQU5GYYeLimd4NWNoYWluglkGMzCCBi8wggQXoAMCAQICEBtbCzvasORd8vMNnlTR2tIwDQYJKoZIhvcNAQELBQAwdTELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEiMCAGA1UEAxMZQWRvYmUgUHJvZHVjdCBTZXJ2aWNlcyBHMzAeFw0yMzAyMDEwMDAwMDBaFw0yNDAyMDEyMzU5NTlaMIGhMREwDwYDVQQDDAhjYWktcHJvZDEcMBoGA1UECwwTQ29udGVudCBDcmVkZW50aWFsczETMBEGA1UECgwKQWRvYmUgSW5jLjERMA8GA1UEBwwIU2FuIEpvc2UxEzARBgNVBAgMCkNhbGlmb3JuaWExCzAJBgNVBAYTAlVTMSQwIgYJKoZIhvcNAQkBFhVncnAtY2FpLW9wc0BhZG9iZS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQDv0wCnfYY9lkHDsykrTG7FYlnYHBcyualuD5u9ULjzv+FsTWOLg8Nhrz9RTxI9EeBbu3Wm7f4vqPsQYfxkEp0wIa6DVmEOZhbAeRfbhybWQ/D4Wvvck4mEZR+QZmTpIn7HX61gbtMFHlJUxkYBctIoAt9TBAFbz9d5Ig2WG0bsH39b6/8USXnIIk4FB6dtBRT1xeEwSDtwOd1YBpXXNBJmRWHXNJZZ85of2tBTesg/kMvTrOJJxYDZ97U416wcvbVomlees+NXUY3/ZB4xH+NsZils7m1bL2v2hSnHiLoqZeUKklbHUmT4ZpjrZCdtuIsWm5j2PPXKr7HKUuCbZSXBAgMBAAWjggGMMIIBiDAMBgNVHRMBAf8EAjAAMA4GA1UdDwEB/wQEAwIHgDAeBgNVHSUEFzAVBgkqhkiG9y8BAQwGCCsGAQUFBwMEMIGOBgNVHSAEgYYwgYMwgYAGCSqGSIb3LwECAzBzMHEGCCsGAQUFBwICMGUMY1lvdSBhcmUgbm90IHBlcm1pdHRlZCB0byB1c2UgdGhpcyBMaWNlbnNlIENlcnRpZmljYXRlIGV4Y2VwdCBhcyBwZXJtaXR0ZWQgYnkgdGhlIGxpY2Vuc2UgYWdyZWVtZW50LjBdBgNVHR8EVjBUMFKgUKBOhkxodHRwOi8vcGtpLWNybC5zeW1hdXRoLmNvbS9jYV83YTVjM2EwYzczMTE3NDA2YWRkMTkzMTJiYzFiYzIzZi9MYXRlc3RDUkwuY3JsMDcGCCsGAQUFBwEBBCswKTAnBggrBgEFBQcwAYYbaHR0cDovL3BraS1vY3NwLnN5bWF1dGguY29tMB8GA1UdIwQYMBaAFFcpejJNzP7kNU7AHyRzznNTq99qMA0GCSqGSIb3DQEBCwUAA4ICAQBXjlGa3yAK/Gijn6n/JNU9FZm72MP6vc5czrWe9y0T+EawuRvhpD5Edi1TnXkrpe8sMkgSjTGdbY+yGhq8zlCWQeXN1/aWo3L9Xr1uNxY/oVpLn0uWWfnfJ7yR9gKl/yoMfhjydT4t1fXHi/MhfhrWSVRHqX2U31UFGz/e298P2kv+vqhzpIUo1bj+jibtoPLMMQcCOTtKiJOTh4o3VSZpwQDERCzo91NkF+LnZjwYl6fE5USIkg/oCoomXxSPpowybDrcRJ9ilbtJcER48/LGgwzv/c7OYdron4PnEXm1FkOaVj+QRf7OwiNTizonhIzLR5Vfp0QHOWv/bPzvCjPQd+Xr0Q4032WlSxQwostNTAPtoVAU4OCwVH3Ech38emJ00/6fkDCdr7MN8/4n2LSNrMUvaBEZdmLqDCBnO02dbFrmpg3pTc0FqRQ4GL/88pjRNSMy5tU9SoQnSCGYqIsjfL8AzgPEGiXXRgABYc1uXecf4/eayb3K2MPs7hnWTbUKpHHJIwxpdN3vTGdZNWpz9Oxfuo3eELQlkTvACHgqkaXi/FAanHe5PChn6fr1/4cNF8goD0buPApgS3zzwqjRhxrH8ISwPfJn8JqzurMaLDMnnc18tHzUiMtX73jf6oXh7voCxX/T4D3nFPlxU3om2cpcLQ1Wd4026x18rlSGR1kGpTCCBqEwggSJoAMCAQICEAyotlR7iebSBol1zYubieIwDQYJKoZIhvcNAQELBQAwbDELMAkGA1UEBhMCVVMxIzAhBgNVBAoTGkFkb2JlIFN5c3RlbXMgSW5jb3Jwb3JhdGVkMR0wGwYDVQQLExRBZG9iZSBUcnVzdCBTZXJ2aWNlczEZMBcGA1UEAxMQQWRvYmUgUm9vdCBDQSBHMjAeFw0xNjExMjkwMDAwMDBaFw00MTExMjgyMzU5NTlaMHUxCzAJBgNVBAYTAlVTMSMwIQYDVQQKExpBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZDEdMBsGA1UECxMUQWRvYmUgVHJ1c3QgU2VydmljZXMxIjAgBgNVBAMTGUFkb2JlIFByb2R1Y3QgU2VydmljZXMgRzMwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQC3Hy69vQmzXEhs/gyDrmwB6lF4JaSAPomnsbKIZNr2iXaB+fkd85X8eJiNmI7P5O4cVT4Nc1p3zrESqBV4ZUyW8gcZ78QdwoHG8QNd2VNcHnMgSR+XT9Iafsnq9Nfww3Jt9KL3l5ANQ5n1+MJqr48EWNLll942bOL/JH4ywDSMoqhZqtJEIUUUGlQVBZ8CAvJc7LE6ddA5C52PE2Ppa7RfQgHXf4gfXVZwpxYRZcziPiOHqEvLb0J3cShUbejFxV6cwX8QyAPa1ePHg1RtM0HX+D34xHo3DkyGnmT+Ddq00TEDGG26AL5PdINKFIQl+zaq6KJFQe1fdGE5wrWzU4mBPmzaz3EbLn+7FWlwAhorYqIMldbfHE3ydc+aTU1JW7+bG19qmvhO9IluGtTtQDeqFBj2fg6faxsfVfVPD7stN6TwoIDlkOCE4RE+Iin8m3z3eqi/VsTmsmRqBxWDRaqOHz02EJoEDxXJG3ei+UbIIp01XZQvdufm90WxOTuqqan2ZqTPX9K5VdjEh/ovr7xFc5q1dZo+Sa5y4sTVM854/tLU3klOgUKzzSXYPYS3GhBcYJHjwr9xNRHnNX99D6F0g7OijScWfvtjxh13aTv/H0ETvymah4yfDpVdh9cK5YSCPqnuOlsujFAyhYwJXOWDvZZU2EkWVLDhoPx9zp7N4QIDAQABo4IBNDCCATAwEgYDVR0TAQH/BAgwBgEB/wIBADA1BgNVHR8ELjAsMCqgKKAmhiRodHRwOi8vY3JsLmFkb2JlLmNvbS9hZG9iZXJvb3RnMi5jcmwwDgYDVR0PAQH/BAQDAgEGMBQGA1UdJQQNMAsGCSqGSIb3LwEBBzBXBgNVHSAEUDBOMEwGCSqGSIb3LwECAzA/MD0GCCsGAQUFBwIBFjFodHRwczovL3d3dy5hZG9iZS5jb20vbWlzYy9wa2kvcHJvZF9zdmNlX2Nwcy5odG1sMCQGA1UdEQQdMBukGTAXMRUwEwYDVQQDEwxTWU1DLTQwOTYtMzMwHQYDVR0OBBYEFFcpejJNzP7kNU7AHyRzznNTq99qMB8GA1UdIwQYMBaAFKYc4W1UJEyoj0hyv26pjNXk7DHUMA0GCSqGSIb3DQEBCwUAA4ICAQBxzuUHjKbcLdzI4DtlXgCSgZXrlSAkr59pOF3JfPG42qVNAGU7JcEYXJ6+WbfcGwY7WYMl+jO7IvJPb7shXFYW9bnJgxX7lLU14KExchmcLNY1ee6IhBJ2Y8PzZMRUKSd5CkURPg0PBLGjz/KR/DofHx+G4rPTCOGORYxeYrd01lci5hVxvKccvIk7MD69ZTewfZPSM+0WnsU3f0Zmd7hgbRpUyWceG0eHFpdUKK/ZFWhHjDVC28odCnN885tHncKXviItK0ZUUo/AIthFKlhEXsnq9VL9fFbgvO83ZvpUQo5y8mY3cuGnEVGXdhjNb53CfC1u4dbpYmWaN99subUzEsUaUb3loLPfVfzDOpg2y9v37kBdy/wuXr20teY7U62xj/fAgs1QSnhUtlMTfCqbefyEycKVmKIrJkJLsvgTSYKVvH4FFIwfd5WjqOC97jX98rcVAzhAI0iSkazsWOMvL6m0L4nLJapx+85GsVX8Y6AHmEP4bmCElwil6KAP+UewJFiw5rmwV2pESHAhYuZJa03B8tl0nd2QJzvJGmbeBqXqpF9ORinFM3HErK8puRokOjFH2+1asLeI2tB31W/ELdNe27Ogduq6Z6qBwCp59YX27qydDhD0WRfN64kCs25K88iGAGNW2CAfTDS+b+WYJBiIL9jXYZ4LF+BiUvfdu2NwYWRZC70AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPZZAQBKX2Q2ihN2fLDLReHISpfOF0xIqNpOZXbBwZ0XanWG98erbIBdawl7r9nVma/uZjYH457wp00TVpKYUTJHMnzJMKskvM2Df4K6t5pUKGtJqEvMXLUy3g9kJq53aYDwikcUE+8wv+CYtu/+vii4XYSXQIxT4NN+JKoTDXmrNH1G46Nmpfq6SKk0g9GQ2brbkW3fzGR0xDxY3BXRy71guSBxN9TAbQGqUjMnkIyBcwV9wUQ2oCW9oIMNKASjW0CRkcFEzzmrQ+y+zHYpNvUaG7QehHcyhvOec3plzlyP6DZeQWp3PHA5bmonI8t5j6Qj15X1KnQiXuJ0rW+xoMA89aIVmpx4VgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAOSaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjEtYzAwMSA3OS4xNDYyODk5Nzc3LCAyMDIzLzA2LzI1LTIzOjU3OjE0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjYyYTdmYWExLWJmZTMtMjE0Ny04MjAwLWMxM2NlMGU4ZTc1NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyNzRDMUI3RDdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNzRDMUI3QzdBNDAxMUVFQUJGRUFDRUIyQzkwNDc1QiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjUuMiAoMjAyMzEwMjQubS4yMzc0IDRhYjk0MzkpICAoV2luZG93cykiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDphYjQzZjNjYy1hNTY4LTRkNGQtOTdiZC1iYjk0YjBlZjhjYmQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NjJhN2ZhYTEtYmZlMy0yMTQ3LTgyMDAtYzEzY2UwZThlNzU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HNvo5wAADZFJREFUeNrsXFtPVUkW3gc4yP0qDigKON517FFbHRGn1TamjaOJvvhsjIkvPplgfEKe1AefNDE+GP+AmWTszPTYcbpn2piJzc1GWwlOekRBEBFQ7jeZ9ZVrnVkUtfc5CGp3h5VU9qUuu3bVV9+67DonND4+7omEQiHPJaWlpYlxcXGLKX8epTCdB5aXNnHU6c2bN5POcaREp+O9dHxSX1/f5s3KL1ImYCkasMrKyvIISJspD+AyZSTpOrodDSaIBpQCkwtgSM8oVd2/f39M2quoqAijmcrKyjG/l7L77vde+v6sfCRgbdu2LY3AtJNSgg0qDa5oTOViKQtM9nXTgQMHaqmpPEoLKXUQqJpcYIqPj/cSEhLMUZgUbYyNjZkjRPpu50n+VEUvKtditMEb7Xom5OrVqzvpkOXIukFps5XXTunO4cOHR7heKp1/ye1gEX9BCcdv6H4330cbCyh9iXrRgJUQ1FmarFWUIqDS4ApiCT9AobxMpj24uI/209LSvMLCwiLKz6fyQModAlW73TeAac6cOV5SUpIBlasv9qKRvgBYIyMj3tDQkDmPdaLRPzwrHA6bhGsNWr9xsMfEZnC7XDSg+tzv4lRCCRPfjJtHjhzpu3LlCkDVx4BKZICsx9gy4PT4rmFQQbIpdfM5ynX7gWrS/Phl7NixI0SDWCCD52Is14vqAXIByoluAkl+fr43f/58Lyvr7cIaHh4OJSYmfkug6rXZApOamprqUb6vned3X4CBujj29/cbkEl/7EUj74o+og4S2gh6xkypk6mUPXnyZN25c+fCDKzm8vLyOuQzqCAtJ06cuH/+/PkwAytMLCR57VjQFy5cmKeAiXJZGOeLFy/iPBVt4Nqeb60dogKLBm9O/FvxXIwVxBAaUBpgixYt8np7e7329vYJZUtKSkwSefHihVdTU9N2586dXrtfmNj09HQz0dMRvAsYD0dhLryrvG8s7/w+ZCrPcJSdx8duAb+6l0WgWqeu/8uMZMoDWCTr+BpMVoZ8jLUq18XXgdohEFg0cXF6kF2s5Uf9NqBwxL0FCxaYSXz58qWZSNzr6+vzioqKIm01NTV5ZLgbT9HuExgGAzBdUOmJEeb6EKD5AJKt1KJ9TwAFNrpz6tSpljNnzgiQuuh8DbNSNx9HlF0mx26/cbTHLy6AsSKGcVCyjWepJwnS2trqbdiwwZyDJaDyUBbslZmZGTG6Hz9+7D18+NDdUSqTkpIyY6B6V5b4mYsBAIGm27rXR/f+DFXGKm5Ega6P7a5lqvw6sbMIcFkKlCUAI6esQI0QBCwBjxirNqCkDACSkZFhQKLVCSassbHR27Jli6kvsnDhQnN8/vy5t3Hjxsj95ubmSQ6CVoEA5a8IBO+LsSKgoskPKxaC1DKo1mmDXF1/AwAyCO+rNoX1FrANVqLA6V6sfuGGgwcPphBovrCBIuwCgRp7+vSpAUd2dra5bmtrM6pvdHTUu3fvnrGdNHhEbt265XV1dXn79+9/y8V0XltbGwkDkKpsqqqqqhG2AmgBrFn5+Qo0Uyw21gRm0kwCLwqAAgC2b99u2AQCVYWyACtUGkRUoC2bNm0yYBIBe/l5ncKaWmg1hrj/47TCRu32ebUam4LyAweEymK1QG+PUdk3PmXCrGZicrej9e99CD0znvs4NsPtRh2fmMMNLmBBYHgDmTC4ly1bNslWAbhu375tyh06dGgCw2kB+yDEAIEh39HR4RsjE+/NkgJKf0DwlNJ3jkndi2Yo/QXOZ5RxWElpOaUqSk99QLWPErzUr2OcD+j7T+GPUKqZocldyu2mWWbMv1mt4T3q2OObSVnNz46MD49xMfelE85ArOGGiA2FSR0cHDRggVe3fv16Lzc317cXCBeUlZUZu8sVBLUF7YrnaDMWygsjWpLJx1eOvCS8LKX+GFeYdPS1T356wLOC7NcOK/g4HSbaSmku2zZtlo0D6l8U5R2mIxmO91/F79iP8aY+lmhAR2Us09PXr439hAles2ZNoK2Tl5dnwgorV66clHfz5k1v165dk8CFuJYfWwm4/Twgn4FMZqO0U00OPg/lsgck0k3Ae6JACq8HamsAJgPl9fOAzef8VLpey1HtVGXUQoZ45b7QawzgojqpauJNZIYnpEXUFpWZw8ZxMqsdEdgUixlUqPMt1RlygE8mv4jO5/M7tFHZXs4HI+uJG4YFQvldnF+sAPRGjd8SSjl8fzGVG6I6Dxk76GcKl8uOlbESh4eHDVOBpWCcQ/1F88qQv2fPnknlnjx5YsIJOBYXF/9/NqhtANcV8ZbYlc8zswJYJJ8H5Eem7A3WxEYmjdVcigycyltBeV/RsVANbDKDrJnL5jom+Dsa+A5e0WDOn7g/Kx3PR/06qpPDjBS28gG6e6pfDT6gimeV5LF6iqh4focxHo84Ne8hzv8ng2sJA6tfjUedROkZbPkqRhbie8JauTEBi7y6ePncAQaaO3fulKLaWgDQgYEBoxrh+WlgiW3l9znFNtp5IBN5kv0YS6vJYgYVVlU120mfUPot58sqbeaBxJh8zqs7TIN+i573R2aMfykGQD2w21dcfx2DMI3yXjOosLqH6Fr6U8VqDHGhzVw2ns8T2BaTWNMefrc09a7PA1R1iNuuYibZwfXmUB8Qq/qrZa9tZjs1i65fcRswHf5O1zuYgZ7yeG1jdq3SbM9gauFF8yimOBYABaN66dKlUwKVS0TVQT2+evVqgjcIYAWxXxQ12O/jcWUq0MlqvwtQsIeo8zOUWoQHOcCTNMbqQsqPcTARE5PCk/+a64woB6HPYf/JMzq57KgqW8AAaKa8Jn4fbfOlKe92wGeoMq13GFQqdwD95aDmZ5Q+Z9AJwwwoYL5Wn3vqHH2JCOU9pkMjg7jWMgH8GYtspVx8cIwW6QYDrV271rccgATGAkhgm8GTfPDggbd161YTWIUqdLGVnPt4lQKsQQebJTCVj7CNlO4YmAwFlCUaBAo0XVR/nK6T+RqTNh5g7GuwLrTyMxlMfY760r/eKI4J+hJSffA1rlm9o989DK5SLtOmnpOm+pCr6zNoojpJVK6HnxFbuKGiomI5u5hRQVVdXW0+0UjowGa97u6Jn5ewewExMIAN3mA0lepjX8nLgsYXMy2P8SAmWJM6zGoJhnkrr7BEBRwbJLYHJJ/zQ5gwZhx7IkMMkEFWfZF8BcxOFU9zAes33L9+yzERMKLP66nMM8V4HjNFpgPI0r9kft4AmwLjzE4wD0Z58S0OMCvk/RMDgB1zHGtZtIoIgopKe/TokRNYnZ2dzroAIsAFo93Vrq0OAxgLdPZ7TZBsLOtBAl2vZbvqE1VWT4JWM/YkDfJk4P4+GtxqR5l07otrYjMdk6Ydj24ebxjwO23CZ6A+YGegiJOn+vY3xcC9jncY5TwA7E92+zGEW/r5+CnbUjdijbXYbJXs8E6ck11aWmp2G+B7oC1Qc2AsP+AAVHqT3RR3Vd5nQ9dO93hw6ik95hX9H7jonF/PIQBjj7ARC9f5rhUTQrlWrt/L9e/y/XbOq1ce0ihfy0A85useZop6K2gJ8P8A0FACo/7De7tV5Qd4sgIa8QDp2IBoDTNOvU7Mlo1sQ44rwNSzwS3t19l14WWq/tb4qLW76rn3Yp2gSd8KCVjwWMqC1JP6nmei8Ddu3DBRdgmI4jshDHbkByVpQ5+rY9P3339fk5OT46m9RVMNLGLQf2cxdCGff62M3I8m1EcY73nqVg4nhBYe/FK+EwJH+E4cpAozgxoQlhEQwGNctWqVUW2rV6+OGOx++96jbcm193bJBrx3lBQV3NRu8o+xgCrWvervsoddWD8pKamQ40Py9QEM00htNrzrnvxY3yeW/kUTIRlbO7kYa4OlxyMsZG87loQ8Yhdv9+7dJkIPYGk28mOrFStWGOMeux+wdx0foq9fvx7Z3QDGgmeK9D63y8j74D2QpI+unZHTAZdsgJzKxE33vfQzowEuluC3q57eyx/EWBn2DQQ3MdDa9bd/xrV8+fLIpx8beH4/HigoKHgbKi4u9s6ePeuVl5cbYOkOIxwB0M30Bj+0DRDhy4LE7KSfszJ9SbAMd0+5vxEjG6EB+SWMRq3eepycnGwMdq0mfX7aNWHbsrAhovvXrl2bpCKRB2DDSZjuKpd2AVa0qX9EMSszK3GOmEWCjopLgBMJE4GEyZajVh8OA9zJXBpUOL98+bJ37Ngxr6WlRbPbuIABrILPS+8KAtRD/3t6ekzsTBbLLKg+HLC0GrxLkzCmAaWTDSptm0QDGf92cMKvdy5duuQdPXpU6+sB7TAAWFCzOI8VTCiLOoinIeaGNqbyO8JZmXlg3a2srPyJANQqQHIBTIPLBlYQc8GTxM5SAdHevXvNr3NgSylGe2Z7owAG2AZHcSbshHJgOJQDoCSeNgumj2hjMbAMqHBBE/IAv0imiU6AjSUGvN9Pv1z2lAtc2AiILTg4r6mpMfGP48ePew0NDdJGU21t7SuXaysAt3e26l85z7LSx5cJ4YbTp0/PJVBN2G6wb9++PJrAzdif5fpBhTaK/f70I1qygPeMrqvq6upi0nmuPyWZlY8XJPWNY7mEVJX5GyNK8yiFg34J7fM3RYEgIyCN09H8jVF1dfXs3xj9CoD1PwEGAKorJqR4atjIAAAAAElFTkSuQmCC",s)=>{let r,n=0,o=0;const h=[],a=t=>{const i=new Wt.Image;i.src=t,i.onload=()=>{h.forEach((t=>{var s;const r=new Rt({source:i,fitMode:e.ImageFitMode.Stretch});null===(s=t.Cd)||void 0===s||s.Je(r),n=i.width,o=i.height,u(t)}))}};a(i);const l=t=>{a(t.logoDataURI)};let c;if(t.wa.addEventListener("logochange",l),new Wt.Image instanceof Wt.HTMLImageElement){const t=new Wt.Image;t.src=i,c=new Rt({source:t,fitMode:e.ImageFitMode.Stretch})}else if(Wt.lcjs_setup){const t=new Wt.Image;t.src=i;const s=Wt.lcjs_setup(t.naturalWidth,t.naturalHeight);s.getContext("2d").drawImage(t,0,0),c=new Rt({source:s,fitMode:e.ImageFitMode.Stretch})}else c=new N({color:M("#f00")});const u=t=>{if(t.Cd){const e=t.ct.Li({x:t.ct.x.getInnerEnd(),y:t.ct.y.getInnerStart()},{x:-(3+n),y:3}),i=t.ct.Li({x:t.ct.x.getInnerEnd(),y:t.ct.y.getInnerStart()},{x:-3,y:3+o}),s={x:i.x-e.x,y:i.y-e.y};t.Cd.th(e).J(s)}r&&r.Bs()};return r=t.Kk("logo",Number.MAX_SAFE_INTEGER),i=>{const n={ct:i};return(i=>{const n=s&&"cGx1Z2lu"in s&&"cHl0aG9u"===s.cGx1Z2lu?Wg:Yg;if(i.Cd&&i.Cd.dispose(),r){let s;i.Cd=r.Ke(i.ct).Je(c).setPointerEvents(!0).Qe(Ot),i.Cd.addEventListener("pointerenter",(()=>{s=t.Fn(e.MouseStyles.Point)})),i.Cd.addEventListener("pointerleave",(()=>{s=t.In(s)})),i.Cd.addEventListener("click",n),u(i)}})(n),h.push(n),{Dr:()=>u(n),U:()=>(e=>{e.Cd&&(e.Cd.dispose(),e.Cd=void 0);const i=h.indexOf(e);i>=0&&h.splice(i,1),h.length<=0&&t.wa.removeEventListener("logochange",l)})(n)}}},Yg=()=>Wt.open("https://lightningchart.com/lightningchart-js/"),Wg=()=>Wt.open("https://lightningchart.com/python-charts/");class jg{constructor(){this.yB=this.mB.bind(this),Wt.addEventListener("scroll",this.yB,{passive:!0})}U(){this.yB&&Wt.removeEventListener("scroll",this.yB),this.yB=void 0}}class $g{constructor(t,e){this.xl=t,this.H=e,this.xB=!0,this.SB=null,this.bB=null}}class Qg{constructor(t){this.MB=!1,this.wB=1,this._B=t,this.CB={xl:l(0,0),H:l(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),xB:!0,SB:null,bB:null},this.kB=l(64,64),this.TB=new Uint8ClampedArray(this.kB.x*this.kB.y*this.wB)}FB(t,e){if(!t.xB)return null;if(t.SB&&t.bB){const i=this.FB(t.SB,e);return null!==i?i:this.FB(t.bB,e)}const i=c(t.H.x,t.H.y);if(t.xl.x+t.H.x>=Number.MAX_SAFE_INTEGER&&(i.x=this.kB.x-t.xl.x-1),t.xl.y+t.H.y>=Number.MAX_SAFE_INTEGER&&(i.y=this.kB.y-t.xl.y-1),t.H.x===e.x&&t.H.y===e.y)return t.xB=!1,t;if(i.x<e.x||i.y<e.y)return null;let s,r;const n=i.x-e.x,o=i.y-e.y;let h=n<o;return 0===n&&0===o&&(h=!(t.H.x>t.H.y)),h?(s=new $g(Li(t.xl,{x:0,y:1}),l(t.H.x,e.y)),r=new $g(Li(t.xl,{x:0,y:e.y+1}),l(t.H.x,t.H.y-1-e.y))):(s=new $g(Li(t.xl,{x:1,y:0}),l(e.x,t.H.y)),r=new $g(Li(t.xl,{x:e.x+1,y:0}),l(t.H.x-1-e.x,t.H.y))),t.SB=s,t.bB=r,this.FB(t.SB,e)}IB(t,e){const i={PB:!1,xl:null};let s=this.FB(this.CB,e);if(null===s)for(;null===s&&this.kB.x<this._B&&this.kB.y<this._B;){if(!this.LB(l(2*this.kB.x,2*this.kB.y)))return this.MB=!0,null;i.PB=!0,s=this.FB(this.CB,e)}if(null===s)return this.MB=!0,null;for(let i=0;i<e.y;i+=1)for(let r=0;r<e.x;r+=1){const n=s.xl.y+i,o=s.xl.x+r;this.TB[n*this.wB*this.kB.x+o*this.wB+0]=t[i*this.wB*e.x+r*this.wB+0]}return i.xl=s.xl,i}LB(t){if(t.x>this._B||t.y>this._B)return!1;const e=new Uint8ClampedArray(t.x*t.y*this.wB);for(let i=0;i<this.kB.y;i+=1)for(let s=0;s<this.kB.x;s+=1)e[i*t.x*this.wB+s*this.wB+0]=this.TB[i*this.kB.x*this.wB+s*this.wB+0];return this.kB=t,this.TB=e,!0}}class Jg{constructor(t){this.BB=new Map,this._B=t,this.BB.set(this.BB.size,new Qg(this._B))}DB(t){return this.BB.get(t)}IB(t,e){let i=-1;const s=Array.from(this.BB.values());for(let t=0;t<s.length;t+=1){const e=s[t];if(!e)break;if(!e.MB){i=t;break}}-1===i&&(i=this.BB.size,this.BB.set(this.BB.size,new Qg(this._B)));const r=this.BB.get(i);if(!r)return null;let n=r.IB(t,e);if(!n&&r.MB){const s=this.BB.size,r=new Qg(this._B);this.BB.set(s,r),i=s,n=r.IB(t,e)}return n?{EB:i,...n}:null}}var qg;!function(t){t[t.Fail=0]="Fail",t[t.Success=1]="Success",t[t.Resize=2]="Resize"}(qg||(qg={}));const Zg=De("font-texture");class Kg{constructor(t){this.RB=new Map,this.zB=new Map,this.wt=Zg(),this.OB=t,this.VB=new Jg(this.OB.NB||4096)}Du(){return this.zB.forEach((t=>{this.OB.GB(t)})),this.zB.clear(),this}UB(t,e){const i=this.RB.get(e);if(i)return i.get(t)}$B(t,e,i){let s=this.RB.get(e);if(s||(s=new Map,this.RB.set(e,s)),s.has(t.glyph))return qg.Success;const r=this.VB.IB(i,t.size);if(!r||!r.xl)return qg.Fail;r.PB&&this.YB();const n=this.VB.DB(r.EB);if(!n)return qg.Fail;let o=this.zB.get(r.EB);if(!o){const t=this.OB.gl.createTexture();if(!t)throw new _t("Failed to create texture for font!");o=t,this.zB.set(r.EB,t)}const h=r.xl,a=n.kB.x,l=n.kB.y,c=-t.offsetX,u=t.baseline-t.size.y,d=-t.offsetX+t.size.x,f=t.baseline,g=h.x/a,y=(h.y+t.size.y)/l,p=(h.x+t.size.x)/a,m=h.y/l,x=[g,y,p,y,g,m,g,m,p,y,p,m],S=[c,u,d,u,c,f,c,f,d,u,d,f],v={origin:h,size:t.size,advanceX:t.advance,baseline:t.baseline,vertices:S,texCoords:x,packerId:r.EB,texture:o};s.set(t.glyph,v);const A=this.OB.gl;return A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),A.bindTexture(A.TEXTURE_2D,o),A.texImage2D(A.TEXTURE_2D,0,A.LUMINANCE,n.kB.x,n.kB.y,0,A.LUMINANCE,A.UNSIGNED_BYTE,this.OB.HB?n.TB:new Uint8Array(n.TB)),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.bindTexture(A.TEXTURE_2D,null),r.PB?qg.Resize:qg.Success}YB(){this.RB.forEach((t=>{t.forEach(((e,i)=>{const s=this.VB.DB(e.packerId);if(!s)return;const r=e.origin,n=s.kB.x,o=s.kB.y,h=r.x/n,a=(r.y+e.size.y)/o,l=(r.x+e.size.x)/n,c=r.y/o,u=[h,a,l,a,h,c,h,c,l,a,l,c];e.texCoords=u,t.set(i,e)}))}))}}const ty=t=>(e,i)=>i%2?e:e+t;class ey{constructor(t){this.XB=new Map,this.WB=De("font"),this.jB=new Map,this.ZB=new Set,this.OB=t}Du(t=!1){return(t||0===this.ZB.size)&&(this.XB.forEach(((t,e)=>{t.Du(),this.XB.delete(e)})),this.ZB.clear()),this}QB(t){this.ZB.add(t)}JB(t){this.ZB.delete(t)}KB(t,e,i,s){const r=Wt.devicePixelRatio,n=`${s?"dark":"light"} - ${qn(e,r).id}`,o=this.jB.get(n),h=this.XB.get(o);let a=0,l=0,c=0;const u=t.split(""),d=e.size,f=.45*e.size*r,g=Math.round(1*e.size*r);let y=!1;for(let t=0;t<u.length;t+=1){const e=u[t],i=h&&h.UB(e,d);if(i)""!==e.trim()&&(l=Math.max(l,i.baseline),a=Math.min(a,i.baseline-(i.size.y-1))),c+=i.advanceX;else{if(""!==e.trim()){const t=0;l=Math.max(l,t),a=Math.min(a,t-(g-1))}c+=f,y=!0}}const p=gr(c/r,(l-a+1)/r,i);return{x:p.x,y:p.y,isEstimate:y}}qB(t,e,i){const s=`${i?"dark":"light"} - ${e.id}`;let r=this.jB.get(s);r||(r=this.WB(),this.XB.set(r,new Kg(this.OB)),this.jB.set(s,r));const n=this.XB.get(r);if(!n)throw new _t("Failed to get font texture!");let o=0,h=0,a=0;const c=t.split(""),u=new Map;let d=0;const f=e.properties.size;for(let t=0;t<c.length;t+=1){const s=c[t],r=Math.ceil(d);let a=n.UB(s,f);if(!a){const r=this.OB.tD(s,e.properties,e.dpr,i);if(!r)continue;const l=n.$B(r[1],f,r[0]);if(l===qg.Resize){this.ZB.forEach((t=>{t.cl.u=!0})),t=-1,d=0,h=0,o=0,u.clear(),this.OB.St.Bs(!0);continue}if(l===qg.Fail)throw new _t("Failed to create glyph");if(a=n.UB(s,f),!a)throw new _t("Failed to get glyph after creation")}if(""!==s.trim()){let t=u.get(a.texture);t||(t={vertices:[],texCoords:[]},u.set(a.texture,t)),t.vertices.push(...a.vertices.map(ty(r))),t.texCoords.push(...a.texCoords),h=Math.max(h,a.baseline),o=Math.min(o,a.baseline-(a.size.y-1))}d+=a.advanceX}a=d;const y=g(l(0,o),l(a,h)),p=[];return u.forEach(((t,e)=>{p.push({texCoords:new Float32Array(t.texCoords),vertices:new Float32Array(t.vertices),texture:e})})),[p,y]}}const iy={roundUnsigned:{iD:"roundUnsigned",sD:"float roundUnsigned(float number) {\n  return floor(number + 0.5);\n}"},linearStep:{iD:"linearStep",sD:"float linearStep(float step0, float step1, float step) {\n  return clamp((step - step0) / (step1 - step0), 0.0, 1.0);\n}"},dither:{iD:"dither",sD:"\nconst mat4x4 bayerMatrix4x4 = mat4x4(\n    0.0,  8.0,  2.0, 10.0,\n    12.0, 4.0,  14.0, 6.0,\n    3.0,  11.0, 1.0, 9.0,\n    15.0, 7.0,  13.0, 5.0\n) / 16.0;\n\nvec4 dither(vec2 pos, vec4 c0, vec4 c1, float s0, float s1, float mixVal)\n{\n    float step = linearStep(s0, s1, mixVal);\n    int x = int(pos.x) % 4;\n    int y = int(pos.y) % 4;\n    float threshold = bayerMatrix4x4[y][x];\n    vec4 color = mix(c0, c1, step * 0.95 + threshold * 0.05);\n    return color;\n}"},decodeUbyteRGBAEncodedFloat:{iD:"decodeUbyteRGBAEncodedFloat",sD:"\n      // Denormalize 8-bit color channels to integers in the range 0 to 255.\n      ivec4 floatsToBytes(vec4 inputFloats, bool littleEndian) {\n        ivec4 bytes = ivec4(inputFloats * 255.0);\n        return (\n          littleEndian\n          ? bytes.abgr\n          : bytes\n        );\n      }\n      \n      // Break the four bytes down into an array of 32 bits.\n      void bytesToBits(const in ivec4 bytes, out bool bits[32]) {\n        for (int channelIndex = 0; channelIndex < 4; ++channelIndex) {\n          float acc = float(bytes[channelIndex]);\n          for (int indexInByte = 7; indexInByte >= 0; --indexInByte) {\n            float powerOfTwo = exp2(float(indexInByte));\n            bool bit = acc >= powerOfTwo;\n            bits[channelIndex * 8 + (7 - indexInByte)] = bit;\n            acc = mod(acc, powerOfTwo);\n          }\n        }\n      }\n      \n      // Compute the exponent of the 32-bit float.\n      float getExponent(bool bits[32]) {\n        const int startIndex = 1;\n        const int bitStringLength = 8;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        float acc = 0.0;\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Compute the mantissa of the 32-bit float.\n      float getMantissa(bool bits[32], bool subnormal) {\n        const int startIndex = 9;\n        const int bitStringLength = 23;\n        const int endBeforeIndex = startIndex + bitStringLength;\n        // Leading/implicit/hidden bit convention:\n        // If the number is not subnormal (with exponent 0), we add a leading 1 digit.\n        float acc = float(!subnormal) * exp2(float(bitStringLength));\n        int pow2 = bitStringLength - 1;\n        for (int bitIndex = startIndex; bitIndex < endBeforeIndex; ++bitIndex) {\n          acc += float(bits[bitIndex]) * exp2(float(pow2--));\n        }\n        return acc;\n      }\n      \n      // Parse the float from its 32 bits.\n      float bitsToFloat(bool bits[32]) {\n        float signBit = float(bits[0]) * -2.0 + 1.0;\n        float exponent = getExponent(bits);\n        bool subnormal = abs(exponent - 0.0) < 0.01;\n        float mantissa = getMantissa(bits, subnormal);\n        float exponentBias = 127.0;\n        return signBit * mantissa * exp2(exponent - exponentBias - 23.0);\n      }\n      \n      // Decode a 32-bit float from the RGBA color channels of a texel.\n      float decodeUbyteRGBAEncodedFloat(vec4 rgba, bool littleEndian) {\n        ivec4 rgbaBytes = floatsToBytes(rgba, littleEndian);\n        bool bits[32];\n        bytesToBits(rgbaBytes, bits);\n        return bitsToFloat(bits);\n      }\n      "},texelFetchWithFallback:{webgl2:{iD:"texelFetchWithFallback",sD:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{iD:"texelFetchWithFallback",sD:"vec4 texelFetchWithFallback(sampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},texelFetchUnsignedWithFallback:{webgl2:{iD:"texelFetchUnsignedWithFallback",sD:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  return texelFetch(textureSampler, iTexel, 0);\n}"},webgl1:{iD:"texelFetchUnsignedWithFallback",sD:"uvec4 texelFetchUnsignedWithFallback(usampler2D textureSampler, ivec2 iTexel, vec2 textureSize) {\n  vec2 halfTexel = 0.5 / textureSize;\n  return texture2D(textureSampler, (vec2(iTexel) * 2.0 + 1.0) * halfTexel);\n}"}},modulus:{iD:"modulus",sD:"int modulus(int a, int b) {\n  return (a)-((a)/(b))*(b);\n}"},computeScreenSpaceWireframe:{iD:"computeScreenSpaceWireframe",sD:"#extension GL_OES_standard_derivatives : enable\nfloat computeScreenSpaceWireframe (vec3 barycentric, float lineWidth) {\n  vec3 dist = fwidth(barycentric);\n  vec3 smoothed = smoothstep(dist * ((lineWidth * 0.5) - 0.5), dist * ((lineWidth * 0.5) + 0.5), barycentric);\n  return 1.0 - min(min(smoothed.x, smoothed.y), smoothed.z);\n}"}},sy="posAxis",ry="posWorld",ny="normal",oy="rotatedGeo",hy="colorFragment",ay="antiAliasFactor",ly="mousePickingIdOffset",cy="uRatioPxClip",uy="uRatioNwuWu",dy="uColorTexture",fy="uSizePixels",gy="uOffsetAlignment",yy="uMaskTexture",py="aInstanceGeo",my="aNormal";class xy{constructor(t){this.modifiers=[],this.modifiers=t}build(t){const e=this.modifiers.filter((t=>Sy(t)));for(const i of e)t=i(t);return`${Ne(this.modifiers.filter((t=>Ay(t)))).map((t=>t.sD)).join("\n")}\n${t}`}}const Sy=t=>"function"==typeof t,vy={iD:"ratioPxClip",sD:`uniform vec2 ${cy};`},Ay=t=>t&&"object"==typeof t&&"iD"in t,by=(...t)=>e=>{t=t.reverse();for(let i of t)"string"==typeof i&&(i=i.includes("{")||i.endsWith(";")?i:`${i};`,i=i.trim(),e=e.replace("void main(void)",`${i}\nvoid main(void)`));return e},Cy=t=>e=>(t=t.endsWith(";")?t:`${t};`,e.replace(t,"")),My=(...t)=>e=>{const i=t.filter((t=>t));for(let t=0;t<i.length;t+=1)i[t]=i[t].endsWith(";")?i[t]:`${i[t]};`,i[t]=i[t].startsWith("\t")?i[t]:`\t${i[t]}`;const s=i.join("\n");return e.replace("void main(void) {\n",`void main(void) {\n${s}\n`)},Ty=(t,...e)=>i=>{for(let t=0;t<e.length;t+=1)e[t]=e[t].endsWith(";")?e[t]:`${e[t]};`,e[t]=e[t].startsWith("\t")?e[t]:`\t${e[t]}`;const s=e.join("\n"),r=new RegExp(`(.*${t}.*)`),n=i.replace(r,`${s}\n$1`);return e.forEach((e=>{if(!n.includes(e))throw new Error(`ShaderBefore misusage (not found: \n${e}\nmatch: \n${t}\nresult: \n${n}\n)`)})),n},Ey=(t,...e)=>i=>{const s=e.filter((t=>"string"==typeof t));for(let t=0;t<s.length;t+=1)s[t]=s[t].endsWith(";")?s[t]:`${s[t]};`,s[t]=s[t].startsWith("\t")?s[t]:`\t${s[t]}`;const r=s.join("\n"),n=i.lastIndexOf(t),o=i.substring(n),h=o.indexOf("\n"),a=o.substring(h),l=`${i.substring(0,n+h)}\n${r}${a}`;return s.forEach((e=>{if(!l.includes(e))throw new Error(`ShaderAfter misusage (not found: "${e}", match: "${t}", result: "${l}")`)})),l},wy=(...t)=>e=>{for(let i of t)if("string"==typeof i){i=i.endsWith(";")?i:`${i};`,i=i.trim(),i=i.startsWith("\t")?i:`\t${i}`;const t=e.lastIndexOf("}");e=`${e.substring(0,t-1)}\n${i}\n}`}return e},By=(t,e)=>i=>{let s,r;if(t.includes("uniform")||t.includes("attribute")){const e=t.endsWith(";")?t:`${t};`;i=by(e)(i),s=t.split(" ")[2].replace(";","")}else s=t;if(e.includes(" ")){const t=e.endsWith(";")?e:`${e};`;i=by(t)(i),r=e.split(" ")[2].replace(";","")}else r=e;return wy(`\t${r} = ${s};`)(i)},ky=(...t)=>e=>{t=t.reverse();for(const i of t)e=i+e;return e},Ry=(t,e)=>{const i=e.steps,s=i.length-1,r=[by("uniform vec4 uFallbackColor")],n=[],o=[];for(let t=0;t<e.steps.length;t+=1)n.push(`uniform float uLUTValue${t}`),o.push(`uniform vec4 uLUTColor${t}`);return r.push(by(...n,...o),e.percentageValues&&by("uniform float uMinValue","uniform float uMaxValue")),e.interpolate?r.push(Ey(`${hy} =`,"vec4 colorLookup = uLUTColor0","float value = "+(e.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (value <= ${Pt}) {\n                    colorLookup = uFallbackColor;\n                }`,`if (value >= uLUTValue${s}) {\n                    colorLookup = uLUTColor${s};\n                }`,...i.slice(0,-1).map(((t,e)=>`if (value >= uLUTValue${e} && value <= uLUTValue${e+1}) {\ncolorLookup = uLUTColor${e} + vec4(uLUTColor${e+1}.r -  uLUTColor${e}.r, uLUTColor${e+1}.g -  uLUTColor${e}.g, uLUTColor${e+1}.b -  uLUTColor${e}.b, uLUTColor${e+1}.a -  uLUTColor${e}.a) * (value - uLUTValue${e})/(uLUTValue${e+1} - uLUTValue${e});} `)),`${hy} = colorLookup`)):r.push(Ey(`${hy} =`,"vec4 colorLookup = vec4(uLUTValue0)","float value = "+(e.percentageValues?`clamp((${t} - uMinValue) / (uMaxValue  - uMinValue), 0.0, 1.0);`:`${t}`),`if (${t} <= ${Pt}) {\n                    colorLookup = uFallbackColor;\n                } else if (${t} < uLUTValue0) { colorLookup = uLUTColor0;} ${i.slice().reverse().map((t=>{const e=i.indexOf(t);return`else if (value >= uLUTValue${e}) { colorLookup = uLUTColor${e};} `})).join("")}`,`${hy} = colorLookup`)),r},Fy=[by(`uniform sampler2D ${yy}`),by("varying vec2 vMaskTextureCoord"),Ey(`${ay} =`,`vec4 maskTextureSample = texture2D(${yy}, vMaskTextureCoord)`,`${ay} = maskTextureSample.r`)],Iy=[by(`uniform sampler2D ${yy}`),by("varying vec2 vMaskTextureCoord"),Ey(`${ay} =`,`vec4 maskTextureSample = texture2D(${yy}, vMaskTextureCoord)`,`${ay} = maskTextureSample.a`)],Oy=[by("varying vec3 vPosWorld;","varying vec3 vNormal;","uniform vec3 uCameraLoc;","uniform vec3 uLightLoc;","uniform vec4 uLightColor;","uniform vec4 uAmbientColor;","uniform float uShininess;","uniform float uAmbientReflection;","uniform float uDiffuseReflection;","uniform float uSpecularReflection;"),Ey(`${hy} =`,"float ambientReflection = uAmbientReflection","float diffuseReflection = uDiffuseReflection","float specularReflection = uSpecularReflection","vec3 ambientColor = uAmbientColor.rgb",`vec3 diffuseColor = ${hy}.rgb`,"vec3 specularColor = uLightColor.rgb","vec3 vNormalNormalized = normalize(vNormal)","vNormalNormalized = (float(gl_FrontFacing) * 2.0 - 1.0) * vNormalNormalized","vec3 lightDir = normalize( uLightLoc - vPosWorld )","float lambertian = abs(dot(vNormalNormalized, lightDir))","float specular = 0.0","vec3 R =  reflect(-lightDir, vNormalNormalized)","vec3 V = normalize(uCameraLoc - vPosWorld)","float specAngle = max(dot(R,V),0.0)","specular = pow(specAngle, uShininess)",`${hy} = vec4(ambientReflection * ambientColor + diffuseReflection * lambertian * diffuseColor + specularReflection * specular * specularColor, ${hy}.a)`)],Ly=(t,...e)=>{var i,s;if("linear-highPrecision"!==t||0===e.length)return{vertexShaderModifiers:[],fragmentShaderModifiers:[]};const r=e[0];return{vertexShaderModifiers:[by("varying vec4 d"),wy(`d = vec4(${e[0]}.x, ${e[0]}.y, ${null!==(i=e[1])&&void 0!==i?i:r}.x, ${null!==(s=e[1])&&void 0!==s?s:r}.y)`)],idFragment:"hpfix",fragmentShaderModifiers:[by("varying vec4 d"),wy("if (d.z == -100.0 + d.z / 10.0) { gl_FragColor = d; }")]}};class Dy extends Error{constructor(t,e,i){super(`Dynamic shader generation error\n(id: ${e})\n ${i?`when applying feature: ${i.idVertex?`vert: ${i.idVertex}`:""} ${i.idFragment?`frag: ${i.idFragment}`:""}`:""} | ${t}`)}}const Py=(...t)=>{let e="";for(const i of t){if("object"!=typeof i){e+=`${String(i)},`;continue}const t=[{prefix:"",obj:i}];for(;t.length>0;){const{prefix:i,obj:s}=t.shift();e+=`${i}:`;const r=Object.keys(s).sort();for(const i of r){const r=s[i];"object"==typeof r&&r.__proto__===Object.prototype||Array.isArray(r)?t.push({prefix:i,obj:r}):e+=`${i}=${String(r)},`}}}return e},Vy=t=>void 0!==t.find((t=>{var e;return null===(e=t.eD)||void 0===e?void 0:e.hD})),_y=t=>void 0!==t.find((t=>{var e;return null===(e=t.eD)||void 0===e?void 0:e.rD})),zy=(t,e,...i)=>{const s=[],r=e?"vec3":"vec2",{axisWorldTranslation:n,scaling:o,translation:h,offset:a,flipXY:l,flipXZ:c,splitPosAttribute:u,normalSource:d}=t,f=[];if("attribute"===d&&s.push(by(`attribute vec3 ${my}`),My(`vec3 ${ny} = ${my}`)),"linear-highPrecision"!==n?i.forEach((t=>{void 0!==t.attributeNameAxisCoord&&void 0!==t.variableNameAxisCoord&&(!0!==u?f.push(`${r} ${t.variableNameAxisCoord} = ${t.attributeNameAxisCoord}`):f.push(`${r} ${t.variableNameAxisCoord} = ${e?`vec3(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y, ${t.attributeNameAxisCoord}Z)`:`vec2(${t.attributeNameAxisCoord}X, ${t.attributeNameAxisCoord}Y)`}`))})):i.forEach((e=>{!0!==t.splitPosAttribute?f.push(`${r} ${e.variableNameAxisCoord}_highpart = ${e.attributeNameAxisCoord}_highpart`,`${r} ${e.variableNameAxisCoord}_lowpart = ${e.attributeNameAxisCoord}_lowpart`):f.push(`${r} ${e.variableNameAxisCoord}_highpart = vec2(${e.attributeNameAxisCoord}_highpartX, ${e.attributeNameAxisCoord}_highpartY)`,`${r} ${e.variableNameAxisCoord}_lowpart = vec2(${e.attributeNameAxisCoord}_lowpartX, ${e.attributeNameAxisCoord}_lowpartY)`)})),a&&a.rotation){const t=a.rotation.dataType,e="uniform"===t?"u":"a";if("attribute-deg"===t){s.push(by("attribute float aRotDeg"),by("uniform float uBaseRotDeg"));const t="cRot",e=py;s.push(My(`vec2 ${t} = vec2(sin((aRotDeg + uBaseRotDeg) * 0.01745329252), cos((aRotDeg + uBaseRotDeg) * 0.01745329252))`,`vec2 ${oy} = vec2(${e}.x * ${t}.y + ${e}.y * ${t}.x, ${e}.y * ${t}.y - ${e}.x * ${t}.x)`))}else{const i=`${e}Rot`;s.push(by(`${t} vec2 ${i}`));const r=py;s.push(My(`vec2 ${oy} = vec2(${r}.x * ${i}.y + ${r}.y * ${i}.x, ${r}.y * ${i}.y - ${r}.x * ${i}.x)`))}}if(a&&s.push(by(`attribute ${r} ${py}`)),!0===l){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXY");i.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${e?`vec3(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x, ${t.variableNameAxisCoord}.z)`:`vec2(${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`}`)}))}if(!0===c){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + flipXZ");i.forEach((t=>{f.push(`${t.variableNameAxisCoord} = vec3(${t.variableNameAxisCoord}.z, ${t.variableNameAxisCoord}.y, ${t.variableNameAxisCoord}.x)`)}))}if(o){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + scaling");const t=("attribute"===o.dataType?"a":"u")+"Scaling",r=e?"vec3":"vec2";s.push(by(`${o.dataType} ${r} ${t}`)),i.forEach((e=>{f.push(`${e.variableNameAxisCoord} = ${e.variableNameAxisCoord} * ${t}`)}))}if(h&&"axis"===h.sizeUnit){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + translation (axis)");const t=("attribute"===h.dataType?"a":"u")+"TranslationAxis",r=e?"vec3":"vec2";s.push(by(`${h.dataType} ${r} ${t}`)),i.forEach((e=>{f.push(`${e.variableNameAxisCoord} = ${e.variableNameAxisCoord} + ${t}`)}))}if(a&&"axis"===a.sizeUnit){if("linear-highPrecision"===n)throw new Error("Unimplemented vertex location feature combination: linear-highPrecision + offset (axis)");const t=("attribute"===a.dataType?"a":"u")+"OffsetAxis",o=!0===a.symmetric?"float":r;s.push(by(`${a.dataType} ${o} ${t}`));const h=a.halved?" * 0.5":"",l=a.rotation?oy:py,c="offsetGeometry";f.push(`${r} ${c} = ${t} * ${l}${h} * sign(uScale)`),e&&"gpu-calculate"===d&&f.push(`${r} ${ny} = ${l}`),i.forEach((t=>{f.push(`${t.variableNameAxisCoord} = ${t.variableNameAxisCoord} + ${c}`)}))}if(void 0===n||"linear"===n)s.push(by(`uniform ${r} uDisp`,`uniform ${r} uScale`)),i.forEach((t=>{f.push(`${r} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord} - uDisp) / uScale`)}));else if("linear-highPrecision"===n)s.push(by(`uniform ${r} uDisp`,`uniform ${r} uScale`,`uniform ${r} uScaleStart_highpart`,`uniform ${r} uScaleStart_lowpart`)),i.forEach((t=>{f.push(`${r} ${t.variableNameAxisCoord}_hprecision = (${t.variableNameAxisCoord}_highpart - uScaleStart_highpart) + (${t.variableNameAxisCoord}_lowpart - uScaleStart_lowpart)`,`${r} ${t.variableNameWorldCoord} = (${t.variableNameAxisCoord}_hprecision - uDisp) / uScale`,`${r} ${t.variableNameAxisCoord} = ${t.variableNameAxisCoord}_highpart + ${t.variableNameAxisCoord}_lowpart`)}));else if("matrix"===n)s.push(by("uniform mat3 uMatrix")),i.forEach((t=>{f.push(`vec2 ${t.variableNameWorldCoord} = (uMatrix * vec3(${t.variableNameAxisCoord}, 1.0)).xy`)}));else if("matrix4"===n)s.push(by("uniform mat4 uMatrix")),i.forEach((t=>{f.push(`vec4 ${t.variableNameWorldCoord} = uMatrix * ${t.attributeNameAxisCoord}`)}));else if("logarithmic"===n[0]){s.push(by(`uniform ${r} uScaleStart`,`uniform ${r} uScaleStartLog`,`uniform ${r} uScaleInterval`,`uniform ${r} uScaleIntervalLog`,`uniform ${r} uViewportStart`,`uniform ${r} uViewportSize`));const t=e?["x","y","z"]:["x","y"],o=[];t.forEach((t=>{const e=n[1][t];if(void 0!==e){const t=e.base;if("e"===t)return;const i=`float cLog${t} = 1.0 / log(${qi(t).toFixed(1)})`;o.includes(i)||o.push(i)}})),s.push(by(...o)),i.forEach(((e,i)=>{const s=`${i}`,o=[];t.forEach((t=>{const i=t.toUpperCase(),r=n[1][t];if(void 0===r)f.push(`float posPercent${i}${s} = (${e.variableNameAxisCoord}.${t} - uScaleStart.${t}) / uScaleInterval.${t}`);else{const n=r.base,o="e"===n;f.push(`float posLog${i}${s} = log(${e.variableNameAxisCoord}.${t})${o?"":` * cLog${n}`}`,`float posPercent${i}${s} = (posLog${i}${s} - uScaleStartLog.${t}) / uScaleIntervalLog.${t}`)}o.push(`posPercent${i}${s}`)})),f.push(`${r} ${e.variableNameWorldCoord} = uViewportStart + ${r}(${o.join(", ")}) * uViewportSize`)}))}if(a&&"px"===a.sizeUnit){s.push(vy);let t="vec2(0.0, 0.0)";if(a.useAlignment&&(s.push(by(`uniform vec2 ${gy}`)),t=gy),i.find((t=>t.overrideOffsetPixels)))i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${t.overrideOffsetPixels} * ${cy}`)}));else{const e=("attribute"===a.dataType?"a":"u")+"OffsetPixels",n=!0===a.symmetric?"float":r;s.push(by(`${a.dataType} ${n} ${e}`));const o=a.halved?" * 0.5":"";let h;if(!1!==a.useGeometry){const i=a.rotation?oy:py;h=`(${i} + ${t}) * ${e}${o} * ${cy}`}else h=`${e}${o} * ${cy}`;i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${h}`)}))}}if(a&&"scale"===a.sizeUnit){s.push(vy),s.push(by(`uniform vec2 ${fy}`));let t="vec2(0.0, 0.0)";a.useAlignment&&(s.push(by(`uniform vec2 ${gy}`)),t=gy);const e=("uniform"===a.dataType?"u":"a")+"OffsetScale";s.push(by(`${a.dataType} float ${e}`));const r=`(${a.rotation?oy:py} + ${t}) * ${e} * ${fy} * ${cy}`;i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${r}`)}))}if(a&&"wu"===a.sizeUnit){const t=("attribute"===a.dataType?"a":"u")+"OffsetWU",n=!0===a.symmetric?"float":r;s.push(by(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",h=a.rotation?oy:py,l="offsetGeometry";f.push(`${r} ${l} = ${t} * ${h}${o}`),e&&"gpu-calculate"===d&&f.push(`${r} ${ny} = normalize(${l})`),i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l}`)}))}if(a&&"nwu"===a.sizeUnit){s.push(by(`uniform float ${uy}`));const t=("attribute"===a.dataType?"a":"u")+"OffsetNWU",n=!0===a.symmetric?"float":r;s.push(by(`${a.dataType} ${n} ${t}`));const o=a.halved?" * 0.5":"",h=a.rotation?oy:py,l="offsetGeometry";f.push(`${r} ${l} = ${t} * ${h}${o}`),e&&"gpu-calculate"===d&&f.push(`${r} ${ny} = normalize(${l})`),i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = ${t.variableNameWorldCoord} + ${l} * ${uy}`)}))}return t.snapToNearestPixel&&(s.push(by("uniform vec2 uViewportSizePx")),i.forEach((t=>{f.push(`${t.variableNameWorldCoord} = 2.0 * floor(((${t.variableNameWorldCoord} + 1.0) * 0.5) * uViewportSizePx + 0.5) / uViewportSizePx - 1.0`)}))),s.push(Ty("gl_Position =",...f)),s},Uy=(t,e,i,s)=>{const r=[],n=t.axisWorldTranslation,o=e?"vec3":"vec2";if("linear"===n)r.push(Ey(i,`${o} ${s} = ${i} * uScale + uDisp`));else if("linear-highPrecision"===n)r.push(Ey(i,`${o} ${s} = ${i} * uScale + uDisp + uScaleStart_highpart + uScaleStart_lowpart`));else{if("matrix"===n)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("matrix4"===n)throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");if("logarithmic"!==n[0])throw new Error("transformWorldCoordBackToAxis | unimplemented vertex location type");{const t=[`${o} ${i}_percent = (${i} - uViewportStart) / uViewportSize`];(e?["x","y","z"]:["x","y"]).forEach((e=>{const s=e.toUpperCase(),r=n[1][e];if(void 0===r)t.push(`float pos${s}Back = ${i}_percent.${e} * uScaleInterval.${e} + uScaleStart.${e}`);else{const n=r.base,o="e"===n?"1.0":`cLog${n}`;t.push(`float pos${s}Back = pow(2.71828, (${i}_percent.${e} * uScaleIntervalLog.${e} + uScaleStartLog.${e}) / ${o})`)}})),t.push(`${o} ${s} = ${o}(posXBack, posYBack${e?", posZBack":""})`),r.push(Ey(i,...t))}}return r},Ny=t=>(t=>void 0!==t.find((t=>{var e;return null===(e=t.eD)||void 0===e?void 0:e.nD})))(t)?[Cy("attribute vec4 aColor"),Cy("vColor = aColor"),by("attribute vec4 aColorA"),by("attribute vec4 aColorB"),wy("vColor = mix(aColorA, aColorB, aSegmentSide)")]:[],Xy=t=>(t=>void 0!==t.find((t=>{var e;return null===(e=t.eD)||void 0===e?void 0:e.oD})))(t)?[Cy("attribute float aLookupValue"),Cy("vLookupValue = aLookupValue"),by("attribute float aLookupValueA"),by("attribute float aLookupValueB"),wy("vLookupValue = mix(aLookupValueA, aLookupValueB, aSegmentSide)")]:[],Hy={"2D":{idFeature:"2D",apply:t=>({idVertex:"2D",idFragment:"2D",defaultVertexShader:"2D",defaultFragmentShader:"FragmentShader"})},"2DCompose":{idFeature:"2DCompose",apply:t=>({idVertex:"2DCompose",idFragment:"2DCompose",defaultVertexShader:"2DMatrix",defaultFragmentShader:"Empty"})},"3D":{idFeature:"3D",eD:{hD:!0},apply:t=>({idVertex:"3D",idFragment:"3D",defaultVertexShader:"3D",defaultFragmentShader:"FragmentShader"})},PointSize:t=>({idFeature:"PointSize",apply:e=>{const i="uniform"===t?"u":"a";return{idVertex:`SizePrimitive:${Py(t)}`,idFragment:void 0,vertexShaderModifiers:[by(`${t} float ${i}PointSize`,"uniform float uDevicePixelRatio"),wy(`gl_PointSize = ${i}PointSize * uDevicePixelRatio`)]}}}),Color:t=>{const i=t&&t.dataType,s=t&&t.maskTextureText,r=t&&t.maskTexture,n=t&&t.overrideOpacity;return{idFeature:"Color",eD:{rD:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,oD:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0,nD:"attribute"===t.dataType||void 0},apply:(o,h)=>{let a,l=`Color:${Py(t)}`;const c=[];let u="FragmentShader";const d=[];if("uniform"===i)d.push(by("uniform vec4 uColor"),Ey(`${hy} =`,`${hy} = uColor`),...s?Fy:[],...r?Iy:[]);else if("attribute"===i)a="colorAttribute",c.push(By("attribute vec4 aColor","varying vec4 vColor")),d.push(by("varying vec4 vColor"),Ey(`${hy} =`,`${hy} = vColor`),...s?Fy:[],...r?Iy:[]);else if("texture"===i)a="colorTexCoord",c.push(By("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),d.push(by("varying vec2 vTextureCoord"),by(`uniform sampler2D ${dy}`),by("uniform vec4 uColor"),Ey(`${hy} =`,`${hy} = texture2D(${dy}, vTextureCoord)`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.) {\n                        ${hy} = uColor;\n                    }`),...s?Fy:[],...r?Iy:[]);else if("texture-coord-calc-gpu"===i)a="colorTexCoord",u="Empty",c.push(by("attribute vec2 aTextureCoord"),by("varying vec2 vTextureCoord"),wy("vTextureCoord = gl_Position.xy * 0.5 + 0.5")),d.push(by("varying vec2 vTextureCoord"),by(`uniform sampler2D ${dy}`),My(`vec4 ${hy} = texture2D(${dy}, vTextureCoord)`,`gl_FragColor = ${hy};`));else if(Array.isArray(i)&&"image"===i[0])a="colorTexCoord",c.push(By("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")),i[1].fitMode===e.ImageFitMode.Tile?d.push(by(`uniform sampler2D ${dy}`),by("varying vec2 vTextureCoord"),Ey(`${hy} =`,`${hy} = texture2D(${dy}, vTextureCoord);`)):d.push(by(`uniform sampler2D ${dy}`),by("varying vec2 vTextureCoord"),by("uniform vec4 uColor"),Ey(`${hy} =`,`${hy} = texture2D(${dy}, vTextureCoord);`,`if(vTextureCoord.x < 0. || vTextureCoord.x > 1. || vTextureCoord.y < 0. || vTextureCoord.y > 1.){\n                                ${hy} = uColor;\n                            }`));else if(Array.isArray(i)&&"lookup"===i[0]){const t=i[1];if("value"===t)a="lookup:value",c.push(By("attribute float aLookupValue","varying float vLookupValue"));else{const e=`${sy}.${t}`;a=`lookup:${t}`,c.push(By(e,"varying float vLookupValue"))}d.push(by("varying float vLookupValue"),...Ry("vLookupValue",i[2]),...s?Fy:[],...r?Iy:[])}else if(Array.isArray(i)&&"gradient"===i[0]){const t=i[1],e=t.getColorStops();if(Z(t)){const i="webgl2"===h&&!!((f=t)&&"object"==typeof f&&"type"in f&&"fillstyle"===f.type&&"fillType"in f&&"radial-gradient"===f.fillType&&!0===f.ditheringEnabled);l=`rgradient${e.length},${r},${s},${i}`,d.push(by("uniform vec4 uBounds","uniform vec2 uCenter","uniform vec2 uDistance","uniform float uAspect"),by(...te(e.map(((t,e)=>[`uniform vec4 color_${e}`,`uniform float stop_${e}`])))),iy.linearStep,i?iy.dither:void 0,Ey(`${hy} =`,"vec2 uv = vec2((((gl_FragCoord.x)-uBounds.x)/(uBounds.z))*uAspect,((gl_FragCoord.y)-uBounds.y)/(uBounds.w))","float mixVal = distance(uv/uDistance, uCenter/uDistance)",i?"vec4 color = dither(gl_FragCoord.xy, color_0, color_1, stop_0, stop_1, mixVal)":"vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, mixVal))",...e.map(((t,e)=>e<2?"":i?`color = dither(gl_FragCoord.xy, color, color_${e}, stop_${e-1}, stop_${e}, mixVal);`:`color = mix(color, color_${e}, linearStep(stop_${e-1}, stop_${e}, mixVal));`)),`${hy} = color`),...s?Fy:[],...r?Iy:[])}else et(t)&&(l=`lgradient${e.length},${r},${s}`,d.push(by("uniform vec4 uBounds","uniform vec2 uStartPoint","uniform vec2 uEndPoint"),by(...te(e.map(((t,e)=>[`uniform vec4 color_${e}`,`uniform float stop_${e}`])))),iy.linearStep,Ey(`${hy} =`,"vec2 uv = gl_FragCoord.xy - uBounds.xy","float magnitude = ((uv.x-uStartPoint.x) * (uEndPoint.x-uStartPoint.x) + (uv.y-uStartPoint.y) * (uEndPoint.y-uStartPoint.y)) / (pow(uEndPoint.x - uStartPoint.x, 2.0) + pow(uEndPoint.y-uStartPoint.y,2.0))","vec4 color = mix(color_0, color_1, linearStep(stop_0, stop_1, magnitude))",...e.map(((t,e)=>e<2?"":`color = mix(color, color_${e}, linearStep(stop_${e-1}, stop_${e}, magnitude))`)),`${hy} = color`),...s?Fy:[],...r?Iy:[]))}var f;if(s||r){const t="maskTexture";a=a?`${a} ${t}`:`Color:${t}`,c.push(By("attribute vec2 aMaskTextureCoord","varying vec2 vMaskTextureCoord"))}return n&&d.push(by("uniform float uOpacity"),Ey(`${hy} =`,`${hy}.a *= uOpacity`)),{vertexShaderModifiers:c,fragmentShader:u,fragmentShaderModifiers:d,idVertex:a,idFragment:l}}}},ColorShaded3D:t=>{const{dataType:e,shadingStyle:i,wireframe:s}=t;let r=i;const n=`ColorShaded3D:${Py(t)}`;return{idFeature:"ColorShaded3D",eD:{rD:!(!Array.isArray(t.dataType)||"value"===t.dataType[1])||void 0,oD:!(!Array.isArray(t.dataType)||"value"!==t.dataType[1])||void 0},apply:(t,o)=>{const h=[],a=[];if(h.push("phong"===i&&By(ny,"varying vec3 vNormal"),By(ry,"varying vec3 vPosWorld")),"uniform"===e)a.push(by("uniform vec4 uColorDiffuse"),Ey(`${hy} =`,`${hy} = uColorDiffuse`));else if("attribute"===e)r+=",per-vertex-color",h.push(By("attribute vec4 aColor","varying vec4 vColor")),a.push(by("varying vec4 vColor"),Ey(`${hy} =`,`${hy} = vColor`));else if(Array.isArray(e)){const t=e[1];if("value"===t)r+=",lookup:value",h.push(By("attribute float aLookupValue","varying float vLookupValue"));else{const e=`${sy}.${t}`;r+=`,lookup:${t}`,h.push(By(e,"varying float vLookupValue"))}a.push(by("varying float vLookupValue"),...Ry("vLookupValue",e[2]))}return s&&(r+=",wireframe",h.push(By("attribute vec3 aTriangleBary","varying vec3 vTriangleBary")),a.push(by("varying vec3 vTriangleBary"),by("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),iy.computeScreenSpaceWireframe,Ey(`${hy} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",`${hy} = mix(${hy}, uWireframeColor, edge)`))),"phong"===i&&a.push(...Oy),{idVertex:r,idFragment:n,vertexShaderModifiers:h,fragmentShader:"FragmentShader",fragmentShaderModifiers:a}}}},VertexLocation:t=>({idFeature:"VertexLocation",apply:e=>{const i=Ly(t.axisWorldTranslation,"posAxis_hprecision"),s=[],r=Vy(e),n=t.coordType?t.coordType:r?"vec3":"vec2";return t.isInstanceRectangleRendering?s.push(by("attribute vec2 aRectCorner","attribute vec2 aMemberStart","attribute vec2 aMemberEnd"),My("vec2 aPos = mix(aMemberStart, aMemberEnd, aRectCorner)")):"linear-highPrecision"!==t.axisWorldTranslation?!0!==t.splitPosAttribute?s.push(by(`attribute ${n} aPos`)):s.push(by("attribute float aPosX"),by("attribute float aPosY"),r&&by("attribute float aPosZ")):!0===t.splitPosAttribute?s.push(by("attribute float aPos_highpartX"),by("attribute float aPos_lowpartX"),by("attribute float aPos_highpartY"),by("attribute float aPos_lowpartY")):s.push(by(`attribute ${n} aPos_highpart`),by(`attribute ${n} aPos_lowpart`)),s.push(...zy(t,r,{attributeNameAxisCoord:"aPos",variableNameAxisCoord:"vec4"===t.coordType?void 0:sy,variableNameWorldCoord:ry})),s.push(...i.vertexShaderModifiers),{idVertex:`VertexLocation:${Py(t)}`,idFragment:i.idFragment,vertexShaderModifiers:s,fragmentShaderModifiers:i.fragmentShaderModifiers}}}),Model3D:t=>({idFeature:"Model3D",apply:e=>{const i=[];return i.push(by("attribute vec3 aGeoPos"),by("uniform mat4 uModelRotation"),by("uniform mat4 uModelRotationNormals"),by("uniform vec3 uLocationAxis"),by("uniform vec3 uModelAlignment"),by("uniform vec3 uModelScale"),by("uniform vec3 uModelSize"),...zy({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,{attributeNameAxisCoord:"uLocationAxis",variableNameAxisCoord:"locationAxis",variableNameWorldCoord:"locationWorld"}),Ty("gl_Position =","vec3 posWorld = locationWorld + ((uModelRotation * vec4(aGeoPos, 1.0)).xyz  - (uModelAlignment + 1.0) * uModelSize/2.0) * uModelScale;"),"attribute"===t.normalSource&&Ey(`vec3 ${ny} =`,` ${ny} = (uModelRotationNormals * vec4(${ny}, 1.0)).xyz;`),..._y(e)?Uy({axisWorldTranslation:"linear",normalSource:t.normalSource},!0,ry,sy):[]),{vertexShaderModifiers:i,idVertex:`Model3D:${Py(t)}`,idFragment:void 0}}}),LineInstanced2D:t=>{const e=Ly(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idFeature:"LineInstanced2D",apply:i=>({idVertex:`LineInstanced2D:${Py(t)}`,idFragment:e.idFragment,vertexShaderModifiers:[by("uniform float uThicknessPixels"),vy,..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[by("attribute vec2 aLocationA"),by("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[by("attribute vec2 aLocationA_highpart"),by("attribute vec2 aLocationB_highpart"),by("attribute vec2 aLocationA_lowpart"),by("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[by("attribute float aLocationAX"),by("attribute float aLocationAY"),by("attribute float aLocationBX"),by("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[by("attribute float aLocationA_highpartX"),by("attribute float aLocationA_highpartY"),by("attribute float aLocationB_highpartX"),by("attribute float aLocationB_highpartY"),by("attribute float aLocationA_lowpartX"),by("attribute float aLocationA_lowpartY"),by("attribute float aLocationB_lowpartX"),by("attribute float aLocationB_lowpartY")]:[],by("attribute vec2 aSegmentPosition"),by("attribute float aSegmentSide"),t.offset&&by("attribute vec2 aOffsetPixelsA","attribute vec2 aOffsetPixelsB"),...zy(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA",overrideOffsetPixels:t.offset?"aOffsetPixelsA":void 0},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB",overrideOffsetPixels:t.offset?"aOffsetPixelsB":void 0}),t.ensureMinimumSegmentLength&&by("uniform vec2 uMinSegmentPixelVector"),Ey("worldB = ",t.ensureMinimumSegmentLength&&"float segmentLengthPixels = sqrt(pow(worldB.x - worldA.x, 2.0) + pow(worldB.y - worldA.y, 2.0)) / length(uRatioPxClip)",t.ensureMinimumSegmentLength&&"if (segmentLengthPixels == 0.0 || segmentLengthPixels < length(uMinSegmentPixelVector)) {\n                            worldB = worldA + uMinSegmentPixelVector * uRatioPxClip;\n                        }","vec2 directionBasis = worldB - worldA","vec2 directionBasisNorm = normalize(directionBasis)","vec2 perpendBasisNorm = vec2(-directionBasisNorm.y, directionBasisNorm.x)","vec2 offset = mix(worldA, worldB, aSegmentSide)","vec2 thicknessDirection = aSegmentPosition.x * directionBasisNorm + aSegmentPosition.y * perpendBasisNorm",`vec2 ${ry} = offset + thicknessDirection * uThicknessPixels * ${cy}`),...Xy(i),...Ny(i),..._y(i)?Uy(t,!1,ry,sy):[],...e.vertexShaderModifiers],fragmentShaderModifiers:e.fragmentShaderModifiers})}},Area2D:t=>({idFeature:"Area2D",apply:e=>{const i=Ly(t.axisWorldTranslation,"locationA_hprecision","locationB_hprecision");return{idVertex:`Area2D:${Py(t)}`,idFragment:i.idFragment,vertexShaderModifiers:[..."linear-highPrecision"!==t.axisWorldTranslation&&!0!==t.splitPosAttribute?[by("attribute vec2 aLocationA"),by("attribute vec2 aLocationB")]:"linear-highPrecision"===t.axisWorldTranslation&&!0!==t.splitPosAttribute?[by("attribute vec2 aLocationA_highpart"),by("attribute vec2 aLocationB_highpart"),by("attribute vec2 aLocationA_lowpart"),by("attribute vec2 aLocationB_lowpart")]:"linear-highPrecision"!==t.axisWorldTranslation&&!0===t.splitPosAttribute?[by("attribute float aLocationAX"),by("attribute float aLocationAY"),by("attribute float aLocationBX"),by("attribute float aLocationBY")]:"linear-highPrecision"===t.axisWorldTranslation&&!0===t.splitPosAttribute?[by("attribute float aLocationA_highpartX"),by("attribute float aLocationA_highpartY"),by("attribute float aLocationB_highpartX"),by("attribute float aLocationB_highpartY"),by("attribute float aLocationA_lowpartX"),by("attribute float aLocationA_lowpartY"),by("attribute float aLocationB_lowpartX"),by("attribute float aLocationB_lowpartY")]:[],by("attribute float aCurveOrBaseline"),by("attribute float aSegmentSide"),...zy(t,!1,{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),Ey("worldB = ","vec2 posCoord = mix(worldA, worldB, aSegmentSide)","bottom"===t.fill?"float baseline = min(posCoord.y, -1.0)":"top"===t.fill?"float baseline = max(posCoord.y, 1.0)":"left"===t.fill?"float baseline = min(posCoord.x, -1.0)":"float baseline = max(posCoord.x, 1.0)",`vec2 ${ry} = ${"bottom"===t.fill||"top"===t.fill?"vec2(posCoord.x, mix(posCoord.y, baseline, aCurveOrBaseline))":"vec2(mix(posCoord.x, baseline, aCurveOrBaseline), posCoord.y)"}`),...Xy(e),...Ny(e),..._y(e)?Uy(t,!1,ry,sy):[],...i.vertexShaderModifiers],fragmentShaderModifiers:i.fragmentShaderModifiers}}}),LineInstanced3D:t=>({idFeature:"LineInstanced3D",apply:e=>({idVertex:`LineInstanced3D:${Py(t)}`,idFragment:void 0,defaultFragmentShader:"FragmentShader",vertexShaderModifiers:[by("uniform float uOffsetWU"),by("attribute vec3 aLocationA"),by("attribute vec3 aLocationB"),by("attribute float aSegmentPosition"),by("attribute float aPerpendHorizontal"),by("attribute float aPerpendVertical"),...zy({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},Vy(e),{attributeNameAxisCoord:"aLocationA",variableNameAxisCoord:"locationA",variableNameWorldCoord:"worldA"},{attributeNameAxisCoord:"aLocationB",variableNameAxisCoord:"locationB",variableNameWorldCoord:"worldB"}),Ey("worldB = ","vec3 directionBasis = worldB - worldA","vec3 directionBasisNorm = normalize(directionBasis)","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(directionBasis.y), 0.9 ) ))","vec3 horizontalBasis = normalize( cross( notParallel, directionBasisNorm ) )","vec3 verticalBasis = normalize( cross( horizontalBasis, directionBasisNorm ) )",`vec3 ${ny} = aPerpendHorizontal * horizontalBasis + aPerpendVertical * verticalBasis`,`vec3 ${ry} = worldA + aSegmentPosition * directionBasis + ${ny} * uOffsetWU * 0.5`),..._y(e)?Uy({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,ry,sy):[]]})}),RoundedEdges3D:{idFeature:"RoundedEdges3D",apply:t=>({idVertex:"RoundedEdges3D",idFragment:void 0,vertexShaderModifiers:[by("attribute vec3 aEdge"),by("uniform float uEdgeRoundness"),Ey(`${ry} =`,"vec3 boxSizeWorld = abs( aOffsetAxis / uScale )","float boxMinDimensionWorldXZ = min( boxSizeWorld.x, boxSizeWorld.z )","vec3 edgeRoundAmount = uEdgeRoundness * vec3( boxMinDimensionWorldXZ, min( boxMinDimensionWorldXZ, boxSizeWorld.y ), boxMinDimensionWorldXZ )",`${ry} = ${ry} + aEdge * edgeRoundAmount`)]})},ColorGrid2D:t=>{const e=t.flipXY,i=t.intensityTextureType,s=t.littleEndian;return{idFeature:"ColorGrid2D",apply:(r,n)=>({idVertex:void 0,idFragment:`ColorGrid2D:${Py(t)}`,fragmentShader:"FragmentShader",fragmentShaderModifiers:[by("uniform vec4 uTileBounds","uniform vec2 uTileDimensions","uniform sampler2D uTileIntensityValues"),"ubyte"===i&&iy.decodeUbyteRGBAEncodedFloat,"bilinear"===t.interpolation?My("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions - 1.0)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensions - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensions - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${e?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${e?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${e?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${e?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===i?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${s})`),"float intensity01 = "+("float"===i?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${s})`),"float intensity10 = "+("float"===i?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${s})`),"float intensity11 = "+("float"===i?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${s})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${e?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${e?"lerpFactors.y":"lerpFactors.x"})`):My("vec2 cellSizePx = uTileBounds.zw / (uTileDimensions)","vec2 cellIndex = (gl_FragCoord.xy - uTileBounds.xy) / cellSizePx","vec2 cellIndexNormalized = cellIndex / uTileDimensions",`vec4 sample0 = texture2D(uTileIntensityValues, ${e?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = "+("float"===i?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${s})`)),...Ry("intensityP",t.lut)]})}},DrawToNormalTexture:t=>{const e=t.flipXZ,i=t.vertexIdSource,s=t.normalTextureType,r=t.heightmapTextureType,n=t.littleEndian;return{idFeature:"DrawToNormalTexture",apply:(o,h)=>{const a=[],l=[];return a.push(by("uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","uint"===s?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB","attribute"===i&&"attribute float aVertexID"),void 0!==i&&iy.roundUnsigned,iy.modulus,iy.texelFetchWithFallback[h],"ubyte"===r&&iy.decodeUbyteRGBAEncodedFloat,My(void 0===i?"int iVertex = gl_VertexID":"int iVertex = int(roundUnsigned(aVertexID))","int iSecondary = modulus(iVertex, (uTileDimensions.y - 1))","int iPrimary = iVertex / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(uTileDimensions) - 1.0","vec2 halfTexelWorld = 2.0 / (uTileDimensionsMinus1 * 2.0)","vec2 posWorld = vec2(-1.0 + halfTexelWorld.y + iCell.y * 2.0 * halfTexelWorld.y, -1.0 + halfTexelWorld.x + iCell.x * 2.0 * halfTexelWorld.x)","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec3 posAxis0 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell.${e?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`} ,\n                            uTileStartLocationAxisXZ.y + iCell.${e?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell1 = iCell + vec2(1.0, 0.0)",`vec3 posAxis1 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell1.${e?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell1.y, iCell1.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},\n                            uTileStartLocationAxisXZ.y + iCell1.${e?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell2 = iCell + vec2(0.0, 1.0)",`vec3 posAxis2 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell2.${e?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell2.y, iCell2.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},\n                            uTileStartLocationAxisXZ.y + iCell2.${e?"x":"y"} * cellSizeAxis.y\n                        )`,"vec2 iCell3 = iCell + vec2(1.0, 1.0)",`vec3 posAxis3 = vec3(\n                            uTileStartLocationAxisXZ.x + iCell3.${e?"y":"x"} * cellSizeAxis.x,\n                            ${"float"===r?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell3.y, iCell3.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${n})`},\n                            uTileStartLocationAxisXZ.y + iCell3.${e?"x":"y"} * cellSizeAxis.y\n                        )`,"vec3 normal = normalize(cross(posAxis2 - posAxis0, posAxis1 - posAxis0) + cross(posAxis1 - posAxis3, posAxis2 - posAxis3))","uint"===s?"vNormalRGB = uvec3(((normal / 2.0) + 0.5) * float(-1u))":"vNormalRGB = (normal / 2.0) + 0.5","gl_PointSize = 1.0")),l.push(by("uint"===s?"flat varying uvec3 vNormalRGB":"varying vec3 vNormalRGB"),My("uint"===s?"gl_FragColor = uvec4(vNormalRGB, -1u)":"gl_FragColor = vec4(vNormalRGB, 1.0)")),{idVertex:`DrawToNormalTexture:${Py(t)}`,idFragment:`DrawToNormalTexture:${Py(t)}`,vertexShaderModifiers:a,fragmentShaderModifiers:l,fragmentShader:"Empty",hints:["uint"===s&&{type:"fragOutput",fragOutput:"uvec4"}]}}}},SurfaceGrid:t=>{const e=t.fillColor,i=t.interpolation,s=t.flipXZ,r=t.shadingStyle,n=t.wireframe,o=t.normalTextureType,h=t.heightmapTextureType,a=t.intensityTextureType,l=t.littleEndian;return{idFeature:"SurfaceGrid",eD:{aD:!0},apply:(c,u)=>{const d=[],f=[];return d.push(by("attribute vec2 aGeoCellOffset","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture"),iy.modulus,iy.texelFetchWithFallback[u],"ubyte"===h&&iy.decodeUbyteRGBAEncodedFloat,My("int iSecondary = modulus(iInstance + uBaseInstance, (uTileDimensions.y - 1))","int iPrimary = (iInstance + uBaseInstance) / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 iCellVertex = iCell + aGeoCellOffset","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","vec2 ySampleCoordinate = vec2(iCellVertex.y, iCellVertex.x) / vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x)","float y = "+("float"===h?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCellVertex.y, iCellVertex.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${l})`),"vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)","vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * "+(s?"vec2(iCellVertex.y, iCellVertex.x)":"iCellVertex"),"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)")),d.push(...zy({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:sy,variableNameWorldCoord:ry})),"phong"===r&&d.push(By(ry,"varying vec3 vPosWorld"),..."uint"===o?[iy.texelFetchUnsignedWithFallback[u],wy("vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)")]:[wy("vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))")],wy("vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vNormal = normalize(normalAxis * uScale)"),by("varying vec3 vNormal",..."uint"===o?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"])),f.push(by("varying vec3 vTriangleBary")),"uniform"===e?f.push(by("uniform vec4 uColorDiffuse"),Ey(`${hy} =`,`${hy} = uColorDiffuse`)):Array.isArray(e)&&"lookup"===e[0]&&("value"===e[1]?(d.push(By(`${sy}.xz`,"varying vec2 vVertexLocationAxisXZ")),f.push(by("uniform vec4 uTileBoundsAxisXZ","uniform vec2 uTileDimensionsXZ","varying vec2 vVertexLocationAxisXZ","uniform sampler2D uTileIntensityValues","uniform mat4 uViewProjectionMatrix","uniform vec3 uScale","uniform vec3 uDisp"),"ubyte"===a&&iy.decodeUbyteRGBAEncodedFloat,"bilinear"===i?My("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = (vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ","vec2 cellStart = floor(cellIndex)","vec2 cellEnd = ceil(cellIndex)","vec2 cellStartNormalized = cellStart / (uTileDimensionsXZ - 1.0)","vec2 cellEndNormalized = cellEnd / (uTileDimensionsXZ - 1.0)",`vec4 sample00 = texture2D(uTileIntensityValues, ${s?"cellStartNormalized":"vec2(cellStartNormalized.y, cellStartNormalized.x)"})`,`vec4 sample01 = texture2D(uTileIntensityValues, ${s?"vec2(cellStartNormalized.x, cellEndNormalized.y)":"vec2(cellStartNormalized.y, cellEndNormalized.x)"})`,`vec4 sample10 = texture2D(uTileIntensityValues, ${s?"vec2(cellEndNormalized.x, cellStartNormalized.y)":"vec2(cellEndNormalized.y, cellStartNormalized.x)"})`,`vec4 sample11 = texture2D(uTileIntensityValues, ${s?"cellEndNormalized":"vec2(cellEndNormalized.y, cellEndNormalized.x)"})`,"float intensity00 = "+("float"===a?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${l})`),"float intensity01 = "+("float"===a?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${l})`),"float intensity10 = "+("float"===a?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${l})`),"float intensity11 = "+("float"===a?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${l})`),"vec2 lerpFactors = cellIndex - cellStart",`float intensityR1 = mix(intensity00, intensity10, ${s?"lerpFactors.x":"lerpFactors.y"})`,`float intensityR2 = mix(intensity01, intensity11, ${s?"lerpFactors.x":"lerpFactors.y"})`,`float intensityP = mix(intensityR1, intensityR2,  ${s?"lerpFactors.y":"lerpFactors.x"})`):My("vec2 cellSizeAxisXZ = uTileBoundsAxisXZ.zw / (uTileDimensionsXZ - 1.0)","vec2 cellIndex = floor((vVertexLocationAxisXZ - uTileBoundsAxisXZ.xy) / cellSizeAxisXZ)","vec2 cellIndexNormalized = cellIndex / (uTileDimensionsXZ - 1.0)",`vec4 sample0 = texture2D(uTileIntensityValues, ${s?"cellIndexNormalized":"vec2(cellIndexNormalized.y, cellIndexNormalized.x)"})`,"float intensityP = sample0.x"),...Ry("intensityP",e[2]))):(d.push(By(`${sy}.${e[1]}`,"varying float vLookupValue")),f.push(by("varying float vLookupValue"),...Ry("vLookupValue",e[2])))),"phong"===r&&f.push(...Oy),n&&(d.push(by("attribute vec3 aTriangleBary"),By("aTriangleBary","varying vec3 vTriangleBary")),f.push(by("uniform vec4 uWireframeColor","uniform float uWireframeThickness"),iy.computeScreenSpaceWireframe,Ey(`${hy} =`,"float edge = computeScreenSpaceWireframe(vTriangleBary, uWireframeThickness)",e?`if (edge > 0.0) {\n                                    ${hy} = vec4(mix(${hy}.rgb, uWireframeColor.rgb, edge * uWireframeColor.a), max(${hy}.a, uWireframeColor.a));\n                                }`:`if (edge > 0.0) {\n                                    ${hy} = uWireframeColor;\n                                  } else {\n                                      discard;\n                                  }`))),{idVertex:`SurfaceGrid:${Py(t)}`,idFragment:`SurfaceGrid:${Py(t)}`,vertexShaderModifiers:d,fragmentShader:"FragmentShader",fragmentShaderModifiers:f}}}},DebugSurfaceGridNormals:t=>({idFeature:"DebugSurfaceGridNormals",apply:(e,i)=>({idVertex:`DebugSurfaceGridNormals:${Py(t)}`,idFragment:`DebugSurfaceGridNormals:${Py(t)}`,vertexShaderModifiers:[by("attribute float aNormalArrow","uniform int uBaseInstance","uniform ivec2 uTileDimensions","uniform vec2 uTileDimensionsXZ","uniform vec2 uTileStartLocationAxisXZ","uniform vec2 uTileSizeAxisXZ","uniform sampler2D uHeightmapTexture","attribute"===t.instanceIdSource&&"attribute float aInstanceID",..."uint"===t.normalTextureType?["uniform usampler2D uNormalmapTexture"]:["uniform sampler2D uNormalmapTexture"]),iy.roundUnsigned,iy.modulus,iy.texelFetchWithFallback[i],"ubyte"===t.heightmapTextureType&&iy.decodeUbyteRGBAEncodedFloat,My(void 0===t.instanceIdSource?"int iInstance = gl_InstanceID":"int iInstance = int(roundUnsigned(aInstanceID))","iInstance = iInstance + uBaseInstance","int iSecondary = modulus(iInstance, (uTileDimensions.y - 1))","int iPrimary = iInstance / (uTileDimensions.y - 1)","vec2 iCell = vec2(float(iPrimary), float(iSecondary))","vec2 uTileDimensionsMinus1 = vec2(float(uTileDimensions.x), float(uTileDimensions.y)) - 1.0","float y00 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y01 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y10 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y11 = "+("float"===t.heightmapTextureType?"texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)).x":`decodeUbyteRGBAEncodedFloat(texelFetchWithFallback(uHeightmapTexture, ivec2(iCell.y + 1.0, iCell.x + 1.0), vec2(uTileDimensions.y, uTileDimensions.x)), ${t.littleEndian})`),"float y = (y00 + y01 + y10 + y11) / 4.0","vec2 cellSizeAxis = uTileSizeAxisXZ / (uTileDimensionsXZ - 1.0)",`vec2 posAxisXZ = uTileStartLocationAxisXZ + cellSizeAxis * (0.5 + ${t.flipXZ?"vec2(iCell.y, iCell.x)":"iCell"})`,"vec3 posAxis = vec3(posAxisXZ.x, y, posAxisXZ.y)",..."uint"===t.normalTextureType?["vec4 normalAxisRGB = vec4(texelFetchUnsignedWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))) / float(-1u)"]:["vec4 normalAxisRGB = texelFetchWithFallback(uNormalmapTexture, ivec2(iCell.y, iCell.x), vec2(uTileDimensionsMinus1.y, uTileDimensionsMinus1.x))"],"vec3 normalAxis = (normalAxisRGB.rgb * 2.0) - 1.0","vec3 normalWorld = normalize(normalAxis * uScale)"),..."uint"===t.normalTextureType?[iy.texelFetchUnsignedWithFallback[i]]:[],...zy({axisWorldTranslation:t.axisWorldTranslation,normalSource:"custom"},!0,{attributeNameAxisCoord:void 0,variableNameAxisCoord:sy,variableNameWorldCoord:ry}),Ey("posWorld =","vec3 dirArrow = normalWorld","vec3 posArrowStart = posWorld","vec3 posArrowEnd = posWorld + dirArrow * 0.010","vec3 notParallel = normalize(mix( vec3( 0.0, 1.0, 0.0 ), vec3( 0.2, 0.8, 0.0 ), step( abs(dirArrow.y), 0.9 ) ))","vec3 dirArrowLeft = normalize(-dirArrow + 0.50 * normalize(cross(dirArrow, notParallel)))","vec3 dirArrowRight = normalize(-dirArrow + 0.50 * normalize(cross(notParallel, dirArrow)))","vec3 posArrowLeft = posArrowEnd + dirArrowLeft * 0.0025","vec3 posArrowRight = posArrowEnd + dirArrowRight * 0.0025","if (aNormalArrow == 0.0) {\n                        posWorld = posArrowStart;\n                    } else if (aNormalArrow == 1.0) {\n                        posWorld = posArrowEnd;\n                    } else if (aNormalArrow == 2.0) {\n                        posWorld = posArrowLeft;\n                    } else if (aNormalArrow == 3.0) {\n                        posWorld = posArrowRight;\n                    }")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[wy("gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0)")]})}),OffsetTowardsCamera:()=>({idFeature:"OffsetTowardsCamera",apply:t=>({idVertex:"OffsetTowardsCamera",idFragment:void 0,vertexShaderModifiers:[by("uniform vec3 uCameraLoc"),Ey("posWorld =","posWorld = posWorld + normalize(uCameraLoc) * 0.0025")]})}),AliasedEdge:{idFeature:"AliasedEdge",apply:t=>({idVertex:"AliasedEdge",idFragment:"AliasedEdge",vertexShaderModifiers:[by("attribute float aSegmentInside"),by("varying float vSegmentInside"),by("varying float vSegmentSide"),Ey("gl_Position = ","\n                vSegmentInside = aSegmentInside;\n                vSegmentSide = aSegmentSide;\n                ")],fragmentShaderModifiers:[ky("#extension GL_OES_standard_derivatives : enable"),by("uniform float uAALimit"),by("varying float vSegmentInside"),by("varying float vSegmentSide"),Ey(`${ay} = `,`\n                float dist = (uAALimit - vSegmentInside);\n                vec2 ddist = vec2(dFdx(dist), dFdy(dist));\n                float pixelDist = dist / length(ddist);\n                // additional blurring\n                pixelDist *= 0.5;\n\n                float aa = clamp(0.5 - pixelDist, 0.0, 1.0);\n                if((vSegmentSide <= 0.0 || vSegmentSide >= 1.0) && aa <=0.99){\n                    aa *= 0.5;\n                }\n                ${ay} = aa;\n                `)]})},Glow1D:t=>({idFeature:"Glow1D",apply:()=>{const e=Math.round(t.spreadPx),i=Math.round(t.blurPx),s=e+i,r=t.firstPass,n=[];for(let t=-s;t<=s;t+=1){const e=Math.abs(t);n.push(r?{x:t.toFixed(1),y:"0.0",distPx:e.toFixed(1)}:{x:"0.0",y:t.toFixed(1),distPx:e.toFixed(1)})}return{idVertex:`Glow1D:${Py(t)}`,idFragment:`Glow1D:${Py(t)}`,vertexShaderModifiers:[By("attribute vec2 aTextureCoord","varying vec2 vTextureCoord")],fragmentShader:"FragmentShader",fragmentShaderModifiers:[by("uniform sampler2D uTexture"),by("varying vec2 vTextureCoord"),by("uniform vec2 uTextureSize"),r&&by("uniform vec2 uOffsetPx"),!r&&by("uniform sampler2D uTextureFirstGlowPass"),!r&&by("uniform vec4 uGlowColor"),Ey(`${ay} =`,"vec2 oneTexel = vec2(1.0, 1.0) / uTextureSize","vec2 vTexCoordPixelCenter = vTextureCoord + vec2(0.5, 0.5) / uTextureSize",...r?[]:["float inverseIntensity =\n                                    0.25 * texture2D(uTexture, vTexCoordPixelCenter).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, 0.0)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, -oneTexel.y)).a +\n                                    0.125 * texture2D(uTexture, vTexCoordPixelCenter + vec2(0.0, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, -oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(-oneTexel.x, oneTexel.y)).a +\n                                    0.0625 * texture2D(uTexture, vTexCoordPixelCenter + vec2(oneTexel.x, oneTexel.y)).a",`${ay} *= 1.0 - (inverseIntensity * inverseIntensity)`,`if (${ay} <= 0.0) { discard; }`],"float distancePx = 255.0","vec2 sample_tx = vec2(0.0)",...r?["vec2 texCoordOffset = vTexCoordPixelCenter - uOffsetPx * oneTexel",...n.map(((t,e)=>[`sample_tx = texCoordOffset + oneTexel * vec2(${t.x}, ${t.y})`,`if (distancePx > ${t.distPx} && sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0 && texture2D(uTexture, sample_tx).a > 0.0) { distancePx = ${t.distPx}; }`])).flat(),`${hy} = vec4(distancePx / 255.0, 0.0, 0.0, 1.0)`]:["vec4 sample_horizontal = vec4(0.0)","float horizontal_dist = 255.0","float min_horizontal_dist = 255.0",...n.map(((t,e)=>[`sample_tx = vTexCoordPixelCenter + oneTexel * vec2(${t.x}, ${t.y})`,"if (sample_tx.x <= 1.0 && sample_tx.y <= 1.0 && sample_tx.x >= 0.0 && sample_tx.y >= 0.0) {\n                                                sample_horizontal = texture2D(uTextureFirstGlowPass, sample_tx);\n                                                horizontal_dist = sample_horizontal.r * 255.0;\n                                            }","if (sample_horizontal.a < 0.9) { horizontal_dist = 255.0; }","min_horizontal_dist = min(min_horizontal_dist, horizontal_dist)",`distancePx = min(distancePx, pow(horizontal_dist * horizontal_dist + ${t.y} * ${t.y}, 0.5))`])).flat(),`if (distancePx > ${s.toFixed(1)}) { discard; }`,"vec4 pixelGlowColor = vec4(0.0, 0.0, 0.0, 0.0)",`if (distancePx > ${e.toFixed(1)}) {\n                                        float lerpAmount = (distancePx - ${e.toFixed(1)}) / ${(i+1).toFixed(1)};\n                                        pixelGlowColor = mix(uGlowColor, vec4(uGlowColor.rgb, 0.0), 1.0 - (1.0 - lerpAmount) * (1.0 - lerpAmount));\n                                    } else {\n                                        pixelGlowColor = uGlowColor;\n                                    }`,`${hy} = pixelGlowColor`])]}}}),MousePicking:t=>{const e=!!(null==t?void 0:t.customMousePickingIdInput),i=!e&&!!(null==t?void 0:t.useVertexId),s=!e&&!!(null==t?void 0:t.useAttribute),r=!e&&!i&&!s;return{idFeature:"MousePicking",eD:{aD:r,lD:i},apply:(n,o)=>{const h="webgl2"===o?"flat":"",a="webgl2"===o?"int":"float";return{idVertex:`MousePicking:${Py(t)}`,idFragment:`MousePicking:${Py(t)}`,vertexShaderModifiers:[...r?[by(`${h} varying ${a} vPickingIdOffset`),wy(`vPickingIdOffset = ${a}(iInstance)`)]:[],...i?[by(`${h} varying ${a} vPickingIdOffset`),wy(`vPickingIdOffset = ${a}(iVertex)`)]:[],...s?[by("attribute float aPickingIdOffset",`${h} varying ${a} vPickingIdOffset`),wy(`vPickingIdOffset = ${a}(aPickingIdOffset)`)]:[]],fragmentShaderModifiers:[by("uniform int uFirstId"),...e?[]:[by(`${h} varying ${a} vPickingIdOffset`),My(`int ${ly} = ${"int"===a?"vPickingIdOffset":"int(floor(vPickingIdOffset + 0.5))"}`)],Ey(`${hy} =`,`int remainder = ${ly} + uFirstId`,"int r = remainder / 16777216","remainder -= r * 16777216","int g = remainder / 65536","remainder -= g * 65536","int b = remainder / 256","remainder -= b * 256","int a = remainder",`${hy} = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, float(a) / 255.0)`),t=>t.replace(`gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${ay})`,`if (${ay} <= 0.0) { discard; }\ngl_FragColor = fragColorEnd`).replace("if (fragColorEnd.a <= 0.0) { discard; }","")]}}}},AttributeHighlight:{idFeature:"AttributeHighlight",apply:t=>({idVertex:"AttributeHighlight",idFragment:"AttributeHighlight",vertexShaderModifiers:[By("attribute float aIsHighlighted","varying float vIsHighlighted")],fragmentShaderModifiers:[t=>t.replace("uniform float uIsHighlighted","varying float vIsHighlighted").replace("uIsHighlighted","vIsHighlighted")]})},StippleTexture:{idFeature:"StippleTexture",apply:(t,e)=>({idVertex:"StippleTexture",idFragment:"StippleTexture",vertexShaderModifiers:[by("attribute vec2 aLengthSoFar"),by("varying float vLengthSoFar"),by("uniform vec2 uStippleCount"),wy("\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[by("uniform sampler2D uStippleTexture"),by("uniform float uStippleScale"),by("varying float vLengthSoFar"),"webgl1"===e&&by("uniform float uStippleTextureWidthLimiter"),Ey(`${ay} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===e?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${ay} *= stippleAA;\n                    if (${ay} <= 0.0) { discard; }`)]})},StippleTextureInstanced:{idFeature:"StippleTextureInstanced",apply:(t,e)=>({idVertex:"StippleTextureInstanced",idFragment:"StippleTextureInstanced",vertexShaderModifiers:[by("attribute vec2 aLengthSoFarA"),by("attribute vec2 aLengthSoFarB"),by("varying float vLengthSoFar"),by("uniform vec2 uStippleCount"),wy("\n                vec2 aLengthSoFar = mix(aLengthSoFarA, aLengthSoFarB, aSegmentSide);\n                vec2 len = (((aLengthSoFar) / uScale) / 2.0) * uStippleCount;\n                vLengthSoFar = len.x + len.y;\n                ")],fragmentShaderModifiers:[by("uniform sampler2D uStippleTexture"),by("uniform float uStippleScale"),by("varying float vLengthSoFar"),"webgl1"===e&&by("uniform float uStippleTextureWidthLimiter"),Ey(`${ay} = `,`\n                    float stippleSampleY = texture2D(\n                        uStippleTexture, \n                        ${"webgl1"===e?"vec2(mod((vLengthSoFar / uStippleScale) , uStippleTextureWidthLimiter), 0)":"vec2((vLengthSoFar / uStippleScale), 0)"}\n                    ).r;\n                    float stippleAA = (stippleSampleY - 0.5) * 2.0;\n                    ${ay} *= stippleAA;\n                    if (${ay} <= 0.0) { discard; }`)]})},PolarHeatmap:t=>({idFeature:"PolarHeatmap",apply:(e,i)=>{const s="dataType"in t,r="interpolation"in t?t:void 0,n=r?r.flipXY:void 0,o="bilinear"===(null==r?void 0:r.interpolation),h=null==r?void 0:r.intensityTextureType,a=null==r?void 0:r.littleEndian;return{idVertex:void 0,idFragment:`PolarHeatmap:${Py(t)}`,vertexShaderModifiers:[],fragmentShaderModifiers:[by("uniform vec2 uViewportSize","uniform vec2 uScale","uniform vec2 uDisp","uniform float uSectors","uniform float uAnnuli","uniform float uAmplitudeStart","uniform float uAmplitudeStep","uniform float uAmplitudeAxisStart","uniform float uAmplitudeAxisEnd","uniform float uAngleOffset","uniform float uAngleDirection",r&&"uniform sampler2D uTileIntensityValues",s&&"uniform vec4 uColor"),iy.texelFetchWithFallback[i],"ubyte"===h&&iy.decodeUbyteRGBAEncodedFloat,My("vec2 posWorld = (2.0 * gl_FragCoord.xy / uViewportSize) - 1.0","vec2 posAxis = posWorld * uScale + uDisp","float amplitudeAxisInterval = uAmplitudeAxisEnd - uAmplitudeAxisStart","float amplitude = uAmplitudeAxisStart + sign(amplitudeAxisInterval) * sqrt(posAxis.x * posAxis.x + posAxis.y * posAxis.y)","float iAnnulus = (amplitude - uAmplitudeStart) / uAmplitudeStep"),r&&Ey("iAnnulus","float angRad = atan(posAxis.y, posAxis.x) * uAngleDirection + uAngleOffset","if (angRad < 0.0) { angRad = angRad + 2.0 * 3.1415926538; }","if (angRad > 2.0 * 3.1415926538) { angRad = angRad - 2.0 * 3.1415926538; }","float iSector = uSectors * angRad / (2.0 * 3.1415926538)","vec2 cellIndex = vec2(iSector, iAnnulus)","ivec2 cellStart = ivec2(floor(cellIndex))","ivec2 cellEnd = cellStart + ivec2(1)","if (cellEnd.x >= int(uSectors)) { cellEnd = ivec2(0, cellEnd.y); }",n&&"cellIndex = vec2(cellIndex.y, cellIndex.x)",n&&"cellStart = ivec2(cellStart.y, cellStart.x)",n&&"cellEnd = ivec2(cellEnd.y, cellEnd.x)"),s&&Ey(`${hy} =`,`${hy} = uColor`),r&&Ey("cellEnd","vec2 tileDimensions = "+(n?"vec2(uAnnuli, uSectors)":"vec2(uSectors, uAnnuli)"),o&&"vec4 sample00 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",o&&"vec4 sample01 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellStart.x, cellEnd.y), tileDimensions)",o&&"vec4 sample10 = texelFetchWithFallback(uTileIntensityValues, ivec2(cellEnd.x, cellStart.y), tileDimensions)",o&&"vec4 sample11 = texelFetchWithFallback(uTileIntensityValues, cellEnd, tileDimensions)",o&&"float intensity00 = "+("float"===h?"sample00.x":`decodeUbyteRGBAEncodedFloat(sample00, ${a})`),o&&"float intensity01 = "+("float"===h?"sample01.x":`decodeUbyteRGBAEncodedFloat(sample01, ${a})`),o&&"float intensity10 = "+("float"===h?"sample10.x":`decodeUbyteRGBAEncodedFloat(sample10, ${a})`),o&&"float intensity11 = "+("float"===h?"sample11.x":`decodeUbyteRGBAEncodedFloat(sample11, ${a})`),o&&"vec2 lerpFactors = cellIndex - vec2(cellStart)",o&&"float intensityR1 = mix(intensity00, intensity10, lerpFactors.x)",o&&"float intensityR2 = mix(intensity01, intensity11, lerpFactors.x)",o&&"float intensityP = mix(intensityR1, intensityR2,  lerpFactors.y)",!o&&"vec4 sample0 = texelFetchWithFallback(uTileIntensityValues, cellStart, tileDimensions)",!o&&"float intensityP = "+("float"===h?"sample0.x":`decodeUbyteRGBAEncodedFloat(sample0, ${a})`)),...r?Ry("intensityP",r.lut):[]]}}})},Gy={"2D":"\nvoid main(void) {\n    gl_Position = vec4(posWorld, 0.0, 1.0 );\n}\n","2DMatrix":"\nvoid main(void) {\n    gl_Position = posWorld;\n}\n","3D":"\nuniform mat4 uViewProjectionMatrix;\nvoid main(void) {\n    gl_Position = uViewProjectionMatrix * vec4(posWorld, 1.0);\n}\n"},Yy={FragmentShader:`\nuniform float uIsHighlighted;\nuniform vec4 uHighlightColorOffset;\nuniform float uRenderEffectMask;\nvoid main(void) {\n    vec4 ${hy} = vec4(0.0, 0.0, 0.0, 0.0);\n    float ${ay} = 1.0;\n    vec4 fragColorEnd = ${hy};\n    if (fragColorEnd.a <= 0.0) { discard; }\n    fragColorEnd = clamp(fragColorEnd + uIsHighlighted * uHighlightColorOffset, vec4(0.0), vec4(1.0));\n    fragColorEnd = mix(fragColorEnd, vec4(1.0), uRenderEffectMask * fragColorEnd.a * 1000.0);\n    gl_FragColor = vec4(fragColorEnd.rgb, fragColorEnd.a * ${ay});\n}\n`,Empty:"\nvoid main(void) {\n}\n"};class Wy{constructor(t,e,i,s,r){if(this.id=t,this.shader=i,this.gl=s,this.info=r,!e||!i)throw new zt(`Could not find ${this.cD()} ${this.uD()} shader source code.`);this.gl.shaderSource(i,e),this.gl.compileShader(i)}get src(){return""}cD(){return this.id.toString()}uD(){return this.gl.getShaderParameter(this.shader,this.gl.SHADER_TYPE)===this.gl.FRAGMENT_SHADER?"fragment":"vertex"}}class jy extends Wy{constructor(t,e,i,s){super(t,e,i.createShader(i.VERTEX_SHADER),i,s)}}class $y extends Wy{constructor(t,e,i,s){super(t,e,i.createShader(i.FRAGMENT_SHADER),i,s)}}class Qy{constructor(t,e,i,s){this.dD=new Map,this.fD=new Map,this.AD=i,this.gD=i.createProgram(),this.pD=`${t.cD()} vertex`,this.vD=`${e.cD()} fragment`,i.attachShader(this.gD,t.shader),i.attachShader(this.gD,e.shader),i.bindAttribLocation(this.gD,0,"aPos"),i.linkProgram(this.gD),i.deleteShader(t.shader),i.deleteShader(e.shader),this.allAttributeNames=t.info.allAttributeNames,this.allUniformNames=Array.from(new Set(t.info.allUniformNames.concat(e.info.allUniformNames)).values()),this.vertexSharedRemovedVariables=t.info.removedVariableNames,this.fragmentSharedRemovedVariables=e.info.removedVariableNames}get vertexShaderSrc(){return""}get fragmentShaderSrc(){return""}yD(t){return _e(0,(()=>ze()))}mD(t){const e=this.xD(t);if(void 0===e)throw this.yD(`Could not get ${t} uniform from ${this.pD} and ${this.vD} shaders.`);return e}xD(t){const e=this.dD.get(t);if(e)return e;const i=this.AD.getUniformLocation(this.gD,t);return i?(this.dD.set(t,i),i):void 0}SD(t){const e=this.bD(t);if(void 0===e)throw this.yD(`Could not get ${t} attribute from ${this.pD} and ${this.vD} shaders.`);return e}bD(t){const e=this.fD.get(t);if(e||0===e)return e;const i=this.AD.getAttribLocation(this.gD,t);return i>=0?(this.fD.set(t,i),i):void 0}U(){this.AD.deleteProgram(this.gD)}}const Jy=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/,qy=t=>{let e;try{e=Wt.getComputedStyle(t)}catch(t){return null}return e};function Zy(t){const e=qy(t);return!!e&&("fixed"===e.position||!!("auto"!==e.zIndex&&"static"!==e.position||function(t){const e=qy(ip(t)),i=e?e.display:"auto";return"flex"===i||"inline-flex"===i}(t))||+e.opacity<1||"transform"in e&&"none"!==e.transform||"webkitTransform"in e&&"none"!==e.webkitTransform||"mixBlendMode"in e&&"normal"!==e.mixBlendMode||"filter"in e&&"none"!==e.filter||"webkitFilter"in e&&"none"!==e.webkitFilter||"isolation"in e&&"isolate"===e.isolation||!!Jy.test(e.willChange)||"touch"===e.webkitOverflowScrolling)}function Ky(t){let e=t.length;for(;e--;)if(Zy(t[e]))return t[e];return null}function tp(t){var e;return t&&Number((null===(e=qy(t))||void 0===e?void 0:e.zIndex)||0)||0}function ep(t){const e=[];for(;t;)e.push(t),t=ip(t);return e}function ip(t){var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.host)||t.parentNode}const sp=t=>t&&"resize"in t;class rp extends jg{constructor(t){if(super(),this.MD=new Map,this.wD=new Map,this._D=new Map,this.CD=!0,this.kD=null,this.TD=null,this.FD=null,this.ID=null,this.PD=0,this.LD=0,this.BD=0,this.DD=!1,this.ED=!0,this.ft=!1,this.RD=De(`chart-engine-${(new Date).getTime()}${Math.trunc(1e6*Math.random()).toString()}`),this.H={x:100,y:100},this.zD=()=>{this.OD&&clearTimeout(this.OD),this.OD=setTimeout((()=>this.Wo()),12)},this.VD=t=>{const e=t.intersectionRatio>0,i=t.target.getAttribute("data-lcjs-engine-id");if(i){const t=this.MD.get(i);if(t){const s=t.ND();t.GD(e),e?this.wD.set(i,t):this.wD.delete(i),s!==e&&t.Bs()}}},this.UD=(t,e,i,s,r)=>{const n=r[0],o=this.gl;if(o.bindFramebuffer(null==o?void 0:o.FRAMEBUFFER,null),o.useProgram(this.TD.gD),o.clear(o.COLOR_BUFFER_BIT),n.Pn.getBoundingClientRect()){const t=n.$D();o.viewport(0,0,t.x,t.y),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,n.YD),o.uniform1i(this.PD,0),o.uniformMatrix4fv(this.LD,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o.bindBuffer(o.ARRAY_BUFFER,this.FD),o.enableVertexAttribArray(0),o.vertexAttribPointer(this.BD,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,6),o.bindFramebuffer(o.FRAMEBUFFER,null),n.HD&&(n.HD.clearRect(0,0,n.HD.canvas.width,n.HD.canvas.height),n.HD.drawImage(this.XD,0,this.XD.height-t.y,t.x,t.y,0,0,n.HD.canvas.width,n.HD.canvas.height))}},this.WD=(t,e,i,s,r)=>{const n=this.gl;n.bindFramebuffer(null==n?void 0:n.FRAMEBUFFER,null),n.useProgram(this.TD.gD),n.clear(n.COLOR_BUFFER_BIT),r.forEach((i=>{const r=i.Pn.getBoundingClientRect();if(r){const i=r.right-r.left,o=r.bottom-r.top,h=r.left,a=s-r.bottom;n.viewport(h*this.jD-t*this.jD,a*this.jD+e*this.jD,i*this.jD,o*this.jD)}n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.YD),n.uniform1i(this.PD,0),n.uniformMatrix4fv(this.LD,!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),n.bindBuffer(n.ARRAY_BUFFER,this.FD),n.enableVertexAttribArray(0),n.vertexAttribPointer(this.BD,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6)})),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.ZD=(t,e,i,s,r)=>{const n=r[0],o=this.gl2.ctx;o.bindFramebuffer(o.DRAW_FRAMEBUFFER,null),o.clear(o.COLOR_BUFFER_BIT);const h=n.$D();o.bindFramebuffer(o.READ_FRAMEBUFFER,n.QD[1]),o.blitFramebuffer(0,0,h.x,h.y,0,this.XD.height-h.y,h.x,this.XD.height,o.COLOR_BUFFER_BIT,o.LINEAR),n.HD&&(n.HD.clearRect(0,0,n.HD.canvas.width,n.HD.canvas.height),n.HD.drawImage(this.XD,0,0)),o.bindFramebuffer(o.FRAMEBUFFER,null)},this.JD=(t,e,i,s,r)=>{const n=this.gl2.ctx;n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.clear(n.COLOR_BUFFER_BIT),r.forEach((i=>{const r=i.Pn.getBoundingClientRect();if(r){const o=r.right-r.left,h=r.bottom-r.top,a=r.left,l=s-r.bottom,c=i.$D();n.bindFramebuffer(n.READ_FRAMEBUFFER,i.QD[1]),n.blitFramebuffer(0,0,c.x,c.y,a*this.jD-t*this.jD,l*this.jD+e*this.jD,(a-t+o)*this.jD,(l+e+h)*this.jD,n.COLOR_BUFFER_BIT,n.LINEAR)}})),n.bindFramebuffer(n.FRAMEBUFFER,null)},this.OD=void 0,this.Ca=t,!Wt.requestAnimationFrame||!Wt.cancelAnimationFrame)throw new Error("LightningChart JS depends on requestAnimationFrame. Make sure to load a polyfill in older browsers.");let e=1;if(t&&t.KD)e=!0===t.KD?Wt.devicePixelRatio||1:t.KD||1;else{const t=Wt.document.head.querySelector('meta[name="viewport"]');t&&t.content.includes("width=device-width")&&(e=Wt.devicePixelRatio||1)}this.jD=e,t.ka=!0===t.ka,this.ED=!1!==t.qD,this.tE=!1!==t.iE,this.sE=t.sE||!1;let i=!1;if(t.XD)if("string"==typeof t.XD){const e=Wt.document.getElementById(t.XD);if(!e)throw new Error(`Canvas "${t.XD}" doesn't exist.`);this.XD=e,i=!0}else this.XD=t.XD,i=!0;else this.XD=Wt.document.createElement("canvas");const s={preserveDrawingBuffer:!0,alpha:!0,antialias:!1};if(2!==t.eE&&t.eE){const e=this.XD.getContext("webgl",{...s,antialias:!!t.qD})||this.XD.getContext("experimental-webgl",{...s,antialias:!!t.qD});this.gl=e,this.hE=!1}else{const t=this.XD.getContext("webgl2",s);this.gl2={ctx:t},this.gl=t,this.hE=!0}if(!this.gl)throw new _t("No WebGL context available."+((null==t?void 0:t.eE)?`\nSelected explicit target: WebGL ${t.eE}`:""));const r=[];if(this.rE={WEBGL_lose_context:this.gl.getExtension("WEBGL_lose_context")},Object.keys(this.rE).forEach((t=>{null===this.rE[t]&&r.push(t)})),this.hE)this.nE=!0;else{const t={ANGLE_instanced_arrays:this.gl.getExtension("ANGLE_instanced_arrays"),EXT_blend_minmax:this.gl.getExtension("EXT_blend_minmax"),OES_element_index_uint:this.gl.getExtension("OES_element_index_uint"),OES_standard_derivatives:this.gl.getExtension("OES_standard_derivatives"),OES_vertex_array_object:this.gl.getExtension("OES_vertex_array_object")};t.OES_standard_derivatives||(this.CD=!1),Object.keys(t).forEach((e=>{null===t[e]&&r.push(e)}));const e={OES_texture_float:this.gl.getExtension("OES_texture_float")};this.nE=!!e.OES_texture_float,this.gl1={ctx:this.gl,rE:t,optional:e}}const n=r;if(n.length>0&&!1!==t.ka){const t=Wt.document.createElement("div");t.innerText="LightningChart JS: Some features might not work properly, due to missing WebGL features.",t.style.cssText="position:absolute;top:0;background:red;width:100%;padding:10px;text-align:center;color:white;z-index:1;";const e=Wt.document.createElement("button");e.innerText="X",e.addEventListener("click",(()=>{t.parentElement&&t.parentElement.removeChild(t)})),Wt.document.body.appendChild(t),t.appendChild(e),Wt.console.warn("LightningChart JS - Following WebGL extensions could not be loaded:",n.join(", "))}if(this.oE=this.sE?this.aE(this.hE?this.ZD.bind(this):this.UD.bind(this)).bind(this):this.lE(this.hE?this.JD.bind(this):this.WD.bind(this)).bind(this),Wt.ResizeObserver){const t=t=>{for(const e of t)e.target===this.XD&&this.cE()};this.Pa=new Wt.ResizeObserver(t.bind(this)),this.Pa.observe(this.XD)}if(this.uE=((t,e)=>{const i=t,s=new Map,r=new Map,n=new Map,o={totalMs:0,vertexShaders:0,fragmentShaders:0,programs:0},h=(t,i,s=[])=>{const r=[],n=[],o={allAttributeNames:Array.from(t.matchAll(/attribute\s[^\s]*\s(.*);/g)).map((t=>t[1])),allUniformNames:Array.from(t.matchAll(/uniform\s[^\s]*\s(.*);/g)).map((t=>t[1])),allVaryingNames:Array.from(t.matchAll(/varying\s[^\s]*\s(.*);/g)).map((t=>t[1])),removedVariableNames:[]};if(e){const e=t.match(/#extension.*/g);e&&n.push(...e),t=t.replace(/#extension.*/g,"")}else if(r.push("#version 300 es"),(t=(t=(t=t.replace(/#extension.*/g,"")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).includes("usampler2D")&&r.push("precision highp usampler2D;"),"vertex"===i)t=t.replace(/varying/g,"out");else{t=t.replace(/varying/g,"in");const e=s.find((t=>"fragOutput"===t.type));t=(t=e?`out ${e.fragOutput} fragOutput;\n${t}`:`out vec4 fragOutput;\n${t}`).replace(/gl_FragColor/g,"fragOutput")}return n&&r.push(...n),r.push("precision highp float;"),r.push("precision highp int;"),{source:t=`${r.join("\n")}\n${t}`,info:o}};return(...t)=>{const a=e?"webgl1":"webgl2";let l,c,u,d,f,g,y,p,m;try{const e=Wt.performance.now();l=t.filter((t=>!1!==t&&void 0!==t)),c=((t,e)=>{const i=t.map((i=>i.apply(t,e))),s=i.map((t=>t.idVertex)).filter((t=>void 0!==t)).sort().join(" "),r=i.map((t=>t.idFragment)).filter((t=>void 0!==t)).sort().join(" "),n=`vert: ${s} frag: ${r}`;let o,h=!1,a=!1;const l=[];let c;const u=[],d=[];if(i.forEach((t=>{if(t.defaultVertexShader&&(h||(o=t.defaultVertexShader)),t.vertexShader){if(o&&h&&o!==t.vertexShader)throw new Dy(`Conflicting vertex shader templates ${o} vs ${t.vertexShader}`,n,t);o=t.vertexShader,h=!0}if(t.vertexShaderModifiers)for(const e of t.vertexShaderModifiers)void 0!==e&&!1!==e&&l.push(e);if(t.defaultFragmentShader&&(a||(c=t.defaultFragmentShader)),t.fragmentShader){if(c&&a&&c!==t.fragmentShader)throw new Dy(`Conflicting fragment shader templates ${c} vs ${t.fragmentShader}`,n,t);c=t.fragmentShader,a=!0}if(t.fragmentShaderModifiers)for(const e of t.fragmentShaderModifiers)void 0!==e&&!1!==e&&u.push(e);t.hints&&t.hints.forEach((t=>{t&&d.push(t)}))})),!!t.find((t=>{var e;return null===(e=t.eD)||void 0===e?void 0:e.aD}))&&("webgl1"===e?l.push(by("attribute float aInstanceID"),My("int iInstance = int(aInstanceID)")):l.push(My("int iInstance = gl_InstanceID"))),!!t.find((t=>{var e;return null===(e=t.eD)||void 0===e?void 0:e.lD}))&&("webgl1"===e?l.push(by("attribute float aVertexID"),My("int iVertex = int(aVertexID)")):l.push(My("int iVertex = gl_VertexID"))),!o)throw new Dy("No vertex shader template defined",n);if(!c)throw new Dy("Fragment shader not defined",n);return{id:n,vertexShader:{id:s,template:o,modifiers:l},fragmentShader:{id:r,template:c,modifiers:u},hints:d}})(l,a);const x=n.get(c.id);if(u="new",x)return u="existing",g=x.vertexShaderSrc,y=x.fragmentShaderSrc,x;const S=c.vertexShader.id;let v=s.get(S);if(v)g=v.src,d="existing";else{d="new";const t=new xy(c.vertexShader.modifiers).build(Gy[c.vertexShader.template]),{source:e,info:r}=h(t,"vertex");g=e,p=r,v=new jy(S,e,i,r),s.set(S,v),o.vertexShaders+=1}const A=c.fragmentShader;let b;const C=A.id;if(b=r.get(C),b)y=b.src,f="existing";else{f="new";const t=Yy[A.template],e=new xy([...A.modifiers]).build(t),{source:s,info:n}=h(e,"fragment",c.hints);y=s,m=n,b=new $y(C,s,i,n),r.set(C,b),o.fragmentShaders+=1}const M=new Qy(v,b,i,c);return n.set(c.id,M),o.programs+=1,o.totalMs+=Wt.performance.now()-e,M}catch(t){throw _e(0,(()=>{const t="Unexpected LightningChart JS rendering error.\nThis can mean a bug in the library, or that it is simply used in unsupported manner (passing wrong type to method, using disposed component, etc).";return Wt.alert(t),new Error(t)}))}}})(this.gl,!this.hE),this.tD=(()=>{const t=Wt.document.createElement("canvas"),e=t.getContext("2d",{willReadFrequently:!0});if(!e)throw new _t("Failed to get Text canvas rendering context");return e.fillStyle="#fff",(i,s,r,n)=>{const o=`${s.style} ${s.weight} ${s.size*r}px ${s.family}`;e.font=o,e.textBaseline="alphabetic",e.textAlign="left";const h=e.measureText(i);if(0===h.width)return;const a=void 0!==h.actualBoundingBoxLeft&&void 0!==h.actualBoundingBoxRight?Math.ceil(h.actualBoundingBoxLeft+h.actualBoundingBoxRight):Math.ceil(h.width),c=h.width,u=Math.round(s.size*r),d=void 0!==h.actualBoundingBoxLeft?h.actualBoundingBoxLeft:0;t.width=a>0?a:c,t.height=2*u,e.font=o,e.textBaseline="alphabetic",e.textAlign="left",n?(e.clearRect(0,0,t.width,t.height),e.fillStyle="#fff"):(e.fillStyle="rgba(255,255,255,0)",e.fillRect(0,0,t.width,t.height),e.fillStyle="#000"),e.fillText(i,d,u);const f=e.getImageData(0,0,t.width,t.height);let g=0,y=0;const p=f.width;for(let t=0;t<f.height;t+=1){for(let e=0;e<p;e+=1)if(0!==f.data[t*p*4+4*e+3]){g=t;break}if(0!==g)break}for(let t=f.height-1;t>=0;t-=1){for(let e=0;e<p;e+=1)if(0!==f.data[t*p*4+4*e+3]){y=t;break}if(0!==y)break}const m=e.canvas.height/2-g,x=y-g+1,S=p,v=new Uint8ClampedArray(S*x*1);for(let t=0;t<x;t+=1)for(let e=0;e<S;e+=1)v[1*t*S+1*e+0]=f.data[(t+g)*S*4+4*e+3];return[v,{advance:c,offsetX:d,baseline:m,glyph:i,size:l(S,x)}]}})(),t.dE||(this.sE?this.XD.style.display="none":(this.XD.style.position="absolute",this.XD.style.top="0",this.XD.style.left="0",this.XD.style.right="0",this.XD.style.bottom="0",this.XD.style.width="100%",this.XD.style.height="100%",this.XD.style.boxSizing="content-box",this.XD.style.display="block",this.XD.style.pointerEvents="none")),this.XD.classList.add("lcjs-canvas"),t.fE&&this.XD.setAttribute("data-lcjs-id",t.fE),i||Wt.document.body.appendChild(this.XD),Wt.IntersectionObserver&&(this.AE=new Wt.IntersectionObserver((t=>{for(let e=0;e<t.length;e+=1){const i=t[e];this.VD(i)}}),{threshold:Array.from(Array(100)).map(((t,e)=>e/100))})),Wt.addEventListener("resize",this.zD,{passive:!0}),!this.hE){if(this.TD=this.uE(Hy["2DCompose"],Hy.Color({dataType:"texture-coord-calc-gpu"}),Hy.VertexLocation({axisWorldTranslation:"matrix4",normalSource:void 0,coordType:"vec4"})),!this.TD.gD)throw new _t("Unable to setup composition shader!");const t=this.gl,e=t.getUniformLocation(this.TD.gD,"uColorTexture");if(!e)throw new _t("Unable to setup composition shader! Failed to find uColorTexture");const i=t.getUniformLocation(this.TD.gD,"uMatrix");if(!i)throw new _t("Unable to setup composition shader! Failed to find uMatrix");this.PD=e,this.LD=i,this.BD=t.getAttribLocation(this.TD.gD,"aPos"),this.FD=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.FD),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.ID=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.ID),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null)}}aE(t){return e=>{this.kD=null;const i=this.gl.canvas,s=Array.from(this.wD.values());this.DD=!1,s.forEach((s=>{const r=s.$D();(this.H.x<r.x||this.H.y<r.y)&&(this.H.x=Math.max(this.H.x,r.x),this.H.y=Math.max(this.H.y,r.y),i instanceof HTMLCanvasElement&&(i.width=this.H.x,i.height=this.H.y)),s.qo&&s.gE(e),t(0,0,0,0,[s])})),this.DD&&this.cE()}}lE(t){return e=>{this.kD=null,"style"in this.gl.canvas&&!this.Ca.pE&&(this.gl.canvas.style.transform=`translateX(${window.scrollX}px) translateY(${window.scrollY}px)`);const i=this.gl.canvas,s=this.XD.clientHeight,r=this.XD.clientWidth;let n=0,o=0;if(i instanceof HTMLCanvasElement){i.width===r*this.jD&&i.height===s*this.jD||(i.width=r*this.jD,i.height=s*this.jD);const t=i.getBoundingClientRect();n=t.x,o=t.y}const h=Array.from(this.wD.values());this.DD=!1,h.sort(((t,e)=>t.vE()-e.vE())).forEach((t=>{t.qo&&t.gE(e)})),t(n,o,r,s,h),this.DD&&this.cE()}}cE(t){return sp(this.gl)||(!this.DD&&t&&(this.DD=!0),this.kD||this.ft||(this.kD=Wt.requestAnimationFrame(this.oE))),this}yE(t){const e=this.RD();return t.Pn.setAttribute("data-lcjs-engine-id",e),this.MD.set(e,t),t.mE(this.MD.size-1),t.GD(!0),this.wD.set(e,t),this.AE&&this.AE.observe(t.Pn),this.OD&&clearTimeout(this.OD),this.OD=setTimeout((()=>this.Wo()),0),this}xE(t){const e=t.Pn.getAttribute("data-lcjs-engine-id");return e?(this.MD.delete(e),this.wD.delete(e),this.AE&&this.AE.unobserve(t.Pn),t.Pn.removeAttribute("data-lcjs-engine-id"),this):this}Wo(){if(this.AE){const t=this.AE.takeRecords();for(let e=0;e<t.length;e+=1){const i=t[e];this.VD(i)}}return!this.sE&&this.tE&&Array.from(this.MD.values()).sort(((t,e)=>function(t,e){if(t===e)return 0;const i={a:ep(t),b:ep(e)};let s;for(;i.a[i.a.length-1]===i.b[i.b.length-1];)t=i.a.pop(),e=i.b.pop(),s=t;const r=tp(Ky(i.a)),n=tp(Ky(i.b));if(r===n&&s){const t=s.childNodes,e={a:i.a[i.a.length-1],b:i.b[i.b.length-1]};let r=t.length;for(;r--;){const i=t[r];if(i===e.a)return 1;if(i===e.b)return-1}}return Math.sign(r-n)}(t.Pn,e.Pn))).forEach(((t,e)=>t.mE(e))),this.cE(!0),this}mB(){return this.cE(),this}SE(){this.ft||this.MD.forEach((t=>t.QA.layout()))}U(){var t;if(this.ft)return;this.ft=!0,super.U(),this.kD&&(Wt.cancelAnimationFrame(this.kD),this.kD=null),this.DD=!1,this.Pa&&(this.Pa.disconnect(),this.Pa=void 0),this.AE&&(this.AE.disconnect(),this.AE=void 0),Wt.removeEventListener("resize",this.zD),this.zD=void 0,this.MD.forEach((t=>{t.U()})),this.MD.clear(),Array.from(this._D.values()).forEach((t=>{t.Du(!0)})),this._D.clear();const e=this.gl;e.deleteBuffer(this.FD),e.deleteBuffer(this.ID),this.XD&&!this.Ca.XD?(this.XD.width=1,this.XD.height=1,null===(t=this.XD.parentElement)||void 0===t||t.removeChild(this.XD),this.XD=void 0):this.XD=void 0,this.uE=void 0,this.tD=void 0,this.oE=()=>{},this.rE.WEBGL_lose_context&&this.rE.WEBGL_lose_context.loseContext()}}const np=(t,e,i,s)=>r=>{const n={theme:Og,...i,...r},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new Xg(o.Ca,r,o,o.U.bind(o),n,h);return o.Ya((t=>a.Bu(t))).$a((()=>a.X())).Bs(),a},op=(t,e)=>{t.Ya((t=>{e.qe(t)})).$a((()=>e.X())).Bs()},hp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new Ia(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h);return op(o,a),a},ap=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new gd(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,r);return op(o,a),a},lp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new pf(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,r);return op(o,a),a},cp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new Bd(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,r);return op(o,a),a},up=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new(r&&r.type?r.type:xl)(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,void 0,r);return op(o,a),a},dp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new cg(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,void 0,r);return op(o,a),a},fp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new(r&&r.type?r.type:Ud)(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,void 0,r);return op(o,a),a},gp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new(r&&r.type?r.type:Kd)(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,void 0,r);return op(o,a),a},yp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new xc(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,r,void 0);return op(o,a),a},pp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new hc(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,void 0,r);return op(o,a),a},mp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new Lg(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,void 0);return op(o,a),a},xp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new qf(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,void 0,r);return op(o,a),a},Sp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new Ad(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,r);return op(o,a),a},vp=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e||s?Gg(o,s,null==i?void 0:i.licenseInformation):void 0,a=new ag(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,r);return op(o,a),a},Ap=(t,e,i,s)=>r=>{const n={...i,...r,theme:(null==r?void 0:r.theme)||Og},o=t(n),h=e?Gg(o,s):void 0,a=new mg(o.Ca,Sf(o,1).tT(0),rt,o.U.bind(o),h,void 0);return op(o,a),a},bp={translation:(t,e,i)=>[1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1],xRotation(t){const e=Math.cos(t),i=Math.sin(t);return[1,0,0,0,0,e,i,0,0,-i,e,0,0,0,0,1]},yRotation(t){const e=Math.cos(t),i=Math.sin(t);return[e,0,-i,0,0,1,0,0,i,0,e,0,0,0,0,1]},zRotation(t){const e=Math.cos(t),i=Math.sin(t);return[e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1]},scaling:(t,e,i)=>[t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1],translate:(t,e,i,s)=>bp.multiply(t,bp.translation(e,i,s)),xRotate:(t,e)=>bp.multiply(t,bp.xRotation(e)),yRotate:(t,e)=>bp.multiply(t,bp.yRotation(e)),zRotate:(t,e)=>bp.multiply(t,bp.zRotation(e)),rotateXYZ(t,e){let i=bp.xRotate(t,e.x);return i=bp.yRotate(i,e.y),i=bp.zRotate(i,e.z),i},scale:(t,e,i,s)=>bp.multiply(t,bp.scaling(e,i,s)),multiply(t,e){const i=e[0],s=e[1],r=e[2],n=e[3],o=e[4],h=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],f=e[11],g=e[12],y=e[13],p=e[14],m=e[15],x=t[0],S=t[1],v=t[2],A=t[3],b=t[4],C=t[5],M=t[6],T=t[7],E=t[8],w=t[9],B=t[10],k=t[11],R=t[12],F=t[13],I=t[14],O=t[15],L=[];return L[0]=i*x+s*b+r*E+n*R,L[1]=i*S+s*C+r*w+n*F,L[2]=i*v+s*M+r*B+n*I,L[3]=i*A+s*T+r*k+n*O,L[4]=o*x+h*b+a*E+l*R,L[5]=o*S+h*C+a*w+l*F,L[6]=o*v+h*M+a*B+l*I,L[7]=o*A+h*T+a*k+l*O,L[8]=c*x+u*b+d*E+f*R,L[9]=c*S+u*C+d*w+f*F,L[10]=c*v+u*M+d*B+f*I,L[11]=c*A+u*T+d*k+f*O,L[12]=g*x+y*b+p*E+m*R,L[13]=g*S+y*C+p*w+m*F,L[14]=g*v+y*M+p*B+m*I,L[15]=g*A+y*T+p*k+m*O,L},inverse(t){const e=[],i=t[0],s=t[1],r=t[2],n=t[3],o=t[4],h=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],f=t[11],g=t[12],y=t[13],p=t[14],m=t[15],x=d*m,S=p*f,v=a*m,A=p*l,b=a*f,C=d*l,M=r*m,T=p*n,E=r*f,w=d*n,B=r*l,k=a*n,R=c*y,F=g*u,I=o*y,O=g*h,L=o*u,D=c*h,P=i*y,V=g*s,_=i*u,z=c*s,U=i*h,N=o*s,X=x*h+A*u+b*y-(S*h+v*u+C*y),H=S*s+M*u+w*y-(x*s+T*u+E*y),G=v*s+T*h+B*y-(A*s+M*h+k*y),Y=C*s+E*h+k*u-(b*s+w*h+B*u),W=1/(i*X+o*H+c*G+g*Y);return e[0]=W*X,e[1]=W*H,e[2]=W*G,e[3]=W*Y,e[4]=W*(S*o+v*c+C*g-(x*o+A*c+b*g)),e[5]=W*(x*i+T*c+E*g-(S*i+M*c+w*g)),e[6]=W*(A*i+M*o+k*g-(v*i+T*o+B*g)),e[7]=W*(b*i+w*o+B*c-(C*i+E*o+k*c)),e[8]=W*(R*l+O*f+L*m-(F*l+I*f+D*m)),e[9]=W*(F*n+P*f+z*m-(R*n+V*f+_*m)),e[10]=W*(I*n+V*l+U*m-(O*n+P*l+N*m)),e[11]=W*(D*n+_*l+N*f-(L*n+z*l+U*f)),e[12]=W*(I*d+D*p+F*a-(L*p+R*a+O*d)),e[13]=W*(_*p+R*r+V*d-(P*d+z*p+F*r)),e[14]=W*(P*a+N*p+O*r-(U*p+I*r+V*a)),e[15]=W*(U*d+L*r+z*a-(_*a+N*d+D*r)),e},projectionPerspective(t,e,i,s){const r=1/Math.tan(t*Math.PI/180/2),n=1/(i-s);return[r/e,0,0,0,0,r,0,0,0,0,(i+s)*n,-1,0,0,i*s*n*2,0]},projectionOrthographic:(t,e,i,s,r,n)=>[2/(e-t),0,0,0,0,2/(s-i),0,0,0,0,2/(r-n),0,(t+e)/(t-e),(i+s)/(i-s),(r+n)/(r-n),1],quaternionToRotationMatrix(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]),i=[t[0]/e,t[1]/e,t[2]/e,t[3]/e],s=i[0]+i[0],r=i[1]+i[1],n=i[2]+i[2],o=i[0]*s,h=i[0]*r,a=i[0]*n,l=i[1]*r,c=i[1]*n,u=i[2]*n,d=i[3]*s,f=i[3]*r,g=i[3]*n;return[1-(l+u),h-g,a+f,0,h+g,1-(o+u),c-d,0,a-f,c+d,1-(o+l),0,0,0,0,1]}};function Cp(t,i,s,r,n,o){let h=i.x.ot(t.max.x),a=i.x.ot(t.min.x),l=i.y.ot(t.max.y),c=i.y.ot(t.min.y),u=h-a,d=l-c;if(u<1){const t=(a+h)/2;a=t-.5,h=t+.5,u=1}if(d<1){const t=(c+l)/2;c=t-.5,l=t+.5,d=1}const f=u/d,g=u*s.x,y=d*s.y,p=u-g,m=d-y,x=g>p?[p,g]:[g,p],S=y>m?[m,y]:[y,m];let v,A,b=1,C=1;switch(r){default:case e.GradientExtent.closestSide:if(v=x[0]/u,A=S[0]/d,n===e.GradientShape.circle){const t=Math.min(v*f,A);b=t,C=t}else b=v*f,C=A;break;case e.GradientExtent.farthestSide:if(v=x[1]/u,A=S[1]/d,n===e.GradientShape.circle){const t=Math.max(v*f,A);b=t,C=t}else b=v*f,C=A;break;case e.GradientExtent.closestCorner:if(A=S[0]/d,n===e.GradientShape.circle){v=x[0]/u*f;const t=Math.sqrt(v*v+A*A);b=t,C=t}else{v=x[0]/u;const t=Math.sqrt(v*v+A*A);b=t*f,C=t}break;case e.GradientExtent.farthestCorner:if(A=S[1]/d,n===e.GradientShape.circle){v=x[1]/u*f;const t=Math.sqrt(v*v+A*A);b=t,C=t}else{v=x[1]/u;const t=Math.sqrt(v*v+A*A);b=t*f,C=t}}return{bounds:[a*o,c*o,u*o,d*o],center:[s.x*f,s.y],distance:[Math.max(b,1e-4),Math.max(C,1e-4)],aspectRatio:f}}function Mp(t,e,i,s){const r=e.x.ot(t.max.x),n=e.x.ot(t.min.x),o=e.y.ot(t.max.y),h=e.y.ot(t.min.y),a=r-n,c=o-h,u=Math.abs(a*Math.sin(i))+Math.abs(c*Math.cos(i)),d=l(a/2-Math.sin(i)*(u/2),c/2-Math.cos(i)*(u/2)),f=l(a/2+Math.sin(i)*(u/2),c/2+Math.cos(i)*(u/2));return{bounds:[n*s,h*s,a*s,c*s],startPoint:[d.x*s,d.y*s],endPoint:[f.x*s,f.y*s]}}class Tp{constructor(t){this.OB=t}}class Ep{constructor(){this.bE=new Array,this.ME=t=>(this.bE.push(t),t),this.wE=this.ME(new Map),this._E=this.ME(new Map),this.CE=this.ME(new Map),this.kE=this.ME(new Map),this.TE=this.ME(new Map),this.FE=this.ME(new Map),this.IE=this.ME(new Map),this.PE=this.ME(new Map)}LE(){this.bE.forEach((t=>{t.forEach((t=>t.LE())),t.clear()}))}}const wp=(t,e,i=void 0)=>()=>{t.BE=e,i&&i()},Bp=(t,i,s,r,n)=>{const o=Math.min(s/t,r/i),h=t*o,a=i*o,l=s/h,c=r/a,u=h/s,d=a/r;let f=0,g=1,y=0,p=1;switch(n){case e.ImageFitMode.Fill:c<l?(f=0,g=1,y=.5+-u/2,p=.5+u/2):(y=0,p=1,f=.5+-d/2,g=.5+d/2);break;case e.ImageFitMode.Fit:c<l?(y=0,p=1,f=.5+-l/2,g=.5+l/2):(f=0,g=1,y=.5+-c/2,p=.5+c/2);break;case e.ImageFitMode.Center:{const e=s/t,n=r/i;f=.5+-e/2,g=.5+e/2,y=.5+-n/2,p=.5+n/2}break;case e.ImageFitMode.Tile:f=0,g=s/t,y=0,p=r/i;break;case e.ImageFitMode.Stretch:default:f=0,g=1,y=0,p=1}return new Float32Array([f,p,g,p,g,y,f,y])};class kp{constructor(t,e){if(this.DE=0,this.EE=0,this.RE=!1,this.BE=!1,this.zE=!1,this.OE=!1,this.VE=!1,this.NE=new Set,this.GE=new Set,this.js=e,this.AD=t,this.UE=null,this.RE=e instanceof Wt.HTMLVideoElement,this.js instanceof Wt.HTMLImageElement)this.js.addEventListener("load",(()=>{this.OE=!0,this.$E()})),this.js.addEventListener("error",(()=>{this.VE=!0})),this.js.complete&&(this.OE=!0,this.$E());else if(this.js instanceof Wt.HTMLVideoElement){const t=this;this.js.addEventListener("canplay",(function(){t.EE=this.videoHeight,t.DE=this.videoWidth,t.OE=!0,t.$E()}),!0),this.js.addEventListener("play",wp(this,!0,(()=>this.$E()))),this.js.addEventListener("playing",wp(this,!0,(()=>this.$E()))),this.js.addEventListener("pause",wp(this,!1)),this.js.addEventListener("ended",wp(this,!1)),this.js.readyState>=1&&(this.DE=this.js.videoWidth,this.EE=this.js.videoHeight,this.BE=!this.js.paused,this.OE=!0,this.$E())}else this.OE=!0,this.$E()}QB(t){0===this.GE.size&&this.OE&&this.$E(),this.GE.add(t)}JB(t){this.GE.delete(t),0===this.GE.size&&this.unbindResources()}YE(t){this.NE.add(t),this.zE&&(t(),this.HE(t))}HE(t){this.NE.delete(t)}$E(){if(this.VE||this.zE||!this.OE)return;const t=this.AD.gl;if(!this.UE&&this.js&&t){this.UE=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.UE),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const e=0,i=t.RGBA,s=t.RGBA,r=t.UNSIGNED_BYTE,n=this.js,o=this.DE>0?this.DE:n.width,h=this.EE>0?this.EE:n.height;t.texImage2D(t.TEXTURE_2D,e,i,s,r,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.DE=o,this.EE=h,t.bindTexture(t.TEXTURE_2D,null)}this.zE=!0,this.NE&&this.NE.forEach((t=>{t(),this.HE(t)}))}Dr(){const t=this.AD.gl;if(!this.VE&&this.zE&&this.UE){const e=0,i=t.RGBA,s=t.RGBA,r=t.UNSIGNED_BYTE,n=this.js;n&&(t.bindTexture(t.TEXTURE_2D,this.UE),t.texImage2D(t.TEXTURE_2D,e,i,s,r,n))}}XE(){return this.UE}unbindResources(){return this.zE&&(this.UE&&(this.AD.GB(this.UE),this.UE=null),this.zE=!1),this}}class Rp extends vt{constructor(t,e,i){super(t.St,e,i),this.Vv=!0,this.Fv={},this.Rv=p(_s),this.Hs=t,this.ct=t.ct}WE(){var t;return this.Rv.u&&this.Rv.T().type!==(null===(t=this.jE)||void 0===t?void 0:t.type)}Uv(t){return this.Vv=t,this}ZE(t){return this.Fv=t,this}}class Fp{constructor(t){this._R=[],this.OB=t}CR(t,e){((t,e,i,s)=>{const r=t.QE(),n=Math.round(Math.min(i.spread,10)*r),o=Math.round(Math.min(i.blur,10)*r),h=Math.round(i.offset.x*r),a=Math.round(i.offset.y*r),l=t.JE(),c=t.KE(),u=t.qE(),d=t.tR(),f=t.iR();t.sR("disabled"),t.Uv(!1),t.eR(!1);const g=t.St.jo.hE,y=e.hR(),p=n+o/2,m=((t,e,i,s)=>{const r=t.gl,n=t.QE(),o=t.rR();t.nR(r.FRAMEBUFFER,s.frameBuffer),r.bindRenderbuffer(r.RENDERBUFFER,s.depthBuffer),r.bindTexture(r.TEXTURE_2D,s.texture),r.clearDepth(1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);const h=s.sizeDpr;t.oR(0,0,h.x,h.y);const a=[],l=t.St.jo.hE;return e.forEach((e=>{let s;if(e instanceof lo){s=e.ls||e.Hs.pg();let t=!1;if(!s){const i=e.Hs.aR(e);i&&i.max.x-i.min.x>0&&i.max.y-i.min.y>0&&(s={x:i.min.x,y:i.min.y,width:i.max.x-i.min.x,height:i.max.y-i.min.y},t=!0)}s&&(s.width>0&&s.height>0?(t&&(s.x-=i.left/n,s.y-=i.top/n,s.width+=(i.left+i.right)/n,s.height+=(i.top+i.bottom)/n),a.push({x:s.x,y:s.y,width:s.width,height:s.height})):s=void 0)}else e instanceof Rp&&(s=e.Hs.jm());if(s){const e=s.x+(l?0:i.left),r=s.y+(l?0:i.bottom),o=Math.max(s.width-(l?0:i.left+i.right),0),h=Math.max(s.height-(l?0:i.bottom+i.top),0);t.lR(e*n,r*n,o*n,h*n)}else t.eR(!1);e.Bu(2,0)})),t.nR(r.FRAMEBUFFER,o),r.bindRenderbuffer(r.RENDERBUFFER,null),r.bindTexture(r.TEXTURE_2D,null),t.eR(!1),a})(t,s,{left:p+(h<0?-h:0),top:p+(a>0?a:0),right:p+(h>0?h:0),bottom:p+(a<0?-a:0)},y),x=y,S=n+o+5,v=((t,e,i,s)=>{const r=(t=>{const e=[];for(let i=0;i<t.length;i+=1){let s,r=t[i];do{const t=e.findIndex((t=>di(r,t)));s=t>=0?e[t]:void 0,s&&(e.splice(t,1),r=Ti(r,s))}while(s);e.push(r)}return e})(e.map((t=>{const e=t instanceof lo||t instanceof Rp?t.Hs.aR(t):li;if(Ue(e))return li;const r={min:{x:Math.max(e.min.x-i.left,0),y:Math.max(e.min.y-i.bottom,0)},max:{x:Math.min(e.max.x+i.right,s.x),y:Math.min(e.max.y+i.top,s.y)}};return r.max.x<=r.min.x||r.max.y<=r.min.y?li:r})).filter((t=>!Ue(t)))),n=6*r.length,o=new Float32Array(4*n);let h=0;return r.forEach((t=>{const e=Vi(t.min,s),i=Vi(t.max,s),r=e,n=i;o[h+0]=e.x,o[h+1]=e.y,o[h+2]=r.x,o[h+3]=r.y,o[h+4]=i.x,o[h+5]=e.y,o[h+6]=n.x,o[h+7]=r.y,o[h+8]=i.x,o[h+9]=i.y,o[h+10]=n.x,o[h+11]=n.y,o[h+12]=i.x,o[h+13]=i.y,o[h+14]=n.x,o[h+15]=n.y,o[h+16]=e.x,o[h+17]=i.y,o[h+18]=r.x,o[h+19]=n.y,o[h+20]=e.x,o[h+21]=e.y,o[h+22]=r.x,o[h+23]=r.y,h+=24})),{vertexBuffer:t.cR(o),vertexCount:n}})(t,s,{left:S+(h<0?-h:0),top:S+(a>0?a:0),right:S+(h>0?h:0),bottom:S+(a<0?-a:0)},e.uR()),A=e.hR(x),b=t.uE(Hy["2D"],Hy.Glow1D({spreadPx:n,blurPx:o,firstPass:!0}),Hy.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,e,i,s,r,n)=>{const o=t.gl,h=t.rR();t.nR(o.FRAMEBUFFER,i.frameBuffer),o.bindRenderbuffer(o.RENDERBUFFER,i.depthBuffer),o.bindTexture(o.TEXTURE_2D,i.texture),o.clearDepth(1),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),t.oR(0,0,i.sizeDpr.x,i.sizeDpr.y),t.dR(s,((h,a,l,c)=>(t.QB(s),n&&n(h),t.pR(h("uIsHighlighted"),0).xF(h("uHighlightColorOffset"),B).pR(h("uRenderEffectMask"),0).gR(h("uTexture"),e.texture,0).AR(c("uTextureSize"),[e.sizeDpr.x,e.sizeDpr.y]).AR(h("uScale"),i.uniforms.vR()).AR(h("uDisp"),i.uniforms.yR()).AR(h("uScaling"),[i.size.x,i.size.y]).AR(h("uTranslationAxis"),[0,0]).fR(r.vertexBuffer,void 0,{location:a("aPos"),size:2},{location:a("aTextureCoord"),size:2}).Pp(o.TRIANGLES,r.vertexCount,0),!0))),t.nR(o.FRAMEBUFFER,h),o.bindRenderbuffer(o.RENDERBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)})(t,x,A,b,v,((e,i,s,r)=>(t.AR(e("uOffsetPx"),[h+1,a+1]),!0))),t.eR(c),t.mR(f),g&&(((t,e)=>{if(void 0===e||e.length<1)return;const i=t.gl,s=6*e.length*2,r=[s];let n=0;for(let t=0;t<e.length;t+=1){const i=e[t];r[n+0]=i.x,r[n+1]=i.y,r[n+2]=i.x+i.width,r[n+3]=i.y,r[n+4]=i.x,r[n+5]=i.y+i.height,r[n+6]=i.x+i.width,r[n+7]=i.y,r[n+8]=i.x+i.width,r[n+9]=i.y+i.height,r[n+10]=i.x,r[n+11]=i.y+i.height,n+=12}const o=t.cR(r,!0),h={x:t.St.Mi().x,y:t.St.Mi().y},a=rt.d2({scaleXYConstructor:hs}).J(h).ts(0,h.x).ss(0,h.y),l=new Lp;l.xR(a);const c=t.uE(Hy["2D"],Hy.VertexLocation({scaling:{dataType:"uniform"},translation:void 0,axisWorldTranslation:"linear",normalSource:void 0}),Hy.Color({dataType:"uniform"}));t.SR(!0),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.stencilFunc(i.ALWAYS,1,255),i.stencilOp(i.KEEP,i.KEEP,i.REPLACE),i.stencilMask(255),i.colorMask(!1,!1,!1,!1),t.QB(c).MR(c.SD("aPos"),o).AR(c.mD("uDisp"),l.yR()).AR(c.mD("uScaling"),[1,1]).AR(c.mD("uScale"),l.vR()).bR(c.mD("uColor"),[1,1,1,1]).Pp(i.TRIANGLES,s/2),t.wR(o),i.colorMask(!0,!0,!0,!0)})(t,m),t.gl.stencilFunc(t.gl.EQUAL,1,255),t.gl.stencilOp(t.gl.KEEP,t.gl.KEEP,t.gl.KEEP),t.SR(!0));const C=t.uE(Hy["2D"],Hy.Glow1D({spreadPx:n,blurPx:o,firstPass:!1}),Hy.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:"linear",normalSource:void 0}));((t,e,i,s,r)=>{const n=t.gl,o={x:t.St.Mi().x,y:t.St.Mi().y};t.oR(0,0,o.x*t.QE(),o.y*t.QE());const h=rt.d2({scaleXYConstructor:hs}).J(o).ts(0,o.x).ss(0,o.y),a=new Lp;a.xR(h),t.dR(i,((h,l,c,u)=>(t.QB(i),r&&r(h),t.pR(h("uIsHighlighted"),0).xF(h("uHighlightColorOffset"),B).pR(h("uRenderEffectMask"),0).gR(h("uTexture"),e.texture,0).AR(u("uTextureSize"),[e.sizeDpr.x,e.sizeDpr.y]).AR(h("uScale"),a.vR()).AR(h("uDisp"),a.yR()).AR(h("uScaling"),[o.x,o.y]).AR(h("uTranslationAxis"),[0,0]).fR(s.vertexBuffer,void 0,{location:l("aPos"),size:2},{location:l("aTextureCoord"),size:2}).Pp(n.TRIANGLES,s.vertexCount,0),!0)))})(t,y,C,v,((e,s,r,n)=>(t.gR(e("uTextureFirstGlowPass"),A.texture,1).xF(e("uGlowColor"),i.color),!0))),t.oR(l.x,l.y,l.width,l.height),t.sR(u),t.Uv(d),t.wR(v.vertexBuffer),g&&t.SR(!1)})(this.OB,this,e,t)}uR(){const t=this.OB.St.Mi();return{x:Math.ceil(t.x),y:Math.ceil(t.y)}}hR(...t){const e=this._R,i=this.uR(),s={x:Math.ceil(i.x*this.OB.QE()),y:Math.ceil(i.y*this.OB.QE())},r=this.OB.gl,n=e.find((e=>!t.includes(e)));if(n)return n.sizeDpr.x===s.x&&n.sizeDpr.y===s.y||(n.size=i,n.sizeDpr=s,r.bindTexture(r.TEXTURE_2D,n.texture),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,s.x,s.y,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindRenderbuffer(r.RENDERBUFFER,n.depthBuffer),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,s.x,s.y),r.bindTexture(r.TEXTURE_2D,null),r.bindRenderbuffer(r.RENDERBUFFER,null),n.scale.J(i).ts(0,i.x).ss(0,i.y),n.uniforms.xR(n.scale)),n;const o=r.createTexture(),h=this.OB.kR(),a=this.OB.TR();r.bindTexture(r.TEXTURE_2D,o),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,s.x,s.y,0,r.RGBA,r.UNSIGNED_BYTE,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const l=this.OB.rR();this.OB.nR(r.FRAMEBUFFER,h),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,o,0),r.bindRenderbuffer(r.RENDERBUFFER,a),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,s.x,s.y),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,a),r.bindTexture(r.TEXTURE_2D,null),this.OB.nR(r.FRAMEBUFFER,l),r.bindRenderbuffer(r.RENDERBUFFER,null);const c=rt.d2({scaleXYConstructor:hs}).J(i).ts(0,i.x).ss(0,i.y),u=new Lp;u.xR(c);const d={size:i,sizeDpr:s,texture:o,frameBuffer:h,depthBuffer:a,scale:c,uniforms:u};return e.push(d),d}U(){[this._R].forEach((t=>{t.forEach((t=>{this.OB.FR(t.depthBuffer),this.OB.IR(t.frameBuffer),this.OB.GB(t.texture)})),t.length=0}))}}class Ip{constructor(t,i,s,r,n=!0){this.PR=new Ep,this.LR=new Map,this.BR=new Map,this.DR=[],this.KD=1,this.IS_MACHINE_LITTLE_ENDIAN=(()=>{const t=new Uint32Array([287454020]),e=new Uint8Array(t.buffer);return 68===e[0]||17!==e[0]&&(Wt.console.error("Unidentified machine endianness. Some features might behave unexpectedly."),!0)})(),this.Vv=!1,this.ER=!1,this.AR=(t,[e,i])=>(void 0===t||this.gl.uniform2f(t,e,i),this),this.RR=(t,[e,i])=>(void 0===t||this.gl.uniform2i(t,e,i),this),this.bR=(t,[e,i,s,r])=>(void 0===t||this.gl.uniform4f(t,e,i,s,r),this),this.zR=(t,[e,i,s])=>(void 0===t||this.gl.uniform3f(t,e,i,s),this),this.OR=(t,e)=>(void 0===t||this.gl.uniformMatrix3fv(t,!1,e),this),this.VR=(t,e)=>(void 0===t||this.gl.uniformMatrix4fv(t,!1,e),this),this.xF=(t,e)=>(void 0===t||this.gl.uniform4f(t,e.r,e.g,e.b,e.a),this),this.pR=(t,e)=>(void 0===t||this.gl.uniform1f(t,e),this),this.NR=(t,e)=>(this.gl.uniform1i(t,e),this),this.gR=(t,e,i)=>{if(void 0===t)return this;if(e){const s=this.gl.TEXTURE0+i;return this.gl.activeTexture(s),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(t,i),this}throw new _t("Could not bind a texture.")},this.GR=t=>(((t,i)=>{i===e.ImageFitMode.Tile?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE))})(this.gl,t),this),this.cR=(t,e=!1,i,s=Float32Array)=>{const r=t.length,n=this.UR(r,i);if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof s?t:new s(t),e?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),n)return n;throw new _t("Could not create vertex buffer")},this.$R=(t,e,i,s=Float32Array)=>{const r=i||this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r),e&&e.length===t?this.gl.bufferData(this.gl.ARRAY_BUFFER,e instanceof s?e:new s(e),this.gl.STATIC_DRAW):(this.gl.bufferData(this.gl.ARRAY_BUFFER,new s(t),this.gl.STATIC_DRAW),e&&this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,e instanceof s?e:new s(e))),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),r)return r;throw new _t("Could not create vertex buffer")},this.YR=(t,e,i,s=Float32Array)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,e*s.BYTES_PER_ELEMENT,i instanceof s?i:new s(i)),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.HR=(t,e,i,s,r)=>{if(s&&t&&(t.usedSize=0),!t){const t=e.length+i,s=new r(t);return s.set(e),{buffer:this.$R(t,s,void 0,r),dataCache:s,preallocSize:t,usedSize:e.length}}if(t.usedSize+e.length>t.preallocSize){const s=t.usedSize+e.length+i,n=new r(s);return n.set(t.dataCache),n.set(e,t.usedSize),{buffer:this.$R(s,n,t.buffer,r),dataCache:n,preallocSize:s,usedSize:t.usedSize+e.length}}return t.dataCache.set(e,t.usedSize),this.YR(t.buffer,t.usedSize,e,r),t.usedSize+=e.length,t},this.XR=(t,e,i=!1)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,i?this.gl.DYNAMIC_DRAW:this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null)},this.WR=(t,e)=>{const i=t.length,s=this.UR(i,e);if(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,s),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,t,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),s)return s;throw new _t("Could not create index buffer")},this.jR=t=>{const e=this.gl.createBuffer();if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,t instanceof Float32Array?t:new Float32Array(t),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),e)return e;throw new _t("Could not create float buffer")},this.MR=(t,e)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,2,this.gl.FLOAT,!1,0,0)),this),this.ZR=(t,e)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.vertexAttribPointer(t,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t)),this),this.fR=(t,e,...i)=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t);const s=i.length;let r=0;for(let t=0;t<s;t+=1)r+=i[t].size;for(let t=0;t<s;t+=1){const e=i[t].location;void 0!==e&&e>-1&&this.gl.enableVertexAttribArray(e)}let n=0;for(let t=0;t<s;t+=1){const e=i[t];void 0!==e.location&&e.location>-1&&this.gl.vertexAttribPointer(e.location,e.size,this.gl.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),n+=e.size}if(void 0!==e)for(let t=0;t<s;t+=1){const s=i[t].location;void 0!==s&&s>-1&&this.QR(s,e)}return this},this.JR=(...t)=>{const e=t.length;for(let i=0;i<e;i+=1){const e=t[i];0!==e&&e>-1&&this.gl.disableVertexAttribArray(e)}return this},this.KR=(t,e)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,0,0)),this),this.qR=(t,e,i)=>(void 0===t||(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(t),void 0!==i&&this.QR(t,i)),this),this.tz=t=>(this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this),this.iz=null,this.Pp=(t,e,i=0)=>(e>0&&this.gl.drawArrays(t,i,e),this),this.sz=(t,e=this.gl.TRIANGLES,i=0,s=this.gl.UNSIGNED_SHORT)=>(t>0&&this.gl.drawElements(e,t,s,i),this),this.ez=(t,e,i,s)=>{if(s>0&&(this.gl2&&this.gl2.ctx.drawArraysInstanced(t,e,i,s),this.gl1)){if(!this.gl1.rE.ANGLE_instanced_arrays)return Wt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.rE.ANGLE_instanced_arrays.drawArraysInstancedANGLE(t,e,i,s)}return this},this.hz=(t,e,i,s,r=this.gl.UNSIGNED_SHORT)=>{if(s>0&&(this.gl2&&this.gl2.ctx.drawElementsInstanced(t,e,r,i,s),this.gl1)){if(!this.gl1.rE.ANGLE_instanced_arrays)return Wt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.rE.ANGLE_instanced_arrays.drawElementsInstancedANGLE(t,e,r,i,s)}return this},this.QR=(t,e)=>{if(t>-1&&(this.gl2&&this.gl2.ctx.vertexAttribDivisor(t,e),this.gl1)){if(!this.gl1.rE.ANGLE_instanced_arrays)return Wt.console.warn("The browser does not support REQUIRED WebGL 1 extension: ANGLE_instanced_arrays.\nThis application will NOT work properly!"),this;this.gl1.rE.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(t,e)}return this},this.rz=(t,e,i,s=0)=>{const r=this.gl.TEXTURE0+s;this.gl.activeTexture(r);const n=this.rR();this.nR(this.gl.FRAMEBUFFER,e),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,i,0);const o=this.KE();o&&this.eR(!1),t(),o&&this.eR(!0),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.nR(this.gl.FRAMEBUFFER,n)},this.ii=()=>(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this),this.nz=t=>(this.gl.clearColor(t.r,t.g,t.b,t.a),this),this.QB=t=>(this.gl.useProgram(t.gD),this),this.oz=!1,this.az=[],this.St=t,this.jA=i,this.St=t,this.gl=s.ctx,this.lz=s.antialias,this.cz=!!this.St.jo.CD&&s.lineAntialias,this.nE=this.St.jo.nE,this.uz=new Map,this.gl1=this.St.jo.gl1,this.gl2=this.St.jo.gl2,n&&(this.mR(!0),this.dz()),this.rE=this.St.jo.rE,this.NB=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.HB=this.fz(),this.uE=this.St.jo.uE,this.Az=new Pp(this),this.tD=this.St.jo.tD,this.gz=new Fp(this),this._D=this.St.jo._D,this.pz=this.cR([0,0,1,0,1,1,0,1]),this.vz=this.cR([0,0,1,0,0,1,0,1,1,0,1,1])}sR(t){return t!==this.yz&&(this.yz=t,"disabled"===t?this.gl.disable(this.gl.CULL_FACE):"cull-back"===t?(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK)):"cull-front"===t&&(this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.FRONT))),this}qE(){return this.yz||"disabled"}Uv(t){return t!==this.Vv&&(this.Vv=t,t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST)),this}SR(t){return t!==this.ER&&(this.ER=t,t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST)),this}tR(){return this.Vv}mz(t){return this.KD=t,this}QE(){return this.KD}UR(t,e){let i;if(e){const s=this.uz.get(e);s&&s.size>=t&&s.size-t<1e6?i=e:this.wR(e)}return i||(i=this.gl.createBuffer(),this.uz.set(i,{size:t})),i}xz(t,e=this.gl.RGBA,i=!1,s,r,n=!1,o=this.gl.UNSIGNED_BYTE,h=e){const a=this.gl.createTexture();if(!a)throw new _t("Couldn't reserve Texture.");return this.gl.bindTexture(this.gl.TEXTURE_2D,a),this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),t&&null===r?this.gl.texImage2D(this.gl.TEXTURE_2D,0,h,e,o,t):r&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,h,r.x,r.y,0,e,o,t),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),i?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.generateMipmap(this.gl.TEXTURE_2D)):this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,s?this.gl.NEAREST:this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),a}GB(t){this.gl.deleteTexture(t)}kR(){const t=this.gl.createFramebuffer();if(!t)throw new _t("Couldn't reserve Framebuffer.");return t}nR(t,e){this.iz=e,this.gl.bindFramebuffer(t,e)}rR(){return this.iz}IR(t){this.gl.deleteFramebuffer(t)}TR(){const t=this.gl.createRenderbuffer();if(!t)throw new _t("Couldn't reserve Render buffer.");return t}FR(t){this.gl.deleteRenderbuffer(t)}Sz(){const t=this.gl;switch(t.checkFramebufferStatus(t.FRAMEBUFFER)){default:case t.FRAMEBUFFER_COMPLETE:Wt.console.log("FRAMEBUFFER_COMPLETE");break;case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:Wt.console.log("FRAMEBUFFER_INCOMPLETE_ATTACHMENT");break;case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:Wt.console.log("FRAMEBUFFER_INCOMPLETE_DIMENSIONS");break;case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:Wt.console.log("FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT");break;case t.FRAMEBUFFER_UNSUPPORTED:Wt.console.log("FRAMEBUFFER_UNSUPPORTED")}}oR(t,e,i,s){return this.gl.viewport(t,e,i,s),this.bz&&t===this.bz.x&&e===this.bz.y&&i===this.bz.width&&s===this.bz.height||(this.bz={x:t,y:e,width:i,height:s}),this}JE(){return this.bz||{x:0,y:0,width:0,height:0}}lR(t,e,i,s){return this.eR(!0),this.gl.scissor(Math.max(t,0),Math.max(e,0),Math.max(i,0),Math.max(s,0)),this}eR(t){return t===this.Mz||(t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this.Mz=t),this}mR(t){return t!==this.oz&&(this.oz=t,t&&this.gl.enable(this.gl.BLEND),t||this.gl.disable(this.gl.BLEND)),this}iR(){return this.oz}dz(t,e,i,s){return t?(void 0!==t&&void 0!==e&&(void 0!==i&&void 0!==s?this.gl.blendFuncSeparate(t,e,i,s):this.gl.blendFunc(t,e)),this):(this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this)}KE(){return void 0!==this.Mz&&this.Mz}dR(t,e){const i=new Vp(this,t),s=e(i.uniform,i.attribute,i,i.uniformOptional);i.finish(s)}wR(t){t&&(this.gl.deleteBuffer(t),this.uz.delete(t))}wz(t,e,i){this.AR(t.uniform("uCenter"),e.center).AR(t.uniform("uDistance"),e.distance).bR(t.uniform("uBounds"),e.bounds).pR(t.uniform("uAspect"),e.aspectRatio);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let e=0;e<s.length;e+=1)this.xF(t.uniform(`color_${e}`),s[e].color).pR(t.uniform(`stop_${e}`),s[e].offset);return this}_z(t,e,i){this.AR(t.uniform("uStartPoint"),e.startPoint).AR(t.uniform("uEndPoint"),e.endPoint).bR(t.uniform("uBounds"),e.bounds);const s=i.getColorStops();if(s.length<2)throw new Error("Minimum two color stops required");for(let e=0;e<s.length;e+=1)this.xF(t.uniform(`color_${e}`),s[e].color).pR(t.uniform(`stop_${e}`),s[e].offset);return this}mr(t){const e=this._D.get(t);if(!e){const e=new ey(this);return this._D.set(t,e),e}return e}Cz(t){const e=this.LR.get(t);if(!e){const e=new kp(this,t);return this.kz(t,e),e}return e}kz(t,e){this.LR.set(t,e)}fz(){const t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,1,1,0,t.ALPHA,t.UNSIGNED_BYTE,new Uint8ClampedArray([0]));const i=0===t.getError();return i||!1!==this.jA.ka&&Wt.console.info("LightningChart JS - Uint8ClampedArray is not supported as texture data. The above WebGL error/warning is from the feature detection. There is nothing to worry about."),t.deleteTexture(e),i}Tz(t,e,i,s){if(i)this.fR(e,s,{location:t.attribute("aPos_highpart"),size:2},{location:t.attribute("aPos_lowpart"),size:2});else{const i=t.attribute("aPos");this.MR(i,e),void 0!==s&&this.QR(i,s)}return this}Fz(){this.rE.WEBGL_lose_context&&this.rE.WEBGL_lose_context.loseContext()}Iz(t){if(this.Pz&&this.Pz.bufferIdsCount>=t)return this.Pz.buffer;this.Pz&&(this.wR(this.Pz.buffer),this.Pz=void 0);const e=t,i=new Float32Array(e);for(let t=0;t<e;t+=1)i[t]=t;const s=this.cR(i);return this.Pz={buffer:s,bufferIdsCount:e},s}Lz(){return this.gl2?void 0:"attribute"}Bz(t,e){if("attribute"===this.Lz()){const i=this.Iz(e);this.fR(i,void 0,{location:t.attribute("aVertexID"),size:1})}return this}Dz(){return this.gl2?void 0:"attribute"}Ez(t,e){if("attribute"===this.Dz()){const i=this.Iz(e);this.fR(i,1,{location:t.attribute("aInstanceID"),size:1})}return this}Rz(t,e,i,s,r,n,o,h,a){const l=t.createBuffer();return this.az.push(l),t.bindFramebuffer(t.FRAMEBUFFER,e),t.bindBuffer(t.PIXEL_PACK_BUFFER,l),t.bufferData(t.PIXEL_PACK_BUFFER,a.byteLength,t.STREAM_READ),t.readPixels(i,s,r,n,o,h,0),t.bindBuffer(t.PIXEL_PACK_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),Op(t,(()=>this.St.ft),t.PIXEL_PACK_BUFFER,l,0,a).then((()=>a)).catch((t=>{throw t})).finally((()=>{t.deleteBuffer(l),this.az.splice(this.az.indexOf(l),1)}))}zz(t,e,i,s,r,n,o,h){const a=this.gl,l=this.rR();this.nR(a.FRAMEBUFFER,t),a.readPixels(e,i,s,r,n,o,h),this.nR(this.gl.FRAMEBUFFER,l)}Oz(t){const e=this.BR.get(t);if(!e){const e=this.gl.createTexture();if(!e)throw new _t("Couldn't reserve Texture.");this.gl.bindTexture(this.gl.TEXTURE_2D,e);const s=[];let r=255;for(let e=0;e<t.length;e+=1){for(let i=0;i<t[e];i+=1)s.push(r);r=255===r?0:255}const n=s.length;if(!this.gl2&&(i=s.length)&i-1){const t=(t=>{t-=1;for(let e=1;e<32;e<<=1)t|=t>>1;return t+1})(s.length);for(let e=s.length;e<t;e+=1)s[e]=0}this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.gl.pixelStorei(this.gl.PACK_ALIGNMENT,1),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.LUMINANCE,s.length,1,0,this.gl.LUMINANCE,this.gl.UNSIGNED_BYTE,new Uint8Array(s)),this.gl.bindTexture(this.gl.TEXTURE_2D,null);const o={Vz:e,Nz:n,Gz:s.length};return this.BR.set(t,o),o}var i;return e}Uz(t,e,i){const{uniform:s}=t;this.xF(s("uFallbackColor"),e.getFallbackColor());for(let t=0;t<e.steps.length;t+=1)this.pR(s(`uLUTValue${t}`),e.steps[t].value),this.xF(s(`uLUTColor${t}`),e.steps[t].color);if(e.percentageValues){if(!i)return _e(0,(()=>{})),this;this.pR(s("uMinValue"),i.min),this.pR(s("uMaxValue"),i.max)}return this}$z(t,i,s,r,n,o){const h=s&&s.getSource()||r&&r.js,a=s?s.getFitMode():e.ImageFitMode.Stretch,l=t=>{t.texCoordsBuffer=this.cR(o(t.texture.DE,t.texture.EE,a),!1,t.texCoordsBuffer)};if(h){let e=i;if((!i||h!==i.source)&&h){i&&(i.texture.JB(t),this.wR(i.texCoordsBuffer));const r=this.Cz(h);r.QB(t);const n=s?s.getSourceMissingColor():jr.color;e={texture:r,source:h,texCoordsBuffer:this.cR([]),sourceMissingTexture:this.xz(new Uint8Array([n.getR(),n.getG(),n.getB(),n.getA()]),this.gl.RGBA,!1,!0,{x:1,y:1},!1),textureReadyCallback:()=>{e&&h&&(l(e),this.St.Bs())}},r.YE(e.textureReadyCallback),l(e)}return e&&e.texture.zE&&e.texture.RE&&e.texture.BE&&(e.texture.Dr(),this.St.Bs()),n&&e&&e.texture.zE&&l(e),e}i&&this.Yz(t,i)}Yz(t,e){e&&(e.texture.JB(t),e.texture.HE(e.textureReadyCallback),this.GB(e.sourceMissingTexture),this.wR(e.texCoordsBuffer))}Xz(t,e,i,s){var r,n;const{uniform:o,uniformOptional:h,attribute:a}=t,l=i.ct,c=this.QE();if(this.xF(o("uHighlightColorOffset"),1===e||2===e?k:i._t).pR(o("uRenderEffectMask"),2===e?1:0).AR(h("uRatioPxClip"),[2/this.St.Mi().x,2/this.St.Mi().y]).pR(h("uDevicePixelRatio"),c),void 0===s.highlightBuffer)this.pR(o("uIsHighlighted"),1===e||2===e?0:i.xt);else{if(!s.highlightBuffer)throw new Error("Highlight buffer not supplied for attribute highlighting");this.fR(s.highlightBuffer,null!==(r=s.highlightAttribDivisor)&&void 0!==r?r:void 0,{location:a("aIsHighlighted"),size:1})}l instanceof hs||l instanceof dr?this.AR(o("uScale"),s.uniforms.vR()).AR(o("uDisp"),s.uniforms.yR()).AR(h("uScaleStart_highpart"),s.uniforms.Wz()).AR(h("uScaleStart_lowpart"),s.uniforms.jz()):l instanceof as&&this.AR(h("uScaleStart"),s.uniforms.MixedScaleXY.uScaleStart).AR(h("uScaleStartLog"),s.uniforms.MixedScaleXY.uScaleStartLog).AR(h("uScaleInterval"),s.uniforms.MixedScaleXY.uScaleInterval).AR(h("uScaleIntervalLog"),s.uniforms.MixedScaleXY.uScaleIntervalLog).AR(o("uViewportStart"),s.uniforms.MixedScaleXY.uViewportStart).AR(o("uViewportSize"),s.uniforms.MixedScaleXY.uViewportSize);const u=!0===s.coordsHighPrecision;if(s.coordsX)if(u){const t=a("aPos_highpartX"),e=a("aPos_lowpartX");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsX),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(e,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(e)}else this.qR(a("aPosX"),s.coordsX);if(s.coordsY)if(u){const t=a("aPos_highpartY"),e=a("aPos_lowpartY");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.coordsY),this.gl.vertexAttribPointer(t,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(t),this.gl.vertexAttribPointer(e,1,this.gl.FLOAT,!1,2*Float32Array.BYTES_PER_ELEMENT,1*Float32Array.BYTES_PER_ELEMENT),this.gl.enableVertexAttribArray(e)}else this.qR(a("aPosY"),s.coordsY);if(1===e){if(this.NR(o("uFirstId"),s.idFirst),void 0!==s.mousePickingOffsetBuffer){if(!s.mousePickingOffsetBuffer)throw new Error("No mouse picking offset buffer for attribute mouse picking");this.qR(a("aPickingIdOffset"),s.mousePickingOffsetBuffer,null!==(n=s.mousePickingOffsetAttribDivisor)&&void 0!==n?n:void 0)}}else{if(s.fillStyleSolid&&this.xF(o("uColor"),s.fillStyleSolid.getColor()),s.fillStylePaletted){if("value"===s.fillStylePaletted.getLookUpProperty()&&null!==s.lookupValueBuffer){if(!s.lookupValueBuffer)return!1;const t=a("aLookupValue");this.qR(t,s.lookupValueBuffer),void 0!==s.lookupValueAttribDivisor&&this.QR(t,s.lookupValueAttribDivisor)}this.Uz(t,s.fillStylePaletted.lut,s.lookupValueRange)}if(s.fillStyleLinearGradient){if(!s.linearGradientInfo)return!1;this._z(t,s.linearGradientInfo,s.fillStyleLinearGradient)}if(s.fillStyleRadialGradient){if(!s.radialGradientInfo)return!1;this.wz(t,s.radialGradientInfo,s.fillStyleRadialGradient)}if(s.fillStyleIndividual&&null!==s.colorBuffer){if(!s.colorBuffer)return!1;const t=a("aColor");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.colorBuffer),this.gl.vertexAttribPointer(t,4,this.gl.UNSIGNED_BYTE,!0,0,0),this.gl.enableVertexAttribArray(t),void 0!==s.colorAttribDivisor&&this.QR(t,s.colorAttribDivisor)}if(s.fillStyleImage){if(!s.texturedFillGLInfo)return!1;const t=s.texturedFillGLInfo&&s.texturedFillGLInfo.texture.XE();this.xF(h("uColor"),s.fillStyleImage.getSurroundingColor()).gR(o(dy),t||s.texturedFillGLInfo.sourceMissingTexture,0).fR(s.texturedFillGLInfo.texCoordsBuffer,s.texCoordAttribDivisor,{location:a("aTextureCoord"),size:2}).GR(s.fillStyleImage.fitMode)}if(s.maskTexture){const t=s.maskTexture&&s.maskTexture.texture.XE();this.gR(o(yy),t||s.maskTexture.sourceMissingTexture,0).fR(s.maskTexture.texCoordsBuffer,s.maskTextureCoordsAttribDivisor,{location:a("aMaskTextureCoord"),size:2})}}return void 0!==s.useInstanceID&&this.Ez(t,s.useInstanceID),void 0!==s.useVertexID&&this.Bz(t,s.useVertexID),!0}Zz(t,e,i){if(t)return Mp(i||e.Bt(),e.ct,t.getAngle(!0),this.QE())}Qz(t,e,i){if(t)return Cp(i||e.Bt(),e.ct,t.getPosition(),t.getExtent(),t.getShape(),this.QE())}}const Op=async(t,e,i,s,r,n,o,h)=>{const a=t.fenceSync(t.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),((t,e,i,s)=>{const r=void 0!==s.flags?s.flags:0,n=void 0!==s.retryTimeout?s.retryTimeout:10;return new Promise(((s,o)=>{const h=()=>{if(i())return s(void 0);const a=t.clientWaitSync(e,r,0);return a===t.WAIT_FAILED?o(new Error(`WebGL Sync WAIT_FAILED ${t.getError()}`)):a!==t.TIMEOUT_EXPIRED?s(void 0):void Wt.setTimeout(h,n)};Wt.setTimeout(h,0)}))})(t,a,e,{retryTimeout:10}).then((()=>{if(!e())return t.deleteSync(a),t.bindBuffer(i,s),t.getBufferSubData(i,r,n,o,h),t.bindBuffer(i,null),n})).catch((t=>{throw t}))};class Lp{xR(t){if(t instanceof hs||t instanceof dr){const e=t.Di();this.Jz=e.x.scaling,this.Kz=-e.x.displacement,this.qz=e.y.scaling,this.tO=-e.y.displacement;const i=Math.fround(e.x.highPrecisionOffset),s=Math.fround(e.y.highPrecisionOffset);this.iO=i,this.sO=e.x.highPrecisionOffset-i,this.eO=s,this.hO=e.y.highPrecisionOffset-s}else t instanceof as&&(this.MixedScaleXY=t.Di());return this}yR(){return[this.Kz,this.tO]}vR(){return[this.Jz,this.qz]}Wz(){return[this.iO,this.eO]}jz(){return[this.sO,this.hO]}}class Dp{constructor(){this.Jz=0,this.qz=0,this.rO=0,this.Kz=0,this.tO=0,this.nO=0}oO(t){return this.Jz=t.it(),this.Kz=t.getInnerStart()+.5*this.Jz*t.st(),this}aO(t){return this.qz=t.it(),this.tO=t.getInnerStart()+.5*this.qz*t.st(),this}lO(t){return this.rO=t.it(),this.nO=t.getInnerStart()+.5*this.rO*t.st(),this}vR(){return[this.Jz,this.qz,this.rO]}yR(){return[this.Kz,this.tO,this.nO]}cO(t,e,i,s,r){const n=l(2*(t-i.x)/(i.width-i.x)-1,2*(e-i.y)/(i.height-i.y)-1),o=bp.multiply(s,[n.x,n.y,r,1]);return d(o[0],o[1],o[2])}}class Pp{constructor(t){this.OB=t}Bu(t,e,i,s,r,n=0){const o=this.OB,h=void 0===s;if(!(s=s||o.kR()))throw new _t("Could not bind a framebuffer.");const a=o.JE(),l=o.iR();o.mR(!1),o.rz((()=>{o.oR(0,0,i.x,i.y),t()}),s,e,n),h&&o.IR(s),this.OB.nz(r),this.OB.oR(a.x,a.y,a.width,a.height),o.mR(l)}}class Vp{constructor(t,e){this.uO=[],this.dO=[],this.uniform=t=>{const e=this.shader.mD(t);return this.dO.push({name:t,optional:!1}),e},this.uniformOptional=t=>{const e=this.shader.xD(t);return this.dO.push({name:t,optional:!0}),e},this.attribute=t=>{const e=this.shader.SD(t);return this.uO.push({name:t,location:e}),e},this.glUtils=t,this.shader=e}finish(t){for(const t of this.uO)this.glUtils.JR(t.location),this.glUtils.QR(t.location,0)}}class _p extends lo{constructor(t,e,i,s,r){super(t,e,i,s),this.fO=new Map,this.AO=t,this.gO=e,this.OB=t.pO(),this.vO=r,this.gO=e}Du(){return this}Bu(t,e){if(!this.vO||0!==t||0===this.fO.size)return{};let i=Array.from(this.fO.values()).map((t=>t.yO.filter((t=>t.mO)).map((t=>t.gs)).flat().filter((t=>void 0!==t)).filter((t=>t.getVisible())))).flat();if(this.St.Fu&&(i=i.filter((t=>!(t instanceof So)))),0===i.length)return{};const s=this.vO;return this.OB.gz.CR(i,s),{}}Eu(t,e,i,s,r){return{}}Dr(){return this}Zt(){return 0}jt(){return 0}Jt(){return 0}Qt(){return 0}Cc(){return 0}kc(){return 0}ys(t,e){const i={yO:[]},s=(t,e)=>{const s={gs:t||[],mO:void 0===e||e};i.yO.push(s);const r={Cs:t=>(s.gs=t,r),Ls:t=>(s.mO=t,r),Ds:()=>s.mO};return r},r={};Object.keys(e).forEach((t=>{const i=e[t],n=i.shapes||[],o=void 0===i.themeEffectEnabled||i.themeEffectEnabled,h=s(n,o);r[t]=h}));const n={dA:s,...r};this.fO.set(t,i);const o=()=>{this.fO.delete(t),t.removeEventListener("dispose",o)};return Wt.requestAnimationFrame((()=>{t.addEventListener("dispose",o)})),n}}function zp(t,e,i,s,r,n=Math.floor(Math.sqrt(s>r?25*s:25*r))){const o=Array(n+2),h=Math.PI;let a=0,c=0;const u=e*h/180,d=(i*h/180-u)/n;for(o[a]=l(t.x,t.y),a+=1;a<=n+1;)o[a]=l(t.x+s*Math.cos(u+c*d),t.y+r*Math.sin(u+c*d)),a+=1,c+=1;return[o,n]}const Up=(t,e,i)=>((t,e,i)=>{const s=[];let r=0;const n=Oi(e,i/2);let o,h,a,c,u=t[t.length-1],d=0;for(let i=0;i<t.length;i+=1){o=t[i],h=i===t.length-1?t[0]:t[i+1],i>0&&(u=t[i-1]),jt(o,u)&&(u=Li(o,Ri(Oi(Di(h,o),-1)))),jt(o,h)&&(h=Li(o,Ri(Oi(Di(u,o),-1))));const f=Vi(u,e),g=Vi(o,e),y=Vi(h,e),p=Ri(Di(g,f)),m=Ri(Di(y,g)),x=Li(p,m),S=l(-x.y,x.x),v=l(-p.y,p.x),A=1/zi(S,v),b=Ii(S),C=Ri(Di(p,m)),M=Math.sign(zi(S,C))||1,T=Pi(S,Oi(n,A)),E=Pi(S,Oi(n,-A));if(b<1||A===1/0){let t={x:0,y:0},e={x:0,y:0},i={x:0,y:0},a={x:0,y:0};const c=l(-m.y,m.x),f=Math.sign(zi(p,S))||M,g=Pi(v,Oi(n,f)),y=Pi(c,Oi(n,f));1===M?(t=g,e=E,i=y,a=E):(t=T,e=g,i=T,a=y);const x=4*Si(u,o),b=4*Si(o,h);(A>x||A>b)&&(1===M?(t=g,e=y,i=y,a=g):(t=y,e=g,i=g,a=y));const C=Li(o,t),w=Li(o,e),B=Li(o,i),k=Li(o,a);s[r]=C,r+=1,s[r]=w,r+=1,s[r]=B,r+=1,s[r]=k,r+=1,d=4}else{const t=Li(o,T),e=Li(o,E);s[r]=t,r+=1,s[r]=e,r+=1,d=2}c=a,a=t[i]}return s[r]=s[0],r+=1,s[r]=s[1],r+=1,[s,d,[c,a]]})(t,e,i)[0];class Np extends To{constructor(t,e,i,s,r){super(t,e,i,s,r),this.dD=new Lp,this.xO=li,this.SO=li,this.bO=yr({arcStyleSolid:()=>X(this.We)&&this.We,arcStyleRadialGradient:()=>Z(this.We)&&this.We,arcStyleLinearGradient:()=>et(this.We)&&this.We}),this.AO=t,this.gO=e,this.OB=t.pO()}MO(t,e){let i=0,s=Array(0),r=0;if(void 0!==e){const r=t.length,n=Array(r+e.length);let o=0,h=0;for(;o<r;)n[h]=t[o],n[h+1]=e[o],h+=2,o+=1;s=n,i=this.OB.gl.TRIANGLE_STRIP}else s=t,i=this.OB.gl.TRIANGLE_FAN;const n=Ae(s,this.ct.Ni());return r=s.length,[s,this.OB.cR(n),r,i]}wO(t,e,i,s){let r=Array(0);if(void 0===e)r=t;else{let i=0,s=0;const n=t.length;for(i=0,s=n,r=Array(n+e.length-2),e.reverse();i<n;)r[i]=t[i],r[s]=e[i],s+=1,i+=1}if(1===i||-1===i)return[Ae(r,this.ct.Ni()),r.length];const n=Up(r,s,i);return[Ae(n,this.ct.Ni()),n.length]}Dr(){const t=this.el(),e=this.dt.T();if(this.hl()){const i=Math.abs(this.Hi.T()-this.Wc.T());this.dD.xR(this.ct);const s=this.ct.es()||t,r=this.ct.rs(),n=this.jc.T(),o=this.Zc.T(),[h,a]=zp(this.fl.T(),this.Wc.T(),this.Hi.T(),this.jc.T(),this.Zc.T(),this.Jc.T()),c=this.Qc.T(),u=c>0?zp(this.fl.T(),this.Wc.T(),this.Hi.T(),this.jc.T()*c/100,this.Zc.T()*c/100,a)[0]:[this.fl.T()],d=h.length-1;if(2===d){const t=(h[d-1].x+h[1].x)/2,e=(h[d-1].y+h[1].y)/2;this.Kc=l(t,e)}else{const t=Math.floor(d/2);this.Kc=l(h[t].x,h[t].y)}this.qc=h[1];const f=h.length-1;this.tu=h[f],this.Qc.T()&&(h.shift(),u.shift());let y=!1;(this.fl.u||this.Wc.u||this.Hi.u||this.jc.u||this.Zc.u||this.Qc.u||this.Jc.u||s)&&(this.SO=g(l(this.Ll().x-n,this.Ll().y-o),l(this.Ll().x+n,this.Ll().y+o)),y=!0,this.fl.u=!1,this.Wc.u=!1,this.Hi.u=!1,this.jc.u=!1,this.Zc.u=!1,this.Qc.u=!1,this.Jc.u=!1);const p=this.il();(y||p)&&this.We!==V&&(this.Qc.T()?(this._O&&this.OB.wR(this._O),[this.CO,this._O,this.kO,this.TO]=this.MO(h,u)):(this._O&&this.OB.wR(this._O),[this.CO,this._O,this.kO,this.TO]=this.MO(h,void 0)),Z(this.We)?this.FO=Cp(this.SO,this.ct,this.We.getPosition(),this.We.getExtent(),this.We.getShape(),this.OB.QE()):et(this.We)?this.IO=Mp(this.SO,this.ct,this.We.getAngle(!0),this.OB.QE()):(this.FO=void 0,this.IO=void 0));const m=this.bO.arcStyleSolid(p),x=this.bO.arcStyleLinearGradient(p),S=this.bO.arcStyleRadialGradient(p),v=m||x||S;p&&(this.PO=v?this.OB.uE(Hy["2D"],Hy.Color({dataType:Z(this.We)||et(this.We)?["gradient",this.We]:"uniform"}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0,this.rl(this.We));const A=this.je;if(ir(A)&&(y||this.al(A.getThickness())||s)){this.Qc.T()?360===i?(h.pop(),u.pop(),[this.LO,this.BO]=this.wO(h,void 0,A.getThickness(),r),this.DO&&this.LO?this.OB.XR(this.DO,this.LO,!0):!this.DO&&this.LO?this.DO=this.OB.cR(this.LO,!0):this.DO&&!this.LO&&(this.OB.wR(this.DO),this.DO=void 0),[this.EO,this.RO]=this.wO(u,void 0,A.getThickness(),r),this.zO&&this.EO?this.OB.XR(this.zO,this.EO,!0):!this.zO&&this.EO?this.zO=this.OB.cR(this.EO,!0):this.zO&&!this.EO&&(this.OB.wR(this.zO),this.zO=void 0)):([this.LO,this.BO]=this.wO(h,u,A.getThickness(),r),this.DO&&this.LO?this.OB.XR(this.DO,this.LO,!0):!this.DO&&this.LO?this.DO=this.OB.cR(this.LO,!0):this.DO&&!this.LO&&(this.OB.wR(this.DO),this.DO=void 0),this.EO&&(this.zO&&this.OB.wR(this.zO),this.zO=void 0,this.RO=0)):(360===i&&(h.shift(),h.pop()),[this.LO,this.BO]=this.wO(h,void 0,A.getThickness(),r),this.DO&&this.LO?this.OB.XR(this.DO,this.LO,!0):!this.DO&&this.LO?this.DO=this.OB.cR(this.LO,!0):this.DO&&!this.LO&&(this.OB.wR(this.DO),this.DO=void 0));const t=A.getFillStyle();Z(t)?this.OO=Cp(this.SO,this.ct,t.getPosition(),t.getExtent(),t.getShape(),this.OB.QE()):et(t)?this.VO=Mp(this.SO,this.ct,t.getAngle(!0),this.OB.QE()):(this.OO=void 0,this.VO=void 0),this.NO=t===V?void 0:this.OB.uE(Hy["2D"],Hy.Color({dataType:Z(t)||et(t)?["gradient",t]:"uniform"}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})),this.ll(A)}if(y){let t=1,e=1;ir(A)&&(t=A.getThickness()*r.x,e=A.getThickness()*r.y),this.xO=g(l(this.SO.min.x-t,this.SO.min.y-e),l(this.SO.max.x+t,this.SO.max.y+e))}this.GO=e&&v?this.GO||this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0,this.UO=e&&this.je!==Ot?this.UO||this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0}return this}Bu(t,e){if(this.hl()){const i=1===t?this.GO:this.PO,s=this.We,r=this._O;i&&r&&this.OB.QB(i).dR(i,((i,n,o,h)=>{if(this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).AR(h("uScaleStart_highpart"),this.dD.Wz()).AR(h("uScaleStart_lowpart"),this.dD.jz()).Tz(o,r,this.ct.Ni(),void 0).pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0),1===t)this.OB.NR(i("uFirstId"),e).Ez(o,1);else if(X(s))this.OB.xF(i("uColor"),s.getColor());else if(Z(s)){if(!this.FO)return!1;this.OB.wz(o,this.FO,s)}else if(et(s)){if(!this.IO)return!1;this.OB._z(o,this.IO,s)}return this.OB.Pp(this.TO,this.kO),!0}));const n=this.je;ir(n)&&(void 0!==this.DO&&this.$O(t,this.DO,this.BO,n,e),void 0!==this.zO&&this.$O(t,this.zO,this.RO,n,e))}return{idCount:1}}Eu(t,e,i,s,r){return{}}$O(t,e,i,s,r){const n=1===t?this.UO:this.NO,o=s.getFillStyle();n&&this.OB.QB(n).dR(n,((n,h,a,l)=>{if(this.OB.AR(n("uScale"),this.dD.vR()).AR(n("uDisp"),this.dD.yR()).Tz(a,e,this.ct.Ni(),void 0).pR(n("uIsHighlighted"),1===t||2===t?0:this.xt).xF(n("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(n("uRenderEffectMask"),2===t?1:0),1===t)this.OB.NR(n("uFirstId"),r).Ez(a,1);else if(X(o))this.OB.xF(n("uColor"),o.getColor());else if(Z(o)){if(!this.OO)return!1;this.OB.wz(a,this.OO,o)}else if(et(o)){if(!this.VO)return!1;this.OB._z(a,this.VO,o)}const c=s.getThickness(),u=-1===c||1===c;return this.OB.Pp(u?this.OB.gl.LINE_LOOP:this.OB.gl.TRIANGLE_STRIP,i),!0}))}Du(){return this.YO&&(this.OB.wR(this.YO),this.YO=void 0),this.HO&&(this.OB.wR(this.HO),this.HO=void 0),this._O&&(this.OB.wR(this._O),this._O=void 0),this.DO&&(this.OB.wR(this.DO),this.DO=void 0),this.zO&&(this.OB.wR(this.zO),this.zO=void 0),this.PO=void 0,this.NO=void 0,this.GO=void 0,this.UO=void 0,this}Zt(){return this.SO.max.x}jt(){return this.SO.min.x}Jt(){return this.SO.max.y}Qt(){return this.SO.min.y}Cc(){return je(this.je)}kc(){return je(this.je)}}class Xp{constructor(){this.first=0,this.second=1,this.third=2,this.fourth=3,this.fifth=4,this.sixth=5}XO(t){return this.first=t,this.second=t+1,this.third=t+2,this.fourth=t+3,this.fifth=t+4,this.sixth=t+5,t+=6,this}WO(){return this.first=this.second,this.second=this.third,this.third=this.fourth,this.fourth=this.fifth,this.fifth=this.sixth,this.sixth+=1,this}jO(){return this.first=this.third,this.second=this.fourth,this.third=this.fifth,this.fourth=this.sixth,this.fifth=this.fourth+1,this.sixth=this.fifth+1,this}ZO(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.second,e[i+2]=this.third,i+=3,t.position=i,t.next&&this.WO(),this}QO(t){const e=t.buffer;let{position:i}=t;return e[i]=this.first,e[i+1]=this.third,e[i+2]=this.second,e[i+3]=this.third,e[i+4]=this.fourth,e[i+5]=this.second,i+=6,t.position=i,t.next&&this.jO(),this}JO(t,e){e.next=!0,6*t>=e.buffer.length&&(e.buffer=Array(6*t));for(let i=0;i<t;i+=1)this.QO(e);return this}KO(){return[this.first,this.second,this.third,this.fourth,this.fifth,this.sixth]}}const Hp=((t=0)=>(new Xp).XO(t))(),Gp=(t,e,i,s,r,n,o,h,a,l)=>(void 0===h&&void 0===o||Hp.WO(),n.push(t,e),r.push(Hp.first,Hp.second,Hp.third),h=void 0,o=void 0,r.push(Hp.third,Hp.fourth,Hp.second),a=Hp.third,Hp.jO(),l&&n.push(i,s),[o,h,a]),Yp=(t,e,i,s,r,n,o,h,a,l,c)=>{void 0===a&&void 0===h||Hp.WO(),o.push(t,e),r.push(Hp.first,Hp.second,Hp.third);const u=Yi(t,i,e,s);return a=void 0,void 0!==u&&(void 0===a&&(a=u),o.push(a),n.push(Hp.third,Hp.fourth,Hp.fifth),l=Hp.fourth),Hp.jO(),c&&o.push(i,s),[h,a,l]},Wp=(t,e,i,s,r,n,o,h,a,l)=>(void 0===o&&void 0===n||Hp.WO(),r.push(t,e),s.push(Hp.first,Hp.second,Hp.third),n=i,o=void 0,h=Hp.third,l?r.push(i):a=!0,[n,o,h,a]),jp=(t,e,i,s,r,n,o,h,a,l,c)=>(0!==n.length?(void 0===h&&void 0===o||Hp.WO(),Hp.WO()):a>0&&(Hp.WO(),c>0&&(c-=1)),n.push(t),r.push(Hp.first,Hp.second,Hp.third),a=Hp.second,o=t,h=void 0,l&&n.push(i,s),[o,h,a,c]),$p=(t,e=0)=>{Hp.XO(e);const[i,s]=t,r=i.length,n=[],o=[],h=[];let a,l,c=e,u=0,d=i[u],f=s[u],g=i[u],y=s[u],p=!1,m=c>0?g.y!==y.y?2:1:0;if(r>1)for(;u<r-1;){g=d,y=f,u+=1,d=i[u],f=s[u];const t=u===r-1;g.y>y.y?d.y>f.y?[a,l,c]=Gp(g,y,d,f,n,h,a,l,c,t):d.y<f.y?[a,l,c]=Yp(g,y,d,f,n,o,h,a,l,c,t):[a,l,c,p]=Wp(g,y,d,n,h,a,l,c,p,t):g.y<y.y?d.y<f.y?[a,l,c]=Gp(g,y,d,f,o,h,a,l,c,t):d.y>f.y?[a,l,c]=Yp(g,y,d,f,o,n,h,a,l,c,t):[a,l,c,p]=Wp(g,y,d,o,h,a,l,c,p,t):d.y===f.y?(a=g,p&&(h.push(g),p=!1,Hp.WO()),0===h.length&&c>0&&m>0&&(m-=1)):d.y>f.y?[a,l,c,m]=jp(g,0,d,f,n,h,a,l,c,t,m):[a,l,c,m]=jp(g,0,d,f,o,h,a,l,c,t,m)}return[h,new Uint16Array(n),new Uint16Array(o),c,m]};class Qp extends Mo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.dD=new Lp,this.qO=0,this.Hl=Array(),this.tV=0,this.iV=new Uint16Array(0),this.sV=new Uint16Array(0),this.bO=yr({hightFillSolid:()=>X(this.We)&&this.We,hightFillRadialGradient:()=>Z(this.We)&&this.We,hightFillLinearGradient:()=>et(this.We)&&this.We,hightFillPaletted:()=>j(this.We)&&this.We,lowFillSolid:()=>X(this.Dc)&&this.Dc,lowFillRadialGradient:()=>Z(this.Dc)&&this.Dc,lowFillLinearGradient:()=>et(this.Dc)&&this.Dc,lowFillPaletted:()=>j(this.Dc)&&this.Dc}),this.AO=t,this.gO=e,this.OB=t.pO()}Dr(){const t=this.el(),e=this.dt.T(),i=this.sc;if(this.hl()){this.dD.xR(this.ct);const s=this.ct instanceof as==0,r=s?this.ct.rs():void 0,n=this.Oc(),o=this.ct.es()||t,h=i||this.Ic.u||o&&"disabled"!==n.type;if(h){if(this.qO=0,this.iV=new Uint16Array(0),this.sV=new Uint16Array(0),this.Hl.length=0,this.tV=0,this.Pc>1){const[t,e,i,o]=$p([s?n.packager(this.Tc,r,.5):this.Tc,s?n.packager(this.Fc,r,.5):this.Fc]);this.qO=o,this.iV=e,this.sV=i,this.Hl=t,this.tV=t.length}this.Ic.u=!1}if(this.Bc&&this.Kl[0].length>1){const[t,e]=this.Kl,i=t.length,[o,h,a,l,c]=$p([s?n.packager(t,r,.5):t,s?n.packager(e,r,.5):e],this.qO);this.qO=l;const u=o.length;for(let t=c;t<u;t+=1)this.Hl[this.tV]=o[t],this.tV+=1;this.iV=Wi(this.iV,h),this.sV=Wi(this.sV,a);for(let s=c>0||this.Pc>0?1:c;s<i;s+=1)this.Tc[this.Pc]=t[s],this.Fc[this.Pc]=e[s],this.Pc+=1;this.Lc=!0,this.Bc=!1,this.Kl=[]}const a=this.We,l=this.sl!==a,c=this.bO.hightFillSolid(l),u=this.bO.hightFillRadialGradient(l),d=this.bO.hightFillLinearGradient(l),f=this.bO.hightFillPaletted(l),g=c||u||d||f&&["x","y"].includes(f.getLookUpProperty())&&f,y=this.Dc,p=this.Hc!==y,m=this.bO.lowFillSolid(p),x=this.bO.lowFillRadialGradient(p),S=this.bO.lowFillLinearGradient(p),v=this.bO.lowFillPaletted(p),A=m||x||S||v&&["x","y"].includes(v.getLookUpProperty())&&v;if((l||t)&&(this.eV=g?this.OB.uE(Hy["2D"],Hy.Color({dataType:d?["gradient",d]:u?["gradient",u]:f?["lookup",f.getLookUpProperty(),f.lut]:"uniform"}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0),u?this.FO=Cp(this.yt||this.Ql,this.ct,u.getPosition(),u.getExtent(),u.getShape(),this.OB.QE()):d?this.IO=Mp(this.yt||this.Ql,this.ct,d.getAngle(!0),this.OB.QE()):(this.FO=void 0,this.IO=void 0),(p||t)&&(this.hV=A?this.OB.uE(Hy["2D"],Hy.Color({dataType:S?["gradient",S]:x?["gradient",x]:v?["lookup",v.getLookUpProperty(),v.lut]:"uniform"}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0),x?this.rV=Cp(this.yt||this.Ql,this.ct,x.getPosition(),x.getExtent(),x.getShape(),this.OB.QE()):S?this.nV=Mp(this.yt||this.Ql,this.ct,S.getAngle(!0),this.OB.QE()):(this.rV=void 0,this.nV=void 0),(t||this.Lc||h)&&this.Lc||h){const t=this.Hl,e=Ae(t,this.ct.Ni());this.oV=this.OB.cR(e,!1,this.oV),g&&(this.aV=this.OB.WR(this.iV,this.aV),this.lV=this.iV.length),A&&(this.cV=this.OB.WR(this.sV,this.cV),this.uV=this.sV.length),this.Lc=!1}this.GO=e&&(A||g)?this.GO||this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0,this.rl(this.We),this.Xc(this.Dc),this.sc=!1}return this}Bu(t,e){const i=this.We,s=this.Dc,r=1===t?this.GO:this.hV;if(r&&this.oV&&this.cV){const i=this.oV,n=this.cV;this.OB.QB(r).dR(r,((r,o,h,a)=>{if(this.OB.Tz(h,i,this.ct.Ni(),void 0).tz(n).pR(r("uIsHighlighted"),1===t||2===t?0:this.xt).xF(r("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(r("uRenderEffectMask"),2===t?1:0),this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(r("uScale"),this.dD.vR()).AR(r("uDisp"),this.dD.yR()).AR(a("uScaleStart_highpart"),this.dD.Wz()).AR(a("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(a("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(a("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(a("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(a("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(r("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(r("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),1===t)this.OB.NR(r("uFirstId"),e).Ez(h,1);else if(X(s))this.OB.xF(r("uColor"),s.getColor());else if(Z(s)){if(!this.rV)return!1;this.OB.wz(h,this.rV,s)}else if(et(s)){if(!this.nV)return!1;this.OB._z(h,this.nV,s)}else if(j(s)){const t=pr(s,this,void 0);if(!t&&s.lut.percentageValues)return!1;this.OB.Uz(h,s.lut,t)}return this.OB.sz(this.uV),!0}))}const n=1===t?this.GO:this.eV;if(n&&this.oV&&this.aV){const s=this.oV,r=this.aV;this.OB.QB(n).dR(n,((n,o,h,a)=>{if(this.OB.Tz(h,s,this.ct.Ni(),void 0).tz(r).pR(n("uIsHighlighted"),1===t||2===t?0:this.xt).xF(n("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(n("uRenderEffectMask"),2===t?1:0),this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(n("uScale"),this.dD.vR()).AR(n("uDisp"),this.dD.yR()).AR(a("uScaleStart_highpart"),this.dD.Wz()).AR(a("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(a("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(a("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(a("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(a("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(n("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(n("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),1===t)this.OB.NR(n("uFirstId"),e).Ez(h,1);else if(X(i))this.OB.xF(n("uColor"),i.getColor());else if(Z(i)){if(!this.FO)return!1;this.OB.wz(h,this.FO,i)}else if(et(i)){if(!this.IO)return!1;this.OB._z(h,this.IO,i)}else if(j(i)){const t=pr(i,this,void 0);if(!t&&i.lut.percentageValues)return!1;this.OB.Uz(h,i.lut,t)}return this.OB.sz(this.lV),!0}))}return{idCount:1}}Eu(t,e,i,s,r){return{}}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}Cc(){return 0}kc(){return 0}zS(t){this.Ac()>0&&this.Dr();const[e,i]=this.nc(),s=e.length>2&&e[1].x<e[0].x,r=ft(e,t,dt.NearestX,this.Ec,this.Rc,this.ct,this.St.ct,this.Ql,"x",s);if(void 0===r)return;const n=[e[r],i[r]];return Number.isNaN(n[0].y)||Number.isNaN(n[1].y)?void 0:n}eM(t){this.Ac()>0&&this.Dr();const[e,i]=this.nc(),s=e.length;if(0===s)return;const r=this.Ec?1:0,n=s-(this.Rc?2:1),o=e.length>2&&e[1].x<e[0].x,h=xt(e,ot(t,this.St.ct,this.ct),"x",o,r,n);if(!h)return;const a=[Ai(e[h.a],e[h.b],h.lerpAmount),Ai(i[h.a],i[h.b],h.lerpAmount)];return Number.isNaN(a[0].y)||Number.isNaN(a[1].y)?void 0:a}dispose(){return super.dispose(),this.cV&&(this.OB.wR(this.cV),this.cV=void 0),this.aV&&(this.OB.wR(this.aV),this.aV=void 0),this.oV&&(this.OB.wR(this.oV),this.oV=void 0),this}Du(){return this.dispose(),this}}class Jp extends Tp{constructor(t,e){super(t),this.dV=e;const{vertices:i,indices:s,indicesCount:r,drawMode:n}=this.fV();this.AV=t.cR(i),this.gV=t.WR(s),this.pV=r,this.vV=n}QB(t,e){return this.OB.fR(this.AV,0,{location:t.attribute("aSegmentPosition"),size:2},{location:t.attribute("aSegmentSide"),size:1},{location:e?t.attribute("aSegmentInside"):void 0,size:1}),this.OB.tz(this.gV),this}Pp(t,e,i){return this.OB.hz(void 0!==e?e:this.vV,this.pV,i||0,t,this.OB.gl.UNSIGNED_BYTE),this}fV(){const t=[];[1,0].forEach((e=>{const i=1===e?.5*Math.PI:1.5*Math.PI;for(let s=0;s<=this.dV;s+=1){const r=i-s*Math.PI/this.dV;t.push(.5*Math.cos(r),.5*Math.sin(r),e,0)}})),t.push(0,0,1,1),t.push(0,0,0,1);const e=t.length/4,i=[];for(let t=0;t<this.dV;t+=1)i.push(t,t+1,e-2),i.push(t+e/2-1,t+e/2,e-1);return i.push(0,e-2,e-1),i.push(e-1,e-2,e/2-1),i.push(0,e-3,e-1),i.push(e/2-2,e-2,e/2-1),{vertices:new Float32Array(t),indices:new Uint8Array(i),indicesCount:i.length,verticesCount:e,drawMode:this.OB.gl.TRIANGLES}}LE(){this.OB.wR(this.AV),this.OB.wR(this.gV)}}const qp=(t,e,i=!0)=>((t,e)=>{let i=t.PR.kE.get(e);return i||(i=new Jp(t,e),t.PR.kE.set(e,i),i)})(t,i?e>=50?8:e>=20?6:e>=7?4:e>=4?3:1===e?1:2:1),Zp={yV:(t,e,i,s,r,n,o=1)=>{const{attribute:h}=s,a=e.gl;if(a.bindBuffer(a.ARRAY_BUFFER,i),t){const t=h("aLocationA_highpart"),i=h("aLocationA_lowpart"),s=h("aLocationB_highpart"),l=h("aLocationB_lowpart");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.QR(t,o),a.enableVertexAttribArray(t),a.vertexAttribPointer(i,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),e.QR(i,o),a.enableVertexAttribArray(i),a.vertexAttribPointer(s,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.QR(s,o),a.enableVertexAttribArray(s),a.vertexAttribPointer(l,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r+2)*Float32Array.BYTES_PER_ELEMENT),e.QR(l,o),a.enableVertexAttribArray(l)}else{const t=h("aLocationA"),i=h("aLocationB");a.vertexAttribPointer(t,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.QR(t,o),a.enableVertexAttribArray(t),a.vertexAttribPointer(i,2,a.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.QR(i,o),a.enableVertexAttribArray(i)}},mV:(t,e,i,s,r,n,o,h)=>{const a=t.gl;a.bindBuffer(a.ARRAY_BUFFER,i),a.vertexAttribPointer(s,n,a.FLOAT,!1,o*Float32Array.BYTES_PER_ELEMENT,h*Float32Array.BYTES_PER_ELEMENT),t.QR(s,1),a.enableVertexAttribArray(s),a.vertexAttribPointer(r,n,a.FLOAT,!1,o*Float32Array.BYTES_PER_ELEMENT,(h+o)*Float32Array.BYTES_PER_ELEMENT),t.QR(r,1),a.enableVertexAttribArray(r)},xV:(t,e,i,s,r,n)=>{const{attribute:o}=s,h=e.gl;if(h.bindBuffer(h.ARRAY_BUFFER,i),t){const t=o("aLocationA_highpart"),i=o("aLocationA_lowpart"),s=o("aLocationB_highpart"),a=o("aLocationB_lowpart");h.vertexAttribPointer(t,2,h.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.QR(t,1),h.enableVertexAttribArray(t),h.vertexAttribPointer(i,2,h.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),e.QR(i,1),h.enableVertexAttribArray(i),h.vertexAttribPointer(s,2,h.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.QR(s,1),h.enableVertexAttribArray(s),h.vertexAttribPointer(a,2,h.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r+2)*Float32Array.BYTES_PER_ELEMENT),e.QR(a,1),h.enableVertexAttribArray(a)}else{const t=o("aLocationA"),i=o("aLocationB");h.vertexAttribPointer(t,2,h.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),e.QR(t,1),h.enableVertexAttribArray(t),h.vertexAttribPointer(i,2,h.FLOAT,!1,2*r*Float32Array.BYTES_PER_ELEMENT,(n+r)*Float32Array.BYTES_PER_ELEMENT),e.QR(i,1),h.enableVertexAttribArray(i)}},SV:(t,e,i,s,r,n,o,h,a,l)=>{const c=t.gl;c.bindBuffer(c.ARRAY_BUFFER,i),c.vertexAttribPointer(s,n,a,h,2*n*l,o*l),t.QR(s,1),c.enableVertexAttribArray(s),c.vertexAttribPointer(r,n,a,h,2*n*l,(o+n)*l),t.QR(r,1),c.enableVertexAttribArray(r)},Bu:(t,e,i,s,r,n,o)=>{const h=t.pO(),{uniform:a,uniformOptional:l}=i,c=1/t.Ca.Ta,u=(r?Math.max(n,c):Math.max(n,0))+1;h.pR(a("uThicknessPixels"),u).pR(l("uAALimit"),1-(u-1)/u).AR(a("uRatioPxClip"),[2/t.Mi().x,2/t.Mi().y]),e.QB(i,s).Pp(o)}},Kp={yV:(t,e,i,s,r,n)=>{const{attribute:o}=s,h=e.gl;if(h.bindBuffer(h.ARRAY_BUFFER,i),t){const t=o("aPos_highpart");h.vertexAttribPointer(t,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(t);const e=o("aPos_lowpart");h.vertexAttribPointer(e,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(e)}else{const t=o("aPos");h.vertexAttribPointer(t,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(t)}},mV:(t,e,i,s,r,n)=>{const o=t.gl;o.bindBuffer(o.ARRAY_BUFFER,i),o.vertexAttribPointer(s,r,o.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),o.enableVertexAttribArray(s)},xV:(t,e,i,s,r,n)=>{const{attribute:o}=s,h=e.gl;if(h.bindBuffer(h.ARRAY_BUFFER,i),t){const t=o("aPos_highpart"),e=o("aPos_lowpart");h.vertexAttribPointer(t,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(t),h.vertexAttribPointer(e,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,(n+2)*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(e)}else{const t=o("aPos");h.vertexAttribPointer(t,2,h.FLOAT,!1,r*Float32Array.BYTES_PER_ELEMENT,n*Float32Array.BYTES_PER_ELEMENT),h.enableVertexAttribArray(t)}},bV:(t,e)=>{const i=t.pO();i.Pp(i.gl.LINE_STRIP,e,0)},MV:(t,e)=>{const i=t.pO();i.Pp(i.gl.LINES,2*e,0)}},tm=(t,e,i,s,r,n,o,h,a,l,c=o)=>{const u=t.gl;if(i){const i=e.attribute(`${r}A_highpart${n}`),d=e.attribute(`${r}A_lowpart${n}`),f=e.attribute(`${r}B_highpart${n}`),g=e.attribute(`${r}B_lowpart${n}`);u.bindBuffer(u.ARRAY_BUFFER,s),u.vertexAttribPointer(i,o,a,h,2*c*l,0),u.vertexAttribPointer(d,o,a,h,2*c*l,c*l),t.QR(i,1),t.QR(d,1),u.enableVertexAttribArray(i),u.enableVertexAttribArray(d),u.vertexAttribPointer(f,o,a,h,2*c*l,2*c*l),u.vertexAttribPointer(g,o,a,h,2*c*l,3*c*l),t.QR(f,1),t.QR(g,1),u.enableVertexAttribArray(f),u.enableVertexAttribArray(g),u.bindBuffer(u.ARRAY_BUFFER,null)}else{const i=e.attribute(`${r}A${n}`),d=e.attribute(`${r}B${n}`);u.bindBuffer(u.ARRAY_BUFFER,s),u.vertexAttribPointer(i,o,a,h,c*l,0*l),u.vertexAttribPointer(d,o,a,h,c*l,c*l),t.QR(i,1),t.QR(d,1),u.enableVertexAttribArray(i),u.enableVertexAttribArray(d),u.bindBuffer(u.ARRAY_BUFFER,null)}};class em extends Bo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.dD=new Lp,this.Ql=li,this.bO=yr({lineStyleSolid:()=>ir(this.gu)&&this.gu,lineStyleDashed:()=>or(this.gu)&&this.gu,strokeFillSolid:()=>{const t=this.gu.getFillStyle();return X(t)&&t},strokeFillLinearGradient:()=>{const t=this.gu.getFillStyle();return et(t)&&t},strokeFillRadialGradient:()=>{const t=this.gu.getFillStyle();return Z(t)&&t},strokeFillPaletted:()=>{const t=this.gu.getFillStyle();return j(t)&&t}}),this.AO=t,this.gO=e,this.OB=t.pO(),this.wV=this.OB.cz}Dr(){const t=this.nl(),e=this.gu,i=this.bO.lineStyleSolid(t),s=this.bO.lineStyleDashed(t),r=i||s,n=this.bO.strokeFillSolid(t),o=this.bO.strokeFillLinearGradient(t),h=this.bO.strokeFillRadialGradient(t),a=this.bO.strokeFillPaletted(t),c=n||o||h||a&&["x","y"].includes(a.getLookUpProperty())&&a,u=this.Xi(),d=this.Yi(),f=this.dt.T(),y=this.dt.u,p=e.Wt();if(s&&this.ct instanceof as)return Wt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;if(this.dD.xR(this.ct),this.mu&&(this._V=this.OB.cR(Ae([u,d],this.ct.Ni()),!1,this._V),this.Ql=g(l(u.x,u.y),l(d.x,d.y))),t||y){const t=this.hl()&&r&&c&&p>0,e=o?["gradient",o]:h?["gradient",h]:a?["lookup",a.getLookUpProperty(),a.lut]:"uniform";this.CV=t?{type:"triangulated",shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:e}),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0}),this.wV?Hy.AliasedEdge:void 0,s&&Hy.StippleTextureInstanced),mousePickingShader:f?this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0}),s&&Hy.StippleTextureInstanced):void 0,geometry:qp(this.OB,p),thickness:p,lineStyleSolid:i,lineStyleDashed:s,fillStyleSolid:n,fillStyleLinearGradient:o,fillStyleRadialGradient:h,fillStylePaletted:a}:void 0}if(h?this.OO=Cp(uo(this.Ql,{x:this.Cc(),y:this.kc()},this.ct),this.ct,h.getPosition(),h.getExtent(),h.getShape(),this.OB.QE()):o?this.VO=Mp(uo(this.Ql,{x:this.Cc(),y:this.kc()},this.ct),this.ct,o.getAngle(!0),this.OB.QE()):(this.OO=void 0,this.VO=void 0),s){if(t||this.mu){const t=[0,0,Math.abs(d.x-u.x),Math.abs(d.y-u.y)];this.kV=this.OB.cR(t,!1,this.kV)}this.TV=this.OB.Oz(s.getPattern())}else this.kV&&(this.OB.wR(this.kV),this.kV=void 0),this.TV=void 0;return this.yu(e),this.mu=!1,this.dt.u=!1,this}Bu(t,e){var i,s;const r=this._V;if(!r)return{};const n=this.CV;if(!n)return{};const{fillStyleSolid:o,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l,lineStyleDashed:c,thickness:u}=n,d=1===t?null===(i=this.CV)||void 0===i?void 0:i.mousePickingShader:null===(s=this.CV)||void 0===s?void 0:s.shader;return d?(this.OB.QB(d).dR(d,((i,s,d,f)=>{if(this.OB.pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0),this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).AR(f("uScaleStart_highpart"),this.dD.Wz()).AR(f("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(f("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(f("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(f("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(f("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(i("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(i("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),1===t)this.OB.NR(i("uFirstId"),e).Ez(d,1);else if(o)this.OB.xF(i("uColor"),o.getColor());else if(a){if(!this.OO)return!1;this.OB.wz(d,this.OO,a)}else if(h){if(!this.VO)return!1;this.OB._z(d,this.VO,h)}else if(l){const t=pr(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.OB.Uz(d,l.lut,t)}if(c){if(!this.kV||!this.TV)return!1;Zp.mV(this.OB,d,this.kV,s("aLengthSoFarA"),s("aLengthSoFarB"),2,2,0),this.OB.AR(i("uStippleCount"),[this.St.Mi().x/this.TV.Gz,this.St.Mi().y/this.TV.Gz]).pR(f("uStippleTextureWidthLimiter"),this.TV.Nz/this.TV.Gz).pR(i("uStippleScale"),c.getPatternScale()).gR(i("uStippleTexture"),this.TV.Vz,1)}return Zp.yV(this.ct.Ni(),this.OB,r,d,this.ct.Ni()?4:2,0),Zp.Bu(this.AO,n.geometry,d,this.wV&&1!==t,1===t,u,1),!0})),{idCount:1}):{}}Eu(t,e,i,s,r){return{}}dispose(){return super.dispose(),this.CV=void 0,this._V&&(this.OB.wR(this._V),this._V=void 0),this.kV&&(this.OB.wR(this.kV),this.kV=void 0),this.TV=void 0,this}Du(){return this}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}Cc(){return je(this.gu)}kc(){return je(this.gu)}}class im extends ko{constructor(t,e,i,s,r){super(t,e,i,s,r),this.FV=[],this.IV=!1,this.PV=!1,this.LV=!1,this.BV=!1,this.DV=!1,this.dD=new Lp,this.Ql=li,this.bO=yr({lineStyleSolid:()=>ir(this.gu)&&this.gu,lineStyleDashed:()=>or(this.gu)&&this.gu,lineFillSolid:()=>{const t=this.gu.getFillStyle();return X(t)&&t},lineFillRadialGradient:()=>{const t=this.gu.getFillStyle();return Z(t)&&t},lineFillLinearGradient:()=>{const t=this.gu.getFillStyle();return et(t)&&t},lineIndividualPointFill:()=>{const t=this.gu.getFillStyle();return G(t)&&t}}),this.AO=t,this.gO=e,this.OB=t.pO(),this.wV=this.OB.cz,this.EV=t.Ca.Ia}Oo(){const t={Fs:e=>this.RV(t,e),Dt:e=>this.zV(t,e),TA:(e,i)=>this.OV(t,e,i),xF:e=>this.VV(t,e),Wi:{x:0,y:0},Hi:{x:0,y:0},xt:0,BI:void 0,NV:this.FV.length,GV:!0,UV:!0};return this.PV=!0,this.FV.push(t),t}ii(){return this.FV.length=0,this.IV=!0,this.St.Pt(this),this}$V(){return this.FV.length}T(t){const e=this.FV[t];return[e.Wi,e.Hi]}ev(){return this.FV}qd(t){const e=this.FV.indexOf(t);e>=0&&(this.FV.splice(e,1),t.UV||(this.IV=!0),this.St.Pt(this))}RV(t,e){if(e&&!t.GV)t.NV=this.FV.length,this.FV.push(t);else if(!e){const e=this.FV.indexOf(t);this.FV.splice(e,1)}return t.GV=e,t.UV||(this.BV=!0),t}zV(t,e){return t.xt=e,t.UV||(this.LV=!0),t}OV(t,e,i){return t.Wi=e,t.Hi=i,t.UV||(this.IV=!0),t}VV(t,e){return t.BI=e,t.UV||(this.DV=!0),t}Dr(){const t=this.dt.T(),e=this.dt.u,i=this.nl(),s=this.gu,r=this.FV,n=this.LV,o=this.IV,h=this.BV,a=this.DV,l=this.PV,c=this.bO.lineStyleSolid(i),u=this.bO.lineStyleDashed(i),d=c||u,f=this.bO.lineFillSolid(i),g=this.bO.lineIndividualPointFill(i),y=this.bO.lineFillRadialGradient(i),p=this.bO.lineFillLinearGradient(i),m=f||g||p||y,x=s.Wt(),S=u?"triangulated":s.getThickness()<0?"primitive":"triangulated";if(u&&this.ct instanceof as)return Wt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;this.dD.xR(this.ct);const v=this.Su,A=o||h,b=!A&&l;if(A||b){const t=A?r:r.filter((t=>t.UV)),e=[],i=t.length;let s=hi,n=hi,o=ai,h=ai;for(let r=0;r<i;r+=1){const i=t[r];e.push(i.Wi),e.push(i.Hi),s=Math.min(s,i.Wi.x,i.Hi.x),n=Math.min(n,i.Wi.y,i.Hi.y),o=Math.max(o,i.Wi.x,i.Hi.x),h=Math.max(h,i.Wi.y,i.Hi.y)}this._V=this.OB.HR(this._V,Ae(e,this.ct.Ni()),v*(this.ct.Ni()?8:4),A,Float32Array),this.Ql=b?Ti(this.Ql,{min:{x:s,y:n},max:{x:o,y:h}}):{min:{x:s,y:n},max:{x:o,y:h}}}if(i||e){const e=f?"uniform":g?"attribute":p?["gradient",p]:y?["gradient",y]:void 0,i=d&&m&&x>0&&e;this.CV=i?"triangulated"===S?{type:"triangulated",shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:e}),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0,snapToNearestPixel:this.EV,ensureMinimumSegmentLength:void 0!==this.xu}),this.wV?Hy.AliasedEdge:void 0,u&&Hy.StippleTextureInstanced,Hy.AttributeHighlight),mousePicking:t?{shader:this.OB.uE(Hy["2D"],Hy.MousePicking({useAttribute:!0}),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0,snapToNearestPixel:this.EV,ensureMinimumSegmentLength:void 0!==this.xu}),u&&Hy.StippleTextureInstanced,Hy.AttributeHighlight)}:void 0,geometry:qp(this.OB,x,!1),thickness:x,lineStyleSolid:c,lineStyleDashed:u,fillStyleSolid:f,fillStyleIndividual:g,fillStyleLinearGradient:p,fillStyleRadialGradient:y}:{type:"primitive",shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:e}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0,snapToNearestPixel:this.EV}),Hy.AttributeHighlight),mousePicking:t?{shader:this.OB.uE(Hy["2D"],Hy.MousePicking({useAttribute:!0}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0,snapToNearestPixel:this.EV}),Hy.AttributeHighlight)}:void 0,lineStyleSolid:c,lineStyleDashed:u,fillStyleSolid:f,fillStyleIndividual:g,fillStyleLinearGradient:p,fillStyleRadialGradient:y}:void 0}if(u){if(i||A||b){const t=A||i?r:r.filter((t=>t.UV)),e=new Float32Array(4*t.length);let s=0;for(let i=0;i<t.length;i+=1){const r=t[i].Wi,n=t[i].Hi;e[s]=0,e[s+1]=0,e[s+2]=Math.abs(n.x-r.x),e[s+3]=Math.abs(n.y-r.y),s+=4}this.kV=this.OB.HR(this.kV,e,4*v,A||i,Float32Array)}this.TV=this.OB.Oz(u.getPattern())}else this.kV&&(this.OB.wR(this.kV.buffer),this.kV=void 0),this.TV=void 0;if(n||A||b){const t="triangulated"===S?1:2,e=A||n?r:r.filter((t=>t.UV)),i=new Float32Array(e.length*t);let s=0;e.forEach((e=>{for(let r=0;r<t;r+=1)i[s+r]=e.xt;s+=t})),this.YV=this.OB.HR(this.YV,i,v*t,A||n,Float32Array)}if((a||A||b||i)&&g){const t=A||a||i?r:r.filter((t=>t.UV)),e=new Uint32Array(2*t.length);let s=0;t.forEach((t=>{const i=(t.BI||g.color).toUint32();for(let t=s;t<s+2;t+=1)e[t]=i;s+=2})),this.HV=this.OB.HR(this.HV,e,2*v,A||a,Uint32Array)}if(t){if(A||b||e){const t="triangulated"===S?1:2,i=A||e?r:r.filter((t=>t.UV)),s=new Float32Array(i.length*t);let n=0;i.forEach((e=>{for(let i=0;i<t;i+=1)s[n+i]=e.NV||0;n+=t})),this.XV=this.OB.HR(this.XV,s,v*t,A,Float32Array)}}else this.XV&&(this.OB.wR(this.XV.buffer),this.XV=void 0);y?this.FO=Cp(this.yt||this.Ql,this.ct,y.getPosition(),y.getExtent(),y.getShape(),this.OB.QE()):p?this.IO=Mp(this.yt||this.Ql,this.ct,p.getAngle(!0),this.OB.QE()):(this.FO=void 0,this.IO=void 0),this.yu(s),this.LV=!1,this.BV=!1,this.IV=!1,this.DV=!1,this.dt.u=!1,this.PV=!1;for(const t of r)t.UV=!1;return this}Bu(t,e){var i;const s=this._V,r=this.YV,n=this.XV;if(!s||!r)return{};const o=this.CV;if(!o)return{};const{type:h,fillStyleSolid:a,fillStyleIndividual:l,fillStyleLinearGradient:c,fillStyleRadialGradient:u,lineStyleDashed:d}=o,f=1===t?null===(i=o.mousePicking)||void 0===i?void 0:i.shader:o.shader;return f?(this.OB.QB(f).dR(f,((i,f,g,y)=>{if(this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).AR(y("uScaleStart_highpart"),this.dD.Wz()).AR(y("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(y("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(y("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(y("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(y("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(i("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(i("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),this.EV&&this.OB.AR(y("uViewportSizePx"),[this.St.Mi().x*this.OB.QE(),this.St.Mi().y*this.OB.QE()]),void 0!==this.xu&&this.OB.AR(i("uMinSegmentPixelVector"),[this.xu.x,this.xu.y]),this.OB.xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0),1===t){if(this.OB.NR(i("uFirstId"),e),!n)return!1;"triangulated"===h?this.OB.fR(n.buffer,1,{location:f("aPickingIdOffset"),size:1}):this.OB.qR(f("aPickingIdOffset"),n.buffer)}else if(a)this.OB.xF(i("uColor"),a.getColor());else if(l){if(!this.HV)return!1;if("triangulated"===h)Zp.SV(this.OB,g,this.HV.buffer,f("aColorA"),f("aColorB"),4,0,!0,this.OB.gl.UNSIGNED_BYTE,1);else{const t=f("aColor");this.OB.gl.bindBuffer(this.OB.gl.ARRAY_BUFFER,this.HV.buffer),this.OB.gl.vertexAttribPointer(t,4,this.OB.gl.UNSIGNED_BYTE,!0,0,0),this.OB.gl.enableVertexAttribArray(t)}}else if(u){if(!this.FO)return!1;this.OB.wz(g,this.FO,u)}else if(c){if(!this.IO)return!1;this.OB._z(g,this.IO,c)}if(d){if(!this.kV||!this.TV)return!1;Zp.SV(this.OB,g,this.kV.buffer,f("aLengthSoFarA"),f("aLengthSoFarB"),2,0,!1,this.OB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),this.OB.AR(i("uStippleCount"),[this.St.Mi().x/this.TV.Gz,this.St.Mi().y/this.TV.Gz]).pR(y("uStippleTextureWidthLimiter"),this.TV.Nz/this.TV.Gz).pR(i("uStippleScale"),d.getPatternScale()).gR(i("uStippleTexture"),this.TV.Vz,0)}if("triangulated"===h){const{geometry:e,thickness:i}=o;Zp.xV(this.ct.Ni(),this.OB,s.buffer,g,this.ct.Ni()?4:2,0),this.OB.fR(r.buffer,1,{location:f("aIsHighlighted"),size:1}),Zp.Bu(this.AO,e,g,this.wV&&1!==t,1===t,i,this.FV.length)}else Kp.xV(this.ct.Ni(),this.OB,s.buffer,g,this.ct.Ni()?4:2,0),this.OB.qR(f("aIsHighlighted"),r.buffer),Kp.MV(this.AO,this.FV.length);return!0})),{idCount:this.FV.length}):{}}dispose(){return super.dispose(),this.CV=void 0,this._V&&(this.OB.wR(this._V.buffer),this._V=void 0),this.kV&&(this.OB.wR(this.kV.buffer),this.kV=void 0),this.YV&&(this.OB.wR(this.YV.buffer),this.YV=void 0),this.XV&&(this.OB.wR(this.XV.buffer),this.XV=void 0),this.HV&&(this.OB.wR(this.HV.buffer),this.HV=void 0),this.TV=void 0,this}Eu(t,e,i,s,r){return{collectionMember:this.FV.find((i=>e+i.NV===t))}}Du(){return this}Dt(t){super.Dt(t);for(const e of this.FV)e.Dt(t);return this}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}Cc(){return je(this.gu)}kc(){return je(this.gu)}}class sm{constructor(t,e){this.WV=!1,this.jV=!1,this.ZV=!1,this.ct=t,this.QV=e,this.QV.Tt("DataPattern",(t=>{"ProgressiveX"!==t.pattern&&"RegressiveX"!==t.pattern||(this.WV="x"),"ProgressiveY"!==t.pattern&&"RegressiveY"!==t.pattern||(this.WV="y"),"RegressiveX"!==t.pattern&&"RegressiveY"!==t.pattern||(this.jV=!0),!0===t.regularProgressiveStep&&(this.ZV=!0)}))}calculateUserDataPointsProgressiveRange(t){if(0===t.length)throw new Error("calculateUserDataPointsProgressiveRange called with 0 data points");return{start:"x"===this.WV?t[0].x:t[0].y,end:"x"===this.WV?t[t.length-1].x:t[t.length-1].y}}calculateUserDataPointsBoundaries(t){return this.WV?"x"===this.WV?function(t){const e=t.length;if(e>0){const i=Math.max(t[e-1].x,t[0].x),s=Math.min(t[e-1].x,t[0].x);let r=t[0].y,n=t[0].y;for(let i=0;i<e;i+=1){const e=t[i];e.y>r&&(r=e.y),e.y<n&&(n=e.y)}return g(l(s,n),l(i,r))}return li}(t):function(t){const e=t.length;if(e>0){const i=Math.max(t[e-1].y,t[0].y),s=Math.min(t[e-1].y,t[0].y);let r=t[0].x,n=t[0].x;for(let i=0;i<e;i+=1){const e=t[i];e.x>r&&(r=e.x),e.x<n&&(n=e.x)}return g(l(n,s),l(r,i))}return li}(t):Ci(t)}calculateAvgStepBetweenDataPoints(t,e,i){return Math.abs(t-e)/(i-1)}}const rm=Math.min(1,1.5);class nm extends sm{constructor(t,e,i){super(t,e),this.JV=!1,this.KV={enabled:!1,totalDataPointsAtTime:0},this.qV=[],this.Bs=i,this.tN=t instanceof hs?{type:"linear",scale:t}:t instanceof as?{type:"mixed",scale:t}:{type:"unknown"},this.QV.Tt("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.JV=!0)}))}iN(t,e=!1){if(this.JV||!this.WV||"linear"!==this.tN.type)return!1;!1===e&&this.sN&&(clearTimeout(this.sN),this.sN=void 0);const i="x"===this.WV?this.tN.scale.x.tA:this.tN.scale.y.tA;if(!i)throw new Error("CP helper has no information about Axis state.");const s=t.length;if(s<2)return!1;const r=t[0],n=t[s-1],o=this.calculateAvgStepBetweenDataPoints("x"===this.WV?r.x:r.y,"x"===this.WV?n.x:n.y,s),h=this.tN.scale,a=Math.abs("x"===this.WV?h.rs().x:h.rs().y),l=a/o,c=Math.floor(l*rm),u=c*o,d=Wt.performance.now(),f=!(d-i.Nh<500)&&(i.Dh?d-i.Vh<1e3:d-i.Eh<2e3||i.zh),g=s>2*this.KV.totalDataPointsAtTime;if(f&&!g)return this.sN=setTimeout((()=>this.eN(t)),1e3),!1;const y=c>=10,p=this.KV.enabled?this.KV.columnWidthAxis/a<1.5:void 0,m=this.KV.enabled&&c>this.KV.dataPointsPerColumn?c/this.KV.dataPointsPerColumn>=2:void 0;let x;!0===this.KV.enabled?p?m&&(x={enabled:!0,columnWidthAxis:u,dataPointsPerColumn:c,totalDataPointsAtTime:s}):x=y?{enabled:!0,columnWidthAxis:u,dataPointsPerColumn:c,totalDataPointsAtTime:s}:{enabled:!1,totalDataPointsAtTime:s}:y&&(x={enabled:!0,columnWidthAxis:u,dataPointsPerColumn:c,totalDataPointsAtTime:s});const S=!1===e;return x?(S&&(this.KV=x),!0):(S&&(this.KV={...this.KV,totalDataPointsAtTime:s}),!1)}hN(){this.rN=void 0,this.qV.length=0,this.sN&&(clearTimeout(this.sN),this.sN=void 0)}nN(t){if(0===t.length)return t;if(this.JV||!this.WV||"linear"!==this.tN.type||!this.KV.enabled)return t;let e;e=this.qV.length>0?ke(this.qV,t,{canReturnB:!0}):t;const i=e.length,s=[];let r,n,o=void 0===this.rN,h=-1,a=-1,l=0,c=0;if("x"!==this.WV||this.jV)if("x"===this.WV&&this.jV){const t=this.KV.columnWidthAxis;let u=this.rN?this.rN.x:e[0].x,d=u-t;for(let f=0;f<i;f+=1){const i=e[f];i.x>=d?((!r||i.y>r.y)&&(r=i,h=f),(!n||i.y<n.y)&&(n=i,a=f),c=f):(r&&n&&(o&&s.push(e[0]),h<a?s.push(r,n):s.push(n,r)),o=!1,u=i.x,d=u-t,r=i,h=f,n=i,a=f,l=f,c=f)}}else if("y"!==this.WV||this.jV){if("y"===this.WV&&this.jV){const t=this.KV.columnWidthAxis;let u=this.rN?this.rN.y:e[0].y,d=u-t;for(let f=0;f<i;f+=1){const i=e[f];i.y>=d?((!r||i.x>r.x)&&(r=i,h=f),(!n||i.x<n.x)&&(n=i,a=f),c=f):(n&&r&&(o&&s.push(e[0]),h<a?s.push(r,n):s.push(n,r)),o=!1,u=i.y,d=u-t,r=i,h=f,n=i,a=f,l=f,c=f)}}}else{const t=this.KV.columnWidthAxis;let u=this.rN?this.rN.y:e[0].y,d=u+t;for(let f=0;f<i;f+=1){const i=e[f];i.y<=d?((!r||i.x>r.x)&&(r=i,h=f),(!n||i.x<n.x)&&(n=i,a=f),c=f):(n&&r&&(o&&s.push(e[0]),h<a?s.push(r,n):s.push(n,r)),o=!1,u=i.y,d=u+t,r=i,h=f,n=i,a=f,l=f,c=f)}}else{const t=this.KV.columnWidthAxis;let u=this.rN?this.rN.x:e[0].x,d=u+t;for(let f=0;f<i;f+=1){const i=e[f];i.x<=d?((!r||i.y>r.y)&&(r=i,h=f),(!n||i.y<n.y)&&(n=i,a=f),c=f):(r&&n&&(o&&s.push(e[0]),h<a?s.push(r,n):s.push(n,r)),o=!1,u=i.x,d=u+t,r=i,h=f,n=i,a=f,l=f,c=f)}}if(r||n){const t=e.slice(l,c+1);this.qV=t}else this.qV.length=0;const u=s.length;return u>0&&(this.rN=s[u-1]),s}oN(t){var e,i;if(this.WV&&"linear"===this.tN.type){const s="x"===this.WV?this.tN.scale.x.tA:this.tN.scale.y.tA;if(!s)throw new Error("CP helper has no information about Axis state.");if((null===(e=s.Ir)||void 0===e?void 0:e.id)===hn||(null===(i=s.Ir)||void 0===i?void 0:i.id)===an){const e=Math.abs("x"===this.WV?this.tN.scale.x.getInnerInterval():this.tN.scale.y.getInnerInterval());if(this.KV.enabled)return 2*e/this.KV.columnWidthAxis;const i=t.length,s=t[0],r=t[i-1];return e/this.calculateAvgStepBetweenDataPoints("x"===this.WV?s.x:s.y,"x"===this.WV?r.x:r.y,i)}}}aN(t,e,i){if(!this.WV)return e;const s=i.length;let r=mt(i,t.min,this.WV,this.jV,0,s-1);void 0===r&&(r=this.jV?s-1:0);let n=mt(i,t.max,this.WV,this.jV,0,s-1);return void 0===n&&(n=this.jV?0:s-1),1+Math.abs(n-r)}lN(){this.sN&&(clearTimeout(this.sN),this.sN=void 0)}eN(t){this.iN(t,!0)&&this.Bs()}}class om extends sm{renderVisibleOnly(t,e,i=!1){const s=this.ct.x.getInnerStart(),r=this.ct.x.getInnerEnd(),n=Math.min(s,r),o=Math.max(s,r),h=this.ct.y.getInnerStart(),a=this.ct.y.getInnerEnd(),l=Math.min(h,a),c=Math.max(h,a);t.forEach(((t,s)=>{t.existingCoordinatesCount<=1||!1===i&&(t.boundaries.max.x<n||t.boundaries.min.x>o||t.boundaries.max.y<l||t.boundaries.min.y>c)||e(t)}))}}class hm{constructor(t,e,i){this.cN=e,this.uN=i,this.dN=t,this.fN=[]}AN(t,e,i,s){const r=t.length;if(0===r)return;let n=t,o=r,h=this.dN[this.dN.length-1];do{const t=this.dN.length;let r;h||(h=this.gN(e,o)),h&&0==h.allocatedCoordinatesCount-h.existingCoordinatesCount&&(h=void 0);let a=0;if(this.uN&&t>0&&(void 0===h||0===h.existingCoordinatesCount)){const e=this.dN[t-1].lastDataPoint;e?(n.splice(0,0,e),a=1,o+=1):console.error("SegmentationHelper _connectSegments = true, but segment has no lastDataPoint information!")}if(h)r=Math.min(o,h.allocatedCoordinatesCount-h.existingCoordinatesCount),s(h,n.slice(0,r),r,a);else{const t=Math.ceil(e)+a;r=Math.min(t,o);const s={...i(t,n.slice(0,r),r,a),isDropped:!1};this.dN.push(s)}r>0&&(o>r?(n=n.slice(r),o=n.length):(n=[],o=0))}while(o>0);this.pN()}vN(t){const e=t,i=this.dN.indexOf(e);i>=0&&this.dN.splice(i,1),e.droppedTimestamp=Wt.performance.now(),this.fN.push(e)}yN(){this.dN.slice().forEach((t=>this.vN(t)))}mN(){this.dN.forEach((t=>this.cN(t))),this.fN.forEach((t=>this.cN(t))),this.dN.length=0,this.fN.length=0}gN(t,e){const i=2*t/3,s=4*t/3,r=this.fN.findIndex((t=>t.allocatedCoordinatesCount>=i&&t.allocatedCoordinatesCount<=s));if(r>=0){const t=this.fN[r];return this.fN.splice(r,1),this.dN.push(t),t}}pN(){if(this.fN.length>5){const t=Wt.performance.now();for(let e=0;e<this.fN.length-5;e+=1){const i=this.fN[e];(void 0===i.droppedTimestamp||t-i.droppedTimestamp>=1e4)&&(this.cN(i),this.fN.splice(e,1),e-=1)}}}}class am extends sm{xN(t,e){if(!e||"object"!=typeof e)return 0;const i=this.ct.x.getInnerStart(),s=this.ct.x.getInnerEnd(),r=Math.min(i,s),n=Math.max(i,s),o=this.ct.y.getInnerStart(),h=this.ct.y.getInnerEnd(),a=Math.min(o,h),l=Math.max(o,h);if("maxDataPointCount"in e)return this.SN(t,e.maxDataPointCount,r,n,a,l);if("minDataPointCount"in e)return this.bN(t,e.minDataPointCount,r,n,a,l);if("progressiveDataCleaningThreshold"in e)return this.MN(t,e.progressiveDataCleaningThreshold,r,n,a,l);throw new Error(`Unimplemented data cleaning configuration: ${JSON.stringify(e)}`)}SN(t,e,i,s,r,n){if(void 0===e||e<=0)return 0;const o=t.reduce(((t,e)=>t+e.existingDataPointsCount),0);if(o<=e)return 0;let h=0,a=o;for(let i=0;i<t.length;i+=1){const s=t[i];a>e&&(h+=1,a-=s.existingDataPointsCount)}return h}MN(t,e,i,s,r,n){if(void 0===e||!this.WV)return 0;let o=0;for(let h=0;h<t.length;h+=1){const a=t[h],l=this.jV?"x"===this.WV?a.boundaries.min.x>s:a.boundaries.min.y>n:"x"===this.WV?a.boundaries.max.x<i:a.boundaries.max.y<r;if(!((this.jV?"x"===this.WV?a.boundaries.min.x>e:a.boundaries.min.y>e:"x"===this.WV?a.boundaries.max.x<e:a.boundaries.max.y<e)&&l&&a.existingCoordinatesCount>2))break;o+=1}return o}bN(t,e,i,s,r,n){if(void 0===e||0===e)return 0;let o=0,h=0;for(let a=t.length-1;a>=0;a-=1){const l=t[a];if(h>e)if(this.WV){if(this.jV?"x"===this.WV?l.boundaries.min.x>s:l.boundaries.min.y>n:"x"===this.WV?l.boundaries.max.x<i:l.boundaries.max.y<r){o=1+a;break}}else l.boundaries.max.x<i||l.boundaries.min.x>s||l.boundaries.max.y<r||l.boundaries.min.y>n?o+=1:o=0;h+=l.existingDataPointsCount}return o}wN(t,e){const i=t.reduce(((t,e)=>Ti(t,e.boundaries)),li);if(e&&"progressiveDataCleaningThreshold"in e&&e.progressiveDataCleaningThreshold){const t=e.progressiveDataCleaningThreshold;"x"!==this.WV||this.jV?"x"===this.WV&&this.jV?i.max.x=Math.min(i.max.x,t):"y"!==this.WV||this.jV?"y"===this.WV&&this.jV&&(i.max.y=Math.min(i.max.y,t)):i.min.y=Math.max(i.min.y,t):i.min.x=Math.max(i.min.x,t)}return i}}class lm extends Ro{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.dD=new Lp,this.xb=[],this._N=new om(this.ct,this),this.CN=new nm(this.ct,this,(()=>this.St.Bs())),this.kN=new hm(this.xb,(t=>{t.coordsBuffer&&this.OB.wR(t.coordsBuffer),t.kV&&this.OB.wR(t.kV)}),!0),this.TN=new am(this.ct,this),this.FN=0,this.IN=0,this.PN=!1,this.bO=yr({lineStyleSolid:()=>ir(this.gu)&&this.gu,lineStyleDashed:()=>or(this.gu)&&this.gu,strokeFillSolid:()=>{const t=this.gu.getFillStyle();return X(t)&&t},strokeFillLinearGradient:()=>{const t=this.gu.getFillStyle();return et(t)&&t},strokeFillRadialGradient:()=>{const t=this.gu.getFillStyle();return Z(t)&&t},strokeFillPaletted:()=>{const t=this.gu.getFillStyle();return j(t)&&t}}),this.gO=e,this.Ca=n,this.CV={type:"none"},this.OB=t.pO(),this.AO=t,this.wV=this.OB.cz;const o=this.ct.Ni(),h=!0===(null==n?void 0:n.individualLookupValuesEnabled);let a,l,c,u=0;o||(a=u,u+=2),o&&(l=u,u+=4),h&&(c=u,u+=1);const d=((t,e)=>e?(e,i)=>((t,e)=>{if(!e){const e=t.length,i=new Float32Array(3*e);for(let s=0,r=0;s<e;s+=1){const e=t[s];i[r+0]=e.x,i[r+1]=e.y,i[r+2]=void 0!==e.value?e.value:0,r+=3}return i}const i=t.length,s=new Float32Array(5*i);let r=0;for(let e=0;e<i;e+=1){const i=t[e],n=Math.fround(i.x),o=Math.fround(i.y);s[r+0]=n,s[r+1]=o,s[r+2]=i.x-n,s[r+3]=i.y-o,s[r+4]=void 0!==i.value?i.value:0,r+=5}return s})(e,t):(e,i)=>Ae(e,t,Float32Array))(o,h);this.LN={individualLookupValuesEnabled:h,attributesPerVertex:u,attributeOffsetCoordinateLowPrecision:a,attributeOffsetCoordinateHighPrecision:l,attributeOffsetLookUpValue:c,prepareRenderData:(t,e)=>d(t,this.gu.getFillStyle())}}DN(t,e,i){const s=new Float32Array(2*e);let r=0,n=i||t[0];for(let i=0;i<e;i+=1){const e=t[i];this.FN+=Math.abs(n.x-e.x),this.IN+=Math.abs(n.y-e.y),s[r]=this.FN,s[r+1]=this.IN,r+=2,n=e}return s}Dr(){const t=this.sc,e=this.gu,i=this.nl(),s=this.Kl,r=s.length,n=r>0,o=this.dt.T(),h=this.dt.u,a=this.bO.lineStyleSolid(i),l=this.bO.lineStyleDashed(i),c=a||l,u=c&&c.getThickness(),d=this.bO.strokeFillSolid(i),f=this.bO.strokeFillLinearGradient(i),g=this.bO.strokeFillRadialGradient(i),y=this.bO.strokeFillPaletted(i),p=d||f||g||y,m=this.LN.individualLookupValuesEnabled;if(l&&this.ct instanceof as)return Wt.console.error("LightningChart JS DashedLine is not supported on logarithmic axis"),this;n&&(this.bu=ke(this.bu,s,{canReturnB:!0}),this.Jl+=r);let x=this.Mu.u;const S=this.TN.xN(this.xb,this.Mu.T());if(S>0){let t=0;for(let e=0;e<S;e+=1){const e=this.xb[0];t+=e.existingDataPointsCount,e.existingDataPointsCount=0,e.existingCoordinatesCount=0,e.jointPointsCount=0,e.boundaries=li,e.lastDataPoint=void 0,this.kN.vN(e)}this.bu=this.bu.slice(t),this.Jl=this.bu.length,x=!0}let v=s,A=!1;(this.CN.iN(this.bu)||t)&&(A=!0),l&&!this.PN?(A=!0,this.PN=!0,this.kN.mN()):!l&&this.PN&&(this.xb.forEach((t=>{t.kV&&(this.OB.wR(t.kV),t.kV=void 0)})),this.PN=!1),A&&(this.CN.hN(),this.xb.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.jointPointsCount=0,t.boundaries=li,t.lastDataPoint=void 0})),this.kN.yN(),v=this.bu,this.FN=0,this.IN=0);const b=this.CN.nN(v),C=b.length;if(C>0){let t=this.CN.oN(this.bu)||(this.Tt("ApplicationType",(t=>"InternalUI"===t.type))?this.Jl:1e5);C/t>10&&(t=C/10),this.kN.AN(b,t,((t,e,i,s)=>{const r=this._N.calculateUserDataPointsBoundaries(e),n=this.CN.aN(r,i,this.bu)-s;return this.EN=e[i-1],{allocatedCoordinatesCount:t,existingDataPointsCount:n,existingCoordinatesCount:i,jointPointsCount:s,boundaries:r,coordsBuffer:this.OB.$R(t*this.LN.attributesPerVertex,this.LN.prepareRenderData(e,i)),lastDataPoint:e[i-1],kV:this.PN?this.OB.$R(2*t,this.DN(e,i,this.EN)):void 0}}),((t,e,i,s)=>{const r=Ti(t.boundaries,this._N.calculateUserDataPointsBoundaries(e)),n=this.CN.aN(r,t.existingCoordinatesCount+i,this.bu)-(t.jointPointsCount+s);this.OB.YR(t.coordsBuffer,t.existingCoordinatesCount*this.LN.attributesPerVertex,this.LN.prepareRenderData(e,i)),this.PN&&t.kV&&this.OB.YR(t.kV,2*t.existingCoordinatesCount,this.DN(e,i,this.EN)),this.EN=e[i-1],t.jointPointsCount+=s,t.lastDataPoint=e[i-1],t.existingDataPointsCount=n,t.existingCoordinatesCount+=i,t.boundaries=r}))}if(x&&(this.Ql=this.TN.wN(this.xb,this.Mu.T())),this.dD.xR(this.ct),g?this.OO=Cp(this.yt||this.Ql,this.ct,g.getPosition(),g.getExtent(),g.getShape(),this.OB.QE()):f?this.VO=Mp(this.yt||this.Ql,this.ct,f.getAngle(!0),this.OB.QE()):(this.OO=void 0,this.VO=void 0),i||h){if(y&&"value"===y.getLookUpProperty()&&!m){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Wt.alert(t),new Error(t)}if(p&&c&&!1!==u){const t=-1===u?"primitive":"triangulated",e=f?["gradient",f]:g?["gradient",g]:y?["lookup",y.getLookUpProperty(),y.lut]:"uniform";this.CV="primitive"===t?{type:t,shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:e}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}),l&&Hy.StippleTexture),mousePickingShader:o?this.OB.uE(Hy["2D"],Hy.MousePicking({useVertexId:!0}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}),l&&Hy.StippleTexture):void 0,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:g,fillStylePaletted:y}:"triangulated"===t?{type:t,shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:e}),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0}),this.wV?Hy.AliasedEdge:void 0,l&&Hy.StippleTextureInstanced),mousePickingShader:o?this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0}),l&&Hy.StippleTextureInstanced):void 0,geometry:qp(this.OB,u),thickness:u,lineStyleSolid:a,lineStyleDashed:l,fillStyleSolid:d,fillStyleLinearGradient:f,fillStyleRadialGradient:g,fillStylePaletted:y}:{type:"none"}}else this.CV={type:"none"}}return this.TV=l?this.OB.Oz(l.getPattern()):void 0,this.yu(e),this.sc=!1,this.Kl=[],this.dt.u=!1,this.Mu.u=!1,this}Bu(t,e){const i=this.OB.gl,s=this.CV;if(!s||"none"===s.type)return{};const r=1===t?s.mousePickingShader:s.shader;if(!r)return{};const{lineStyleDashed:n,fillStyleSolid:o,fillStyleLinearGradient:h,fillStyleRadialGradient:a,fillStylePaletted:l}=s;return this.OB.QB(r).dR(r,((r,c,u,d)=>{let f=!1;if(this.OB.pR(r("uIsHighlighted"),1===t||2===t?0:this.xt).xF(r("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(r("uRenderEffectMask"),2===t?1:0),this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(r("uScale"),this.dD.vR()).AR(r("uDisp"),this.dD.yR()).AR(d("uScaleStart_highpart"),this.dD.Wz()).AR(d("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(d("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(d("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(d("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(d("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(r("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(r("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),1===t);else if(o)this.OB.xF(r("uColor"),o.getColor());else if(a){if(!this.OO)return!1;this.OB.wz(u,this.OO,a)}else if(h){if(!this.VO)return!1;this.OB._z(u,this.VO,h)}else if(l){const t=pr(l,this,void 0);if(!t&&l.lut.percentageValues)return!1;this.OB.Uz(u,l.lut,t)}const g=ii(e);return this._N.renderVisibleOnly(this.xb,(e=>{const{coordsBuffer:o}=e;if(!o)return;if(1===t){const[t,i]=g.hi(e.existingDataPointsCount);this.OB.NR(r("uFirstId"),t),"triangulated"===s.type?this.OB.Ez(u,i):this.OB.Bz(u,i)}i.bindBuffer(i.ARRAY_BUFFER,o);const h="triangulated"===s.type?Zp.yV:Kp.yV;if(this.ct.Ni()||void 0===this.LN.attributeOffsetCoordinateLowPrecision?this.ct.Ni()&&void 0!==this.LN.attributeOffsetCoordinateHighPrecision&&h(!0,this.OB,o,u,this.LN.attributesPerVertex,this.LN.attributeOffsetCoordinateHighPrecision):h(!1,this.OB,o,u,this.LN.attributesPerVertex,this.LN.attributeOffsetCoordinateLowPrecision),n){if(!e.kV||!this.TV)return;"triangulated"===s.type?Zp.mV(this.OB,u,e.kV,c("aLengthSoFarA"),c("aLengthSoFarB"),2,2,0):Kp.mV(this.OB,u,e.kV,c("aLengthSoFar"),2,0),this.OB.AR(r("uStippleCount"),[this.St.Mi().x/this.TV.Gz,this.St.Mi().y/this.TV.Gz]).pR(d("uStippleTextureWidthLimiter"),this.TV.Nz/this.TV.Gz).pR(r("uStippleScale"),n.getPatternScale()).gR(r("uStippleTexture"),this.TV.Vz,1)}if(l&&"value"===l.lookUpProperty&&void 0!==this.LN.attributeOffsetLookUpValue&&1!==t)if("triangulated"===s.type){const t=c("aLookupValueA");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.LN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),this.OB.QR(t,1),i.enableVertexAttribArray(t);const e=c("aLookupValueB");i.vertexAttribPointer(e,1,i.FLOAT,!1,this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,(this.LN.attributeOffsetLookUpValue+this.LN.attributesPerVertex)*Float32Array.BYTES_PER_ELEMENT),this.OB.QR(e,1),i.enableVertexAttribArray(e)}else{const t=c("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.LN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),i.enableVertexAttribArray(t)}if("triangulated"===s.type){const{thickness:i}=s;Zp.Bu(this.AO,s.geometry,u,this.wV&&1!==t,1===t,i,e.existingCoordinatesCount-1)}else Kp.bV(this.AO,e.existingCoordinatesCount);f=!0}),void 0===this.ls),i.bindBuffer(i.ARRAY_BUFFER,null),f})),{idCount:this.Jl}}Eu(t,e,i,s,r){return{}}dc(t,e){return Array.isArray(t)||(t=[t]),this.Kl=ke(this.Kl,t,{canReturnB:!0}),this.Ql=Ti(this.Ql,e||e||this._N.calculateUserDataPointsBoundaries(t)),this}ii(){return super.ii(),this.FN=0,this.IN=0,this.EN=void 0,this}dispose(){return super.dispose(),this.kN.mN(),this.CN.lN(),this.CV={type:"none"},this.TV=void 0,this}Du(){return this}zS(t){this.Ac()>0&&this.Dr();const e=this.nc(),i=ft(e,t,this.kt(),this.Ec,this.Rc,this.ct,this.engine.ct,this.Ql,this._N.WV,this._N.jV);return void 0!==i?e[i]:void 0}eM(t){this.Ac()>0&&this.Dr();const e=this.nc(),i=e.length;if(0===i)return;const s=this.Ec?1:0,r=i-(this.Rc?2:1),n=this.kt();if(n===dt.Nearest){let s,r,n=hi;for(let o=0;o<i;o+=1){const i=ot(e[o],this.ct,this.St.ct);if(void 0!==r){const e=mi(r,i,t),o=(e.x-t.x)**2+(e.y-t.y)**2;o<n&&(n=o,s=e)}r=i}return void 0!==s?ot(s,this.St.ct,this.ct):void 0}if("x"===this._N.WV&&n===dt.NearestX||"y"===this._N.WV&&n===dt.NearestY){const i=xt(e,ot(t,this.St.ct,this.ct),this._N.WV,this._N.jV,s,r);return i?Ai(e[i.a],e[i.b],i.lerpAmount):void 0}return this.zS(t)}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}Cc(){return je(this.gu)}kc(){return je(this.gu)}}class cm extends Tp{constructor(t,e,i,s){super(t),this.vV=i,this.RN=e,this.zN=Ae(e,!1),this.ON=e.length,this.TB=t.cR(this.zN);const r=Ci(this.RN);this.H=l(r.max.x-r.min.x,r.max.y-r.min.y),this.VN=s}NN(t){return t>1}Pp(t,e,i,s,r){return"object"==typeof s?e?this.OB.qR(t.attribute("aOffsetScale"),e,1).AR(t.uniform(fy),[s.width,s.height]):this.OB.pR(t.uniform("uOffsetScale"),s.scale).AR(t.uniform(fy),[s.width,s.height]):r?e?this.OB.qR(t.attribute("aOffsetPixels"),e,1):this.OB.pR(t.uniform("uOffsetPixels"),s):this.OB.pR(t.uniform("uPointSize"),s),r?this.OB.fR(this.TB,0,{location:t.attribute("aInstanceGeo"),size:2}).ez(this.vV,0,this.ON,i):this.OB.Pp(this.OB.gl.POINTS,i),this}LE(){this.OB.wR(this.TB)}}const um=(t,e=0)=>{const i=[l(-.5,-.5),l(.5,-.5),l(.5,.5),l(-.5,.5)];return new cm(t,i,t.gl.TRIANGLE_FAN,e)},dm=(t,e=0)=>{const i=.05,s=[l(-.5,-.05),l(.5,-.05),l(.5,i),l(.5,i),l(-.5,i),l(-.5,-.05),l(-.05,-.5),l(i,-.5),l(i,.5),l(i,.5),l(-.05,.5),l(-.05,-.5)];return new cm(t,s,t.gl.TRIANGLES,e)},fm=(t,i,s)=>{if(lr(t))return fm(e.PointShape.Square,i,s);let r=i.PR.wE.get(t);if(t===e.PointShape.Circle||t===e.PointShape.HollowCircle){const n=s<=3?4:s<=5?8:s<=10?16:24;return t===e.PointShape.Circle?(r=i.PR._E.get(n)||((t,e,i=0)=>{const s=function(t=25){return zp(l(0,0),0,360,.5,.5,t)[0]}(e);return new cm(t,s,t.gl.TRIANGLE_FAN,i)})(i,n),i.PR._E.set(n,r),r):(r=i.PR.CE.get(n)||((t,e,i=0)=>{const s=[],r=2*Math.PI/e;for(let t=0;t<=e;t+=1){const e=t*r,i=Math.cos(e),n=Math.sin(e);s.push({x:.5*i,y:.5*n}),s.push({x:.3*i,y:.3*n})}return new cm(t,s,t.gl.TRIANGLE_STRIP,i)})(i,n),i.PR.CE.set(n,r),r)}if(!r){switch(t){case e.PointShape.Triangle:r=((t,e=0)=>{const i=function(){const t=[],e=2/1.73205080757;return t.push(l(-e/2,.3333333333333333)),t.push(l(0,-.6666666666666666)),t.push(l(e/2,.3333333333333333)),t}();return new cm(t,i,t.gl.TRIANGLES,e)})(i);break;case e.PointShape.Square:r=um(i);break;case e.PointShape.Plus:r=dm(i);break;case e.PointShape.Cross:r=dm(i,45);break;case e.PointShape.Diamond:r=um(i,45);break;case e.PointShape.Arrow:r=((t,e=0)=>{const i=.05,s=[l(-.05,-.5),l(i,-.5),l(i,.45),l(i,.45),l(-.05,.45),l(-.05,-.5),l(-.5,0),l(-.4,0),l(0,.4),l(0,.4),l(0,.5),l(-.5,0),l(.5,0),l(.4,0),l(0,.4),l(0,.4),l(0,.5),l(.5,0)];return new cm(t,s,t.gl.TRIANGLES,e)})(i);break;case e.PointShape.Star:r=((t,e=0)=>new cm(t,[{x:0,y:0},{x:0,y:.5},{x:.1,y:.1},{x:.5,y:.1},{x:.2,y:-.1},{x:.3,y:-.5},{x:0,y:-.25},{x:-.3,y:-.5},{x:-.2,y:-.1},{x:-.5,y:.1},{x:-.1,y:.1},{x:0,y:.5}],t.gl.TRIANGLE_FAN,e))(i);break;case e.PointShape.Minus:r=((t,e=0)=>{const i=.05,s=[l(-.5,-.05),l(.5,-.05),l(.5,i),l(.5,i),l(-.5,i),l(-.5,-.05)];return new cm(t,s,t.gl.TRIANGLES,e)})(i);break;default:return Ye(0,"LightningChart JS unidentified point shape")}i.PR.wE.set(t,r)}return r};class gm extends vo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.dD=new Lp,this.xO=g(c(ai,ai),c(hi,hi)),this.bO=yr({pointStyleSolid:()=>X(this.We)&&this.We,pointStyleRadialGradient:()=>Z(this.We)&&this.We,pointStyleLinearGradient:()=>et(this.We)&&this.We,pointStylePaletted:()=>j(this.We)&&this.We,pointStyleIndividual:()=>G(this.We)&&this.We}),this.AO=t,this.gO=e,this.OB=t.pO()}Ft(){return this.hc}Dr(){var t;const e=this.dt.T(),i=this.dt.u,s=this.Kl,r=s.length,n=r>0,o=this.Xl.T(),h=this.We,a=this.size.T(),l=this.Xl.u||this.yl.u,c=this.ct.es(),u=this.size.u||this.Xl.u,d=this.sc||s&&s.length>0,f=c||u,g=this.il(),y=this.bO.pointStyleSolid(g),p=this.bO.pointStyleRadialGradient(g),m=this.bO.pointStyleLinearGradient(g),x=this.bO.pointStylePaletted(g),S=this.bO.pointStyleIndividual(g),v=y||p||m||x||S;if(n&&(this.Hl=ke(this.Hl,s,{canReturnB:!0}),this.Jl+=r),n||this.sc){this.Ql=this.tc?Ti(this.Ql,this.tc):Ti(this.Ql,Ci(this.Hl));const t=Ae(this.Hl,this.ct.Ni());this.GN=this.Jl,this.UN=this.OB.cR(t,!1,this.UN)}this.dD.xR(this.ct),h!==V?f&&(this.$N&&(this.$N=void 0),a>1||this.Wl.T()?a<=1&&!this.Wl.T()?this.vV=this.OB.gl.POINTS:(this.$N=fm(o,this.OB,this.Wl.T()?25:a),this.vV=this.$N.vV):this.vV=this.OB.gl.POINTS):this.$N&&(this.$N=void 0);const A=(null===(t=this.$N)||void 0===t?void 0:t.VN)||0,b=this.yl.T()+A;if(u||g||i||l){const t=this.Wl.T()?"attribute":"uniform",i=a<=1&&Hy.PointSize(t),s=Hy.VertexLocation({offset:a>1?{dataType:t,sizeUnit:"px",symmetric:!0,rotation:(this.jl.T()||b%360!=0)&&{dataType:this.jl.T()?"attribute":"uniform"}}:void 0,axisWorldTranslation:fr(this.ct),normalSource:void 0});this.gD=v?this.OB.uE(Hy["2D"],i,s,y?Hy.Color({dataType:"uniform"}):S?Hy.Color({dataType:"attribute"}):x?Hy.Color({dataType:["lookup",x.getLookUpProperty(),x.lut]}):p?Hy.Color({dataType:["gradient",p]}):m?Hy.Color({dataType:["gradient",m]}):void 0):void 0,this.GO=e&&v?this.OB.uE(Hy["2D"],i,s,Hy.MousePicking()):void 0}if(d||g){const t=this.Hl.length;if(G(h)&&this.GN&&this.GN>0){const e=h.getFallbackColor(),i=new Float32Array(4*t);for(let s=0;s<t;s+=1){const t=this.Hl[s];t.color?(i[4*s+0]=t.color.r,i[4*s+1]=t.color.g,i[4*s+2]=t.color.b,i[4*s+3]=t.color.a):(i[4*s+0]=e.r,i[4*s+1]=e.g,i[4*s+2]=e.b,i[4*s+3]=e.a)}this.YN=this.OB.cR(i,!0,this.YN)}else this.YN&&this.OB.wR(this.YN),this.YN=void 0;if(this.Wl.T()&&this.GN&&this.GN>0&&a>1){const e=new Float32Array(t);for(let i=0;i<t;i+=1){const t=this.Hl[i];t.size?e[i]=t.size:e[i]=a}this.HN=this.OB.cR(e,!0,this.HN)}else this.HN&&(this.OB.wR(this.HN),this.HN=void 0);if(this.jl.T()&&this.GN&&this.GN>0&&a>1){const e=new Float32Array(2*t),i=Xi(b),s=Math.sin(i),r=Math.cos(i);for(let i=0;i<t;i+=1){const t=this.Hl[i];if(t.rotation){const s=Xi(t.rotation+A);e[2*i+0]=Math.sin(s),e[2*i+1]=Math.cos(s)}else e[2*i+0]=s,e[2*i+1]=r}this.XN=this.OB.cR(e,!0,this.XN)}else this.XN&&(this.OB.wR(this.XN),this.XN=void 0);if(this.Zl.T()&&this.GN&&this.GN>0){const e=new Float32Array(t);for(let i=0;i<t;i+=1){const t=this.Hl[i];"value"in t&&void 0!==t.value&&null!==t.value?e[i]=t.value:e[i]=Dt}this.WN=this.OB.cR(e,!0,this.WN)}else this.WN&&(this.OB.wR(this.WN),this.WN=void 0);this.rl(this.We)}if(Z(h)?this.FO=Cp(uo(this.yt||this.Ql,{x:this.Cc(),y:this.kc()},this.ct),this.ct,h.getPosition(),h.getExtent(),h.getShape(),this.OB.QE()):et(h)?this.IO=Mp(uo(this.yt||this.Ql,{x:this.Cc(),y:this.kc()},this.ct),this.ct,h.getAngle(!0),this.OB.QE()):(this.FO=void 0,this.IO=void 0),d&&(this.Ql&&d&&(this.xO=uo(this.Ql,{x:a,y:a},this.ct)),this.Kl=[],this.ql=0,this.tc=li),void 0===this.hc&&x&&"value"===x.lookUpProperty&&x.lut.percentageValues){let t=ai,e=hi;for(let i=0;i<this.Hl.length;i+=1){const s=this.Hl[i];void 0!==s.value&&s.value<e&&(e=s.value),void 0!==s.value&&s.value>t&&(t=s.value)}this.hc={min:e,max:t}}return this.sl=h,this.Xl.u=!1,this.size.u=!1,this.yl.u=!1,this.dt.u=!1,this.sc=!1,this}Bu(t,e){const i=1===t?this.GO:this.gD,s=this.UN,r=this.GN,n=this.Jl;return i&&s&&r&&(this.OB.QB(i),this.OB.dR(i,((i,o,h,a)=>{var l;if(this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).AR(a("uScaleStart_highpart"),this.dD.Wz()).AR(a("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(a("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(a("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(a("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(a("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(i("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(i("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),this.OB.Tz(h,s,this.ct.Ni(),this.$N?1:void 0).pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0).pR(a("uDevicePixelRatio"),this.OB.QE()),this.$N){const t=o("aInstanceGeo");this.OB.MR(t,this.$N.TB).QR(t,0)}if(1===t)this.OB.NR(i("uFirstId"),e).Ez(h,n);else if(X(this.We))this.OB.xF(i("uColor"),this.We.getColor());else if(G(this.We)&&this.YN){const t=o("aColor");this.OB.KR(t,this.YN),this.vV!==this.OB.gl.POINTS&&this.OB.QR(t,1)}else if(j(this.We)){if("value"===this.We.getLookUpProperty()&&this.WN){const t=o("aLookupValue");this.OB.qR(t,this.WN),this.vV!==this.OB.gl.POINTS&&this.OB.QR(t,1)}const t=pr(this.We,this,this.hc);if(!t&&this.We.lut.percentageValues)return!1;this.OB.Uz(h,this.We.lut,t)}else if(Z(this.We)){if(!this.FO)return!1;this.OB.wz(h,this.FO,this.We)}else if(et(this.We)){if(!this.IO)return!1;this.OB._z(h,this.IO,this.We)}if(this.HN&&this.vV!==this.OB.gl.POINTS){const t=o("aOffsetPixels");this.OB.qR(t,this.HN),this.vV!==this.OB.gl.POINTS&&this.OB.QR(t,1)}else if(this.vV!==this.OB.gl.POINTS){const t=i("uOffsetPixels");this.OB.pR(t,this.size.T())}const c=((null===(l=this.$N)||void 0===l?void 0:l.VN)||0)+this.yl.T();if(this.XN&&this.vV!==this.OB.gl.POINTS){const t=o("aRot");this.OB.MR(t,this.XN),this.vV!==this.OB.gl.POINTS&&this.OB.QR(t,1)}else if(this.vV!==this.OB.gl.POINTS&&c%360!=0){const t=Xi(c),e=Math.sin(t),s=Math.cos(t);this.OB.AR(i("uRot"),[e,s])}if(this.vV===this.OB.gl.POINTS)this.OB.pR(i("uPointSize"),this.size.T());else{const t={x:2/this.St.Mi().x,y:2/this.St.Mi().y};this.OB.AR(i("uRatioPxClip"),[t.x,t.y])}let u=!1;return this.vV===this.OB.gl.POINTS?(this.OB.Pp(this.vV,r),u=!0):this.$N&&(this.OB.ez(this.vV,0,this.$N.ON,r),u=!0),u}))),{idCount:n}}Eu(t,e,i,s,r){return{}}wd(t){this.Ac()>0&&this.Dr();const e=this.nc(),i=ft(e,t,this.kt(),!1,!1,this.ct,this.St.ct,this.Ql,void 0,void 0);return void 0!==i?e[i]:void 0}Je(t){return super.Je(t)}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}Cc(){return this.Wl.T()?25:this.size.T()}kc(){return this.Wl.T()?25:this.size.T()}Du(){return this.UN&&(this.OB.wR(this.UN),this.UN=void 0),this.$N&&(this.$N=void 0),this.YN&&(this.OB.wR(this.YN),this.YN=void 0),this.XN&&(this.OB.wR(this.XN),this.XN=void 0),this.WN&&(this.OB.wR(this.WN),this.WN=void 0),this}}class ym extends mo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.CV={fill:void 0,border:void 0},this.dD=new Lp,this.Ql=li,this.jN=!1,this.ZN=!1,this.QN=!1,this.JN=!1,this.KN=!1,this.Jd=[],this.bO=yr({polygonStyleSolid:()=>X(this.We)&&this.We,polygonStyleImage:()=>Ft(this.We)&&this.We,polygonStyleRadialGradient:()=>Z(this.We)&&this.We,polygonStyleLinearGradient:()=>et(this.We)&&this.We,polygonStylePaletted:()=>j(this.We)&&this.We,polygonStyleIndividual:()=>G(this.We)&&this.We,lineStyleSolid:()=>ir(this.je)&&this.je,lineStyleDashed:()=>or(this.je)&&this.je,lineStyleFilled:()=>{const t=this.je&&this.je.getFillStyle();return X(t)&&t}}),this.AO=t,this.gO=e,this.OB=t.pO(),this.wV=this.OB.cz}Oo(){const t={Fs:e=>this.RV(t,e),Dt:e=>this.zV(t,e),wc:e=>this.qN(t,e),Kx:e=>this.tG(t,e),xF:e=>this.VV(t,e),Hl:[],M:void 0,iG:void 0,xt:0,GV:!0,sG:this.Jd.length};return this.Jd.push(t),t}ii(){return this.Jd.length=0,this.jN=!0,this.St.Pt(this),this}ev(){return this.Jd}qd(t){const e=this.Jd.indexOf(t);e>=0&&(this.Jd.splice(e,1),this.KN=!0,this.St.Pt(this,t))}RV(t,e){return t.GV=e,this.KN=!0,t.GV||this.St.Pt(this,t),t}zV(t,e){return t.xt=e,this.JN=!0,t}qN(t,e){return t.Hl=e,this.jN=!0,t}tG(t,e){return t.M=e,this.ZN=!0,t}VV(t,e){return t.iG=null==e?void 0:e.toUint32(),this.QN=!0,t}Dr(){const t=this.dt.T(),e=this.dt.u,i=this.il(),s=this.JN,r=this.jN,n=this.ZN,h=this.QN,a=this.KN,l=this.je,c=this.nl(),u=this.Jd.filter((t=>t.GV&&t.Hl.length>0));if(this.dD.xR(this.ct),(r||a)&&(this.Ql=Ti(...u.map((t=>Ci(t.Hl))))),r||a){const t=u.map((t=>[...t.Hl,t.Hl[0],{x:Number.NaN,y:Number.NaN}])).flat(),e=Ae(t,!1,Float64Array),i=this.ct.Ni()?Ae(t,!0):e;this._V=this.OB.cR(i,!1,this._V);let s=[];u.reduce(((t,i)=>{const r=t,n=2*(i.Hl.length+1),h=new Float64Array(e.buffer,r,n),a=o.default(h,void 0,2),l=t/(2*Float64Array.BYTES_PER_ELEMENT);for(let t=0;t<a.length;t+=1)a[t]+=l;return s=ke(s,a,{canReturnB:!0}),r+(n+2)*Float64Array.BYTES_PER_ELEMENT}),0);const r=new Uint32Array(s);this.eG=this.OB.WR(r,this.eG),this.hG=r.length,this.rG=e.length/2-1}const d=this.bO.polygonStyleSolid(i),f=this.bO.polygonStylePaletted(i),g=this.bO.polygonStyleIndividual(i),y=this.bO.polygonStyleRadialGradient(i),p=this.bO.polygonStyleLinearGradient(i),m=this.bO.polygonStyleImage(i),x=d||f||p||y||m||g,S=this.bO.lineStyleSolid(c),v=this.bO.lineStyleDashed(i),A=S||v,b=this.bO.lineStyleFilled(c),C=b,M=A&&Math.max(A.getThickness(),0);if((i||c||e)&&(this.CV.fill=x?{shader:this.OB.uE(Hy["2D"],d&&Hy.Color({dataType:"uniform"}),p&&Hy.Color({dataType:["gradient",p]}),y&&Hy.Color({dataType:["gradient",y]}),f&&Hy.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),g&&Hy.Color({dataType:"attribute"}),m&&Hy.Color({dataType:["image",m]}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}),Hy.AttributeHighlight),mousePicking:t?{shader:this.OB.uE(Hy["2D"],Hy.MousePicking({useAttribute:!0}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}),Hy.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:p,fillStyleRadialGradient:y,fillStylePaletted:f,fillStyleImage:m,fillStyleIndividual:g}:void 0,this.CV.border=A&&C&&"number"==typeof M&&0!==M?{shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:"uniform"}),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0}),this.wV?Hy.AliasedEdge:void 0,v&&Hy.StippleTextureInstanced,Hy.AttributeHighlight),geometry:qp(this.OB,M),mousePicking:t?{shader:this.OB.uE(Hy["2D"],Hy.MousePicking({useAttribute:!0}),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0}),v&&Hy.StippleTextureInstanced,Hy.AttributeHighlight)}:void 0,fillStyleSolid:b,lineStyleDashed:v,thickness:M}:void 0),s||r){const t=u.reduce(((t,e)=>t+e.Hl.length+2),0),e=new Float32Array(t);let i=0;u.forEach((t=>{const s=t.Hl.length+2;for(let r=i;r<i+s;r+=1)e[r]=t.xt;i+=s})),this.nG=this.OB.cR(e,!0,this.nG)}if(t){if(r){const t=u.reduce(((t,e)=>t+e.Hl.length+2),0),e=new Float32Array(t);let i=0;u.forEach((t=>{const s=t.Hl.length+2;for(let r=i;r<i+s;r+=1)e[r]=t.sG;i+=s})),this.oG=this.OB.cR(e,!1,this.oG)}}else this.oG&&(this.OB.wR(this.oG),this.oG=void 0);if(n||r&&f&&"value"===f.getLookUpProperty()){const t=u.reduce(((t,e)=>t+e.Hl.length+2),0),e=new Float32Array(t);let i=0;const s={min:hi,max:ai};u.forEach((t=>{const r=void 0!==t.M?t.M:Dt,n=t.Hl.length+2;for(let t=i;t<i+n;t+=1)e[t]=r;i+=n,void 0!==t.M&&(s.min=Math.min(s.min,r),s.max=Math.max(s.max,r))})),this.aG=s,this.lG=this.OB.cR(e,!1,this.lG)}if(h||r&&g){const t=u.reduce(((t,e)=>t+e.Hl.length+2),0),e=new Uint32Array(t);let i=0;const s=g?g.getFallbackColor().toUint32():B.toUint32();u.forEach((t=>{const r=void 0!==t.iG?t.iG:s,n=t.Hl.length+2;for(let t=i;t<i+n;t+=1)e[t]=r;i+=n})),this.cG=this.OB.cR(e,!1,this.cG,Uint32Array)}if(y?this.FO=Cp(this.yt||this.Ql,this.ct,y.getPosition(),y.getExtent(),y.getShape(),this.OB.QE()):p?this.IO=Mp(this.yt||this.Ql,this.ct,p.getAngle(!0),this.OB.QE()):(this.FO=void 0,this.IO=void 0),v){if(r){const t=u.reduce(((t,e)=>t+e.Hl.length),2*u.length),e=new Float32Array(2*t);let i=0;u.forEach((t=>{let s=t.Hl[0],r=0,n=0;for(const o of t.Hl)r+=Math.abs(o.x-s.x),n+=Math.abs(o.y-s.y),e[i]=r,e[i+1]=n,i+=2,s=o;e[i+0]=r+Math.abs(t.Hl[0].x-s.x),e[i+1]=n+Math.abs(t.Hl[0].y-s.y),e[i+2]=Number.NaN,e[i+3]=Number.NaN,i+=4})),this.kV=this.OB.cR(e,!1,this.kV)}this.TV=this.OB.Oz(v.getPattern())}else this.kV&&(this.OB.wR(this.kV),this.kV=void 0),this.TV=void 0;return this.uG=this.OB.$z(this,this.uG,m,void 0,r||a||this.ct.es(),((t,e,i)=>this.dG(t,e,i,u))),this.JN=!1,this.KN=!1,this.jN=!1,this.ZN=!1,this.QN=!1,this.dt.u=!1,this.rl(this.We),this.ll(l),this}Ft(){return this.aG}Bu(t,e){var i,s;const{fill:r,border:n}=this.CV,o=this._V,h=this.nG,a=this.oG;if(!o||!h)return{};if(r){const{fillStyleSolid:s,fillStyleLinearGradient:n,fillStyleRadialGradient:l,fillStylePaletted:c,fillStyleImage:u,fillStyleIndividual:d}=r,f=this.eG,g=this.hG,y=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;y&&o&&f&&void 0!==g&&this.OB.QB(y).dR(y,((i,r,y,p)=>{if(this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).AR(p("uScaleStart_highpart"),this.dD.Wz()).AR(p("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(p("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(p("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(p("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(p("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(i("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(i("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),this.OB.Tz(y,o,this.ct.Ni(),void 0).tz(f).qR(r("aIsHighlighted"),h).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0),1===t){if(this.OB.NR(i("uFirstId"),e),!a)return!1;this.OB.qR(r("aPickingIdOffset"),a)}else if(s)this.OB.xF(i("uColor"),s.getColor());else if(l){if(!this.FO)return!1;this.OB.wz(y,this.FO,l)}else if(n){if(!this.IO)return!1;this.OB._z(y,this.IO,n)}else if(c){const t=pr(c,this,this.aG);if(!t&&c.lut.percentageValues)return!1;if(this.OB.Uz(y,c.lut,t),"value"===c.getLookUpProperty()){if(!this.lG)return!1;this.OB.qR(r("aLookupValue"),this.lG)}}else if(u){if(!this.uG)return!1;this.OB.xF(p("uColor"),u.getSurroundingColor()).gR(i(dy),this.uG.texture.XE()||this.uG.sourceMissingTexture,0).fR(this.uG.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).GR(u.fitMode)}else if(d){if(!this.cG)return!1;const t=r("aColor");this.OB.gl.bindBuffer(this.OB.gl.ARRAY_BUFFER,this.cG),this.OB.gl.vertexAttribPointer(t,4,this.OB.gl.UNSIGNED_BYTE,!0,0,0),this.OB.gl.enableVertexAttribArray(t)}return this.OB.sz(g,void 0,void 0,this.OB.gl.UNSIGNED_INT),!0}))}if(n){const{geometry:i,fillStyleSolid:r,thickness:l,lineStyleDashed:c}=n,u=this.rG,d=1===t?null===(s=n.mousePicking)||void 0===s?void 0:s.shader:n.shader;d&&o&&u&&this.OB.QB(d).dR(d,((s,n,d,f)=>{if(this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(s("uScale"),this.dD.vR()).AR(s("uDisp"),this.dD.yR()).AR(f("uScaleStart_highpart"),this.dD.Wz()).AR(f("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(f("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(f("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(f("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(f("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(s("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(s("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),this.OB.fR(h,1,{location:n("aIsHighlighted"),size:1}).xF(s("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(s("uRenderEffectMask"),2===t?1:0),1===t){if(this.OB.NR(s("uFirstId"),e),!a)return!1;this.OB.qR(n("aPickingIdOffset"),a,1)}else r&&this.OB.xF(s("uColor"),r.getColor());if(c){if(!this.TV||!this.kV)return!1;Zp.mV(this.OB,d,this.kV,n("aLengthSoFarA"),n("aLengthSoFarB"),2,2,0),this.OB.AR(s("uStippleCount"),[this.St.Mi().x/this.TV.Gz,this.St.Mi().y/this.TV.Gz]).pR(f("uStippleTextureWidthLimiter"),this.TV.Nz/this.TV.Gz).pR(s("uStippleScale"),c.getPatternScale()).gR(s("uStippleTexture"),this.TV.Vz,1)}return Zp.yV(this.ct.Ni(),this.OB,o,d,this.ct.Ni()?4:2,0),Zp.Bu(this.AO,i,d,this.wV&&1!==t,1===t,l,u),!0}))}return{idCount:this.Jd.length}}dG(t,e,i,s){const r=ot({x:this.Ql.min.x,y:this.Ql.min.y},this.ct,this.St.ct),n=ot({x:this.Ql.max.x,y:this.Ql.max.y},this.ct,this.St.ct),o={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},h=Bp(t,e,o.x,o.y,i),a=h[1],l=h[4],c=h[6],u=h[7],d=s.reduce(((t,e)=>t+e.Hl.length+2),0),f=new Float32Array(2*d),g=this.Ql.max.x-this.Ql.min.x,y=this.Ql.max.y-this.Ql.min.y,p=l-c,m=u-a;let x=0;for(const t of s){for(const e of t.Hl){const t=c+p*((e.x-this.Ql.min.x)/g),i=a+m*((e.y-this.Ql.min.y)/y);f[x]=t,f[x+1]=i,x+=2}const e=c+p*((t.Hl[0].x-this.Ql.min.x)/g),i=a+m*((t.Hl[0].y-this.Ql.min.y)/y);f[x]=e,f[x+1]=i,x+=2,f[x]=Number.NaN,f[x+1]=Number.NaN,x+=2}return f}Eu(t,e,i,s,r){return{collectionMember:this.Jd.find((i=>e+i.sG===t))}}Du(){return this.eG&&(this.OB.wR(this.eG),this.eG=void 0),this._V&&(this.OB.wR(this._V),this._V=void 0),this.nG&&(this.OB.wR(this.nG),this.nG=void 0),this.oG&&(this.OB.wR(this.oG),this.oG=void 0),this.lG&&(this.OB.wR(this.lG),this.lG=void 0),this.cG&&(this.OB.wR(this.cG),this.cG=void 0),this.kV&&(this.OB.wR(this.kV),this.kV=void 0),this.CV={fill:void 0,border:void 0},this.uG=this.OB.Yz(this,this.uG),this}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}Cc(){return je(this.je)}kc(){return je(this.je)}}class pm extends Ao{constructor(t,e,i,s,r){super(t,e,i,s,r),this.dD=new Lp,this.fG=li,this.bO=yr({fillStyleSolid:()=>X(this.We)&&this.We,fillStyleRadialGradient:()=>Z(this.We)&&this.We,fillStyleLinearGradient:()=>et(this.We)&&this.We,fillStyleImage:()=>Ft(this.We)&&this.We,strokeStyleSolid:()=>ir(this.je)&&this.je,strokeFillSolid:()=>{const t=this.je.getFillStyle();return X(t)&&t},strokeFillLinearGradient:()=>{const t=this.je.getFillStyle();return et(t)&&t},strokeFillRadialGradient:()=>{const t=this.je.getFillStyle();return Z(t)&&t}}),this.dG=(t,e,i)=>{const s=ot(this.Ll(),this.ct,this.St.ct),r=Di(ot(Li(this.Ll(),this.Mi()),this.ct,this.St.ct),s);return Bp(t,e,r.x,r.y,i)},this.AO=t,this.gO=e,this.OB=t.pO(),this.gO=e}Dr(){super.Dr();const t=this.dt.T(),e=this.il(),i=this.fl.u||this.H.u||this.yl.u||this.xl.u,s=this.je,r=this.nl(),n=s.getThickness(),o=this.yl.T();this.dD.xR(this.ct);const h=this.ct.es();if(i){const t=this.H.T();this.Hl=function(t,e,i,s,r){const n=((t,e,i)=>[t,l(t.x+e,t.y),l(t.x+e,t.y+i),l(t.x,t.y+i)])(t,e,i);if(0!==s||s%360!=0){const t=s*Math.PI/180;n[0]=Bi(n[0],r,t),n[1]=Bi(n[1],r,t),n[2]=Bi(n[2],r,t),n[3]=Bi(n[3],r,t)}return n}(this.fl.T(),t.x,t.y,o,this.xl.T());const e=Ae(this.Hl,this.ct.Ni());this._O=this.OB.cR(e,!1,this._O),this.kO=this.Hl.length,this.fG=Ci(this.Hl)}const a=this.bO.fillStyleSolid(e),c=this.bO.fillStyleRadialGradient(e),u=this.bO.fillStyleLinearGradient(e),d=this.bO.fillStyleImage(e),f=a||c||u||d;e&&(this.PO=f?this.OB.uE(Hy["2D"],a&&Hy.Color({dataType:"uniform"}),u&&Hy.Color({dataType:["gradient",u]}),c&&Hy.Color({dataType:["gradient",c]}),d&&Hy.Color({dataType:["image",d]}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0),c?this.FO=Cp(this.yt||this.fG,this.ct,c.getPosition(),c.getExtent(),c.getShape(),this.OB.QE()):u?this.IO=Mp(this.yt||this.fG,this.ct,u.getAngle(!0),this.OB.QE()):(this.FO=void 0,this.IO=void 0),this.uG=this.OB.$z(this,this.uG,d,void 0,h||i,this.dG);const g=this.bO.strokeStyleSolid(r),y=this.bO.strokeFillSolid(r),p=this.bO.strokeFillLinearGradient(r),m=this.bO.strokeFillRadialGradient(r),x=g,S=y||p||m;if(x&&(i||r||h&&1!==n)){if(1===n||-1===n)[this.LO,this.AG]=[this.Hl,void 0];else{const t=this.ct;[this.LO,this.AG]=t instanceof as?((t,e,i)=>{const s=t[0],r=t[1],n=t[2],o=t[3],h=e/2;return[[i.ns(s,r,h,-h),i.ns(r,s,-h,-h),i.ns(o,n,-h,-h),i.ns(n,o,h,-h),i.ns(s,r,-h,h),i.ns(r,s,h,h),i.ns(o,n,h,h),i.ns(n,o,-h,h)],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Hl,n,t):((t,e,i)=>{const s=t[0],r=t[1],n=t[2],o=t[3],h=l(e.x*i*.5,e.y*i*.5),a=Ri(ki(r,s)),c=Ri(ki(o,s)),u=_i(a),d=_i(c);return[[Li(s,Li(Oi(u,h.x),Oi(d,h.y))),Li(r,Li(Oi(a,h.x),Oi(d,h.y))),Li(o,Li(Oi(u,h.x),Oi(c,h.y))),Li(n,Li(Oi(a,h.x),Oi(c,h.y))),Li(s,Li(Oi(a,h.x),Oi(c,h.y))),Li(r,Li(Oi(u,h.x),Oi(c,h.y))),Li(o,Li(Oi(a,h.x),Oi(d,h.y))),Li(n,Li(Oi(u,h.x),Oi(d,h.y)))],[0,4,5,0,5,1,1,5,7,1,3,7,3,7,6,3,2,6,2,4,0,2,6,4]]})(this.Hl,t.rs(),n)}this.DO=this.OB.cR(Ae(this.LO,this.ct.Ni()),!1,this.DO),this.AG?(this.gV=this.OB.WR(new Uint16Array(this.AG),this.gV),this.BO=this.AG.length):(this.gV&&this.OB.wR(this.gV),this.gV=void 0,this.BO=this.LO.length)}return r&&(this.NO=x&&S?this.OB.uE(Hy["2D"],Hy.Color({dataType:m?["gradient",m]:p?["gradient",p]:"uniform"}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0),m?this.OO=Cp(this.fG,this.ct,m.getPosition(),m.getExtent(),m.getShape(),this.OB.QE()):p?this.VO=Mp(this.fG,this.ct,p.getAngle(!0),this.OB.QE()):(this.OO=void 0,this.VO=void 0),this.GO=t&&f?this.GO||this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0,this.UO=t&&this.je!==Ot?this.UO||this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0,this.rl(this.We),this.ll(s),this.fl.u=!1,this.yl.u=!1,this.H.u=!1,this.xl.u=!1,this}Bu(t,e){const i=1===t?this.GO:this.PO,s=this._O,r=this.kO,n=this.bO.fillStyleSolid(!1),o=this.bO.fillStyleRadialGradient(!1),h=this.bO.fillStyleLinearGradient(!1),a=this.bO.fillStyleImage(!1);i&&s&&r&&this.We!==V&&(this.OB.QB(i),this.OB.dR(i,((i,l,c,u)=>{if(this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).AR(u("uScaleStart_highpart"),this.dD.Wz()).AR(u("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(u("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(u("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(u("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(u("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(i("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(i("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),1===t)this.OB.NR(i("uFirstId"),e).Ez(c,1);else if(n)this.OB.xF(i("uColor"),n.getColor());else if(o){if(!this.FO)return!1;this.OB.wz(c,this.FO,o)}else if(h){if(!this.IO)return!1;this.OB._z(c,this.IO,h)}else if(a){if(!this.uG)return!1;const t=this.uG&&this.uG.texture.XE();this.OB.xF(u("uColor"),a.getSurroundingColor()).gR(i(dy),t||this.uG.sourceMissingTexture,0).fR(this.uG.texCoordsBuffer,void 0,{location:l("aTextureCoord"),size:2}).GR(a.fitMode)}return this.OB.pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0).Tz(c,s,this.ct.Ni(),void 0).Pp(this.OB.gl.TRIANGLE_FAN,r),!0})));const l=1===t?this.UO:this.NO,c=this.bO.strokeStyleSolid(!1),u=this.bO.strokeFillSolid(!1),d=this.bO.strokeFillLinearGradient(!1),f=this.bO.strokeFillRadialGradient(!1),g=this.DO;return l&&g&&c&&(this.OB.QB(l),this.OB.dR(l,((i,s,r,n)=>{if(this.ct instanceof hs||this.ct instanceof dr?this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).AR(n("uScaleStart_highpart"),this.dD.Wz()).AR(n("uScaleStart_lowpart"),this.dD.jz()):this.ct instanceof as&&this.OB.AR(n("uScaleStart"),this.dD.MixedScaleXY.uScaleStart).AR(n("uScaleStartLog"),this.dD.MixedScaleXY.uScaleStartLog).AR(n("uScaleInterval"),this.dD.MixedScaleXY.uScaleInterval).AR(n("uScaleIntervalLog"),this.dD.MixedScaleXY.uScaleIntervalLog).AR(i("uViewportStart"),this.dD.MixedScaleXY.uViewportStart).AR(i("uViewportSize"),this.dD.MixedScaleXY.uViewportSize),1===t)this.OB.NR(i("uFirstId"),e).Ez(r,1);else if(u)this.OB.xF(i("uColor"),u.getColor());else if(f){if(!this.OO)return!1;this.OB.wz(r,this.OO,f)}else if(d){if(!this.VO)return!1;this.OB._z(r,this.VO,d)}return this.OB.pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0).Tz(r,g,this.ct.Ni(),void 0),this.gV?this.OB.tz(this.gV).sz(this.BO):this.OB.Pp(this.OB.gl.LINE_LOOP,this.BO),!0}))),{idCount:1}}Eu(t,e,i,s,r){return{}}Du(){return this.gV&&(this.OB.wR(this.gV),this.gV=void 0),this._O&&(this.OB.wR(this._O),this._O=void 0),this.DO&&(this.OB.wR(this.DO),this.DO=void 0),this.uG=this.OB.Yz(this,this.uG),this.PO=void 0,this.NO=void 0,this.GO=void 0,this.UO=void 0,this}Zt(){return Math.max(this.fl.T().x,this.fl.T().x+this.H.T().x)}jt(){return Math.min(this.fl.T().x,this.fl.T().x+this.H.T().x)}Jt(){return Math.max(this.fl.T().y,this.fl.T().y+this.H.T().y)}Qt(){return Math.min(this.fl.T().y,this.fl.T().y+this.H.T().y)}Cc(){return je(this.je)}kc(){return je(this.je)}}class mm extends Co{constructor(t,e,i,s,r){super(t,e,i,s,r),this.dD=new Lp,this.bO=yr({fillStyleSolid:()=>X(this.We)&&this.We,fillStylePaletted:()=>j(this.We)&&this.We,fillStyleRadialGradient:()=>Z(this.We)&&this.We,fillStyleLinearGradient:()=>et(this.We)&&this.We,fillStyleImage:()=>Ft(this.We)&&this.We,strokeLineStyleSolid:()=>ir(this.je)&&this.je,strokeLineSolidFill:()=>{const t=this.je.getFillStyle();return X(t)&&t},strokeLinearGradientFill:()=>{const t=this.je.getFillStyle();return et(t)&&t},strokeRadialGradientFill:()=>{const t=this.je.getFillStyle();return Z(t)&&t}}),this.dG=(t,e,i)=>{const s=ot({x:this.Ql.min.x,y:this.Ql.min.y},this.ct,this.St.ct),r=ot({x:this.Ql.max.x,y:this.Ql.max.y},this.ct,this.St.ct),n={x:Math.abs(s.x-r.x),y:Math.abs(s.y-r.y)},o=Bp(t,e,n.x,n.y,i),h=o[1],a=o[4],l=o[6],c=o[7],u=new Float32Array(2*this.Hl.length),d=this.Ql.max.x-this.Ql.min.x,f=this.Ql.max.y-this.Ql.min.y,g=a-l,y=c-h;let p=0;for(const t of this.Hl){const e=l+g*((t.x-this.Ql.min.x)/d),i=h+y*((t.y-this.Ql.min.y)/f);u[p]=e,u[p+1]=i,p+=2}return u},this.AO=t,this.gO=e,this.OB=t.pO(),this.gO=e}wd(t){let e,i=Number.MAX_VALUE;for(const s of this.Hl){const r=Si(ot(s,this.ct,this.St.ct),t);r<i&&(i=r,e=s)}return e}Dr(){const t=this.dt.T(),e=this.il(),i=this.Mc,s=this.Hl.length>=3,r=this.je,n=this.nl(),h=r.getThickness(),a=this.al(h);this.dD.xR(this.ct),this.he=this.ct.rs();const l=this.ct.es();if(i&&(this.Ql=Ci(this.Hl)),i&&s){const t=Ae(this.Hl,this.ct.Ni());this._O=this.OB.cR(t,!1,this._O),this.gG=new Uint16Array(o.default(t)),this.pG=this.OB.WR(this.gG,this.pG),this.kO=this.gG.length}const c=this.bO.fillStyleSolid(e),u=this.bO.fillStylePaletted(e),d=this.bO.fillStyleRadialGradient(e),f=this.bO.fillStyleLinearGradient(e),g=this.bO.fillStyleImage(e),y=c||u&&"value"!==u.getLookUpProperty()&&u||f||d||g;if(e&&(this.PO=y?this.OB.uE(Hy["2D"],c&&Hy.Color({dataType:"uniform"}),f&&Hy.Color({dataType:["gradient",f]}),d&&Hy.Color({dataType:["gradient",d]}),u&&Hy.Color({dataType:["lookup",u.getLookUpProperty(),u.lut]}),g&&Hy.Color({dataType:["image",g]}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0),d?this.FO=Cp(this.yt||this.Ql,this.ct,d.getPosition(),d.getExtent(),d.getShape(),this.OB.QE()):f?this.IO=Mp(this.yt||this.Ql,this.ct,f.getAngle(!0),this.OB.QE()):(this.FO=void 0,this.IO=void 0),this.uG=this.OB.$z(this,this.uG,g,void 0,l||i,this.dG),(i||a||l&&1!==h)&&s){const t=1===h||-1===h?this.Hl:Up(this.Hl,this.he,h);this.LO=Ae(t,this.ct.Ni()),this.DO=this.OB.cR(this.LO,!0,this.DO),this.BO=t.length}const p=this.bO.strokeLineStyleSolid(n),m=this.bO.strokeLineSolidFill(n),x=this.bO.strokeLinearGradientFill(n),S=this.bO.strokeRadialGradientFill(n),v=p,A=m||x||S;return n&&(this.NO=v&&A?this.OB.uE(Hy["2D"],Hy.Color({dataType:S?["gradient",S]:x?["gradient",x]:"uniform"}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0),S?this.OO=Cp(this.yt||this.Ql,this.ct,S.getPosition(),S.getExtent(),S.getShape(),this.OB.QE()):x?this.VO=Mp(this.yt||this.Ql,this.ct,x.getAngle(!0),this.OB.QE()):(this.OO=void 0,this.VO=void 0),this.GO=t&&y?this.GO||this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0,this.UO=t&&this.je!==Ot?this.GO||this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})):void 0,this.Mc=!1,this.rl(this.We),this.ll(r),this}Bu(t,e){const i=1===t?this.GO:this.PO,s=this._O,r=this.kO,n=this.bO.fillStyleSolid(!1),o=this.bO.fillStyleRadialGradient(!1),h=this.bO.fillStyleLinearGradient(!1),a=this.bO.fillStylePaletted(!1),l=this.bO.fillStyleImage(!1);i&&s&&r&&this.OB.QB(i).dR(i,((i,r,c,u)=>{if(this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).AR(u("uScaleStart_highpart"),this.dD.Wz()).AR(u("uScaleStart_lowpart"),this.dD.jz()).Tz(c,s,this.ct.Ni(),void 0).tz(this.pG).pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0),1===t)this.OB.NR(i("uFirstId"),e).Ez(c,1);else if(n)this.OB.xF(i("uColor"),n.getColor());else if(o){if(!this.FO)return!1;this.OB.wz(c,this.FO,o)}else if(h){if(!this.IO)return!1;this.OB._z(c,this.IO,h)}else if(a){const t=pr(a,this,void 0);if(!t&&a.lut.percentageValues)return!1;this.OB.Uz(c,a.lut,t)}else if(l){if(!this.uG)return!1;this.OB.xF(u("uColor"),l.getSurroundingColor()).gR(i(dy),this.uG.texture.XE()||this.uG.sourceMissingTexture,0).fR(this.uG.texCoordsBuffer,void 0,{location:r("aTextureCoord"),size:2}).GR(l.fitMode)}return this.OB.sz(this.kO),!0}));const c=1===t?this.UO:this.NO,u=this.je,d=this.DO,f=this.BO;return c&&d&&f&&this.OB.QB(c).dR(c,((i,s,r,n)=>{this.OB.pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0).AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).Tz(r,d,this.ct.Ni(),void 0);const o=u.getFillStyle();if(1===t)this.OB.NR(i("uFirstId"),e).Ez(r,1);else if(X(o))this.OB.xF(i("uColor"),o.getColor());else if(Z(o)){if(!this.OO)return!1;this.OB.wz(r,this.OO,o)}else if(et(o)){if(!this.VO)return!1;this.OB._z(r,this.VO,o)}const h=u.getThickness(),a=-1===h||1===h;return this.OB.Pp(a?this.OB.gl.LINE_LOOP:this.OB.gl.TRIANGLE_STRIP,this.BO),!0})),{idCount:1}}Eu(t,e,i,s,r){return{}}Du(){return this.pG&&(this.OB.wR(this.pG),this.pG=void 0),this._O&&(this.OB.wR(this._O),this._O=void 0),this.DO&&(this.OB.wR(this.DO),this.DO=void 0),this.PO=void 0,this.NO=void 0,this.GO=void 0,this.UO=void 0,this.uG=this.OB.Yz(this,this.uG),this}}const xm=(t,e)=>{let i=0;const s=[];for(;i<t;){const r=i;let n=e;const o=i>0;n-=o?1:0,n-=i+n<t?1:0;const h=Math.min(n,t-r),a=i-(o?1:0),l={start:a,startUnique:r,sizeData:Math.min(e,t-a),sizeUniqueData:h};s.push(l),i+=h}return s},Sm=(t,e)=>{let i=0;const s=[];for(;i<t;){const r=i;let n=e;const o=i>0;n-=o?1:0,n-=0;const h=Math.min(n,t-r),a=i-(o?1:0),l={start:a,startUnique:r,sizeData:Math.min(e,t-a),sizeUniqueData:h};s.push(l),i+=h}return s},vm=(t,e,i,s)=>{if(i){const t=new Map;return e.gridTiles.forEach((e=>{t.set(e,{type:i,dataInvalidationRanges:[{tileInvalidationOffset:{primary:0,secondary:0},tileInvalidationLength:e.sizeHeatmapDataVectors}]})})),t}const r=new Map;for(let i=0;i<t.length;i+=1){const n=t[i],o={x:n.startPrimary,y:n.startSecondary},h={x:o.x+n.lengthPrimary-1,y:o.y+n.lengthSecondary-1},a=[o,{x:h.x,y:o.y},h,{x:o.x,y:h.y}];e.gridTiles.forEach((t=>{const e=t.iFirstVector,i=s(t),o={x:e.primary+i.primary-1,y:e.secondary+i.secondary-1},h=[{x:e.primary,y:e.secondary},{x:o.x,y:e.secondary},o,{x:e.primary,y:o.y}];if(!fi(a,h))return;let c=r.get(t);c||(c={type:n.type,dataInvalidationRanges:[]},r.set(t,c));const u=(d=a,f=h,g(l(Math.max(Math.min(d[0].x,d[2].x),Math.min(f[0].x,f[2].x)),Math.max(Math.min(d[0].y,d[2].y),Math.min(f[0].y,f[2].y))),l(Math.min(Math.max(d[0].x,d[2].x),Math.max(f[0].x,f[2].x)),Math.min(Math.max(d[0].y,d[2].y),Math.max(f[0].y,f[2].y)))));var d,f;const y={primary:u.min.x-e.primary,secondary:u.min.y-e.secondary},p={primary:1+u.max.x-u.min.x,secondary:1+u.max.y-u.min.y};let m=!1;const x=[{x:y.primary,y:y.secondary},{x:y.primary+p.primary,y:y.secondary},{x:y.primary+p.primary,y:y.secondary+p.secondary},{x:y.primary,y:y.secondary+p.secondary}];for(let t=0;t<c.dataInvalidationRanges.length;t+=1)if(!m){const e=c.dataInvalidationRanges[t],i=[{x:e.tileInvalidationOffset.primary,y:e.tileInvalidationOffset.secondary},{x:e.tileInvalidationOffset.primary+e.tileInvalidationLength.primary,y:e.tileInvalidationOffset.secondary},{x:e.tileInvalidationOffset.primary+e.tileInvalidationLength.primary,y:e.tileInvalidationOffset.secondary+e.tileInvalidationLength.secondary},{x:e.tileInvalidationOffset.primary,y:e.tileInvalidationOffset.secondary+e.tileInvalidationLength.secondary}];if(fi(x,i)){const t=gi(x,i);e.tileInvalidationOffset.primary=t.min.x,e.tileInvalidationOffset.secondary=t.min.y,e.tileInvalidationLength.primary=t.max.x-t.min.x,e.tileInvalidationLength.secondary=t.max.y-t.min.y,m=!0}}m||c.dataInvalidationRanges.push({tileInvalidationLength:p,tileInvalidationOffset:y})}))}return r},Am=(t,e,i)=>{if(1!==t.length||0!==e.startPrimary||0!==e.startSecondary||e.lengthPrimary!==t[0].sizeHeatmapDataVectors.primary||e.lengthSecondary!==t[0].sizeHeatmapDataVectors.secondary)t.forEach((t=>{const s=i(t),r=Math.max(e.startPrimary,t.iFirstVector.primary),n=Math.min(e.startPrimary+e.lengthPrimary-1,t.iFirstVector.primary+t.sizeHeatmapDataVectors.primary-1),o=Math.max(e.startSecondary,t.iFirstVector.secondary),h=Math.min(e.startSecondary+e.lengthSecondary-1,t.iFirstVector.secondary+t.sizeHeatmapDataVectors.secondary-1);for(let i=r;i<=n;i+=1){const r=i-e.startPrimary,n=e.values[r],a=(i-t.iFirstVector.primary)*t.sizeHeatmapDataVectors.secondary;for(let i=o;i<=h;i+=1){const r=i-e.startSecondary,o=i-t.iFirstVector.secondary,h=n[r];s[a+o]=h}}}));else{const s=t[0],r=i(s);for(let t=0;t<e.lengthPrimary;t+=1){const i=t*s.sizeHeatmapDataVectors.secondary;r.set(e.values[t],i)}}},bm=(t,e,i)=>{var s,r;const n=null===(s=t.gl2)||void 0===s?void 0:s.ctx;if(n)return t.xz(null,n.RED,!1,!0,{x:e,y:i},!1,n.FLOAT,n.R32F);const o=t.gl;return(null===(r=t.gl1)||void 0===r?void 0:r.optional.OES_texture_float)?t.xz(null,o.LUMINANCE,!1,!0,{x:e,y:i},!1,o.FLOAT):t.xz(null,o.RGBA,!1,!0,{x:e,y:i},!1,o.UNSIGNED_BYTE)},Cm=(t,e,i,s)=>{e.forEach(((e,r)=>{var n,o;const h=i(r),a=s(r),l=t.gl;l.bindTexture(l.TEXTURE_2D,a),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);const c=null===(n=t.gl2)||void 0===n?void 0:n.ctx,u=e.dataInvalidationRanges.length,d=e.dataInvalidationRanges.reduce(((t,e)=>t+e.tileInvalidationLength.primary),0)/r.sizeHeatmapDataVectors.primary;1===u&&d<1||d<.5&&u<10?e.dataInvalidationRanges.forEach((e=>{var i;const s=e.tileInvalidationOffset.primary*r.sizeHeatmapDataVectors.secondary,n=s+e.tileInvalidationLength.primary*r.sizeHeatmapDataVectors.secondary;if(c)c.texSubImage2D(l.TEXTURE_2D,0,0,e.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,e.tileInvalidationLength.primary,c.RED,c.FLOAT,h.subarray(s,n));else if(null===(i=t.gl1)||void 0===i?void 0:i.optional.OES_texture_float)l.texSubImage2D(l.TEXTURE_2D,0,0,e.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,e.tileInvalidationLength.primary,l.LUMINANCE,l.FLOAT,h.subarray(s,n));else{const t=new Uint8Array(h.buffer).subarray(4*s,4*n);l.texSubImage2D(l.TEXTURE_2D,0,0,e.tileInvalidationOffset.primary,r.sizeHeatmapDataVectors.secondary,e.tileInvalidationLength.primary,l.RGBA,l.UNSIGNED_BYTE,t)}})):c?c.texImage2D(l.TEXTURE_2D,0,c.R32F,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,c.RED,c.FLOAT,h):(null===(o=t.gl1)||void 0===o?void 0:o.optional.OES_texture_float)?l.texImage2D(l.TEXTURE_2D,0,l.LUMINANCE,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.LUMINANCE,l.FLOAT,h):l.texImage2D(l.TEXTURE_2D,0,l.RGBA,r.sizeHeatmapDataVectors.secondary,r.sizeHeatmapDataVectors.primary,0,l.RGBA,l.UNSIGNED_BYTE,new Uint8Array(h.buffer)),l.bindTexture(l.TEXTURE_2D,null)}))};class Mm extends po{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.vG=p("bilinear"),this.Wi={x:0,y:0},this.qM={x:1,y:1},this.Wy=so.lineStyle,this.engine=t;const o="columns"===n.dataOrder?n.columns:n.rows,h="columns"===n.dataOrder?n.rows:n.columns;this.Ca={...n,primaryDimensionVectorsCount:o,secondaryDimensionVectorsCount:h}}tm(t){return this.vG.C(t),this}im(){return this.vG.T()}Jy(t,e){return this.Wi=t,this.qM=e,this}Ky(){return{start:this.Wi,step:this.qM,end:{x:this.Wi.x+this.qM.x*this.Ca.columns,y:this.Wi.y+this.qM.y*this.Ca.rows}}}jy(t){return this.Wy="function"==typeof t?t(this.Wy):t,this}qy(){return this.Wy}}class Tm extends Mm{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.dD=new Lp,this.CV={},this.yG=[],this.mG=!1,this.sc=!1,this.bO=yr({fillStyleSolid:()=>X(this.We)&&this.We,fillStylePaletted:()=>j(this.We)&&this.We,wireframeStyleLine:()=>ir(this.Wy)&&this.Wy,wireframeStyleFill:()=>{const t=this.Wy&&this.Wy.getFillStyle();return X(t)&&t}}),this.xG=xm,this.AO=t,this.gO=e,this.OB=t.pO(),this.gO=e;const o=Math.min(this.OB.NB,void 0!==n.SG?n.SG:2048),h={x:Math.min(o,this.Ca.primaryDimensionVectorsCount),y:Math.min(o,this.Ca.secondaryDimensionVectorsCount)},a=((t,e,i)=>{const s=[],r=i(t.primaryDimensionVectorsCount,e.x),n=i(t.secondaryDimensionVectorsCount,e.y);let o;return r.forEach((t=>n.forEach((e=>{const i={iFirstVector:{primary:t.start,secondary:e.start},iFirstUniqueVector:{primary:t.startUnique,secondary:e.startUnique},sizeHeatmapDataVectors:{primary:t.sizeData,secondary:e.sizeData},sizeUniqueHeatmapDataVectors:{primary:t.sizeUniqueData,secondary:e.sizeUniqueData}};s.push(i)})))),o=[],s.forEach((t=>{let e=o.find((e=>e.sizeHeatmapData.primary===t.sizeHeatmapDataVectors.primary&&e.sizeHeatmapData.secondary===t.sizeHeatmapDataVectors.secondary));e||(e={sizeHeatmapData:t.sizeHeatmapDataVectors,tiles:[]},o.push(e)),e.tiles.push(t)})),{gridTiles:s,gridTileSizes:o}})(this.Ca,h,this.xG),l=a.gridTiles.map((t=>{const e=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary);return{...t,intensityData:e,hasIntensityData:!1}})),c=a.gridTileSizes.map((t=>({...t,tiles:l.filter((e=>e.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&e.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary))})));this.bG={gridTiles:l,gridTileSizes:c},this.Jy(this.Wi,this.qM)}Ft(){return this.hc}Dr(){const t=this.yG,e=this.We,i=this.il(),s=this.Wy,r=s!==this.MG,n=this.bO.wireframeStyleLine(r),o=this.bO.wireframeStyleFill(r),h=n&&o&&!this.ct.Ni(),a=this.bO.fillStylePaletted(i),l=this.bO.fillStyleSolid(i),c=this.vG.u,u=this.vG.T(),d=this.sc,f=this.dt.T();this.wG=this.wG||this._G();const g=this.wG,y=vm(t,g,d?"intensity":void 0,(t=>t.sizeHeatmapDataVectors));y.size>0&&(Cm(this.OB,y,(t=>t.intensityData),(t=>t.intensityDataTexture)),this.mG=!0),this.dD.xR(this.ct);const p=this.CV;if((i||c)&&(p.tile=a?{renderMode:"paletted",fillStylePaletted:a,shader:this.OB.uE(Hy["2D"],Hy.ColorGrid2D({heatmapType:"intensity",interpolation:"bilinear"===u&&"bilinear",flipXY:"rows"===this.Ca.dataOrder,intensityTextureType:this.OB.nE?"float":"ubyte",littleEndian:this.OB.IS_MACHINE_LITTLE_ENDIAN,lut:a.lut}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}))}:l?{renderMode:"solid",fillStyleSolid:l,shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:"uniform"}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}))}:void 0),r&&(p.wireframe=h&&n&&o?-1===n.getThickness()?{renderMode:"primitive",shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:"uniform"}),Hy.VertexLocation({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Ca.dataOrder,axisWorldTranslation:fr(this.ct),normalSource:void 0})),fillStyleSolid:o}:{renderMode:"triangulated",shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:"uniform"}),Hy.LineInstanced2D({translation:{dataType:"uniform",sizeUnit:"axis"},scaling:{dataType:"uniform"},flipXY:"rows"===this.Ca.dataOrder,axisWorldTranslation:fr(this.ct),normalSource:void 0})),geometry:qp(this.OB,1),solidLine:n,fillStyleSolid:o}:void 0,p.wireframe?this.CG=this.CG||this.kG():this.CG&&(this.OB.wR(this.CG.wireframeCoordinatesBuffer),this.CG=void 0)),p.mousePicking=f?this.CV.mousePicking||{shader:this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}))}:void 0,this.CV=p,void 0===this.hc&&a&&"value"===a.lookUpProperty&&a.lut.percentageValues){let t=hi,e=ai;this.wG.gridTiles.forEach((i=>{for(let s=0;s<i.intensityData.length;s+=1){const r=i.intensityData[s];r<t&&(t=r),r>e&&(e=r)}})),this.hc={min:t,max:e}}return this.sc=!1,this.yG.length=0,this.rl(e),this.MG=s,this.vG.u=!1,this}_G(){const t=this.bG.gridTiles.map((t=>{const e=bm(this.OB,t.sizeHeatmapDataVectors.secondary,t.sizeHeatmapDataVectors.primary);return{...t,intensityDataTexture:e,tileData:t}})),e=this.bG.gridTileSizes.map((e=>({...e,tiles:t.filter((t=>t.sizeHeatmapDataVectors.primary===e.sizeHeatmapData.primary&&t.sizeHeatmapDataVectors.secondary===e.sizeHeatmapData.secondary))}))),i=this.OB.cR(new Float32Array(16)),s=this.OB.gl.TRIANGLE_STRIP;return{gridTiles:t,gridTileSizes:e,rectangleLocationsBuffer:i,rectangleLocationsDrawMode:s,rectangleLocationsDrawLength:4}}kG(){const t=this.Ca.primaryDimensionVectorsCount+1+this.Ca.secondaryDimensionVectorsCount+1,e=new Float32Array(4*t);let i=0;for(let t=0;t<this.Ca.primaryDimensionVectorsCount+1;t+=1)e[i+0]=t,e[i+1]=0,e[i+2]=t,e[i+3]=this.Ca.secondaryDimensionVectorsCount,i+=4;for(let t=0;t<this.Ca.secondaryDimensionVectorsCount+1;t+=1)e[i+0]=0,e[i+1]=t,e[i+2]=this.Ca.primaryDimensionVectorsCount,e[i+3]=t,i+=4;return{wireframeCoordinatesBuffer:this.OB.cR(e),wireframeSegmentsLength:t}}Jy(t,e){super.Jy(t,e);const i=this.Ca,s=g({x:Math.min(this.Wi.x,this.Wi.x+i.columns*this.qM.x),y:Math.min(this.Wi.y,this.Wi.y+i.rows*this.qM.y)},{x:Math.max(this.Wi.x,this.Wi.x+i.columns*this.qM.x),y:Math.max(this.Wi.y,this.Wi.y+i.rows*this.qM.y)}),r=new Map;return this.bG.gridTiles.forEach((t=>{const e="columns"===this.Ca.dataOrder?{x:this.Wi.x+this.qM.x*t.iFirstVector.primary,y:this.Wi.y+this.qM.y*t.iFirstVector.secondary}:{x:this.Wi.x+this.qM.x*t.iFirstVector.secondary,y:this.Wi.y+this.qM.y*t.iFirstVector.primary},i="columns"===this.Ca.dataOrder?{x:this.qM.x*t.sizeHeatmapDataVectors.primary,y:this.qM.y*t.sizeHeatmapDataVectors.secondary}:{x:this.qM.x*t.sizeHeatmapDataVectors.secondary,y:this.qM.y*t.sizeHeatmapDataVectors.primary},s="columns"===this.Ca.dataOrder?{x:this.Wi.x+this.qM.x*t.iFirstUniqueVector.primary,y:this.Wi.y+this.qM.y*t.iFirstUniqueVector.secondary}:{x:this.Wi.x+this.qM.x*t.iFirstUniqueVector.secondary,y:this.Wi.y+this.qM.y*t.iFirstUniqueVector.primary},n="columns"===this.Ca.dataOrder?{x:this.qM.x*t.sizeUniqueHeatmapDataVectors.primary,y:this.qM.y*t.sizeUniqueHeatmapDataVectors.secondary}:{x:this.qM.x*t.sizeUniqueHeatmapDataVectors.secondary,y:this.qM.y*t.sizeUniqueHeatmapDataVectors.primary};r.set(t,{startLocationAxis:e,sizeAxis:i,startRenderLocationAxis:s,renderSizeAxis:n})})),this.TG={boundaries:s,tilesInfo:r},this}Bu(t,e){var i,s;const r=this.wG,n=this.TG,o=1===t?null===(i=this.CV.mousePicking)||void 0===i?void 0:i.shader:null===(s=this.CV.tile)||void 0===s?void 0:s.shader;if(this.CV.tile&&o&&r&&n){const i=o,s=this.CV.tile,h={x:(n.boundaries.max.x-n.boundaries.min.x)*Math.sign(this.qM.x),y:(n.boundaries.max.y-n.boundaries.min.y)*Math.sign(this.qM.y)},a={x:h.x/this.Ca.columns,y:h.y/this.Ca.rows},l=this.ct.rs(),c={x:a.x/l.x,y:a.y/l.y};this.OB.QB(i).dR(i,((i,o,h)=>{let a=!1;if(!this.OB.Xz(h,t,this,{uniforms:this.dD,idFirst:e,fillStyleSolid:"solid"===s.renderMode&&s.fillStyleSolid}))return!1;if("solid"===s.renderMode||1===t){const t=Ae([{x:this.Wi.x,y:this.Wi.y},{x:this.Wi.x+this.qM.x*this.Ca.columns,y:this.Wi.y},{x:this.Wi.x,y:this.Wi.y+this.qM.y*this.Ca.rows},{x:this.Wi.x+this.qM.x*this.Ca.columns,y:this.Wi.y+this.qM.y*this.Ca.rows}],this.ct.Ni());this.OB.YR(r.rectangleLocationsBuffer,0,t),this.OB.Tz(h,r.rectangleLocationsBuffer,this.ct.Ni(),void 0).Pp(this.OB.gl.TRIANGLE_STRIP,4),a=!0}else"paletted"===s.renderMode&&(this.OB.Uz(h,s.fillStylePaletted.lut,this.hc),l=t=>{this.OB.AR(i("uTileDimensions"),["columns"===this.Ca.dataOrder?t.sizeHeatmapData.primary:t.sizeHeatmapData.secondary,"columns"===this.Ca.dataOrder?t.sizeHeatmapData.secondary:t.sizeHeatmapData.primary])},u=(t,e)=>{const s=n.tilesInfo.get(t.tileData);if(!s)return;let o;const l=this.OB.QE();if("bilinear"===this.vG.T()){const t=(this.ct.x.ot(s.startLocationAxis.x)+c.x/2)*l,e=(this.ct.y.ot(s.startLocationAxis.y)+c.y/2)*l;o=[t,e,(this.ct.x.ot(s.startLocationAxis.x+s.sizeAxis.x)-c.x/2)*l-t,(this.ct.y.ot(s.startLocationAxis.y+s.sizeAxis.y)-c.y/2)*l-e]}else{const t=this.ct.x.ot(s.startLocationAxis.x)*l,e=this.ct.y.ot(s.startLocationAxis.y)*l;o=[t,e,this.ct.x.ot(s.startLocationAxis.x+s.sizeAxis.x)*l-t,this.ct.y.ot(s.startLocationAxis.y+s.sizeAxis.y)*l-e]}const u=Ae([{x:s.startRenderLocationAxis.x,y:s.startRenderLocationAxis.y},{x:s.startRenderLocationAxis.x+s.renderSizeAxis.x,y:s.startRenderLocationAxis.y},{x:s.startRenderLocationAxis.x,y:s.startRenderLocationAxis.y+s.renderSizeAxis.y},{x:s.startRenderLocationAxis.x+s.renderSizeAxis.x,y:s.startRenderLocationAxis.y+s.renderSizeAxis.y}],this.ct.Ni());this.OB.YR(r.rectangleLocationsBuffer,0,u),this.OB.bR(i("uTileBounds"),o).gR(i("uTileIntensityValues"),t.intensityDataTexture,1).Tz(h,r.rectangleLocationsBuffer,this.ct.Ni(),void 0).Pp(this.OB.gl.TRIANGLE_STRIP,4),a=!0},r.gridTileSizes.forEach((t=>{l(t),t.tiles.forEach((t=>{u(t)}))})));var l,u;return a}))}const h=this.CG,a=this.CV.wireframe,l=1===t||null==a?void 0:a.shader;if(h&&a&&l&&"primitive"===a.renderMode){const{fillStyleSolid:e}=a;this.OB.QB(l).dR(l,((i,s,r)=>((this.ct instanceof hs||this.ct instanceof dr)&&this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()),this.OB.pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0).xF(i("uColor"),e.getColor()).fR(h.wireframeCoordinatesBuffer,void 0,{location:s("aPos"),size:2}).AR(i("uScaling"),[this.qM.x,this.qM.y]).AR(i("uTranslationAxis"),[this.Wi.x,this.Wi.y]).Pp(this.OB.gl.LINES,2*h.wireframeSegmentsLength),!0)))}else if(h&&a&&l&&"triangulated"===a.renderMode){const{geometry:e,solidLine:i,fillStyleSolid:s}=a;this.OB.QB(l).dR(l,((r,n,o)=>((this.ct instanceof hs||this.ct instanceof dr)&&this.OB.AR(r("uScale"),this.dD.vR()).AR(r("uDisp"),this.dD.yR()),this.OB.pR(r("uIsHighlighted"),1===t||2===t?0:this.xt).xF(r("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(r("uRenderEffectMask"),2===t?1:0).xF(r("uColor"),s.getColor()).pR(r("uThicknessPixels"),i.getThickness()).AR(r("uRatioPxClip"),[2/this.St.Mi().x,2/this.St.Mi().y]).fR(h.wireframeCoordinatesBuffer,1,{location:n("aLocationA"),size:2},{location:n("aLocationB"),size:2}).AR(r("uScaling"),[this.qM.x,this.qM.y]).AR(r("uTranslationAxis"),[this.Wi.x,this.Wi.y]),e.QB(o,!1).Pp(h.wireframeSegmentsLength),!0)))}return{idCount:1}}Eu(t,e,i,s,r){return{}}sm(t){return this.yG.push(t),Am(this.bG.gridTiles,t,(t=>(t.hasIntensityData=!0,t.intensityData))),this.hc=void 0,this}ii(){return this.mG&&(this.bG.gridTiles.forEach((t=>{t.intensityData.fill(0),t.hasIntensityData=!1})),this.sc=!0,this.mG=!1,this.hc=void 0),this}dispose(){super.dispose();const t=this.wG;t&&(t.gridTiles.forEach((t=>{this.OB.GB(t.intensityDataTexture)})),t.gridTiles.length=0,t.gridTileSizes.forEach((t=>{})),t.gridTileSizes.length=0,this.OB.wR(t.rectangleLocationsBuffer)),this.wG=void 0;const e=this.CG;return e&&this.OB.wR(e.wireframeCoordinatesBuffer),this.CG=void 0,this.CV={},this}Du(){return this.dispose(),this}wd(t){const e=t,i="columns"===this.Ca.dataOrder?e.x:e.y,s="columns"===this.Ca.dataOrder?e.y:e.x,r="columns"===this.Ca.dataOrder?this.Wi.x:this.Wi.y,n="columns"===this.Ca.dataOrder?this.Wi.y:this.Wi.x;let o=(i-r)/("columns"===this.Ca.dataOrder?this.qM.x:this.qM.y),h=(s-n)/("columns"===this.Ca.dataOrder?this.qM.y:this.qM.x);o=Math.floor(Kt(o,0,this.Ca.primaryDimensionVectorsCount-1)),h=Math.floor(Kt(h,0,this.Ca.secondaryDimensionVectorsCount-1));const a=this.FG(o,h),l="columns"===this.Ca.dataOrder?{x:this.Wi.x+(o+.5)*this.qM.x,y:this.Wi.y+(h+.5)*this.qM.y}:{x:this.Wi.x+(h+.5)*this.qM.x,y:this.Wi.y+(o+.5)*this.qM.y},c="columns"===this.Ca.dataOrder?o:h,u="columns"===this.Ca.dataOrder?h:o;return{x:l.x,y:l.y,column:c,row:u,cellValue:a}}LS(t){const e=this.TG;if(!e||t.x<e.boundaries.min.x||t.x>e.boundaries.max.x||t.y<e.boundaries.min.y||t.y>e.boundaries.max.y)return;const i=t,s="columns"===this.Ca.dataOrder?i.x:i.y,r="columns"===this.Ca.dataOrder?i.y:i.x,n="columns"===this.Ca.dataOrder?this.Wi.x:this.Wi.y,o="columns"===this.Ca.dataOrder?this.Wi.y:this.Wi.x,h="columns"===this.Ca.dataOrder?this.qM.x:this.qM.y,a="columns"===this.Ca.dataOrder?this.qM.y:this.qM.x,l=Kt((s-n)/h-.5,0,this.Ca.primaryDimensionVectorsCount-1),c=Kt((r-o)/a-.5,0,this.Ca.secondaryDimensionVectorsCount-1),u=Kt(Math.ceil(l)-1,0,this.Ca.primaryDimensionVectorsCount-1),d=Kt(Math.ceil(c)-1,0,this.Ca.secondaryDimensionVectorsCount-1),f={point:{x:u,y:d},value:this.FG(u,d)},g={point:{x:u,y:d+1},value:this.FG(u,d+1)},y={point:{x:u+1,y:d},value:this.FG(u+1,d)},p={point:{x:u+1,y:d+1},value:this.FG(u+1,d+1)},m=Fs({x:l,y:c},f,g,y,p);if(void 0===m)return;const x=Kt(Math.floor(l+.5),0,this.Ca.primaryDimensionVectorsCount-1),S=Kt(Math.floor(c+.5),0,this.Ca.secondaryDimensionVectorsCount-1),v="columns"===this.Ca.dataOrder?x:S,A="columns"===this.Ca.dataOrder?S:x,b=t;return{x:b.x,y:b.y,column:v,row:A,cellValue:m}}FG(t,e){for(let i=0;i<this.bG.gridTiles.length;i+=1){const s=this.bG.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const i=t-s.iFirstVector.primary,r=e-s.iFirstVector.secondary,n=i*s.sizeHeatmapDataVectors.secondary+r;return s.intensityData[n]}}return 0}Zt(){var t;return(null===(t=this.TG)||void 0===t?void 0:t.boundaries.max.x)||0}jt(){var t;return(null===(t=this.TG)||void 0===t?void 0:t.boundaries.min.x)||0}Jt(){var t;return(null===(t=this.TG)||void 0===t?void 0:t.boundaries.max.y)||0}Qt(){var t;return(null===(t=this.TG)||void 0===t?void 0:t.boundaries.min.y)||0}Cc(){return 0}kc(){return 0}Wb(){const t=[];return this.bG.gridTiles.forEach((e=>{if(!e.hasIntensityData)return;const i=new Array(e.sizeUniqueHeatmapDataVectors.primary).fill(0).map((t=>new Array(e.sizeUniqueHeatmapDataVectors.secondary).fill(0)));for(let t=0;t<e.sizeUniqueHeatmapDataVectors.primary;t+=1){const s=t*e.sizeHeatmapDataVectors.secondary,r=i[t];for(let t=0;t<e.sizeUniqueHeatmapDataVectors.secondary;t+=1){const i=e.intensityData[s+t];r[t]=i}}t.push({type:"intensity",startPrimary:e.iFirstUniqueVector.primary,startSecondary:e.iFirstUniqueVector.secondary,lengthPrimary:e.sizeUniqueHeatmapDataVectors.primary,lengthSecondary:e.sizeUniqueHeatmapDataVectors.secondary,values:i})})),t}}class Em extends po{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.Wi={x:0,y:0},this.qM={x:1,y:1},this.Wy=so.lineStyle,this.Mu=p(void 0),this.vG=p("bilinear"),this.engine=t,this.Ca=n}Jy(t,e){return this.Wi=t,this.qM=e,this}Ky(){return{start:this.Wi,step:this.qM}}jy(t){return this.Wy="function"==typeof t?t(this.Wy):t,this}qy(){return this.Wy}wu(t){return this.Mu.C(t),this}_u(){return this.Mu.T()}tm(t){return this.vG.C(t),this}im(){return this.vG.T()}}class wm extends Em{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.IG=0,this.xb=[],this.AO=t,this.gO=e,this.OB=t.pO(),this.gO=e,this.Ql="columns"===n.scrollDimension?g({x:this.Wi.x,y:this.Wi.y},{x:this.Wi.x,y:this.Wi.y+n.resolution*this.qM.y}):g({x:this.Wi.x,y:this.Wi.y},{x:this.Wi.x+n.resolution*this.qM.x,y:this.Wi.y}),this.PG={dataPerSegment:2048}}Dr(){this.TN||(this.Mt.push({type:"DataPattern",args:{pattern:"columns"===this.Ca.scrollDimension?this.qM.x>0?"ProgressiveX":"RegressiveX":this.qM.y>0?"ProgressiveY":"RegressiveY",regularProgressiveStep:!0}}),this.TN=new am(this.ct,this));const t=this.TN.xN(this.xb,this.Mu.T());if(t>0){for(let e=0;e<t;e+=1)this.xb[0].shape.dispose().Du(),this.xb.shift();"columns"===this.Ca.scrollDimension?this.Ql.min.x=this.xb.length>0?this.xb[0].boundaries.min.x:hi:this.Ql.min.y=this.xb.length>0?this.xb[0].boundaries.min.y:hi}this.xb.forEach((t=>t.shape.Dr()));const e=this.xb.reduce(((t,e)=>{var i,s;return t.min=Math.min(t.min,ee(null===(i=e.shape.hc)||void 0===i?void 0:i.min,hi)),t.max=Math.max(t.max,ee(null===(s=e.shape.hc)||void 0===s?void 0:s.max,ai)),t}),{min:hi,max:ai});return this.xb.forEach((t=>{t.shape.hc=e})),this.Mu.u=!1,this}Bu(t,e){let i=0;return this.xb.forEach((s=>{const{idCount:r}=s.shape.Bu(t,e+i);void 0!==r&&(i+=r)})),{idCount:i}}Ft(){var t;return null===(t=this.xb[0])||void 0===t?void 0:t.shape.Ft()}Eu(t,e,i,s,r){return{}}am(t){if(0===t.length)return this;let e=0;const i=this.PG.dataPerSegment,s=t.length;do{let r=this.xb[this.xb.length-1],n=r?i-(r.existingDataPointsCount+(r.hasJoint?1:0)):0,o=!1;if(!r||0===n){const t={columns:"columns"===this.Ca.scrollDimension?i:this.Ca.resolution,rows:"rows"===this.Ca.scrollDimension?i:this.Ca.resolution,heatmapDataType:this.Ca.heatmapDataType,dataOrder:this.Ca.scrollDimension};let e="columns"===this.Ca.scrollDimension?{x:this.Wi.x+this.qM.x*this.IG,y:this.Wi.y}:{x:this.Wi.x,y:this.Wi.y+this.qM.y*this.IG};this.xb.length>0&&(e="columns"===this.Ca.scrollDimension?{x:e.x-1*this.qM.x,y:e.y}:{x:e.x,y:e.y-1*this.qM.y},o=!0);const s=new Tm(this.AO,this.gO,this.ct,qt,[],t).tm(this.vG.T()).Je(this.We).jy(this.Wy).Jy(e,this.qM);r={shape:s,existingDataPointsCount:0,existingCoordinatesCount:0,allocatedCoordinatesCount:i,dataStartIndex:this.IG,hasJoint:!1,boundaries:{min:{x:s.jt(),y:s.Qt()},max:{x:s.Zt(),y:s.Jt()}}},this.xb.push(r),n=i-(o?1:0)}const h=s-e,a=Math.min(n,h),l=t.slice(e,e+a),c={type:"intensity",values:l,startPrimary:r.existingDataPointsCount+(r.hasJoint?1:0),startSecondary:0,lengthPrimary:a,lengthSecondary:this.Ca.resolution};o&&(c.values.unshift(this.LG),c.lengthPrimary+=1,r.hasJoint=!0),r.shape.sm(c),r.existingDataPointsCount+=a,r.existingCoordinatesCount+=a+(o?1:0),this.LG=l[l.length-1],this.IG+=a,e+=a}while(e<s);return this.Ql.max="columns"===this.Ca.scrollDimension?{...this.Ql.max,x:this.Wi.x+this.IG*this.qM.x}:{...this.Ql.max,y:this.Wi.y+this.IG*this.qM.y},this}sm(t,e){const i=t,s=t+e.length-1,r=e[0].length;this.xb.forEach((t=>{const n=t.dataStartIndex,o=t.dataStartIndex+t.existingDataPointsCount-1;if(s<n||i>o)return;const h=i-n,a=Math.min(s,o),l=a-h+1,c=e.slice(h-i,a-i+1),u={type:"intensity",startSecondary:0,lengthSecondary:r,startPrimary:h,lengthPrimary:l,values:c};t.shape.sm(u)}));const n=this.IG-1;if(s>n){const t=s-n,i=e.slice(-t);if(i.length<t){const e=this.LG||new Array(r).fill(0);for(let s=i.length;s<t;s+=1)i.unshift(e)}this.am(i)}return this}lm(){return this.IG}ii(){return this.xb.forEach((t=>{t.shape.dispose().Du()})),this.xb.length=0,this.Ql="columns"===this.Ca.scrollDimension?g({x:this.Wi.x,y:this.Wi.y},{x:this.Wi.x,y:this.Wi.y+this.Ca.resolution*this.qM.y}):g({x:this.Wi.x,y:this.Wi.y},{x:this.Wi.x+this.Ca.resolution*this.qM.x,y:this.Wi.y}),this.IG=0,this.LG=void 0,this}Jy(t,e){return super.Jy(t,e),this.xb.forEach(((i,s)=>{const r={x:t.x+i.dataStartIndex*e.x,y:t.y+i.dataStartIndex*e.y};i.shape.Jy(r,e),i.boundaries={min:{x:i.shape.jt(),y:i.shape.Qt()},max:{x:i.shape.Zt(),y:i.shape.Jt()}}})),this.xb.length>0?this.Ql=Ti(...this.xb.map((t=>t.boundaries))):this.Ql="columns"===this.Ca.scrollDimension?g({x:this.Wi.x,y:this.Wi.y},{x:this.Wi.x,y:this.Wi.y+this.Ca.resolution*this.qM.y}):g({x:this.Wi.x,y:this.Wi.y},{x:this.Wi.x+this.Ca.resolution*this.qM.x,y:this.Wi.y}),this}Je(t){return super.Je(t),this.xb.forEach((t=>t.shape.Je(this.We))),this}jy(t){return super.jy(t),this.xb.forEach((t=>t.shape.jy(this.Wy))),this}tm(t){return super.tm(t),this.xb.forEach((e=>e.shape.tm(t))),this}dispose(){return super.dispose(),this.xb.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.xb.forEach((e=>e.shape.setVisible(t))),this}Du(){return this.xb.forEach((t=>t.shape.Du())),this}wd(t){const e=ot(t,this.ct,this.engine.ct),i=this.xb.reduce(((i,s)=>{const r=s.shape.wd(t);if(r){const t=vi(ot(r,this.ct,this.engine.ct),e);if(void 0===i||t<i.distance)return{result:r,distance:t,segment:s}}return i}),void 0);if(i&&i.result){const t="columns"===this.Ca.scrollDimension?i.result.column+i.segment.dataStartIndex:i.result.column,e="rows"===this.Ca.scrollDimension?i.result.row+i.segment.dataStartIndex:i.result.row;if("columns"===this.Ca.scrollDimension&&t>=this.IG||"rows"===this.Ca.scrollDimension&&e>=this.IG)return;return{x:i.result.x,y:i.result.y,column:t,row:e,cellValue:i.result.cellValue}}}LS(t){const e=ot(t,this.ct,this.engine.ct),i=this.xb.reduce(((i,s)=>{const r=s.shape.LS(t);if(r){const t=vi(ot(r,this.ct,this.engine.ct),e);if(void 0===i||t<i.distance)return{result:r,distance:t,segment:s}}return i}),void 0);if(i&&i.result){const t="columns"===this.Ca.scrollDimension?i.result.column+i.segment.dataStartIndex:i.result.column,e="rows"===this.Ca.scrollDimension?i.result.row+i.segment.dataStartIndex:i.result.row;if("columns"===this.Ca.scrollDimension&&t>=this.IG||"rows"===this.Ca.scrollDimension&&e>=this.IG)return;return{x:i.result.x,y:i.result.y,column:t,row:e,cellValue:i.result.cellValue}}}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}Cc(){return 0}kc(){return 0}Dt(t){return super.Dt(t),this.xb.forEach((e=>e.shape.Dt(t))),this}}class Bm extends po{constructor(t,e,i,s,r,n){super(t,e,i,s,r),this.vG=p("bilinear"),this.Wy=so.lineStyle,this.Ca=n}tm(t){return this.vG.C(t),this}im(){return this.vG.T()}jy(t){return this.Wy="function"==typeof t?t(this.Wy):t,this}qy(){return this.Wy}}class km extends Bm{constructor(t,e,i,s,r,n){super(t,e,i,s,r,n),this.dD=new Lp,this.CV={},this.bO=yr({fillStyleSolid:()=>X(this.We)&&this.We,fillStylePaletted:()=>j(this.We)&&this.We}),this.AO=t,this.gO=e,this.OB=t.pO(),this.gO=e,this.Hb=new Tm(this.AO,t.BG,t.ct,qt,[],{columns:n.sectors,rows:n.annuli,heatmapDataType:"intensity",dataOrder:"annuli"===n.dataOrder?"rows":"columns",SG:this.OB.NB}).jy(Ot);const o=2*Math.PI/360,h=new Float32Array(724);let a=0;h[a+0]=0,h[a+1]=0,a+=2;for(let t=0;t<=360;t+=1){const e=t*o,i=Math.cos(e),s=Math.sin(e);h[a+0]=i,h[a+1]=s,a+=2}this.DG={vertexBuffer:this.OB.cR(h),drawMode:this.OB.gl.TRIANGLE_FAN,drawLength:362}}Dr(){const t=this.il(),e=this.We,i=this.bO.fillStyleSolid(t),s=this.bO.fillStylePaletted(t),r=i||s,n=this.vG.T(),o=this.vG.u,h=this.dt.T(),a=this.dt.u;return this.dD.xR(this.ct),this.Hb.Dr(),this.Hb.wG?((t||o)&&(this.CV.fill=r?{shader:this.OB.uE(Hy["2D"],Hy.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:fr(this.ct),normalSource:void 0}),s&&Hy.PolarHeatmap({interpolation:"bilinear"===n&&"bilinear",intensityTextureType:this.OB.nE?"float":"ubyte",littleEndian:this.OB.IS_MACHINE_LITTLE_ENDIAN,flipXY:"sectors"===this.Ca.dataOrder,lut:s.lut}),i&&Hy.PolarHeatmap({dataType:"uniform"})),fillStylePaletted:s,fillStyleSolid:i}:void 0),a&&(this.CV.mousePicking=h?{shader:this.OB.uE(Hy["2D"],Hy.VertexLocation({scaling:{dataType:"uniform"},translation:{dataType:"uniform",sizeUnit:"axis"},axisWorldTranslation:fr(this.ct),normalSource:void 0}),Hy.MousePicking())}:void 0),this.rl(e),this.vG.u=!1,this.dt.u=!1,this):this}Bu(t,e){var i;const{vertexBuffer:s,drawLength:r,drawMode:n}=this.DG,o=this.Hb.wG;if(!this.CV.fill||!o)return{};const{fillStylePaletted:h,fillStyleSolid:a}=this.CV.fill,l=1===t?null===(i=this.CV.mousePicking)||void 0===i?void 0:i.shader:this.CV.fill.shader;if(!l)return{};const c=this.ct.oe(),u=Math.min(c.start,c.end),d=Math.max(c.start,c.end),f=Math.min(this.Ca.amplitudeStart,this.Ca.amplitudeStart+(this.Ca.annuli-1)*this.Ca.amplitudeStep),g=Math.max(this.Ca.amplitudeStart,this.Ca.amplitudeStart+(this.Ca.annuli-1)*this.Ca.amplitudeStep);let y;return y=c.end>c.start?Math.min(g,d)-c.start:Math.max(f,u)-c.start,this.OB.QB(l).dR(l,((i,l,c,u)=>{if(this.OB.AR(i("uScale"),this.dD.vR()).AR(i("uDisp"),this.dD.yR()).pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0).AR(u("uViewportSize"),[this.AO.Mi().x*this.OB.QE()/(1===t?this.St.Ca.Ta:1),this.AO.Mi().y*this.OB.QE()/(1===t?this.St.Ca.Ta:1)]).AR(i("uScaling"),[y,y]).AR(i("uTranslationAxis"),[0,0]).fR(s,void 0,{location:l("aPos"),size:2}).pR(u("uAngleOffset"),this.ct.de()%(2*Math.PI)).pR(u("uAngleDirection"),this.ct.ce()?1:-1).pR(u("uSectors"),this.Ca.sectors).pR(u("uAnnuli"),this.Ca.annuli),1===t)this.OB.NR(i("uFirstId"),e).Ez(c,1);else{if(h){const t=this.Hb.hc;this.OB.pR(i("uAmplitudeStart"),this.Ca.amplitudeStart).pR(i("uAmplitudeStep"),this.Ca.amplitudeStep).pR(i("uAmplitudeAxisStart"),this.ct.oe().start).pR(i("uAmplitudeAxisEnd"),this.ct.oe().end).Uz(c,h.lut,t).gR(i("uTileIntensityValues"),o.gridTiles[0].intensityDataTexture,0)}a&&this.OB.xF(i("uColor"),a.getColor())}return this.OB.Pp(n,r),!0})),{idCount:1}}Ft(){return this.Hb.Ft()}Eu(t,e,i,s,r){return{}}sm(t){return this.Hb.sm(t),this}ii(){return this.Hb.ii(),this}dispose(){return super.dispose(),this.Hb.dispose(),this.CV={},this.OB.wR(this.DG.vertexBuffer),this}Du(){return this.dispose(),this}Je(t){return super.Je(t),this.Hb.Je(this.We),this}wd(t){const e=this.Ca.amplitudeStart,i=this.Ca.amplitudeStart+(this.Ca.annuli-1)*this.Ca.amplitudeStep,s=Math.min(e,i),r=Math.max(e,i);(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>r)&&(t.angle=Kt(t.angle,0,360),t.amplitude=Kt(t.amplitude,r,r));let n=Math.round((t.angle-0)/360*this.Ca.sectors);n>=this.Ca.sectors&&(n=0);const o=Math.round((t.amplitude-e)/(i-e)*(this.Ca.annuli-1));return{iAnnulus:o,iSector:n,cellValue:this.FG(o,n),angle:n*(360/this.Ca.sectors),amplitude:e+o*(i-e)/(this.Ca.annuli-1)}}LS(t){const e=this.Ca.amplitudeStart,i=this.Ca.amplitudeStart+(this.Ca.annuli-1)*this.Ca.amplitudeStep,s=Math.min(e,i),r=Math.max(e,i);(t.angle<0||t.angle>360||t.amplitude<s||t.amplitude>r)&&(t.angle=Kt(t.angle,0,360),t.amplitude=Kt(t.amplitude,r,r));const n=(t.angle-0)/360*this.Ca.sectors,o=(t.amplitude-e)/(i-e)*(this.Ca.annuli-1),h=Math.floor(n),a=Math.floor(o),l={point:{x:a,y:h},value:this.FG(a,h)},c={point:{x:a,y:h+1},value:this.FG(a,h+1)},u={point:{x:a+1,y:h},value:this.FG(a+1,h)},d={point:{x:a+1,y:h+1},value:this.FG(a+1,h+1)},f=Fs({x:o,y:n},l,c,u,d);if(void 0!==f)return{iAnnulus:a,iSector:h,cellValue:f,angle:t.angle,amplitude:t.amplitude}}FG(t,e){const i="annuli"===this.Ca.dataOrder?t:e,s="annuli"===this.Ca.dataOrder?e:t;for(let t=0;t<this.Hb.bG.gridTiles.length;t+=1){const e=this.Hb.bG.gridTiles[t];if(i>=e.iFirstVector.primary&&i<=e.iFirstVector.primary+e.sizeHeatmapDataVectors.primary-1&&s>=e.iFirstVector.secondary&&s<=e.iFirstVector.secondary+e.sizeHeatmapDataVectors.secondary-1){const t=i-e.iFirstVector.primary,r=s-e.iFirstVector.secondary,n=t*e.sizeHeatmapDataVectors.secondary+r;return e.intensityData[n]}}return 0}Zt(){return 0}jt(){return 0}Jt(){return 0}Qt(){return 0}Cc(){return 0}kc(){return 0}}class Rm extends Tp{constructor(t){super(t);const{vertices:e,drawMode:i,drawSize:s}=this.fV();this.AV=t.cR(e),this.pV=s,this.vV=i}QB(t){return this.OB.fR(this.AV,0,{location:t.attribute("aCurveOrBaseline"),size:1},{location:t.attribute("aSegmentSide"),size:1}),this}Pp(t,e,i){return this.OB.ez(void 0!==e?e:this.vV,i||0,this.pV,t),this}fV(){return{vertices:new Float32Array([1,0,0,0,0,1,0,1,1,1,1,0]),drawMode:this.OB.gl.TRIANGLES,drawSize:6}}LE(){this.OB.wR(this.AV)}}const Fm=t=>{let e=t.PR.TE.get(void 0);return e||(e=new Rm(t),t.PR.TE.set(void 0,e),e)};class Im extends wo{constructor(t,i,s,r){super(t,i,s,r,[{type:"DataPattern",args:{pattern:"ProgressiveX"}}]),this.EG=so.fillStyle,this.zG=p("bottom"),this.OG=so.fillStyle,this.VG=p(e.PointShape.Circle),this.NG=p(5),this.GG=p(0),this.UG=p(void 0),this.S_=!0,this.$G={x:0,y:0}}P_(t){this.zG.T()!==t&&this.zG.C(t)}$d(t){return this.EG=fo(this.EG,t),this}M_(){return this.EG}YG(){return go(this.HG,this.EG)}XG(){return go(this.WG,this.OG)}Ud(t){return this.OG=fo(this.OG,t),Ft(this.OG)&&(this.Hd(e.PointShape.Square),this.Qd(1)),this}Zd(){return this.OG}Hd(t){return this.VG.C(t),lr(this.VG.T())&&this.Qd(1),this}Xd(){return this.VG.T()}Qd(t){return this.NG.C(t),this}w_(){return this.NG.T()}Wd(t){return this.GG.C(t),this}jd(){return this.GG.T()}__(t){return this.$G=t,this}C_(){return this.$G}x_(t){return this.UG.C(t),this}k_(){return this.UG.T()}}class Om extends sm{constructor(t,e){super(t,e),this.JV=!1,this.KV={jG:!1,ZG:0},this.tN=t instanceof hs?{type:"linear",scale:t}:{type:"unknown"},this.QV.Tt("DataPattern",(t=>{!1===t.allowDataGrouping&&(this.JV=!0)}))}QG(t,e){const i=null==t?void 0:t.hd,s=null==t?void 0:t.rd,r=null==t?void 0:t.Nu,n=null==t?void 0:t.Vu,o=null==t?void 0:t.md();if(!t||this.JV||!o||"linear"!==this.tN.type||!i||!s||void 0===r||void 0===n||!e){const t=this.KV.jG;return this.KV={jG:!1,ZG:null!=r?r:0},{cpStateChanged:t,cpActive:!1}}const h=Bs(o),a=t.ed(),l=t.bd(),c=a?a[h]:void 0,u=l?l[h]:void 0;if(r<2||void 0===c||void 0===u||u===c){const t=this.KV.jG;return this.KV={jG:!1,ZG:null!=r?r:0},{cpStateChanged:t,cpActive:!1}}const d=this.calculateAvgStepBetweenDataPoints(u,c,r),f=this.tN.scale,g=Math.abs(f.rs()[h]),y=g/d,p=Math.floor(.8*y),m=p*d,x=p>=4,S=this.KV.jG?this.KV.JG/g<1.5:void 0,v=this.KV.jG&&p>this.KV.KG?p/this.KV.KG>=2:void 0;let A;return!0===this.KV.jG?S?v&&(A={jG:!0,JG:m,KG:p,ZG:r}):A=x?{jG:!0,JG:m,KG:p,ZG:r}:{jG:!1,ZG:r}:x&&(A={jG:!0,JG:m,KG:p,ZG:r}),this.KV=A||{...this.KV,ZG:r},!!A&&this.hN(),{cpStateChanged:!!A,cpActive:this.KV.jG}}qG(t,e){var i,s,r;const n=t.hd,o=t.rd,h=t.Gu,a=t.Nu,l=t.Vu,c=t.td;if(this.JV||!this.KV.jG||!n||!o||void 0===e)return;const u=Bs(e),d=ks(e),f="x"===u?n:o,g="x"===u?o:n,y=f.length,p="x"===u?this.ct.x:this.ct.y,m=this.KV.JG,x=Math.min(p.getInnerStart(),p.getInnerEnd()),S=Math.max(p.getInnerStart(),p.getInnerEnd()),v=Vo(x,S,f,h,a,l,e,1);if(!v)return;const A=f[v.iFirstSampleDataArray];if(this.tU){if(this.tU.iU<v.iFirstSample){const t=Math.min(Math.floor((A-this.tU.xl)/m),this.tU.sU);if(t>0)if(this.tU.sU-=t,this.tU.sU>0){this.tU.eU.splice(0,2*t),this.tU.hU.splice(0,2*t),this.tU.rU&&this.tU.rU.splice(0,2*t),this.tU.nU&&this.tU.nU.splice(0,2*t),this.tU.xl+=t*m;const e=_o(this.tU.xl,Math.max(h-1-y+1,0),h-1,d,(t=>f[Po(t,h,y)])),i=Po(e,h,y);this.tU.iU=f[i]>=this.tU.xl?e:e+1}else this.tU=void 0}if(void 0!==(null===(i=this.tU)||void 0===i?void 0:i.oU)&&this.tU.oU>v.iLastSample){const t=f[v.iLastSampleDataArray],e=Math.min(Math.floor((this.tU.xl+this.tU.sU*m-t)/m),this.tU.sU);if(e>0)if(this.tU.sU-=e,this.tU.sU>0){for(let t=0;t<2*e;t+=1)this.tU.eU.pop(),this.tU.hU.pop(),this.tU.rU&&this.tU.rU.pop(),this.tU.nU&&this.tU.nU.pop();const t=_o(this.tU.xl+this.tU.sU*m,Math.max(h-1-y+1,0),h-1,d,(t=>f[Po(t,h,y)])),i=Po(t,h,y);this.tU.oU=f[i]<=this.tU.xl+this.tU.sU*m?t:t-1}else this.tU=void 0}}const b=this.tU||{xl:A,sU:0,eU:[],hU:[],rU:t.fd?[]:void 0,nU:t.dd?[]:void 0,aU:t.Ad?[]:void 0,lU:t.gd?[]:void 0,iU:v.iFirstSample,oU:void 0},C=(t,e,i,s)=>{let r=Math.min(t,t+i*m),n=Math.max(t,t+i*m);const o=[];if(i<0&&r<x||i>0&&n>S)return o;let a=s,l=ai,u=ai,d=-1,p=hi,A=hi,C=-1,M=0;for(;a<=v.iLastSample&&a>=v.iFirstSample;){const s=a%y,v=f[s],T=g[s];if(c&&Number.isNaN(v))a+=e;else if(r<=v&&v<=n)M+=1,c&&Number.isNaN(T)||(T>u&&(l=v,u=T,d=a),T<A&&(p=v,A=T,C=a)),a+=e;else{if(M>0)l=l===ai?Number.NaN:l,u=u===ai?Number.NaN:u,p=p===hi?Number.NaN:p,A=A===hi?Number.NaN:A,d<C?(o.push({iFirst:d,iSecond:C}),e>0?(b.eU.push(l),b.hU.push(u),b.eU.push(p),b.hU.push(A)):(b.eU.unshift(p),b.hU.unshift(A),b.eU.unshift(l),b.hU.unshift(u))):(o.push({iFirst:C,iSecond:d}),e>0?(b.eU.push(p),b.hU.push(A),b.eU.push(l),b.hU.push(u)):(b.eU.unshift(l),b.hU.unshift(u),b.eU.unshift(p),b.hU.unshift(A)));else{const t=e>0?b.oU:b.iU;if(void 0===t)o.push({iFirst:0,iSecond:0}),e>0?(b.eU.push(Number.NaN),b.hU.push(Number.NaN),b.eU.push(Number.NaN),b.hU.push(Number.NaN)):(b.eU.unshift(Number.NaN),b.hU.unshift(Number.NaN),b.eU.unshift(Number.NaN),b.hU.unshift(Number.NaN));else{const i=Po(t,h,y),s=f[i],a=g[i],l=Kt((s+v)/2,r,n),c=Kt((l+v)/2,r,n),u=a+(l-s)/(v-s)*(T-a),d=a+(c-s)/(v-s)*(T-a);o.push({iFirst:t,iSecond:t}),e>0?(b.eU.push(l),b.hU.push(u),b.eU.push(c),b.hU.push(d)):(b.eU.unshift(c),b.hU.unshift(d),b.eU.unshift(l),b.hU.unshift(u))}}if(b.sU+=1,e>0?b.oU=a-1:(b.iU=a+1,b.xl=i>0?n:r),r=Math.min(t+o.length*i*m,t+(o.length+1)*i*m),n=Math.max(t+o.length*i*m,t+(o.length+1)*i*m),M=0,l=ai,u=ai,d=-1,p=hi,A=hi,C=-1,i<0&&r<x||i>0&&n>S)break}}return o},M=C(b.xl+(ks(e)?1:-1)*b.sU*m,1,1*(ks(e)?1:-1),void 0!==(null===(s=this.tU)||void 0===s?void 0:s.oU)?this.tU.oU+1:v.iFirstSample),T=C(b.xl,-1,-1*(ks(e)?1:-1),void 0!==(null===(r=this.tU)||void 0===r?void 0:r.iU)?this.tU.iU-1:v.iFirstSample);if(0===T.length&&0===M.length)return;const E=t.fd&&b.rU?[t.fd,b.rU]:void 0,w=t.dd&&b.nU?[t.dd,b.nU]:void 0,B=t.Ad&&b.aU?[t.Ad,b.aU]:void 0,k=t.gd&&b.lU?[t.gd,b.lU]:void 0;if(E||w||B||k){for(const t of M){const e=Po(t.iFirst,h,y),i=Po(t.iSecond,h,y);E&&E[1].push(E[0][e],E[0][i]),w&&w[1].push(w[0][e],w[0][i]),B&&B[1].push(B[0][e],B[0][i]),k&&k[1].push(k[0][e],k[0][i])}for(const t of T){const e=Po(t.iFirst,h,y),i=Po(t.iSecond,h,y);E&&E[1].unshift(E[0][i],E[0][e]),w&&w[1].unshift(w[0][i],w[0][e]),B&&B[1].unshift(B[0][i],B[0][e]),k&&k[1].unshift(k[0][i],k[0][e])}}return this.tU=b.sU>0?b:void 0,{cU:"x"===u?b.eU:b.hU,uU:"y"===u?b.eU:b.hU,BI:b.rU,dU:b.nU,H:b.aU,yl:b.lU}}hN(){this.tU=void 0}lN(){}}class Lm extends Im{constructor(t,e,i,s){super(t,e,i,s),this.dD=new Lp,this.CN=new Om(this.ct,this),this.bO=yr({lineStyleSolid:()=>ir(this.gu)&&this.gu,lineStyleDashed:()=>or(this.gu)&&this.gu,strokeFillSolid:()=>{const t=this.gu.getFillStyle();return X(t)&&t},strokeFillLinearGradient:()=>{const t=this.gu.getFillStyle();return et(t)&&t},strokeFillRadialGradient:()=>{const t=this.gu.getFillStyle();return Z(t)&&t},strokeFillIndividual:()=>{const t=this.gu.getFillStyle();return G(t)&&t},strokeFillPaletted:()=>{const t=this.gu.getFillStyle();return j(t)&&t},areaFillSolid:()=>X(this.EG)&&this.EG,areaFillLinearGradient:()=>et(this.EG)&&this.EG,areaFillRadialGradient:()=>Z(this.EG)&&this.EG,areaFillIndividual:()=>G(this.EG)&&this.EG,areaFillPaletted:()=>j(this.EG)&&this.EG,markerFillSolid:()=>X(this.OG)&&this.OG,markerFillLinearGradient:()=>et(this.OG)&&this.OG,markerFillRadialGradient:()=>Z(this.OG)&&this.OG,markerFillPaletted:()=>j(this.OG)&&this.OG,markerFillIndividual:()=>G(this.OG)&&this.OG,markerFillImage:()=>Ft(this.OG)&&this.OG,markerShapeIcon:()=>{const t=this.VG.T();return lr(t)&&t}}),this.Nd=p(void 0),this.fU=[],this.sc=!1,this.AU=[],this.gU=void 0,this.dG=(t,e,i)=>{var s;const r=null===(s=this.pU)||void 0===s?void 0:s.shapeIcon;let n=t,o=e;return r&&(n=r.Mi().x,o=r.Mi().y),Bp(t,e,n*this.NG.T(),o*this.NG.T(),i)},this.gO=e,this.CV={type:"none"},this.OB=t.pO(),this.AO=t,this.wV=this.OB.cz}Gd(t){return this.Nd.C(Ke(t,this.Nd.T(),(()=>({change:t=>{this.fU.push({min:t.iDataStart,max:t.iDataEnd}),this.vU&&this.AU.push({min:t.iDataStart,max:t.iDataEnd})},clear:()=>{this.sc=!0,this.vU=void 0,this.gU=void 0,this.CN.hN()},loop:()=>{this.vU=void 0,this.AU.length=0}})))),this.gU=void 0,this}Ja(){var t;const e=null===(t=this.Nd.T())||void 0===t?void 0:t.ei,i=null==e?void 0:e.md();return i&&{F_:Bs(i),I_:()=>this._v()}}_v(){var t,i,s,r,n,o,h,a,c,u,d,f,g,y,p,m,x,S,v,A,b,C,M,T,E,w,B,k,R,F,I;const O=null===(t=this.Nd.T())||void 0===t?void 0:t.ei,L=this.Nd.u,D=null==O?void 0:O.hd,P=null==O?void 0:O.rd;if(!O||!D||!P)return;const V=O.md(),_=V&&this.ct[Bs(V)],z=O.dd,U=O.fd,N=O.Ad,X=O.gd,H=O.Gu,G=O.Nu,Y=O.Vu,W=L||this.nl()||this.YG()||this.XG()||this.zG.u,j=this.bO.lineStyleSolid(W),$=this.bO.lineStyleDashed(W),Q=j||$,J=Q&&Q.getThickness(),q=this.bO.strokeFillSolid(W),Z=this.bO.strokeFillLinearGradient(W),K=this.bO.strokeFillRadialGradient(W),tt=this.bO.strokeFillIndividual(W),et=this.bO.strokeFillPaletted(W),it=q||Z||K||tt||et,st=this.bO.areaFillSolid(W),rt=this.bO.areaFillLinearGradient(W),nt=this.bO.areaFillRadialGradient(W),ot=this.bO.areaFillIndividual(W),ht=this.bO.areaFillPaletted(W),at=st||rt||nt||ot||ht,lt=this.bO.markerFillSolid(W),ct=this.bO.markerFillLinearGradient(W),ut=this.bO.markerFillRadialGradient(W),dt=this.bO.markerFillPaletted(W),ft=this.bO.markerFillIndividual(W),gt=this.bO.markerFillImage(W),yt=lt||ct||ut||dt||ft||gt,pt=this.VG.T(),mt=this.VG.u,xt=this.bO.markerShapeIcon(mt),St=this.NG.T(),vt=this.NG.u,At=this.UG.u,bt=this.fU.length>0||At,Ct=this.sc||L,Mt=Ct?[O.xd()]:(t=>{const e=[];for(const i of t){let t=!1;for(const s of e)if(i.min>=s.min&&i.min<=s.max||i.max>=s.min&&i.max<=s.max){s.min=Math.min(s.min,i.min),s.max=Math.min(s.max,i.max),t=!0;break}t||e.push(i)}return e})(this.fU),Tt=!!$,Et=this.dt.T(),wt=this.dt.u,Bt=this.S_&&(!!Q||!!at),{cpStateChanged:kt,cpActive:Rt}=this.CN.QG(O,Bt);if(V&&Rt&&_&&(kt||Ct||bt||_.ri||W)){const t=this.CN.qG(O,V);if(t){const e=!kt&&!Ct&&!W;this.yU=Dm(this.OB,[t.cU,t.uU],t.BI,t.dU,t.H,t.yl,Tt,this.yU,e,V,1e3,this.ct.Ni(),(t=>ve(t,this.ct.Ni()))),this.mU={min:hi,max:ai};const l="x"===Bs(V)?t.uU:t.cU,u=l.length;for(let t=0;t<u;t+=1){const e=l[t];O.td&&Number.isNaN(e)||(this.mU.min=Math.min(this.mU.min,e),this.mU.max=Math.max(this.mU.max,e))}(null===(i=this.xU)||void 0===i?void 0:i.bufferX)!==this.yU.bufferX&&(this.OB.wR(null===(s=this.xU)||void 0===s?void 0:s.bufferX),this.OB.wR(null===(r=this.xU)||void 0===r?void 0:r.bufferY),this.OB.wR(null===(n=this.xU)||void 0===n?void 0:n.bufferColors),this.OB.wR(null===(o=this.xU)||void 0===o?void 0:o.bufferLengthSoFar),this.OB.wR(null===(h=this.xU)||void 0===h?void 0:h.bufferRotations),this.OB.wR(null===(a=this.xU)||void 0===a?void 0:a.bufferLookupValues),this.OB.wR(null===(c=this.xU)||void 0===c?void 0:c.bufferSizes)),this.xU=void 0}}if(V&&_&&!Rt&&(kt||Ct||bt||_.ri||At||W)){const t=Math.min(_.getInnerStart(),_.getInnerEnd()),i=Math.max(_.getInnerStart(),_.getInnerEnd()),s="x"===Bs(V)?D:P,r="x"===Bs(V)?P:D,n=Vo(t,i,s,H,G,Y,V,1);if(!this.SU||(null==n?void 0:n.iFirstSample)!==this.SU.iFirstSample||n.iLastSample!==this.SU.iLastSample||Ct){this.mU={min:hi,max:ai};let t,e=0,i=0;for(const o of(null==n?void 0:n.dataRanges)||[])for(let n=o.offset;n<o.offset+o.count;n+=1){const o=s[n],h=r[n];O.td&&Number.isNaN(h)?t=void 0:(this.mU.min=Math.min(this.mU.min,h),this.mU.max=Math.max(this.mU.max,h),void 0!==t&&(e+=1,i+=Math.abs(o-t)),t=o)}const o=i/e;this.bU=o}if(this.SU=n,void 0===n)this.OB.wR(null===(u=this.yU)||void 0===u?void 0:u.bufferX),this.OB.wR(null===(d=this.yU)||void 0===d?void 0:d.bufferY),this.OB.wR(null===(f=this.yU)||void 0===f?void 0:f.bufferColors),this.OB.wR(null===(g=this.yU)||void 0===g?void 0:g.bufferLengthSoFar),this.OB.wR(null===(y=this.yU)||void 0===y?void 0:y.bufferRotations),this.OB.wR(null===(p=this.yU)||void 0===p?void 0:p.bufferLookupValues),this.OB.wR(null===(m=this.yU)||void 0===m?void 0:m.bufferSizes),this.yU=void 0,this.OB.wR(null===(x=this.xU)||void 0===x?void 0:x.bufferX),this.OB.wR(null===(S=this.xU)||void 0===S?void 0:S.bufferY),this.OB.wR(null===(v=this.xU)||void 0===v?void 0:v.bufferColors),this.OB.wR(null===(A=this.xU)||void 0===A?void 0:A.bufferLengthSoFar),this.OB.wR(null===(b=this.xU)||void 0===b?void 0:b.bufferRotations),this.OB.wR(null===(C=this.xU)||void 0===C?void 0:C.bufferLookupValues),this.OB.wR(null===(M=this.xU)||void 0===M?void 0:M.bufferSizes),this.xU=void 0,this.MU=n;else if(kt||Ct||!this.MU||n.iFirstSample<this.MU.iFirstSample||n.iLastSample>this.MU.iLastSample||W){let t,i,s,r,o,h;if(1===n.dataRanges.length){const e=n.dataRanges[0];t=D.subarray(e.offset,e.offset+e.count),i=P.subarray(e.offset,e.offset+e.count),s=U?U.subarray(e.offset,e.offset+e.count):void 0,r=z?z.subarray(e.offset,e.offset+e.count):void 0,o=N?N.subarray(e.offset,e.offset+e.count):void 0,h=X?X.subarray(e.offset,e.offset+e.count):void 0}else{const e=n.dataRanges[0],a=n.dataRanges[1],l=e.count+a.count;t=new O.Ku(l),t.set(D.subarray(e.offset),0),t.set(D.subarray(a.offset,a.offset+a.count),e.count),i=new O.Ku(l),i.set(P.subarray(e.offset),0),i.set(P.subarray(a.offset,a.offset+a.count),e.count),U&&(s=new Uint32Array(l),s.set(U.subarray(e.offset),0),s.set(U.subarray(a.offset,a.offset+a.count),e.count)),z&&(r=new Float32Array(l),r.set(z.subarray(e.offset),0),r.set(z.subarray(a.offset,a.offset+a.count),e.count)),N&&(o=new Float32Array(l),o.set(N.subarray(e.offset),0),o.set(N.subarray(a.offset,a.offset+a.count),e.count)),X&&(h=new Float32Array(l),h.set(X.subarray(e.offset),0),h.set(X.subarray(a.offset,a.offset+a.count),e.count))}const a=!kt&&!Ct&&!W;this.xU=Dm(this.OB,[t,i],s,r,o,h,Tt,this.xU,a,V,1e3,this.ct.Ni(),(t=>ve(t,this.ct.Ni())));let c=t,u=i,d=s,f=r;const g=this.UG.T();if(g){const n="spline"===g.type?((t,e,i)=>{const s=Bs(i),r="x"===s?t.xValues:t.yValues,n="x"===s?t.yValues:t.xValues,{lookupValues:o,colors:h}=t;if(r.length<=2)return{xValues:Array.from(t.xValues),yValues:Array.from(t.yValues),lookupValues:o?Array.from(o):void 0,colors:h?Array.from(h):void 0};const a=((t,e)=>{const i=1e-5,s=t.length-1,r=Array(s);if(s>1){let n=l(0,0),o=l(0,0),h=l(0,0),a=Ri(Di({x:t[1],y:e[1]},{x:t[0],y:e[0]}));const c=3;let u=0,d=0;for(let f=0;f<s;f+=1){const g=Array(4);if(g[0]={x:t[f],y:e[f]},g[1]={x:t[f],y:e[f]},g[3]={x:t[f+1],y:e[f+1]},g[2]={x:t[f+1],y:e[f+1]},h=a,n=o,Number.isNaN(n.y)&&(n=l(0,0)),f+1<s&&!Number.isNaN(e[f+2])?(a=t[f+2]===t[f+1]&&e[f+2]===e[f+1]?l(0,0):Ri(Di({x:t[f+2],y:e[f+2]},{x:t[f+1],y:e[f+1]})),o=Ri(Li(h,a))):o=l(0,0),e[f+1]===e[f])u=0,d=0;else{const e=t[f+1]-t[f];u=Math.abs(n.x)>i?Math.abs(e/(c*n.x)):1,d=Math.abs(o.x)>i?Math.abs(e/(c*o.x)):1}g[1]=Li(Oi(n,u),g[1]),g[2]=Di(g[2],Oi(o,d)),r[f]=g}}return r.length>0?r:[]})(r,n),c=a.length,u=[],d=[],f=[],g=[];for(let t=0;t<c;t+=1){const i=a[t];for(let t=0;t<e;t+=1){const s=t/(e-1),r=s*s,n=r*s,o=1-s,h=o*o,a=h*o;u.push(a*i[0].x+3*s*h*i[1].x+3*r*o*i[2].x+n*i[3].x),d.push(a*i[0].y+3*s*h*i[1].y+3*r*o*i[2].y+n*i[3].y)}}if(o)for(let t=0;t<u.length;t+=1){const i=o[Math.round(t/e)];g[t]=i}if(h)for(let t=0;t<u.length;t+=1){const i=h[Math.round(t/e)];f[t]=i}return{xValues:"x"===s?u:d,yValues:"x"===s?d:u,lookupValues:o?g:void 0,colors:h?f:void 0}})({xValues:t,yValues:i,lookupValues:r,colors:s},g.resolution||20,V):"step"===g.type?((t,i,s)=>{const{lookupValues:r,colors:n}=t,o=Bs(s),h="x"===o?t.xValues:t.yValues,a="x"===o?t.yValues:t.xValues,l=[],c=[],u=[],d=[],f=h.length,g=i;if(f>0){let t=0,e=h[0],i=a[0];l[t]=e,c[t]=i,t+=1;for(let s=1;s<f;s+=1){const r=h[s],n=a[s];if(g<=0)l[t]=e,c[t]=n,t+=1;else{const s=e*(1-g)+r*g;l[t]=s,c[t]=i,t+=1,l[t]=s,c[t]=n,t+=1}l[t]=r,c[t]=n,t+=1,e=r,i=n}}if(r)if(g===e.StepOptions.before){d[0]=r[0];for(let t=1;t<f;t+=1)d[2*t-1]=r[t],d[2*t]=r[t]}else if(g===e.StepOptions.middle||g===e.StepOptions.after){d[0]=r[0],d[1]=r[0];for(let t=1;t<f;t+=1)d[3*t-1]=r[t],d[3*t]=r[t],d[3*t+1]=r[t]}if(n)if(g===e.StepOptions.before){u[0]=n[0];for(let t=1;t<f;t+=1)u[2*t-1]=n[t],u[2*t]=n[t]}else if(g===e.StepOptions.middle||g===e.StepOptions.after){u[0]=n[0],u[1]=n[0];for(let t=1;t<f;t+=1)u[3*t-1]=n[t],u[3*t]=n[t],u[3*t+1]=n[t]}return{xValues:"x"===o?l:c,yValues:"x"===o?c:l,lookupValues:r?d:void 0,colors:n?u:void 0}})({xValues:t,yValues:i,lookupValues:r,colors:s},"before"===g.step?0:"after"===g.step?1:.5,V):void 0;c=n?n.xValues:c,u=n?n.yValues:u,d=(null==n?void 0:n.colors)?n.colors:d,f=(null==n?void 0:n.lookupValues)?n.lookupValues:f}this.yU=c===t&&u===i?this.xU:Dm(this.OB,[c,u],d,f,void 0,void 0,Tt,(null===(T=this.yU)||void 0===T?void 0:T.bufferX)===this.xU.bufferX?void 0:this.yU,!(!a||At||g),V,1e3,this.ct.Ni(),(t=>ve(t,this.ct.Ni()))),this.MU=n}}else this.SU=void 0;if(!V&&(Ct||bt||W)){if(!this.yU||this.yU.bufferSize<O.Nu||Tt){const t=void 0!==O.pd?O.pd:O.Nu;let e,i=0,s=0;if(Tt){const r=Pm(D,P,D[0],P[0],0,0);e=this.OB.$R(2*t,r[0],null===(E=this.yU)||void 0===E?void 0:E.bufferLengthSoFar,Float32Array),i=r[1],s=r[2]}this.yU={bufferX:this.OB.$R(t*(this.ct.Ni()?2:1),ve(D,this.ct.Ni()),null===(w=this.yU)||void 0===w?void 0:w.bufferX),bufferY:this.OB.$R(t*(this.ct.Ni()?2:1),ve(P,this.ct.Ni()),null===(B=this.yU)||void 0===B?void 0:B.bufferY),bufferColors:U?this.OB.$R(t,U,null===(k=this.yU)||void 0===k?void 0:k.bufferColors,Uint32Array):void 0,bufferLookupValues:z?this.OB.$R(t,z,null===(R=this.yU)||void 0===R?void 0:R.bufferLookupValues,Float32Array):void 0,bufferSizes:N?this.OB.$R(t,N,null===(F=this.yU)||void 0===F?void 0:F.bufferSizes,Float32Array):void 0,bufferRotations:X?this.OB.$R(t,X,null===(I=this.yU)||void 0===I?void 0:I.bufferRotations,Float32Array):void 0,bufferLengthSoFar:e,lengthSoFarX:i,lengthSoFarY:s,bufferSize:t,valueCount:O.Nu}}else{const t=this.yU.bufferX,e=this.yU.bufferY;Mt.forEach((i=>{var s,r,n,o;const h=D.subarray(i.min,i.max+1),a=P.subarray(i.min,i.max+1);if(this.OB.YR(t,i.min*(this.ct.Ni()?2:1),ve(h,this.ct.Ni())),this.OB.YR(e,i.min*(this.ct.Ni()?2:1),ve(a,this.ct.Ni())),U&&(null===(s=this.yU)||void 0===s?void 0:s.bufferColors)){const t=U.subarray(i.min,i.max+1);this.OB.YR(this.yU.bufferColors,i.min,t,Uint32Array)}if(z&&(null===(r=this.yU)||void 0===r?void 0:r.bufferLookupValues)){const t=z.subarray(i.min,i.max+1);this.OB.YR(this.yU.bufferLookupValues,i.min,t,Float32Array)}if(X&&(null===(n=this.yU)||void 0===n?void 0:n.bufferRotations)){const t=X.subarray(i.min,i.max+1);this.OB.YR(this.yU.bufferRotations,i.min,t,Float32Array)}if(N&&(null===(o=this.yU)||void 0===o?void 0:o.bufferSizes)){const t=N.subarray(i.min,i.max+1);this.OB.YR(this.yU.bufferSizes,i.min,t,Float32Array)}})),this.yU.valueCount=O.Nu}this.xU=this.yU}if(W||vt||mt||wt){if(it&&Q&&!1!==J){const t=-1===J?"primitive":"triangulated",e=et?["lookup",et.lookUpProperty,et.lut]:tt?"attribute":Z?["gradient",Z]:K?["gradient",K]:"uniform";this.CV="primitive"===t?{type:t,shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:e}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0,splitPosAttribute:!0}),$&&Hy.StippleTexture),lineStyleSolid:j,lineStyleDashed:$,fillStyleSolid:q,fillStyleLinearGradient:Z,fillStyleRadialGradient:K,fillStyleIndividual:tt,fillStylePaletted:et,mousePickingShader:Et&&this.OB.uE(Hy["2D"],Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0,splitPosAttribute:!0}),$&&Hy.StippleTexture,Hy.MousePicking({useVertexId:!0}))}:"triangulated"===t?{type:t,shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:e}),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0,splitPosAttribute:!0}),this.wV?Hy.AliasedEdge:void 0,$&&Hy.StippleTextureInstanced),geometry:qp(this.OB,J),thickness:J,lineStyleSolid:j,lineStyleDashed:$,fillStyleSolid:q,fillStyleLinearGradient:Z,fillStyleRadialGradient:K,fillStyleIndividual:tt,fillStylePaletted:et,mousePickingShader:Et&&this.OB.uE(Hy["2D"],Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0,splitPosAttribute:!0}),$&&Hy.StippleTextureInstanced,Hy.MousePicking())}:{type:"none"}}else this.CV={type:"none"};if(this.wU=at?{shader:this.OB.uE(Hy["2D"],ht&&Hy.Color({dataType:["lookup",ht.lookUpProperty,ht.lut]}),ot&&Hy.Color({dataType:"attribute"}),st&&Hy.Color({dataType:"uniform"}),rt&&Hy.Color({dataType:["gradient",rt]}),nt&&Hy.Color({dataType:["gradient",nt]}),Hy.Area2D({axisWorldTranslation:fr(this.ct),normalSource:void 0,splitPosAttribute:!0,fill:this.zG.T()})),geometry:Fm(this.OB),fillStyleSolid:st,fillStyleLinearGradient:rt,fillStyleRadialGradient:nt,fillStyleIndividual:ot,fillStylePaletted:ht,mousePickingShader:Et&&this.OB.uE(Hy["2D"],Hy.Area2D({axisWorldTranslation:fr(this.ct),normalSource:void 0,splitPosAttribute:!0,fill:this.zG.T()}),Hy.MousePicking())}:void 0,yt){const t=!(!gt&&!xt),e=St>1||t,i=N?"attribute":"uniform",s=!e&&Hy.PointSize("uniform"),r=Hy.VertexLocation({offset:e&&!t?{dataType:i,sizeUnit:"px",symmetric:!0,rotation:{dataType:X?"attribute-deg":"uniform"},useAlignment:!0}:e&&t?{dataType:i,sizeUnit:"scale",rotation:{dataType:X?"attribute-deg":"uniform"},useAlignment:!0}:void 0,axisWorldTranslation:fr(this.ct),normalSource:void 0,splitPosAttribute:!0});this.pU={shader:this.OB.uE(Hy["2D"],s,r,lt&&Hy.Color({dataType:"uniform",overrideOpacity:!0,maskTexture:!!xt}),ct&&Hy.Color({dataType:["gradient",ct],overrideOpacity:!0,maskTexture:!!xt}),ut&&Hy.Color({dataType:["gradient",ut],overrideOpacity:!0,maskTexture:!!xt}),dt&&Hy.Color({dataType:["lookup",dt.getLookUpProperty(),dt.getPalette()],overrideOpacity:!0,maskTexture:!!xt}),ft&&Hy.Color({dataType:"attribute",overrideOpacity:!0,maskTexture:!!xt}),gt&&Hy.Color({dataType:["image",gt],overrideOpacity:!0,maskTexture:!!xt})),geometry:fm(pt,this.OB,"uniform"===i?St:25),fillStyleSolid:lt,fillStyleLinearGradient:ct,fillStyleRadialGradient:ut,fillStylePaletted:dt,fillStyleIndividual:ft,fillStyleImage:gt,mousePickingShader:Et&&this.OB.uE(Hy["2D"],s,r,Hy.MousePicking({useVertexId:!e})),shapeIcon:xt,pointSizeAsScale:t,instancedRendering:e}}else this.pU=void 0}if((void 0===this.gU||bt)&&z&&(mr(et)||mr(ht)||mr(dt))){const t=this.gU?Mt:[O.xd()];let e=this.gU?this.gU.max:ai,i=this.gU?this.gU.min:hi;const s=z;t.forEach((t=>{for(let r=t.min;r<=t.max;r+=1){const t=s[r];i=t<i?t:i,e=t>e?t:e}})),this.gU={min:i,max:e}}this.uG=this.OB.$z(this,this.uG,gt,xt,vt,this.dG),this.TV=$?this.OB.Oz($.getPattern()):void 0,this.yu(this.gu),this.HG=this.EG,this.WG=this.OG,this.VG.u=!1,this.NG.u=!1,this.fU.length=0,this.sc=!1,this.UG.u=!1,this.Nd.u=!1,this.dt.u=!1,this.zG.u=!1}Dr(){this._v();const t=this.bO.strokeFillLinearGradient(!1),e=this.bO.strokeFillRadialGradient(!1),i=this.bO.areaFillLinearGradient(!1),s=this.bO.areaFillRadialGradient(!1),r=this.bO.markerFillLinearGradient(!1),n=this.bO.markerFillRadialGradient(!1);if(this.dD.xR(this.ct),i||s){let t;const e=this.zG.T();t=uo("bottom"===e||"top"===e?{min:{x:this.jt(!1),y:Math.min(this.ct.y.getInnerStart(),this.ct.y.getInnerEnd(),this.Qt(!1),this.Jt(!1))},max:{x:this.Zt(!1),y:Math.max(this.ct.y.getInnerStart(),this.ct.y.getInnerEnd(),this.Qt(!1),this.Jt(!1))}}:{min:{x:Math.min(this.ct.x.getInnerStart(),this.ct.x.getInnerEnd(),this.jt(!1),this.Zt(!1)),y:this.Qt(!1)},max:{x:Math.max(this.ct.x.getInnerStart(),this.ct.x.getInnerEnd(),this.jt(!1),this.Zt(!1)),y:this.Jt(!1)}},{x:this.Cc()/2,y:this.kc()/2},this.ct),this._U=this.OB.Zz(i,this,t),this.CU=this.OB.Qz(s,this,t)}if(t||e||r||n){const i=uo({min:{x:this.jt(!1),y:this.Qt(!1)},max:{x:this.Zt(!1),y:this.Jt(!1)}},{x:this.Cc()/2,y:this.kc()/2},this.ct);this.kU=this.OB.Zz(t,this,i),this.TU=this.OB.Qz(e,this,i),this.FU=this.OB.Zz(r,this,i),this.IU=this.OB.Qz(n,this,i)}return this}Bu(t,e){var i,s,r,n,o,h,a,l,c,u,d,f,g,y,p,m,x,S,v;const A=this.OB.gl,b=null===(i=this.yU)||void 0===i?void 0:i.bufferX,C=null===(s=this.yU)||void 0===s?void 0:s.bufferY,M=null===(r=this.yU)||void 0===r?void 0:r.bufferColors,T=null===(n=this.yU)||void 0===n?void 0:n.bufferLookupValues,E=null===(o=this.yU)||void 0===o?void 0:o.valueCount,w=null===(h=this.xU)||void 0===h?void 0:h.valueCount,B=null===(a=this.Nd.T())||void 0===a?void 0:a.ei,k=null==B?void 0:B.md(),R=Math.max((null===(l=this.yU)||void 0===l?void 0:l.valueCount)||0,(null===(c=this.xU)||void 0===c?void 0:c.valueCount)||0);if(!b||!C||!B)return{};const F=(e,i,s)=>{if(tm(this.OB,e,this.ct.Ni(),b,"aLocation","X",1,!1,A.FLOAT,Float32Array.BYTES_PER_ELEMENT),tm(this.OB,e,this.ct.Ni(),C,"aLocation","Y",1,!1,A.FLOAT,Float32Array.BYTES_PER_ELEMENT),i&&1!==t){if(!M)return!1;tm(this.OB,e,!1,M,"aColor","",4,!0,A.UNSIGNED_BYTE,1)}if(s&&"value"===s.lookUpProperty&&1!==t){if(!T)return!1;tm(this.OB,e,!1,T,"aLookupValue","",1,!1,A.FLOAT,Float32Array.BYTES_PER_ELEMENT)}return!0},I=1===t?null===(u=this.wU)||void 0===u?void 0:u.mousePickingShader:null===(d=this.wU)||void 0===d?void 0:d.shader;if(this.wU&&I&&void 0!==E&&E>0&&k&&2!==t){const i=this.wU;this.OB.QB(I).dR(I,((s,r,n,o)=>!!this.OB.Xz(n,t,this,{uniforms:this.dD,idFirst:e,useInstanceID:1===t?R:void 0,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStylePaletted:i.fillStylePaletted,linearGradientInfo:this._U,radialGradientInfo:this.CU,lookupValueRange:i.fillStylePaletted?pr(i.fillStylePaletted,this,this.gU):void 0,lookupValueBuffer:null})&&!!F(n,i.fillStyleIndividual,i.fillStylePaletted)&&(null==i||i.geometry.QB(n).Pp(E-1),!0)))}const O="none"===this.CV.type?void 0:1===t?this.CV.mousePickingShader:this.CV.shader;if("none"!==this.CV.type&&O&&void 0!==E&&E>0){const i=this.CV;this.OB.QB(O).dR(O,((s,r,n,o)=>{var h,a;if(!this.OB.Xz(n,t,this,{uniforms:this.dD,idFirst:e,useInstanceID:1===t&&"triangulated"===i.type?R:void 0,useVertexID:1===t&&"primitive"===i.type?R:void 0,fillStyleSolid:i.fillStyleSolid,fillStylePaletted:i.fillStylePaletted,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,fillStyleIndividual:i.fillStyleIndividual,linearGradientInfo:this.kU,radialGradientInfo:this.TU,lookupValueRange:i.fillStylePaletted?pr(i.fillStylePaletted,this,this.gU):void 0,lookupValueBuffer:"primitive"===i.type?T:null,colorBuffer:"primitive"===i.type?M:null,coordsX:"primitive"===i.type?b:void 0,coordsY:"primitive"===i.type?C:void 0,coordsHighPrecision:this.ct.Ni()}))return!1;if(i.lineStyleDashed){if(!this.TV)return!1;this.OB.AR(s("uStippleCount"),[this.St.Mi().x/this.TV.Gz,this.St.Mi().y/this.TV.Gz]).pR(o("uStippleTextureWidthLimiter"),this.TV.Nz/this.TV.Gz).pR(s("uStippleScale"),i.lineStyleDashed.getPatternScale()).gR(s("uStippleTexture"),this.TV.Vz,1)}if("primitive"===i.type){if(i.lineStyleDashed){if(!(null===(h=this.yU)||void 0===h?void 0:h.bufferLengthSoFar))return!1;this.OB.MR(r("aLengthSoFar"),this.yU.bufferLengthSoFar)}Kp.bV(this.AO,E)}else{if(!F(n,i.fillStyleIndividual,i.fillStylePaletted))return!1;if(i.lineStyleDashed){if(!(null===(a=this.yU)||void 0===a?void 0:a.bufferLengthSoFar))return!1;tm(this.OB,n,!1,this.yU.bufferLengthSoFar,"aLengthSoFar","",2,!1,A.FLOAT,Float32Array.BYTES_PER_ELEMENT)}Zp.Bu(this.AO,i.geometry,n,this.wV&&1!==t,1===t,i.thickness,E-1)}return!0}))}const L=null===(f=this.xU)||void 0===f?void 0:f.bufferX,D=null===(g=this.xU)||void 0===g?void 0:g.bufferY,P=null===(y=this.xU)||void 0===y?void 0:y.bufferColors,V=null===(p=this.xU)||void 0===p?void 0:p.bufferLookupValues,_=null===(m=this.xU)||void 0===m?void 0:m.bufferSizes,z=null===(x=this.xU)||void 0===x?void 0:x.bufferRotations,U=1===t?null===(S=this.pU)||void 0===S?void 0:S.mousePickingShader:null===(v=this.pU)||void 0===v?void 0:v.shader,N=this.pU;let X=1;if(k&&(I||O)&&void 0!==this.bU&&!Number.isNaN(this.bU)){const t="x"===Bs(k)?this.ct.x:this.ct.y,e=this.bU,i=t.getInnerInterval()/e,s=this.NG.T(),r=t.Si()/s/1,n=2*r;X=i<=r?1:Math.max(1-(i-r)/(n-r),0)}if(U&&N&&L&&D&&X>0&&void 0!==w&&w>0){const i=N,s=i.instancedRendering?1:0;this.OB.QB(U).dR(U,((r,n,o,h)=>{if(!this.OB.Xz(o,t,this,{uniforms:this.dD,idFirst:e,useInstanceID:i.instancedRendering&&1===t?R:void 0,useVertexID:i.instancedRendering||1!==t?void 0:R,fillStyleSolid:i.fillStyleSolid,fillStyleLinearGradient:i.fillStyleLinearGradient,fillStyleRadialGradient:i.fillStyleRadialGradient,linearGradientInfo:this.FU,radialGradientInfo:this.IU,fillStylePaletted:i.fillStylePaletted,fillStyleIndividual:i.fillStyleIndividual,lookupValueRange:i.fillStylePaletted?pr(i.fillStylePaletted,this,this.gU):void 0,lookupValueBuffer:V,lookupValueAttribDivisor:s,colorBuffer:P,colorAttribDivisor:s,fillStyleImage:i.fillStyleImage,texturedFillGLInfo:this.uG,texCoordAttribDivisor:0,maskTexture:i.shapeIcon&&this.uG,maskTextureCoordsAttribDivisor:0}))return!1;if(this.ct.Ni()?this.OB.fR(L,s,{location:n("aPos_highpartX"),size:1},{location:n("aPos_lowpartX"),size:1}).fR(D,s,{location:n("aPos_highpartY"),size:1},{location:n("aPos_lowpartY"),size:1}):this.OB.qR(n("aPosX"),L,s).qR(n("aPosY"),D,s),1!==t&&this.OB.pR(r("uOpacity"),X),i.instancedRendering)if(z)this.OB.qR(n("aRotDeg"),z,s).pR(r("uBaseRotDeg"),i.geometry.VN);else{const t=Xi(this.GG.T()+i.geometry.VN),e=Math.sin(t),s=Math.cos(t);this.OB.AR(r("uRot"),[e,s])}return this.OB.AR(h("uOffsetAlignment"),[-this.$G.x/2,-this.$G.y/2]),i.geometry.Pp(o,_,w,i.pointSizeAsScale&&this.uG?{scale:this.NG.T(),width:i.shapeIcon?i.shapeIcon.Mi().x:this.uG.texture.DE,height:i.shapeIcon?i.shapeIcon.Mi().y:this.uG.texture.EE}:this.NG.T(),i.instancedRendering),!0}))}return{idCount:R}}Ft(){return this.gU}Eu(t,e,i,s,r){var n;const o=null===(n=this.Nd.T())||void 0===n?void 0:n.ei;if(null==o?void 0:o.md())return{};const h=t-e;return{info:{dataPoint:null==o?void 0:o.Md(h)}}}dispose(){var t,e,i,s,r,n,o,h,a,l,c,u,d;return super.dispose(),this.OB.wR(null===(t=this.yU)||void 0===t?void 0:t.bufferX),this.OB.wR(null===(e=this.yU)||void 0===e?void 0:e.bufferY),this.OB.wR(null===(i=this.yU)||void 0===i?void 0:i.bufferColors),this.OB.wR(null===(s=this.yU)||void 0===s?void 0:s.bufferLookupValues),this.OB.wR(null===(r=this.yU)||void 0===r?void 0:r.bufferRotations),this.OB.wR(null===(n=this.yU)||void 0===n?void 0:n.bufferSizes),this.OB.wR(null===(o=this.xU)||void 0===o?void 0:o.bufferX),this.OB.wR(null===(h=this.xU)||void 0===h?void 0:h.bufferY),this.OB.wR(null===(a=this.xU)||void 0===a?void 0:a.bufferColors),this.OB.wR(null===(l=this.xU)||void 0===l?void 0:l.bufferLookupValues),this.OB.wR(null===(c=this.xU)||void 0===c?void 0:c.bufferRotations),this.OB.wR(null===(u=this.xU)||void 0===u?void 0:u.bufferSizes),this.CV={type:"none"},this.wU=void 0,this.pU=void 0,this.CN.hN(),null===(d=this.Nd.T())||void 0===d||d.si(),this.yU=void 0,this.xU=void 0,this.kU=void 0,this.TU=void 0,this._U=void 0,this.CU=void 0,this.FU=void 0,this.IU=void 0,this.OB.Yz(this,this.uG),this}Du(){return this.dispose(),this}PU(t){if(!this.vU){const{xValues:e,yValues:i}=t.readBack();this.vU={min:{x:hi,y:hi},max:{x:ai,y:ai},LU:Date.now()};const s=e.length;for(let t=0;t<s;t+=1){const s=e[t],r=i[t];this.vU.min.x=s<this.vU.min.x?s:this.vU.min.x,this.vU.min.y=r<this.vU.min.y?r:this.vU.min.y,this.vU.max.x=s>this.vU.max.x?s:this.vU.max.x,this.vU.max.y=r>this.vU.max.y?r:this.vU.max.y}return this.AU.length=0,this.vU}const e=t.hd,i=t.rd;if(this.AU.length>0&&e&&i){for(const t of this.AU){for(let s=t.min;s<=t.max;s+=1){const t=e[s],r=i[s];this.vU.min.x=t<this.vU.min.x?t:this.vU.min.x,this.vU.min.y=r<this.vU.min.y?r:this.vU.min.y,this.vU.max.x=t>this.vU.max.x?t:this.vU.max.x,this.vU.max.y=r>this.vU.max.y?r:this.vU.max.y}this.AU.length=0}return this.vU}return this.vU}Zt(t=!0){var e,i,s,r,n;const o=null===(e=this.Nd.T())||void 0===e?void 0:e.ei;if(!o)return 0;const h=o.md();return"ProgressiveX"===h?(null===(i=o.ed())||void 0===i?void 0:i.x)||0:"RegressiveX"===h?(null===(s=o.bd())||void 0===s?void 0:s.x)||0:"ProgressiveY"===h&&t?(null===(r=this.mU)||void 0===r?void 0:r.max)||0:"RegressiveY"===h&&t?(null===(n=this.mU)||void 0===n?void 0:n.max)||0:this.PU(o).max.x}jt(t=!0){var e,i,s,r,n;const o=null===(e=this.Nd.T())||void 0===e?void 0:e.ei;if(!o)return 0;const h=o.md();return"ProgressiveX"===h?(null===(i=o.bd())||void 0===i?void 0:i.x)||0:"RegressiveX"===h?(null===(s=o.ed())||void 0===s?void 0:s.x)||0:"ProgressiveY"===h&&t?(null===(r=this.mU)||void 0===r?void 0:r.min)||0:"RegressiveY"===h&&t?(null===(n=this.mU)||void 0===n?void 0:n.min)||0:this.PU(o).min.x}Jt(t=!0){var e,i,s,r,n;const o=null===(e=this.Nd.T())||void 0===e?void 0:e.ei;if(!o)return 0;const h=o.md();return"ProgressiveX"===h&&t?ee(null===(i=this.mU)||void 0===i?void 0:i.max,0):"RegressiveX"===h&&t?ee(null===(s=this.mU)||void 0===s?void 0:s.max,0):"ProgressiveY"===h?ee(null===(r=o.ed())||void 0===r?void 0:r.y,0):"RegressiveY"===h?ee(null===(n=o.bd())||void 0===n?void 0:n.y,0):this.PU(o).max.y}Qt(t=!0){var e,i,s,r,n;const o=null===(e=this.Nd.T())||void 0===e?void 0:e.ei;if(!o)return 0;const h=o.md();return"ProgressiveX"===h&&t?ee(null===(i=this.mU)||void 0===i?void 0:i.min,0):"RegressiveX"===h&&t?ee(null===(s=this.mU)||void 0===s?void 0:s.min,0):"ProgressiveY"===h?ee(null===(r=o.bd())||void 0===r?void 0:r.y,0):"RegressiveY"===h?ee(null===(n=o.ed())||void 0===n?void 0:n.y,0):this.PU(o).min.y}Cc(){var t,e;let i=this.NG.T();this.uG&&(i=Math.max(this.uG.texture.DE,this.uG.texture.EE)*this.NG.T());const s=Math.max(je(this.gu),(null===(t=this.Nd.T())||void 0===t?void 0:t.ei.Qu)?25:i),r=null===(e=this.Nd.T())||void 0===e?void 0:e.ei.md();return!r||"ProgressiveX"!==r&&"RegressiveX"!==r?s:0}kc(){var t,e;let i=this.NG.T();this.uG&&(i=Math.max(this.uG.texture.DE,this.uG.texture.EE)*this.NG.T());const s=Math.max(je(this.gu),(null===(t=this.Nd.T())||void 0===t?void 0:t.ei.Qu)?25:i),r=null===(e=this.Nd.T())||void 0===e?void 0:e.ei.md();return!r||"ProgressiveY"!==r&&"RegressiveY"!==r?s:0}}const Dm=(t,e,i,s,r,n,o,h,a,l,c,u,d)=>{const f=Bs(l),g=ks(l),y=e[0],p=e[1],m=y.length,x=y[0],S=y[m-1],v=p[0],A=p[m-1],b=u?2:1;if(h&&a&&h.firstX&&h.lastX&&h.firstY&&h.lastY&&("ProgressiveX"===l&&x>=h.firstX||"RegressiveX"===l&&x<=h.firstX||"ProgressiveY"===l&&v>=h.firstY||"RegressiveY"===l&&v<=h.firstY)){const e="x"===f?y:p,a="x"===f?h.lastX:h.lastY,l=_o(a,0,m-1,g,(t=>e[t]));if(e[l]===a){const e=h.bufferSize-h.valueCount,a=l+1,c=m-a;if(0===c)return h;if(e>=c){const e=No(y,a,void 0),l=No(p,a,void 0);if(t.YR(h.bufferX,h.valueCount*b,d(e)),t.YR(h.bufferY,h.valueCount*b,d(l)),i&&h.bufferColors){const e=i.slice(a);t.YR(h.bufferColors,h.valueCount,e,Uint32Array)}if(s&&h.bufferLookupValues){const e=s.slice(a);t.YR(h.bufferLookupValues,h.valueCount,e,Float32Array)}if(r&&h.bufferSizes){const e=r.slice(a);t.YR(h.bufferSizes,h.valueCount,e,Float32Array)}if(n&&h.bufferRotations){const e=n.slice(a);t.YR(h.bufferRotations,h.valueCount,e,Float32Array)}if(o&&h.bufferLengthSoFar){const[i,s,r]=Pm(e,l,h.lastX||0,h.lastY||0,h.lengthSoFarX,h.lengthSoFarY);t.YR(h.bufferLengthSoFar,2*h.valueCount,i,Float32Array),h.lengthSoFarX=s,h.lengthSoFarY=r}return h.valueCount+=c,h.lastX=S,h.lastY=A,h}}}const C=m+c,M=t.$R(C*b,d(y),null==h?void 0:h.bufferX),T=t.$R(C*b,d(p),null==h?void 0:h.bufferY),E=i?t.$R(C,i,null==h?void 0:h.bufferColors,Uint32Array):void 0,w=s?t.$R(C,s,null==h?void 0:h.bufferLookupValues,Float32Array):void 0,B=r?t.$R(C,r,null==h?void 0:h.bufferSizes,Float32Array):void 0,k=n?t.$R(C,n,null==h?void 0:h.bufferRotations,Float32Array):void 0;let R,F=0,I=0;if(o){const e=Pm(y,p,y[0],p[0],0,0);R=t.$R(2*C,e[0],null==h?void 0:h.bufferLengthSoFar,Float32Array),F=e[1],I=e[2]}return{bufferX:M,bufferY:T,bufferColors:E,bufferLookupValues:w,bufferSizes:B,bufferRotations:k,bufferSize:C,bufferLengthSoFar:R,valueCount:m,firstX:x,lastX:S,firstY:v,lastY:A,lengthSoFarX:F,lengthSoFarY:I}},Pm=(t,e,i,s,r,n)=>{const o=t.length,h=new Float32Array(2*o);if(0===o)return[h,0,0];let a=0,l=i,c=s,u=r,d=n;for(let i=0;i<o;i+=1){const s=t[i],r=e[i];u+=Math.abs(l-s),d+=Math.abs(c-r),h[a]=u,h[a+1]=d,a+=2,l=s,c=r}return[h,u,d]},Vm={translation:(t,e)=>[1,0,0,0,1,0,t,e,1],rotation(t){const e=Math.cos(t),i=Math.sin(t);return[e,-i,0,i,e,0,0,0,1]},scaling:(t,e)=>[t,0,0,0,e,0,0,0,1],translate:(t,e,i)=>Vm.multiply(t,Vm.translation(e,i)),rotate:(t,e)=>Vm.multiply(t,Vm.rotation(e)),scale:(t,e,i)=>Vm.multiply(t,Vm.scaling(e,i)),multiply(t,e){const i=t[0],s=t[1],r=t[2],n=t[3],o=t[4],h=t[5],a=t[6],l=t[7],c=t[8],u=e[0],d=e[1],f=e[2],g=e[3],y=e[4],p=e[5],m=e[6],x=e[7],S=e[8];return[u*i+d*n+f*a,u*s+d*o+f*l,u*r+d*h+f*c,g*i+y*n+p*a,g*s+y*o+p*l,g*r+y*h+p*c,m*i+x*n+S*a,m*s+x*o+S*l,m*r+x*h+S*c]},projection:(t,e,i)=>[2/t,0,0,0,-2*i/e,0,-1,1*i,1]};class _m extends So{constructor(t,e,i,s,r){super(t,e,i,s,r),this.BU=[],this.dD=new Lp,this.DU=[l(0,0),l(0,0),l(0,0),l(0,0)],this.EU=g(l(0,0),l(0,0)),this.RU=g(l(0,0),l(0,0)),this.zU=l(0,0),this.OU=l(0,0),this.VU=l(0,0),this.NU=0,this.GU=0,this.bO=yr({fillStyleSolid:()=>X(this.We)&&this.We,fillStyleRadialGradient:()=>Z(this.We)&&this.We,fillStyleLinearGradient:()=>et(this.We)&&this.We}),this.AO=t,this.gO=e,this.OB=t.pO(),this.gO=e,this.EV=t.Ca.Ia}Dr(){const t=this.hl(),e=this.el(),i=this.dt.T();if(t){const t=this.il(),s=this.bO.fillStyleSolid(t),r=this.bO.fillStyleRadialGradient(t),n=this.bO.fillStyleLinearGradient(t),o=s||r||n,h=this.OB,a=this.OB.QE(),c=a!==this.GU;if(this.GU=a,this.dD.xR(this.ct),this.ml.u||c){this.UU&&this.UU.JB(this),this.font.C(qn(this.ml.T(),a));const t=this.font.T();this.UU=this.OB.mr(t.properties.family),this.UU.QB(this)}const u=this.font.u||this.cl.u;if(u&&this.UU){const t=this.font.T();[this.$U,this.RU]=this.UU.qB(this.cl.T(),t,this.AO.Ct.isDark),this.BU.forEach((t=>{t.texCoordBuff&&h.wR(t.texCoordBuff),t.vertexBuff&&h.wR(t.vertexBuff)})),this.BU=this.$U.map((t=>({texCoordBuff:h.cR(t.texCoords,!1),texture:t.texture,info:t}))),this.ml.u=!1,this.font.u=!1,this.cl.u=!1}const d=this.ct.es()||e,f=this.fl.u||this.pl.u||this.Al.u||this.vl.u||this.Dn.u||this.ai.u||u||d,g=this.Dn.T(),y=Oi(l(this.pl.T()+1,this.Al.T()+1),.5);if(f&&this.$U&&(this.zU=l(-(g.left*a+this.RU.max.x-this.RU.min.x+g.right*a)*y.x,-(g.bottom*a+this.RU.max.y-this.RU.min.y+g.top*a)*y.y)),(f||d||this.yl.u||this.il())&&this.We!==V){if(this.$U){const t=Li(this.fl.T(),this.vl.T()),e=ot(t,this.ct,this.St.ct),i=Oi(e,a);this.VU=i;const s=Xi(this.yl.T());this.NU=s,u&&this.BU.forEach((t=>{const e=t.info;e&&(t.vertexBuffLen=e.vertices.length/2,t.vertexBuff=h.cR(e.vertices,!0,t.vertexBuff))}));const r=this.ai.T(),n=[Li(Bi(l((this.RU.min.x+(-r.left-g.left)*a+this.zU.x)/a,(this.RU.max.y+(r.top+g.top)*a+this.zU.y)/a),this.xl,s),e),Li(Bi(l((this.RU.max.x+(r.right+g.right)*a+this.zU.x)/a,(this.RU.max.y+(r.top+g.top)*a+this.zU.y)/a),this.xl,s),e),Li(Bi(l((this.RU.max.x+(r.right+g.right)*a+this.zU.x)/a,(this.RU.min.y+(-r.bottom-g.bottom)*a+this.zU.y)/a),this.xl,s),e),Li(Bi(l((this.RU.min.x+(-r.left-g.left)*a+this.zU.x)/a,(this.RU.min.y+(-r.bottom-g.bottom)*a+this.zU.y)/a),this.xl,s),e)];this.DU=[ot(n[0],this.St.ct,this.ct),ot(n[1],this.St.ct,this.ct),ot(n[2],this.St.ct,this.ct),ot(n[3],this.St.ct,this.ct)];const o=Ci(n);this.OU=l(-(o.max.x-o.min.x)*a*y.x-o.min.x*a+this.VU.x,-(o.max.y-o.min.y)*a*y.y-o.min.y*a+this.VU.y),this.Ch=Di(o.max,o.min),this.OU={x:this.OU.x/a,y:this.OU.y/a};const c=Ci(this.DU),d=this.ct.Li(c.min,this.OU),f=this.ct.Li(c.max,this.OU);this.EU=Ci([d,f]),this.OU={x:this.OU.x*a,y:this.OU.y*a}}r?this.FO=Cp(this.EU,this.ct,r.getPosition(),r.getExtent(),r.getShape(),this.OB.QE()):n?this.IO=Mp(this.EU,this.ct,n.getAngle(!0),this.OB.QE()):(this.FO=void 0,this.IO=void 0)}this.il()&&(this.gD=o?this.OB.uE(Hy["2D"],Hy.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.EV}),Hy.Color({dataType:r?["gradient",r]:n?["gradient",n]:"uniform",maskTextureText:!0})):void 0),this.YU=!this.Bl||this.We===V||s&&0===s.getColor().getA()?void 0:this.YU||this.OB.uE(Hy["2D"],Hy.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.EV}),Hy.Color({dataType:"uniform",maskTextureText:!0})),this.HU=i&&o?this.HU||this.OB.uE(Hy["2D"],Hy.MousePicking(),Hy.VertexLocation({axisWorldTranslation:"matrix",normalSource:void 0,snapToNearestPixel:this.EV})):void 0,this.fl.u=!1,this.pl.u=!1,this.Al.u=!1,this.vl.u=!1,this.yl.u=!1,this.rl(this.We)}return this.Sl=t,this}Bu(t,e){if(this.ul){const t=Math.min(this.DU[0].x,this.DU[1].x),e=Math.max(this.DU[0].x,this.DU[1].x),i=Math.min(this.DU[0].y,this.DU[2].y),s=Math.max(this.DU[0].y,this.DU[2].y);this.Hs.pg();const r=Math.min(this.ct.x.$,this.ct.x.Y),n=Math.max(this.ct.x.$,this.ct.x.Y),o=Math.min(this.ct.y.$,this.ct.y.Y),h=Math.max(this.ct.y.$,this.ct.y.Y);if(!(t<=n&&r<=e&&i<=h&&o<=s))return{idCount:1}}if(this.hl()){const i=0===t?this.YU:void 0,s=this.Bl,r=1===t?this.HU:this.gD;if(!r||0===this.BU.length)return{};const n=this.bO.fillStyleSolid(!1),o=this.bO.fillStyleRadialGradient(!1),h=this.bO.fillStyleLinearGradient(!1),a=this.St.$D(),l=a.x,c=a.y;let u=Vm.projection(l,c,-1);const d=Vm.translation(this.zU.x,this.zU.y),f=Vm.translation(this.OU.x,this.OU.y);u=Vm.translate(u,this.VU.x,this.VU.y),u=Vm.multiply(u,f),u=Vm.rotate(u,this.NU),u=Vm.multiply(u,d),1===t&&(u=Vm.scale(u,this.RU.max.x,this.RU.max.y)),i&&s&&(u=Vm.translate(u,this.dl.x,this.dl.y),this.OB.QB(i).dR(i,((t,e,i,r)=>(this.OB.OR(t("uMatrix"),u).pR(t("uIsHighlighted"),0).xF(t("uHighlightColorOffset"),k).pR(t("uRenderEffectMask"),0).xF(t("uColor"),s),this.EV&&this.OB.AR(r("uViewportSizePx"),[a.x*this.OB.QE(),a.y*this.OB.QE()]),this.BU.forEach((i=>{this.OB.MR(e("aPos"),i.vertexBuff).MR(e("aMaskTextureCoord"),i.texCoordBuff).gR(t("uMaskTexture"),i.texture,0).Pp(this.OB.gl.TRIANGLES,i.vertexBuffLen)})),!0))),u=Vm.translate(u,-this.dl.x,-this.dl.y)),this.OB.QB(r).dR(r,((i,s,r,l)=>{if(this.OB.OR(i("uMatrix"),u).pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0),this.EV&&this.OB.AR(l("uViewportSizePx"),[a.x*this.OB.QE(),a.y*this.OB.QE()]),1===t)this.OB.NR(i("uFirstId"),e).Ez(r,1);else if(n)this.OB.xF(i("uColor"),n.getColor());else if(o&&this.FO){this.OB.AR(i("uCenter"),this.FO.center).AR(i("uDistance"),this.FO.distance).bR(i("uBounds"),this.FO.bounds).pR(i("uAspect"),this.FO.aspectRatio);const t=o.getColorStops();for(let e=0;e<t.length;e+=1)this.OB.xF(i(`color_${e}`),t[e].color).pR(i(`stop_${e}`),t[e].offset)}else if(h&&this.IO){this.OB.AR(i("uStartPoint"),this.IO.startPoint).AR(i("uEndPoint"),this.IO.endPoint).bR(i("uBounds"),this.IO.bounds);const t=h.getColorStops();for(let e=0;e<t.length;e+=1)this.OB.xF(i(`color_${e}`),t[e].color).pR(i(`stop_${e}`),t[e].offset)}return 1===t&&this.OB.MR(s("aPos"),this.OB.vz).Pp(this.OB.gl.TRIANGLES,6),1!==t&&this.BU.forEach((t=>{this.OB.MR(s("aPos"),t.vertexBuff).MR(s("aMaskTextureCoord"),t.texCoordBuff).gR(i("uMaskTexture"),t.texture,0).Pp(this.OB.gl.TRIANGLES,t.vertexBuffLen)})),!0}))}return{idCount:1}}Eu(t,e,i,s,r){return{}}Tu(){return this.hl()?Ci(this.DU):li}Pu(){return this.hl()&&this.Ch?this.Ch:l(0,0)}Mi(){if(this.hl()&&this.EU){const t=this.EU;return l(t.max.x-t.min.x,t.max.y-t.min.y)}return l(0,0)}Du(){return this.BU.forEach((t=>{t.texCoordBuff&&this.OB.wR(t.texCoordBuff),t.vertexBuff&&this.OB.wR(t.vertexBuff)})),this.BU=[],this.UU&&this.UU.JB(this),this.gD=void 0,this.YU=void 0,this.HU=void 0,this}Zt(){return this.EU.max.x}jt(){return this.EU.min.x}Jt(){return this.EU.max.y}Qt(){return this.EU.min.y}Cc(){return 0}kc(){return 0}}class zm{constructor(t,e,i){this.Vt=new Set,this.XU=t=>(this.Vt.add(t),t),this.WU=t=>(this.Vt.delete(t),t.Du(),this),this.St=t,this.zn=e,this.jU=i}pB(t){this.Vt.delete(t)&&this.Vt.add(t)}U(){for(const t of this.Vt)t.Du().dispose();this.St.Sa(this.zn)}Bs(){return this.St.Bs(),this}xa(){return this.zn}}class Um extends zm{constructor(){super(...arguments),this.ZU=p(void 0),this.Qa=!1}Zm(t){return this.ZU.C(t),this}pg(){return this.ZU.T()}}class Nm extends mo{constructor(t,e,i,s,r){super(t,e,i,s,r),this.CV={fill:void 0,border:void 0},this.dD=new Lp,this.Ql=li,this.QU=!1,this.JU=!1,this.KU=!1,this.qU=!1,this.Jd=[],this.t$=0,this.bO=yr({rectangleStyleSolid:()=>X(this.We)&&this.We,rectangleStyleImage:()=>Ft(this.We)&&this.We,rectangleStyleRadialGradient:()=>Z(this.We)&&this.We,rectangleStyleLinearGradient:()=>et(this.We)&&this.We,rectangleStylePaletted:()=>j(this.We)&&this.We,rectangleStyleIndividual:()=>G(this.We)&&this.We,lineStyleSolid:()=>ir(this.je)&&this.je,lineStyleDashed:()=>or(this.je)&&this.je,lineStyleFilled:()=>{const t=this.je&&this.je.getFillStyle();return X(t)&&t}}),this.AO=t,this.gO=e,this.OB=t.pO(),this.wV=this.OB.cz}Oo(){const t={Fs:e=>this.RV(t,e),Dt:e=>this.zV(t,e),Fd:(e,i,s,r)=>this.i$(t,e,i,s,r),Td:e=>this.s$(t,e),Kx:e=>this.tG(t,e),xF:e=>this.VV(t,e),e$:0,h$:0,r$:0,n$:0,M:void 0,iG:void 0,xt:0,GV:!0,sG:this.Jd.length,o$:void 0};return this.Jd.push(t),t}ii(){return this.Jd.length=0,this.QU=!0,this.St.Pt(this),this}ev(){return this.Jd}qd(t){const e=this.Jd.indexOf(t);e>=0&&(this.Jd.splice(e,1),this.QU=!0,this.St.Pt(this,t))}RV(t,e){return t.GV=e,this.QU=!0,t.GV||this.St.Pt(this,t),t}zV(t,e){return t.xt=e,this.qU=!0,t}i$(t,e,i,s,r){return t.e$=e,t.h$=i,t.r$=s,t.n$=r,this.QU=!0,t}s$(t,e){return t.o$=!0===(null==e?void 0:e.c_x1_y1)||!0===(null==e?void 0:e.c_x1_y2)||(null==e?void 0:e.c_x2_y1)||!0===(null==e?void 0:e.c_x2_y2)?e:void 0,this.QU=!0,t}tG(t,e){return t.M=e,this.JU=!0,t}VV(t,e){return t.iG=null==e?void 0:e.toUint32(),this.KU=!0,t}Dr(){const t=this.dt.T(),e=this.dt.u,i=this.il(),s=this.qU;let r=this.QU;const n=this.JU,o=this.KU,h=this.je,a=this.nl(),l=this.Jd.filter((t=>t.GV)),c=void 0!==this.Jd.find((t=>t.o$)),u=this.ct.es();c&&u&&(r=!0);const d=this.bO.rectangleStyleSolid(i),f=this.bO.rectangleStylePaletted(i),g=this.bO.rectangleStyleIndividual(i),y=this.bO.rectangleStyleRadialGradient(i),p=this.bO.rectangleStyleLinearGradient(i),m=this.bO.rectangleStyleImage(i),x=d||f||p||y||m||g,S=this.bO.lineStyleSolid(a),v=this.bO.lineStyleDashed(i),A=S||v,b=this.bO.lineStyleFilled(a),C=b,M=A&&Math.max(A.getThickness(),0);if(this.dD.xR(this.ct),r&&(this.Ql=Ti(...l.map((t=>Ci([{x:t.e$,y:t.h$},{x:t.r$,y:t.n$}]))))),r||a&&v){const t=[],e=[],i=[];let s=0,r=0;const n=[];let o=0;if(c){const h=this.ct instanceof hs?this.ct.rs():{x:1e-4,y:1e-4},a=5;this.t$=4+4*a;const c=Math.sign(this.ct.x.Y-this.ct.x.$),u=Math.sign(this.ct.y.Y-this.ct.y.$);l.forEach((l=>{var d,f,g,y,p;const m=Math.sign(l.r$-l.e$),x=Math.sign(l.n$-l.h$),S={x:m===c?l.e$:l.r$,y:x===u?l.h$:l.n$},v={x:m===c?l.r$:l.e$,y:x===u?l.n$:l.h$},A=s,b=r,C=Math.abs((v.x-S.x)/h.x),M=Math.abs((v.y-S.y)/h.y),T=l.o$&&!0!==l.o$.skipTooSmallCheck&&Math.min(C,M)<2*l.o$.extent;t[A+0]=(l.e$+l.r$)/2,e[A+0]=(l.h$+l.n$)/2,i[b+0]=0,i[b+1]=0,t[A+1]=Number.NaN,e[A+1]=Number.NaN,i[b+2]=0,i[b+3]=0,s+=2,r+=4;for(let h=0;h<=3;h+=1){const c=0===h||3===h?v.x:S.x,u=0===h||1===h?v.y:S.y,m=c===l.e$&&u===l.h$?null===(d=l.o$)||void 0===d?void 0:d.c_x1_y1:c===l.r$&&u===l.h$?null===(f=l.o$)||void 0===f?void 0:f.c_x2_y1:c===l.e$&&u===l.n$?null===(g=l.o$)||void 0===g?void 0:g.c_x1_y2:null===(y=l.o$)||void 0===y?void 0:y.c_x2_y2,x=null===(p=l.o$)||void 0===p?void 0:p.extent;if(m&&x&&!T){const l=.5*h*Math.PI;for(let d=0;d<a;d+=1){const f=l+d/(a-1)*.5*Math.PI;let g,y;0===h?(g=Math.cos(f)-1,y=-1+Math.sin(f)):1===h?(g=1+Math.cos(f),y=Math.sin(f)-1):2===h?(g=1+Math.cos(f),y=1+Math.sin(f)):(g=-1+Math.cos(f),y=1+Math.sin(f)),t[s+0]=c,e[s+0]=u,i[r+0]=g*x,i[r+1]=y*x,s>1&&(n[o+0]=A,n[o+1]=s-1,n[o+2]=s,o+=3),s+=1,r+=2}}else for(let h=0;h<a;h+=1)t[s+0]=c,e[s+0]=u,i[r+0]=0,i[r+1]=0,n[o+0]=A,n[o+1]=s-1,n[o+2]=s,o+=3,s+=1,r+=2}n[o+0]=A,n[o+1]=A+2,n[o+2]=s-1,o+=3,t[s+0]=t[A+2],e[s+0]=e[A+2],i[r+0]=i[b+4],i[r+1]=i[b+5],t[s+1]=Number.NaN,e[s+1]=Number.NaN,i[r+2]=0,i[r+3]=0,s+=2,r+=4}))}else this.t$=6,l.forEach((h=>{t[s+0]=h.e$,e[s+0]=h.h$,i[r+0]=0,i[r+1]=0,t[s+1]=h.r$,e[s+1]=h.h$,i[r+2]=0,i[r+3]=0,t[s+2]=h.r$,e[s+2]=h.n$,i[r+4]=0,i[r+5]=0,t[s+3]=h.e$,e[s+3]=h.n$,i[r+6]=0,i[r+7]=0,t[s+4]=h.e$,e[s+4]=h.h$,i[r+8]=0,i[r+9]=0,t[s+5]=Number.NaN,e[s+5]=Number.NaN,i[r+10]=0,i[r+11]=0,n[o+0]=s+0,n[o+1]=s+1,n[o+2]=s+3,n[o+3]=s+1,n[o+4]=s+3,n[o+5]=s+2,s+=6,r+=12,o+=6}));if(this.a$=this.OB.cR(ve(t,this.ct.Ni()),void 0,this.a$),this.l$=this.OB.cR(ve(e,this.ct.Ni()),void 0,this.l$),this.c$=this.OB.cR(i,void 0,this.c$),this.u$=this.OB.WR(new Uint32Array(n),this.u$),this.d$=n.length,this.f$=s-1,v){const i=new Float32Array(2*t.length);let s=0,r=0,n=0,o=t[0],h=e[0];for(let a=0;a<t.length;a+=1){const l=t[a],c=e[a];Number.isNaN(l)||(r+=Math.abs(l-o),n+=Math.abs(c-h),o=l,h=c),i[s]=r,i[s+1]=n,s+=2}this.kV=this.OB.cR(i,!1,this.kV)}this.A$=[t,e]}if((i||a||e)&&(this.CV.fill=x?{shader:this.OB.uE(Hy["2D"],d&&Hy.Color({dataType:"uniform"}),p&&Hy.Color({dataType:["gradient",p]}),y&&Hy.Color({dataType:["gradient",y]}),f&&Hy.Color({dataType:["lookup",f.getLookUpProperty(),f.lut]}),g&&Hy.Color({dataType:"attribute"}),m&&Hy.Color({dataType:["image",m]}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0,offset:{sizeUnit:"px",dataType:"attribute",useGeometry:!1},splitPosAttribute:!0}),Hy.AttributeHighlight),mousePicking:t?{shader:this.OB.uE(Hy["2D"],Hy.MousePicking({useAttribute:!0}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0,offset:{sizeUnit:"px",dataType:"attribute",useGeometry:!1},splitPosAttribute:!0}),Hy.AttributeHighlight)}:void 0,fillStyleSolid:d,fillStyleLinearGradient:p,fillStyleRadialGradient:y,fillStylePaletted:f,fillStyleImage:m,fillStyleIndividual:g}:void 0,this.CV.border=A&&C&&"number"==typeof M&&0!==M?{shader:this.OB.uE(Hy["2D"],Hy.Color({dataType:"uniform"}),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0,offset:{sizeUnit:"px",dataType:"attribute",useGeometry:!1},splitPosAttribute:!0}),this.wV?Hy.AliasedEdge:void 0,v&&Hy.StippleTextureInstanced,Hy.AttributeHighlight),geometry:qp(this.OB,M),mousePicking:t?{shader:this.OB.uE(Hy["2D"],Hy.MousePicking({useAttribute:!0}),Hy.LineInstanced2D({axisWorldTranslation:fr(this.ct),normalSource:void 0,offset:{sizeUnit:"px",dataType:"attribute",useGeometry:!1},splitPosAttribute:!0}),v&&Hy.StippleTextureInstanced,Hy.AttributeHighlight)}:void 0,fillStyleSolid:b,lineStyleDashed:v,thickness:M}:void 0),s||r){const t=new Float32Array(l.length*this.t$);l.forEach(((e,i)=>{for(let s=0;s<this.t$;s+=1)t[i*this.t$+s]=e.xt})),this.g$=this.OB.cR(t,!0,this.g$)}if(t){if(r){const t=new Float32Array(l.length*this.t$);l.forEach(((e,i)=>{for(let s=0;s<this.t$;s+=1)t[i*this.t$+s]=e.sG})),this.p$=this.OB.cR(t,!1,this.p$)}}else this.p$&&(this.OB.wR(this.p$),this.p$=void 0);if(n||r&&f&&"value"===f.getLookUpProperty()){const t=new Float32Array(l.length*this.t$),e={min:hi,max:ai};l.forEach(((i,s)=>{const r=void 0!==i.M?i.M:Dt;for(let e=0;e<this.t$;e+=1)t[s*this.t$+e]=r;void 0!==i.M&&(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))})),this.aG=e,this.v$=this.OB.cR(t,!1,this.v$)}if(o||r&&g){const t=new Uint32Array(l.length*this.t$),e=g?g.getFallbackColor().toUint32():B.toUint32();l.forEach(((i,s)=>{const r=void 0!==i.iG?i.iG:e;for(let e=0;e<this.t$;e+=1)t[s*this.t$+e]=r})),this.y$=this.OB.cR(t,!1,this.y$,Uint32Array)}return y?this.FO=Cp(this.yt||this.Ql,this.ct,y.getPosition(),y.getExtent(),y.getShape(),this.OB.QE()):p?this.IO=Mp(this.yt||this.Ql,this.ct,p.getAngle(!0),this.OB.QE()):(this.FO=void 0,this.IO=void 0),v?this.TV=this.OB.Oz(v.getPattern()):(this.kV&&(this.OB.wR(this.kV),this.kV=void 0),this.TV=void 0),this.uG=this.OB.$z(this,this.uG,m,void 0,r||this.ct.es(),((t,e,i)=>this.dG(t,e,i,l))),this.qU=!1,this.QU=!1,this.JU=!1,this.KU=!1,this.dt.u=!1,this.rl(this.We),this.ll(h),this}Bu(t,e){var i,s;const{fill:r,border:n}=this.CV,o=this.a$,h=this.l$,a=this.c$,l=this.u$,c=this.d$,u=this.f$,d=this.g$,f=this.p$;if(!(d&&o&&h&&a))return{};if(r&&l&&c){const s=1===t?null===(i=r.mousePicking)||void 0===i?void 0:i.shader:r.shader;s&&this.OB.QB(s).dR(s,((i,s,n,u)=>!!this.OB.Xz(n,t,this,{uniforms:this.dD,idFirst:e,fillStyleSolid:r.fillStyleSolid,fillStyleLinearGradient:r.fillStyleLinearGradient,fillStyleRadialGradient:r.fillStyleRadialGradient,fillStylePaletted:r.fillStylePaletted,fillStyleImage:r.fillStyleImage,fillStyleIndividual:r.fillStyleIndividual,linearGradientInfo:this.IO,radialGradientInfo:this.FO,texturedFillGLInfo:this.uG,colorBuffer:this.y$,lookupValueBuffer:this.v$,lookupValueRange:this.aG,highlightBuffer:d,coordsX:o,coordsY:h,coordsHighPrecision:this.ct.Ni(),mousePickingOffsetBuffer:f})&&(this.OB.fR(a,void 0,{location:s("aOffsetPixels"),size:2}).tz(l),this.OB.sz(c,this.OB.gl.TRIANGLES,void 0,this.OB.gl.UNSIGNED_INT),!0)))}if(n&&u){const{geometry:i,thickness:r,lineStyleDashed:l}=n,c=1===t?null===(s=n.mousePicking)||void 0===s?void 0:s.shader:n.shader;c&&this.OB.QB(c).dR(c,((s,c,g,y)=>{if(!this.OB.Xz(g,t,this,{uniforms:this.dD,idFirst:e,fillStyleSolid:n.fillStyleSolid,highlightBuffer:d,highlightAttribDivisor:1,mousePickingOffsetBuffer:f,mousePickingOffsetAttribDivisor:1}))return!1;if(l){if(!this.TV||!this.kV)return!1;Zp.mV(this.OB,g,this.kV,c("aLengthSoFarA"),c("aLengthSoFarB"),2,2,0),this.OB.AR(s("uStippleCount"),[this.St.Mi().x/this.TV.Gz,this.St.Mi().y/this.TV.Gz]).pR(y("uStippleTextureWidthLimiter"),this.TV.Nz/this.TV.Gz).pR(s("uStippleScale"),l.getPatternScale()).gR(s("uStippleTexture"),this.TV.Vz,1)}return tm(this.OB,g,this.ct.Ni(),o,"aLocation","X",1,!1,this.OB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),tm(this.OB,g,this.ct.Ni(),h,"aLocation","Y",1,!1,this.OB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),tm(this.OB,g,!1,a,"aOffsetPixels","",2,!1,this.OB.gl.FLOAT,Float32Array.BYTES_PER_ELEMENT),Zp.Bu(this.AO,i,g,this.wV&&1!==t,1===t,r,u),!0}))}return{idCount:this.Jd.length}}dG(t,e,i,s){if(!this.A$)return new Float32Array;const r=ot({x:this.Ql.min.x,y:this.Ql.min.y},this.ct,this.St.ct),n=ot({x:this.Ql.max.x,y:this.Ql.max.y},this.ct,this.St.ct),o={x:Math.abs(r.x-n.x),y:Math.abs(r.y-n.y)},h=Bp(t,e,o.x,o.y,i),a=h[1],l=h[4],c=h[6],u=h[7],d=this.Ql.max.x-this.Ql.min.x,f=this.Ql.max.y-this.Ql.min.y,g=l-c,y=u-a,p=new Float32Array(2*this.A$[0].length);let m=0;for(let t=0;t<this.A$[0].length;t+=1){const e=this.A$[0][t],i=this.A$[1][t],s=c+g*((e-this.Ql.min.x)/d),r=a+y*((i-this.Ql.min.y)/f);p[m]=s,p[m+1]=r,m+=2}return p}Eu(t,e,i,s,r){return{collectionMember:this.Jd.find((i=>e+i.sG===t))}}Du(){return this.a$=this.OB.wR(this.a$),this.l$=this.OB.wR(this.l$),this.c$=this.OB.wR(this.c$),this.g$&&(this.OB.wR(this.g$),this.g$=void 0),this.p$&&(this.OB.wR(this.p$),this.p$=void 0),this.v$&&(this.OB.wR(this.v$),this.v$=void 0),this.y$&&(this.OB.wR(this.y$),this.y$=void 0),this.kV&&(this.OB.wR(this.kV),this.kV=void 0),this.u$&&(this.OB.wR(this.u$),this.u$=void 0),this.CV={fill:void 0,border:void 0},this.uG=this.OB.Yz(this,this.uG),this}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}Cc(){return je(this.je)}kc(){return je(this.je)}}class Xm extends Um{constructor(t,e,i){super(t,e,i),this.AO=t,this.gl=t.pO(),this.m$=this.Vt}aR(t){const e=t instanceof co&&t;if(!e)return li;const i=e.jt(),s=e.Zt(),r=e.Qt(),n=e.Jt();if(i===hi||s===ai||r===hi||n===ai)return li;const o=e.Cc(),h=e.kc(),a=uo({min:{x:i,y:r},max:{x:s,y:n}},{x:o,y:h},e.ct),l={min:ot(a.min,e.ct,t.St.ct),max:ot(a.max,e.ct,t.St.ct)},c=this.ZU.T();let u;if(c){if(u={min:{x:Math.min(l.min.x,c.x),y:Math.min(l.min.y,c.y)},max:{x:Math.max(l.max.x,c.x+c.width),y:Math.max(l.max.y,c.y+c.height)}},u.max.x<u.min.x||u.max.y<u.min.y)return li}else u=l;return u}uh(t){return this.XU(new em(this.AO,this,t,this.WU,[]))}CA(t){return this.XU(new im(this.AO,this,t,this.WU,[]))}Op(t,e,i){return this.XU(new lm(this.AO,this,t,this.WU,i,e))}Yd(t){return this.XU(new Lm(this.AO,this,t,this.WU))}mn(t,e){return this.St.Fu&&!1!==e?this.XU(this.St.Fu.mn(this.AO,this,t,this.WU)):this.XU(new _m(this.AO,this,t,this.WU,[]))}sy(t){return this.XU(new gm(this.AO,this,t,this.WU,[]))}Ru(t,e=Eo.Simple){if(e===Eo.Simple)return this.XU(new mm(this.AO,this,t,this.WU,[]));throw new Error("GlEngine.addPolygon | No such polygon type!")}yv(t){return this.XU(new ym(this.AO,this,t,this.WU,[]))}_d(t){return this.XU(new Nm(this.AO,this,t,this.WU,[]))}Ke(t){return this.XU(new pm(this.AO,this,t,this.WU,[]))}yM(t){return this.XU(new Qp(this.AO,this,t,this.WU,[]))}Pd(t){return this.XU(new Np(this.AO,this,t,this.WU,[]))}Zb(t,e,i){if("intensity"===i.heatmapDataType)return this.XU(new wm(this.AO,this,t,this.WU,e,i));throw new _t("Unimplemented Heatmap Grid Static type")}Xb(t,e,i){return this.XU(new Tm(this.AO,this,t,this.WU,e,i))}PS(t,e,i){return this.XU(new km(this.AO,this,t,this.WU,e,i))}x$(t){return this.XU(new _p(this.AO,this,this.WU,[],t))}Dr(){if(this.Qa){this.Qa=!1;const t=Array.from(this.Vt).sort(((t,e)=>t.qa()-e.qa()));this.Vt.clear();for(const e of t)this.Vt.add(e)}for(const t of this.Vt)t.Dr();return this}Bu(t,e,i){var s;const r=this.ZU.T();let n;if(r){const t=r.x*this.gl.QE()*e,i=r.y*this.gl.QE()*e,s=Math.ceil(t),o=Math.ceil(i);n=[s,o,Math.floor(t+r.width*this.gl.QE()*e)-s,Math.floor(i+r.height*this.gl.QE()*e)-o],this.gl.lR(n[0],n[1],n[2],n[3])}if(1!==t){for(const i of this.Vt)if(i.getVisible()){if(i.ls){const t=i.ls.x*this.gl.QE()*e,s=i.ls.y*this.gl.QE()*e,r=Math.ceil(t),n=Math.ceil(s),o=Math.floor(t+i.ls.width*this.gl.QE()*e)-r,h=Math.floor(s+i.ls.height*this.gl.QE()*e)-n;this.gl.lR(r,n,o,h)}i.Bu(t,0),i.ls&&n&&this.gl.lR(n[0],n[1],n[2],n[3])}}else{let r=((null===(s=i[i.length-1])||void 0===s?void 0:s.idLast)||0)+1;const o=Array.from(this.m$.values());for(let s=0;s<o.length;s+=1){const h=o[s];if(h.getPointerEvents()&&h.getVisible()){if(h.ls){const t=h.ls.x*this.gl.QE()*e,i=h.ls.y*this.gl.QE()*e,s=Math.ceil(t),r=Math.ceil(i),n=Math.floor(t+h.ls.width*this.gl.QE()*e)-s,o=Math.floor(i+h.ls.height*this.gl.QE()*e)-r;this.gl.lR(s,r,n,o)}const{idCount:o}=h.Bu(t,r);h.ls&&n&&this.gl.lR(n[0],n[1],n[2],n[3]),void 0!==o&&(i.push({entity:h,layer:this,entityIndex:s,idFirst:r,idCount:o,idLast:r+o-1}),r+=o)}}}return this.gl.eR(!1),this}}class Hm extends Tp{constructor(t){super(t)}}class Gm extends Hm{constructor(t){super(t),this.S$="attribute";const{vertices:e,drawSize:i,drawMode:s}=Ym(t.gl);this.TB=t.cR(e),this.pV=i,this.vV=s}Pp(t,e,i,s){return this.OB.fR(this.TB,0,{location:t.attribute("aInstanceGeo"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).ez(this.vV,0,this.pV,e),this}LE(){this.OB.wR(this.TB)}}const Ym=t=>{const e=new Float32Array(324);let i=0;return e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=-1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=1,e[i+4]=0,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=1,e[i+3]=0,e[i+4]=0,e[i+5]=1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=1,e[i+2]=-1,e[i+3]=0,e[i+4]=0,e[i+5]=-1,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=0,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=-1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=0,e[i+7]=1,e[i+8]=0,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=-1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=1,i+=9,e[i+0]=1,e[i+1]=-1,e[i+2]=1,e[i+3]=0,e[i+4]=-1,e[i+5]=0,e[i+6]=1,e[i+7]=0,e[i+8]=0,i+=9,{vertices:e,drawSize:i/9,drawMode:t.TRIANGLES}};class Wm extends Hm{constructor(t,e){super(t),this.S$="attribute",this.b$=e;const{vertices:i,indices:s}=jm();this.TB=t.cR(i),this.gV=t.WR(s),this.pV=s.length,this.vV=t.gl.TRIANGLES}Pp(t,e,i,s){return this.OB.fR(this.TB,0,{location:t.attribute("aEdge"),size:3},{location:i?t.attribute("aNormal"):void 0,size:3},{location:t.attribute("aInstanceGeo"),size:3}).tz(this.gV).pR(t.uniform("uEdgeRoundness"),this.b$/2).hz(this.vV,this.pV,0,e),this}LE(){this.OB.wR(this.TB),this.OB.wR(this.gV)}M$(t){return this.b$=t,this}w$(){return this.b$}}const jm=()=>{const t=[{normal:{x:0,y:1,z:0},perpendA:{x:0,y:0,z:1},perpendB:{x:-1,y:0,z:0}},{normal:{x:0,y:0,z:-1},perpendA:{x:0,y:1,z:0},perpendB:{x:-1,y:0,z:0}},{normal:{x:-1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:1}},{normal:{x:1,y:0,z:0},perpendA:{x:0,y:1,z:0},perpendB:{x:0,y:0,z:-1}},{normal:{x:0,y:0,z:1},perpendA:{x:0,y:1,z:0},perpendB:{x:1,y:0,z:0}},{normal:{x:0,y:-1,z:0},perpendA:{x:0,y:0,z:-1},perpendB:{x:-1,y:0,z:0}}],e=[];let i=0;const s=[];let r=0;for(const n of t){const{normal:t,perpendA:o,perpendB:h}=n,a=oi.multiply(o,-1),l=oi.multiply(h,-1),c=i;e[i]={thicknessDirection:oi.addVec(t,o,h),edge:oi.addVec(a,l),normal:t},i+=1;const u=i;e[i]={thicknessDirection:oi.addVec(t,a,h),edge:oi.addVec(o,l),normal:t},i+=1;const d=i;e[i]={thicknessDirection:oi.addVec(t,a,l),edge:oi.addVec(o,h),normal:t},i+=1;const f=i;e[i]={thicknessDirection:oi.addVec(t,o,l),edge:oi.addVec(a,h),normal:t},i+=1,s[r+0]=d,s[r+1]=c,s[r+2]=f,s[r+3]=d,s[r+4]=u,s[r+5]=c,r+=6;const g=[{A:o,B:h},{A:a,B:h},{A:a,B:l},{A:o,B:l}];for(const s of g){s.thicknessDirection=oi.addVec(t,s.A,s.B),s.stripVerticesA=[],s.stripVerticesB=[];const r=[{direction:s.A,other:s.B,vertices:s.stripVerticesA},{direction:s.B,other:s.A,vertices:s.stripVerticesB}];for(const n of r)for(let r=0;r<8;r+=1){const o=.5*r/7,h=oi.normalize(oi.lerp(t,n.direction,o)),a=Math.PI/2-oi.angle(h,t),l=oi.addVec(oi.multiply(oi.multiply(n.direction,-1),1-Math.cos(a)),oi.multiply(oi.multiply(t,-1),1-Math.sin(a)),oi.multiply(n.other,-1)),c=i;e[i]={thicknessDirection:s.thicknessDirection,normal:h,edge:l};const u=e[i];i+=1,n.vertices.push({index:c,vertex:u})}}for(let t=0;t<g.length;t+=1){const e=g[t],i=g[t<g.length-1?t+1:0],n=t%2==0?e.stripVerticesB:e.stripVerticesA,o=t%2==0?i.stripVerticesB:i.stripVerticesA;for(let t=1;t<n.length;t+=1){const e=n[t-1],i=o[t-1],h=n[t],a=o[t];s[r+0]=e.index,s[r+1]=i.index,s[r+2]=a.index,s[r+3]=h.index,s[r+4]=e.index,s[r+5]=a.index,r+=6}}}const n=[{x:-1,y:1,z:-1,flipVertexOrder:!1},{x:-1,y:1,z:1,flipVertexOrder:!0},{x:1,y:1,z:1,flipVertexOrder:!1},{x:1,y:1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:-1,flipVertexOrder:!0},{x:-1,y:-1,z:1,flipVertexOrder:!1},{x:1,y:-1,z:1,flipVertexOrder:!0},{x:1,y:-1,z:-1,flipVertexOrder:!1}],o=Math.PI/15,h=2*Math.PI/15;let a=i;for(const t of n){let r=0;e[i]={thicknessDirection:t,normal:{x:0,y:t.y,z:0},edge:{x:-t.x,y:0,z:-t.z}},i+=1,r+=1;for(let s=1;s<8.5;s+=1){const n=15===s?Math.PI:s*o,a=1*Math.cos(n)*t.y,l=Math.sin(n);for(let s=0;s<Math.ceil(3.75)+1;s+=1){const n=15===s?0:s*h,o=l*Math.cos(n)*1*t.x,c=l*Math.sin(n)*1*t.z,u={x:o,y:a,z:c},d=oi.normalize({x:o,y:a,z:c});e[i]={thicknessDirection:t,normal:d,edge:{x:u.x-t.x,y:u.y-t.y,z:u.z-t.z}},i+=1,r+=1}}const n=[];for(let t=1;t<=Math.ceil(3.75);t+=1)n.push(a),15===t?n.push(a+1):n.push(a+t+1),n.push(a+t);const l=a+1,c=Math.ceil(3.75)+1;for(let t=0;t<6.5;t+=1)for(let e=0;e<Math.ceil(3.75);e+=1){let i=0;const s=l+(t+1)*c+e;let r=0;14===e?(i=l+t*c,r=l+(t+1)*c):(i=l+t*c+e+1,r=l+(t+1)*c+e+1),n.push(l+t*c+e),n.push(i),n.push(s),n.push(s),n.push(i),n.push(r)}s.push.apply(s,t.flipVertexOrder?n.reverse():n),a+=r}const l=new Float32Array(9*e.length);let c=0;for(const t of e)l[c+0]=t.edge.x,l[c+1]=t.edge.y,l[c+2]=t.edge.z,l[c+3]=t.normal.x,l[c+4]=t.normal.y,l[c+5]=t.normal.z,l[c+6]=t.thicknessDirection.x,l[c+7]=t.thicknessDirection.y,l[c+8]=t.thicknessDirection.z,c+=9;return{vertices:l,indices:new Uint16Array(s)}},$m=(t,e)=>{let i=t.PR.PE.get(e);return i||(i=void 0!==e&&e>0?new Wm(t,Kt(e,0,1)):new Gm(t),t.PR.PE.set(e,i),i)};class Qm extends Rp{Gv(t){return this.jE=this.Rv.T(),this.Rv.C(t),this}rm(t){return this._$=t,this}nm(){return this._$}}class Jm extends Qm{constructor(t,e,i){super(t,e,i),this.C$=t,this.AO=t.AO,this.OB=this.AO.pO()}}const qm=11;class Zm extends Jm{constructor(t,e,i){super(t,e,i),this._$="cull-back",this.Ql=ci,this.k$={},this.T$=[],this.bO=yr({fillStyleSolid:()=>X(this.We)&&this.We,fillStyleIndividual:()=>G(this.We)&&this.We,fillStylePaletted:()=>j(this.We)&&this.We}),this.We=so.fillStyle,this.Rv.C(Us)}Dr(t){const e=this.T$,i=this.We,s=i!==V,r=this.F$,n=this.il()||this.I$!==r,o=this.WE(),h=this.dt.T(),a=this.dt.u;if(s){for(const t of e)t.id=void 0!==t.id?String(t.id):void 0,t.xSize=void 0!==t.xSize&&t.xSize<0?-t.xSize:t.xSize,t.ySize=void 0!==t.ySize&&t.ySize<0?-t.ySize:t.ySize,t.zSize=void 0!==t.zSize&&t.zSize<0?-t.zSize:t.zSize;const t=this.P$||0;let s=t;for(const t of e){const e=t.id;void 0!==e&&void 0!==this.k$[e]||(s+=1)}let r,l=!1,c=!1;if(l=s!==t,c=l,r=!c&&(e.length<100?"chunks":"all"),l){const e=s*qm,i=new Float32Array(e);this.zN&&i.set(this.zN),this.zN=i,this.L$=e,this.B$=t*qm}const u=G(i)?i.getFallbackColor():void 0;for(const t of e){const e=t.id,i=void 0!==e&&this.k$[e],s=[t.xCenter,t.yCenter,t.zCenter,t.xSize,t.ySize,t.zSize,t.color?t.color.r:u?u.r:void 0,t.color?t.color.g:u?u.g:void 0,t.color?t.color.b:u?u.b:void 0,t.color?t.color.a:u?u.a:void 0,t.value];if(i){for(let t=0;t<qm;t+=1)s[t]=void 0!==s[t]?s[t]:i.buffer[t];i.buffer.set(s)}else{const t=this.B$,i=new Float32Array(this.zN.buffer,t*Float32Array.BYTES_PER_ELEMENT,qm);i.set(s),void 0!==e&&(this.k$[e]={location:t,buffer:i}),this.B$+=qm}}if(c&&(this.AV=this.OB.cR(this.zN,!0)),"all"===r)this.OB.YR(this.AV,0,this.zN);else if("chunks"===r)for(const t of e){const e=t.id;if(void 0!==e){const t=this.k$[e];this.OB.YR(this.AV,t.location,t.buffer)}}if(n||o||a){const t=this.bO.fillStyleSolid(n),e=this.bO.fillStyleIndividual(n),i=this.bO.fillStylePaletted(n);t||e||i?(this.D$=$m(this.OB,this.E$()),this.gD=this.OB.uE(Hy["3D"],Hy.ColorShaded3D({dataType:e?"attribute":i?["lookup",i.getLookUpProperty(),i.lut]:"uniform",shadingStyle:this.Rv.T().type}),Hy.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:fr(this.ct),normalSource:this.D$.S$}),void 0!==this.F$&&Hy.RoundedEdges3D),this.HU=h?this.OB.uE(Hy["3D"],Hy.VertexLocation({offset:{sizeUnit:"axis",dataType:"attribute",halved:!0},axisWorldTranslation:fr(this.ct),normalSource:void 0}),Hy.MousePicking(),void 0!==this.F$&&Hy.RoundedEdges3D):void 0):(this.D$=void 0,this.gD=void 0,this.HU=void 0)}if(e.length>0){const t=g({x:hi,y:hi,z:hi},{x:ai,y:ai,z:ai});for(let e=0;e<this.B$;e+=qm){const i=this.zN[e+0],s=this.zN[e+3]/2,r=i-s,n=i+s,o=this.zN[e+1],h=this.zN[e+4]/2,a=o-h,l=o+h,c=this.zN[e+2],u=this.zN[e+5]/2,d=c-u,f=c+u;t.min.x=t.min.x<r?t.min.x:r,t.min.y=t.min.y<a?t.min.y:a,t.min.z=t.min.z<d?t.min.z:d,t.max.x=t.max.x>n?t.max.x:n,t.max.y=t.max.y>l?t.max.y:l,t.max.z=t.max.z>f?t.max.z:f}this.Ql=t}this.P$=s,this.T$.length=0}return this.rl(i),this.I$=r,this.Rv.u=!1,this.dt.u=!1,this}Bu(t,e){const i=1===t?this.HU:this.gD,s=this.D$,r=this.AV,n=this.We,o=this.P$,h=this.Rv.T(),a=o||0;return i&&r&&void 0!==o&&this.OB.dR(i,((l,c,u)=>{let d=!1;const f=c("aPos"),g=c("aOffsetAxis");this.OB.QB(i).zR(l("uScale"),this.C$.dD.vR()).zR(l("uDisp"),this.C$.dD.yR()).VR(l("uViewProjectionMatrix"),this.R$).pR(l("uIsHighlighted"),1===t||2===t?0:this.xt).xF(l("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(l("uRenderEffectMask"),2===t?1:0);const y={location:f,size:3},p={location:g,size:3},m={location:void 0,size:4},x={location:void 0,size:1};if(1!==t&&"phong"===h.type&&this.OB.zR(l("uCameraLoc"),this.z$).zR(l("uLightLoc"),this.O$).pR(l("uAmbientReflection"),h.ambientReflection).pR(l("uSpecularReflection"),h.specularReflection).pR(l("uDiffuseReflection"),h.diffuseReflection).pR(l("uShininess"),h.shininess).xF(l("uLightColor"),h.specularColor).xF(l("uAmbientColor"),h.ambientColor),1===t)this.OB.NR(l("uFirstId"),e).Ez(u,a);else if(X(n))this.OB.xF(l("uColorDiffuse"),n.getColor());else if(G(n)){const t=c("aColor");m.location=t}else if(j(n)){const t=pr(n,this,void 0);if(!t&&n.lut.percentageValues)return!1;this.OB.Uz(u,n.lut,t),"value"===n.lookUpProperty&&(x.location=c("aLookupValue"))}return r&&(this.OB.fR(r,1,y,p,m,x),s.Pp(u,o,"phong"===h.type&&1!==t,!1),d=!0),d})),{idCount:a}}Eu(t,e,i,s,r){const n=(t-e)*qm;if(!this.zN)return{};const o=this.zN[n+0],h=this.zN[n+1],a=this.zN[n+2],l=this.zN[n+3],c=this.zN[n+4],u=this.zN[n+5],d=ee(this.zN[n+6],void 0),f=ee(this.zN[n+7],void 0),g=ee(this.zN[n+8],void 0),y=ee(this.zN[n+9],void 0),p=ee(this.zN[n+10],void 0);let m;for(const t of Object.keys(this.k$))if(this.k$[t].location===n){m=t;break}return{info:{dataPoint:{x:o,y:h,z:a,xSize:l,ySize:c,zSize:u,r:d,g:f,b:g,a:y,intensity:p,id:m}}}}dispose(){return super.dispose(),this.AV&&(this.OB.wR(this.AV),this.AV=void 0),this.gD=void 0,this}Du(){return this.dispose(),this}Qv(t){this.T$=ke(this.T$,t,{canReturnB:!0})}Je(t){return this.We=fo(this.We,t),this}pr(){return this.We}Wv(t){return this.F$=void 0!==t&&t>0?Kt(t,0,1):void 0,this}E$(){return this.F$}Zt(){return this.Ql.max.x}jt(){return this.Ql.min.x}Jt(){return this.Ql.max.y}Qt(){return this.Ql.min.y}pe(){return this.Ql.max.z}ge(){return this.Ql.min.z}Cc(){return 0}kc(){return 0}Yv(){return 0}il(){return go(this.sl,this.We)}rl(t){this.sl=t}}class Km extends Tp{constructor(t,e){super(t),this.S$="custom",this.dV=e;const{vertices:i,drawSize:s}=this.fV();this.AV=t.cR(i),this.pV=s}QB(t){return this.OB.fR(this.AV,0,{location:t.attribute("aSegmentPosition"),size:1},{location:t.attribute("aPerpendHorizontal"),size:1},{location:t.attribute("aPerpendVertical"),size:1}),this}Pp(t){return this.OB.ez(this.OB.gl.TRIANGLE_STRIP,0,this.pV,t),this}fV(){const t=this.dV,e=new Float32Array(2*(t+1)*3);let i=0;for(let s=0;s<=t;s+=1){const r=2*Math.PI*s/t,n=Math.cos(r),o=Math.sin(r);for(const t of[0,1])e[i+0]=t,e[i+1]=n,e[i+2]=o,i+=3}return{vertices:e,drawSize:i/3}}LE(){this.OB.wR(this.AV)}}const tx=(t,e=16)=>{let i=t.PR.FE.get(e);return i||(i=new Km(t,e),t.PR.FE.set(e,i),i)};class ex extends Jm{constructor(t,e,i){super(t,e,i),this._$="cull-back",this.V$=ci,this.N$=[],this.G$=!1,this.gu=so.lineStyle,this.Rv.C(_s)}Dr(t){const e=this.G$,i=this.gu,s=this.pu!==i,r=this.WE(),n=e;if(e){const t=be(this.N$);this.U$=this.OB.cR(t,!1,this.U$)}if(n&&(this.V$=Mi(this.N$)),s||r){const t=8,e=ir(i)&&i.getFillStyle(),s=1===i.getThickness()?"primitive":"instanced";this.CV=void 0,X(e)&&("primitive"===s?this.CV={type:s,shader:this.OB.uE(Hy["3D"],Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}),Hy.Color({dataType:"uniform"})),fillStyle:e}:"instanced"===s&&(this.CV={type:s,shader:this.OB.uE(Hy["3D"],Hy.ColorShaded3D({dataType:"uniform",shadingStyle:this.Rv.T().type}),Hy.LineInstanced3D({axisWorldTranslation:fr(this.ct)})),geometry:tx(this.OB,t),fillStyle:e}))}return this.G$=!1,this.pu=i,this.Rv.u=!1,this}Bu(t,e){if(1===t)return{};const i=this.OB.gl,s=this.CV,r=this.U$,n=this.gu,o=this.Rv.T();if(s&&r&&ir(n))switch(s.type){case"instanced":{const e=.5*this.Hs.xv(n.thickness),h=s.fillStyle.getColor(),a=s.shader,l=s.geometry;this.OB.dR(a,((s,n,c)=>{this.OB.QB(a).zR(s("uScale"),this.C$.dD.vR()).zR(s("uDisp"),this.C$.dD.yR()).VR(s("uViewProjectionMatrix"),this.R$).xF(s("uColorDiffuse"),h).pR(s("uOffsetWU"),e).pR(s("uIsHighlighted"),this.xt).xF(s("uHighlightColorOffset"),2===t?k:this._t).pR(s("uRenderEffectMask"),2===t?1:0),"phong"===o.type&&this.OB.zR(s("uCameraLoc"),this.z$).zR(s("uLightLoc"),this.O$).pR(s("uAmbientReflection"),o.ambientReflection).pR(s("uSpecularReflection"),o.specularReflection).pR(s("uDiffuseReflection"),o.diffuseReflection).pR(s("uShininess"),o.shininess).xF(s("uLightColor"),o.specularColor).xF(s("uAmbientColor"),o.ambientColor),i.bindBuffer(i.ARRAY_BUFFER,r);const u=n("aLocationA"),d=n("aLocationB");return i.vertexAttribPointer(u,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.OB.QR(u,1),i.enableVertexAttribArray(u),i.vertexAttribPointer(d,3,i.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.OB.QR(d,1),i.enableVertexAttribArray(d),l.QB(c).Pp(this.N$.length/2),!0}));break}case"primitive":{const e=ir(n)?n.getFillStyle():void 0,o=e&&X(e)?e.getColor():void 0;if(o){const e=s.shader;this.OB.dR(e,((s,n)=>(this.OB.QB(e).zR(s("uScale"),this.C$.dD.vR()).zR(s("uDisp"),this.C$.dD.yR()).VR(s("uViewProjectionMatrix"),this.R$).xF(s("uColor"),o).pR(s("uIsHighlighted"),this.xt).xF(s("uHighlightColorOffset"),2===t?k:this._t).pR(s("uRenderEffectMask"),2===t?1:0).fR(r,void 0,{location:n("aPos"),size:3}).Pp(i.LINES,this.N$.length),!0)))}break}}return{idCount:this.N$.length}}Eu(t,e,i,s,r){return{}}dc(t){for(let e=0;e<t.length-1;e+=1){const i=t[e],s=t[e+1];this.N$.push(i),this.N$.push(s)}return this.G$=!0,{Dt(){return this},Fs(){return this}}}ii(){return this.N$.length=0,this.G$=!0,this}ev(){return[]}qd(t){}ah(t){return this.gu="function"==typeof t?t(this.gu):t,this}ro(){return this.gu}Du(){return this.U$&&(this.OB.wR(this.U$),this.U$=void 0),this}Zt(){return this.V$.max.x}jt(){return this.V$.min.x}Jt(){return this.V$.max.y}Qt(){return this.V$.min.y}pe(){return this.V$.max.z}ge(){return this.V$.min.z}Cc(){const t=this.gu;return t===Ot?0:t.getThickness()}kc(){const t=this.gu;return t===Ot?0:t.getThickness()}Yv(){const t=this.gu;return t===Ot?0:t.getThickness()}}class ix extends Tp{constructor(t,e,i){super(t),this.S$="gpu-calculate",this.$$=e,this.Y$=i;const{vertices:s,drawSize:r}=this.fV();this.AV=t.cR(s),this.pV=r}Pp(t,e,i,s){return this.OB.fR(this.AV,0,{location:t.attribute("aInstanceGeo"),size:3},{location:s?t.attribute("aTriangleBary"):void 0,size:3}).ez(this.OB.gl.TRIANGLES,0,this.pV,e),this}fV(){const t=this.Y$,e=this.$$,i=new Float32Array(6*(6*e+6*(t-2)*e));let s=0;const r=2*Math.PI/e,n=Math.PI/t,o=(t,e,o,h,a)=>{const l=e*r,c=Math.PI/2-t*n,u=Math.cos(c),d=u*Math.cos(l),f=u*Math.sin(l),g=Math.sin(c);i[s]=d,i[s+1]=g,i[s+2]=f,i[s+3]=o,i[s+4]=h,i[s+5]=a,s+=6};for(let i=0;i<t;i+=1)for(let s=0;s<e;s+=1)i>0&&(o(i,s,1,0,0),o(i,s+1,1,1,0),o(i+1,s,0,0,1)),i<t-1&&(o(i,s+1,1,1,0),o(i+1,s+1,0,1,0),o(i+1,s,0,0,1));return s!==i.length&&_e(0,(()=>{this.OB.jA.ka&&s>i.length&&Wt.console.warn("LightningChart JS unexpected error scenario, sphere geometry buffer size mismatch.\nA point series 3D component might have missing points.\n\nThis warning can be omitted with LightningChartOptions.warnings")})),{vertices:i,drawSize:s/6}}LE(){this.OB.wR(this.AV)}}const sx=(t,e)=>{const i=Math.round(e);i<3&&_e(0,qt);const s=i;let r=t.PR.IE.get(Array.from(t.PR.IE.keys()).find((t=>t.sectors===i&&t.stacks===s)));return r||(r=new ix(t,i,s),t.PR.IE.set({sectors:i,stacks:s},r),r)};class rx extends Jm{constructor(t,e,i){super(t,e,i),this._$="cull-back",this.xb=[],this.CV={},this.kN=new hm(this.xb,(t=>t.vertexBuffer&&this.OB.wR(t.vertexBuffer)),!0),this.bu=[],this.Jl=0,this.Kl=[],this.ql=0,this.Ql=ci,this.tc=ci,this.bO=yr({lineStyleSolid:()=>{const t=this.gu;return ir(t)&&t},lineFillSolid:()=>{const t=this.gu.getFillStyle();return X(t)&&t},lineFillPaletted:()=>{const t=this.gu.getFillStyle();return j(t)&&t},jointStyleTriangulatedPoints:()=>Qs(this.Jv)&&this.Jv,jointSizeTriangulated:()=>{const t=this.Jv;return Qs(t)&&t.getSize()},jointFillSolid:()=>{const t=this.Jv.getFillStyle();return X(t)&&t},jointFillPaletted:()=>{const t=this.Jv.getFillStyle();return j(t)&&t},wireframeLineStyleSolid:()=>{const t=Qs(this.Jv)&&this.Jv.getWireframeStyle();return ir(t)&&t},wireframeFillSolid:()=>{const t=Qs(this.Jv)&&this.Jv.getWireframeStyle(),e=t&&t.getFillStyle();return X(e)&&e}}),this.sc=!1,this.gu=so.lineStyle,this.Jv=so.pointStyle3D,this.Rv.C(Us),this.LN={attributesPerVertex:3,prepareRenderData:(t,e)=>be(t)}}Eu(t,e,i,s,r){return{info:{dataPoint:this.bu[t-e]}}}Dr(t){const e=this.sc,i=this.Kl,s=this.ql,r=s>0,n=this.gu,o=n!==this.pu,h=this.Jv,a=h!==this.H$,l=this.WE(),c=this.dt.u,u=this.dt.T();this.tc&&(this.Ql=Ei(this.Ql,this.tc),this.tc=void 0),r&&(this.bu=ke(this.bu,i,{canReturnB:!0}),this.Jl+=s);let d=i,f=s;if(e&&(this.xb.forEach((t=>{t.existingCoordinatesCount=0,t.existingDataPointsCount=0,t.boundaries=ci})),this.kN.yN(),d=this.bu,f=this.Jl),f>0){const t=1e5,e=Math.floor(this.AO.X$/(this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),i=this.Tt("ApplicationType",(t=>"UserSeries"===t.type))?f:1e3,s=Kt(i,t,e);this.kN.AN(d,s,((t,e,i,s)=>({existingDataPointsCount:i-s,existingCoordinatesCount:i,allocatedCoordinatesCount:t,jointPointsCount:s,lastDataPoint:e[i-1],boundaries:ci,vertexBuffer:this.OB.$R(t*this.LN.attributesPerVertex,this.LN.prepareRenderData(e,i))})),((t,e,i,s)=>{this.OB.YR(t.vertexBuffer,t.existingCoordinatesCount*this.LN.attributesPerVertex,this.LN.prepareRenderData(e,i)),t.existingDataPointsCount+=i-s,t.existingCoordinatesCount+=i,t.jointPointsCount+=s,t.lastDataPoint=e[i-1]}))}if(o||a||l||c){const t={},e=this.bO.lineStyleSolid(o),i=this.bO.lineFillSolid(o),s=this.bO.lineFillPaletted(o),r=i||s,h=this.bO.jointStyleTriangulatedPoints(a),l=this.bO.jointSizeTriangulated(a),c=this.bO.jointFillSolid(a),d=this.bO.jointFillPaletted(a),f=c||d,g=this.bO.wireframeLineStyleSolid(a),y=this.bO.wireframeFillSolid(a),p=n.getThickness()<0||1===n.getThickness()&&this.Tt("ApplicationType",(t=>"InternalUI"===t.type))?"primitive":"instanced",m=s?["lookup",s.getLookUpProperty(),s.lut]:"uniform";if("primitive"===p&&r?t.lines={type:"primitive",fillStyleSolid:i,fillStylePaletted:s,shader:this.OB.uE(Hy["3D"],Hy.Color({dataType:m}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})),mousePicking:u?{shader:this.OB.uE(Hy["3D"],Hy.MousePicking({useVertexId:!0}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}))}:void 0}:"instanced"===p&&e&&r&&(t.lines={type:"instanced",lineStyleSolid:e,fillStyleSolid:i,fillStylePaletted:s,shader:this.OB.uE(Hy["3D"],Hy.ColorShaded3D({dataType:m,shadingStyle:this.Rv.T().type}),Hy.LineInstanced3D({axisWorldTranslation:fr(this.ct)})),geometry:nx(this.OB,e.getThickness()),mousePicking:u?{shader:this.OB.uE(Hy["3D"],Hy.MousePicking(),Hy.LineInstanced3D({axisWorldTranslation:fr(this.ct)}))}:void 0}),t.markers=void 0,f&&h){const e=we(h.getShape(),{cube:()=>$m(this.OB),sphere:()=>ox(this.OB,h)});t.markers={geometry:e,pointStyle:h,pointSizeNWU:"number"==typeof l&&l,pointSizeAxis:"object"==typeof l&&l,fillStyleSolid:c,fillStylePaletted:d,shader:this.OB.uE(Hy["3D"],Hy.ColorShaded3D({dataType:d?["lookup",d.getLookUpProperty(),d.lut]:"uniform",shadingStyle:this.Rv.T().type,wireframe:!1!==y}),Hy.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:fr(this.ct),normalSource:e.S$})),mousePicking:u?{shader:this.OB.uE(Hy["3D"],Hy.MousePicking(),Hy.VertexLocation({offset:{dataType:"uniform",sizeUnit:"number"==typeof l?"nwu":"axis",symmetric:"number"==typeof l,halved:!0},axisWorldTranslation:fr(this.ct),normalSource:void 0}))}:void 0,wireframe:g&&y&&{thickness:g.getThickness(),fillStyleSolid:y}}}this.CV=t}return this.sc=!1,this.Kl=[],this.ql=0,this.pu=n,this.H$=h,this.Rv.u=!1,this.dt.u=!1,this}Bu(t,e){var i,s;const r=this.OB.gl,{lines:n,markers:o}=this.CV,h=this.Rv.T(),a=this.Jl,l=1===t?null===(i=null==n?void 0:n.mousePicking)||void 0===i?void 0:i.shader:null==n?void 0:n.shader;if(n&&l&&"instanced"===n.type){const i=l,{geometry:s,lineStyleSolid:o,fillStyleSolid:a,fillStylePaletted:c}=n;this.OB.dR(i,((n,l,u)=>{let d=!1;if(this.OB.QB(i).zR(n("uScale"),this.C$.dD.vR()).zR(n("uDisp"),this.C$.dD.yR()).VR(n("uViewProjectionMatrix"),this.R$).pR(n("uOffsetWU"),this.Hs.xv(o.getThickness())).pR(n("uIsHighlighted"),1===t||2===t?0:this.xt).xF(n("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(n("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===h.type&&this.OB.zR(n("uCameraLoc"),this.z$).zR(n("uLightLoc"),this.O$).pR(n("uAmbientReflection"),h.ambientReflection).pR(n("uSpecularReflection"),h.specularReflection).pR(n("uDiffuseReflection"),h.diffuseReflection).pR(n("uShininess"),h.shininess).xF(n("uLightColor"),h.specularColor).xF(n("uAmbientColor"),h.ambientColor),1===t);else if(a)this.OB.xF(n("uColorDiffuse"),a.getColor());else if(c){const t=pr(c,this,void 0);if(!t&&c.lut.percentageValues)return!1;this.OB.Uz(u,c.lut,t)}const f=ii(e);return this.xb.forEach((e=>{if(1===t){const[t,i]=f.hi(e.existingDataPointsCount);this.OB.NR(n("uFirstId"),t).Ez(u,i)}r.bindBuffer(r.ARRAY_BUFFER,e.vertexBuffer);const i=l("aLocationA"),o=l("aLocationB");r.vertexAttribPointer(i,3,r.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0*Float32Array.BYTES_PER_ELEMENT),this.OB.QR(i,1),r.enableVertexAttribArray(i),r.vertexAttribPointer(o,3,r.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),this.OB.QR(o,1),r.enableVertexAttribArray(o),s.QB(u).Pp(e.existingCoordinatesCount-1),d=!0})),d}))}if(n&&l&&"primitive"===n.type){const i=l,{fillStyleSolid:s,fillStylePaletted:o}=n;this.OB.dR(i,((n,h,a)=>{let l=!1;if(this.OB.QB(i).zR(n("uScale"),this.C$.dD.vR()).zR(n("uDisp"),this.C$.dD.yR()).VR(n("uViewProjectionMatrix"),this.R$).pR(n("uIsHighlighted"),1===t||2===t?0:this.xt).xF(n("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(n("uRenderEffectMask"),2===t?1:0),1===t);else if(s)this.OB.xF(n("uColor"),s.getColor());else if(o){const t=pr(o,this,void 0);if(!t&&o.lut.percentageValues)return!1;this.OB.Uz(a,o.lut,t)}const c=ii(e);return this.xb.forEach((e=>{if(1===t){const[t,i]=c.hi(e.existingDataPointsCount);this.OB.NR(n("uFirstId"),t).Bz(a,i)}this.OB.fR(e.vertexBuffer,void 0,{location:h("aPos"),size:3}).Pp(r.LINE_STRIP,e.existingCoordinatesCount),l=!0})),l}))}const c=1===t?null===(s=null==o?void 0:o.mousePicking)||void 0===s?void 0:s.shader:null==o?void 0:o.shader;if(o&&c){const i=c,{geometry:s,fillStyleSolid:r,fillStylePaletted:n,pointSizeAxis:a,pointSizeNWU:l,wireframe:u}=o;this.OB.dR(i,((o,c,d,f)=>{let g=!1;if(this.OB.QB(i).zR(o("uScale"),this.C$.dD.vR()).zR(o("uDisp"),this.C$.dD.yR()).VR(o("uViewProjectionMatrix"),this.R$).pR(f("uRatioNwuWu"),this.C$.W$()).pR(o("uIsHighlighted"),1===t||2===t?0:this.xt).xF(o("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(o("uRenderEffectMask"),2===t?1:0),1!==t&&"phong"===h.type&&this.OB.zR(o("uCameraLoc"),this.z$).zR(o("uLightLoc"),this.O$).pR(o("uAmbientReflection"),h.ambientReflection).pR(o("uSpecularReflection"),h.specularReflection).pR(o("uDiffuseReflection"),h.diffuseReflection).pR(o("uShininess"),h.shininess).xF(o("uLightColor"),h.specularColor).xF(o("uAmbientColor"),h.ambientColor),1===t);else if(r)this.OB.xF(o("uColorDiffuse"),r.getColor());else if(n){const t=pr(n,this,void 0);if(!t&&n.lut.percentageValues)return!1;this.OB.Uz(d,n.lut,t)}u&&1!==t&&this.OB.pR(o("uWireframeThickness"),u.thickness).xF(o("uWireframeColor"),u.fillStyleSolid.getColor()),!1!==a&&this.OB.zR(o("uOffsetAxis"),[a.x,a.y,a.z]),!1!==l&&this.OB.pR(o("uOffsetNWU"),l);const y=ii(e);return this.xb.forEach((e=>{if(1===t){const[t,i]=y.hi(e.existingDataPointsCount);this.OB.NR(o("uFirstId"),t).Ez(d,i)}this.OB.fR(e.vertexBuffer,1,{location:c("aPos"),size:3}),s.Pp(d,e.existingCoordinatesCount,"phong"===h.type&&1!==t,Boolean(u)&&1!==t),g=!0})),g}))}return{idCount:a}}dc(t,e){Array.isArray(t)||(t=[t]),this.Kl=ke(this.Kl,t,{canReturnB:!0}),this.ql+=t.length;const i=e||Mi(t);return this.tc=this.tc?Ei(this.tc,i):i,this}ah(t){return this.gu="function"==typeof t?t(this.gu):t,this}ro(){return this.gu}gv(t){return this.Jv="function"==typeof t?t(this.Jv):t,this}j$(){return this.Jv}Zt(){return this.tc?Math.max(this.tc.max.x,this.Ql.max.x):this.Ql.max.x}jt(){return this.tc?Math.min(this.tc.min.x,this.Ql.min.x):this.Ql.min.x}Jt(){return this.tc?Math.max(this.tc.max.y,this.Ql.max.y):this.Ql.max.y}Qt(){return this.tc?Math.min(this.tc.min.y,this.Ql.min.y):this.Ql.min.y}pe(){return this.tc?Math.max(this.tc.max.z,this.Ql.max.z):this.Ql.max.z}ge(){return this.tc?Math.min(this.tc.min.z,this.Ql.min.z):this.Ql.min.z}Cc(){return je(this.gu)}kc(){return je(this.gu)}Yv(){return je(this.gu)}nc(){return this.bu}rc(){return this.Kl}fc(){return this.Jl}Ac(){return this.ql}ii(){return this.sc=!0,this.bu.length=0,this.Jl=0,this.Kl=[],this.ql=0,this.Ql=ci,this.tc=void 0,this}dispose(){return super.dispose(),this.kN.mN(),this.CV={},this}Du(){return this.dispose(),this}}const nx=(t,e)=>tx(t,e>50?20:e>20?16:e>10?12:e>5?8:6),ox=(t,e)=>{const i=e.getSize();return sx(t,"number"==typeof i?i>50?20:i>20?16:i>10?12:i>5?8:6:20)};class hx extends Jm{constructor(t,e,i){super(t,e,i),this._$="disabled",this.Z$=!1,this.Q$=!1,this.J$={x:1,y:1,z:1},this.gm={x:0,y:0,z:0},this.Am={x:0,y:0,z:0},this.K$={x:0,y:0,z:0},this.vm={x:0,y:0,z:0,w:1},this.ym={x:1,y:1,z:1},this.q$=C(255,255,255),this.tY=bp.projectionOrthographic(-1,1,-1,1,1,-1),this.iY=bp.projectionOrthographic(-1,1,-1,1,1,-1),this.sY=!1,this.isEulerRotation=!0,this.bO=yr({fillStyleSolid:()=>X(this.We)&&this.We,fillStyleValuePalette:()=>j(this.We)&&"value"===this.We.lookUpProperty&&this.We}),this.We=so.fillStyle,this.Rv.C(Us)}Dr(t){var e;const i=this.WE(),s=this.dt.T(),r=this.dt.u,n=this.il();this.bO.fillStyleSolid(n);const o=this.bO.fillStyleValuePalette(n),h=this.K$,a=this.ym;if(this.Z$&&this.eY&&(this.AV=this.OB.cR(this.eY.vertices,void 0,this.AV),this.gV=this.OB.WR(this.eY.indices,this.gV),this.hY=this.eY.indices.length),"phong"===this.Rv.T().type&&(i||this.Z$)&&(null===(e=this.eY)||void 0===e?void 0:e.normals)&&(this.rY=this.OB.cR(this.eY.normals,void 0,this.rY)),!this.nY&&o&&"value"===o.lookUpProperty&&this.eY&&(this.nY=new Float32Array(this.eY.vertices.length/3),this.Q$=!0),this.nY&&this.Q$&&(this.oY=this.OB.cR(this.nY,void 0,this.oY)),i||n||r){if(o&&"value"!==o.lookUpProperty)throw new Error("LightningChart JS MeshModel3D does not support look up by x/y/z. Must be value");this.gD=this.OB.uE(Hy["3D"],Hy.ColorShaded3D({dataType:o?["lookup","value",o.lut]:"uniform",shadingStyle:this.Rv.T().type,wireframe:!1}),Hy.Model3D({normalSource:"phong"===this.Rv.T().type?"attribute":void 0})),this.HU=s?this.OB.uE(Hy["3D"],Hy.MousePicking({useVertexId:!0}),Hy.Model3D({normalSource:void 0})):void 0}if(this.sY){const t=bp.projectionOrthographic(-1,1,-1,1,1,-1);if(this.isEulerRotation)this.iY=bp.rotateXYZ(t,h),this.tY=bp.translate(t,a.x/2,a.y/2,a.z/2),this.tY=bp.rotateXYZ(this.tY,h),this.tY=bp.translate(this.tY,-a.x/2,-a.y/2,-a.z/2);else{const e=[-this.vm.x,-this.vm.y,-this.vm.z,this.vm.w];this.iY=bp.quaternionToRotationMatrix(e),this.tY=bp.translate(t,a.x/2,a.y/2,a.z/2),this.tY=bp.multiply(this.tY,this.iY),this.tY=bp.translate(this.tY,-a.x/2,-a.y/2,-a.z/2)}this.sY=!1}return this.Rv.u=!1,this.rl(this.We),this.dt.u=!1,this.Z$=!1,this.Q$=!1,this}Bu(t,e){var i;const s=1===t?this.HU:this.gD,r=1===t,n=this.gV,o=this.AV,h=this.rY,a=this.oY,l=this.gm,c=this.Am,u=this.J$,d=this.ym,f=this.tY,g=this.iY,y=this.bO.fillStyleValuePalette(!1),p=this.bO.fillStyleSolid(!1),m=this.Rv.T(),x={location:void 0,size:1};let S=this.hY;if(!(s&&o&&n&&this.eY))return{};const v=this.eY?null===(i=this.eY)||void 0===i?void 0:i.parts.length:0;if(v<1)return{};const A=this.eY.vertices.length;return this.OB.dR(s,((i,b,C,M)=>{var T;this.OB.QB(s).zR(i("uScale"),this.C$.dD.vR()).zR(i("uDisp"),this.C$.dD.yR()).VR(i("uViewProjectionMatrix"),this.R$).pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),this._t).pR(i("uRenderEffectMask"),2===t?1:0).VR(i("uModelRotation"),f).zR(i("uModelScale"),[u.x,u.y,u.z]).zR(i("uLocationAxis"),[l.x,l.y,l.z]).zR(i("uModelAlignment"),[c.x,c.y,c.z]).zR(i("uModelSize"),[d.x,d.y,d.z]).fR(o,0,{location:C.attribute("aGeoPos"),size:3}).tz(n);let E=!1;if(r)this.OB.NR(i("uFirstId"),e).Bz(C,A);else{if(this.We===V&&A<1)return!1;if(p)this.OB.xF(i("uColorDiffuse"),p.getColor());else if(y){if(!a)return!1;const t=y.getPalette();x.location=b("aLookupValue"),this.OB.Uz(C,t,void 0).fR(a,void 0,x),E=!0}}"phong"!==m.type||r||(this.OB.zR(i("uCameraLoc"),this.z$).zR(i("uLightLoc"),this.O$).pR(i("uAmbientReflection"),m.ambientReflection).pR(i("uSpecularReflection"),m.specularReflection).pR(i("uDiffuseReflection"),m.diffuseReflection).pR(i("uShininess"),m.shininess).xF(i("uLightColor"),m.specularColor).xF(i("uAmbientColor"),m.ambientColor).VR(i("uModelRotationNormals"),g),h&&this.OB.fR(h,void 0,{location:C.attribute("aNormal"),size:3}));let w=!1;for(let t=0;t<v;t+=1){S=0;let e=this.q$,s=0,n=0,o=0,h=!0;this.eY&&this.eY.parts&&this.eY.parts[t].material&&(e=this.eY.parts[t].material.specular,S=this.eY.parts[t].count,n=this.eY.parts[t].count,o=this.eY.parts[t].offset,h=this.eY.parts[t].useIndexBuffer,s=this.eY.parts[t].indexStart,r||p||E||this.OB.xF(i("uColorDiffuse"),this.eY.parts[t].material.diffuse)),(S>0||n>0)&&("phong"!==m.type||r||(this.OB.xF(i("uLightColor"),e),g?this.OB.VR(i("uModelRotationNormals"),g):this.OB.xF(i("uLightColor"),m.specularColor)),h?this.OB.sz(S,this.OB.gl.TRIANGLES,s,(null===(T=this.eY)||void 0===T?void 0:T.indices)instanceof Uint32Array?this.OB.gl.UNSIGNED_INT:this.OB.gl.UNSIGNED_SHORT):this.OB.Pp(this.OB.gl.TRIANGLES,n,o),w=!0)}return w})),{idCount:A}}aY(t){if(this.lY)return this.lY;const e=this.gm,i=this.Am,s=this.J$,r=this.ym,n=this.K$,o=this.vm,h=this.C$._x(e),a=[],l=bp.projectionOrthographic(-1,1,-1,1,1,-1);let c;if(this.isEulerRotation)c=bp.translate(l,r.x/2,r.y/2,r.z/2),c=bp.rotateXYZ(c,n),c=bp.translate(c,-r.x/2,-r.y/2,-r.z/2);else{const t=[-o.x,-o.y,-o.z,o.w];c=bp.translate(l,r.x/2,r.y/2,r.z/2),c=bp.multiply(c,bp.quaternionToRotationMatrix(t)),c=bp.translate(c,-r.x/2,-r.y/2,-r.z/2)}const u=(i.x+1)*(r.x/2),d=(i.y+1)*(r.y/2),f=(i.z+1)*(r.z/2);for(let e=0;e<t.vertices.length;e+=3){const i=bp.multiply(c,[t.vertices[e],t.vertices[e+1],t.vertices[e+2],1]),r={x:h.x+(i[0]-u)*s.x,y:h.y+(i[1]-d)*s.y,z:h.z+(i[2]-f)*s.z};a.push(r)}return this.lY=a,this.lY}Cm(t){const e=this.eY;if(!e)return;const i=this.aY(e),s=t(i);0!==s.length&&(s.length!==i.length&&!0===this.St.Ca.ka&&Wt.console.warn("LightningChart JS warning - MeshModel3D.setVertexValues returned array length is not equal to vertex locations array length.\nThis is most likely an application error."),this.nY=s instanceof Float32Array?s:new Float32Array(s),this.Q$=!0)}Eu(t,e,i,s,r){return{info:{iVertex:t-e}}}Mm(t,e){const i=this.eY;if(!i||void 0===(null==t?void 0:t.iVertex))return;if(i.indices.length>0){const s=[];for(let e=0;e<i.indices.length;e+=3){const r=i.indices[e],n=i.indices[e+1],o=i.indices[e+2];r!==t.iVertex&&n!==t.iVertex&&o!==t.iVertex||s.push([r,n,o])}const r=this.aY(i),n=this.St.sh(e.clientX,e.clientY),o=s.map((t=>t.map((t=>{const e={x:i.vertices[3*t],y:i.vertices[3*t+1],z:i.vertices[3*t+2]},s=r[t],o=this.C$.Cx(s),h=this.C$.bv(o);return{index:t,vertex:e,world:s,axis:o,dist:h?vi(h,n):hi}})))).flat();o.sort(((t,e)=>t.dist-e.dist));const h=o[0];if(!h)return;const a=this.nY?this.nY[h.index]:void 0;return{coordModel:h.vertex,coordAxis:h.axis,index:h.index,value:a}}const s=t.iVertex,r=this.nY?this.nY[s]:void 0,n={x:i.vertices[3*s],y:i.vertices[3*s+1],z:i.vertices[3*s+2]},o=this.aY(i)[s];return{coordModel:n,coordAxis:this.C$.Cx(o),index:s,value:r}}dispose(){return super.dispose(),this.AV&&(this.OB.wR(this.AV),this.AV=void 0),this.gV&&(this.OB.wR(this.gV),this.gV=void 0),this.rY&&(this.OB.wR(this.rY),this.rY=void 0),this.oY&&(this.OB.wR(this.oY),this.oY=void 0),this.gD=void 0,this.HU=void 0,this.eY=void 0,this.nY=void 0,this}Du(){return this.dispose(),this}wm(t){return this.eY=t,this.Z$=!0,this.ym=t.modelSize,this}Je(t){return this.We=fo(this.We,t),this}pr(){return this.We}km(t){return this.J$=t,this.lY=void 0,this}vR(){return this.J$}Tm(t){return this.gm=t,this.lY=void 0,this}Fm(t){return this.Am=t,this.lY=void 0,this}Im(t){return this.K$=t,this.sY=!0,this.isEulerRotation=!0,this.lY=void 0,this}Pm(t){return this.vm=t,this.sY=!0,this.isEulerRotation=!1,this.lY=void 0,this}Lm(t){return this._$=t,this}Bm(){return this._$}Zt(){return ai}jt(){return hi}Jt(){return ai}Qt(){return hi}pe(){return ai}ge(){return hi}Cc(){return 0}kc(){return 0}Yv(){return 0}il(){return go(this.sl,this.We)}rl(t){this.sl=t}}class ax extends Jm{constructor(t,e,i,s){super(t,e,i),this._$="cull-back",this.xb=[],this.kN=new hm(this.xb,(t=>t.vertexBuffer&&this.OB.wR(t.vertexBuffer)),!1),this.bu=[],this.Jl=0,this.Kl=[],this.ql=0,this.Ql=ci,this.tc=ci,this.sc=!1,this.bO=yr({fillStyleSolid:()=>{const t=this.ty.getFillStyle();return X(t)&&t},fillStyleIndividual:()=>{const t=this.ty.getFillStyle();return G(t)&&t},fillStylePalette:()=>{const t=this.ty.getFillStyle();return j(t)&&t},triangulatedPointStyle:()=>{const t=this.ty;return Qs(t)&&t},wireframeLineStyleSolid:()=>{const t=Qs(this.ty)&&this.ty,e=t&&t.getWireframeStyle();return ir(e)&&e},wireframeFillStyleSolid:()=>{const t=Qs(this.ty)&&this.ty,e=t&&t.getWireframeStyle(),i=e&&e.getFillStyle();return X(i)&&i}}),this.hc=p(void 0),this.Ca=s,this.ty=so.pointStyle3D,this.Rv.C(Us);const r=!0===(null==s?void 0:s.individualPointColorEnabled),n=!0===(null==s?void 0:s.individualPointSizeEnabled),o=!0===(null==s?void 0:s.individualLookupValuesEnabled),h=!0===(null==s?void 0:s.individualPointSizeAxisEnabled);let a,l,c,u,d=0;d+=3,r&&(a=d,d+=4),n&&(l=d,d+=1),o&&(c=d,d+=1),h&&(u=d,d+=3);const f=((t,e,i,s)=>t||e||i||s?!t||e||i||s?t||!e||i||s?t||e||!i||s?t||e||i||!s?(r,n,o)=>{const h=3+(t?4:0)+(e?1:0)+(i?1:0)+(s?3:0),a=r.length,l=new Float32Array(a*h);let c=0,u=c;for(let t=0;t<a;t+=1){const e=r[t];l[u+0]=e.x,l[u+1]=e.y,l[u+2]=e.z,u+=h}if(c+=3,t){const t=o&&G(o)&&o.getFallbackColor()||B;u=c;for(let e=0;e<a;e+=1){const i=r[e].color||t;l[u+0]=i.r,l[u+1]=i.g,l[u+2]=i.b,l[u+3]=i.a,u+=h}c+=4}if(e){const t=n&&n.getSize();let e=1;"number"==typeof t&&(e=t),u=c;for(let t=0;t<a;t+=1){const i=r[t],s=void 0!==i.size?i.size:e;l[u+0]=s,u+=h}c+=1}if(i){u=c;for(let t=0;t<a;t+=1){const e=r[t];l[u+0]=void 0!==e.value?e.value:Dt,u+=h}c+=1}if(s){const t=n&&n.getSize();let e={x:1,y:1,z:1};"object"==typeof t&&(e=t),u=c;for(let t=0;t<a;t+=1){const i=r[t],s=void 0!==i.sizeAxisX?i.sizeAxisX:e.x,n=void 0!==i.sizeAxisY?i.sizeAxisY:e.y,o=void 0!==i.sizeAxisZ?i.sizeAxisZ:e.z;l[u+0]=s,l[u+1]=n,l[u+2]=o,u+=h}c+=3}return l}:(t,e,i)=>((t,e)=>{const i=e&&e.getSize();let s={x:1,y:1,z:1};"object"==typeof i&&(s=i);const r=t.length,n=new Float32Array(6*r);let o=0;for(let e=0;e<r;e+=1){const i=t[e];n[o+0]=i.x,n[o+1]=i.y,n[o+2]=i.z;const r=void 0!==i.sizeAxisX?i.sizeAxisX:s.x,h=void 0!==i.sizeAxisY?i.sizeAxisY:s.y,a=void 0!==i.sizeAxisZ?i.sizeAxisZ:s.z;n[o+3]=r,n[o+4]=h,n[o+5]=a,o+=6}return n})(t,e):(t,e,i)=>(t=>{const e=t.length,i=new Float32Array(4*e);for(let s=0,r=0;s<e;s+=1){const e=t[s];i[r+0]=e.x,i[r+1]=e.y,i[r+2]=e.z,i[r+3]=void 0!==e.value?e.value:Dt,r+=4}return i})(t):(t,e,i)=>((t,e)=>{const i=e&&e.getSize();let s=1;"number"==typeof i&&(s=i);const r=t.length,n=new Float32Array(4*r);for(let e=0,i=0;e<r;e+=1){const r=t[e];n[i+0]=r.x,n[i+1]=r.y,n[i+2]=r.z;const o=void 0!==r.size?r.size:s;n[i+3]=o,i+=4}return n})(t,e):(t,e,i)=>((t,e)=>{const i=e&&G(e)&&e.getFallbackColor()||B,s=t.length,r=new Float32Array(7*s);for(let e=0,n=0;e<s;e+=1){const s=t[e];r[n+0]=s.x,r[n+1]=s.y,r[n+2]=s.z;const o=s.color||i;r[n+3]=o.r,r[n+4]=o.g,r[n+5]=o.b,r[n+6]=o.a,n+=7}return r})(t,i):(t,e,i)=>be(t))(r,n,o,h);this.LN={individualPointColorEnabled:r,individualPointSizeEnabled:n,individualLookupValuesEnabled:o,individualPointSizeAxisEnabled:h,attributesPerVertex:d,attributeOffsetCoordinate:0,attributeOffsetColor:a,attributeOffsetSize:l,attributeOffsetLookUpValue:c,attributeOffsetPointSize3D:u,prepareRenderData:(t,e)=>f(t,this.ty,this.ty.fillStyle)}}Ft(){return this.hc.T()||this.hc._}Eu(t,e,i,s,r){return{info:{dataPoint:this.bu[t-e]}}}Dr(t){const e=this.sc,i=this.Kl,s=this.ql,r=s>0,n=this.ty,o=this.ty!==this.cY,h=this.dt.T(),a=this.dt.u,l=this.WE();this.tc&&(this.Ql=Ei(this.Ql,this.tc),this.tc=void 0),r&&(this.bu=ke(this.bu,i,{canReturnB:!0}),this.Jl+=s);let c=i,u=s;if(e&&(this.xb.forEach((t=>{t.existingDataPointsCount=0,t.existingCoordinatesCount=0,t.boundaries=ci})),this.kN.yN(),c=this.bu,u=this.Jl),u>0){const t=Math.floor(this.AO.X$/(this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT)),e=Kt(u,1e5,t);this.kN.AN(c,e,((t,e,i)=>({existingDataPointsCount:i,existingCoordinatesCount:i,allocatedCoordinatesCount:t,boundaries:ci,vertexBuffer:this.OB.$R(t*this.LN.attributesPerVertex,this.LN.prepareRenderData(e,i))})),((t,e,i)=>{this.OB.YR(t.vertexBuffer,t.existingCoordinatesCount*this.LN.attributesPerVertex,this.LN.prepareRenderData(e,i)),t.existingDataPointsCount+=i,t.existingCoordinatesCount=t.existingDataPointsCount}))}const d=n.getFillStyle(),f=this.bO.fillStyleSolid(o),g=this.bO.fillStyleIndividual(o),y=this.bO.fillStylePalette(o),p=d===V&&V;if(o||l||a){let t;const e=n.getSize(),i=this.LN.individualPointColorEnabled,s=this.LN.individualPointSizeEnabled,r=this.LN.individualPointSizeAxisEnabled,a=this.LN.individualLookupValuesEnabled;if(g&&!i){const t="LCJS misusage error: Series individualPointColorEnabled flag must be set if using IndividualPointFill !";throw Wt.alert(t),new Error(t)}if(y&&"value"===y.getLookUpProperty()&&!a){const t='LCJS misusage error: Series individualLookupValuesEnabled flag must be set if using PalettedFill with lookUpProperty="value" !';throw Wt.alert(t),new Error(t)}const l=this.bO.wireframeLineStyleSolid(o),c=this.bO.wireframeFillStyleSolid(o);if(f||g||y||c){const i=g?"attribute":y?["lookup",y.getLookUpProperty(),y.lut]:"uniform",o=s&&"number"==typeof e,a=r&&"object"==typeof e,u=o||a?"attribute":"uniform";if(Qs(n)){const r=we(n.getShape(),{cube:()=>$m(this.OB),sphere:()=>lx(this.OB,n,s)});t={type:"instanced",shader:this.OB.uE(Hy["3D"],Hy.ColorShaded3D({dataType:i,shadingStyle:this.Rv.T().type,wireframe:!1!==c}),Hy.VertexLocation({offset:{dataType:u,sizeUnit:"number"==typeof e?"nwu":"axis",halved:!0,symmetric:"number"==typeof e},axisWorldTranslation:fr(this.ct),normalSource:r.S$})),pointStyle:n,useIndividualPointSize:o,useIndividualPointSize3D:a,pointSizeNWU:"number"==typeof e&&e,pointSizeAxis:"object"==typeof e&&e,fillStyleSolid:f,fillStyleIndividual:g,fillStylePaletted:y,fillStyleEmpty:p,mousePickingShader:h&&this.OB.uE(Hy["3D"],Hy.MousePicking(),Hy.VertexLocation({offset:{dataType:u,sizeUnit:"number"==typeof e?"nwu":"axis",halved:!0,symmetric:"number"==typeof e},axisWorldTranslation:fr(this.ct),normalSource:void 0})),geometry:r,wireframe:l&&c&&{thickness:l.getThickness()<0?1:l.getThickness(),fillStyleSolid:c}}}else Zs(n)&&"number"==typeof e&&(t={type:"primitive",shader:this.OB.uE(Hy["3D"],Hy.PointSize(u),Hy.Color({dataType:i}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0})),pointStyle:n,pointSizePixels:e,useIndividualPointSize:o,fillStyleSolid:f,fillStyleIndividual:g,fillStylePaletted:y,mousePickingShader:h&&this.OB.uE(Hy["3D"],Hy.PointSize(u),Hy.MousePicking({useVertexId:!0}),Hy.VertexLocation({axisWorldTranslation:fr(this.ct),normalSource:void 0}))})}this.CV=t}if(void 0===this.hc.T()&&y&&"value"===y.lookUpProperty&&y.lut.percentageValues){let t=ai,e=hi;for(let i=0;i<this.bu.length;i+=1){const s=this.bu[i];void 0!==s.value&&s.value<e&&(e=s.value),void 0!==s.value&&s.value>t&&(t=s.value)}this.hc.C({min:e,max:t})}return this.hc._=void 0,this.sc=!1,this.Kl=[],this.ql=0,this.cY=n,this.Rv.u=!1,this}Bu(t,e){const i=this.OB.gl,s=this.CV,r=this.Jl;if(!s)return{};const n=1===t?s.mousePickingShader:s.shader;if(!n)return{};const o=this.Rv.T(),{fillStyleSolid:h,fillStylePaletted:a,useIndividualPointSize:l}=s,c="instanced"===s.type&&s.useIndividualPointSize3D,u="instanced"===s.type&&s.wireframe;return this.OB.dR(n,((r,d,f,g)=>{let y=!1;if(this.OB.QB(n).zR(r("uScale"),this.C$.dD.vR()).zR(r("uDisp"),this.C$.dD.yR()).VR(r("uViewProjectionMatrix"),this.R$).pR(r("uIsHighlighted"),1===t||2===t?0:this.xt).xF(r("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(r("uRenderEffectMask"),2===t?1:0),"instanced"===s.type){const{pointSizeAxis:t,pointSizeNWU:e}=s;!1!==t&&!1===c&&this.OB.zR(r("uOffsetAxis"),[t.x,t.y,t.z]),!1!==e&&!1===l&&this.OB.pR(r("uOffsetNWU"),e).pR(g("uRatioNwuWu"),this.C$.W$())}else if("primitive"===s.type){const{pointSizePixels:t}=s;l||this.OB.pR(r("uPointSize"),t).pR(r("uDevicePixelRatio"),this.OB.QE())}if(1===t);else if("instanced"===s.type?("phong"===o.type&&this.OB.zR(r("uCameraLoc"),this.z$).zR(r("uLightLoc"),this.O$).pR(r("uAmbientReflection"),o.ambientReflection).pR(r("uSpecularReflection"),o.specularReflection).pR(r("uDiffuseReflection"),o.diffuseReflection).pR(r("uShininess"),o.shininess).xF(r("uLightColor"),o.specularColor).xF(r("uAmbientColor"),o.ambientColor),u&&this.OB.pR(r("uWireframeThickness"),u.thickness).xF(r("uWireframeColor"),u.fillStyleSolid.getColor()),h&&this.OB.xF(r("uColorDiffuse"),h.getColor()),s.fillStyleEmpty&&this.OB.xF(r("uColorDiffuse"),k)):"primitive"===s.type&&h&&this.OB.xF(r("uColor"),h.getColor()),a){const t=pr(a,this,this.hc.T());if(!t&&a.lut.percentageValues)return!1;this.OB.Uz(f,a.lut,t)}const p=ii(e);return this.xb.forEach((e=>{if(1===t){const[t,i]=p.hi(e.existingDataPointsCount);this.OB.NR(r("uFirstId"),t),"instanced"===s.type?this.OB.Ez(f,i):this.OB.Bz(f,i)}i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer);const n=d("aPos");if(i.vertexAttribPointer(n,3,i.FLOAT,!1,this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.LN.attributeOffsetCoordinate*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OB.QR(n,1),i.enableVertexAttribArray(n),s.fillStyleIndividual&&void 0!==this.LN.attributeOffsetColor&&1!==t){const t=d("aColor");i.vertexAttribPointer(t,4,i.FLOAT,!1,this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.LN.attributeOffsetColor*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OB.QR(t,1),i.enableVertexAttribArray(t)}if(l&&void 0!==this.LN.attributeOffsetSize){"instanced"===s.type?this.OB.pR(g("uRatioNwuWu"),this.C$.W$()):"primitive"===s.type&&this.OB.pR(r("uDevicePixelRatio"),this.OB.QE());const t=d("instanced"===s.type?"aOffsetNWU":"aPointSize");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.LN.attributeOffsetSize*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OB.QR(t,1),i.enableVertexAttribArray(t)}if(c&&void 0!==this.LN.attributeOffsetPointSize3D&&"instanced"===s.type){const t=d("aOffsetAxis");i.vertexAttribPointer(t,3,i.FLOAT,!1,this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.LN.attributeOffsetPointSize3D*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OB.QR(t,1),i.enableVertexAttribArray(t)}if(s.fillStylePaletted&&"value"===s.fillStylePaletted.getLookUpProperty()&&void 0!==this.LN.attributeOffsetLookUpValue&&1!==t){const t=d("aLookupValue");i.vertexAttribPointer(t,1,i.FLOAT,!1,this.LN.attributesPerVertex*Float32Array.BYTES_PER_ELEMENT,this.LN.attributeOffsetLookUpValue*Float32Array.BYTES_PER_ELEMENT),"instanced"===s.type&&this.OB.QR(t,1),i.enableVertexAttribArray(t)}"instanced"===s.type?(s.geometry.Pp(f,e.existingCoordinatesCount,"phong"===o.type&&1!==t,Boolean(u)&&1!==t),y=!0):"primitive"===s.type&&(this.OB.Pp(i.POINTS,e.existingCoordinatesCount),y=!0)})),y})),{idCount:r}}dc(t,e){Array.isArray(t)||(t=[t]),this.Kl=ke(this.Kl,t,{canReturnB:!0}),this.ql+=t.length;const i=e||Mi(t);return this.tc=this.tc?Ei(this.tc,i):i,this.hc.C(void 0),this}iy(t){return this.ty="function"==typeof t?t(this.ty):t,this}uY(){return this.ty}Zt(){return this.tc?Math.max(this.tc.max.x,this.Ql.max.x):this.Ql.max.x}jt(){return this.tc?Math.min(this.tc.min.x,this.Ql.min.x):this.Ql.min.x}Jt(){return this.tc?Math.max(this.tc.max.y,this.Ql.max.y):this.Ql.max.y}Qt(){return this.tc?Math.min(this.tc.min.y,this.Ql.min.y):this.Ql.min.y}pe(){return this.tc?Math.max(this.tc.max.z,this.Ql.max.z):this.Ql.max.z}ge(){return this.tc?Math.min(this.tc.min.z,this.Ql.min.z):this.Ql.min.z}Cc(){const t=this.ty,e=t.getSize();return"number"==typeof e?Qs(t)?e/2:Zs(t)?5:0:0}kc(){return this.Cc()}Yv(){return this.Cc()}nc(){return this.bu}rc(){return this.Kl}fc(){return this.Jl}Ac(){return this.ql}ii(){return this.sc=!0,this.bu.length=0,this.Jl=0,this.Kl=[],this.ql=0,this.Ql=ci,this.tc=void 0,this.hc.C(void 0),this}dispose(){return super.dispose(),this.kN.mN(),this.CV=void 0,this}Du(){return this.dispose(),this}}const lx=(t,e,i)=>{const s=e.getSize();return sx(t,"number"==typeof s?i||s>=50?20:s>=10?10:s>=3?5:3:32)};class cx extends Jm{constructor(t,e,i,s){super(t,e,i),this._$="disabled",this.We=so.fillStyle,this.Wy=so.lineStyle,this.vG=p("bilinear"),this.dY=[],this.fY=void 0,this.CV={},this.AY=!1,this.bO=yr({fillStyleSolid:()=>X(this.We)&&this.We,fillStylePaletted:()=>j(this.We)&&this.We,wireframeStyleLine:()=>ir(this.Wy)&&this.Wy,wireframeStyleFill:()=>{const t=this.Wy&&this.Wy.getFillStyle();return X(t)&&t}}),this.Wi={x:0,z:0},this.qM={x:1,z:1},this.Rv.C(_s);const r="columns"===s.dataOrder?s.columns:s.rows,n="columns"===s.dataOrder?s.rows:s.columns;this.Ca={...s,primaryDimensionVectorsCount:r,secondaryDimensionVectorsCount:n},this.gY=new Array(this.Ca.primaryDimensionVectorsCount).fill(void 0),this.Hb=new Tm(this.AO,t.AO.BG,t.St.ct,qt,[],this.Ca).jy(Ot),this.Hb.xG=Sm;const o=this.Hb.bG.gridTiles.map((t=>{const e=t.sizeHeatmapDataVectors,i=t.sizeUniqueHeatmapDataVectors,s=t.iFirstVector,r=t.iFirstUniqueVector,n=new Float32Array(t.sizeHeatmapDataVectors.primary*t.sizeHeatmapDataVectors.secondary),o={primary:t.sizeHeatmapDataVectors.primary-1,secondary:t.sizeHeatmapDataVectors.secondary-1};return{iFirstVector:t.iFirstVector,iFirstUniqueVector:t.iFirstUniqueVector,sizeHeatmapDataVectors:t.sizeHeatmapDataVectors,sizeUniqueHeatmapDataVectors:t.sizeUniqueHeatmapDataVectors,iFirstGeometryVector:s,iFirstGeometryUniqueVector:r,sizeGeometryDataVectors:e,sizeUniqueGeometryDataVectors:i,heightmapData:n,normalmapSize:o}})),h=this.Hb.bG.gridTileSizes.map((t=>{const e=o.filter((e=>e.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&e.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary)),i=e[0].sizeGeometryDataVectors;return{...t,tiles:e,sizeGeometryData:i}})),a=o.reduce(((t,e)=>{const i=e.sizeHeatmapDataVectors.primary,s=e.sizeHeatmapDataVectors.secondary,r=i*s;return r>t.cells?{primary:i,secondary:s,cells:r}:t}),{primary:0,secondary:0,cells:0});this.pY={gridTiles:o,gridTileSizes:h,largestGridTileSize:a},this.Jy(this.Wi,this.qM)}Eu(t,e,i,s,r){const n=t-e,o=n%(this.Ca.secondaryDimensionVectorsCount-1),h=Math.floor(n/(this.Ca.secondaryDimensionVectorsCount-1)),a="columns"===this.Ca.dataOrder?h:o,l="rows"===this.Ca.dataOrder?h:o,c=[{x:this.Wi.x+a*this.qM.x,z:this.Wi.z+l*this.qM.z,y:this.vY(h,o),intensity:this.yY(h,o),column:"columns"===this.Ca.dataOrder?h:o,row:"columns"===this.Ca.dataOrder?o:h},{x:this.Wi.x+(a+("columns"===this.Ca.dataOrder?1:0))*this.qM.x,z:this.Wi.z+(l+("rows"===this.Ca.dataOrder?1:0))*this.qM.z,y:this.vY(h+1,o),intensity:this.yY(h+1,o),column:"columns"===this.Ca.dataOrder?h+1:o,row:"columns"===this.Ca.dataOrder?o:h+1},{x:this.Wi.x+(a+1)*this.qM.x,z:this.Wi.z+(l+1)*this.qM.z,y:this.vY(h+1,o+1),intensity:this.yY(h+1,o+1),column:"columns"===this.Ca.dataOrder?h+1:o+1,row:"columns"===this.Ca.dataOrder?o+1:h+1},{x:this.Wi.x+(a+("columns"===this.Ca.dataOrder?0:1))*this.qM.x,z:this.Wi.z+(l+("rows"===this.Ca.dataOrder?0:1))*this.qM.z,y:this.vY(h,o+1),intensity:this.yY(h,o+1),column:"columns"===this.Ca.dataOrder?h:o+1,row:"columns"===this.Ca.dataOrder?o+1:h}],u=c.map((t=>this.C$.bv(t))).map((t=>void 0===t?hi:vi(t,{x:s,y:r}))).map(((t,e)=>({i:e,dist:t})));return u.sort(((t,e)=>t.dist-e.dist)),{info:{dataPoint:{...c[u[0].i]}}}}vY(t,e){for(let i=0;i<this.pY.gridTiles.length;i+=1){const s=this.pY.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const i=t-s.iFirstVector.primary,r=e-s.iFirstVector.secondary,n=i*s.sizeHeatmapDataVectors.secondary+r;return s.heightmapData[n]}}return 0}yY(t,e){if(this.Hb.mG)for(let i=0;i<this.Hb.bG.gridTiles.length;i+=1){const s=this.Hb.bG.gridTiles[i];if(t>=s.iFirstVector.primary&&t<=s.iFirstVector.primary+s.sizeHeatmapDataVectors.primary-1&&e>=s.iFirstVector.secondary&&e<=s.iFirstVector.secondary+s.sizeHeatmapDataVectors.secondary-1){const i=t-s.iFirstVector.primary,r=e-s.iFirstVector.secondary,n=i*s.sizeHeatmapDataVectors.secondary+r;return s.intensityData[n]}}}mY(t){this.xY=t,this.fY=void 0}Jy(t,e){this.Wi=t,this.qM=e;const i=this.Ca,s={min:{x:Math.min(this.Wi.x,this.Wi.x+(i.columns-1)*this.qM.x),z:Math.min(this.Wi.z,this.Wi.z+(i.rows-1)*this.qM.z)},max:{x:Math.max(this.Wi.x,this.Wi.x+(i.columns-1)*this.qM.x),z:Math.max(this.Wi.z,this.Wi.z+(i.rows-1)*this.qM.z)}},r=new Map;return this.pY.gridTiles.forEach((t=>{const e="columns"===this.Ca.dataOrder?{x:this.qM.x*(t.sizeHeatmapDataVectors.primary-1),z:this.qM.z*(t.sizeHeatmapDataVectors.secondary-1)}:{x:this.qM.x*(t.sizeHeatmapDataVectors.secondary-1),z:this.qM.z*(t.sizeHeatmapDataVectors.primary-1)},i="columns"===this.Ca.dataOrder?{x:this.Wi.x+this.qM.x*t.iFirstVector.primary,z:this.Wi.z+this.qM.z*t.iFirstVector.secondary}:{x:this.Wi.x+this.qM.x*t.iFirstVector.secondary,z:this.Wi.z+this.qM.z*t.iFirstVector.primary};r.set(t,{sizeAxis:e,startLocationAxis:i})})),this.TG={SY:s,tilesInfo:r},this}Ky(){return{start:this.Wi,step:this.qM,end:{x:this.Wi.x+this.qM.x*this.Ca.columns,z:this.Wi.z+this.qM.z*this.Ca.rows}}}Dr(t){const e=this.dY,i=go(this.sl,this.We),s=this.bO.fillStyleSolid(i),r=this.bO.fillStylePaletted(i),n=this.Wy,o=this.Wy!==this.MG,h=this.bO.wireframeStyleLine(o),a=this.bO.wireframeStyleFill(o),l=!1!==a,c=this.vG.u,u=this.vG.T(),d=this.Rv.T(),f=this.WE(),g=this.dt.T();this.Hb.Dr();const y=this.Hb.wG;if(!y)return this;this.bY=this.bY||this.MY(y);const p=this.bY;this.wY(p);const m=vm(e,p,void 0,(t=>t.sizeGeometryDataVectors));if(m.size>0&&(Cm(this.OB,m,(t=>t.heightmapData),(t=>t.heightmapDataTexture)),this.AY=!0),"phong"===d.type&&(m.size>0||f)){const t=this.OB.gl,e=this.OB.uE(Hy["2D"],Hy.DrawToNormalTexture({flipXZ:"rows"===this.Ca.dataOrder,vertexIdSource:this.OB.Lz(),normalTextureType:this.OB.gl2?"uint":"ubyte",heightmapTextureType:this.OB.nE?"float":"ubyte",littleEndian:this.OB.IS_MACHINE_LITTLE_ENDIAN}));p.gridTileSizes.forEach((i=>{i.tiles.forEach((s=>{var r;const n=s.normalmapTexture,o=null===(r=this.TG)||void 0===r?void 0:r.tilesInfo.get(s.tileData);if(!n||!o)return;const h={x:s.normalmapSize.secondary,y:s.normalmapSize.primary},a=h.x*h.y;this.OB.Az.Bu((()=>{this.OB.dR(e,((r,n,h,l)=>(this.OB.QB(e).Bz(h,a).AR(r("uTileDimensionsXZ"),["columns"===this.Ca.dataOrder?i.sizeHeatmapData.primary:i.sizeHeatmapData.secondary,"columns"===this.Ca.dataOrder?i.sizeHeatmapData.secondary:i.sizeHeatmapData.primary]).RR(r("uTileDimensions"),[i.sizeHeatmapData.primary,i.sizeHeatmapData.secondary]).AR(r("uTileStartLocationAxisXZ"),[o.startLocationAxis.x,o.startLocationAxis.z]).AR(r("uTileSizeAxisXZ"),[o.sizeAxis.x,o.sizeAxis.z]).gR(r("uHeightmapTexture"),s.heightmapDataTexture,1).Pp(t.POINTS,a),!0)))}),n,h,void 0,this.St.ga(),0)}))}))}const x=this.CV;if(i||o||c){const t=h&&a?{wireframeSolid:h,wireframeFillSolid:a}:void 0;s?x.surface={shader:this.OB.uE(Hy["3D"],Hy.SurfaceGrid({axisWorldTranslation:fr(this.ct),fillColor:"uniform",interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Ca.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.OB.gl2?"uint":"ubyte",intensityTextureType:this.OB.nE?"float":"ubyte",heightmapTextureType:this.OB.nE?"float":"ubyte",littleEndian:this.OB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"solid",fillStyleSolid:s},wireframe:t}:r&&"value"===r.getLookUpProperty()?x.surface={shader:this.OB.uE(Hy["3D"],Hy.SurfaceGrid({axisWorldTranslation:fr(this.ct),fillColor:["lookup","value",r.lut],interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Ca.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.OB.gl2?"uint":"ubyte",intensityTextureType:this.OB.nE?"float":"ubyte",heightmapTextureType:this.OB.nE?"float":"ubyte",littleEndian:this.OB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"intensity",fillStylePaletted:r},wireframe:t}:r?x.surface={shader:this.OB.uE(Hy["3D"],Hy.SurfaceGrid({axisWorldTranslation:fr(this.ct),fillColor:["lookup",r.getLookUpProperty(),r.lut],interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Ca.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.OB.gl2?"uint":"ubyte",intensityTextureType:this.OB.nE?"float":"ubyte",heightmapTextureType:this.OB.nE?"float":"ubyte",littleEndian:this.OB.IS_MACHINE_LITTLE_ENDIAN})),fill:{fillMode:"xyz",fillStylePaletted:r},wireframe:t}:l&&(x.surface={shader:this.OB.uE(Hy["3D"],Hy.SurfaceGrid({axisWorldTranslation:fr(this.ct),fillColor:void 0,interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Ca.dataOrder,shadingStyle:d.type,wireframe:l,normalTextureType:this.OB.gl2?"uint":"ubyte",intensityTextureType:this.OB.nE?"float":"ubyte",heightmapTextureType:this.OB.nE?"float":"ubyte",littleEndian:this.OB.IS_MACHINE_LITTLE_ENDIAN})),fill:void 0,wireframe:t})}return x.mousePicking=g?this.CV.mousePicking||{shader:this.OB.uE(Hy["3D"],Hy.MousePicking(),Hy.SurfaceGrid({axisWorldTranslation:fr(this.ct),fillColor:void 0,interpolation:"bilinear"===u&&"bilinear",flipXZ:"rows"===this.Ca.dataOrder,shadingStyle:"simple",wireframe:!1,normalTextureType:this.OB.gl2?"uint":"ubyte",intensityTextureType:this.OB.nE?"float":"ubyte",heightmapTextureType:this.OB.nE?"float":"ubyte",littleEndian:this.OB.IS_MACHINE_LITTLE_ENDIAN}))}:void 0,this.CV=x,this.dY.length=0,this.sl=this.We,this.MG=n,this.Rv.u=!1,this}MY(t){const e=this.pY.gridTiles.map((e=>{const i=bm(this.OB,e.sizeHeatmapDataVectors.secondary,e.sizeHeatmapDataVectors.primary),s=t.gridTiles.find((t=>t.iFirstUniqueVector.primary===e.iFirstUniqueVector.primary&&t.iFirstUniqueVector.secondary===e.iFirstUniqueVector.secondary));if(!s)throw new Error("Internal LC JS error prepare surface data 2D render data not found");return{...e,intensityDataTexture:s.intensityDataTexture,heightmapDataTexture:i,normalmap:void 0,tileData:e}})),i=this.pY.gridTileSizes.map((t=>{const i=e.filter((e=>e.sizeHeatmapDataVectors.primary===t.sizeHeatmapData.primary&&e.sizeHeatmapDataVectors.secondary===t.sizeHeatmapData.secondary));return{...t,tiles:i}})),s=this.OB.cR([0,0,1,0,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,1,0,0]),r=this.OB.gl.TRIANGLES;return{gridTiles:e,gridTileSizes:i,rectangleLocationsBuffer:s,rectangleLocationsDrawLength:6,rectangleLocationsDrawMode:r}}wY(t){var e;if("phong"===this.Rv.T().type)for(let i=0;i<t.gridTiles.length;i+=1){const s=t.gridTiles[i];if(s.normalmapTexture)return;let r;const n=null===(e=this.OB.gl2)||void 0===e?void 0:e.ctx;if(n)r=this.OB.xz(null,n.RGBA_INTEGER,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,n.UNSIGNED_INT,n.RGBA32UI);else{const t=this.OB.gl;r=this.OB.xz(null,t.RGBA,!1,!0,{x:s.normalmapSize.secondary,y:s.normalmapSize.primary},!1,t.UNSIGNED_BYTE)}s.normalmapTexture=r}else t.gridTiles.forEach((t=>{t.normalmapTexture&&(this.OB.GB(t.normalmapTexture),t.normalmapTexture=void 0)}))}Bu(t,e){var i,s,r,n;const o=this.OB.gl,h=this.bY;if(!h)return{};const a=this.Rv.T(),l=this.CV,c=1===t?null===(i=l.mousePicking)||void 0===i?void 0:i.shader:null===(s=l.surface)||void 0===s?void 0:s.shader;if(!c)return{};const u=1!==t?null===(r=l.surface)||void 0===r?void 0:r.wireframe:void 0,d=1!==t?null===(n=l.surface)||void 0===n?void 0:n.fill:void 0;return this.OB.dR(c,((i,s,r,n)=>{let l=!1;if(this.OB.QB(c).Ez(r,this.pY.largestGridTileSize.cells).zR(i("uScale"),this.C$.dD.vR()).zR(i("uDisp"),this.C$.dD.yR()).VR(i("uViewProjectionMatrix"),this.R$).pR(i("uIsHighlighted"),1===t||2===t?0:this.xt).xF(i("uHighlightColorOffset"),1===t||2===t?k:this._t).pR(i("uRenderEffectMask"),2===t?1:0),1!==t&&("phong"===a.type&&this.OB.zR(i("uCameraLoc"),this.z$).zR(i("uLightLoc"),this.O$).pR(i("uAmbientReflection"),a.ambientReflection).pR(i("uSpecularReflection"),a.specularReflection).pR(i("uDiffuseReflection"),a.diffuseReflection).pR(i("uShininess"),a.shininess).xF(i("uLightColor"),a.specularColor).xF(i("uAmbientColor"),a.ambientColor),u)){const{wireframeFillSolid:t,wireframeSolid:e}=u,s=e.getThickness()<0?1:e.getThickness();this.OB.xF(i("uWireframeColor"),t.getColor()).pR(i("uWireframeThickness"),s)}return 1===t||"solid"===(null==d?void 0:d.fillMode)&&this.OB.xF(i("uColorDiffuse"),d.fillStyleSolid.getColor()),h.gridTileSizes.forEach((n=>{this.OB.AR(i("uTileDimensionsXZ"),["columns"===this.Ca.dataOrder?n.sizeHeatmapData.primary:n.sizeHeatmapData.secondary,"columns"===this.Ca.dataOrder?n.sizeHeatmapData.secondary:n.sizeHeatmapData.primary]).RR(i("uTileDimensions"),[n.sizeHeatmapData.primary,n.sizeHeatmapData.secondary]),n.tiles.forEach((a=>{var c;const f=null===(c=this.TG)||void 0===c?void 0:c.tilesInfo.get(a.tileData);if(!f)return;let y=0,p=(a.sizeHeatmapDataVectors.primary-1)*(a.sizeHeatmapDataVectors.secondary-1);if(this.xY){const t=this.xY.fill.iFirstPrimary,e=this.xY.fill.iFirstPrimary+this.xY.fill.amountPrimary-1,i=a.iFirstVector.primary,s=a.iFirstVector.primary+a.sizeHeatmapDataVectors.primary-1;if(i>e||s<t)return;const r=((t,e,i,s)=>g(Math.max(t,i),Math.min(e,s)))(t,e,i,s);y=(r.min-a.iFirstVector.primary)*(n.sizeGeometryData.secondary-1),p=(r.max-r.min)*(n.sizeGeometryData.secondary-1)}if(!(y<0||p<=0)){if("intensity"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,e=this.Hb.hc;this.OB.Uz(r,t.lut,e).gR(i("uTileIntensityValues"),a.intensityDataTexture,2).bR(i("uTileBoundsAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z,f.sizeAxis.x,f.sizeAxis.z])}if("xyz"===(null==d?void 0:d.fillMode)){const{fillStylePaletted:t}=d,e="x"===t.getLookUpProperty()?{min:this.jt(),max:this.Zt()}:"y"===t.getLookUpProperty()?{min:this.Qt(),max:this.Jt()}:"z"===t.getLookUpProperty()?{min:this.ge(),max:this.pe()}:void 0;if(!e&&t.lut.percentageValues)return;this.OB.Uz(r,t.lut,e)}1!==t&&"phong"===this.Rv.T().type&&a.normalmapTexture&&this.OB.gR(i("uNormalmapTexture"),a.normalmapTexture,3),1===t&&this.OB.NR(i("uFirstId"),e+y),this.OB.fR(h.rectangleLocationsBuffer,0,{location:s("aGeoCellOffset"),size:2},{location:u?s("aTriangleBary"):void 0,size:3}).NR(i("uBaseInstance"),y).AR(i("uTileStartLocationAxisXZ"),[f.startLocationAxis.x,f.startLocationAxis.z]).AR(i("uTileSizeAxisXZ"),[f.sizeAxis.x,f.sizeAxis.z]).gR(i("uHeightmapTexture"),a.heightmapDataTexture,0).ez(h.rectangleLocationsDrawMode,0,h.rectangleLocationsDrawLength,p),l=!0,o.bindBuffer(o.ARRAY_BUFFER,null)}}))})),l})),{idCount:this.Ca.columns*this.Ca.rows}}Ft(){return this.Hb.Ft()}dispose(){return super.dispose(),this.Hb.dispose(),this.bY&&(this.bY.gridTileSizes.forEach((t=>{})),this.bY.gridTiles.forEach((t=>{this.OB.GB(t.heightmapDataTexture),t.normalmapTexture&&this.OB.GB(t.normalmapTexture)})),this.OB.wR(this.bY.rectangleLocationsBuffer),this.bY=void 0),this.CV={},this}Du(){return this.dispose(),this.Hb.Du(),this}sm(t){return this.Hb.sm(t),this}hm(t){this.dY.push(t),Am(this.pY.gridTiles,t,(t=>t.heightmapData));for(let e=t.startPrimary;e<t.startPrimary+t.lengthPrimary;e+=1)this.gY[e]=void 0;return this.fY=void 0,this}tm(t){return this.vG.C(t),this}im(){return this.vG.T()}Je(t){return this.We=fo(this.We,t),this.Hb.Je(this.We),this}pr(){return this.We}jy(t){return this.Wy="function"==typeof t?t(this.Wy):t,this}qy(){return this.Wy}Zt(){var t;return(null===(t=this.TG)||void 0===t?void 0:t.SY.max.x)||0}jt(){var t;return(null===(t=this.TG)||void 0===t?void 0:t.SY.min.x)||0}Jt(){const t=this.fY||this._Y();return this.fY=t,t.max}Qt(){const t=this.fY||this._Y();return this.fY=t,t.min}pe(){var t;return(null===(t=this.TG)||void 0===t?void 0:t.SY.max.z)||0}ge(){var t;return(null===(t=this.TG)||void 0===t?void 0:t.SY.min.z)||0}Cc(){return 0}kc(){return 0}Yv(){return 0}_Y(){if(this.fY)return this.fY;const t=this.xY?this.xY.fill.iFirstPrimary:0,e=this.xY?t+this.xY.fill.amountPrimary-1:this.Ca.primaryDimensionVectorsCount-1;let i=hi,s=ai;return this.pY.gridTiles.forEach((r=>{for(let n=Math.max(t,r.iFirstUniqueVector.primary);n<=Math.min(e,r.iFirstUniqueVector.primary+r.sizeUniqueHeatmapDataVectors.primary-1);n+=1){const t=(n-r.iFirstUniqueVector.primary)*r.sizeHeatmapDataVectors.secondary;let e=this.gY[n];if(e)i=i<e.min?i:e.min,s=s>e.max?s:e.max;else{e={min:hi,max:ai},this.gY[n]=e;for(let n=0;n<r.sizeHeatmapDataVectors.secondary;n+=1){const o=r.heightmapData[t+n];i=i<o?i:o,s=s>o?s:o,e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}}}})),this.fY={min:i,max:s},this.fY}}class ux extends Jm{constructor(t,e,i,s){super(t,e,i),this._$="disabled",this.IG=0,this.LG={},this.CY=new Map,this.Wi={x:0,z:0},this.qM={x:1,z:1},this.Ca={...s,scrollDimensionSize:"columns"===s.scrollDimension?s.columns:s.rows,staticDimensionSize:"columns"===s.scrollDimension?s.rows:s.columns},this.SY={min:{x:this.Wi.x,z:this.Wi.z},max:{x:"rows"===s.scrollDimension?this.Wi.x+(s.columns-1)*this.qM.x:this.Wi.x,z:"columns"===s.scrollDimension?this.Wi.z+(s.rows-1)*this.qM.z:this.Wi.z}};const r=()=>({shape:new cx(this.C$,qt,this.Mt,{columns:s.columns+("columns"===s.scrollDimension?1:0),rows:s.rows+("rows"===s.scrollDimension?1:0),dataOrder:s.scrollDimension,heatmapDataType:"intensity"}).setVisible(!1),hasData:!1});this.xb=[r(),r()]}Dr(t){this.xb.forEach((e=>{e.shape.Dr(t)}));const e=this.xb.reduce(((t,e)=>{var i,s;return t.min=Math.min(t.min,ee(null===(i=e.shape.Hb.hc)||void 0===i?void 0:i.min,hi)),t.max=Math.max(t.max,ee(null===(s=e.shape.Hb.hc)||void 0===s?void 0:s.max,ai)),t}),{min:hi,max:ai}),i=this.xb.reduce(((t,e)=>{var i,s;return t.min=Math.min(t.min,ee(null===(i=e.shape.fY)||void 0===i?void 0:i.min,hi)),t.max=Math.max(t.max,ee(null===(s=e.shape.fY)||void 0===s?void 0:s.max,ai)),t}),{min:hi,max:ai});return this.xb.forEach((t=>{t.shape.Hb.hc=e,t.shape.fY=i})),this}Bu(t,e){let i=0,s=e;return this.xb.forEach((e=>{if(!e.hasData)return;e.shape.R$=this.R$,e.shape.z$=this.z$,e.shape.O$=this.O$;const{idCount:r}=e.shape.Bu(t,s);void 0!==r&&(1===t&&this.CY.set(e,{idFirst:s,idCount:r}),i+=r,s+=r)})),{idCount:i}}Eu(t,e,i,s,r){const n=Array.from(this.CY).find((e=>xi(t,e[1].idFirst,e[1].idFirst+e[1].idCount-1)));return n?n[0].shape.Eu(t,n[1].idFirst,n[1].idCount,s,r):{}}Jy(t,e){return this.Wi=t,this.qM=e,this.xb.forEach((t=>{t.shape.Jy("columns"===this.Ca.scrollDimension?{x:t.shape.Ky().start.x,z:this.Wi.z}:{x:this.Wi.x,z:t.shape.Ky().start.z},this.qM)})),"columns"===this.Ca.scrollDimension?(this.SY.min.z=t.z,this.SY.max.z=this.Wi.z+(this.Ca.rows-1)*this.qM.z):(this.SY.min.x=t.x,this.SY.max.x=this.Wi.x+(this.Ca.columns-1)*this.qM.x),this}Ky(){return{start:this.Wi,step:this.qM}}ii(){return this.IG=0,this.LG={},this.SY={min:{x:this.Wi.x,z:this.Wi.z},max:{x:"rows"===this.Ca.scrollDimension?this.Wi.x+(this.Ca.columns-1)*this.qM.x:this.Wi.x,z:"columns"===this.Ca.scrollDimension?this.Wi.z+(this.Ca.rows-1)*this.qM.z:this.Wi.z}},this.xb.forEach((t=>{t.shape.setVisible(!1),t.shape.AY=!1,t.hasData=!1})),this}am(t){var e;const i=this.xb[0],s=this.xb[1],r=t.heightMapValues?t.heightMapValues.length:null===(e=t.intensityValues)||void 0===e?void 0:e.length;let n=0;if(!r)return this;do{const e=Math.floor(this.IG/this.Ca.scrollDimensionSize)%this.xb.length,o=this.xb[e],h=this.IG%this.Ca.scrollDimensionSize,a=this.Ca.scrollDimensionSize-h,l=0===h,c=Math.min(a,r),u=h+c,d=h,f=d+1,g=n,y=n+c,p=this.IG>=this.Ca.scrollDimensionSize&&u<=this.Ca.scrollDimensionSize-1,m=l;l&&(o.shape.Jy("columns"===this.Ca.scrollDimension?{x:this.Wi.x+(this.IG-1)*this.qM.x,z:this.Wi.z}:{x:this.Wi.x,z:this.Wi.z+(this.IG-1)*this.qM.z},this.qM),o.shape.setVisible(!0));const x=p?0:1,S=u+(p?1:0);o.shape.mY({fill:{iFirstPrimary:x,amountPrimary:S},wireframe:{iFirstPrimary:x,amountPrimary:S,connectNext:!1}});const v=o===i?s:i,A=u+1,b=1+this.Ca.scrollDimensionSize-A;v.shape.mY({fill:{iFirstPrimary:A,amountPrimary:b},wireframe:{iFirstPrimary:A,amountPrimary:b-1,connectNext:!0}});const C={};if(t.heightMapValues){const e=t.heightMapValues.slice(g,y);let i=!1;m&&this.LG.yValues&&(i=!0,e.splice(0,0,this.LG.yValues));const s={startPrimary:i?d:f,startSecondary:0,lengthPrimary:e.length,lengthSecondary:this.Ca.staticDimensionSize,values:e,type:"y"};o.shape.hm(s),o.hasData=!0,C.yValues=e[c-1]}if(t.intensityValues){const e=t.intensityValues.slice(g,y);let i=!1;m&&this.LG.intensityValues&&(i=!0,e.splice(0,0,this.LG.intensityValues));const s={startPrimary:i?d:f,startSecondary:0,lengthPrimary:e.length,lengthSecondary:this.Ca.staticDimensionSize,values:e,type:"intensity"};o.shape.sm(s),o.hasData=!0,C.intensityValues=e[c-1]}this.IG+=c,n+=c,this.LG=C}while(n<r);return"columns"===this.Ca.scrollDimension?(this.SY.min.x=this.Wi.x+Math.max(this.IG-this.Ca.scrollDimensionSize,0)*this.qM.x,this.SY.max.x=this.Wi.x+(this.IG-1)*this.qM.x):(this.SY.min.z=this.Wi.z+Math.max(this.IG-this.Ca.scrollDimensionSize,0)*this.qM.z,this.SY.max.z=this.Wi.z+(this.IG-1)*this.qM.z),this}sm(t){var e;const{iSample:i,yValues:s,intensityValues:r}=t,n=s||r;if(!n)return this;const o=i,h=i+n.length-1,a=n[0].length;this.xb.forEach(((t,e)=>{const i=Math.floor(this.IG/this.Ca.scrollDimensionSize)%this.xb.length,n=this.IG%this.Ca.scrollDimensionSize;let l,c;if(e===i?0===n?(c=-1,l=-1):(c=this.IG-1,l=c-n+1):(c=this.IG-n-1,l=c-this.Ca.scrollDimensionSize+1),h<l||o>c)return;const u=Math.max(o,l),d=Math.min(h,c),f=d-u+1,g=r&&r.slice(u-o,d-o+1),y=s&&s.slice(u-o,d-o+1),p=g&&{type:"intensity",startSecondary:0,lengthSecondary:a,startPrimary:u+1,lengthPrimary:f,values:g},m=y&&{type:"y",startSecondary:0,lengthSecondary:a,startPrimary:u+1,lengthPrimary:f,values:y};p&&t.shape.sm(p),m&&t.shape.hm(m),d===this.IG-1&&(this.LG={yValues:y?y[y.length-1]:void 0,intensityValues:g?g[g.length-1]:void 0})}));const l=this.IG-1;if(h>l){const t=h-l,i=s&&s.slice(-t),n=r&&r.slice(-t),o=i?i.length:null!==(e=null==n?void 0:n.length)&&void 0!==e?e:0;if(o<t){const e=this.LG||new Array(a).fill(0);for(let s=o;s<t;s+=1)i&&e.yValues&&i.unshift(e.yValues),n&&e.intensityValues&&n.unshift(e.intensityValues)}this.am({heightMapValues:i,intensityValues:n,lengthPrimary:o,lengthSecondary:a})}return this}lm(){return this.IG}tm(t){return this.xb.forEach((e=>e.shape.tm(t))),this}im(){return this.xb[0].shape.im()}Je(t){return this.xb.forEach((e=>e.shape.Je(t))),this}pr(){return this.xb[0].shape.pr()}jy(t){return this.xb.forEach((e=>e.shape.jy(t))),this}qy(){return this.xb[0].shape.qy()}Du(){return this.dispose(),this.xb.forEach((t=>t.shape.Du())),this}dispose(){return super.dispose(),this.xb.forEach((t=>t.shape.dispose())),this}setVisible(t){return super.setVisible(t),this.xb.forEach((e=>e.shape.setVisible(t&&e.hasData))),this}Gv(t){return super.Gv(t),this.xb.forEach((e=>e.shape.Gv(t))),this}Zt(){return this.SY.max.x}jt(){return this.SY.min.x}Jt(){return Math.max(this.xb[0].shape.Jt(),this.xb[1].shape.Jt())}Qt(){return Math.min(this.xb[0].shape.Qt(),this.xb[1].shape.Qt())}pe(){return this.SY.max.z}ge(){return this.SY.min.z}Cc(){return 0}kc(){return 0}Yv(){return 0}Dt(t){return super.Dt(t),this.xb.forEach((e=>e.shape.Dt(t))),this}}class dx extends zm{constructor(t,e,i,s){super(t,e,i),this.z$=d(0,0,1),this.kY=d(0,0,-1),this.TY=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],this.Rv=new Vs,this.ct=s}jm(){const{cellIndex:t,cellSpan:e,cellsAmount:i}=this.ct,s=e.x/i.x,r=e.y/i.y,n=t.x/i.x,o=t.y/i.y,h=this.St.Mi();return{x:n*h.x,y:o*h.y,width:s*h.x,height:r*h.y}}setCameraLocation(t){return this.z$=t,this}getCameraLocation(){return this.z$}setCameraDirection(t){return this.kY=oi.normalize(t),this}getCameraDirection(){return this.kY}setLightLocation(t){return this.O$=t,this}getLightLocation(){return this.O$}FY(){return d(this.TY[0],this.TY[1],this.TY[2])}IY(){return d(this.TY[4],this.TY[5],this.TY[6])}}class fx extends dx{constructor(t,e,i,s){super(t,e,i,s),this.dD=new Dp,this.PY=!0,this.LY=()=>{this.PY=!0},this.BY="perspective",this.AO=t,this.gl=t.pO(),this.m$=this.Vt,this.St.V("resize",this.LY),s.addEventListener("cellresize",this.LY)}aR(t){const e=t.jt(),i=t.Qt(),s=t.ge(),r=t.Zt(),n=t.Jt(),o=t.pe();if(e===hi||r===ai||i===hi||n===ai||s===hi||o===ai)return li;const h=t.Cc(),a=t.kc(),l=t.Yv(),c=Math.abs(t.Hs.xv(h)*t.ct.x.it()),u=Math.abs(t.Hs.xv(a)*t.ct.y.it()),d=Math.abs(t.Hs.xv(l)*t.ct.z.it()),f=e-c,g=r+c,y=i-u,p=n+u,m=s-d,x=o+d;let S;return[{x:f,y,z:m},{x:g,y,z:m},{x:f,y:p,z:m},{x:g,y:p,z:m},{x:f,y,z:x},{x:g,y,z:x},{x:f,y:p,z:x},{x:g,y:p,z:x}].map((e=>t.Hs.bv(e))).forEach((t=>{if(!t)return;const e={min:t,max:t};S=S?Ti(S,{min:t,max:t}):e})),S||li}bv(t){if(this.DY(),this.EY(),!this.R$)return;const e=this.dD.yR(),i=d(e[0],e[1],e[2]),s=this.dD.vR(),r=d(s[0],s[1],s[2]),n=oi.divideVec(oi.subtractVec(t,i),r),o=this.R$,h=bp.multiply(o,[n.x,n.y,n.z,1]),a=l(h[0]/h[3],h[1]/h[3]),c=this.St.Mi();return{x:.5*(1+a.x)*c.x,y:.5*(1+a.y)*c.y}}_x(t){const e=this.dD.yR(),i=this.dD.vR(),s=oi.divideVec(oi.subtractVec(t,{x:e[0],y:e[1],z:e[2]}),{x:i[0],y:i[1],z:i[2]});return{...t,x:s.x,y:s.y,z:s.z}}Cx(t){const e=this.dD.yR(),i=this.dD.vR(),s=oi.addVec(oi.multiplyVec(t,{x:i[0],y:i[1],z:i[2]}),{x:e[0],y:e[1],z:e[2]});return{...t,x:s.x,y:s.y,z:s.z}}xv(t){return t/1e3}W$(){return.001}Dr(){const t=this.z$,e=this.O$,i=this.ct.x.u||this.ct.y.u||this.ct.z.u;if(!e)throw _e(0,(()=>ze()));const{viewProjectionMatrix:s}=this.DY();this.EY();const r=[t.x,t.y,t.z],n=[e.x,e.y,e.z];return this.Vt.forEach((t=>{t.R$=s,t.z$=r,t.O$=n,t.Dr(i)})),this}Mx(t){this.BY!==t&&(this.BY=t,this.PY=!0)}wx(){return this.BY}DY(){if(!this.PY&&this.R$)return{viewProjectionMatrix:this.R$};const t=this.jm(),e=t.width/t.height;if("perspective"===this.BY)this.RY=bp.projectionPerspective(45,e,.1,100);else{let t,i;const s=.5*oi.length(this.z$);e>1?(t=s,i=t/e):(i=s,t=i*e),this.RY=bp.projectionOrthographic(-t,t,-i,i,-400,100)}const i=this.z$;this.TY[12]=i.x,this.TY[13]=i.y,this.TY[14]=i.z;const s=this.kY,r=d(0,1,0),n=oi.multiply(s,-1),o=oi.normalize(oi.cross(r,n)),h=oi.normalize(oi.cross(n,o));this.TY[0]=o.x,this.TY[1]=o.y,this.TY[2]=o.z,this.TY[4]=h.x,this.TY[5]=h.y,this.TY[6]=h.z,this.TY[8]=n.x,this.TY[9]=n.y,this.TY[10]=n.z,this.zY=bp.inverse(this.TY);const{cellIndex:a,cellSpan:l,cellsAmount:c}=this.ct,u=l.x/c.x,f=l.y/c.y,g=(a.x+l.x/2)/c.x,y=(a.y+l.y/2)/c.y,p=bp.multiply(bp.translation(Rs(-1,1,g),Rs(-1,1,y),0),bp.scaling(u,f,1));return this.R$=bp.multiply(p,bp.multiply(this.RY,this.zY)),this.OY=bp.inverse(this.R$),this.PY=!1,{viewProjectionMatrix:this.R$}}EY(){this.dD.oO(this.ct.x),this.dD.aO(this.ct.y),this.dD.lO(this.ct.z)}Bu(t,e,i){var s;const r=this.gl.QE(),n=this.jm(),o={x:n.x*r*e,y:n.y*r*e,width:n.width*r*e,height:n.height*r*e};this.gl.lR(o.x,o.y,o.width,o.height);let h=((null===(s=i[i.length-1])||void 0===s?void 0:s.idLast)||0)+1;const a=Array.from(this.m$.values());for(let e=0;e<a.length;e+=1){const s=a[e];if(s.getVisible())if(this.gl.sR(s._$),this.gl.Uv(s.Vv),1!==t)s.Bu(t,0);else if(1===t&&s.getPointerEvents()){const{idCount:r}=s.Bu(t,h);void 0!==r&&(i.push({entity:s,layer:this,entityIndex:e,idFirst:h,idCount:r,idLast:h+r-1}),h+=r)}}return this.gl.sR("disabled"),this.gl.Uv(!1),this.gl.eR(!1),this}setCameraLocation(t){return this.z$.x===t.x&&this.z$.y===t.y&&this.z$.z===t.z||(this.PY=!0),super.setCameraLocation(t),this}setCameraDirection(t){return this.kY.x===t.x&&this.kY.y===t.y&&this.kY.z===t.z||(this.PY=!0),super.setCameraDirection(t),this}U(){super.U(),this.St.G("resize",this.LY),this.ct.removeEventListener("cellresize",this.LY)}sy(t){return this.XU(new ax(this,this.WU,[],t))}Op(t){return this.XU(new rx(this,this.WU,t))}jv(){return this.XU(new Zm(this,this.WU,[]))}bm(){return this.XU(new hx(this,this.WU,[]))}CA(){return this.XU(new ex(this,this.WU,[]))}Zy(t){return this.XU(new cx(this,this.WU,[],t))}om(t){return this.XU(new ux(this,this.WU,[],t))}}class gx{constructor(t,e){this.VY=[],this.NY=[],this.GY=(t,e)=>{const i=this.VY.find((e=>e.Cu===t));i&&("pointerenter"!==e.type&&"pointermove"!==e.type||this.St.Ba(i,!0,e.timeStamp),"pointerleave"===e.type&&this.St.Ba(i,!1,e.timeStamp))},this.St=t,this.Iu="init"in e?e.init({engine:t.QA,handleEvent:this.GY}):e,this.UY=0,this.$Y=String(Math.round(1e6*Math.random()))}mn(t,e,i,s){const r=new Fo(t,e,i,s,`${this.$Y}-${this.UY}`);return this.VY.push(r),r.addEventListener("dispose",(()=>{var t;const e=this.VY.indexOf(r);e>=0&&this.VY.splice(e,1),(null===(t=this.St.Da)||void 0===t?void 0:t.entity)===r&&this.St.Ba(void 0,!1,Wt.performance.now())})),this.UY+=1,r}Yo(){const t=this.VY.filter((t=>t.getVisible()&&t.Jr().length>0&&X(t.We))).map((t=>t.ku())),e=this.NY;this.Iu.update({textList:t,engine:this.St.QA,obstructingOverlays:e}),this.NY.length=0}U(){const t=this.VY.filter((t=>t.getVisible()&&t.Jr().length>0&&X(t.We))).map((t=>t.ku()));this.Iu.dispose&&this.Iu.dispose({textList:t,engine:this.St.QA})}FA(t){this.NY.push(t)}}class yx extends ro{constructor(t,e,i,s=Ip){if(super(t,e,i),this.H=c(1,1),this.YY=!1,this.HY=0,this.WY=!0,this.jY=0,this.X$=8388608,this.QD=[null,null],this.ZY=null,this.QY=null,this.JY=0,this.UA=!1,this.KY=0,this.Bs=(t=!1)=>(this.ft||this.ra||sp(this.OB.gl)||(t&&(this.YY=!0),this.qo=!0,this.qY||this.jo.cE(t)),this),this.qY=!1,this.gE=t=>{if(this.ft||this.ra)return;const e=t-this.HY;if(e>=this.La||-1===this.La){this.qY=!0,this.HY=t,this.YY=!1;const i=e>50?1e3/60:e;this.ta&&this.ta(i),this.Ms.Dr(e),this.va(),this.ya(),this.qo=!1,-1!==this.La&&this.YY&&(this.jo.cE(this.YY),this.qo=!0),this.ia&&this.ia(),this.qY=!1,this.R.O("renderframe",{}),this.qo&&this.Bs(this.YY)}else this.qo=!0,this.jo.cE()},this.tH=new Map,this.pO=()=>this.OB,this.iH=()=>{var t,e;const i=this.ba(),s=this.WY,r=Wt.performance.now(),n=null===(t=this.sH)||void 0===t?void 0:t.eH.reduce(((t,e)=>t?e.hH&&t.hH&&e.hH>t.hH?e:t:e),void 0),o=null==n?void 0:n.hH,h=null===(e=this.la)||void 0===e?void 0:e.timeStamp,a=this.rH;return s?(this.Bs(!0),!1):void 0===n||(void 0===n||!n.nH)&&(void 0!==o&&void 0===i?r-o>=1e3:!(void 0!==o&&void 0!==h&&r-h>=2e3&&(void 0===a||r-a>=2e3))||r-o>=1e3)},this.oH=()=>{var t,e;this.aH=void 0;const i=null===(e=null===(t=this.sH)||void 0===t?void 0:t.lH)||void 0===e?void 0:e.cH;void 0===i||i>=this.jY||this.uH()},this.ya=()=>{if(this.ft||this.ra)return this;const t=this.OB.gl,e=Wt.performance.now();this.OB.nR(t.FRAMEBUFFER,this.jo.hE?this.QD[0]:null);const i=this.H,s=i.x>0&&i.y>0,r=this.OB.QE();if(this.Aa.u&&this.OB.nz(this.Aa.T()),this.jo.sE&&this.HD&&(this.HD.canvas.width=i.x*r,this.HD.canvas.height=i.y*r),t.resize&&s&&t.resize(i.x*r,i.y*r),this.OB.oR(0,0,i.x*r,i.y*r),this.OB.lR(0,0,i.x*r,i.y*r),this.OB.ii(),s)for(const t of this.Qo.values())t.Bu(0,1,[]);if(this.Fu&&this.Fu.Yo(),this.Ca.Fa&&s&&(this.aH&&(Wt.clearTimeout(this.aH),this.aH=void 0),this.iH()?(this.uH(),this.OB.nR(t.FRAMEBUFFER,this.jo.hE?this.QD[0]:null)):this.aH=Wt.setTimeout(this.oH,500)),this.X(),this.Xo(),Array.from(this.oa.values()).forEach((t=>{t.lastEvent.isLcjsArtificialEvent=!0,this.aa("pointermove",t.lastEvent)})),this.jo.hE){const e=this.OB.gl2.ctx;e.bindFramebuffer(e.READ_FRAMEBUFFER,this.QD[0]),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.QD[1]),e.clearBufferfv(e.COLOR,0,[1,1,1,1]),e.blitFramebuffer(0,0,this.H.x*r,this.H.y*r,0,0,this.H.x*r,this.H.y*r,t.COLOR_BUFFER_BIT,t.LINEAR)}else t.bindTexture(t.TEXTURE_2D,this.YD),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,0,0,this.H.x*r,this.H.y*r,0),t.bindTexture(t.TEXTURE_2D,null);return this.OB.nR(t.FRAMEBUFFER,null),sp(this.OB.gl)?this.jo.UD(0,0,this.H.x*r,this.H.y*r,[this]):this.jo.cE(),this.WY=!1,this.jY=e,this},this.va=()=>{if("use-window"===this.dH.mode){const t=Wt.devicePixelRatio||1;this.OB.mz(t)}const t=this.H;if(0===t.x||0===t.y)return this;this.Ga.J(t);for(const t of this.Qo.values())t.Dr();return this.X(),this},this.jo=t,this.jo.sE){this.fH=Wt.document.createElement("canvas"),this.fH.style.width="100%",this.fH.style.height="100%",this.fH.style.display="block",this.fH.style.boxSizing="content-box",this.fH.style.position="absolute";const t=this.fH.getContext("2d",{willReadFrequently:!1,alpha:!0,desynchronized:!1});if(!t)throw new _t("No Canvas context available.");this.HD=t,this.Pn.appendChild(this.fH)}this.jo.yE(this);const r={preserveDrawingBuffer:!0,antialias:e?e.antialias:void 0,alpha:!0,lineAntialias:!e||(!0===e.lineAntiAlias||!1===e.lineAntiAlias?e.lineAntiAlias:!1!==e.antialias)};let n;if(this.jo.hE&&t.gl2&&(n=new s(this,this.Ca,{type:"webgl2",ctx:t.gl2.ctx,antialias:r.antialias,lineAntialias:r.lineAntialias},this.Ct.isDark)),n||this.jo.hE||(n=new s(this,this.Ca,{type:"webgl1",ctx:t.gl,antialias:r.antialias,lineAntialias:r.lineAntialias},this.Ct.isDark)),!n)throw new _t("No WebGL context available");if(this.OB=n,"number"==typeof(null==e?void 0:e.devicePixelRatio))this.dH={mode:"fixed",value:e.devicePixelRatio},this.OB.mz(e.devicePixelRatio);else{const t=Wt.document.head.querySelector('meta[name="viewport"]'),i=!0===e.devicePixelRatio||(null==t?void 0:t.content.includes("width=device-width")),s=Wt.devicePixelRatio||1;this.dH=i?{mode:"use-window"}:{mode:"fixed",value:s},this.OB.mz(s)}const o=e?e.width:void 0,h=e?e.height:void 0;this.Oa=this.AH(o),this.Na=this.AH(h),this.gH(this.Oa,this.Na),this.BG=this.Kk("engine offscreen",1e6),this.pH=this.Kk("engine bg",0);const a="function"==typeof this.Ct.lcjsBackgroundFillStyle?Yt({resourcesBaseUrl:this.Ca.ve,styleFactory:this.Ct.lcjsBackgroundFillStyle,apply:t=>this.setBackgroundFillStyle(t)}):this.Ct.lcjsBackgroundFillStyle;this.Ga=this.pH.Ke(this.ct).Je(a).Qe(this.Ct.lcjsBackgroundStrokeStyle).setPointerEvents(!1).th({x:0,y:0});const l=this.Kk("engine effects",200001).x$(this.Ct.effect);this.vs=l;const u=this.jo.hE,d=this.Mi();u&&(this.QD=[n.kR(),n.kR()]);const f=this.OB.gl;u&&(this.ZY=f.createRenderbuffer(),this.QY=f.createRenderbuffer()),this.YD=f.createTexture();const g=d.x*this.OB.QE(),y=d.y*this.OB.QE();if(u){f.bindRenderbuffer(f.RENDERBUFFER,this.ZY);const t=this.OB.gl2.ctx;this.JY=this.jo.ED&&!1!==e.antialias?t.getParameter(t.MAX_SAMPLES):0,t.renderbufferStorageMultisample(t.RENDERBUFFER,this.JY,t.RGBA8,g,y),f.bindRenderbuffer(f.RENDERBUFFER,this.QY),t.renderbufferStorageMultisample(t.RENDERBUFFER,this.JY,t.DEPTH24_STENCIL8,g,y)}u&&(this.OB.nR(f.FRAMEBUFFER,this.QD[0]),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.RENDERBUFFER,this.ZY),f.framebufferRenderbuffer(f.FRAMEBUFFER,f.DEPTH_STENCIL_ATTACHMENT,f.RENDERBUFFER,this.QY)),f.bindTexture(f.TEXTURE_2D,this.YD),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,g,y,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),u&&(this.OB.nR(f.FRAMEBUFFER,this.QD[1]),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,this.YD,0)),this.OB.nR(f.FRAMEBUFFER,null),this.da(),this.Xo(),this.QA=Zn(this),this.Lu={Ct:this.Ct,Ms:this.Ms,ct:this.ct,Bs:t=>this.Bs(t),K_:()=>this.qo,ba:()=>this.ba(),Ps:t=>(this.rH=Wt.performance.now(),this.Ps({x:t.clientX,y:t.clientY})),TL:t=>this.TL(t),Ca:this.Ca,Ma:t=>this.Ma(t),vs:this.vs,Wa:t=>this.Wa(t),ja:t=>this.ja(t),Kh:{Ch:(t,e,i)=>{const s=this.OB.mr(e.family).KB(t,e,i,this.Ct.isDark);return this.Fu?{x:s.x,y:s.y,isEstimate:!1}:s}},Ns:()=>this.oa.size>0,Gs:(t,e)=>void 0!==Array.from(this.oa.values()).find((i=>!(void 0!==t&&i.entity!==t||void 0!==e&&e!==i.collectionMember)))},e.textRenderer&&(this.Fu=new gx(this,e.textRenderer));const p=()=>{this.U()};Wt.addEventListener("unload",p),this.sa.push((()=>{Wt.removeEventListener("unload",p)}))}get vH(){return this.Qo}Zo(t,e){let i=this.tH.get(t);if(!i){const e=this.OB.Cz(t),s=new Set,r=t=>{s.add(t)},n=i=>{s.delete(i)&&0===s.size&&(e.unbindResources(),this.tH.delete(t))},o=[];i={imageTexture:e,instances:s,handleNewInstance:r,handleInstanceDisposed:n,sharedEngineReference:{FL:()=>e.zE,IL:t=>{e.zE?t():o.push(t)}}},this.tH.set(t,i),e.QB(this),e.YE((()=>{o.forEach((t=>{t()})),o.length=0}))}const s=new ar(t,i.handleNewInstance,i.handleInstanceDisposed,e);return i.handleNewInstance(s),s}TL(t){const e=Array.from(this.tH.values()).find((e=>e.instances.has(t)));if(!e)throw _e(0,(()=>new Error("LightningChart JS error, attempted to use Icon that is disposed. Please check that you are not disposing an Icon that is still in use, or attempting to use a previously disposed Icon!")));return e.sharedEngineReference}Ps(t){var e;if(this.Da&&this.Da.entity.getPointerEvents()){if(this.Da.pointed||!(Wt.performance.now()-this.Da.timestamp>=50))return{entity:this.Da.entity,collectionMember:void 0,info:void 0};this.Da=void 0}const i=null===(e=this.sH)||void 0===e?void 0:e.lH;if(!i)return;(!this.ua||Wt.performance.now()-this.ua>100)&&this.Xo();const s=this.sh(t.x,t.y),r=Math.round(s.x*this.OB.QE()),n=Math.round(s.y*this.OB.QE());return[[-1,-1],[-1,0],[-1,1],[0,1],[1,1],[1,0],[1,-1],[0,-1],[0,0]].map((t=>this.yH(i,r+t[0]/i.mH,n+t[1]/i.mH))).reduce(((t,e)=>{if(void 0===e)return t||void 0;const i=1e6*e.layerIndex+e.entityIndex;return!t||i>t.zIndexForComparison?{zIndexForComparison:i,entity:e.entity,collectionMember:e.collectionMember,info:e.info}:t}),void 0)}yH(t,e,i){const s=Math.round(e*t.mH),r=Math.round(i*t.mH);if(s<0||s>=t.H.x||r<0||r>=t.H.y)return;const n=4*(s+r*t.H.x),o=t.xH[n+0],h=t.xH[n+1],a=t.xH[n+2],l=t.xH[n+3];if(void 0===o||void 0===h||void 0===a||void 0===l)return;if(0===o&&0===h&&0===a&&0===l)return;const c=16777216*o+65536*h+256*a+l,u=t.SH.find((t=>c>=t.idFirst&&c<=t.idLast));if(!u)return;const{collectionMember:d,info:f}=u.entity.Eu(c,u.idFirst,u.idCount,e,i);return{entity:u.entity,collectionMember:d,entityIndex:u.entityIndex,layerIndex:u.layer.xa(),info:f}}$o(t,e,i){const s=this.OB.gl;let r,n=!this.jo.hE;if(this.Fu){const t=this.Fu;this.Fu=void 0;const e=[],i=[];this.Qo.forEach((t=>{t.Vt.forEach((t=>{t.getVisible()&&t instanceof Fo&&i.push(t)}))})),i.forEach((t=>{const i=t.Hs.mn(t.ct);e.push(i),i.th(t.Ll()).jr(t.Jr()).Sr(t.mr()).Je(t.pr()).Ul(t.Vl()).vn(t.$l()).yn(t.Yl()).br(t.Mr()).Wr(t.Dl()).Ka(t.qa()).setPointerEvents(!1)})),r={ctr:t,temporaryWebglTextObjects:e},n=!0}n&&(this.va(),this.ya()),this.jo.hE?(this.OB.nR(s.FRAMEBUFFER,this.QD[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.YD,0)):this.OB.nR(s.FRAMEBUFFER,null);const o=this.$D(),h=o.x,a=o.y,l=new Uint8Array(h*a*4);s.readPixels(0,0,h,a,s.RGBA,s.UNSIGNED_BYTE,l),r&&(r.temporaryWebglTextObjects.forEach((t=>t.dispose())),this.Fu=r.ctr,this.ya());const c=new ImageData(new Uint8ClampedArray(l),h,a),u=document.createElement("canvas"),d=u.getContext("2d");if(!d)throw new Error("Failed to create 2D context for saving image.");u.width=h,u.height=a,d.putImageData(c,0,0),d.translate(0,a),d.scale(1,-1),d.drawImage(u,0,0),this.jo.hE&&(this.OB.nR(s.FRAMEBUFFER,this.QD[0]),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,this.ZY),this.OB.nR(s.FRAMEBUFFER,this.QD[1]),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,this.YD,0)),this.OB.nR(s.FRAMEBUFFER,null);const f=u.toDataURL(t,e);return i?f:(t=>{const e=t.split(",")[0].split(":")[1].split(";")[0],i=Wt.atob(t.split(",")[1]),s=new Uint8Array(i.length);for(let t=0;t<i.length;t+=1)s[t]=i.charCodeAt(t);return new Wt.Blob([s.buffer],{type:e})})(f)}Yo(t,e,i=!1){this.da(l(Math.round(t),Math.round(e))),this.pa();const s=this.OB.gl.drawingBufferWidth,r=this.OB.gl.drawingBufferHeight,n=new Uint8Array(s*r*4);if(this.OB.gl.readPixels(0,0,s,r,this.OB.gl.RGBA,this.OB.gl.UNSIGNED_BYTE,n),!i){const t=r/2|0,e=4*s,i=new Uint8Array(4*s);for(let s=0;s<t;s+=1){const t=s*e,o=(r-s-1)*e;i.set(n.subarray(t,t+e)),n.copyWithin(t,o,o+e),n.set(i,o)}}return this.Ko={x:0,y:e},n}iB(t){return void 0!==this.Oa?this.Oa[0]=t:this.Oa=[t,void 0],this.Pn.style.minWidth=`${this.Oa[0]}px`,this.da(),this}eB(t){return void 0!==this.Oa?this.Oa[1]=t:this.Oa=[void 0,t],this.Pn.style.maxWidth=`${this.Oa[1]}px`,this.da(),this}rB(t){return void 0!==this.Na?this.Na[0]=t:this.Na=[t,void 0],this.Pn.style.minHeight=`${this.Na[0]}px`,this.da(),this}oB(t){return void 0!==this.Na?this.Na[1]=t:this.Na=[void 0,t],this.Pn.style.maxHeight=`${this.Na[1]}px`,this.da(),this}gH(t,e){return this.Oa=t,this.Na=e,this.Pn.style.minWidth=`${this.Oa[0]}px`,this.Pn.style.maxWidth=`${this.Oa[1]}px`,this.Pn.style.minHeight=`${this.Na[0]}px`,this.Pn.style.maxHeight=`${this.Na[1]}px`,this.da(),this}GD(t){return this.UA!==t&&(this.R.O("inviewchanged",{isInView:t}),this.UA=t),this}ND(){return this.UA}mE(t){this.KY=t}vE(){return this.KY}Kk(t,e=this.Xa()){const i=this.Ha(e);if(i){if(_e(0,(()=>{})),!(i instanceof Xm))throw new Error("Unexpected Engine Layer error");return i}return this.ma(new Xm(this,e,t))}iT(t,e,i){const s=this.Ha(e);if(s){if(_e(0,(()=>{})),!(s instanceof fx))throw new Error("Unexpected Engine Layer error");return s}return this.ma(new fx(this,e,t,i))}Mi(){return this.H}$D(){const t=this.OB.QE();return{x:Math.round(this.H.x*t),y:Math.round(this.H.y*t)}}AH(t){return t instanceof Array||(t=[t,t]),t}bH(){return this.jo.XD}MH(){return sp(this.OB.gl)}uH(){var t;const e=this.OB.gl,i=Wt.performance.now(),s=this.Ca.Ta,r={x:Math.ceil(this.H.x*this.OB.QE()*s),y:Math.ceil(this.H.y*this.OB.QE()*s)};this.sH||(this.sH={mH:s,wH:r,eH:[],lH:void 0});let n=this.sH.eH.find((t=>!t.nH)),o=!1;n||(o=!0,n={nH:!1,H:r,Vz:e.createTexture(),_H:this.OB.kR(),QY:this.OB.TR(),CH:new Uint8Array,hH:void 0},this.sH.eH.push(n));const h=n;(o||h.H.x!==r.x||h.H.y!==r.y)&&(e.bindTexture(e.TEXTURE_2D,h.Vz),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.x,r.y,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),this.OB.nR(e.FRAMEBUFFER,h._H),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,h.Vz,0),e.bindRenderbuffer(e.RENDERBUFFER,h.QY),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.x,r.y),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,h.QY),h.CH=new Uint8Array(r.x*r.y*4),h.H=r),h.nH=!0,h.hH=i,this.OB.nR(e.FRAMEBUFFER,h._H),e.clearDepth(1),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.disable(e.BLEND),e.resize&&e.resize(r.x,r.y),this.OB.oR(0,0,r.x,r.y);const a=[];for(const t of this.Qo.values())t.Bu(1,s,a);this.OB.nR(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.enable(e.BLEND);const l=null===(t=this.OB.gl2)||void 0===t?void 0:t.ctx,c=()=>{if(this.sH){const t=this.sH.lH;if(t&&t.cH>i)return;this.sH.lH={cH:i,mH:s,H:r,xH:h.CH,SH:a}}};l?this.OB.Rz(l,h._H,0,0,r.x,r.y,e.RGBA,e.UNSIGNED_BYTE,h.CH).then((()=>{this.ft||(h.nH=!1,c())})).catch((t=>{this.ft||(h.nH=!1,Wt.console.warn("LightningChart JS mouse picking failed unexpectedly. This could mean that user interactions on charts are compromised.\nPlease report this issue to https://lightningchart.com/js-charts/docs/contact"))})):(this.OB.zz(h._H,0,0,r.x,r.y,e.RGBA,e.UNSIGNED_BYTE,h.CH),h.nH=!1,c())}da(t){const e=this.OB.QE();if("use-window"===this.dH.mode){const t=Wt.devicePixelRatio||1;this.OB.mz(t)}const i=this.H.x,s=this.H.y,r=t||{x:this.Pn.offsetWidth,y:this.Pn.offsetHeight},n=this.OB.QE();if(0!==r.x&&0!==r.y&&(r.x!==i||r.y!==s||e!==n)){this.H=r,this.ct.x.j(0,r.x).J(r.x),this.ct.y.j(0,r.y).J(r.y);const t=r.x*n,e=r.y*n,i=this.OB.gl,s=this.jo.hE;if(this.YD&&(i.bindTexture(i.TEXTURE_2D,this.YD),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null)),s){const s=this.OB.gl2.ctx;this.ZY&&(i.bindRenderbuffer(i.RENDERBUFFER,this.ZY),s.renderbufferStorageMultisample(s.RENDERBUFFER,this.JY,s.RGBA8,t,e)),this.QY&&(i.bindRenderbuffer(i.RENDERBUFFER,this.QY),s.renderbufferStorageMultisample(s.RENDERBUFFER,this.JY,s.DEPTH24_STENCIL8,t,e))}i.bindRenderbuffer(i.RENDERBUFFER,null),this.R.O("resize",{engineWidth:this.H.x,engineHeight:this.H.y,width:this.H.x,height:this.H.y})}}U(){var t;this.ft||(super.U(),this.Fu&&this.Fu.U(),this.aH&&(Wt.clearTimeout(this.aH),this.aH=void 0),Array.from(this.OB._D.entries()).forEach((([t,e])=>{e.Du(!1),this.OB._D.delete(t)})),Array.from(this.OB.LR.values()).forEach((t=>{t.unbindResources()})),this.OB.LR.clear(),this.OB.PR.LE(),this.OB.gz.U(),this.OB.wR(this.OB.pz),this.OB.wR(this.OB.vz),this.OB.uz.forEach(((t,e)=>{this.OB.gl.deleteBuffer(e)})),this.OB.uz.clear(),this.OB.Pz&&(this.OB.wR(this.OB.Pz.buffer),this.OB.Pz=void 0),this.OB.IR(this.QD[0]),this.OB.IR(this.QD[1]),this.OB.FR(this.ZY),this.OB.GB(this.YD),this.OB.FR(this.QY),this.sH&&(this.sH.eH.forEach((t=>{this.OB.FR(t.QY),this.OB.IR(t._H),this.OB.GB(t.Vz)})),this.sH=void 0),this.OB.az.forEach((t=>this.OB.wR(t))),this.tH.clear(),this.jo.xE(this),this.fH&&(null===(t=this.fH.parentElement)||void 0===t||t.removeChild(this.fH),this.fH=void 0),this.HD&&(this.HD=void 0),this.OB.gl=void 0)}}var px="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},mx={exports:{}};!function(t,e){function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function s(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this.$E(t||0,e||10,i||"be"))}var n;"object"==typeof mx?mx.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=(void 0).Buffer}catch(t){}function o(t,e,s){for(var r=0,n=Math.min(t.length,s),o=0,h=e;h<n;h++){var a,l=t.charCodeAt(h)-48;r<<=4,r|=a=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,o|=a}return i(!(240&o),"Invalid character in "+t),r}function h(t,e,s,r){for(var n=0,o=0,h=Math.min(t.length,s),a=e;a<h;a++){var l=t.charCodeAt(a)-48;n*=r,o=l>=49?l-49+10:l>=17?l-17+10:l,i(l>=0&&o<r,"Invalid character"),n+=o}return n}function a(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype.$E=function(t,e,s){if("number"==typeof t)return this.kH(t,e,s);if("object"==typeof t)return this.TH(t,e,s);"hex"===e&&(e=16),i(e===(0|e)&&e>=2&&e<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this.FH(t,r):this.IH(t,e,r),"-"===t[0]&&(this.negative=1),this.PH(),"le"===s&&this.TH(this.toArray(),e,s)},r.prototype.kH=function(t,e,s){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===s&&this.TH(this.toArray(),e,s)},r.prototype.TH=function(t,e,s){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,o,h=0;if("be"===s)for(r=t.length-1,n=0;r>=0;r-=3)o=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=o<<h&67108863,this.words[n+1]=o>>>26-h&67108863,(h+=24)>=26&&(h-=26,n++);else if("le"===s)for(r=0,n=0;r<t.length;r+=3)o=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=o<<h&67108863,this.words[n+1]=o>>>26-h&67108863,(h+=24)>=26&&(h-=26,n++);return this.PH()},r.prototype.FH=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,r,n=0;for(i=t.length-6,s=0;i>=e;i-=6)r=o(t,i,i+6),this.words[s]|=r<<n&67108863,this.words[s+1]|=r>>>26-n&4194303,(n+=24)>=26&&(n-=26,s++);i+6!==e&&(r=o(t,e,i+6),this.words[s]|=r<<n&67108863,this.words[s+1]|=r>>>26-n&4194303),this.PH()},r.prototype.IH=function(t,e,i){this.words=[0],this.length=1;for(var s=0,r=1;r<=67108863;r*=e)s++;s--,r=r/e|0;for(var n=t.length-i,o=n%s,a=Math.min(n,n-o)+i,l=0,c=i;c<a;c+=s)l=h(t,c,c+s,e),this.imuln(r),this.words[0]+l<67108864?this.words[0]+=l:this.LH(l);if(0!==o){var u=1;for(l=h(t,c,t.length,e),c=0;c<o;c++)u*=e;this.imuln(u),this.words[0]+l<67108864?this.words[0]+=l:this.LH(l)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.BH=function(t){a(t,this)},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype.DH=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.PH=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this.EH()},r.prototype.EH=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){r.prototype.inspect=l}else r.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var s=t.length+e.length|0;i.length=s,s=s-1|0;var r=0|t.words[0],n=0|e.words[0],o=r*n,h=67108863&o,a=o/67108864|0;i.words[0]=h;for(var l=1;l<s;l++){for(var c=a>>>26,u=67108863&a,d=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var g=l-f|0;c+=(o=(r=0|t.words[g])*(n=0|e.words[f])+u)/67108864|0,u=67108863&o}i.words[l]=0|u,a=0|c}return 0!==a?i.words[l]=0|a:i.length--,i.PH()}r.prototype.toString=function(t,e){var s;if(e=0|e||1,16===(t=t||10)||"hex"===t){s="";for(var r=0,n=0,o=0;o<this.length;o++){var h=this.words[o],a=(16777215&(h<<r|n)).toString(16);s=0!=(n=h>>>24-r&16777215)||o!==this.length-1?c[6-a.length]+a+s:a+s,(r+=2)>=26&&(r-=26,o--)}for(0!==n&&(s=n.toString(16)+s);s.length%e!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}if(t===(0|t)&&t>=2&&t<=36){var l=u[t],f=d[t];s="";var g=this.clone();for(g.negative=0;!g.isZero();){var y=g.modrn(f).toString(t);s=(g=g.idivn(f)).isZero()?y+s:c[l-y.length]+y+s}for(this.isZero()&&(s="0"+s);s.length%e!=0;)s="0"+s;return 0!==this.negative&&(s="-"+s),s}i(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16,2)},n&&(r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)}),r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,s){this.PH();var r=this.byteLength(),n=s||Math.max(1,r);i(r<=n,"byte array longer than desired length"),i(n>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,n);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,r),o},r.prototype.RH=function(t,e){for(var i=0,s=0,r=0,n=0;r<this.length;r++){var o=this.words[r]<<n|s;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===n?(i<t.length&&(t[i++]=o>>24&255),s=0,n=0):(s=o>>>24,n+=2)}if(i<t.length)for(t[i++]=s;i<t.length;)t[i++]=0},r.prototype.zH=function(t,e){for(var i=t.length-1,s=0,r=0,n=0;r<this.length;r++){var o=this.words[r]<<n|s;t[i--]=255&o,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),6===n?(i>=0&&(t[i--]=o>>24&255),s=0,n=0):(s=o>>>24,n+=2)}if(i>=0)for(t[i--]=s;i>=0;)t[i--]=0},Math.clz32?r.prototype.OH=function(t){return 32-Math.clz32(t)}:r.prototype.OH=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype.VH=function(t){if(0===t)return 26;var e=t,i=0;return 8191&e||(i+=13,e>>>=13),127&e||(i+=7,e>>>=7),15&e||(i+=4,e>>>=4),3&e||(i+=2,e>>>=2),1&e||i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this.OH(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this.VH(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.PH()},r.prototype.ior=function(t){return i(!(this.negative|t.negative)),this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.PH()},r.prototype.iand=function(t){return i(!(this.negative|t.negative)),this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var s=0;s<i.length;s++)this.words[s]=e.words[s]^i.words[s];if(this!==e)for(;s<e.length;s++)this.words[s]=e.words[s];return this.length=e.length,this.PH()},r.prototype.ixor=function(t){return i(!(this.negative|t.negative)),this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),s=t%26;this.DH(e),s>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return s>0&&(this.words[r]=~this.words[r]&67108863>>26-s),this.PH()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){i("number"==typeof t&&t>=0);var s=t/26|0,r=t%26;return this.DH(s+1),this.words[s]=e?this.words[s]|1<<r:this.words[s]&~(1<<r),this.PH()},r.prototype.iadd=function(t){var e,i,s;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this.EH();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e.EH();this.length>t.length?(i=this,s=t):(i=t,s=this);for(var r=0,n=0;n<s.length;n++)e=(0|i.words[n])+(0|s.words[n])+r,this.words[n]=67108863&e,r=e>>>26;for(;0!==r&&n<i.length;n++)e=(0|i.words[n])+r,this.words[n]=67108863&e,r=e>>>26;if(this.length=i.length,0!==r)this.words[this.length]=r,this.length++;else if(i!==this)for(;n<i.length;n++)this.words[n]=i.words[n];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e.EH()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this.EH();var i,s,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(i=this,s=t):(i=t,s=this);for(var n=0,o=0;o<s.length;o++)n=(e=(0|i.words[o])-(0|s.words[o])+n)>>26,this.words[o]=67108863&e;for(;0!==n&&o<i.length;o++)n=(e=(0|i.words[o])+n)>>26,this.words[o]=67108863&e;if(0===n&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.PH()},r.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,i){var s,r,n,o=t.words,h=e.words,a=i.words,l=0,c=0|o[0],u=8191&c,d=c>>>13,f=0|o[1],g=8191&f,y=f>>>13,p=0|o[2],m=8191&p,x=p>>>13,S=0|o[3],v=8191&S,A=S>>>13,b=0|o[4],C=8191&b,M=b>>>13,T=0|o[5],E=8191&T,w=T>>>13,B=0|o[6],k=8191&B,R=B>>>13,F=0|o[7],I=8191&F,O=F>>>13,L=0|o[8],D=8191&L,P=L>>>13,V=0|o[9],_=8191&V,z=V>>>13,U=0|h[0],N=8191&U,X=U>>>13,H=0|h[1],G=8191&H,Y=H>>>13,W=0|h[2],j=8191&W,$=W>>>13,Q=0|h[3],J=8191&Q,q=Q>>>13,Z=0|h[4],K=8191&Z,tt=Z>>>13,et=0|h[5],it=8191&et,st=et>>>13,rt=0|h[6],nt=8191&rt,ot=rt>>>13,ht=0|h[7],at=8191&ht,lt=ht>>>13,ct=0|h[8],ut=8191&ct,dt=ct>>>13,ft=0|h[9],gt=8191&ft,yt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var pt=(l+(s=Math.imul(u,N))|0)+((8191&(r=(r=Math.imul(u,X))+Math.imul(d,N)|0))<<13)|0;l=((n=Math.imul(d,X))+(r>>>13)|0)+(pt>>>26)|0,pt&=67108863,s=Math.imul(g,N),r=(r=Math.imul(g,X))+Math.imul(y,N)|0,n=Math.imul(y,X);var mt=(l+(s=s+Math.imul(u,G)|0)|0)+((8191&(r=(r=r+Math.imul(u,Y)|0)+Math.imul(d,G)|0))<<13)|0;l=((n=n+Math.imul(d,Y)|0)+(r>>>13)|0)+(mt>>>26)|0,mt&=67108863,s=Math.imul(m,N),r=(r=Math.imul(m,X))+Math.imul(x,N)|0,n=Math.imul(x,X),s=s+Math.imul(g,G)|0,r=(r=r+Math.imul(g,Y)|0)+Math.imul(y,G)|0,n=n+Math.imul(y,Y)|0;var xt=(l+(s=s+Math.imul(u,j)|0)|0)+((8191&(r=(r=r+Math.imul(u,$)|0)+Math.imul(d,j)|0))<<13)|0;l=((n=n+Math.imul(d,$)|0)+(r>>>13)|0)+(xt>>>26)|0,xt&=67108863,s=Math.imul(v,N),r=(r=Math.imul(v,X))+Math.imul(A,N)|0,n=Math.imul(A,X),s=s+Math.imul(m,G)|0,r=(r=r+Math.imul(m,Y)|0)+Math.imul(x,G)|0,n=n+Math.imul(x,Y)|0,s=s+Math.imul(g,j)|0,r=(r=r+Math.imul(g,$)|0)+Math.imul(y,j)|0,n=n+Math.imul(y,$)|0;var St=(l+(s=s+Math.imul(u,J)|0)|0)+((8191&(r=(r=r+Math.imul(u,q)|0)+Math.imul(d,J)|0))<<13)|0;l=((n=n+Math.imul(d,q)|0)+(r>>>13)|0)+(St>>>26)|0,St&=67108863,s=Math.imul(C,N),r=(r=Math.imul(C,X))+Math.imul(M,N)|0,n=Math.imul(M,X),s=s+Math.imul(v,G)|0,r=(r=r+Math.imul(v,Y)|0)+Math.imul(A,G)|0,n=n+Math.imul(A,Y)|0,s=s+Math.imul(m,j)|0,r=(r=r+Math.imul(m,$)|0)+Math.imul(x,j)|0,n=n+Math.imul(x,$)|0,s=s+Math.imul(g,J)|0,r=(r=r+Math.imul(g,q)|0)+Math.imul(y,J)|0,n=n+Math.imul(y,q)|0;var vt=(l+(s=s+Math.imul(u,K)|0)|0)+((8191&(r=(r=r+Math.imul(u,tt)|0)+Math.imul(d,K)|0))<<13)|0;l=((n=n+Math.imul(d,tt)|0)+(r>>>13)|0)+(vt>>>26)|0,vt&=67108863,s=Math.imul(E,N),r=(r=Math.imul(E,X))+Math.imul(w,N)|0,n=Math.imul(w,X),s=s+Math.imul(C,G)|0,r=(r=r+Math.imul(C,Y)|0)+Math.imul(M,G)|0,n=n+Math.imul(M,Y)|0,s=s+Math.imul(v,j)|0,r=(r=r+Math.imul(v,$)|0)+Math.imul(A,j)|0,n=n+Math.imul(A,$)|0,s=s+Math.imul(m,J)|0,r=(r=r+Math.imul(m,q)|0)+Math.imul(x,J)|0,n=n+Math.imul(x,q)|0,s=s+Math.imul(g,K)|0,r=(r=r+Math.imul(g,tt)|0)+Math.imul(y,K)|0,n=n+Math.imul(y,tt)|0;var At=(l+(s=s+Math.imul(u,it)|0)|0)+((8191&(r=(r=r+Math.imul(u,st)|0)+Math.imul(d,it)|0))<<13)|0;l=((n=n+Math.imul(d,st)|0)+(r>>>13)|0)+(At>>>26)|0,At&=67108863,s=Math.imul(k,N),r=(r=Math.imul(k,X))+Math.imul(R,N)|0,n=Math.imul(R,X),s=s+Math.imul(E,G)|0,r=(r=r+Math.imul(E,Y)|0)+Math.imul(w,G)|0,n=n+Math.imul(w,Y)|0,s=s+Math.imul(C,j)|0,r=(r=r+Math.imul(C,$)|0)+Math.imul(M,j)|0,n=n+Math.imul(M,$)|0,s=s+Math.imul(v,J)|0,r=(r=r+Math.imul(v,q)|0)+Math.imul(A,J)|0,n=n+Math.imul(A,q)|0,s=s+Math.imul(m,K)|0,r=(r=r+Math.imul(m,tt)|0)+Math.imul(x,K)|0,n=n+Math.imul(x,tt)|0,s=s+Math.imul(g,it)|0,r=(r=r+Math.imul(g,st)|0)+Math.imul(y,it)|0,n=n+Math.imul(y,st)|0;var bt=(l+(s=s+Math.imul(u,nt)|0)|0)+((8191&(r=(r=r+Math.imul(u,ot)|0)+Math.imul(d,nt)|0))<<13)|0;l=((n=n+Math.imul(d,ot)|0)+(r>>>13)|0)+(bt>>>26)|0,bt&=67108863,s=Math.imul(I,N),r=(r=Math.imul(I,X))+Math.imul(O,N)|0,n=Math.imul(O,X),s=s+Math.imul(k,G)|0,r=(r=r+Math.imul(k,Y)|0)+Math.imul(R,G)|0,n=n+Math.imul(R,Y)|0,s=s+Math.imul(E,j)|0,r=(r=r+Math.imul(E,$)|0)+Math.imul(w,j)|0,n=n+Math.imul(w,$)|0,s=s+Math.imul(C,J)|0,r=(r=r+Math.imul(C,q)|0)+Math.imul(M,J)|0,n=n+Math.imul(M,q)|0,s=s+Math.imul(v,K)|0,r=(r=r+Math.imul(v,tt)|0)+Math.imul(A,K)|0,n=n+Math.imul(A,tt)|0,s=s+Math.imul(m,it)|0,r=(r=r+Math.imul(m,st)|0)+Math.imul(x,it)|0,n=n+Math.imul(x,st)|0,s=s+Math.imul(g,nt)|0,r=(r=r+Math.imul(g,ot)|0)+Math.imul(y,nt)|0,n=n+Math.imul(y,ot)|0;var Ct=(l+(s=s+Math.imul(u,at)|0)|0)+((8191&(r=(r=r+Math.imul(u,lt)|0)+Math.imul(d,at)|0))<<13)|0;l=((n=n+Math.imul(d,lt)|0)+(r>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,s=Math.imul(D,N),r=(r=Math.imul(D,X))+Math.imul(P,N)|0,n=Math.imul(P,X),s=s+Math.imul(I,G)|0,r=(r=r+Math.imul(I,Y)|0)+Math.imul(O,G)|0,n=n+Math.imul(O,Y)|0,s=s+Math.imul(k,j)|0,r=(r=r+Math.imul(k,$)|0)+Math.imul(R,j)|0,n=n+Math.imul(R,$)|0,s=s+Math.imul(E,J)|0,r=(r=r+Math.imul(E,q)|0)+Math.imul(w,J)|0,n=n+Math.imul(w,q)|0,s=s+Math.imul(C,K)|0,r=(r=r+Math.imul(C,tt)|0)+Math.imul(M,K)|0,n=n+Math.imul(M,tt)|0,s=s+Math.imul(v,it)|0,r=(r=r+Math.imul(v,st)|0)+Math.imul(A,it)|0,n=n+Math.imul(A,st)|0,s=s+Math.imul(m,nt)|0,r=(r=r+Math.imul(m,ot)|0)+Math.imul(x,nt)|0,n=n+Math.imul(x,ot)|0,s=s+Math.imul(g,at)|0,r=(r=r+Math.imul(g,lt)|0)+Math.imul(y,at)|0,n=n+Math.imul(y,lt)|0;var Mt=(l+(s=s+Math.imul(u,ut)|0)|0)+((8191&(r=(r=r+Math.imul(u,dt)|0)+Math.imul(d,ut)|0))<<13)|0;l=((n=n+Math.imul(d,dt)|0)+(r>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,s=Math.imul(_,N),r=(r=Math.imul(_,X))+Math.imul(z,N)|0,n=Math.imul(z,X),s=s+Math.imul(D,G)|0,r=(r=r+Math.imul(D,Y)|0)+Math.imul(P,G)|0,n=n+Math.imul(P,Y)|0,s=s+Math.imul(I,j)|0,r=(r=r+Math.imul(I,$)|0)+Math.imul(O,j)|0,n=n+Math.imul(O,$)|0,s=s+Math.imul(k,J)|0,r=(r=r+Math.imul(k,q)|0)+Math.imul(R,J)|0,n=n+Math.imul(R,q)|0,s=s+Math.imul(E,K)|0,r=(r=r+Math.imul(E,tt)|0)+Math.imul(w,K)|0,n=n+Math.imul(w,tt)|0,s=s+Math.imul(C,it)|0,r=(r=r+Math.imul(C,st)|0)+Math.imul(M,it)|0,n=n+Math.imul(M,st)|0,s=s+Math.imul(v,nt)|0,r=(r=r+Math.imul(v,ot)|0)+Math.imul(A,nt)|0,n=n+Math.imul(A,ot)|0,s=s+Math.imul(m,at)|0,r=(r=r+Math.imul(m,lt)|0)+Math.imul(x,at)|0,n=n+Math.imul(x,lt)|0,s=s+Math.imul(g,ut)|0,r=(r=r+Math.imul(g,dt)|0)+Math.imul(y,ut)|0,n=n+Math.imul(y,dt)|0;var Tt=(l+(s=s+Math.imul(u,gt)|0)|0)+((8191&(r=(r=r+Math.imul(u,yt)|0)+Math.imul(d,gt)|0))<<13)|0;l=((n=n+Math.imul(d,yt)|0)+(r>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,s=Math.imul(_,G),r=(r=Math.imul(_,Y))+Math.imul(z,G)|0,n=Math.imul(z,Y),s=s+Math.imul(D,j)|0,r=(r=r+Math.imul(D,$)|0)+Math.imul(P,j)|0,n=n+Math.imul(P,$)|0,s=s+Math.imul(I,J)|0,r=(r=r+Math.imul(I,q)|0)+Math.imul(O,J)|0,n=n+Math.imul(O,q)|0,s=s+Math.imul(k,K)|0,r=(r=r+Math.imul(k,tt)|0)+Math.imul(R,K)|0,n=n+Math.imul(R,tt)|0,s=s+Math.imul(E,it)|0,r=(r=r+Math.imul(E,st)|0)+Math.imul(w,it)|0,n=n+Math.imul(w,st)|0,s=s+Math.imul(C,nt)|0,r=(r=r+Math.imul(C,ot)|0)+Math.imul(M,nt)|0,n=n+Math.imul(M,ot)|0,s=s+Math.imul(v,at)|0,r=(r=r+Math.imul(v,lt)|0)+Math.imul(A,at)|0,n=n+Math.imul(A,lt)|0,s=s+Math.imul(m,ut)|0,r=(r=r+Math.imul(m,dt)|0)+Math.imul(x,ut)|0,n=n+Math.imul(x,dt)|0;var Et=(l+(s=s+Math.imul(g,gt)|0)|0)+((8191&(r=(r=r+Math.imul(g,yt)|0)+Math.imul(y,gt)|0))<<13)|0;l=((n=n+Math.imul(y,yt)|0)+(r>>>13)|0)+(Et>>>26)|0,Et&=67108863,s=Math.imul(_,j),r=(r=Math.imul(_,$))+Math.imul(z,j)|0,n=Math.imul(z,$),s=s+Math.imul(D,J)|0,r=(r=r+Math.imul(D,q)|0)+Math.imul(P,J)|0,n=n+Math.imul(P,q)|0,s=s+Math.imul(I,K)|0,r=(r=r+Math.imul(I,tt)|0)+Math.imul(O,K)|0,n=n+Math.imul(O,tt)|0,s=s+Math.imul(k,it)|0,r=(r=r+Math.imul(k,st)|0)+Math.imul(R,it)|0,n=n+Math.imul(R,st)|0,s=s+Math.imul(E,nt)|0,r=(r=r+Math.imul(E,ot)|0)+Math.imul(w,nt)|0,n=n+Math.imul(w,ot)|0,s=s+Math.imul(C,at)|0,r=(r=r+Math.imul(C,lt)|0)+Math.imul(M,at)|0,n=n+Math.imul(M,lt)|0,s=s+Math.imul(v,ut)|0,r=(r=r+Math.imul(v,dt)|0)+Math.imul(A,ut)|0,n=n+Math.imul(A,dt)|0;var wt=(l+(s=s+Math.imul(m,gt)|0)|0)+((8191&(r=(r=r+Math.imul(m,yt)|0)+Math.imul(x,gt)|0))<<13)|0;l=((n=n+Math.imul(x,yt)|0)+(r>>>13)|0)+(wt>>>26)|0,wt&=67108863,s=Math.imul(_,J),r=(r=Math.imul(_,q))+Math.imul(z,J)|0,n=Math.imul(z,q),s=s+Math.imul(D,K)|0,r=(r=r+Math.imul(D,tt)|0)+Math.imul(P,K)|0,n=n+Math.imul(P,tt)|0,s=s+Math.imul(I,it)|0,r=(r=r+Math.imul(I,st)|0)+Math.imul(O,it)|0,n=n+Math.imul(O,st)|0,s=s+Math.imul(k,nt)|0,r=(r=r+Math.imul(k,ot)|0)+Math.imul(R,nt)|0,n=n+Math.imul(R,ot)|0,s=s+Math.imul(E,at)|0,r=(r=r+Math.imul(E,lt)|0)+Math.imul(w,at)|0,n=n+Math.imul(w,lt)|0,s=s+Math.imul(C,ut)|0,r=(r=r+Math.imul(C,dt)|0)+Math.imul(M,ut)|0,n=n+Math.imul(M,dt)|0;var Bt=(l+(s=s+Math.imul(v,gt)|0)|0)+((8191&(r=(r=r+Math.imul(v,yt)|0)+Math.imul(A,gt)|0))<<13)|0;l=((n=n+Math.imul(A,yt)|0)+(r>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,s=Math.imul(_,K),r=(r=Math.imul(_,tt))+Math.imul(z,K)|0,n=Math.imul(z,tt),s=s+Math.imul(D,it)|0,r=(r=r+Math.imul(D,st)|0)+Math.imul(P,it)|0,n=n+Math.imul(P,st)|0,s=s+Math.imul(I,nt)|0,r=(r=r+Math.imul(I,ot)|0)+Math.imul(O,nt)|0,n=n+Math.imul(O,ot)|0,s=s+Math.imul(k,at)|0,r=(r=r+Math.imul(k,lt)|0)+Math.imul(R,at)|0,n=n+Math.imul(R,lt)|0,s=s+Math.imul(E,ut)|0,r=(r=r+Math.imul(E,dt)|0)+Math.imul(w,ut)|0,n=n+Math.imul(w,dt)|0;var kt=(l+(s=s+Math.imul(C,gt)|0)|0)+((8191&(r=(r=r+Math.imul(C,yt)|0)+Math.imul(M,gt)|0))<<13)|0;l=((n=n+Math.imul(M,yt)|0)+(r>>>13)|0)+(kt>>>26)|0,kt&=67108863,s=Math.imul(_,it),r=(r=Math.imul(_,st))+Math.imul(z,it)|0,n=Math.imul(z,st),s=s+Math.imul(D,nt)|0,r=(r=r+Math.imul(D,ot)|0)+Math.imul(P,nt)|0,n=n+Math.imul(P,ot)|0,s=s+Math.imul(I,at)|0,r=(r=r+Math.imul(I,lt)|0)+Math.imul(O,at)|0,n=n+Math.imul(O,lt)|0,s=s+Math.imul(k,ut)|0,r=(r=r+Math.imul(k,dt)|0)+Math.imul(R,ut)|0,n=n+Math.imul(R,dt)|0;var Rt=(l+(s=s+Math.imul(E,gt)|0)|0)+((8191&(r=(r=r+Math.imul(E,yt)|0)+Math.imul(w,gt)|0))<<13)|0;l=((n=n+Math.imul(w,yt)|0)+(r>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,s=Math.imul(_,nt),r=(r=Math.imul(_,ot))+Math.imul(z,nt)|0,n=Math.imul(z,ot),s=s+Math.imul(D,at)|0,r=(r=r+Math.imul(D,lt)|0)+Math.imul(P,at)|0,n=n+Math.imul(P,lt)|0,s=s+Math.imul(I,ut)|0,r=(r=r+Math.imul(I,dt)|0)+Math.imul(O,ut)|0,n=n+Math.imul(O,dt)|0;var Ft=(l+(s=s+Math.imul(k,gt)|0)|0)+((8191&(r=(r=r+Math.imul(k,yt)|0)+Math.imul(R,gt)|0))<<13)|0;l=((n=n+Math.imul(R,yt)|0)+(r>>>13)|0)+(Ft>>>26)|0,Ft&=67108863,s=Math.imul(_,at),r=(r=Math.imul(_,lt))+Math.imul(z,at)|0,n=Math.imul(z,lt),s=s+Math.imul(D,ut)|0,r=(r=r+Math.imul(D,dt)|0)+Math.imul(P,ut)|0,n=n+Math.imul(P,dt)|0;var It=(l+(s=s+Math.imul(I,gt)|0)|0)+((8191&(r=(r=r+Math.imul(I,yt)|0)+Math.imul(O,gt)|0))<<13)|0;l=((n=n+Math.imul(O,yt)|0)+(r>>>13)|0)+(It>>>26)|0,It&=67108863,s=Math.imul(_,ut),r=(r=Math.imul(_,dt))+Math.imul(z,ut)|0,n=Math.imul(z,dt);var Ot=(l+(s=s+Math.imul(D,gt)|0)|0)+((8191&(r=(r=r+Math.imul(D,yt)|0)+Math.imul(P,gt)|0))<<13)|0;l=((n=n+Math.imul(P,yt)|0)+(r>>>13)|0)+(Ot>>>26)|0,Ot&=67108863;var Lt=(l+(s=Math.imul(_,gt))|0)+((8191&(r=(r=Math.imul(_,yt))+Math.imul(z,gt)|0))<<13)|0;return l=((n=Math.imul(z,yt))+(r>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,a[0]=pt,a[1]=mt,a[2]=xt,a[3]=St,a[4]=vt,a[5]=At,a[6]=bt,a[7]=Ct,a[8]=Mt,a[9]=Tt,a[10]=Et,a[11]=wt,a[12]=Bt,a[13]=kt,a[14]=Rt,a[15]=Ft,a[16]=It,a[17]=Ot,a[18]=Lt,0!==l&&(a[19]=l,i.length++),i};function y(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var s=0,r=0,n=0;n<i.length-1;n++){var o=r;r=0;for(var h=67108863&s,a=Math.min(n,e.length-1),l=Math.max(0,n-t.length+1);l<=a;l++){var c=n-l,u=(0|t.words[c])*(0|e.words[l]),d=67108863&u;h=67108863&(d=d+h|0),r+=(o=(o=o+(u/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[n]=h,s=o,o=r}return 0!==s?i.words[n]=s:i.length--,i.PH()}function p(t,e,i){return y(t,e,i)}Math.imul||(g=f),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):i<63?f(this,t,e):i<1024?y(this,t,e):p(this,t,e)},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),p(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){var e=t<0;e&&(t=-t),i("number"==typeof t),i(t<67108864);for(var s=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,o=(67108863&n)+(67108863&s);s>>=26,s+=n/67108864|0,s+=o>>>26,this.words[r]=67108863&o}return 0!==s&&(this.words[r]=s,this.length++),e?this.ineg():this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var s=i/26|0,r=i%26;e[i]=t.words[s]>>>r&1}return e}(t);if(0===e.length)return new r(1);for(var i=this,s=0;s<e.length&&0===e[s];s++,i=i.sqr());if(++s<e.length)for(var n=i.sqr();s<e.length;s++,n=n.sqr())0!==e[s]&&(i=i.mul(n));return i},r.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var e,s=t%26,r=(t-s)/26,n=67108863>>>26-s<<26-s;if(0!==s){var o=0;for(e=0;e<this.length;e++){var h=this.words[e]&n,a=(0|this.words[e])-h<<s;this.words[e]=a|o,o=h>>>26-s}o&&(this.words[e]=o,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.PH()},r.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},r.prototype.iushrn=function(t,e,s){var r;i("number"==typeof t&&t>=0),r=e?(e-e%26)/26:0;var n=t%26,o=Math.min((t-n)/26,this.length),h=67108863^67108863>>>n<<n,a=s;if(r-=o,r=Math.max(0,r),a){for(var l=0;l<o;l++)a.words[l]=this.words[l];a.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=r);l--){var u=0|this.words[l];this.words[l]=c<<26-n|u>>>n,c=u&h}return a&&0!==c&&(a.words[a.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.PH()},r.prototype.ishrn=function(t,e,s){return i(0===this.negative),this.iushrn(t,e,s)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){i("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26,r=1<<e;return!(this.length<=s||!(this.words[s]&r))},r.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var e=t%26,s=(t-e)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==e&&s++,this.length=Math.min(s,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.PH()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this.LH(t)},r.prototype.LH=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.PH()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype.NH=function(t,e,s){var r,n,o=t.length+s;this.DH(o);var h=0;for(r=0;r<t.length;r++){n=(0|this.words[r+s])+h;var a=(0|t.words[r])*e;h=((n-=67108863&a)>>26)-(a/67108864|0),this.words[r+s]=67108863&n}for(;r<this.length-s;r++)h=(n=(0|this.words[r+s])+h)>>26,this.words[r+s]=67108863&n;if(0===h)return this.PH();for(i(-1===h),h=0,r=0;r<this.length;r++)h=(n=-(0|this.words[r])+h)>>26,this.words[r]=67108863&n;return this.negative=1,this.PH()},r.prototype.GH=function(t,e){var i=(this.length,t.length),s=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this.OH(o))&&(n=n.ushln(i),s.iushln(i),o=0|n.words[n.length-1]);var h,a=s.length-n.length;if("mod"!==e){(h=new r(null)).length=a+1,h.words=new Array(h.length);for(var l=0;l<h.length;l++)h.words[l]=0}var c=s.clone().NH(n,1,a);0===c.negative&&(s=c,h&&(h.words[a]=1));for(var u=a-1;u>=0;u--){var d=67108864*(0|s.words[n.length+u])+(0|s.words[n.length+u-1]);for(d=Math.min(d/o|0,67108863),s.NH(n,d,u);0!==s.negative;)d--,s.negative=0,s.NH(n,1,u),s.isZero()||(s.negative^=1);h&&(h.words[u]=d)}return h&&h.PH(),s.PH(),"div"!==e&&0!==i&&s.iushrn(i),{div:h||null,mod:s}},r.prototype.divmod=function(t,e,s){return i(!t.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(h=this.neg().divmod(t,e),"mod"!==e&&(n=h.div.neg()),"div"!==e&&(o=h.mod.neg(),s&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(h=this.divmod(t.neg(),e),"mod"!==e&&(n=h.div.neg()),{div:n,mod:h.mod}):this.negative&t.negative?(h=this.neg().divmod(t.neg(),e),"div"!==e&&(o=h.mod.neg(),s&&0!==o.negative&&o.isub(t)),{div:h.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modrn(t.words[0]))}:this.GH(t,e);var n,o,h},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,s=t.ushrn(1),r=t.andln(1),n=i.cmp(s);return n<0||1===r&&0===n?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modrn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var s=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(s*r+(0|this.words[n]))%t;return e?-r:r},r.prototype.modn=function(t){return this.modrn(t)},r.prototype.idivn=function(t){var e=t<0;e&&(t=-t),i(t<=67108863);for(var s=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*s;this.words[r]=n/t|0,s=n%t}return this.PH(),e?this.ineg():this},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var e=this,s=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),o=new r(0),h=new r(0),a=new r(1),l=0;e.isEven()&&s.isEven();)e.iushrn(1),s.iushrn(1),++l;for(var c=s.clone(),u=e.clone();!e.isZero();){for(var d=0,f=1;!(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(c),o.isub(u)),n.iushrn(1),o.iushrn(1);for(var g=0,y=1;!(s.words[0]&y)&&g<26;++g,y<<=1);if(g>0)for(s.iushrn(g);g-- >0;)(h.isOdd()||a.isOdd())&&(h.iadd(c),a.isub(u)),h.iushrn(1),a.iushrn(1);e.cmp(s)>=0?(e.isub(s),n.isub(h),o.isub(a)):(s.isub(e),h.isub(n),a.isub(o))}return{a:h,b:a,gcd:s.iushln(l)}},r.prototype.UH=function(t){i(0===t.negative),i(!t.isZero());var e=this,s=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new r(1),h=new r(0),a=s.clone();e.cmpn(1)>0&&s.cmpn(1)>0;){for(var l=0,c=1;!(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(a),o.iushrn(1);for(var u=0,d=1;!(s.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(s.iushrn(u);u-- >0;)h.isOdd()&&h.iadd(a),h.iushrn(1);e.cmp(s)>=0?(e.isub(s),o.isub(h)):(s.isub(e),h.isub(o))}return(n=0===e.cmpn(1)?o:h).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var s=0;e.isEven()&&i.isEven();s++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var r=e.cmp(i);if(r<0){var n=e;e=i,i=n}else if(0===r||0===i.cmpn(1))break;e.isub(i)}return i.iushln(s)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return!(1&this.words[0])},r.prototype.isOdd=function(){return!(1&~this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){i("number"==typeof t);var e=t%26,s=(t-e)/26,r=1<<e;if(this.length<=s)return this.DH(s+1),this.words[s]|=r,this;for(var n=r,o=s;0!==n&&o<this.length;o++){var h=0|this.words[o];n=(h+=n)>>>26,h&=67108863,this.words[o]=h}return 0!==n&&(this.words[o]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,s=t<0;if(0!==this.negative&&!s)return-1;if(0===this.negative&&s)return 1;if(this.PH(),this.length>1)e=1;else{s&&(t=-t),i(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var s=0|this.words[i],r=0|t.words[i];if(s!==r){s<r?e=-1:s>r&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new C(t)},r.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this).$H(t)},r.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype.$H=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this.$H(t)},r.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},r.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},r.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},r.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},r.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},r.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red.YH(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red.YH(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red.HH(this),this.red.sqr(this)},r.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red.HH(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red.HH(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red.HH(this),this.red.invm(this)},r.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red.HH(this),this.red.neg(this)},r.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red.HH(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function x(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this.XH()}function S(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function C(t){if("string"==typeof t){var e=r.WH(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){C.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r.UH(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x.prototype.XH=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},x.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var s=e<this.n?-1:i.ucmp(this.p);return 0===s?(i.words[0]=0,i.length=1):s>0?i.isub(this.p):void 0!==i.strip?i.strip():i.PH(),i},x.prototype.split=function(t,e){t.iushrn(this.n,0,e)},x.prototype.imulK=function(t){return t.imul(this.k)},s(S,x),S.prototype.split=function(t,e){for(var i=4194303,s=Math.min(t.length,9),r=0;r<s;r++)e.words[r]=t.words[r];if(e.length=s,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=n&i,r=10;r<t.length;r++){var o=0|t.words[r];t.words[r-10]=(o&i)<<4|n>>>22,n=o}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},S.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var s=0|t.words[i];e+=977*s,t.words[i]=67108863&e,e=64*s+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},s(v,x),s(A,x),s(b,x),b.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var s=19*(0|t.words[i])+e,r=67108863&s;s>>>=26,t.words[i]=r,e=s}return 0!==e&&(t.words[t.length++]=e),t},r.WH=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new S;else if("p224"===t)e=new v;else if("p192"===t)e=new A;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new b}return m[t]=e,e},C.prototype.HH=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},C.prototype.YH=function(t,e){i(!(t.negative|e.negative),"red works only with positives"),i(t.red&&t.red===e.red,"red works only with red numbers")},C.prototype.imod=function(t){return this.prime?this.prime.ireduce(t).$H(this):(a(t,t.umod(this.m).$H(this)),t)},C.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t).$H(this)},C.prototype.add=function(t,e){this.YH(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i.$H(this)},C.prototype.iadd=function(t,e){this.YH(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},C.prototype.sub=function(t,e){this.YH(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i.$H(this)},C.prototype.isub=function(t,e){this.YH(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},C.prototype.shl=function(t,e){return this.HH(t),this.imod(t.ushln(e))},C.prototype.imul=function(t,e){return this.YH(t,e),this.imod(t.imul(e))},C.prototype.mul=function(t,e){return this.YH(t,e),this.imod(t.mul(e))},C.prototype.isqr=function(t){return this.imul(t,t.clone())},C.prototype.sqr=function(t){return this.mul(t,t)},C.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(i(e%2==1),3===e){var s=this.m.add(new r(1)).iushrn(2);return this.pow(t,s)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);i(!n.isZero());var h=new r(1).toRed(this),a=h.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new r(2*c*c).toRed(this);0!==this.pow(c,l).cmp(a);)c.redIAdd(a);for(var u=this.pow(c,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),g=o;0!==f.cmp(h);){for(var y=f,p=0;0!==y.cmp(h);p++)y=y.redSqr();i(p<g);var m=this.pow(u,new r(1).iushln(g-p-1));d=d.redMul(m),u=m.redSqr(),f=f.redMul(u),g=p}return d},C.prototype.invm=function(t){var e=t.UH(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},C.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var s=2;s<i.length;s++)i[s]=this.mul(i[s-1],t);var n=i[0],o=0,h=0,a=e.bitLength()%26;for(0===a&&(a=26),s=e.length-1;s>=0;s--){for(var l=e.words[s],c=a-1;c>=0;c--){var u=l>>c&1;n!==i[0]&&(n=this.sqr(n)),0!==u||0!==o?(o<<=1,o|=u,(4==++h||0===s&&0===c)&&(n=this.mul(n,i[o]),h=0,o=0)):h=0}a=26}return n},C.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},C.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new M(t)},s(M,C),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),r=i.isub(s).iushrn(this.shift),n=r;return r.cmp(this.m)>=0?n=r.isub(this.m):r.cmpn(0)<0&&(n=r.iadd(this.m)),n.$H(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0).$H(this);var i=t.mul(e),s=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(s).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o.$H(this)},M.prototype.invm=function(t){return this.imod(t.UH(this.m).mul(this.r2)).$H(this)}}(0,px);var xx=mx.exports;function Sx(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];const i=[];if("string"!=typeof t){for(let e=0;e<t.length;e++)i[e]=0|t[e];return i}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t=`0${t}`);for(let e=0;e<t.length;e+=2)i.push(parseInt(t[e]+t[e+1],16))}else for(let e=0;e<t.length;e++){const s=t.charCodeAt(e),r=s>>8,n=255&s;r?i.push(r,n):i.push(n)}return i}const vx=function(t,e,i){const s=new Array(Math.max(t.bitLength(),i)+1);s.fill(0);const r=1<<e+1,n=t.clone();for(let t=0;t<s.length;t++){let e;const i=n.andln(r-1);n.isOdd()?(e=i>(r>>1)-1?(r>>1)-i:i,n.isubn(e)):e=0,s[t]=e,n.iushrn(1)}return s},Ax=function(t,e){const i=[[],[]];t=t.clone(),e=e.clone();let s=0,r=0;for(;t.cmpn(-s)>0||e.cmpn(-r)>0;){let n,o,h=t.andln(3)+s&3,a=e.andln(3)+r&3;if(3===h&&(h=-1),3===a&&(a=-1),1&h){const e=t.andln(7)+s&7;n=3!==e&&5!==e||2!==a?h:-h}else n=0;if(i[0].push(n),1&a){const t=e.andln(7)+r&7;o=3!==t&&5!==t||2!==h?a:-a}else o=0;i[1].push(o),2*s===n+1&&(s=1-s),2*r===o+1&&(r=1-r),t.iushrn(1),e.iushrn(1)}return i};class bx{constructor(t,e){this.type=t,this.p=new xx(e.p,16),this.red=e.prime?xx.red(e.prime):xx.mont(this.p),this.zero=new xx(0).toRed(this.red),this.one=new xx(1).toRed(this.red),this.two=new xx(2).toRed(this.red),this.n=e.n&&new xx(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this.jH=new Array(4),this.ZH=new Array(4),this.QH=new Array(4),this.JH=new Array(4),this.KH=this.n?this.n.bitLength():0;const i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this.qH=!0,this.redN=this.n.toRed(this.red))}tX(t,e){const i=t.iX(),s=vx(e,1,this.KH);let r=(1<<i.step+1)-(i.step%2==0?2:1);r/=3;const n=[];for(let t=0;t<s.length;t+=i.step){let e=0;for(let r=t+i.step-1;r>=t;r--)e=(e<<1)+s[r];n.push(e)}let o=this.jpoint(null,null,null),h=this.jpoint(null,null,null);for(let t=r;t>0;t--){for(let e=0;e<n.length;e++){const s=n[e];s===t?h=h.mixedAdd(i.points[e]):s===-t&&(h=h.mixedAdd(i.points[e].neg()))}o=o.add(h)}return o.toP()}sX(t,e){let i=4;const s=t.eX(i);i=s.wnd;const r=s.points,n=vx(e,i,this.KH);let o=this.jpoint(null,null,null);for(let i=n.length-1;i>=0;i--){for(let t=0;i>=0&&0===n[i];i--)t++;if(i>=0&&e++,o=o.dblp(e),i<0)break;const s=n[i];o="affine"===t.type?s>0?o.mixedAdd(r[s-1>>1]):o.mixedAdd(r[-s-1>>1].neg()):s>0?o.add(r[s-1>>1]):o.add(r[-s-1>>1].neg())}return"affine"===t.type?o.toP():o}hX(t,e,i,s,r){const n=this.jH,o=this.ZH,h=this.QH;let a=0;for(let i=0;i<s;i++){const s=e[i].eX(t);n[i]=s.wnd,o[i]=s.points}for(let t=s-1;t>=1;t-=2){const s=t-1,r=t;if(1!==n[s]||1!==n[r]){h[s]=vx(i[s],n[s],this.KH),h[r]=vx(i[r],n[r],this.KH),a=Math.max(h[s].length,a),a=Math.max(h[r].length,a);continue}const l=[e[s],null,null,e[r]];0===e[s].y.cmp(e[r].y)?(l[1]=e[s].add(e[r]),l[2]=e[s].toJ().mixedAdd(e[r].neg())):0===e[s].y.cmp(e[r].y.redNeg())?(l[1]=e[s].toJ().mixedAdd(e[r]),l[2]=e[s].add(e[r].neg())):(l[1]=e[s].toJ().mixedAdd(e[r]),l[2]=e[s].toJ().mixedAdd(e[r].neg()));const c=[-3,-1,-5,-7,0,7,5,1,3],u=Ax(i[s],i[r]);a=Math.max(u[0].length,a),h[s]=new Array(a),h[r]=new Array(a);for(let t=0;t<a;t++){const e=0|u[0][t],i=0|u[1][t];h[s][t]=c[3*(e+1)+(i+1)],h[r][t]=0,o[s]=l}}let l=this.jpoint(null,null,null);const c=this.JH;for(let t=a;t>=0;t--){let e=0;for(;t>=0;){let i=!0;for(let e=0;e<s;e++)c[e]=0|h[e][t],0!==c[e]&&(i=!1);if(!i)break;e++,t--}if(t>=0&&e++,l=l.dblp(e),t<0)break;for(let t=0;t<s;t++){const e=c[t];let i;0!==e&&(e>0?i=o[t][e-1>>1]:e<0&&(i=o[t][-e-1>>1].neg()),l="affine"===i.type?l.mixedAdd(i):l.add(i))}}for(let t=0;t<s;t++)o[t]=null;return r?l:l.toP()}decodePoint(t,e){t=Sx(t,e);const i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")}}class Cx{constructor(t,e){this.curve=t,this.type=e,this.precomputed=null}eq(t){throw new Error("Not implemented")}validate(){return this.curve.validate(this)}encodeCompressed(t){return this.encode(t,!0)}rX(t){const e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))}encode(t,e){return function(t,e){return"hex"===e?function(t){let e="";for(let s=0;s<t.length;s++)e+=1===(i=t[s].toString(16)).length?`0${i}`:i;var i;return e}(t):t}(this.rX(e),t)}precompute(t){if(this.precomputed)return this;const e={doubles:null,naf:null,beta:null};return e.naf=this.eX(8),e.doubles=this.iX(4,t),e.beta=this.nX(),this.precomputed=e,this}oX(t){if(!this.precomputed)return!1;const e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)}iX(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;const i=[this];let s=this;for(let r=0;r<e;r+=t){for(let e=0;e<t;e++)s=s.dbl();i.push(s)}return{step:t,points:i}}eX(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;const e=[this],i=(1<<t)-1,s=1===i?null:this.dbl();for(let t=1;t<i;t++)e[t]=e[t-1].add(s);return{wnd:t,points:e}}nX(){return null}dblp(t){let e=this;for(let i=0;i<t;i++)e=e.dbl();return e}}class Mx extends bx{constructor(t){super("short",t),this.a=new xx(t.a,16).toRed(this.red),this.b=new xx(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this.aX(t),this.lX=new Array(4),this.cX=new Array(4)}pointFromJSON(t,e){return Tx.fromJSON(this,t,e)}aX(t){if(!this.zeroA||!this.g||!this.n||1!==this.p.modn(3))return;let e,i,s;if(t.beta)e=new xx(t.beta,16).toRed(this.red);else{const t=this.uX(this.p);e=t[0].cmp(t[1])<0?t[0]:t[1],e=e.toRed(this.red)}if(t.lambda)i=new xx(t.lambda,16);else{const t=this.uX(this.n);i=0===this.g.mul(t[0]).x.cmp(this.g.x.redMul(e))?t[0]:t[1]}return s=t.basis?t.basis.map((t=>({a:new xx(t.a,16),b:new xx(t.b,16)}))):this.dX(i),{beta:e,lambda:i,basis:s}}uX(t){const e=t===this.p?this.red:xx.mont(t),i=new xx(2).toRed(e).redInvm(),s=i.redNeg(),r=new xx(3).toRed(e).redNeg().redSqrt().redMul(i);return[s.redAdd(r).fromRed(),s.redSub(r).fromRed()]}dX(t){const e=this.n.ushrn(Math.floor(this.n.bitLength()/2));let i,s,r,n,o,h,a,l,c,u=t,d=this.n.clone(),f=new xx(1),g=new xx(0),y=new xx(0),p=new xx(1),m=0;for(;0!==u.cmpn(0);){const t=d.div(u);l=d.sub(t.mul(u)),c=y.sub(t.mul(f));const o=p.sub(t.mul(g));if(!r&&l.cmp(e)<0)i=a.neg(),s=f,r=l.neg(),n=c;else if(r&&2==++m)break;a=l,d=u,u=l,y=f,f=c,p=g,g=o}o=l.neg(),h=c;const x=r.sqr().add(n.sqr());return o.sqr().add(h.sqr()).cmp(x)>=0&&(o=i,h=s),r.negative&&(r=r.neg(),n=n.neg()),o.negative&&(o=o.neg(),h=h.neg()),[{a:r,b:n},{a:o,b:h}]}fX(t){const e=this.endo.basis,i=e[0],s=e[1],r=s.b.mul(t).divRound(this.n),n=i.b.neg().mul(t).divRound(this.n),o=r.mul(i.a),h=n.mul(s.a),a=r.mul(i.b),l=n.mul(s.b);return{k1:t.sub(o).sub(h),k2:a.add(l).neg()}}point(t,e,i){return new Tx(this,t,e,i)}pointFromX(t,e){(t=new xx(t,16)).red||(t=t.toRed(this.red));const i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b);let s=i.redSqrt();if(0!==s.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");const r=s.fromRed().isOdd();return(e&&!r||!e&&r)&&(s=s.redNeg()),this.point(t,s)}validate(t){if(t.inf)return!0;const e=t.x,i=t.y,s=this.a.redMul(e),r=e.redSqr().redMul(e).redIAdd(s).redIAdd(this.b);return 0===i.redSqr().redISub(r).cmpn(0)}AX(t,e,i){const s=this.lX,r=this.cX;let n=0;for(n=0;n<t.length;n++){const i=this.fX(e[n]);let o=t[n],h=o.nX();i.k1.negative&&(i.k1.ineg(),o=o.neg(!0)),i.k2.negative&&(i.k2.ineg(),h=h.neg(!0)),s[2*n]=o,s[2*n+1]=h,r[2*n]=i.k1,r[2*n+1]=i.k2}const o=this.hX(1,s,r,2*n,i);for(let t=0;t<2*n;t++)s[t]=null,r[t]=null;return o}jpoint(t,e,i){return new Ex(this,t,e,i)}}class Tx extends Cx{constructor(t,e,i,s){super(t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new xx(e,16),this.y=new xx(i,16),s&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){return new Tx(this,t,e,i)}nX(){if(!this.curve.endo)return;const t=this.precomputed;if(t&&t.beta)return t.beta;const e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){const i=this.curve,s=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return e}toJSON(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]}static fromJSON(t,e,i){"string"==typeof e&&(e=JSON.parse(e));const s=t.point(e[0],e[1],i);if(!e[2])return s;function r(e){return t.point(e[0],e[1],i)}const n=e[2];return s.precomputed={beta:null,doubles:n.doubles&&{step:n.doubles.step,points:[s].concat(n.doubles.points.map(r))},naf:n.naf&&{wnd:n.naf.wnd,points:[s].concat(n.naf.points.map(r))}},s}inspect(){return this.isInfinity()?"<EC Point Infinity>":`<EC Point x: ${this.x.fromRed().toString(16,2)} y: ${this.y.fromRed().toString(16,2)}>`}isInfinity(){return this.inf}add(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);let e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));const i=e.redSqr().redISub(this.x).redISub(t.x),s=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)}dbl(){if(this.inf)return this;const t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);const e=this.curve.a,i=this.x.redSqr(),s=t.redInvm(),r=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(s),n=r.redSqr().redISub(this.x.redAdd(this.x)),o=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)}getX(){return this.x.fromRed()}getY(){return this.y.fromRed()}mul(t){return t=new xx(t,16),this.isInfinity()?this:this.oX(t)?this.curve.tX(this,t):this.curve.endo?this.curve.AX([this],[t]):this.curve.sX(this,t)}mulAdd(t,e,i){const s=[this,e],r=[t,i];return this.curve.endo?this.curve.AX(s,r):this.curve.hX(1,s,r,2)}jmulAdd(t,e,i){const s=[this,e],r=[t,i];return this.curve.endo?this.curve.AX(s,r,!0):this.curve.hX(1,s,r,2,!0)}eq(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))}neg(t){if(this.inf)return this;const e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){const t=this.precomputed,i=function(t){return t.neg()};e.precomputed={naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(i)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(i)}}}return e}toJ(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)}}class Ex extends Cx{constructor(t,e,i,s){super(t,"jacobian"),null===e&&null===i&&null===s?(this.x=this.curve.one,this.y=this.curve.one,this.z=new xx(0)):(this.x=new xx(e,16),this.y=new xx(i,16),this.z=new xx(s,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}getY(){throw new Error("Method not implemented.")}getX(){throw new Error("Method not implemented.")}pointFromX(t,e){throw new Error("Method not implemented.")}point(t,e,i){throw new Error("Method not implemented.")}jpoint(t,e,i){return new Ex(this,t,e,i)}toP(){if(this.isInfinity())return this.curve.point(null,null);const t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),s=this.y.redMul(e).redMul(t);return this.curve.point(i,s)}neg(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)}add(t){if(this.isInfinity())return t;if(t.isInfinity())return this;const e=t.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(e),r=t.x.redMul(i),n=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),h=s.redSub(r),a=n.redSub(o);if(0===h.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const l=h.redSqr(),c=l.redMul(h),u=s.redMul(l),d=a.redSqr().redIAdd(c).redISub(u).redISub(u),f=a.redMul(u.redISub(d)).redISub(n.redMul(c)),g=this.z.redMul(t.z).redMul(h);return this.curve.jpoint(d,f,g)}mixedAdd(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;const e=this.z.redSqr(),i=this.x,s=t.x.redMul(e),r=this.y,n=t.y.redMul(e).redMul(this.z),o=i.redSub(s),h=r.redSub(n);if(0===o.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();const a=o.redSqr(),l=a.redMul(o),c=i.redMul(a),u=h.redSqr().redIAdd(l).redISub(c).redISub(c),d=h.redMul(c.redISub(u)).redISub(r.redMul(l)),f=this.z.redMul(o);return this.curve.jpoint(u,d,f)}dblp(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){let e=this;for(let i=0;i<t;i++)e=e.dbl();return e}const e=this.curve.a,i=this.curve.tinv;let s=this.x;const r=this.y;let n=this.z,o=n.redSqr().redSqr(),h=r.redAdd(r);for(let i=0;i<t;i++){const r=s.redSqr(),a=h.redSqr(),l=a.redSqr(),c=r.redAdd(r).redIAdd(r).redIAdd(e.redMul(o)),u=s.redMul(a),d=c.redSqr().redISub(u.redAdd(u)),f=u.redISub(d);let g=c.redMul(f);g=g.redIAdd(g).redISub(l);const y=h.redMul(n);i+1<t&&(o=o.redMul(l)),s=d,n=y,h=g}return this.curve.jpoint(s,h.redMul(i),n)}dbl(){return this.isInfinity()?this:this.curve.zeroA?this.gX():this.curve.threeA?this.pX():this.vX()}gX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let o=this.x.redAdd(r).redSqr().redISub(s).redISub(n);o=o.redIAdd(o);const h=s.redAdd(s).redIAdd(s),a=h.redSqr().redISub(o).redISub(o);let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),t=a,e=h.redMul(o.redISub(a)).redISub(l),i=this.y.redAdd(this.y)}else{const s=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let o=this.x.redAdd(r).redSqr().redISub(s).redISub(n);o=o.redIAdd(o);const h=s.redAdd(s).redIAdd(s),a=h.redSqr();let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),t=a.redISub(o).redISub(o),e=h.redMul(o.redISub(t)).redISub(l),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,e,i)}pX(){let t,e,i;if(this.zOne){const s=this.x.redSqr(),r=this.y.redSqr(),n=r.redSqr();let o=this.x.redAdd(r).redSqr().redISub(s).redISub(n);o=o.redIAdd(o);const h=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),a=h.redSqr().redISub(o).redISub(o);t=a;let l=n.redIAdd(n);l=l.redIAdd(l),l=l.redIAdd(l),e=h.redMul(o.redISub(a)).redISub(l),i=this.y.redAdd(this.y)}else{const s=this.z.redSqr(),r=this.y.redSqr(),n=this.x.redMul(r);let o=this.x.redSub(s).redMul(this.x.redAdd(s));o=o.redAdd(o).redIAdd(o);let h=n.redIAdd(n);h=h.redIAdd(h);const a=h.redAdd(h);t=o.redSqr().redISub(a),i=this.y.redAdd(this.z).redSqr().redISub(r).redISub(s);let l=r.redSqr();l=l.redIAdd(l),l=l.redIAdd(l),l=l.redIAdd(l),e=o.redMul(h.redISub(t)).redISub(l)}return this.curve.jpoint(t,e,i)}vX(){const t=this.curve.a,e=this.x,i=this.y,s=this.z,r=s.redSqr().redSqr(),n=e.redSqr(),o=i.redSqr(),h=n.redAdd(n).redIAdd(n).redIAdd(t.redMul(r));let a=e.redAdd(e);a=a.redIAdd(a);const l=a.redMul(o),c=h.redSqr().redISub(l.redAdd(l)),u=l.redISub(c);let d=o.redSqr();d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=h.redMul(u).redISub(d),g=i.redAdd(i).redMul(s);return this.curve.jpoint(c,f,g)}trpl(){if(!this.curve.zeroA)return this.dbl().add(this);const t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),s=e.redSqr(),r=t.redAdd(t).redIAdd(t),n=r.redSqr();let o=this.x.redAdd(e).redSqr().redISub(t).redISub(s);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(n);const h=o.redSqr();let a=s.redIAdd(s);a=a.redIAdd(a),a=a.redIAdd(a),a=a.redIAdd(a);const l=r.redIAdd(o).redSqr().redISub(n).redISub(h).redISub(a);let c=e.redMul(l);c=c.redIAdd(c),c=c.redIAdd(c);let u=this.x.redMul(h).redISub(c);u=u.redIAdd(u),u=u.redIAdd(u);let d=this.y.redMul(l.redMul(a.redISub(l)).redISub(o.redMul(h)));d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);const f=this.z.redAdd(o).redSqr().redISub(i).redISub(h);return this.curve.jpoint(u,d,f)}mul(t,e){return t=new xx(t,e),this.curve.sX(this,t)}eq(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;const e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;const s=e.redMul(this.z),r=i.redMul(t.z);return 0===this.y.redMul(r).redISub(t.y.redMul(s)).cmpn(0)}eqXToP(t){const e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;const s=t.clone(),r=this.curve.redN.redMul(e);for(;;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(r),0===this.x.cmp(i))return!0}}inspect(){return this.isInfinity()?"<EC JPoint Infinity>":`<EC JPoint x: ${this.x.toString(16,2)} y: ${this.y.toString(16,2)} z: ${this.z.toString(16,2)}>`}isInfinity(){return 0===this.z.cmpn(0)}}class wx{constructor(t){this.curve=new Mx(t),this.g=this.curve.g,this.n=this.curve.n}}const Bx={};var kx,Rx;Bx.PresetCurve=wx,kx="secp256k1",Rx={type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",{doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}]},Object.defineProperty(Bx,kx,{configurable:!0,enumerable:!0,get(){const t=new wx(Rx);return Object.defineProperty(Bx,kx,{configurable:!0,enumerable:!0,value:t}),t}});class Fx{constructor(t,e){this.ec=t,this.priv=null,this.pub=null,e.pub&&this.yX(e.pub,e.pubEnc)}static fromPublic(t,e,i){return e instanceof Fx?e:new Fx(t,{pub:e,pubEnc:i})}validate(){const t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}}getPublic(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub}yX(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)}verify(t,e){return this.ec.verify(t,e,this)}}function Ix(t,e){const i=t[e.place++];if(!(128&i))return i;const s=15&i;if(0===s||s>4)return!1;let r=0,n=e.place;for(let e=0;e<s;e++,n++)r<<=8,r|=t[n],r>>>=0;return!(r<=127)&&(e.place=n,r)}class Ox{constructor(){this.place=0}}class Lx{constructor(t,e){if(t instanceof Lx)return t;this.mX(t,e)||(this.r=new xx(t.r,16),this.s=new xx(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}mX(t,e){t=Sx(t,e);const i=new Ox;if(48!==t[i.place++])return!1;const s=Ix(t,i);if(!1===s)return!1;if(s+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;const r=Ix(t,i);if(!1===r)return!1;let n=t.slice(i.place,r+i.place);if(i.place+=r,2!==t[i.place++])return!1;const o=Ix(t,i);if(!1===o)return!1;if(t.length!==o+i.place)return!1;let h=t.slice(i.place,o+i.place);if(0===n[0]){if(!(128&n[1]))return!1;n=n.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new xx(n),this.s=new xx(h),this.recoveryParam=null,!0}}class Dx{constructor(t){if(!(this instanceof Dx))return new Dx(t);"string"==typeof t&&(t=Bx[t]),t instanceof Bx.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1)}keyFromPublic(t,e){return Fx.fromPublic(this,t,e)}xX(t,e){const i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t}verify(t,e,i,s){t=this.xX(new xx(t,16)),i=this.keyFromPublic(i,s);const r=(e=new Lx(e,"hex")).r,n=e.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;const o=n.invm(this.n),h=o.mul(t).umod(this.n),a=o.mul(r).umod(this.n);if(!this.curve.qH){const t=this.g.mulAdd(h,i.getPublic(),a);return!t.isInfinity()&&0===t.getX().umod(this.n).cmp(r)}const l=this.g.jmulAdd(h,i.getPublic(),a);return!l.isInfinity()&&l.eqXToP(r)}}var Px,Vx={exports:{}},_x={exports:{}};_x.exports=(Px=Px||function(t,e){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==px&&px.crypto&&(i=px.crypto),!i)try{i=e}catch(t){}var s=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function t(){}return function(e){var i;return t.prototype=e,i=new t,t.prototype=null,i}}(),n={},o=n.lib={},h=o.Base={extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=h.extend({init:function(t,i){t=this.words=t||[],this.sigBytes=i!=e?i:4*t.length},toString:function(t){return(t||c).stringify(this)},concat:function(t){var e=this.words,i=t.words,s=this.sigBytes,r=t.sigBytes;if(this.clamp(),s%4)for(var n=0;n<r;n++){var o=i[n>>>2]>>>24-n%4*8&255;e[s+n>>>2]|=o<<24-(s+n)%4*8}else for(var h=0;h<r;h+=4)e[s+h>>>2]=i[h>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,i=this.sigBytes;e[i>>>2]&=4294967295<<32-i%4*8,e.length=t.ceil(i/4)},clone:function(){var t=h.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],i=0;i<t;i+=4)e.push(s());return new a.init(e,t)}}),l=n.enc={},c=l.Hex={stringify:function(t){for(var e=t.words,i=t.sigBytes,s=[],r=0;r<i;r++){var n=e[r>>>2]>>>24-r%4*8&255;s.push((n>>>4).toString(16)),s.push((15&n).toString(16))}return s.join("")},parse:function(t){for(var e=t.length,i=[],s=0;s<e;s+=2)i[s>>>3]|=parseInt(t.substr(s,2),16)<<24-s%8*4;return new a.init(i,e/2)}},u=l.Latin1={stringify:function(t){for(var e=t.words,i=t.sigBytes,s=[],r=0;r<i;r++){var n=e[r>>>2]>>>24-r%4*8&255;s.push(String.fromCharCode(n))}return s.join("")},parse:function(t){for(var e=t.length,i=[],s=0;s<e;s++)i[s>>>2]|=(255&t.charCodeAt(s))<<24-s%4*8;return new a.init(i,e)}},d=l.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=o.BufferedBlockAlgorithm=h.extend({reset:function(){this.hw=new a.init,this.SX=0},bX:function(t){"string"==typeof t&&(t=d.parse(t)),this.hw.concat(t),this.SX+=t.sigBytes},MX:function(e){var i,s=this.hw,r=s.words,n=s.sigBytes,o=this.blockSize,h=n/(4*o),l=(h=e?t.ceil(h):t.max((0|h)-this.wX,0))*o,c=t.min(4*l,n);if(l){for(var u=0;u<l;u+=o)this._X(r,u);i=r.splice(0,l),s.sigBytes-=c}return new a.init(i,c)},clone:function(){var t=h.clone.call(this);return t.hw=this.hw.clone(),t},wX:0});o.Hasher=f.extend({cfg:h.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this.CX()},update:function(t){return this.bX(t),this.MX(),this},finalize:function(t){return t&&this.bX(t),this.kX()},blockSize:16,TX:function(t){return function(e,i){return new t.init(i).finalize(e)}},FX:function(t){return function(e,i){return new g.HMAC.init(t,i).finalize(e)}}});var g=n.algo={};return n}(Math),Px);var zx={exports:{}};zx.exports=function(t){return function(e){var i=t,s=i.lib,r=s.WordArray,n=s.Hasher,o=i.algo,h=[],a=[];!function(){function t(t){for(var i=e.sqrt(t),s=2;s<=i;s++)if(!(t%s))return!1;return!0}function i(t){return 4294967296*(t-(0|t))|0}for(var s=2,r=0;r<64;)t(s)&&(r<8&&(h[r]=i(e.pow(s,.5))),a[r]=i(e.pow(s,1/3)),r++),s++}();var l=[],c=o.SHA256=n.extend({CX:function(){this.IX=new r.init(h.slice(0))},_X:function(t,e){for(var i=this.IX.words,s=i[0],r=i[1],n=i[2],o=i[3],h=i[4],c=i[5],u=i[6],d=i[7],f=0;f<64;f++){if(f<16)l[f]=0|t[e+f];else{var g=l[f-15],y=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,p=l[f-2],m=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;l[f]=y+l[f-7]+m+l[f-16]}var x=s&r^s&n^r&n,S=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),v=d+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&c^~h&u)+a[f]+l[f];d=u,u=c,c=h,h=o+v|0,o=n,n=r,r=s,s=v+(S+x)|0}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+n|0,i[3]=i[3]+o|0,i[4]=i[4]+h|0,i[5]=i[5]+c|0,i[6]=i[6]+u|0,i[7]=i[7]+d|0},kX:function(){var t=this.hw,i=t.words,s=8*this.SX,r=8*t.sigBytes;return i[r>>>5]|=128<<24-r%32,i[14+(r+64>>>9<<4)]=e.floor(s/4294967296),i[15+(r+64>>>9<<4)]=s,t.sigBytes=4*i.length,this.MX(),this.IX},clone:function(){var t=n.clone.call(this);return t.IX=this.IX.clone(),t}});i.SHA256=n.TX(c),i.HmacSHA256=n.FX(c)}(Math),t.SHA256}(_x.exports);var Ux=zx.exports;Vx.exports=function(t){return i=(e=t).lib.WordArray,s=e.algo,r=s.SHA256,n=s.SHA224=r.extend({CX:function(){this.IX=new i.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},kX:function(){var t=r.kX.call(this);return t.sigBytes-=4,t}}),e.SHA224=r.TX(n),e.HmacSHA224=r.FX(n),t.SHA224;var e,i,s,r,n}(_x.exports);var Nx=Vx.exports,Xx={exports:{}};Xx.exports=_x.exports.enc.Hex;var Hx=Xx.exports,Gx={exports:{}};Gx.exports=_x.exports.enc.Utf8;var Yx,Wx,jx,$x=Gx.exports,Qx={exports:{}};!function(t){return i=(e=t).lib.WordArray,e.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,s=this.PX;t.clamp();for(var r=[],n=0;n<i;n+=3)for(var o=(e[n>>>2]>>>24-n%4*8&255)<<16|(e[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|e[n+2>>>2]>>>24-(n+2)%4*8&255,h=0;h<4&&n+.75*h<i;h++)r.push(s.charAt(o>>>6*(3-h)&63));var a=s.charAt(64);if(a)for(;r.length%4;)r.push(a);return r.join("")},parse:function(t){var e=t.length,s=this.PX,r=this.LX;if(!r){r=this.LX=[];for(var n=0;n<s.length;n++)r[s.charCodeAt(n)]=n}var o=s.charAt(64);if(o){var h=t.indexOf(o);-1!==h&&(e=h)}return function(t,e,s){for(var r=[],n=0,o=0;o<e;o++)if(o%4){var h=s[t.charCodeAt(o-1)]<<o%4*2|s[t.charCodeAt(o)]>>>6-o%4*2;r[n>>>2]|=h<<24-n%4*8,n++}return i.create(r,n)}(t,e,r)},PX:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},t.enc.Base64;var e,i}(_x.exports),function(t){(function(e){var i=t,s=i.lib,r=s.WordArray,n=s.Hasher,o=i.algo,h=[];!function(){for(var t=0;t<64;t++)h[t]=4294967296*e.abs(e.sin(t+1))|0}();var a=o.MD5=n.extend({CX:function(){this.IX=new r.init([1732584193,4023233417,2562383102,271733878])},_X:function(t,e){for(var i=0;i<16;i++){var s=e+i,r=t[s];t[s]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var n=this.IX.words,o=t[e+0],a=t[e+1],f=t[e+2],g=t[e+3],y=t[e+4],p=t[e+5],m=t[e+6],x=t[e+7],S=t[e+8],v=t[e+9],A=t[e+10],b=t[e+11],C=t[e+12],M=t[e+13],T=t[e+14],E=t[e+15],w=n[0],B=n[1],k=n[2],R=n[3];w=l(w,B,k,R,o,7,h[0]),R=l(R,w,B,k,a,12,h[1]),k=l(k,R,w,B,f,17,h[2]),B=l(B,k,R,w,g,22,h[3]),w=l(w,B,k,R,y,7,h[4]),R=l(R,w,B,k,p,12,h[5]),k=l(k,R,w,B,m,17,h[6]),B=l(B,k,R,w,x,22,h[7]),w=l(w,B,k,R,S,7,h[8]),R=l(R,w,B,k,v,12,h[9]),k=l(k,R,w,B,A,17,h[10]),B=l(B,k,R,w,b,22,h[11]),w=l(w,B,k,R,C,7,h[12]),R=l(R,w,B,k,M,12,h[13]),k=l(k,R,w,B,T,17,h[14]),w=c(w,B=l(B,k,R,w,E,22,h[15]),k,R,a,5,h[16]),R=c(R,w,B,k,m,9,h[17]),k=c(k,R,w,B,b,14,h[18]),B=c(B,k,R,w,o,20,h[19]),w=c(w,B,k,R,p,5,h[20]),R=c(R,w,B,k,A,9,h[21]),k=c(k,R,w,B,E,14,h[22]),B=c(B,k,R,w,y,20,h[23]),w=c(w,B,k,R,v,5,h[24]),R=c(R,w,B,k,T,9,h[25]),k=c(k,R,w,B,g,14,h[26]),B=c(B,k,R,w,S,20,h[27]),w=c(w,B,k,R,M,5,h[28]),R=c(R,w,B,k,f,9,h[29]),k=c(k,R,w,B,x,14,h[30]),w=u(w,B=c(B,k,R,w,C,20,h[31]),k,R,p,4,h[32]),R=u(R,w,B,k,S,11,h[33]),k=u(k,R,w,B,b,16,h[34]),B=u(B,k,R,w,T,23,h[35]),w=u(w,B,k,R,a,4,h[36]),R=u(R,w,B,k,y,11,h[37]),k=u(k,R,w,B,x,16,h[38]),B=u(B,k,R,w,A,23,h[39]),w=u(w,B,k,R,M,4,h[40]),R=u(R,w,B,k,o,11,h[41]),k=u(k,R,w,B,g,16,h[42]),B=u(B,k,R,w,m,23,h[43]),w=u(w,B,k,R,v,4,h[44]),R=u(R,w,B,k,C,11,h[45]),k=u(k,R,w,B,E,16,h[46]),w=d(w,B=u(B,k,R,w,f,23,h[47]),k,R,o,6,h[48]),R=d(R,w,B,k,x,10,h[49]),k=d(k,R,w,B,T,15,h[50]),B=d(B,k,R,w,p,21,h[51]),w=d(w,B,k,R,C,6,h[52]),R=d(R,w,B,k,g,10,h[53]),k=d(k,R,w,B,A,15,h[54]),B=d(B,k,R,w,a,21,h[55]),w=d(w,B,k,R,S,6,h[56]),R=d(R,w,B,k,E,10,h[57]),k=d(k,R,w,B,m,15,h[58]),B=d(B,k,R,w,M,21,h[59]),w=d(w,B,k,R,y,6,h[60]),R=d(R,w,B,k,b,10,h[61]),k=d(k,R,w,B,f,15,h[62]),B=d(B,k,R,w,v,21,h[63]),n[0]=n[0]+w|0,n[1]=n[1]+B|0,n[2]=n[2]+k|0,n[3]=n[3]+R|0},kX:function(){var t=this.hw,i=t.words,s=8*this.SX,r=8*t.sigBytes;i[r>>>5]|=128<<24-r%32;var n=e.floor(s/4294967296),o=s;i[15+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),i[14+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(i.length+1),this.MX();for(var h=this.IX,a=h.words,l=0;l<4;l++){var c=a[l];a[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return h},clone:function(){var t=n.clone.call(this);return t.IX=this.IX.clone(),t}});function l(t,e,i,s,r,n,o){var h=t+(e&i|~e&s)+r+o;return(h<<n|h>>>32-n)+e}function c(t,e,i,s,r,n,o){var h=t+(e&s|i&~s)+r+o;return(h<<n|h>>>32-n)+e}function u(t,e,i,s,r,n,o){var h=t+(e^i^s)+r+o;return(h<<n|h>>>32-n)+e}function d(t,e,i,s,r,n,o){var h=t+(i^(e|~s))+r+o;return(h<<n|h>>>32-n)+e}i.MD5=n.TX(a),i.HmacMD5=n.FX(a)})(Math),t.MD5}(_x.exports),function(t){return i=(e=t).lib,s=i.WordArray,r=i.Hasher,n=e.algo,o=[],h=n.SHA1=r.extend({CX:function(){this.IX=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_X:function(t,e){for(var i=this.IX.words,s=i[0],r=i[1],n=i[2],h=i[3],a=i[4],l=0;l<80;l++){if(l<16)o[l]=0|t[e+l];else{var c=o[l-3]^o[l-8]^o[l-14]^o[l-16];o[l]=c<<1|c>>>31}var u=(s<<5|s>>>27)+a+o[l];u+=l<20?1518500249+(r&n|~r&h):l<40?1859775393+(r^n^h):l<60?(r&n|r&h|n&h)-1894007588:(r^n^h)-899497514,a=h,h=n,n=r<<30|r>>>2,r=s,s=u}i[0]=i[0]+s|0,i[1]=i[1]+r|0,i[2]=i[2]+n|0,i[3]=i[3]+h|0,i[4]=i[4]+a|0},kX:function(){var t=this.hw,e=t.words,i=8*this.SX,s=8*t.sigBytes;return e[s>>>5]|=128<<24-s%32,e[14+(s+64>>>9<<4)]=Math.floor(i/4294967296),e[15+(s+64>>>9<<4)]=i,t.sigBytes=4*e.length,this.MX(),this.IX},clone:function(){var t=r.clone.call(this);return t.IX=this.IX.clone(),t}}),e.SHA1=r.TX(h),e.HmacSHA1=r.FX(h),t.SHA1;var e,i,s,r,n,o,h}(_x.exports),Wx=(Yx=_x.exports).lib.Base,jx=Yx.enc.Utf8,Yx.algo.HMAC=Wx.extend({init:function(t,e){t=this.BX=new t.init,"string"==typeof e&&(e=jx.parse(e));var i=t.blockSize,s=4*i;e.sigBytes>s&&(e=t.finalize(e)),e.clamp();for(var r=this.DX=e.clone(),n=this.EX=e.clone(),o=r.words,h=n.words,a=0;a<i;a++)o[a]^=1549556828,h[a]^=909522486;r.sigBytes=n.sigBytes=s,this.reset()},reset:function(){var t=this.BX;t.reset(),t.update(this.EX)},update:function(t){return this.BX.update(t),this},finalize:function(t){var e=this.BX,i=e.finalize(t);return e.reset(),e.finalize(this.DX.clone().concat(i))}}),function(t){return s=(i=(e=t).lib).Base,r=i.WordArray,o=(n=e.algo).MD5,h=n.EvpKDF=s.extend({cfg:s.extend({keySize:4,hasher:o,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i,s=this.cfg,n=s.hasher.create(),o=r.create(),h=o.words,a=s.keySize,l=s.iterations;h.length<a;){i&&n.update(i),i=n.update(t).finalize(e),n.reset();for(var c=1;c<l;c++)i=n.finalize(i),n.reset();o.concat(i)}return o.sigBytes=4*a,o}}),e.EvpKDF=function(t,e,i){return h.create(i).compute(t,e)},t.EvpKDF;var e,i,s,r,n,o,h}(_x.exports),function(t){t.lib.Cipher||function(){var e=t,i=e.lib,s=i.Base,r=i.WordArray,n=i.BufferedBlockAlgorithm,o=e.enc;o.Utf8;var h=o.Base64,a=e.algo.EvpKDF,l=i.Cipher=n.extend({cfg:s.extend(),createEncryptor:function(t,e){return this.create(this.RX,t,e)},createDecryptor:function(t,e){return this.create(this.zX,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this.OX=t,this.VX=e,this.reset()},reset:function(){n.reset.call(this),this.CX()},process:function(t){return this.bX(t),this.MX()},finalize:function(t){return t&&this.bX(t),this.kX()},keySize:4,ivSize:4,RX:1,zX:2,TX:function(){function t(t){return"string"==typeof t?x:p}return function(e){return{encrypt:function(i,s,r){return t(s).encrypt(e,i,s,r)},decrypt:function(i,s,r){return t(s).decrypt(e,i,s,r)}}}}()});i.StreamCipher=l.extend({kX:function(){return this.MX(!0)},blockSize:1});var c=e.mode={},u=i.BlockCipherMode=s.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this.NX=t,this.GX=e}}),d=c.CBC=function(){var t=u.extend();function e(t,e,i){var s,r=this.GX;r?(s=r,this.GX=void 0):s=this.UX;for(var n=0;n<i;n++)t[e+n]^=s[n]}return t.Encryptor=t.extend({processBlock:function(t,i){var s=this.NX,r=s.blockSize;e.call(this,t,i,r),s.encryptBlock(t,i),this.UX=t.slice(i,i+r)}}),t.Decryptor=t.extend({processBlock:function(t,i){var s=this.NX,r=s.blockSize,n=t.slice(i,i+r);s.decryptBlock(t,i),e.call(this,t,i,r),this.UX=n}}),t}(),f=(e.pad={}).Pkcs7={pad:function(t,e){for(var i=4*e,s=i-t.sigBytes%i,n=s<<24|s<<16|s<<8|s,o=[],h=0;h<s;h+=4)o.push(n);var a=r.create(o,s);t.concat(a)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}};i.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:f}),reset:function(){var t;l.reset.call(this);var e=this.cfg,i=e.iv,s=e.mode;this.OX==this.RX?t=s.createEncryptor:(t=s.createDecryptor,this.wX=1),this.$X&&this.$X.YX==t?this.$X.init(this,i&&i.words):(this.$X=t.call(s,this,i&&i.words),this.$X.YX=t)},_X:function(t,e){this.$X.processBlock(t,e)},kX:function(){var t,e=this.cfg.padding;return this.OX==this.RX?(e.pad(this.hw,this.blockSize),t=this.MX(!0)):(t=this.MX(!0),e.unpad(t)),t},blockSize:4});var g=i.CipherParams=s.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),y=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,i=t.salt;return(i?r.create([1398893684,1701076831]).concat(i).concat(e):e).toString(h)},parse:function(t){var e,i=h.parse(t),s=i.words;return 1398893684==s[0]&&1701076831==s[1]&&(e=r.create(s.slice(2,4)),s.splice(0,4),i.sigBytes-=16),g.create({ciphertext:i,salt:e})}},p=i.SerializableCipher=s.extend({cfg:s.extend({format:y}),encrypt:function(t,e,i,s){s=this.cfg.extend(s);var r=t.createEncryptor(i,s),n=r.finalize(e),o=r.cfg;return g.create({ciphertext:n,key:i,iv:o.iv,algorithm:t,mode:o.mode,padding:o.padding,blockSize:t.blockSize,formatter:s.format})},decrypt:function(t,e,i,s){return s=this.cfg.extend(s),e=this.HX(e,s.format),t.createDecryptor(i,s).finalize(e.ciphertext)},HX:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),m=(e.kdf={}).OpenSSL={execute:function(t,e,i,s){s||(s=r.random(8));var n=a.create({keySize:e+i}).compute(t,s),o=r.create(n.words.slice(e),4*i);return n.sigBytes=4*e,g.create({key:n,iv:o,salt:s})}},x=i.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:m}),encrypt:function(t,e,i,s){var r=(s=this.cfg.extend(s)).kdf.execute(i,t.keySize,t.ivSize);s.iv=r.iv;var n=p.encrypt.call(this,t,e,r.key,s);return n.mixIn(r),n},decrypt:function(t,e,i,s){s=this.cfg.extend(s),e=this.HX(e,s.format);var r=s.kdf.execute(i,t.keySize,t.ivSize,e.salt);return s.iv=r.iv,p.decrypt.call(this,t,e,r.key,s)}})}()}(_x.exports),Qx.exports=function(t){return function(){var e=t,i=e.lib.BlockCipher,s=e.algo,r=[],n=[],o=[],h=[],a=[],l=[],c=[],u=[],d=[],f=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var i=0,s=0;for(e=0;e<256;e++){var g=s^s<<1^s<<2^s<<3^s<<4;g=g>>>8^255&g^99,r[i]=g,n[g]=i;var y=t[i],p=t[y],m=t[p],x=257*t[g]^16843008*g;o[i]=x<<24|x>>>8,h[i]=x<<16|x>>>16,a[i]=x<<8|x>>>24,l[i]=x,x=16843009*m^65537*p^257*y^16843008*i,c[g]=x<<24|x>>>8,u[g]=x<<16|x>>>16,d[g]=x<<8|x>>>24,f[g]=x,i?(i=y^t[t[t[m^y]]],s^=t[t[s]]):i=s=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],y=s.AES=i.extend({CX:function(){if(!this.XX||this.WX!==this.VX){for(var t=this.WX=this.VX,e=t.words,i=t.sigBytes/4,s=4*((this.XX=i+6)+1),n=this.jX=[],o=0;o<s;o++)o<i?n[o]=e[o]:(l=n[o-1],o%i?i>6&&o%i==4&&(l=r[l>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l]):(l=r[(l=l<<8|l>>>24)>>>24]<<24|r[l>>>16&255]<<16|r[l>>>8&255]<<8|r[255&l],l^=g[o/i|0]<<24),n[o]=n[o-i]^l);for(var h=this.ZX=[],a=0;a<s;a++){if(o=s-a,a%4)var l=n[o];else l=n[o-4];h[a]=a<4||o<=4?l:c[r[l>>>24]]^u[r[l>>>16&255]]^d[r[l>>>8&255]]^f[r[255&l]]}}},encryptBlock:function(t,e){this.QX(t,e,this.jX,o,h,a,l,r)},decryptBlock:function(t,e){var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i,this.QX(t,e,this.ZX,c,u,d,f,n),i=t[e+1],t[e+1]=t[e+3],t[e+3]=i},QX:function(t,e,i,s,r,n,o,h){for(var a=this.XX,l=t[e]^i[0],c=t[e+1]^i[1],u=t[e+2]^i[2],d=t[e+3]^i[3],f=4,g=1;g<a;g++){var y=s[l>>>24]^r[c>>>16&255]^n[u>>>8&255]^o[255&d]^i[f++],p=s[c>>>24]^r[u>>>16&255]^n[d>>>8&255]^o[255&l]^i[f++],m=s[u>>>24]^r[d>>>16&255]^n[l>>>8&255]^o[255&c]^i[f++],x=s[d>>>24]^r[l>>>16&255]^n[c>>>8&255]^o[255&u]^i[f++];l=y,c=p,u=m,d=x}y=(h[l>>>24]<<24|h[c>>>16&255]<<16|h[u>>>8&255]<<8|h[255&d])^i[f++],p=(h[c>>>24]<<24|h[u>>>16&255]<<16|h[d>>>8&255]<<8|h[255&l])^i[f++],m=(h[u>>>24]<<24|h[d>>>16&255]<<16|h[l>>>8&255]<<8|h[255&c])^i[f++],x=(h[d>>>24]<<24|h[l>>>16&255]<<16|h[c>>>8&255]<<8|h[255&u])^i[f++],t[e]=y,t[e+1]=p,t[e+2]=m,t[e+3]=x},keySize:8});e.AES=i.TX(y)}(),t.AES}(_x.exports);var Jx=Qx.exports,qx={exports:{}};qx.exports=function(t){return t.mode.CTR=(i=(e=t.lib.BlockCipherMode.extend()).Encryptor=e.extend({processBlock:function(t,e){var i=this.NX,s=i.blockSize,r=this.GX,n=this.JX;r&&(n=this.JX=r.slice(0),this.GX=void 0);var o=n.slice(0);i.encryptBlock(o,0),n[s-1]=n[s-1]+1|0;for(var h=0;h<s;h++)t[e+h]^=o[h]}}),e.Decryptor=i,e),t.mode.CTR;var e,i}(_x.exports);var Zx=qx.exports,Kx={exports:{}};Kx.exports=function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,i=e.init,s=e.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,s=[],r=0;r<e;r++)s[r>>>2]|=t[r]<<24-r%4*8;i.call(this,s,e)}else i.apply(this,arguments)};s.prototype=e}}(),t.lib.WordArray}(_x.exports);var tS=Kx.exports,eS={exports:{}};eS.exports=function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding}(_x.exports);var iS=eS.exports;const sS="aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvYXBwLWRlcGxveW1lbnQv",rS=9e5,nS={"-4":["MDQxMmQ1MWU5MjFhYTMzODUwMWE4ZGYzN2ViZTE4NTU3ZDViYmRlZDg1Yzk0OGI3YTJkMDBmZTNhZGVlMjdjY2VmNzBiMWVlOWI3MDZjMTIwYTAzZDZlZTNkNmYyOTc5Y2E2NGEzN2Y3YjY4N2E1ZjljZWY2ODYxN2I1NWU5ZmJjMA=="],"-3":["MjAyNTA1MDY="],"-2":["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2Vzc2lvbg==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvdHJvdWJsZXNob290aW5nL3Jlc3RyaWN0ZWQtZmVhdHVyZXMv","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzLw==","aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vcHl0aG9uLWNoYXJ0cy8="],"-1":["WE1MSHR0cFJlcXVlc3Q=","ZG9jdW1lbnQ=","ZGVmYXVsdFZpZXc=","YQ==","Yg==","bGljZW5zZV9leHBpcmF0aW9uX2RhdGU=","bG9jYXRpb24=","aG9zdG5hbWU=","dGVzdF9kb21haW4=","ZG9tYWlucw==","Y3J5cHRv","U2lnbmF0dXJl","RUNEU0E=","U0hBMjI0d2l0aEVDRFNB","YWxn","Y3VydmU=","c2VjcDI1Nmsx","YWRkRXZlbnRMaXN0ZW5lcg==","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","bG9hZGVuZA==","ZXJyb3I=","YWJvcnQ=","dGltZW91dA==","cmVzcG9uc2VUZXh0","Q29udGVudC1UeXBl","YXBwbGljYXRpb24vanNvbg==","TWVzc2FnZURpZ2VzdA==","c2hhMjU2","Y3J5cHRvanM=","dXBkYXRlU3RyaW5n","ZGlnZXN0","Y29tcGFueQ==","YXBwVGl0bGU=","bGNqcy1zZXNzaW9u","bG9jYWxTdG9yYWdl","Z2V0SXRlbQ==","c2V0SXRlbQ==","ZA==","dA==","bGNqcy1zZXNzaW9uLTI=","aG9zdA==","dG9w"],0:["TGljZW5zZQ==","IA==","a2V5","aGFz","ZXhwaXJlZA==","Lg==","dmVyc2lvbg==","aXM=","dG9v","bmV3","b2xk","b3I=","aW52YWxpZA==","MDAwMQ==","SW52YWxpZA==","bnVtYmVy","b2Y=","ZG9tYWlucw==","ZGVwbG95bWVudA==","aW4=","ZG9tYWlu","RGVwbG95bWVudA==","ZG9tYWlu","dmFsaWRhdGlvbg==","ZmFpbGVk","Og==","UE9TVA==","c2VydmVy","cmVzcG9uZGVk","d2l0aA==","dW5leHBlY3RlZA==","dmFsdWU=","cmVxdWVzdA==","VEVTVA==","REVQTE9ZTUVOVA==","S2V5","VGFtcGVyaW5n","YmVlbg==","ZGV0ZWN0ZWQ=","TWlzc2luZw==","TGljZW5zZQ==","aW5mb3JtYXRpb24=","ZG9lcw==","bm90","aW5jbHVkZQ==","cGVybWlzc2lvbg==","dG8=","dXNl","Q2hhcnQ=","M0Q=","WFk=","RGF0YUdyaWQ=","TWFw","UG9sYXI=","RnVubmVs","R2F1Z2U=","UGll","UHlyYW1pZA==","U3BpZGVy","Zm9y","dGhpcw==","VHJhZGluZw==","ZmVhdHVyZXM=","Q2xpY2s=","aGVyZQ==","bW9yZQ==","c3VwcGxpZWQ=","Z2V0","bGljZW5zZQ==","VHJlZQ=="],1:["aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vc2FuZGJveA==","aHR0cHM6Ly9qc2xpY2Vuc2luZy5saWdodG5pbmdjaGFydC5jb20vcGx1Z2lu"]},oS=Wt,hS=(...t)=>t.slice(1).reduce(((e,i)=>e+oS.atob(nS[t[0]][i].toString())),"");let aS,lS,cS,uS=new Uint8Array([]);const dS=t=>t&&"cGx1Z2lu"in t&&"cHl0aG9u"===t.cGx1Z2lu?hS(-2,3):hS(-2,2);class fS{set e(t){aS=t}get e(){lS={ao:!1,lo:!1,co:!1,uo:!1,do:!1,fo:!1,Ao:!1,po:!1,vo:!1,yo:!1,mo:!1,xo:!1,So:!1,bo:!1,Mo:!1,wo:!1,_o:!1,Co:!1,ko:!1,To:!1,Fo:!1,Io:!1,Po:!1,Lo:!1,Bo:!1,Do:!1};const t=uS.length,e=t>=1?uS[0]:void 0,i=t>=2?uS[1]:void 0,s=t>=3?uS[2]:void 0,r=t>=4?uS[3]:void 0;return void 0!==e&&(lS.ao=!!(1&e),lS.lo=!!(2&e),lS.co=!!(4&e),lS.uo=!!(8&e),lS.do=!!(16&e),lS.fo=!!(32&e),lS.Ao=!!(64&e),lS.po=!!(128&e)),void 0!==i&&(lS.vo=!!(1&i),lS.yo=!!(2&i),lS.mo=!!(4&i),lS.xo=!!(8&i),lS.So=!!(16&i),lS.bo=!!(32&i),lS.Mo=!!(64&i),lS.wo=!!(128&i)),void 0!==s&&(lS._o=!!(1&s),lS.Co=!!(2&s),lS.ko=!!(4&s),lS.To=!!(8&s),lS.Fo=!!(16&s),lS.Io=!!(32&s),lS.Po=!!(64&s),lS.Lo=!!(128&s)),void 0!==r&&(lS.Bo=!!(1&r)),lS.fo}set l(t){cS=t}get l(){return cS}}let gS=!1;const yS=(t,e)=>{const i=new RegExp(`.{${e}}`,"g");return(t.match(i)||[]).map((t=>parseInt(t,16)))},pS=t=>{if(4===t.byteLength)return`${t[0].toString().padStart(2,"0")}${t[1].toString().padStart(2,"0")}${t[2].toString().padStart(2,"0")}${t[3].toString().padStart(2,"0")}`},mS=t=>t.getFullYear().toString()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0"),xS=t=>{const e={},i=t.split("-");if(3!==i.length)return{KX:hS(0,0,1,7,1,12,5)};let s=0;const r=Uint8Array.from(oS.atob(i[1]),(t=>t.charCodeAt(0)));s+=1;const n=r.subarray(s,s+=20),o=new DataView(r.buffer).getUint16(s,!0);s+=2;const h=Uint8Array.from(Array(o));for(let t=0;t<o;t+=1)h[t]=r[t+s]^n[t%n.byteLength];const a=new DataView(h.buffer);e.qX=h,s=0;const l=Uint8Array.from(Array(a.getUint16(s,!0)));s+=2,l.set(h.subarray(s,s+=l.byteLength)),uS=new Uint8Array(l);const c=pS(h.subarray(s,s+=4)),u=hS(-3,0);if(!c)return{KX:hS(0,0,1,7,1,12,5)};if(c<u)return{KX:hS(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};if(8&l[0]){const t=pS(h.subarray(s,s+=4)),e=mS(new Date);if(!t)return{KX:hS(0,0,1,7,1,12,5)};if(t<e)return{KX:hS(0,0,1,2,1,3,1,4,5),tW:dS()}}e.iW=s;const d=`${i[0]}-${i[1]}`,f=Array.prototype.reduce.call(oS.atob(i[2]),((t,e)=>t+`0${e.charCodeAt(0).toString(16)}`.slice(-2)),"");return AS(d,f)?e:{KX:hS(0,0,1,7,1,12,5)}},SS=t=>{const e=t.slice(0,4);let i=t.slice(5);switch(e){case"0001":{i=i.replace(/-/g,"");const t=Uint8Array.from(yS(i,2)),e=t.slice(36,40),s=new Uint8Array(4),r=(t=>{let e;const i=[];for(let t=0;t<256;t+=1){e=t;for(let t=0;t<8;t+=1)e=1&e?3988292384^e>>>1:e>>>1;i[t]=e}let s=-1;for(let e=0;e<t.length;e+=1)s=s>>>8^i[255&(s^t[e])];return~s>>>0})(t.slice(0,36));new DataView(s.buffer).setUint32(0,r,!0);const n=t.slice(28,34);let o=0;for(let t=n.length-1;t>0;t-=1)o+=n[t]*2**(8*t);const h=new Date(o);if(mS(h)<hS(-3,0))return{KX:hS(0,0,1,2,1,3,1,4,5),tW:dS()};if(e.every(((t,e)=>s[e]===t)))return{};break}case"0002":return xS(t);default:return{KX:hS(0,0,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}return{KX:hS(0,0,1,2,1,7,1,12,5)}},vS=t=>{if(!t)return{KX:hS(0,14,1,15,1,16,1,17,1,19,1,18,1,2,5)};const e=(t[hS(-1,9)]||t[hS(-1,37)]).map((t=>(t||"").trim())),i=oS[hS(-1,41)];if(i&&e.indexOf(i[hS(-1,6)][hS(-1,7)])>-1)return{sW:!0};if(e.indexOf(oS[hS(-1,6)][hS(-1,7)])>-1)return{sW:!0};const s=e.filter((t=>t.indexOf("*")>-1));if(i&&ES(i[hS(-1,6)][hS(-1,7)],s))return{sW:!0};if(ES(oS[hS(-1,6)][hS(-1,7)],s))return{sW:!0};const r=t[hS(-1,8)]||t[hS(-1,38)];if(""!==r&&null!=r){if(i&&ES(i[hS(-1,6)][hS(-1,7)],[r]))return{sW:!1};if(ES(oS[hS(-1,6)][hS(-1,7)],[r]))return{sW:!1};if(i&&r===i[hS(-1,6)][hS(-1,7)])return{sW:!1};if(r===oS[hS(-1,6)][hS(-1,7)])return{sW:!1}}return{KX:hS(0,14,1,20,5),tW:"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvd2ViLWRlcGxveW1lbnQv"}},AS=(t,e)=>{const i=new Dx("secp256k1").keyFromPublic(hS(-4,0),"hex"),s=Nx(t).toString();return i.verify(s,e)},bS=t=>{switch(t.slice(0,4)){case"0001":return(t=>{let e,i="";try{const e=t.split("-"),s=e[1],r=e[2],n=e[3];if(!AS(r,n))return{KX:hS(0,21,1,2,1,7,1,12,5)};const o=Hx.parse(r);i=Jx.decrypt({ciphertext:Hx.parse(s)},o,{mode:Zx,padding:iS,iv:Hx.parse("00000000000000000000000000000001")}).toString($x)}catch(t){return{KX:hS(0,21,1,2,1,7,1,12,5)}}try{e=JSON.parse(i)}catch(t){return{KX:hS(0,21,1,2,1,7,1,12,5)}}if(void 0===e[hS(-1,5)]||null===e[hS(-1,4)]||!e[hS(-1,9)])return{KX:hS(0,21,1,2,1,7,1,12,5)};const s=parseInt(hS(-3,0),10)||Number(parseInt(hS(-3,0),10));return e[hS(-1,5)]<s?{KX:hS(0,21,1,2,1,3,1,4,5)}:vS(e)})(t);case"0002":return(t=>{const e=xS(t),i=e.qX,s=e.iW;if(e.KX||void 0===i||void 0===s)return e;let r,n="";try{const t=i.slice(e.iW,s+16),r=new DataView(t.buffer),o=new Int32Array(4);for(let t=0;t<o.length;t+=1)o[t]=r.getInt32(4*t,!1);const h=tS.create(Array.from(o)),a=s+16,l=i.slice(a,i.length),c=new DataView(l.buffer),u=new Int32Array(Math.floor(l.byteLength/4));for(let t=0;t<u.length;t+=1)u[t]=c.getInt32(4*t,!1);const d=tS.create(Array.from(u)),f=Jx.decrypt({ciphertext:d},h,{mode:Zx,padding:iS,iv:Hx.parse("00000000000000000000000000000001")});n=oS.atob(f.toString($x))}catch(t){return{KX:hS(0,21,1,2,1,7,1,12,5)}}try{r=JSON.parse(n)}catch(t){return{KX:hS(0,21,1,2,1,7,1,12,5)}}return r[hS(-1,37)]?vS(r):{KX:hS(0,21,1,2,1,7,1,12,5)}})(t);default:return{KX:hS(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},CS=(t,e)=>{switch(t.slice(0,4)){case"0001":return((t,e)=>{if(!e)return{KX:hS(0,39,1,40,1,41,5),tW:sS};const i=t.split("-"),s=i[1].slice(1),r=i[2],n=i[3];if(!AS(`${s}-${r}`,n))return{KX:hS(0,21,1,2,1,7,1,12,5)};const o=Uint8Array.from(yS(r,2));let h=0;for(let t=o.length-1;t>0;t-=1)h+=o[t]*2**(8*t);if(h<(parseInt(hS(-3,0),10)||Number(parseInt(hS(-3,0),10))))return{KX:hS(0,21,1,2,1,3,1,4,5)};const a=Int32Array.from(yS(s,8)),l=Ux(e[hS(-1,31)]).toString(Hx),c=Int32Array.from(yS(l,8)),u=Ux(e[hS(-1,32)]).toString(Hx),d=Int32Array.from(yS(u,8)),f=new Int32Array(c.length);for(let t=0;t<f.length;t+=1)f[t]=c[t]^d[t];return a.every(((t,e)=>f[e]===t))?{}:{KX:hS(0,21,1,2,1,7,1,12,5)}})(t,e);case"0002":return((t,e)=>{if(!e)return{KX:hS(0,39,1,40,1,41,5),tW:sS};const i=xS(t),s=i.qX,r=i.iW;if(i.KX||void 0===s||void 0===r)return i;const n=s.slice(r,s.length),o=new DataView(n.buffer),h=new Int32Array(8);for(let t=0;t<h.length;t+=1)h[t]=o.getInt32(4*t,!1);const a=Ux(e[hS(-1,31)]).toString(Hx),l=Int32Array.from(yS(a,8)),c=Ux(e[hS(-1,32)]).toString(Hx),u=Int32Array.from(yS(c,8)),d=new Int32Array(l.length);for(let t=0;t<d.length;t+=1)d[t]=l[t]^u[t];return h.every(((t,e)=>d[e]===t))?{}:{KX:hS(0,21,1,2,1,7,1,12,5)}})(t,e);default:return{KX:hS(0,21,1,2,1,6,1,7,1,8,1,9,1,11,1,10,5)}}},MS=(t,e,i=!0,s)=>{gS=!1,e.Ra();const r=e.Pn,n=!!r&&(r===Wt.document.body||Wt.document.body.contains(r)),o=r&&n?r:document.body;if(void 0===Array.from(o.children).find((t=>"lcjs-error"===t.id))){const r=Wt.document.createElement("div");r.id="lcjs-error",o.append(r),r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.width="100%",r.style.height="100%",r.style.backgroundColor="black",r.style.boxSizing="border-box",r.style.padding="20px",r.style.font="Arial",r.style.fontSize="20px";let n,h=(t||"LICENSE_ERROR").split("_").join(" ");if(h=(i?hS(0,0,1,2,1,23,1,24,25,1):"")+h.charAt(0).toUpperCase()+h.substr(1),s){const t=Wt.document.createElement("a");t.href=s,n=t}else n=Wt.document.createElement("p1");r.append(n),n.innerHTML=h,n.style.color="red",e.MH()&&oS.console.error(h)}},TS=(t,e,i)=>{e?(t[hS(-1,17)](hS(-1,19),i),t[hS(-1,17)](hS(-1,20),i),t[hS(-1,17)](hS(-1,21),i),t[hS(-1,17)](hS(-1,22),i)):(t[hS(-1,18)](hS(-1,19),i),t[hS(-1,18)](hS(-1,20),i),t[hS(-1,18)](hS(-1,21),i),t[hS(-1,18)](hS(-1,22),i))},ES=(t,e)=>{const i=t.split(".").reverse();return e.some((t=>{const e=t.split(".").reverse();let s=!1;const r=e.findIndex((t=>"*"===t)),n=i.every(((t,i)=>{if(!s){if(!(i<e.length))return!1;if(s="*"===e[i]&&i+1>2,!s&&t!==e[i])return!1}return!0}));return!(r>i.length-1||!n)}))},wS=new Map;e.AbstractCursor=$a,e.Animation=Et,e.AnimationEasings=Tt,e.Animator=wt,e.AreaRangeSeries=Su,e.AreaSeries=fu,e.AreaSeriesBipolar=gu,e.AreaSeriesMonopolar=yu,e.AreaSeriesNegative=pu,e.AreaSeriesPositive=mu,e.AreaSeriesTypes=xu,e.AutoFitStrategies=Ya,e.AutoFitStrategy=Xa,e.Axis=Vh,e.Axis3D=El,e.AxisScrollStrategies=ln,e.AxisTickStrategies=cn,e.Band=sn,e.BarChart=qf,e.BarChartBar=Qf,e.BarChartCategoryAxis=jf,e.BarChartSorting=Zf,e.BarChartTypes={Horizontal:"horizontal",Vertical:"vertical"},e.BarChartValueAxis=$f,e.BasicSeries=jc,e.BorderedPicture=Oo,e.BoxFigure=Nc,e.BoxSeries=Qc,e.BoxSeries3D=Ol,e.Button=yh,e.Chart=Oa,e.Chart3D=hc,e.ChartComponent=Cs,e.ChartWithSeries=Nl,e.ChartXY=gd,e.Color=A,e.ColorCSS=t=>{try{if(t.startsWith("rgba")){const e=t.substr(5).slice(0,-1),i=JSON.parse(`[${e}]`);return C(i[0],i[1],i[2],255*i[3])}if(t.startsWith("rgb")){const e=t.substr(4).slice(0,-1),i=JSON.parse(`[${e}]`);return C(i[0],i[1],i[2])}if(t.startsWith("hsl")){const e=t.substr(4).slice(0,-1).split(",").map(parseFloat),i=((t,e,i)=>{e/=100,i/=100;const s=(1-Math.abs(2*i-1))*e,r=t/60,n=s*(1-Math.abs(r%2-1));let o=[];isNaN(t)?o=[0,0,0]:r<=1?o=[s,n,0]:r<=2?o=[n,s,0]:r<=3?o=[0,s,n]:r<=4?o=[0,n,s]:r<=5?o=[n,0,s]:r<=6&&(o=[s,0,n]);const h=i-.5*s;return[Math.round(255*(o[0]+h)),Math.round(255*(o[1]+h)),Math.round(255*(o[2]+h))]})(e[0],e[1],e[2]);return C(i[0],i[1],i[2])}return t.startsWith("#")||t.startsWith("0x")?M(t):M((t=>{const e=w[t.toLowerCase()];if(e)return e;throw new Error(`Unknown color code: ${t}`)})(t))}catch(t){}return console.warn(`ColorCSS parsing error: ${t}`),M("#fff")},e.ColorHEX=M,e.ColorHSV=T,e.ColorPalettes=Is,e.ColorRGBA=C,e.ColorShadingStyles=Ns,e.ColorUint32=E,e.ConstantLine=rn,e.Cursor2D=Ja,e.Cursor3D=ec,e.CursorBuilder2D=qa,e.CursorBuilder3D=ic,e.CursorBuilderXY=$u,e.CursorBuilders=Pf,e.CursorXY=ju,e.CustomTick=Vn,e.Dashboard=Xg,e.DashedLine=nr,e.DataGrid=Lg,e.DataPatternsNew=ws,e.DataSetXY=Do,e.DateTimeTickStrategy=ma,e.EllipseFigure=Jc,e.EllipseSeries=qc,e.EmptyFill=P,e.EmptyTickStrategy=An,e.EmptyUIElement=jn,e.Eventer=Ct,e.Figure=Uc,e.FigureSeries=Yc,e.FontSettings=Hs,e.FormattingFunctions=is,e.FunnelChart=Pd,e.FunnelChartTypes=Xd,e.FunnelChartWithLabelsInsideSlices=Nd,e.FunnelChartWithLabelsOnSides=Ud,e.FunnelSlice=Fd,e.GaugeChart=cg,e.GenericAxis=Tn,e.GlowEffect=ur,e.HeatmapGridSeries=hu,e.HeatmapGridSeriesIntensityValues=au,e.HeatmapScrollingGridSeries=lu,e.HeatmapScrollingGridSeriesIntensityValues=cu,e.Highlighter=Ms,e.Icon=ar,e.ImageFill=Rt,e.IndividualPointFill=H,e.LUT=L,e.LegendBoxBuilders=Dh,e.LineAndPointSeries3D=Ll,e.LineSeries=qu,e.LineSeries3D=Dl,e.LinearGradientFill=tt,e.LinearGradientFillPalette=(t,e,i,s)=>{const r=t(e+1,s);return t=>new tt({stops:[{offset:0,color:r(t).getDarker()},{offset:.5,color:r(t)},{offset:1,color:r(t).getDarker()}],angle:i||90})},e.MapChart=xc,e.MapRegions=Wf,e.MapRegionsAfrica=Vf,e.MapRegionsAsia=_f,e.MapRegionsAustralia=zf,e.MapRegionsCanada=Uf,e.MapRegionsEurope=Nf,e.MapRegionsNorthAmerica=Gf,e.MapRegionsSouthAmerica=Yf,e.MapRegionsUSA=Hf,e.MapRegionsWorld=Xf,e.MapTypes=uc,e.MeshModel3D=tc,e.NumericTickStrategy=Ta,e.OHLCSeries=Nu,e.OHLCSeriesBars=Hu,e.OHLCSeriesCandlesticks=Xu,e.OHLCSeriesTypes=Gu,e.OnScreenMenu=Ku,e.OnScreenMenuAnimationsButton=Nr,e.OnScreenMenuButton=Or,e.OnScreenMenuControlBase=Sr,e.OnScreenMenuCustomButton=Hr,e.OnScreenMenuOsmToggleButton=Gr,e.OnScreenMenuToggleButton=Lr,e.OnScreenMenuZoomInButton=Dr,e.OnScreenMenuZoomInXButton=Pr,e.OnScreenMenuZoomInYButton=Vr,e.OnScreenMenuZoomOutButton=_r,e.OnScreenMenuZoomOutXButton=zr,e.OnScreenMenuZoomOutYButton=Ur,e.OnScreenMenuZoomToFitButton=Xr,e.PalettedFill=W,e.Panel=Ra,e.ParallelCoordinateAxis=yg,e.ParallelCoordinateChart=mg,e.ParallelCoordinateSeries=pg,e.PhongShadingStyle=zs,e.Picture=Io,e.PieChart=gl,e.PieChartTypes=vl,e.PieChartWithLabelsInsideSlices=Sl,e.PieChartWithLabelsOnSides=xl,e.PieSlice=cl,e.PixelatedPoints3D=qs,e.PointCloudSeries3D=zl,e.PointLineAreaSeries=td,e.PointLineSeries=Mu,e.PointLineSeries3D=Pl,e.PointSeries=Zu,e.PointSeries3D=_l,e.PointSeriesTypes3D=Ul,e.PointStyle3D=Ks,e.PolarAreaSeries=Ed,e.PolarAreaSeriesInterior=wd,e.PolarAxis=Ac,e.PolarAxisAmplitude=Cc,e.PolarAxisTick=bc,e.PolarChart=Bd,e.PolarHeatmapSeries=Vc,e.PolarLineSeries=_c,e.PolarPointLineSeries=zc,e.PolarPointSeries=Cd,e.PolarPolygon=Md,e.PolarPolygonSeries=Td,e.PolarSector=Lc,e.PolarSeries=Pc,e.PolygonFigure=Zc,e.PolygonSeries=Kc,e.PyramidChart=Qd,e.PyramidChartTypes=ef,e.PyramidChartWithLabelsInsideSlices=tf,e.PyramidChartWithLabelsOnSides=Kd,e.PyramidSlice=Yd,e.RadialGradientFill=q,e.RadialGradientFillPalette=(t,e,i)=>{const s=t(e+1,i);return t=>new q({stops:[{offset:0,color:s(t)},{offset:1,color:s(t).getDarker()}]})},e.RangeSeries=du,e.RectangleFigure=tu,e.RectangleSeries=eu,e.SegmentFigure=iu,e.SegmentSeries=su,e.Series2D=Dc,e.Series3D=Il,e.SeriesXY=Xc,e.SimpleShadingStyle=Vs,e.Slice=ll,e.SliceLabelFormatters=al,e.SliceSorters=hl,e.SolidFill=N,e.SolidFillPalette=(t,e,i)=>{const s=t(e,i);return t=>new N({color:s(t)})},e.SolidLine=er,e.SpiderAxis=hf,e.SpiderChart=pf,e.SpiderSeries=af,e.SplineSeries=Bu,e.StepSeries=Uu,e.StipplePatterns=sr,e.SurfaceGridSeries3D=Wl,e.SurfaceScrollingGridSeries3D=jl,e.TextFigure=nu,e.TextSeries=ou,e.Themes=Ig,e.Tick=Ph,e.TickStyle=Gh,e.TimeFormattingFunctions=ea,e.TimeTickStrategy=sa,e.TreeMapChart=ag,e.TriangulatedPoints3D=$s,e.UIBackgrounds=Wa,e.UICircle=jo,e.UIColumnGrid=class extends th{constructor(){super(...arguments),this.Jd=[]}addColumn(){return this.addElement(nh,void 0)}getColumn(t,e=!1){return e&&this.Jd.length<=t?(this.addColumn(),this.getColumn(t,!0)):this.Jd[t]}},e.UIDiamond=$o,e.UIElementBuilders=Lh,e.UIElementColumn=eh,e.UIElementLine=Ko,e.UIElementRow=th,e.UIElementWithBackground=Ln,e.UIEmptyBackground=$n,e.UILabel=Go,e.UILayoutBuilders=lc,e.UILayoutGap=Zo,e.UILegendBoxPanel=cc,e.UIObject=In,e.UIOrigins=Wr,e.UIPanel=Ia,e.UIPoint=Jo,e.UIPointer=Qo,e.UIPolygon=Lo,e.UIRectangle=Wo,e.UIRowGrid=sh,e.VisibleFill=U,e.ZoomBandChart=Ad,e._translatePoint=ot,e.defaultAxisIntervalRestrictionsXY=zh,e.defaultOsmBackgroundColor=tn,e.disableTextShadows=t=>{var e,i,s;return{...t,dataGridTextShadow:void 0,pieChartSliceLabelShadow:void 0,funnelChartSliceLabelShadow:void 0,spiderChartScaleLabelShadow:void 0,pyramidChartSliceLabelShadow:void 0,xAxisTimeTicks:t.xAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisTimeTicks:t.yAxisTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DTimeTicks:t.xAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DTimeTicks:t.yAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DTimeTicks:t.zAxis3DTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisNumericTicks:t.xAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisNumericTicks:t.yAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxisDateTimeTicks:t.xAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxisDateTimeTicks:t.yAxisDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DNumericTicks:t.xAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DNumericTicks:t.yAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DNumericTicks:t.zAxis3DNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),xAxis3DDateTimeTicks:t.xAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),yAxis3DDateTimeTicks:t.yAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),zAxis3DDateTimeTicks:t.zAxis3DDateTimeTicks.setTickStyle((t=>t.setLabelShadow(void 0))),barChartValueAxisTicks:t.barChartValueAxisTicks.setTickStyle((t=>t.setLabelShadow(void 0))),polarAmplitudeAxisNumericTicks:t.polarAmplitudeAxisNumericTicks.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisTimeTicks:null===(e=t.parallelCoordinateAxisTimeTicks)||void 0===e?void 0:e.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisNumericTicks:null===(i=t.parallelCoordinateAxisNumericTicks)||void 0===i?void 0:i.setTickStyle((t=>t.setLabelShadow(void 0))),parallelCoordinateAxisDateTimeTicks:null===(s=t.parallelCoordinateAxisDateTimeTicks)||void 0===s?void 0:s.setTickStyle((t=>t.setLabelShadow(void 0)))}},e.disableThemeEffects=t=>({...t,effect:void 0}),e.emptyFill=V,e.emptyLine=Ot,e.emptyPoints3D=Ws,e.emptyTick=Wh,e.formatLongitudeLatitude=Sc,e.formatNumberAsUnicodeSuperscript=ss,e.htmlTextRenderer=xr,e.isArtificialLCJSEvent=t=>!0===t.isLcjsArtificialEvent,e.isColor=b,e.isCoordinate3D=Ql,e.isCoordinateBarChart=Jf,e.isCoordinateClient=us,e.isCoordinatePolar=kc,e.isCoordinateXY=fs,e.isDashedLine=or,e.isEmptyFill=_,e.isEmptyTick=jh,e.isFontSettings=Gs,e.isGlowEffect=t=>!(!t||"object"!=typeof t||!("type"in t)||"glow"!==t.type),e.isHitBox=t=>t&&"object"==typeof t&&"figure"in t&&"start"in t&&"end"in t&&"median"in t&&"upperQuartile"in t,e.isHitBox3D=t=>t&&"object"==typeof t&&"xSize"in t&&"ySize"in t&&"zSize"in t,e.isHitEllipse=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"radiusX"in t&&"radiusY"in t,e.isHitHeatmap=at,e.isHitMeshModel=ut,e.isHitOHLC=t=>t&&"object"==typeof t&&"position"in t&&"open"in t&&"high"in t&&"isPacked"in t,e.isHitPolarHeatmap=ct,e.isHitPolygon=t=>t&&"object"==typeof t&&"figure"in t&&"x"in t&&"coordinates"in t,e.isHitRectangle=t=>t&&"object"==typeof t&&"figure"in t&&"x1"in t&&"y2"in t&&"height"in t,e.isHitSampleXY=t=>t&&"object"==typeof t&&"x"in t&&"y"in t,e.isHitSegment=t=>t&&"object"==typeof t&&"figure"in t&&"startX"in t&&"endX"in t,e.isHitSurface=lt,e.isIcon=lr,e.isImageFill=Ft,e.isIndividualPointFill=G,e.isLUT=t=>!(!t||"object"!=typeof t||!("type"in t)||"lut"!==t.type),e.isLinearGradientFill=et,e.isPalettedFill=j,e.isPhongShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"phong"!==t.type),e.isPixelatedPoints3D=Zs,e.isRadialGradientFill=Z,e.isSeriesSupportedByZoomBandChart=t=>t instanceof jc||t instanceof fu||t instanceof Su||t instanceof au||t instanceof Nu||t instanceof Uu||t instanceof td,e.isSimpleShadingStyle=t=>!(!t||"object"!=typeof t||!("type"in t)||"simple"!==t.type),e.isSolidFill=X,e.isSolidLine=ir,e.isTickStyle=Yh,e.isTriangulatedPoints3D=Qs,e.lightningChart=(t,e)=>{const i="object"==typeof t?t.license:t,s="object"==typeof t?t.licenseInformation:e,r="object"==typeof t?t:void 0,n=new fS;n.e=i;let o=wS.get(i||"E");return o||(o=((t,e)=>{let i,s,r=!1,n=!1,o=!1,h=!1,a="",l=!1,c=!1,u=!1;try{if(aS){const s=(()=>{if(!aS)return;const t=aS.split("-");if(t.length>0)switch(t[0]){case"0001":return"0001";case"0002":return"0002";case"T001":return"T001";case"P001":return"P001";default:return}})(),a=t&&"cGx1Z2lu"in t;if("0001"===s){uS=new Uint8Array([2]);const e=(()=>{if(!aS)return;const t=aS.split("-");return 4===t.length?t[1].startsWith("m")?2:1:0})();if(1===e){const t=bS(aS);o=!t.sW,i=t,r=!0}else 2===e?(i=CS(aS,t),n=!0):(gS=!0,i=SS(aS),h=!0);a&&(i={KX:hS(0,0,1,7,1,12,5)})}else if("0002"===s){const e=(()=>{if(!aS)return;const t=aS.split("-");return t.length>=2?Uint8Array.from(oS.atob(t[1]),(t=>t.charCodeAt(0)))[0]:void 0})();if(104===e)gS=!0,i=SS(aS),h=!0;else if(189===e){const t=bS(aS);o=!t.sW,i=t,r=!0}else 159===e?(i=CS(aS,t),n=!0):i={KX:hS(0,0,1,7,1,12,5)};const s=uS.length>3&&2&uS[3];(s&&!a||!s&&a||s&&a&&"cHl0aG9u"!==t.cGx1Z2lu)&&(i={KX:hS(0,0,1,7,1,12,5)})}else if("T001"===s){const s=((t,e)=>{const i=aS.split("-");if(3!==i.length)return{KX:hS(0,0,1,7,1,12,5)};const s=`${i[1]}`,r=Array.prototype.reduce.call(oS.atob(i[2]),((t,e)=>t+`0${e.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!AS(s,r))return{KX:hS(0,0,1,7,1,12,5)};let n=0;const o=Uint8Array.from(oS.atob(i[1]),(t=>t.charCodeAt(n))),h=o.subarray(n,n+=20),a=new DataView(o.buffer).getUint16(n,!0);n+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=o[t+n]^h[t%h.byteLength];n=0;const c=new DataView(l.buffer),u=pS(l.subarray(n,n+=4)),d=hS(-3,0);if(!u)return{KX:hS(0,0,1,7,1,12,5)};if(u<d)return{KX:hS(0,40,1,2,1,7,1,8,1,10,1,59,1,60,1,6,5)};const f=new Date,g=new Date;f.setDate(f.getDate()+1),g.setDate(g.getDate()-1);const y=mS(g),p=mS(f);if(u<y||u>p)return{KX:hS(0,0,1,2,1,3,1,4,5)};const m=c.getUint16(n,!0),x=l.subarray(n+=2,n+m);if(uS=new Uint8Array(x),e&&"dHJhZGVy"in e&&"dGVjaG5pY2FsIGFuYWx5c2lz"===e.dHJhZGVy)return{eW:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="};if(e&&"logoGraphic"in e&&e.logoGraphic){const t=e.logoGraphic.split("-");return 3===t.length&&AS(t[0],t[2])?{eW:t[0]}:{KX:hS(0,0,1,7,1,12,5)}}return{KX:hS(0,0,1,7,1,12,5)}})(0,t);i=s;const n=s.eW;n&&e?("string"==typeof n&&(e.l=n),r=!0):i={KX:hS(0,0,1,7,1,12,5)}}else"P001"===s?(i=((t,e)=>{const i=aS.split("-");if(3!==i.length)return{KX:hS(0,0,1,7,1,12,5)};const s=`${i[0]}-${i[1]}`,r=Array.prototype.reduce.call(oS.atob(i[2]),((t,e)=>t+`0${e.charCodeAt(0).toString(16)}`.slice(-2)),"");if(!AS(s,r))return{KX:hS(0,0,1,7,1,12,5)};let n=0;const o=Uint8Array.from(oS.atob(i[1]),(t=>t.charCodeAt(0)));n+=1;const h=o.subarray(n,n+=20),a=new DataView(o.buffer).getUint16(n,!0);n+=2;const l=Uint8Array.from(Array(a));for(let t=0;t<a;t+=1)l[t]=o[t+n]^h[t%h.byteLength];n=0;const c=new DataView(l.buffer).getUint16(n,!0);n+=2;const u=l.subarray(n,c+n),d=new TextDecoder("utf-8").decode(u);return e&&"cGx1Z2lu"in e&&d===oS.atob(e.cGx1Z2lu)?(uS=new Uint8Array([38]),{}):{KX:hS(0,0,1,7,1,12,5)}})(0,t),!i.KX&&e&&(r=!0,c=!0)):i={KX:hS(0,0,1,7,1,12,5)}}else{const e=/^(10\.|172\.(1[6-9]|2[0-9]|3[0-1])|192\.168)\./;["localhost","127.0.0.1","::1"].includes(oS[hS(-1,6)][hS(-1,7)])||e.test(oS[hS(-1,6)][hS(-1,7)])?i={KX:hS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68),tW:dS(t)}:oS[hS(-1,6)][hS(-1,40)]===oS.atob("c3RhY2tzbmlwcGV0cy5uZXQ=")?(u=!0,l=!1,uS=new Uint8Array([38]),i={}):(u=!0,l=!0,uS=new Uint8Array([38]),i={})}}catch(t){i={KX:hS(0,0,1,7,1,12,5)}}try{h&&(s=oS[hS(-1,34)][hS(-1,35)](hS(-1,39))||void 0)}catch(t){oS.console.error(t)}let d=!1;if(s){const t=s.split("-");if(2===t.length&&AS(t[0],t[1])){const[e,i]=t[0].split(":").map((t=>Number(t)));Date.now()-i<.95*e*1e3&&(d=!0)}}const f=!(u||l||c||i.KX||r||n||d),g=(()=>{const t=new(oS[hS(-1,0)]);return t.open(hS(0,26),hS(-2,0)),t.setRequestHeader(hS(-1,24),hS(-1,25)),t.withCredentials=!0,t})(),y=new Ct;if(f){let t;try{t=parseInt(aS?aS.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(e){t=Math.floor(1e6*Math.random())}const i=Math.floor(1e6*Math.random());a=(t^i).toString();const s={};let r="",n="",o="";aS=aS||"";const h=hS(-4,0);for(let t=0;t<aS.length;t+=1){const e=aS.charCodeAt(t)^h.charCodeAt(t);r+=String.fromCharCode(e)}const l=hS(-3,0);for(let t=0;t<l.length;t+=1)n+=String.fromCharCode(l.charCodeAt(t)^h.charCodeAt(t));for(let t=0;t<a.length;t+=1)o+=String.fromCharCode(a.charCodeAt(t)^h.charCodeAt(t));s[hS(-1,3)]=oS.btoa(r),s[hS(-1,4)]=oS.btoa(n),s.h=oS.btoa(o),s.v=3,s.s=oS[hS(-1,34)][hS(-1,35)](hS(-1,33))||void 0,g.send(JSON.stringify(s))}return(r,n)=>{const h=[],u={Ma:t=>{h.indexOf(t)>=0||(h.push(t),d())},_a:y},d=()=>{h.forEach((t=>{const e=m(t);if(!e)return;const{hW:i,rW:s}=e,r=s?hS(-2,1):void 0,n=`${hS(0,40,1,42,1,43,1,44,1,45,1,46,1,47,1)}${i}${r?hS(0,5,1,63,1,64,1,59,1,65,1,41,5):""}`;MS(n,x,!1,r)}))},p=t=>oS.atob(t),m=t=>{const e=Object.values(zn).includes(t)?t:void 0;if(e){switch(t){case zn.co:return lS.ao||lS.co?void 0:{hW:p(e),rW:!0};case zn.Ao:return lS.ao||lS.Ao?void 0:{hW:p(e),rW:!0};case zn.po:return lS.ao||lS.lo||lS.po?void 0:{hW:p(e),rW:!0};case zn.lo:return lS.ao||lS.lo?void 0:{hW:p(e),rW:!0};case zn.So:return lS.ao||lS.lo||lS.So?void 0:{hW:p(e),rW:!0};case zn.wo:return lS.ao||lS.lo||lS.wo?void 0:{hW:p(e),rW:!0};case zn.To:return lS.ao||lS.lo||lS.To?void 0:{hW:p(e),rW:!0};case zn.Io:return lS.ao||lS.lo||lS.Io?void 0:{hW:p(e),rW:!0};case zn.Po:return lS.ao||lS.lo||lS.Po?void 0:{hW:p(e),rW:!0};case zn.Fo:return lS.ao||lS.lo||lS.Fo?void 0:{hW:p(e),rW:!0};case zn.yo:return lS.ao||lS.lo||lS.yo?void 0:{hW:p(e),rW:!0};case zn.Mo:return lS.ao||lS.lo||lS.Mo?void 0:{hW:p(e),rW:!0};case zn.xo:return lS.ao||lS.lo||lS.xo?void 0:{hW:p(e),rW:!0};case zn._o:return lS.ao||lS.lo||lS._o?void 0:{hW:p(e),rW:!0};case zn.ko:return lS.ao||lS.lo||lS.ko?void 0:{hW:p(e),rW:!0};case zn.Co:return lS.ao||lS.lo||lS.Co?void 0:{hW:p(e),rW:!0};case zn.vo:return lS.ao||lS.lo||lS.vo?void 0:{hW:p(e),rW:!0};case zn.mo:return lS.ao||lS.lo||lS.mo?void 0:{hW:p(e),rW:!0};case zn.bo:return lS.ao||lS.lo||lS.bo?void 0:{hW:p(e),rW:!0};case zn.Lo:return lS.ao||lS.lo||lS.Lo?void 0:{hW:p(e),rW:!0};case zn.Bo:return lS.ao||lS.lo||lS.Bo?void 0:{hW:p(e),rW:!0};case zn.ao:case zn.uo:case zn.fo:case zn.do:case zn.Do:return}return Ye(0,"")}},x=new yx(n,r,u);(null==i?void 0:i.KX)&&MS(i.KX,x,void 0,i.tW);const S=t=>{if("error"===(null==t?void 0:t.type)&&s){const t=s.split("-");if(2===t.length&&AS(t[0],t[1])){const[,e]=t[0].split(":").map((t=>Number(t))),i=Date.now();if(e+rS>i)return gS=!1,void TS(g,!1,v)}}if(g.readyState===oS[hS(-1,0)].DONE)if(200===g.status){const t=JSON.parse(g[hS(-1,23)]);if(!AS(a+hS(-3,0),t.h)){const t=hS(0,0,1,27,1,28,1,29,1,30,1,31,5);MS(t,x)}oS[hS(-1,34)][hS(-1,36)](hS(-1,39),t.t),oS[hS(-1,34)][hS(-1,36)](hS(-1,33),t.s),gS=!1}else{let e=hS(0,0,1,2,1,7,1,12,5);try{e=t&&"loadend"!==t.type?hS(0,0,1,23,1,32,1,24,5):JSON.parse(g[hS(-1,23)]).message,TS(g,!1,v)}catch(t){console.error(t)}MS(e,x,void 0,"aHR0cHM6Ly9saWdodG5pbmdjaGFydC5jb20vanMtY2hhcnRzL2RvY3MvbGljZW5zZXMvZGV2ZWxvcGVyLWxpY2Vuc2Vz")}},v=t=>{S(t)};if(TS(g,!0,v),f?setTimeout((()=>{if(gS){let t=!0;if(s){const e=s.split("-");if(2===e.length&&AS(e[0],e[1])){const[,i]=e[0].split(":").map((t=>Number(t))),s=Date.now();i+rS>s&&(t=!1)}}t&&MS(hS(0,25,1,23,1,32,1,24,5),x)}}),1e4):TS(g,!1,v),l){const i=(()=>{const t=new(oS[hS(-1,0)]);return t.open(hS(0,26),hS(1,0)),t.setRequestHeader("Content-Type","text/plain"),t.withCredentials=!0,t})(),s=Array.from({length:10},(()=>String.fromCharCode(Math.floor(256*Math.random())))).join(""),r=r=>{if("error"===(null==r?void 0:r.type)){const e=hS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);MS(e,x,!1,dS(t)),TS(g,!1,n)}if(i.readyState===oS.XMLHttpRequest.DONE){const r=i.getResponseHeader("X-LCJS-SANDBOX-V");if(200!==i.status||r&&"1"!==r){const e=hS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);MS(e,x,!1,dS(t)),TS(g,!1,n)}else{const r=JSON.parse(i.responseText);if(!AS(s,r.s)){const e=hS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);MS(e,x,!1,dS(t)),TS(g,!1,n)}void 0!==e&&(e.l=r.l),y.O("logochange",{logoDataURI:r.l})}}else{const e=hS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);MS(e,x,!1,dS(t)),TS(g,!1,n)}},n=t=>{r(t)};TS(i,!0,n),i.send(s),setTimeout((()=>{if(i.readyState<2){const e=hS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);MS(e,x,!1,dS(t)),TS(g,!1,n)}}),1e4)}if(c){const i=(()=>{const t=new(oS[hS(-1,0)]);return t.open(hS(0,26),hS(1,1)),t.setRequestHeader(hS(-1,24),hS(-1,25)),t.withCredentials=!0,t})();let s;try{s=parseInt(aS?aS.split("-")[1]:Math.floor(1e6*Math.random()).toString(),16)}catch(t){s=Math.floor(1e6*Math.random())}const r=Math.floor(1e6*Math.random());a=(s^r).toString();const n={};let o="",h="";aS=aS||"";const l=hS(-4,0);for(let t=0;t<aS.length;t+=1){const e=aS.charCodeAt(t)^l.charCodeAt(t);o+=String.fromCharCode(e)}for(let t=0;t<a.length;t+=1)h+=String.fromCharCode(a.charCodeAt(t)^l.charCodeAt(t));n[hS(-1,3)]=oS.btoa(o),n.h=oS.btoa(h),n.v=1,i.send(JSON.stringify(n));const c=s=>{var r;if("error"===(null==s?void 0:s.type)){const e=hS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);MS(e,x,!1,dS(t)),TS(g,!1,u)}if(i.readyState===oS.XMLHttpRequest.DONE)if(200===i.status){const s=JSON.parse(i.responseText);if(!AS(a,s.h)){const e=hS(0,0,1,7,1,12,5);MS(e,x,!1,dS(t)),TS(g,!1,u)}const r=s.l.split("-"),n=r[0],o=r[1];if(AS(n,o))void 0!==e&&(e.l=n,y.O("logochange",{logoDataURI:n}));else{const e=hS(0,0,1,7,1,12,5);MS(e,x,!1,dS(t))}const h=s.f,l=Uint8Array.from(oS.atob(h),(t=>t.charCodeAt(0)));let c=0;const f=l.subarray(c,c+=20),p=new DataView(l.buffer).getUint16(c,!0);c+=2;const m=Uint8Array.from(Array(p));for(let t=0;t<p;t+=1)m[t]=l[t+c]^f[t%f.byteLength];const S=new DataView(m.buffer);c=0;const v=Uint8Array.from(Array(S.getUint16(c,!0)));c+=2,v.set(m.subarray(c,c+=v.byteLength)),uS=new Uint8Array(v),e&&e.e&&d()}else{const e=null!==(r=JSON.parse(i.responseText).message)&&void 0!==r?r:hS(0,0,1,7,1,12,5);MS(e,x,!1,dS(t)),TS(g,!1,u)}else{const e=hS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);MS(e,x,!1,dS(t)),TS(g,!1,u)}},u=t=>{c(t)};TS(i,!0,u),setTimeout((()=>{if(i.readyState<2){const e=hS(0,0,1,2,1,43,1,66,5,1,63,1,64,1,46,1,67,1,68);MS(e,x,!1,dS(t)),TS(g,!1,u)}}),1e4)}return o?(t=>{let e;gS=!1;const i=()=>{e&&(t.Sa(e.xa()),e=void 0);const i=t.Mi();e=t.Kk("deployment test"),e.mn(t.ct).jr(hS(0,34,1,33)).th({x:i.x/2,y:i.y/2}).wl(50).br(13).Je(new N({color:C(128,128,128,100)})).bl("Arial").Cl(500).setPointerEvents(!1),t.va().ya()};t.V("resize",(()=>{i()})),setTimeout(i,0),setInterval((()=>{e&&e.xa()<t.Xa()-1?i():e||i()}),1e3)})(x):g.readyState===oS[hS(-1,0)].DONE&&S(),x}})(s,n)),((t,e,i,s)=>{var r,n,o,h,a,l,c,u;let d;if(i&&i.license){const t=i.license.split("-");d=t[t.length-1]}const f=null===(r=null==i?void 0:i.webgl)||void 0===r?void 0:r.version,g={XD:null===(n=null==i?void 0:i.sharedContextOptions)||void 0===n?void 0:n.canvas,ka:null==i?void 0:i.warnings,eE:"webgl1"===f?1:"webgl2"===f?2:void 0,qD:!1!==(null===(o=null==i?void 0:i.sharedContextOptions)||void 0===o?void 0:o.antialias),KD:(null===(h=null==i?void 0:i.sharedContextOptions)||void 0===h?void 0:h.devicePixelRatio)||void 0,dE:(null===(a=null==i?void 0:i.sharedContextOptions)||void 0===a?void 0:a.noCanvasStyles)||void 0,pE:(null===(l=null==i?void 0:i.sharedContextOptions)||void 0===l?void 0:l.noCanvasTransform)||void 0,iE:!1!==(null===(c=null==i?void 0:i.sharedContextOptions)||void 0===c?void 0:c.useStackingOrder),sE:!1!==(null===(u=null==i?void 0:i.sharedContextOptions)||void 0===u?void 0:u.useIndividualCanvas),fE:d||void 0},y=new rp(g),p=e=>t({...e,textRenderer:e.textRenderer?e.textRenderer:void 0,textPixelSnappingEnabled:void 0!==(null==e?void 0:e.textPixelSnappingEnabled)?e.textPixelSnappingEnabled:!(null==e?void 0:e.textRenderer)&&void 0},y);return{Dashboard:np(p,e,i,s),ChartXY:ap(p,e,i,s),Spider:lp(p,e,i,s),Polar:cp(p,e,i,s),Pie:up(p,e,i,s),UIPanel:hp(p,e,i,s),Gauge:dp(p,e,i,s),Funnel:fp(p,e,i,s),Pyramid:gp(p,e,i,s),Chart3D:pp(p,e,i,s),Map:yp(p,e,i,s),DataGrid:mp(p,e,i,s),BarChart:xp(p,e,i,s),ParallelCoordinateChart:Ap(p,e,i,s),ZoomBandChart:Sp(p,e,i,s),TreeMapChart:vp(p,e,i,s),dispose:y.U.bind(y),layout:y.SE.bind(y)}})(o,n.e,r,n.l)},e.onScreenMenuControlBaseHeight=Qr,e.onScreenMenuControlBaseWidth=Jr,e.onScreenMenuControlOpacity=qr,e.onScreenMenuDefaultButtonShape=Kr,e.onScreenMenuSpriteURL=Zr,e.regularColorSteps=(t,e,i,s)=>{if(!i||0===i.length)throw new Error("Invalid use regularColorSteps 'colorPalette' is undefined or empty");const r=null==s?void 0:s.formatLabels,n=null==s?void 0:s.alpha;return i.map(((s,o)=>{const h=t+o/(i.length-1)*(e-t);return{color:void 0!==n?s.setA(n):s,value:h,label:r?r(h):void 0}}))},e.saveToFile=Ea,e.scaleTheme=(t,e)=>{const i=Object.fromEntries(Object.entries(t).map((([t,i])=>{if(Gs(i))return[t,i.setSize(i.getSize()*e)];if("panelPadding"===t||"chartXYPadding"===t){const s=i;return[t,{left:s.left*e,right:s.left*e,top:s.top*e,bottom:s.bottom*e}]}if("polarRadialAxisTickStyle"===t){const s=i;return[t,s.setTickLength(s.getTickLength()*e).setLabelFont((t=>t.setSize(t.getSize()*e))).setTickPadding(s.getTickPadding()*e)]}if("object"==typeof i&&"setTickStyle"in i)return[t,i.setTickStyle((t=>t.setTickLength(t.getTickLength()*e).setLabelFont((t=>t.setSize(t.getSize()*e))).setTickPadding(t.getTickPadding()*e)))];if("barChartValueLabelsAfterBars"===t||"barChartValueLabelsInsideBars"===t||"barChartCategoryLabels"===t){const s=i;return[t,{...s,labelFont:s.labelFont.setSize(s.labelFont.getSize()*e)}]}return[t,i]})));return[["uiButtonSize",10],["chartXYTitleMargin",5],["legendPadding",5],["uiTextPadding",5],["legendLUTLabelMargin",7],["legendLUTUnitLabelMargin",7],["legendLUTLengthHorizontal",160],["legendLUTLengthVertical",140],["legendLUTThicknessHorizontal",15],["legendLUTThicknessVertical",25],["dataGridCellPadding",5],["dataGridScrollBarThickness",20],["gaugeChartBarThickness",40],["gaugeChartValueIndicatorThickness",10],["gaugeChartNeedleLength",40],["gaugeChartNeedleThickness",10],["gaugeChartGapBetweenBarAndValueIndicators",10]].forEach((t=>{var s;const r=t[0],n=t[1];i[r]=(null!==(s=i[r])&&void 0!==s?s:n)*e})),i.cursorPointMarkerSize={x:i.cursorPointMarkerSize.x*e,y:i.cursorPointMarkerSize.y*e},i},e.synchronizeAxisIntervals=ht,e.transparentFill=jr,e.transparentLine=$r,e.uint32ColorFromObject=t=>R(255*t.r,255*t.g,255*t.b,255*t.a),e.uint32ColorFromRGBA=R,e.useCursorDataPointColor=Va,e.useCursorFormatterSeriesOverride=Pa,e.vec3Utils=oi,e.xDimensionStrategy=Uh,e.yDimensionStrategy=Nh},568:(t,e,i)=>{i.r(e),i.d(e,{Collection:()=>M,Iterable:()=>Cs,List:()=>ri,Map:()=>Le,OrderedMap:()=>xi,OrderedSet:()=>ns,PairSorting:()=>cs,Range:()=>Xi,Record:()=>us,Repeat:()=>xs,Seq:()=>j,Set:()=>Di,Stack:()=>Mi,default:()=>Ms,fromJS:()=>Ss,get:()=>re,getIn:()=>Hi,has:()=>se,hasIn:()=>Yi,hash:()=>ft,is:()=>lt,isAssociative:()=>C,isCollection:()=>x,isImmutable:()=>I,isIndexed:()=>b,isKeyed:()=>v,isList:()=>si,isMap:()=>ot,isOrdered:()=>L,isOrderedMap:()=>ht,isOrderedSet:()=>Fi,isPlainObject:()=>te,isRecord:()=>F,isSeq:()=>k,isSet:()=>Ri,isStack:()=>Ci,isValueObject:()=>at,merge:()=>ve,mergeDeep:()=>be,mergeDeepWith:()=>Ce,mergeWith:()=>Ae,remove:()=>oe,removeIn:()=>de,set:()=>he,setIn:()=>ce,update:()=>ge,updateIn:()=>ae,version:()=>bs});var s="delete",r=32,n=31,o={};function h(t){t&&(t.value=!0)}function a(){}function l(t){return void 0===t.size&&(t.size=t.__iterate(u)),t.size}function c(t,e){if("number"!=typeof e){var i=e>>>0;if(""+i!==e||4294967295===i)return NaN;e=i}return e<0?l(t)+e:e}function u(){return!0}function d(t,e,i){return(0===t&&!p(t)||void 0!==i&&t<=-i)&&(void 0===e||void 0!==i&&e>=i)}function f(t,e){return y(t,e,0)}function g(t,e){return y(t,e,e)}function y(t,e,i){return void 0===t?i:p(t)?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function p(t){return t<0||0===t&&1/t==-1/0}var m="@@__IMMUTABLE_ITERABLE__@@";function x(t){return Boolean(t&&t[m])}var S="@@__IMMUTABLE_KEYED__@@";function v(t){return Boolean(t&&t[S])}var A="@@__IMMUTABLE_INDEXED__@@";function b(t){return Boolean(t&&t[A])}function C(t){return v(t)||b(t)}var M=function(t){return x(t)?t:j(t)},T=function(t){function e(t){return v(t)?t:$(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(M),E=function(t){function e(t){return b(t)?t:Q(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(M),w=function(t){function e(t){return x(t)&&!C(t)?t:J(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(M);M.Keyed=T,M.Indexed=E,M.Set=w;var B="@@__IMMUTABLE_SEQ__@@";function k(t){return Boolean(t&&t[B])}var R="@@__IMMUTABLE_RECORD__@@";function F(t){return Boolean(t&&t[R])}function I(t){return x(t)||F(t)}var O="@@__IMMUTABLE_ORDERED__@@";function L(t){return Boolean(t&&t[O])}var D="function"==typeof Symbol&&Symbol.iterator,P="@@iterator",V=D||P,_=function(t){this.next=t};function z(t,e,i,s){var r=0===t?e:1===t?i:[e,i];return s?s.value=r:s={value:r,done:!1},s}function U(){return{value:void 0,done:!0}}function N(t){return!!Array.isArray(t)||!!G(t)}function X(t){return t&&"function"==typeof t.next}function H(t){var e=G(t);return e&&e.call(t)}function G(t){var e=t&&(D&&t[D]||t[P]);if("function"==typeof e)return e}_.prototype.toString=function(){return"[Iterator]"},_.KEYS=0,_.VALUES=1,_.ENTRIES=2,_.prototype.inspect=_.prototype.toSource=function(){return this.toString()},_.prototype[V]=function(){return this};var Y=Object.prototype.hasOwnProperty;function W(t){return!(!Array.isArray(t)&&"string"!=typeof t)||t&&"object"==typeof t&&Number.isInteger(t.length)&&t.length>=0&&(0===t.length?1===Object.keys(t).length:t.hasOwnProperty(t.length-1))}var j=function(t){function e(t){return null==t?et():I(t)?t.toSeq():function(t){var e,i,s=rt(t);if(s)return(i=G(e=t))&&i===e.entries?s.fromEntrySeq():function(t){var e=G(t);return e&&e===t.keys}(t)?s.toSetSeq():s;if("object"==typeof t)return new Z(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var i=this._cache;if(i){for(var s=i.length,r=0;r!==s;){var n=i[e?s-++r:r++];if(!1===t(n[1],n[0],this))break}return r}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var i=this._cache;if(i){var s=i.length,r=0;return new _((function(){if(r===s)return{value:void 0,done:!0};var n=i[e?s-++r:r++];return z(t,n[0],n[1])}))}return this.__iteratorUncached(t,e)},e}(M),$=function(t){function e(t){return null==t?et().toKeyedSeq():x(t)?v(t)?t.toSeq():t.fromEntrySeq():F(t)?t.toSeq():it(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(j),Q=function(t){function e(t){return null==t?et():x(t)?v(t)?t.entrySeq():t.toIndexedSeq():F(t)?t.toSeq().entrySeq():st(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(j),J=function(t){function e(t){return(x(t)&&!C(t)?t:Q(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(j);j.isSeq=k,j.Keyed=$,j.Set=J,j.Indexed=Q,j.prototype[B]=!0;var q=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[c(this,t)]:e},e.prototype.__iterate=function(t,e){for(var i=this._array,s=i.length,r=0;r!==s;){var n=e?s-++r:r++;if(!1===t(i[n],n,this))break}return r},e.prototype.__iterator=function(t,e){var i=this._array,s=i.length,r=0;return new _((function(){if(r===s)return{value:void 0,done:!0};var n=e?s-++r:r++;return z(t,n,i[n])}))},e}(Q),Z=function(t){function e(t){var e=Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return Y.call(this._object,t)},e.prototype.__iterate=function(t,e){for(var i=this._object,s=this._keys,r=s.length,n=0;n!==r;){var o=s[e?r-++n:n++];if(!1===t(i[o],o,this))break}return n},e.prototype.__iterator=function(t,e){var i=this._object,s=this._keys,r=s.length,n=0;return new _((function(){if(n===r)return{value:void 0,done:!0};var o=s[e?r-++n:n++];return z(t,o,i[o])}))},e}($);Z.prototype[O]=!0;var K,tt=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var i=H(this._collection),s=0;if(X(i))for(var r;!(r=i.next()).done&&!1!==t(r.value,s++,this););return s},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var i=H(this._collection);if(!X(i))return new _(U);var s=0;return new _((function(){var e=i.next();return e.done?e:z(t,s++,e.value)}))},e}(Q);function et(){return K||(K=new q([]))}function it(t){var e=rt(t);if(e)return e.fromEntrySeq();if("object"==typeof t)return new Z(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function st(t){var e=rt(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function rt(t){return W(t)?new q(t):N(t)?new tt(t):void 0}var nt="@@__IMMUTABLE_MAP__@@";function ot(t){return Boolean(t&&t[nt])}function ht(t){return ot(t)&&L(t)}function at(t){return Boolean(t&&"function"==typeof t.equals&&"function"==typeof t.hashCode)}function lt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!!(at(t)&&at(e)&&t.equals(e))}var ct="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var i=65535&(t|=0),s=65535&(e|=0);return i*s+((t>>>16)*s+i*(e>>>16)<<16>>>0)|0};function ut(t){return t>>>1&1073741824|3221225471&t}var dt=Object.prototype.valueOf;function ft(t){if(null==t)return gt(t);if("function"==typeof t.hashCode)return ut(t.hashCode(t));var e,i,s,r=(e=t).valueOf!==dt&&"function"==typeof e.valueOf?e.valueOf(e):e;if(null==r)return gt(r);switch(typeof r){case"boolean":return r?1108378657:1108378656;case"number":return function(t){if(t!=t||t===1/0)return 0;var e=0|t;for(e!==t&&(e^=4294967295*t);t>4294967295;)e^=t/=4294967295;return ut(e)}(r);case"string":return r.length>Mt?(void 0===(s=wt[i=r])&&(s=yt(i),Et===Tt&&(Et=0,wt={}),Et++,wt[i]=s),s):yt(r);case"object":case"function":return function(t){var e;if(vt&&void 0!==(e=St.get(t)))return e;if(void 0!==(e=t[Ct]))return e;if(!mt){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Ct]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=xt(),vt)St.set(t,e);else{if(void 0!==pt&&!1===pt(t))throw new Error("Non-extensible objects are not allowed as keys.");if(mt)Object.defineProperty(t,Ct,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Ct]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Ct]=e}}return e}(r);case"symbol":return function(t){var e=At[t];return void 0!==e||(e=xt(),At[t]=e),e}(r);default:if("function"==typeof r.toString)return yt(r.toString());throw new Error("Value type "+typeof r+" cannot be hashed.")}}function gt(t){return null===t?1108378658:1108378659}function yt(t){for(var e=0,i=0;i<t.length;i++)e=31*e+t.charCodeAt(i)|0;return ut(e)}var pt=Object.isExtensible,mt=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}();function xt(){var t=++bt;return 1073741824&bt&&(bt=0),t}var St,vt="function"==typeof WeakMap;vt&&(St=new WeakMap);var At=Object.create(null),bt=0,Ct="__immutablehash__";"function"==typeof Symbol&&(Ct=Symbol(Ct));var Mt=16,Tt=255,Et=0,wt={},Bt=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=Lt(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var i=this,s=Ot(this,t,e);return this._useKeys||(s.valueSeq=function(){return i._iter.toSeq().map(t,e)}),s},e.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate((function(e,s){return t(e,s,i)}),e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}($);Bt.prototype[O]=!0;var kt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var i=this,s=0;return e&&l(this),this._iter.__iterate((function(r){return t(r,e?i.size-++s:s++,i)}),e)},e.prototype.__iterator=function(t,e){var i=this,s=this._iter.__iterator(1,e),r=0;return e&&l(this),new _((function(){var n=s.next();return n.done?n:z(t,e?i.size-++r:r++,n.value,n)}))},e}(Q),Rt=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate((function(e){return t(e,e,i)}),e)},e.prototype.__iterator=function(t,e){var i=this._iter.__iterator(1,e);return new _((function(){var e=i.next();return e.done?e:z(t,e.value,e.value,e)}))},e}(J),Ft=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var i=this;return this._iter.__iterate((function(e){if(e){Gt(e);var s=x(e);return t(s?e.get(1):e[1],s?e.get(0):e[0],i)}}),e)},e.prototype.__iterator=function(t,e){var i=this._iter.__iterator(1,e);return new _((function(){for(;;){var e=i.next();if(e.done)return e;var s=e.value;if(s){Gt(s);var r=x(s);return z(t,r?s.get(0):s[0],r?s.get(1):s[1],e)}}}))},e}($);function It(t){var e=Wt(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=jt,e.__iterateUncached=function(e,i){var s=this;return t.__iterate((function(t,i){return!1!==e(i,t,s)}),i)},e.__iteratorUncached=function(e,i){if(2===e){var s=t.__iterator(e,i);return new _((function(){var t=s.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(1===e?0:1,i)},e}function Ot(t,e,i){var s=Wt(t);return s.size=t.size,s.has=function(e){return t.has(e)},s.get=function(s,r){var n=t.get(s,o);return n===o?r:e.call(i,n,s,t)},s.__iterateUncached=function(s,r){var n=this;return t.__iterate((function(t,r,o){return!1!==s(e.call(i,t,r,o),r,n)}),r)},s.__iteratorUncached=function(s,r){var n=t.__iterator(2,r);return new _((function(){var r=n.next();if(r.done)return r;var o=r.value,h=o[0];return z(s,h,e.call(i,o[1],h,t),r)}))},s}function Lt(t,e){var i=this,s=Wt(t);return s._iter=t,s.size=t.size,s.reverse=function(){return t},t.flip&&(s.flip=function(){var e=It(t);return e.reverse=function(){return t.flip()},e}),s.get=function(i,s){return t.get(e?i:-1-i,s)},s.has=function(i){return t.has(e?i:-1-i)},s.includes=function(e){return t.includes(e)},s.cacheResult=jt,s.__iterate=function(i,s){var r=this,n=0;return s&&l(t),t.__iterate((function(t,o){return i(t,e?o:s?r.size-++n:n++,r)}),!s)},s.__iterator=function(s,r){var n=0;r&&l(t);var o=t.__iterator(2,!r);return new _((function(){var t=o.next();if(t.done)return t;var h=t.value;return z(s,e?h[0]:r?i.size-++n:n++,h[1],t)}))},s}function Dt(t,e,i,s){var r=Wt(t);return s&&(r.has=function(s){var r=t.get(s,o);return r!==o&&!!e.call(i,r,s,t)},r.get=function(s,r){var n=t.get(s,o);return n!==o&&e.call(i,n,s,t)?n:r}),r.__iterateUncached=function(r,n){var o=this,h=0;return t.__iterate((function(t,n,a){if(e.call(i,t,n,a))return h++,r(t,s?n:h-1,o)}),n),h},r.__iteratorUncached=function(r,n){var o=t.__iterator(2,n),h=0;return new _((function(){for(;;){var n=o.next();if(n.done)return n;var a=n.value,l=a[0],c=a[1];if(e.call(i,c,l,t))return z(r,s?l:h++,c,n)}}))},r}function Pt(t,e,i,s){var r=t.size;if(d(e,i,r))return t;if(void 0===r&&(e<0||i<0))return Pt(t.toSeq().cacheResult(),e,i,s);var n,o=f(e,r),h=g(i,r)-o;h==h&&(n=h<0?0:h);var a=Wt(t);return a.size=0===n?n:t.size&&n||void 0,!s&&k(t)&&n>=0&&(a.get=function(e,i){return(e=c(this,e))>=0&&e<n?t.get(e+o,i):i}),a.__iterateUncached=function(e,i){var r=this;if(0===n)return 0;if(i)return this.cacheResult().__iterate(e,i);var h=0,a=!0,l=0;return t.__iterate((function(t,i){if(!a||!(a=h++<o))return l++,!1!==e(t,s?i:l-1,r)&&l!==n})),l},a.__iteratorUncached=function(e,i){if(0!==n&&i)return this.cacheResult().__iterator(e,i);if(0===n)return new _(U);var r=t.__iterator(e,i),h=0,a=0;return new _((function(){for(;h++<o;)r.next();if(++a>n)return{value:void 0,done:!0};var t=r.next();return s||1===e||t.done?t:z(e,a-1,0===e?void 0:t.value[1],t)}))},a}function Vt(t,e,i,s){var r=Wt(t);return r.__iterateUncached=function(r,n){var o=this;if(n)return this.cacheResult().__iterate(r,n);var h=!0,a=0;return t.__iterate((function(t,n,l){if(!h||!(h=e.call(i,t,n,l)))return a++,r(t,s?n:a-1,o)})),a},r.__iteratorUncached=function(r,n){var o=this;if(n)return this.cacheResult().__iterator(r,n);var h=t.__iterator(2,n),a=!0,l=0;return new _((function(){var t,n,c;do{if((t=h.next()).done)return s||1===r?t:z(r,l++,0===r?void 0:t.value[1],t);var u=t.value;n=u[0],c=u[1],a&&(a=e.call(i,c,n,o))}while(a);return 2===r?t:z(r,n,c,t)}))},r}function _t(t,e,i){var s=Wt(t);return s.__iterateUncached=function(r,n){if(n)return this.cacheResult().__iterate(r,n);var o=0,h=!1;return function t(a,l){a.__iterate((function(n,a){return(!e||l<e)&&x(n)?t(n,l+1):(o++,!1===r(n,i?a:o-1,s)&&(h=!0)),!h}),n)}(t,0),o},s.__iteratorUncached=function(s,r){if(r)return this.cacheResult().__iterator(s,r);var n=t.__iterator(s,r),o=[],h=0;return new _((function(){for(;n;){var t=n.next();if(!1===t.done){var a=t.value;if(2===s&&(a=a[1]),e&&!(o.length<e)||!x(a))return i?t:z(s,h++,a,t);o.push(n),n=a.__iterator(s,r)}else n=o.pop()}return{value:void 0,done:!0}}))},s}function zt(t,e,i){e||(e=$t);var s=v(t),r=0,n=t.toSeq().map((function(e,s){return[s,e,r++,i?i(e,s,t):e]})).valueSeq().toArray();return n.sort((function(t,i){return e(t[3],i[3])||t[2]-i[2]})).forEach(s?function(t,e){n[e].length=2}:function(t,e){n[e]=t[1]}),s?$(n):b(t)?Q(n):J(n)}function Ut(t,e,i){if(e||(e=$t),i){var s=t.toSeq().map((function(e,s){return[e,i(e,s,t)]})).reduce((function(t,i){return Nt(e,t[1],i[1])?i:t}));return s&&s[0]}return t.reduce((function(t,i){return Nt(e,t,i)?i:t}))}function Nt(t,e,i){var s=t(i,e);return 0===s&&i!==e&&(null==i||i!=i)||s>0}function Xt(t,e,i,s){var r=Wt(t),n=new q(i).map((function(t){return t.size}));return r.size=s?n.max():n.min(),r.__iterate=function(t,e){for(var i,s=this.__iterator(1,e),r=0;!(i=s.next()).done&&!1!==t(i.value,r++,this););return r},r.__iteratorUncached=function(t,r){var n=i.map((function(t){return t=M(t),H(r?t.reverse():t)})),o=0,h=!1;return new _((function(){var i;return h||(i=n.map((function(t){return t.next()})),h=s?i.every((function(t){return t.done})):i.some((function(t){return t.done}))),h?{value:void 0,done:!0}:z(t,o++,e.apply(null,i.map((function(t){return t.value}))))}))},r}function Ht(t,e){return t===e?t:k(t)?e:t.constructor(e)}function Gt(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Yt(t){return v(t)?T:b(t)?E:w}function Wt(t){return Object.create((v(t)?$:b(t)?Q:J).prototype)}function jt(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):j.prototype.cacheResult.call(this)}function $t(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function Qt(t,e){e=e||0;for(var i=Math.max(0,t.length-e),s=new Array(i),r=0;r<i;r++)s[r]=t[r+e];return s}function Jt(t,e){if(!t)throw new Error(e)}function qt(t){Jt(t!==1/0,"Cannot perform this action with an infinite size.")}function Zt(t){if(W(t)&&"string"!=typeof t)return t;if(L(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}kt.prototype.cacheResult=Bt.prototype.cacheResult=Rt.prototype.cacheResult=Ft.prototype.cacheResult=jt;var Kt=Object.prototype.toString;function te(t){if(!t||"object"!=typeof t||"[object Object]"!==Kt.call(t))return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var i=e,s=Object.getPrototypeOf(e);null!==s;)i=s,s=Object.getPrototypeOf(i);return i===e}function ee(t){return"object"==typeof t&&(I(t)||Array.isArray(t)||te(t))}function ie(t){try{return"string"==typeof t?JSON.stringify(t):String(t)}catch(e){return JSON.stringify(t)}}function se(t,e){return I(t)?t.has(e):ee(t)&&Y.call(t,e)}function re(t,e,i){return I(t)?t.get(e,i):se(t,e)?"function"==typeof t.get?t.get(e):t[e]:i}function ne(t){if(Array.isArray(t))return Qt(t);var e={};for(var i in t)Y.call(t,i)&&(e[i]=t[i]);return e}function oe(t,e){if(!ee(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(I(t)){if(!t.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+t);return t.remove(e)}if(!Y.call(t,e))return t;var i=ne(t);return Array.isArray(i)?i.splice(e,1):delete i[e],i}function he(t,e,i){if(!ee(t))throw new TypeError("Cannot update non-data-structure value: "+t);if(I(t)){if(!t.set)throw new TypeError("Cannot update immutable value without .set() method: "+t);return t.set(e,i)}if(Y.call(t,e)&&i===t[e])return t;var s=ne(t);return s[e]=i,s}function ae(t,e,i,s){s||(s=i,i=void 0);var r=le(I(t),t,Zt(e),0,i,s);return r===o?i:r}function le(t,e,i,s,r,n){var h=e===o;if(s===i.length){var a=h?r:e,l=n(a);return l===a?e:l}if(!h&&!ee(e))throw new TypeError("Cannot update within non-data-structure value in path ["+i.slice(0,s).map(ie)+"]: "+e);var c=i[s],u=h?o:re(e,c,o),d=le(u===o?t:I(u),u,i,s+1,r,n);return d===u?e:d===o?oe(e,c):he(h?t?We():{}:e,c,d)}function ce(t,e,i){return ae(t,e,o,(function(){return i}))}function ue(t,e){return ce(this,t,e)}function de(t,e){return ae(t,e,(function(){return o}))}function fe(t){return de(this,t)}function ge(t,e,i,s){return ae(t,[e],i,s)}function ye(t,e,i){return 1===arguments.length?t(this):ge(this,t,e,i)}function pe(t,e,i){return ae(this,t,e,i)}function me(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Se(this,t)}function xe(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if("function"!=typeof t)throw new TypeError("Invalid merger function: "+t);return Se(this,e,t)}function Se(t,e,i){for(var s=[],r=0;r<e.length;r++){var n=T(e[r]);0!==n.size&&s.push(n)}return 0===s.length?t:0!==t.toSeq().size||t.__ownerID||1!==s.length?t.withMutations((function(t){for(var e=i?function(e,s){ge(t,s,o,(function(t){return t===o?e:i(t,e,s)}))}:function(e,i){t.set(i,e)},r=0;r<s.length;r++)s[r].forEach(e)})):t.constructor(s[0])}function ve(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return Te(t,e)}function Ae(t,e){for(var i=[],s=arguments.length-2;s-- >0;)i[s]=arguments[s+2];return Te(e,i,t)}function be(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return Me(t,e)}function Ce(t,e){for(var i=[],s=arguments.length-2;s-- >0;)i[s]=arguments[s+2];return Me(e,i,t)}function Me(t,e,i){return Te(t,e,function(t){return function e(i,s,r){return ee(i)&&ee(s)&&(n=s,o=j(i),h=j(n),b(o)===b(h)&&v(o)===v(h))?Te(i,[s],e):t?t(i,s,r):s;var n,o,h}}(i))}function Te(t,e,i){if(!ee(t))throw new TypeError("Cannot merge into non-data-structure value: "+t);if(I(t))return"function"==typeof i&&t.mergeWith?t.mergeWith.apply(t,[i].concat(e)):t.merge?t.merge.apply(t,e):t.concat.apply(t,e);for(var s=Array.isArray(t),r=t,n=s?E:T,o=s?function(e){r===t&&(r=ne(r)),r.push(e)}:function(e,s){var n=Y.call(r,s),o=n&&i?i(r[s],e,s):e;n&&o===r[s]||(r===t&&(r=ne(r)),r[s]=o)},h=0;h<e.length;h++)n(e[h]).forEach(o);return r}function Ee(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Me(this,t)}function we(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return Me(this,e,t)}function Be(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return ae(this,t,We(),(function(t){return Te(t,e)}))}function ke(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];return ae(this,t,We(),(function(t){return Me(t,e)}))}function Re(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}function Fe(){return this.__ownerID?this:this.__ensureOwner(new a)}function Ie(){return this.__ensureOwner()}function Oe(){return this.__altered}var Le=function(t){function e(e){return null==e?We():ot(e)&&!L(e)?e:We().withMutations((function(i){var s=t(e);qt(s.size),s.forEach((function(t,e){return i.set(e,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return We().withMutations((function(e){for(var i=0;i<t.length;i+=2){if(i+1>=t.length)throw new Error("Missing value for key: "+t[i]);e.set(t[i],t[i+1])}}))},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return je(this,t,e)},e.prototype.remove=function(t){return je(this,t,o)},e.prototype.deleteAll=function(t){var e=M(t);return 0===e.size?this:this.withMutations((function(t){e.forEach((function(e){return t.remove(e)}))}))},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):We()},e.prototype.sort=function(t){return xi(zt(this,t))},e.prototype.sortBy=function(t,e){return xi(zt(this,e,t))},e.prototype.map=function(t,e){var i=this;return this.withMutations((function(s){s.forEach((function(r,n){s.set(n,t.call(e,r,n,i))}))}))},e.prototype.__iterator=function(t,e){return new Xe(this,t,e)},e.prototype.__iterate=function(t,e){var i=this,s=0;return this._root&&this._root.iterate((function(e){return s++,t(e[1],e[0],i)}),e),s},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ye(this.size,this._root,t,this.__hash):0===this.size?We():(this.__ownerID=t,this.__altered=!1,this)},e}(T);Le.isMap=ot;var De=Le.prototype;De[nt]=!0,De[s]=De.remove,De.removeAll=De.deleteAll,De.setIn=ue,De.removeIn=De.deleteIn=fe,De.update=ye,De.updateIn=pe,De.merge=De.concat=me,De.mergeWith=xe,De.mergeDeep=Ee,De.mergeDeepWith=we,De.mergeIn=Be,De.mergeDeepIn=ke,De.withMutations=Re,De.wasAltered=Oe,De.asImmutable=Ie,De["@@transducer/init"]=De.asMutable=Fe,De["@@transducer/step"]=function(t,e){return t.set(e[0],e[1])},De["@@transducer/result"]=function(t){return t.asImmutable()};var Pe=function(t,e){this.ownerID=t,this.entries=e};Pe.prototype.get=function(t,e,i,s){for(var r=this.entries,n=0,o=r.length;n<o;n++)if(lt(i,r[n][0]))return r[n][1];return s},Pe.prototype.update=function(t,e,i,s,r,n,l){for(var c=r===o,u=this.entries,d=0,f=u.length;d<f&&!lt(s,u[d][0]);d++);var g=d<f;if(g?u[d][1]===r:c)return this;if(h(l),(c||!g)&&h(n),!c||1!==u.length){if(!g&&!c&&u.length>=Ke)return function(t,e,i,s){t||(t=new a);for(var r=new Ue(t,ft(i),[i,s]),n=0;n<e.length;n++){var o=e[n];r=r.update(t,0,void 0,o[0],o[1])}return r}(t,u,s,r);var y=t&&t===this.ownerID,p=y?u:Qt(u);return g?c?d===f-1?p.pop():p[d]=p.pop():p[d]=[s,r]:p.push([s,r]),y?(this.entries=p,this):new Pe(t,p)}};var Ve=function(t,e,i){this.ownerID=t,this.bitmap=e,this.nodes=i};Ve.prototype.get=function(t,e,i,s){void 0===e&&(e=ft(i));var r=1<<((0===t?e:e>>>t)&n),o=this.bitmap;return o&r?this.nodes[qe(o&r-1)].get(t+5,e,i,s):s},Ve.prototype.update=function(t,e,i,s,h,a,l){void 0===i&&(i=ft(s));var c=(0===e?i:i>>>e)&n,u=1<<c,d=this.bitmap,f=!!(d&u);if(!f&&h===o)return this;var g=qe(d&u-1),y=this.nodes,p=f?y[g]:void 0,m=$e(p,t,e+5,i,s,h,a,l);if(m===p)return this;if(!f&&m&&y.length>=ti)return function(t,e,i,s,n){for(var o=0,h=new Array(r),a=0;0!==i;a++,i>>>=1)h[a]=1&i?e[o++]:void 0;return h[s]=n,new _e(t,o+1,h)}(t,y,d,c,m);if(f&&!m&&2===y.length&&Qe(y[1^g]))return y[1^g];if(f&&m&&1===y.length&&Qe(m))return m;var x=t&&t===this.ownerID,S=f?m?d:d^u:d|u,v=f?m?Ze(y,g,m,x):function(t,e,i){var s=t.length-1;if(i&&e===s)return t.pop(),t;for(var r=new Array(s),n=0,o=0;o<s;o++)o===e&&(n=1),r[o]=t[o+n];return r}(y,g,x):function(t,e,i,s){var r=t.length+1;if(s&&e+1===r)return t[e]=i,t;for(var n=new Array(r),o=0,h=0;h<r;h++)h===e?(n[h]=i,o=-1):n[h]=t[h+o];return n}(y,g,m,x);return x?(this.bitmap=S,this.nodes=v,this):new Ve(t,S,v)};var _e=function(t,e,i){this.ownerID=t,this.count=e,this.nodes=i};_e.prototype.get=function(t,e,i,s){void 0===e&&(e=ft(i));var r=(0===t?e:e>>>t)&n,o=this.nodes[r];return o?o.get(t+5,e,i,s):s},_e.prototype.update=function(t,e,i,s,r,h,a){void 0===i&&(i=ft(s));var l=(0===e?i:i>>>e)&n,c=r===o,u=this.nodes,d=u[l];if(c&&!d)return this;var f=$e(d,t,e+5,i,s,r,h,a);if(f===d)return this;var g=this.count;if(d){if(!f&&--g<ei)return function(t,e,i,s){for(var r=0,n=0,o=new Array(i),h=0,a=1,l=e.length;h<l;h++,a<<=1){var c=e[h];void 0!==c&&h!==s&&(r|=a,o[n++]=c)}return new Ve(t,r,o)}(t,u,g,l)}else g++;var y=t&&t===this.ownerID,p=Ze(u,l,f,y);return y?(this.count=g,this.nodes=p,this):new _e(t,g,p)};var ze=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entries=i};ze.prototype.get=function(t,e,i,s){for(var r=this.entries,n=0,o=r.length;n<o;n++)if(lt(i,r[n][0]))return r[n][1];return s},ze.prototype.update=function(t,e,i,s,r,n,a){void 0===i&&(i=ft(s));var l=r===o;if(i!==this.keyHash)return l?this:(h(a),h(n),Je(this,t,e,i,[s,r]));for(var c=this.entries,u=0,d=c.length;u<d&&!lt(s,c[u][0]);u++);var f=u<d;if(f?c[u][1]===r:l)return this;if(h(a),(l||!f)&&h(n),l&&2===d)return new Ue(t,this.keyHash,c[1^u]);var g=t&&t===this.ownerID,y=g?c:Qt(c);return f?l?u===d-1?y.pop():y[u]=y.pop():y[u]=[s,r]:y.push([s,r]),g?(this.entries=y,this):new ze(t,this.keyHash,y)};var Ue=function(t,e,i){this.ownerID=t,this.keyHash=e,this.entry=i};Ue.prototype.get=function(t,e,i,s){return lt(i,this.entry[0])?this.entry[1]:s},Ue.prototype.update=function(t,e,i,s,r,n,a){var l=r===o,c=lt(s,this.entry[0]);return(c?r===this.entry[1]:l)?this:(h(a),l?void h(n):c?t&&t===this.ownerID?(this.entry[1]=r,this):new Ue(t,this.keyHash,[s,r]):(h(n),Je(this,t,e,ft(s),[s,r])))},Pe.prototype.iterate=ze.prototype.iterate=function(t,e){for(var i=this.entries,s=0,r=i.length-1;s<=r;s++)if(!1===t(i[e?r-s:s]))return!1},Ve.prototype.iterate=_e.prototype.iterate=function(t,e){for(var i=this.nodes,s=0,r=i.length-1;s<=r;s++){var n=i[e?r-s:s];if(n&&!1===n.iterate(t,e))return!1}},Ue.prototype.iterate=function(t,e){return t(this.entry)};var Ne,Xe=function(t){function e(t,e,i){this._type=e,this._reverse=i,this._stack=t._root&&Ge(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var i=e.node,s=e.index++,r=void 0;if(i.entry){if(0===s)return He(t,i.entry)}else if(i.entries){if(s<=(r=i.entries.length-1))return He(t,i.entries[this._reverse?r-s:s])}else if(s<=(r=i.nodes.length-1)){var n=i.nodes[this._reverse?r-s:s];if(n){if(n.entry)return He(t,n.entry);e=this._stack=Ge(n,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}},e}(_);function He(t,e){return z(t,e[0],e[1])}function Ge(t,e){return{node:t,index:0,__prev:e}}function Ye(t,e,i,s){var r=Object.create(De);return r.size=t,r._root=e,r.__ownerID=i,r.__hash=s,r.__altered=!1,r}function We(){return Ne||(Ne=Ye(0))}function je(t,e,i){var s,r;if(t._root){var n={value:!1},h={value:!1};if(s=$e(t._root,t.__ownerID,0,void 0,e,i,n,h),!h.value)return t;r=t.size+(n.value?i===o?-1:1:0)}else{if(i===o)return t;r=1,s=new Pe(t.__ownerID,[[e,i]])}return t.__ownerID?(t.size=r,t._root=s,t.__hash=void 0,t.__altered=!0,t):s?Ye(r,s):We()}function $e(t,e,i,s,r,n,a,l){return t?t.update(e,i,s,r,n,a,l):n===o?t:(h(l),h(a),new Ue(e,s,[r,n]))}function Qe(t){return t.constructor===Ue||t.constructor===ze}function Je(t,e,i,s,r){if(t.keyHash===s)return new ze(e,s,[t.entry,r]);var o,h=(0===i?t.keyHash:t.keyHash>>>i)&n,a=(0===i?s:s>>>i)&n,l=h===a?[Je(t,e,i+5,s,r)]:(o=new Ue(e,s,r),h<a?[t,o]:[o,t]);return new Ve(e,1<<h|1<<a,l)}function qe(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function Ze(t,e,i,s){var r=s?t:Qt(t);return r[e]=i,r}var Ke=8,ti=16,ei=8,ii="@@__IMMUTABLE_LIST__@@";function si(t){return Boolean(t&&t[ii])}var ri=function(t){function e(e){var i=ui();if(null==e)return i;if(si(e))return e;var s=t(e),n=s.size;return 0===n?i:(qt(n),n>0&&n<r?ci(0,n,5,null,new oi(s.toArray())):i.withMutations((function(t){t.setSize(n),s.forEach((function(e,i){return t.set(i,e)}))})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=c(this,t))>=0&&t<this.size){var i=gi(this,t+=this._origin);return i&&i.array[t&n]}return e},e.prototype.set=function(t,e){return function(t,e,i){if((e=c(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?yi(t,e).set(0,i):yi(t,0,e+1).set(e,i)}));e+=t._origin;var s=t._tail,r=t._root,n={value:!1};return e>=pi(t._capacity)?s=di(s,t.__ownerID,0,e,i,n):r=di(r,t.__ownerID,t._level,e,i,n),n.value?t.__ownerID?(t._root=r,t._tail=s,t.__hash=void 0,t.__altered=!0,t):ci(t._origin,t._capacity,t._level,r,s):t}(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):ui()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(i){yi(i,0,e+t.length);for(var s=0;s<t.length;s++)i.set(e+s,t[s])}))},e.prototype.pop=function(){return yi(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){yi(e,-t.length);for(var i=0;i<t.length;i++)e.set(i,t[i])}))},e.prototype.shift=function(){return yi(this,1)},e.prototype.concat=function(){for(var e=arguments,i=[],s=0;s<arguments.length;s++){var r=e[s],n=t("string"!=typeof r&&N(r)?r:[r]);0!==n.size&&i.push(n)}return 0===i.length?this:0!==this.size||this.__ownerID||1!==i.length?this.withMutations((function(t){i.forEach((function(e){return e.forEach((function(e){return t.push(e)}))}))})):this.constructor(i[0])},e.prototype.setSize=function(t){return yi(this,0,t)},e.prototype.map=function(t,e){var i=this;return this.withMutations((function(s){for(var r=0;r<i.size;r++)s.set(r,t.call(e,s.get(r),r,i))}))},e.prototype.slice=function(t,e){var i=this.size;return d(t,e,i)?this:yi(this,f(t,i),g(e,i))},e.prototype.__iterator=function(t,e){var i=e?this.size:0,s=li(this,e);return new _((function(){var r=s();return r===ai?{value:void 0,done:!0}:z(t,e?--i:i++,r)}))},e.prototype.__iterate=function(t,e){for(var i,s=e?this.size:0,r=li(this,e);(i=r())!==ai&&!1!==t(i,e?--s:s++,this););return s},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?ci(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?ui():(this.__ownerID=t,this.__altered=!1,this)},e}(E);ri.isList=si;var ni=ri.prototype;ni[ii]=!0,ni[s]=ni.remove,ni.merge=ni.concat,ni.setIn=ue,ni.deleteIn=ni.removeIn=fe,ni.update=ye,ni.updateIn=pe,ni.mergeIn=Be,ni.mergeDeepIn=ke,ni.withMutations=Re,ni.wasAltered=Oe,ni.asImmutable=Ie,ni["@@transducer/init"]=ni.asMutable=Fe,ni["@@transducer/step"]=function(t,e){return t.push(e)},ni["@@transducer/result"]=function(t){return t.asImmutable()};var oi=function(t,e){this.array=t,this.ownerID=e};oi.prototype.removeBefore=function(t,e,i){if(i===e?1<<e:0===this.array.length)return this;var s=i>>>e&n;if(s>=this.array.length)return new oi([],t);var r,o=0===s;if(e>0){var h=this.array[s];if((r=h&&h.removeBefore(t,e-5,i))===h&&o)return this}if(o&&!r)return this;var a=fi(this,t);if(!o)for(var l=0;l<s;l++)a.array[l]=void 0;return r&&(a.array[s]=r),a},oi.prototype.removeAfter=function(t,e,i){if(i===(e?1<<e:0)||0===this.array.length)return this;var s,r=i-1>>>e&n;if(r>=this.array.length)return this;if(e>0){var o=this.array[r];if((s=o&&o.removeAfter(t,e-5,i))===o&&r===this.array.length-1)return this}var h=fi(this,t);return h.array.splice(r+1),s&&(h.array[r]=s),h};var hi,ai={};function li(t,e){var i=t._origin,s=t._capacity,n=pi(s),o=t._tail;return function t(h,a,l){return 0===a?function(t,h){var a=h===n?o&&o.array:t&&t.array,l=h>i?0:i-h,c=s-h;return c>r&&(c=r),function(){if(l===c)return ai;var t=e?--c:l++;return a&&a[t]}}(h,l):function(n,o,h){var a,l=n&&n.array,c=h>i?0:i-h>>o,u=1+(s-h>>o);return u>r&&(u=r),function(){for(;;){if(a){var i=a();if(i!==ai)return i;a=null}if(c===u)return ai;var s=e?--u:c++;a=t(l&&l[s],o-5,h+(s<<o))}}}(h,a,l)}(t._root,t._level,0)}function ci(t,e,i,s,r,n,o){var h=Object.create(ni);return h.size=e-t,h._origin=t,h._capacity=e,h._level=i,h._root=s,h._tail=r,h.__ownerID=n,h.__hash=o,h.__altered=!1,h}function ui(){return hi||(hi=ci(0,0,5))}function di(t,e,i,s,r,o){var a,l=s>>>i&n,c=t&&l<t.array.length;if(!c&&void 0===r)return t;if(i>0){var u=t&&t.array[l],d=di(u,e,i-5,s,r,o);return d===u?t:((a=fi(t,e)).array[l]=d,a)}return c&&t.array[l]===r?t:(o&&h(o),a=fi(t,e),void 0===r&&l===a.array.length-1?a.array.pop():a.array[l]=r,a)}function fi(t,e){return e&&t&&e===t.ownerID?t:new oi(t?t.array.slice():[],e)}function gi(t,e){if(e>=pi(t._capacity))return t._tail;if(e<1<<t._level+5){for(var i=t._root,s=t._level;i&&s>0;)i=i.array[e>>>s&n],s-=5;return i}}function yi(t,e,i){void 0!==e&&(e|=0),void 0!==i&&(i|=0);var s=t.__ownerID||new a,r=t._origin,o=t._capacity,h=r+e,l=void 0===i?o:i<0?o+i:r+i;if(h===r&&l===o)return t;if(h>=l)return t.clear();for(var c=t._level,u=t._root,d=0;h+d<0;)u=new oi(u&&u.array.length?[void 0,u]:[],s),d+=1<<(c+=5);d&&(h+=d,r+=d,l+=d,o+=d);for(var f=pi(o),g=pi(l);g>=1<<c+5;)u=new oi(u&&u.array.length?[u]:[],s),c+=5;var y=t._tail,p=g<f?gi(t,l-1):g>f?new oi([],s):y;if(y&&g>f&&h<o&&y.array.length){for(var m=u=fi(u,s),x=c;x>5;x-=5){var S=f>>>x&n;m=m.array[S]=fi(m.array[S],s)}m.array[f>>>5&n]=y}if(l<o&&(p=p&&p.removeAfter(s,0,l)),h>=g)h-=g,l-=g,c=5,u=null,p=p&&p.removeBefore(s,0,h);else if(h>r||g<f){for(d=0;u;){var v=h>>>c&n;if(v!==g>>>c&n)break;v&&(d+=(1<<c)*v),c-=5,u=u.array[v]}u&&h>r&&(u=u.removeBefore(s,c,h-d)),u&&g<f&&(u=u.removeAfter(s,c,g-d)),d&&(h-=d,l-=d)}return t.__ownerID?(t.size=l-h,t._origin=h,t._capacity=l,t._level=c,t._root=u,t._tail=p,t.__hash=void 0,t.__altered=!0,t):ci(h,l,c,u,p)}function pi(t){return t<r?0:t-1>>>5<<5}var mi,xi=function(t){function e(t){return null==t?vi():ht(t)?t:vi().withMutations((function(e){var i=T(t);qt(i.size),i.forEach((function(t,i){return e.set(i,t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var i=this._map.get(t);return void 0!==i?this._list.get(i)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):vi()},e.prototype.set=function(t,e){return Ai(this,t,e)},e.prototype.remove=function(t){return Ai(this,t,o)},e.prototype.__iterate=function(t,e){var i=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],i)}),e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),i=this._list.__ensureOwner(t);return t?Si(e,i,t,this.__hash):0===this.size?vi():(this.__ownerID=t,this.__altered=!1,this._map=e,this._list=i,this)},e}(Le);function Si(t,e,i,s){var r=Object.create(xi.prototype);return r.size=t?t.size:0,r._map=t,r._list=e,r.__ownerID=i,r.__hash=s,r.__altered=!1,r}function vi(){return mi||(mi=Si(We(),ui()))}function Ai(t,e,i){var s,n,h=t._map,a=t._list,l=h.get(e),c=void 0!==l;if(i===o){if(!c)return t;a.size>=r&&a.size>=2*h.size?(s=(n=a.filter((function(t,e){return void 0!==t&&l!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(s.__ownerID=n.__ownerID=t.__ownerID)):(s=h.remove(e),n=l===a.size-1?a.pop():a.set(l,void 0))}else if(c){if(i===a.get(l)[1])return t;s=h,n=a.set(l,[e,i])}else s=h.set(e,a.size),n=a.set(a.size,[e,i]);return t.__ownerID?(t.size=s.size,t._map=s,t._list=n,t.__hash=void 0,t.__altered=!0,t):Si(s,n)}xi.isOrderedMap=ht,xi.prototype[O]=!0,xi.prototype[s]=xi.prototype.remove;var bi="@@__IMMUTABLE_STACK__@@";function Ci(t){return Boolean(t&&t[bi])}var Mi=function(t){function e(t){return null==t?Bi():Ci(t)?t:Bi().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var i=this._head;for(t=c(this,t);i&&t--;)i=i.next;return i?i.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,i=this._head,s=arguments.length-1;s>=0;s--)i={value:t[s],next:i};return this.__ownerID?(this.size=e,this._head=i,this.__hash=void 0,this.__altered=!0,this):wi(e,i)},e.prototype.pushAll=function(e){if(0===(e=t(e)).size)return this;if(0===this.size&&Ci(e))return e;qt(e.size);var i=this.size,s=this._head;return e.__iterate((function(t){i++,s={value:t,next:s}}),!0),this.__ownerID?(this.size=i,this._head=s,this.__hash=void 0,this.__altered=!0,this):wi(i,s)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Bi()},e.prototype.slice=function(e,i){if(d(e,i,this.size))return this;var s=f(e,this.size);if(g(i,this.size)!==this.size)return t.prototype.slice.call(this,e,i);for(var r=this.size-s,n=this._head;s--;)n=n.next;return this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):wi(r,n)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?wi(this.size,this._head,t,this.__hash):0===this.size?Bi():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var i=this;if(e)return new q(this.toArray()).__iterate((function(e,s){return t(e,s,i)}),e);for(var s=0,r=this._head;r&&!1!==t(r.value,s++,this);)r=r.next;return s},e.prototype.__iterator=function(t,e){if(e)return new q(this.toArray()).__iterator(t,e);var i=0,s=this._head;return new _((function(){if(s){var e=s.value;return s=s.next,z(t,i++,e)}return{value:void 0,done:!0}}))},e}(E);Mi.isStack=Ci;var Ti,Ei=Mi.prototype;function wi(t,e,i,s){var r=Object.create(Ei);return r.size=t,r._head=e,r.__ownerID=i,r.__hash=s,r.__altered=!1,r}function Bi(){return Ti||(Ti=wi(0))}Ei[bi]=!0,Ei.shift=Ei.pop,Ei.unshift=Ei.push,Ei.unshiftAll=Ei.pushAll,Ei.withMutations=Re,Ei.wasAltered=Oe,Ei.asImmutable=Ie,Ei["@@transducer/init"]=Ei.asMutable=Fe,Ei["@@transducer/step"]=function(t,e){return t.unshift(e)},Ei["@@transducer/result"]=function(t){return t.asImmutable()};var ki="@@__IMMUTABLE_SET__@@";function Ri(t){return Boolean(t&&t[ki])}function Fi(t){return Ri(t)&&L(t)}function Ii(t,e){if(t===e)return!0;if(!x(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||v(t)!==v(e)||b(t)!==b(e)||L(t)!==L(e))return!1;if(0===t.size&&0===e.size)return!0;var i=!C(t);if(L(t)){var s=t.entries();return e.every((function(t,e){var r=s.next().value;return r&&lt(r[1],t)&&(i||lt(r[0],e))}))&&s.next().done}var r=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{r=!0;var n=t;t=e,e=n}var h=!0,a=e.__iterate((function(e,s){if(i?!t.has(e):r?!lt(e,t.get(s,o)):!lt(t.get(s,o),e))return h=!1,!1}));return h&&t.size===a}function Oi(t,e){var i=function(i){t.prototype[i]=e[i]};return Object.keys(e).forEach(i),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(i),t}function Li(t){if(!t||"object"!=typeof t)return t;if(!x(t)){if(!ee(t))return t;t=j(t)}if(v(t)){var e={};return t.__iterate((function(t,i){e[i]=Li(t)})),e}var i=[];return t.__iterate((function(t){i.push(Li(t))})),i}var Di=function(t){function e(e){return null==e?Ui():Ri(e)&&!L(e)?e:Ui().withMutations((function(i){var s=t(e);qt(s.size),s.forEach((function(t){return i.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(T(t).keySeq())},e.intersect=function(t){return(t=M(t).toArray()).length?Vi.intersect.apply(e(t.pop()),t):Ui()},e.union=function(t){return(t=M(t).toArray()).length?Vi.union.apply(e(t.pop()),t):Ui()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return _i(this,this._map.set(t,t))},e.prototype.remove=function(t){return _i(this,this._map.remove(t))},e.prototype.clear=function(){return _i(this,this._map.clear())},e.prototype.map=function(t,e){var i=this,s=!1,r=_i(this,this._map.mapEntries((function(r){var n=r[1],o=t.call(e,n,n,i);return o!==n&&(s=!0),[o,o]}),e));return s?r:this},e.prototype.union=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(i){for(var s=0;s<e.length;s++)"string"==typeof e[s]?i.add(e[s]):t(e[s]).forEach((function(t){return i.add(t)}))})):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var s=[];return this.forEach((function(t){e.every((function(e){return e.includes(t)}))||s.push(t)})),this.withMutations((function(t){s.forEach((function(e){t.remove(e)}))}))},e.prototype.subtract=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];if(0===e.length)return this;e=e.map((function(e){return t(e)}));var s=[];return this.forEach((function(t){e.some((function(e){return e.includes(t)}))&&s.push(t)})),this.withMutations((function(t){s.forEach((function(e){t.remove(e)}))}))},e.prototype.sort=function(t){return ns(zt(this,t))},e.prototype.sortBy=function(t,e){return ns(zt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var i=this;return this._map.__iterate((function(e){return t(e,e,i)}),e)},e.prototype.__iterator=function(t,e){return this._map.__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?this.__empty():(this.__ownerID=t,this._map=e,this)},e}(w);Di.isSet=Ri;var Pi,Vi=Di.prototype;function _i(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function zi(t,e){var i=Object.create(Vi);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function Ui(){return Pi||(Pi=zi(We()))}Vi[ki]=!0,Vi[s]=Vi.remove,Vi.merge=Vi.concat=Vi.union,Vi.withMutations=Re,Vi.asImmutable=Ie,Vi["@@transducer/init"]=Vi.asMutable=Fe,Vi["@@transducer/step"]=function(t,e){return t.add(e)},Vi["@@transducer/result"]=function(t){return t.asImmutable()},Vi.__empty=Ui,Vi.__make=zi;var Ni,Xi=function(t){function e(t,i,s){if(!(this instanceof e))return new e(t,i,s);if(Jt(0!==s,"Cannot step a Range by 0"),t=t||0,void 0===i&&(i=1/0),s=void 0===s?1:Math.abs(s),i<t&&(s=-s),this._start=t,this._end=i,this._step=s,this.size=Math.max(0,Math.ceil((i-t)/s-1)+1),0===this.size){if(Ni)return Ni;Ni=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+c(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,i){return d(t,i,this.size)?this:(t=f(t,this.size),(i=g(i,this.size))<=t?new e(0,0):new e(this.get(t,this._end),this.get(i,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var i=e/this._step;if(i>=0&&i<this.size)return i}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var i=this.size,s=this._step,r=e?this._start+(i-1)*s:this._start,n=0;n!==i&&!1!==t(r,e?i-++n:n++,this);)r+=e?-s:s;return n},e.prototype.__iterator=function(t,e){var i=this.size,s=this._step,r=e?this._start+(i-1)*s:this._start,n=0;return new _((function(){if(n===i)return{value:void 0,done:!0};var o=r;return r+=e?-s:s,z(t,e?i-++n:n++,o)}))},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:Ii(this,t)},e}(Q);function Hi(t,e,i){for(var s=Zt(e),r=0;r!==s.length;)if((t=re(t,s[r++],o))===o)return i;return t}function Gi(t,e){return Hi(this,t,e)}function Yi(t,e){return Hi(t,e,o)!==o}function Wi(){qt(this.size);var t={};return this.__iterate((function(e,i){t[i]=e})),t}M.isIterable=x,M.isKeyed=v,M.isIndexed=b,M.isAssociative=C,M.isOrdered=L,M.Iterator=_,Oi(M,{toArray:function(){qt(this.size);var t=new Array(this.size||0),e=v(this),i=0;return this.__iterate((function(s,r){t[i++]=e?[r,s]:s})),t},toIndexedSeq:function(){return new kt(this)},toJS:function(){return Li(this)},toKeyedSeq:function(){return new Bt(this,!0)},toMap:function(){return Le(this.toKeyedSeq())},toObject:Wi,toOrderedMap:function(){return xi(this.toKeyedSeq())},toOrderedSet:function(){return ns(v(this)?this.valueSeq():this)},toSet:function(){return Di(v(this)?this.valueSeq():this)},toSetSeq:function(){return new Rt(this)},toSeq:function(){return b(this)?this.toIndexedSeq():v(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Mi(v(this)?this.valueSeq():this)},toList:function(){return ri(v(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Ht(this,function(t,e){var i=v(t),s=[t].concat(e).map((function(t){return x(t)?i&&(t=T(t)):t=i?it(t):st(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===s.length)return t;if(1===s.length){var r=s[0];if(r===t||i&&v(r)||b(t)&&b(r))return r}var n=new q(s);return i?n=n.toKeyedSeq():b(t)||(n=n.toSetSeq()),(n=n.flatten(!0)).size=s.reduce((function(t,e){if(void 0!==t){var i=e.size;if(void 0!==i)return t+i}}),0),n}(this,t))},includes:function(t){return this.some((function(e){return lt(e,t)}))},entries:function(){return this.__iterator(2)},every:function(t,e){qt(this.size);var i=!0;return this.__iterate((function(s,r,n){if(!t.call(e,s,r,n))return i=!1,!1})),i},filter:function(t,e){return Ht(this,Dt(this,t,e,!0))},partition:function(t,e){return function(t,e,i){var s=v(t),r=[[],[]];t.__iterate((function(n,o){r[e.call(i,n,o,t)?1:0].push(s?[o,n]:n)}));var n=Yt(t);return r.map((function(e){return Ht(t,n(e))}))}(this,t,e)},find:function(t,e,i){var s=this.findEntry(t,e);return s?s[1]:i},forEach:function(t,e){return qt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){qt(this.size),t=void 0!==t?""+t:",";var e="",i=!0;return this.__iterate((function(s){i?i=!1:e+=t,e+=null!=s?s.toString():""})),e},keys:function(){return this.__iterator(0)},map:function(t,e){return Ht(this,Ot(this,t,e))},reduce:function(t,e,i){return qi(this,t,e,i,arguments.length<2,!1)},reduceRight:function(t,e,i){return qi(this,t,e,i,arguments.length<2,!0)},reverse:function(){return Ht(this,Lt(this,!0))},slice:function(t,e){return Ht(this,Pt(this,t,e,!0))},some:function(t,e){qt(this.size);var i=!1;return this.__iterate((function(s,r,n){if(t.call(e,s,r,n))return i=!0,!1})),i},sort:function(t){return Ht(this,zt(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return l(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,i){var s=Le().asMutable();return t.__iterate((function(r,n){s.update(e.call(i,r,n,t),0,(function(t){return t+1}))})),s.asImmutable()}(this,t,e)},equals:function(t){return Ii(this,t)},entrySeq:function(){var t=this;if(t._cache)return new q(t._cache);var e=t.toSeq().map(Ki).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(ts(t),e)},findEntry:function(t,e,i){var s=i;return this.__iterate((function(i,r,n){if(t.call(e,i,r,n))return s=[r,i],!1})),s},findKey:function(t,e){var i=this.findEntry(t,e);return i&&i[0]},findLast:function(t,e,i){return this.toKeyedSeq().reverse().find(t,e,i)},findLastEntry:function(t,e,i){return this.toKeyedSeq().reverse().findEntry(t,e,i)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(t){return this.find(u,null,t)},flatMap:function(t,e){return Ht(this,function(t,e,i){var s=Yt(t);return t.toSeq().map((function(r,n){return s(e.call(i,r,n,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return Ht(this,_t(this,t,!0))},fromEntrySeq:function(){return new Ft(this)},get:function(t,e){return this.find((function(e,i){return lt(i,t)}),void 0,e)},getIn:Gi,groupBy:function(t,e){return function(t,e,i){var s=v(t),r=(L(t)?xi():Le()).asMutable();t.__iterate((function(n,o){r.update(e.call(i,n,o,t),(function(t){return(t=t||[]).push(s?[o,n]:n),t}))}));var n=Yt(t);return r.map((function(e){return Ht(t,n(e))})).asImmutable()}(this,t,e)},has:function(t){return this.get(t,o)!==o},hasIn:function(t){return Yi(this,t)},isSubset:function(t){return t="function"==typeof t.includes?t:M(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:M(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return lt(e,t)}))},keySeq:function(){return this.toSeq().map(Zi).toIndexedSeq()},last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Ut(this,t)},maxBy:function(t,e){return Ut(this,e,t)},min:function(t){return Ut(this,t?es(t):ss)},minBy:function(t,e){return Ut(this,e?es(e):ss,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return Ht(this,Vt(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(ts(t),e)},sortBy:function(t,e){return Ht(this,zt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return Ht(this,function(t,e,i){var s=Wt(t);return s.__iterateUncached=function(s,r){var n=this;if(r)return this.cacheResult().__iterate(s,r);var o=0;return t.__iterate((function(t,r,h){return e.call(i,t,r,h)&&++o&&s(t,r,n)})),o},s.__iteratorUncached=function(s,r){var n=this;if(r)return this.cacheResult().__iterator(s,r);var o=t.__iterator(2,r),h=!0;return new _((function(){if(!h)return{value:void 0,done:!0};var t=o.next();if(t.done)return t;var r=t.value,a=r[0],l=r[1];return e.call(i,l,a,n)?2===s?t:z(s,a,l,t):(h=!1,{value:void 0,done:!0})}))},s}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(ts(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=L(t),i=v(t),s=e?1:0;return function(t,e){return e=ct(e,3432918353),e=ct(e<<15|e>>>-15,461845907),e=ct(e<<13|e>>>-13,5),e=ct((e=e+3864292196^t)^e>>>16,2246822507),e=ut((e=ct(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(i?e?function(t,e){s=31*s+rs(ft(t),ft(e))|0}:function(t,e){s=s+rs(ft(t),ft(e))|0}:e?function(t){s=31*s+ft(t)|0}:function(t){s=s+ft(t)|0}),s)}(this))}});var ji=M.prototype;ji[m]=!0,ji[V]=ji.values,ji.toJSON=ji.toArray,ji.__toStringMapper=ie,ji.inspect=ji.toSource=function(){return this.toString()},ji.chain=ji.flatMap,ji.contains=ji.includes,Oi(T,{flip:function(){return Ht(this,It(this))},mapEntries:function(t,e){var i=this,s=0;return Ht(this,this.toSeq().map((function(r,n){return t.call(e,[n,r],s++,i)})).fromEntrySeq())},mapKeys:function(t,e){var i=this;return Ht(this,this.toSeq().flip().map((function(s,r){return t.call(e,s,r,i)})).flip())}});var $i=T.prototype;$i[S]=!0,$i[V]=ji.entries,$i.toJSON=Wi,$i.__toStringMapper=function(t,e){return ie(e)+": "+ie(t)},Oi(E,{toKeyedSeq:function(){return new Bt(this,!1)},filter:function(t,e){return Ht(this,Dt(this,t,e,!1))},findIndex:function(t,e){var i=this.findEntry(t,e);return i?i[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Ht(this,Lt(this,!1))},slice:function(t,e){return Ht(this,Pt(this,t,e,!1))},splice:function(t,e){var i=arguments.length;if(e=Math.max(e||0,0),0===i||2===i&&!e)return this;t=f(t,t<0?this.count():this.size);var s=this.slice(0,t);return Ht(this,1===i?s:s.concat(Qt(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var i=this.findLastEntry(t,e);return i?i[0]:-1},first:function(t){return this.get(0,t)},flatten:function(t){return Ht(this,_t(this,t,!1))},get:function(t,e){return(t=c(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,i){return i===t}),void 0,e)},has:function(t){return(t=c(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Ht(this,function(t,e){var i=Wt(t);return i.size=t.size&&2*t.size-1,i.__iterateUncached=function(i,s){var r=this,n=0;return t.__iterate((function(t){return(!n||!1!==i(e,n++,r))&&!1!==i(t,n++,r)}),s),n},i.__iteratorUncached=function(i,s){var r,n=t.__iterator(1,s),o=0;return new _((function(){return(!r||o%2)&&(r=n.next()).done?r:o%2?z(i,o++,e):z(i,o++,r.value,r)}))},i}(this,t))},interleave:function(){var t=[this].concat(Qt(arguments)),e=Xt(this.toSeq(),Q.of,t),i=e.flatten(!0);return e.size&&(i.size=e.size*t.length),Ht(this,i)},keySeq:function(){return Xi(0,this.size)},last:function(t){return this.get(-1,t)},skipWhile:function(t,e){return Ht(this,Vt(this,t,e,!1))},zip:function(){return Ht(this,Xt(this,is,[this].concat(Qt(arguments))))},zipAll:function(){return Ht(this,Xt(this,is,[this].concat(Qt(arguments)),!0))},zipWith:function(t){var e=Qt(arguments);return e[0]=this,Ht(this,Xt(this,t,e))}});var Qi=E.prototype;Qi[A]=!0,Qi[O]=!0,Oi(w,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}});var Ji=w.prototype;function qi(t,e,i,s,r,n){return qt(t.size),t.__iterate((function(t,n,o){r?(r=!1,i=t):i=e.call(s,i,t,n,o)}),n),i}function Zi(t,e){return e}function Ki(t,e){return[e,t]}function ts(t){return function(){return!t.apply(this,arguments)}}function es(t){return function(){return-t.apply(this,arguments)}}function is(){return Qt(arguments)}function ss(t,e){return t<e?1:t>e?-1:0}function rs(t,e){return t^e+2654435769+(t<<6)+(t>>2)}Ji.has=ji.includes,Ji.contains=Ji.includes,Ji.keys=Ji.values,Oi($,$i),Oi(Q,Qi),Oi(J,Ji);var ns=function(t){function e(t){return null==t?ls():Fi(t)?t:ls().withMutations((function(e){var i=w(t);qt(i.size),i.forEach((function(t){return e.add(t)}))}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(T(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Di);ns.isOrderedSet=Fi;var os,hs=ns.prototype;function as(t,e){var i=Object.create(hs);return i.size=t?t.size:0,i._map=t,i.__ownerID=e,i}function ls(){return os||(os=as(vi()))}hs[O]=!0,hs.zip=Qi.zip,hs.zipWith=Qi.zipWith,hs.zipAll=Qi.zipAll,hs.__empty=ls,hs.__make=as;var cs={LeftThenRight:-1,RightThenLeft:1},us=function(t,e){var i;!function(t){if(F(t))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(I(t))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(null===t||"object"!=typeof t)throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}(t);var s=function(n){var o=this;if(n instanceof s)return n;if(!(this instanceof s))return new s(n);if(!i){i=!0;var h=Object.keys(t),a=r._indices={};r._name=e,r._keys=h,r._defaultValues=t;for(var l=0;l<h.length;l++){var c=h[l];a[c]=l,r[c]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+gs(this)+' with property "'+c+'" since that property name is part of the Record API.'):ps(r,c)}}return this.__ownerID=void 0,this._values=ri().withMutations((function(t){t.setSize(o._keys.length),T(n).forEach((function(e,i){t.set(o._indices[i],e===o._defaultValues[i]?void 0:e)}))})),this},r=s.prototype=Object.create(ds);return r.constructor=s,e&&(s.displayName=e),s};us.prototype.toString=function(){for(var t,e=gs(this)+" { ",i=this._keys,s=0,r=i.length;s!==r;s++)e+=(s?", ":"")+(t=i[s])+": "+ie(this.get(t));return e+" }"},us.prototype.equals=function(t){return this===t||F(t)&&ys(this).equals(ys(t))},us.prototype.hashCode=function(){return ys(this).hashCode()},us.prototype.has=function(t){return this._indices.hasOwnProperty(t)},us.prototype.get=function(t,e){if(!this.has(t))return e;var i=this._indices[t],s=this._values.get(i);return void 0===s?this._defaultValues[t]:s},us.prototype.set=function(t,e){if(this.has(t)){var i=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(i!==this._values&&!this.__ownerID)return fs(this,i)}return this},us.prototype.remove=function(t){return this.set(t)},us.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:fs(this,t)},us.prototype.wasAltered=function(){return this._values.wasAltered()},us.prototype.toSeq=function(){return ys(this)},us.prototype.toJS=function(){return Li(this)},us.prototype.entries=function(){return this.__iterator(2)},us.prototype.__iterator=function(t,e){return ys(this).__iterator(t,e)},us.prototype.__iterate=function(t,e){return ys(this).__iterate(t,e)},us.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?fs(this,e,t):(this.__ownerID=t,this._values=e,this)},us.isRecord=F,us.getDescriptiveName=gs;var ds=us.prototype;function fs(t,e,i){var s=Object.create(Object.getPrototypeOf(t));return s._values=e,s.__ownerID=i,s}function gs(t){return t.constructor.displayName||t.constructor.name||"Record"}function ys(t){return it(t._keys.map((function(e){return[e,t.get(e)]})))}function ps(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){Jt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}catch(t){}}ds[R]=!0,ds[s]=ds.remove,ds.deleteIn=ds.removeIn=fe,ds.getIn=Gi,ds.hasIn=ji.hasIn,ds.merge=me,ds.mergeWith=xe,ds.mergeIn=Be,ds.mergeDeep=Ee,ds.mergeDeepWith=we,ds.mergeDeepIn=ke,ds.setIn=ue,ds.update=ye,ds.updateIn=pe,ds.withMutations=Re,ds.asMutable=Fe,ds.asImmutable=Ie,ds[V]=ds.entries,ds.toJSON=ds.toObject=ji.toObject,ds.inspect=ds.toSource=function(){return this.toString()};var ms,xs=function(t){function e(t,i){if(!(this instanceof e))return new e(t,i);if(this._value=t,this.size=void 0===i?1/0:Math.max(0,i),0===this.size){if(ms)return ms;ms=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return lt(this._value,t)},e.prototype.slice=function(t,i){var s=this.size;return d(t,i,s)?this:new e(this._value,g(i,s)-f(t,s))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return lt(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return lt(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var i=this.size,s=0;s!==i&&!1!==t(this._value,e?i-++s:s++,this););return s},e.prototype.__iterator=function(t,e){var i=this,s=this.size,r=0;return new _((function(){return r===s?{value:void 0,done:!0}:z(t,e?s-++r:r++,i._value)}))},e.prototype.equals=function(t){return t instanceof e?lt(this._value,t._value):Ii(this,t)},e}(Q);function Ss(t,e){return vs([],e||As,t,"",e&&e.length>2?[]:void 0,{"":t})}function vs(t,e,i,s,r,n){if("string"!=typeof i&&!I(i)&&(W(i)||N(i)||te(i))){if(~t.indexOf(i))throw new TypeError("Cannot convert circular structure to Immutable");t.push(i),r&&""!==s&&r.push(s);var o=e.call(n,s,j(i).map((function(s,n){return vs(t,e,s,n,r,i)})),r&&r.slice());return t.pop(),r&&r.pop(),o}return i}function As(t,e){return b(e)?e.toList():v(e)?e.toMap():e.toSet()}var bs="4.3.7",Cs=M;const Ms={version:bs,Collection:M,Iterable:M,Seq:j,Map:Le,OrderedMap:xi,List:ri,Stack:Mi,Set:Di,OrderedSet:ns,PairSorting:cs,Record:us,Range:Xi,Repeat:xs,is:lt,fromJS:Ss,hash:ft,isImmutable:I,isCollection:x,isKeyed:v,isIndexed:b,isAssociative:C,isOrdered:L,isValueObject:at,isPlainObject:te,isSeq:k,isList:si,isMap:ot,isOrderedMap:ht,isStack:Ci,isSet:Ri,isOrderedSet:Fi,isRecord:F,get:re,getIn:Hi,has:se,hasIn:Yi,merge:ve,mergeDeep:be,mergeWith:Ae,mergeDeepWith:Ce,remove:oe,removeIn:de,set:he,setIn:ce,update:ge,updateIn:ae}},570:t=>{function e(t,e,s){s=s||2;var n,o,h,a,u,d,g,y=e&&e.length,p=y?e[0]*s:t.length,m=i(t,0,p,s,!0),x=[];if(!m||m.next===m.prev)return x;if(y&&(m=function(t,e,s,r){var n,o,h,a=[];for(n=0,o=e.length;n<o;n++)(h=i(t,e[n]*r,n<o-1?e[n+1]*r:t.length,r,!1))===h.next&&(h.steiner=!0),a.push(f(h));for(a.sort(l),n=0;n<a.length;n++)s=c(a[n],s);return s}(t,e,m,s)),t.length>80*s){n=h=t[0],o=a=t[1];for(var S=s;S<p;S+=s)(u=t[S])<n&&(n=u),(d=t[S+1])<o&&(o=d),u>h&&(h=u),d>a&&(a=d);g=0!==(g=Math.max(h-n,a-o))?32767/g:0}return r(m,x,s,n,o,g,0),x}function i(t,e,i,s,r){var n,o;if(r===E(t,e,i,s)>0)for(n=e;n<i;n+=s)o=C(n,t[n],t[n+1],o);else for(n=i-s;n>=e;n-=s)o=C(n,t[n],t[n+1],o);return o&&m(o,o.next)&&(M(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,s=t;do{if(i=!1,s.steiner||!m(s,s.next)&&0!==p(s.prev,s,s.next))s=s.next;else{if(M(s),(s=e=s.prev)===s.next)break;i=!0}}while(i||s!==e);return e}function r(t,e,i,l,c,u,f){if(t){!f&&u&&function(t,e,i,s){var r=t;do{0===r.z&&(r.z=d(r.x,r.y,e,i,s)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,s,r,n,o,h,a,l=1;do{for(i=t,t=null,n=null,o=0;i;){for(o++,s=i,h=0,e=0;e<l&&(h++,s=s.nextZ);e++);for(a=l;h>0||a>0&&s;)0!==h&&(0===a||!s||i.z<=s.z)?(r=i,i=i.nextZ,h--):(r=s,s=s.nextZ,a--),n?n.nextZ=r:t=r,r.prevZ=n,n=r;i=s}n.nextZ=null,l*=2}while(o>1)}(r)}(t,l,c,u);for(var g,y,p=t;t.prev!==t.next;)if(g=t.prev,y=t.next,u?o(t,l,c,u):n(t))e.push(g.i/i|0),e.push(t.i/i|0),e.push(y.i/i|0),M(t),t=y.next,p=y.next;else if((t=y)===p){f?1===f?r(t=h(s(t),e,i),e,i,l,c,u,2):2===f&&a(t,e,i,l,c,u):r(s(t),e,i,l,c,u,1);break}}}function n(t){var e=t.prev,i=t,s=t.next;if(p(e,i,s)>=0)return!1;for(var r=e.x,n=i.x,o=s.x,h=e.y,a=i.y,l=s.y,c=r<n?r<o?r:o:n<o?n:o,u=h<a?h<l?h:l:a<l?a:l,d=r>n?r>o?r:o:n>o?n:o,f=h>a?h>l?h:l:a>l?a:l,y=s.next;y!==e;){if(y.x>=c&&y.x<=d&&y.y>=u&&y.y<=f&&g(r,h,n,a,o,l,y.x,y.y)&&p(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function o(t,e,i,s){var r=t.prev,n=t,o=t.next;if(p(r,n,o)>=0)return!1;for(var h=r.x,a=n.x,l=o.x,c=r.y,u=n.y,f=o.y,y=h<a?h<l?h:l:a<l?a:l,m=c<u?c<f?c:f:u<f?u:f,x=h>a?h>l?h:l:a>l?a:l,S=c>u?c>f?c:f:u>f?u:f,v=d(y,m,e,i,s),A=d(x,S,e,i,s),b=t.prevZ,C=t.nextZ;b&&b.z>=v&&C&&C.z<=A;){if(b.x>=y&&b.x<=x&&b.y>=m&&b.y<=S&&b!==r&&b!==o&&g(h,c,a,u,l,f,b.x,b.y)&&p(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,C.x>=y&&C.x<=x&&C.y>=m&&C.y<=S&&C!==r&&C!==o&&g(h,c,a,u,l,f,C.x,C.y)&&p(C.prev,C,C.next)>=0)return!1;C=C.nextZ}for(;b&&b.z>=v;){if(b.x>=y&&b.x<=x&&b.y>=m&&b.y<=S&&b!==r&&b!==o&&g(h,c,a,u,l,f,b.x,b.y)&&p(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;C&&C.z<=A;){if(C.x>=y&&C.x<=x&&C.y>=m&&C.y<=S&&C!==r&&C!==o&&g(h,c,a,u,l,f,C.x,C.y)&&p(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function h(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!m(n,o)&&x(n,r,r.next,o)&&A(n,o)&&A(o,n)&&(e.push(n.i/i|0),e.push(r.i/i|0),e.push(o.i/i|0),M(r),M(r.next),r=t=o),r=r.next}while(r!==t);return s(r)}function a(t,e,i,n,o,h){var a=t;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&y(a,l)){var c=b(a,l);return a=s(a,a.next),c=s(c,c.next),r(a,e,i,n,o,h,0),void r(c,e,i,n,o,h,0)}l=l.next}a=a.next}while(a!==t)}function l(t,e){return t.x-e.x}function c(t,e){var i=function(t,e){var i,s=e,r=t.x,n=t.y,o=-1/0;do{if(n<=s.y&&n>=s.next.y&&s.next.y!==s.y){var h=s.x+(n-s.y)*(s.next.x-s.x)/(s.next.y-s.y);if(h<=r&&h>o&&(o=h,i=s.x<s.next.x?s:s.next,h===r))return i}s=s.next}while(s!==e);if(!i)return null;var a,l=i,c=i.x,d=i.y,f=1/0;s=i;do{r>=s.x&&s.x>=c&&r!==s.x&&g(n<d?r:o,n,c,d,n<d?o:r,n,s.x,s.y)&&(a=Math.abs(n-s.y)/(r-s.x),A(s,t)&&(a<f||a===f&&(s.x>i.x||s.x===i.x&&u(i,s)))&&(i=s,f=a)),s=s.next}while(s!==l);return i}(t,e);if(!i)return e;var r=b(i,t);return s(r,r.next),s(i,i.next)}function u(t,e){return p(t.prev,t,e.prev)<0&&p(e.next,t,t.next)<0}function d(t,e,i,s,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-s)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,s,r,n,o,h){return(r-o)*(e-h)>=(t-o)*(n-h)&&(t-o)*(s-h)>=(i-o)*(e-h)&&(i-o)*(n-h)>=(r-o)*(s-h)}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&x(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(A(t,e)&&A(e,t)&&function(t,e){var i=t,s=!1,r=(t.x+e.x)/2,n=(t.y+e.y)/2;do{i.y>n!=i.next.y>n&&i.next.y!==i.y&&r<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next}while(i!==t);return s}(t,e)&&(p(t.prev,t,e.prev)||p(t,e.prev,e))||m(t,e)&&p(t.prev,t,t.next)>0&&p(e.prev,e,e.next)>0)}function p(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function x(t,e,i,s){var r=v(p(t,e,i)),n=v(p(t,e,s)),o=v(p(i,s,t)),h=v(p(i,s,e));return r!==n&&o!==h||!(0!==r||!S(t,i,e))||!(0!==n||!S(t,s,e))||!(0!==o||!S(i,t,s))||!(0!==h||!S(i,e,s))}function S(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function v(t){return t>0?1:t<0?-1:0}function A(t,e){return p(t.prev,t,t.next)<0?p(t,e,t.next)>=0&&p(t,t.prev,e)>=0:p(t,e,t.prev)<0||p(t,t.next,e)<0}function b(t,e){var i=new T(t.i,t.x,t.y),s=new T(e.i,e.x,e.y),r=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,s.next=i,i.prev=s,n.next=s,s.prev=n,s}function C(t,e,i,s){var r=new T(t,e,i);return s?(r.next=s.next,r.prev=s,s.next.prev=r,s.next=r):(r.prev=r,r.next=r),r}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,i,s){for(var r=0,n=e,o=i-s;n<i;n+=s)r+=(t[o]-t[n])*(t[n+1]+t[o+1]),o=n;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,s){var r=e&&e.length,n=r?e[0]*i:t.length,o=Math.abs(E(t,0,n,i));if(r)for(var h=0,a=e.length;h<a;h++){var l=e[h]*i,c=h<a-1?e[h+1]*i:t.length;o-=Math.abs(E(t,l,c,i))}var u=0;for(h=0;h<s.length;h+=3){var d=s[h]*i,f=s[h+1]*i,g=s[h+2]*i;u+=Math.abs((t[d]-t[g])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[g+1]-t[d+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},s=0,r=0;r<t.length;r++){for(var n=0;n<t[r].length;n++)for(var o=0;o<e;o++)i.vertices.push(t[r][n][o]);r>0&&(s+=t[r-1].length,i.holes.push(s))}return i}}}]);